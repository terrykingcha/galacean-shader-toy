function a2(n,r){return r.forEach(function(a){a&&typeof a!="string"&&!Array.isArray(a)&&Object.keys(a).forEach(function(e){if(e!=="default"&&!(e in n)){var t=Object.getOwnPropertyDescriptor(a,e);Object.defineProperty(n,e,t.get?t:{enumerable:!0,get:function(){return a[e]}})}})}),Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}const i2=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&e(o)}).observe(document,{childList:!0,subtree:!0});function a(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerpolicy&&(i.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?i.credentials="include":t.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function e(t){if(t.ep)return;t.ep=!0;const i=a(t);fetch(t.href,i)}};i2();var w={exports:{}},an={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Dx=Object.getOwnPropertySymbols,o2=Object.prototype.hasOwnProperty,s2=Object.prototype.propertyIsEnumerable;function l2(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}function u2(){try{if(!Object.assign)return!1;var n=new String("abc");if(n[5]="de",Object.getOwnPropertyNames(n)[0]==="5")return!1;for(var r={},a=0;a<10;a++)r["_"+String.fromCharCode(a)]=a;var e=Object.getOwnPropertyNames(r).map(function(i){return r[i]});if(e.join("")!=="0123456789")return!1;var t={};return"abcdefghijklmnopqrst".split("").forEach(function(i){t[i]=i}),Object.keys(Object.assign({},t)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var GE=u2()?Object.assign:function(n,r){for(var a,e=l2(n),t,i=1;i<arguments.length;i++){a=Object(arguments[i]);for(var o in a)o2.call(a,o)&&(e[o]=a[o]);if(Dx){t=Dx(a);for(var s=0;s<t.length;s++)s2.call(a,t[s])&&(e[t[s]]=a[t[s]])}}return e};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B0=GE,xc=60103,HE=60106;an.Fragment=60107;an.StrictMode=60108;an.Profiler=60114;var jE=60109,WE=60110,$E=60112;an.Suspense=60113;var XE=60115,KE=60116;if(typeof Symbol=="function"&&Symbol.for){var Vi=Symbol.for;xc=Vi("react.element"),HE=Vi("react.portal"),an.Fragment=Vi("react.fragment"),an.StrictMode=Vi("react.strict_mode"),an.Profiler=Vi("react.profiler"),jE=Vi("react.provider"),WE=Vi("react.context"),$E=Vi("react.forward_ref"),an.Suspense=Vi("react.suspense"),XE=Vi("react.memo"),KE=Vi("react.lazy")}var Bx=typeof Symbol=="function"&&Symbol.iterator;function c2(n){return n===null||typeof n!="object"?null:(n=Bx&&n[Bx]||n["@@iterator"],typeof n=="function"?n:null)}function md(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var YE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},QE={};function Sc(n,r,a){this.props=n,this.context=r,this.refs=QE,this.updater=a||YE}Sc.prototype.isReactComponent={};Sc.prototype.setState=function(n,r){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error(md(85));this.updater.enqueueSetState(this,n,r,"setState")};Sc.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function qE(){}qE.prototype=Sc.prototype;function k0(n,r,a){this.props=n,this.context=r,this.refs=QE,this.updater=a||YE}var V0=k0.prototype=new qE;V0.constructor=k0;B0(V0,Sc.prototype);V0.isPureReactComponent=!0;var U0={current:null},JE=Object.prototype.hasOwnProperty,ZE={key:!0,ref:!0,__self:!0,__source:!0};function eT(n,r,a){var e,t={},i=null,o=null;if(r!=null)for(e in r.ref!==void 0&&(o=r.ref),r.key!==void 0&&(i=""+r.key),r)JE.call(r,e)&&!ZE.hasOwnProperty(e)&&(t[e]=r[e]);var s=arguments.length-2;if(s===1)t.children=a;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];t.children=l}if(n&&n.defaultProps)for(e in s=n.defaultProps,s)t[e]===void 0&&(t[e]=s[e]);return{$$typeof:xc,type:n,key:i,ref:o,props:t,_owner:U0.current}}function f2(n,r){return{$$typeof:xc,type:n.type,key:r,ref:n.ref,props:n.props,_owner:n._owner}}function z0(n){return typeof n=="object"&&n!==null&&n.$$typeof===xc}function d2(n){var r={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(a){return r[a]})}var kx=/\/+/g;function E_(n,r){return typeof n=="object"&&n!==null&&n.key!=null?d2(""+n.key):r.toString(36)}function Dh(n,r,a,e,t){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case xc:case HE:o=!0}}if(o)return o=n,t=t(o),n=e===""?"."+E_(o,0):e,Array.isArray(t)?(a="",n!=null&&(a=n.replace(kx,"$&/")+"/"),Dh(t,r,a,"",function(u){return u})):t!=null&&(z0(t)&&(t=f2(t,a+(!t.key||o&&o.key===t.key?"":(""+t.key).replace(kx,"$&/")+"/")+n)),r.push(t)),1;if(o=0,e=e===""?".":e+":",Array.isArray(n))for(var s=0;s<n.length;s++){i=n[s];var l=e+E_(i,s);o+=Dh(i,r,a,l,t)}else if(l=c2(n),typeof l=="function")for(n=l.call(n),s=0;!(i=n.next()).done;)i=i.value,l=e+E_(i,s++),o+=Dh(i,r,a,l,t);else if(i==="object")throw r=""+n,Error(md(31,r==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":r));return o}function Qd(n,r,a){if(n==null)return n;var e=[],t=0;return Dh(n,e,"","",function(i){return r.call(a,i,t++)}),e}function h2(n){if(n._status===-1){var r=n._result;r=r(),n._status=0,n._result=r,r.then(function(a){n._status===0&&(a=a.default,n._status=1,n._result=a)},function(a){n._status===0&&(n._status=2,n._result=a)})}if(n._status===1)return n._result;throw n._result}var tT={current:null};function ps(){var n=tT.current;if(n===null)throw Error(md(321));return n}var v2={ReactCurrentDispatcher:tT,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:U0,IsSomeRendererActing:{current:!1},assign:B0};an.Children={map:Qd,forEach:function(n,r,a){Qd(n,function(){r.apply(this,arguments)},a)},count:function(n){var r=0;return Qd(n,function(){r++}),r},toArray:function(n){return Qd(n,function(r){return r})||[]},only:function(n){if(!z0(n))throw Error(md(143));return n}};an.Component=Sc;an.PureComponent=k0;an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v2;an.cloneElement=function(n,r,a){if(n==null)throw Error(md(267,n));var e=B0({},n.props),t=n.key,i=n.ref,o=n._owner;if(r!=null){if(r.ref!==void 0&&(i=r.ref,o=U0.current),r.key!==void 0&&(t=""+r.key),n.type&&n.type.defaultProps)var s=n.type.defaultProps;for(l in r)JE.call(r,l)&&!ZE.hasOwnProperty(l)&&(e[l]=r[l]===void 0&&s!==void 0?s[l]:r[l])}var l=arguments.length-2;if(l===1)e.children=a;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];e.children=s}return{$$typeof:xc,type:n.type,key:t,ref:i,props:e,_owner:o}};an.createContext=function(n,r){return r===void 0&&(r=null),n={$$typeof:WE,_calculateChangedBits:r,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null},n.Provider={$$typeof:jE,_context:n},n.Consumer=n};an.createElement=eT;an.createFactory=function(n){var r=eT.bind(null,n);return r.type=n,r};an.createRef=function(){return{current:null}};an.forwardRef=function(n){return{$$typeof:$E,render:n}};an.isValidElement=z0;an.lazy=function(n){return{$$typeof:KE,_payload:{_status:-1,_result:n},_init:h2}};an.memo=function(n,r){return{$$typeof:XE,type:n,compare:r===void 0?null:r}};an.useCallback=function(n,r){return ps().useCallback(n,r)};an.useContext=function(n,r){return ps().useContext(n,r)};an.useDebugValue=function(){};an.useEffect=function(n,r){return ps().useEffect(n,r)};an.useImperativeHandle=function(n,r,a){return ps().useImperativeHandle(n,r,a)};an.useLayoutEffect=function(n,r){return ps().useLayoutEffect(n,r)};an.useMemo=function(n,r){return ps().useMemo(n,r)};an.useReducer=function(n,r,a){return ps().useReducer(n,r,a)};an.useRef=function(n){return ps().useRef(n)};an.useState=function(n){return ps().useState(n)};an.version="17.0.2";w.exports=an;var Wt=w.exports,pp=a2({__proto__:null,default:Wt},[w.exports]),kl={exports:{}},Ii={},nT={exports:{}},rT={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){var r,a,e,t;if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();n.unstable_now=function(){return o.now()-s}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var l=null,u=null,c=function(){if(l!==null)try{var k=n.unstable_now();l(!0,k),l=null}catch(V){throw setTimeout(c,0),V}};r=function(k){l!==null?setTimeout(r,0,k):(l=k,setTimeout(c,0))},a=function(k,V){u=setTimeout(k,V)},e=function(){clearTimeout(u)},n.unstable_shouldYield=function(){return!1},t=n.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,d=window.clearTimeout;if(typeof console!="undefined"){var h=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof h!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var _=!1,p=null,v=-1,y=5,m=0;n.unstable_shouldYield=function(){return n.unstable_now()>=m},t=function(){},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<k?Math.floor(1e3/k):5};var g=new MessageChannel,x=g.port2;g.port1.onmessage=function(){if(p!==null){var k=n.unstable_now();m=k+y;try{p(!0,k)?x.postMessage(null):(_=!1,p=null)}catch(V){throw x.postMessage(null),V}}else _=!1},r=function(k){p=k,_||(_=!0,x.postMessage(null))},a=function(k,V){v=f(function(){k(n.unstable_now())},V)},e=function(){d(v),v=-1}}function b(k,V){var U=k.length;k.push(V);e:for(;;){var j=U-1>>>1,G=k[j];if(G!==void 0&&0<E(G,V))k[j]=V,k[U]=G,U=j;else break e}}function S(k){return k=k[0],k===void 0?null:k}function C(k){var V=k[0];if(V!==void 0){var U=k.pop();if(U!==V){k[0]=U;e:for(var j=0,G=k.length;j<G;){var $=2*(j+1)-1,W=k[$],K=$+1,q=k[K];if(W!==void 0&&0>E(W,U))q!==void 0&&0>E(q,W)?(k[j]=q,k[K]=U,j=K):(k[j]=W,k[$]=U,j=$);else if(q!==void 0&&0>E(q,U))k[j]=q,k[K]=U,j=K;else break e}}return V}return null}function E(k,V){var U=k.sortIndex-V.sortIndex;return U!==0?U:k.id-V.id}var T=[],M=[],L=1,F=null,N=3,I=!1,O=!1,P=!1;function R(k){for(var V=S(M);V!==null;){if(V.callback===null)C(M);else if(V.startTime<=k)C(M),V.sortIndex=V.expirationTime,b(T,V);else break;V=S(M)}}function A(k){if(P=!1,R(k),!O)if(S(T)!==null)O=!0,r(D);else{var V=S(M);V!==null&&a(A,V.startTime-k)}}function D(k,V){O=!1,P&&(P=!1,e()),I=!0;var U=N;try{for(R(V),F=S(T);F!==null&&(!(F.expirationTime>V)||k&&!n.unstable_shouldYield());){var j=F.callback;if(typeof j=="function"){F.callback=null,N=F.priorityLevel;var G=j(F.expirationTime<=V);V=n.unstable_now(),typeof G=="function"?F.callback=G:F===S(T)&&C(T),R(V)}else C(T);F=S(T)}if(F!==null)var $=!0;else{var W=S(M);W!==null&&a(A,W.startTime-V),$=!1}return $}finally{F=null,N=U,I=!1}}var B=t;n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_continueExecution=function(){O||I||(O=!0,r(D))},n.unstable_getCurrentPriorityLevel=function(){return N},n.unstable_getFirstCallbackNode=function(){return S(T)},n.unstable_next=function(k){switch(N){case 1:case 2:case 3:var V=3;break;default:V=N}var U=N;N=V;try{return k()}finally{N=U}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=B,n.unstable_runWithPriority=function(k,V){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var U=N;N=k;try{return V()}finally{N=U}},n.unstable_scheduleCallback=function(k,V,U){var j=n.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?j+U:j):U=j,k){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=U+G,k={id:L++,callback:V,priorityLevel:k,startTime:U,expirationTime:G,sortIndex:-1},U>j?(k.sortIndex=U,b(M,k),S(T)===null&&k===S(M)&&(P?e():P=!0,a(A,U-j))):(k.sortIndex=G,b(T,k),O||I||(O=!0,r(D))),k},n.unstable_wrapCallback=function(k){var V=N;return function(){var U=N;N=V;try{return k.apply(this,arguments)}finally{N=U}}}})(rT);nT.exports=rT;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _p=w.exports,Bn=GE,Cr=nT.exports;function ke(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!_p)throw Error(ke(227));var aT=new Set,Bf={};function Wl(n,r){Ku(n,r),Ku(n+"Capture",r)}function Ku(n,r){for(Bf[n]=r,n=0;n<r.length;n++)aT.add(r[n])}var ss=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),p2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vx=Object.prototype.hasOwnProperty,Ux={},zx={};function _2(n){return Vx.call(zx,n)?!0:Vx.call(Ux,n)?!1:p2.test(n)?zx[n]=!0:(Ux[n]=!0,!1)}function g2(n,r,a,e){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return e?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function m2(n,r,a,e){if(r===null||typeof r=="undefined"||g2(n,r,a,e))return!0;if(e)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function pa(n,r,a,e,t,i,o){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=e,this.attributeNamespace=t,this.mustUseProperty=a,this.propertyName=n,this.type=r,this.sanitizeURL=i,this.removeEmptyString=o}var Br={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Br[n]=new pa(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];Br[r]=new pa(r,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Br[n]=new pa(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Br[n]=new pa(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Br[n]=new pa(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Br[n]=new pa(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Br[n]=new pa(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Br[n]=new pa(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Br[n]=new pa(n,5,!1,n.toLowerCase(),null,!1,!1)});var G0=/[\-:]([a-z])/g;function H0(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(G0,H0);Br[r]=new pa(r,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(G0,H0);Br[r]=new pa(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(G0,H0);Br[r]=new pa(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Br[n]=new pa(n,1,!1,n.toLowerCase(),null,!1,!1)});Br.xlinkHref=new pa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Br[n]=new pa(n,1,!1,n.toLowerCase(),null,!0,!0)});function j0(n,r,a,e){var t=Br.hasOwnProperty(r)?Br[r]:null,i=t!==null?t.type===0:e?!1:!(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N");i||(m2(r,a,t,e)&&(a=null),e||t===null?_2(r)&&(a===null?n.removeAttribute(r):n.setAttribute(r,""+a)):t.mustUseProperty?n[t.propertyName]=a===null?t.type===3?!1:"":a:(r=t.attributeName,e=t.attributeNamespace,a===null?n.removeAttribute(r):(t=t.type,a=t===3||t===4&&a===!0?"":""+a,e?n.setAttributeNS(e,r,a):n.setAttribute(r,a))))}var $l=_p.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,of=60103,xl=60106,Ps=60107,W0=60108,vf=60114,$0=60109,X0=60110,gp=60112,pf=60113,sv=60120,mp=60115,K0=60116,Y0=60121,Q0=60128,iT=60129,q0=60130,bg=60131;if(typeof Symbol=="function"&&Symbol.for){var xr=Symbol.for;of=xr("react.element"),xl=xr("react.portal"),Ps=xr("react.fragment"),W0=xr("react.strict_mode"),vf=xr("react.profiler"),$0=xr("react.provider"),X0=xr("react.context"),gp=xr("react.forward_ref"),pf=xr("react.suspense"),sv=xr("react.suspense_list"),mp=xr("react.memo"),K0=xr("react.lazy"),Y0=xr("react.block"),xr("react.scope"),Q0=xr("react.opaque.id"),iT=xr("react.debug_trace_mode"),q0=xr("react.offscreen"),bg=xr("react.legacy_hidden")}var Gx=typeof Symbol=="function"&&Symbol.iterator;function Dc(n){return n===null||typeof n!="object"?null:(n=Gx&&n[Gx]||n["@@iterator"],typeof n=="function"?n:null)}var T_;function sf(n){if(T_===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);T_=r&&r[1]||""}return`
`+T_+n}var R_=!1;function qd(n,r){if(!n||R_)return"";R_=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(l){var e=l}Reflect.construct(n,[],r)}else{try{r.call()}catch(l){e=l}n.call(r.prototype)}else{try{throw Error()}catch(l){e=l}n()}}catch(l){if(l&&e&&typeof l.stack=="string"){for(var t=l.stack.split(`
`),i=e.stack.split(`
`),o=t.length-1,s=i.length-1;1<=o&&0<=s&&t[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(t[o]!==i[s]){if(o!==1||s!==1)do if(o--,s--,0>s||t[o]!==i[s])return`
`+t[o].replace(" at new "," at ");while(1<=o&&0<=s);break}}}finally{R_=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?sf(n):""}function y2(n){switch(n.tag){case 5:return sf(n.type);case 16:return sf("Lazy");case 13:return sf("Suspense");case 19:return sf("SuspenseList");case 0:case 2:case 15:return n=qd(n.type,!1),n;case 11:return n=qd(n.type.render,!1),n;case 22:return n=qd(n.type._render,!1),n;case 1:return n=qd(n.type,!0),n;default:return""}}function Ou(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Ps:return"Fragment";case xl:return"Portal";case vf:return"Profiler";case W0:return"StrictMode";case pf:return"Suspense";case sv:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case X0:return(n.displayName||"Context")+".Consumer";case $0:return(n._context.displayName||"Context")+".Provider";case gp:var r=n.render;return r=r.displayName||r.name||"",n.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case mp:return Ou(n.type);case Y0:return Ou(n._render);case K0:r=n._payload,n=n._init;try{return Ou(n(r))}catch{}}return null}function Ks(n){switch(typeof n){case"boolean":case"number":case"object":case"string":case"undefined":return n;default:return""}}function oT(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function x2(n){var r=oT(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),e=""+n[r];if(!n.hasOwnProperty(r)&&typeof a!="undefined"&&typeof a.get=="function"&&typeof a.set=="function"){var t=a.get,i=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return t.call(this)},set:function(o){e=""+o,i.call(this,o)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return e},setValue:function(o){e=""+o},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Jd(n){n._valueTracker||(n._valueTracker=x2(n))}function sT(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),e="";return n&&(e=oT(n)?n.checked?"true":"false":n.value),n=e,n!==a?(r.setValue(n),!0):!1}function lv(n){if(n=n||(typeof document!="undefined"?document:void 0),typeof n=="undefined")return null;try{return n.activeElement||n.body}catch{return n.body}}function Cg(n,r){var a=r.checked;return Bn({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a!=null?a:n._wrapperState.initialChecked})}function Hx(n,r){var a=r.defaultValue==null?"":r.defaultValue,e=r.checked!=null?r.checked:r.defaultChecked;a=Ks(r.value!=null?r.value:a),n._wrapperState={initialChecked:e,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function lT(n,r){r=r.checked,r!=null&&j0(n,"checked",r,!1)}function Eg(n,r){lT(n,r);var a=Ks(r.value),e=r.type;if(a!=null)e==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(e==="submit"||e==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?Tg(n,r.type,a):r.hasOwnProperty("defaultValue")&&Tg(n,r.type,Ks(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function jx(n,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var e=r.type;if(!(e!=="submit"&&e!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,a||r===n.value||(n.value=r),n.defaultValue=r}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Tg(n,r,a){(r!=="number"||lv(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}function S2(n){var r="";return _p.Children.forEach(n,function(a){a!=null&&(r+=a)}),r}function Rg(n,r){return n=Bn({children:void 0},r),(r=S2(r.children))&&(n.children=r),n}function Iu(n,r,a,e){if(n=n.options,r){r={};for(var t=0;t<a.length;t++)r["$"+a[t]]=!0;for(a=0;a<n.length;a++)t=r.hasOwnProperty("$"+n[a].value),n[a].selected!==t&&(n[a].selected=t),t&&e&&(n[a].defaultSelected=!0)}else{for(a=""+Ks(a),r=null,t=0;t<n.length;t++){if(n[t].value===a){n[t].selected=!0,e&&(n[t].defaultSelected=!0);return}r!==null||n[t].disabled||(r=n[t])}r!==null&&(r.selected=!0)}}function Ag(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(ke(91));return Bn({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Wx(n,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(ke(92));if(Array.isArray(a)){if(!(1>=a.length))throw Error(ke(93));a=a[0]}r=a}r==null&&(r=""),a=r}n._wrapperState={initialValue:Ks(a)}}function uT(n,r){var a=Ks(r.value),e=Ks(r.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),r.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),e!=null&&(n.defaultValue=""+e)}function $x(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}var wg={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function cT(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pg(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?cT(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Zd,fT=function(n){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(r,a,e,t){MSApp.execUnsafeLocalFunction(function(){return n(r,a,e,t)})}:n}(function(n,r){if(n.namespaceURI!==wg.svg||"innerHTML"in n)n.innerHTML=r;else{for(Zd=Zd||document.createElement("div"),Zd.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Zd.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function kf(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var _f={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},b2=["Webkit","ms","Moz","O"];Object.keys(_f).forEach(function(n){b2.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),_f[r]=_f[n]})});function dT(n,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||_f.hasOwnProperty(n)&&_f[n]?(""+r).trim():r+"px"}function hT(n,r){n=n.style;for(var a in r)if(r.hasOwnProperty(a)){var e=a.indexOf("--")===0,t=dT(a,r[a],e);a==="float"&&(a="cssFloat"),e?n.setProperty(a,t):n[a]=t}}var C2=Bn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mg(n,r){if(r){if(C2[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(ke(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(ke(60));if(!(typeof r.dangerouslySetInnerHTML=="object"&&"__html"in r.dangerouslySetInnerHTML))throw Error(ke(61))}if(r.style!=null&&typeof r.style!="object")throw Error(ke(62))}}function Og(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function J0(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ig=null,Lu=null,Nu=null;function Xx(n){if(n=xd(n)){if(typeof Ig!="function")throw Error(ke(280));var r=n.stateNode;r&&(r=Ep(r),Ig(n.stateNode,n.type,r))}}function vT(n){Lu?Nu?Nu.push(n):Nu=[n]:Lu=n}function pT(){if(Lu){var n=Lu,r=Nu;if(Nu=Lu=null,Xx(n),r)for(n=0;n<r.length;n++)Xx(r[n])}}function Z0(n,r){return n(r)}function _T(n,r,a,e,t){return n(r,a,e,t)}function ey(){}var gT=Z0,Sl=!1,A_=!1;function ty(){(Lu!==null||Nu!==null)&&(ey(),pT())}function E2(n,r,a){if(A_)return n(r,a);A_=!0;try{return gT(n,r,a)}finally{A_=!1,ty()}}function Vf(n,r){var a=n.stateNode;if(a===null)return null;var e=Ep(a);if(e===null)return null;a=e[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(e=!e.disabled)||(n=n.type,e=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!e;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(ke(231,r,typeof a));return a}var Lg=!1;if(ss)try{var Bc={};Object.defineProperty(Bc,"passive",{get:function(){Lg=!0}}),window.addEventListener("test",Bc,Bc),window.removeEventListener("test",Bc,Bc)}catch{Lg=!1}function T2(n,r,a,e,t,i,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{r.apply(a,u)}catch(c){this.onError(c)}}var gf=!1,uv=null,cv=!1,Ng=null,R2={onError:function(n){gf=!0,uv=n}};function A2(n,r,a,e,t,i,o,s,l){gf=!1,uv=null,T2.apply(R2,arguments)}function w2(n,r,a,e,t,i,o,s,l){if(A2.apply(this,arguments),gf){if(gf){var u=uv;gf=!1,uv=null}else throw Error(ke(198));cv||(cv=!0,Ng=u)}}function Xl(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&1026)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function mT(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function Kx(n){if(Xl(n)!==n)throw Error(ke(188))}function P2(n){var r=n.alternate;if(!r){if(r=Xl(n),r===null)throw Error(ke(188));return r!==n?null:n}for(var a=n,e=r;;){var t=a.return;if(t===null)break;var i=t.alternate;if(i===null){if(e=t.return,e!==null){a=e;continue}break}if(t.child===i.child){for(i=t.child;i;){if(i===a)return Kx(t),n;if(i===e)return Kx(t),r;i=i.sibling}throw Error(ke(188))}if(a.return!==e.return)a=t,e=i;else{for(var o=!1,s=t.child;s;){if(s===a){o=!0,a=t,e=i;break}if(s===e){o=!0,e=t,a=i;break}s=s.sibling}if(!o){for(s=i.child;s;){if(s===a){o=!0,a=i,e=t;break}if(s===e){o=!0,e=i,a=t;break}s=s.sibling}if(!o)throw Error(ke(189))}}if(a.alternate!==e)throw Error(ke(190))}if(a.tag!==3)throw Error(ke(188));return a.stateNode.current===a?n:r}function yT(n){if(n=P2(n),!n)return null;for(var r=n;;){if(r.tag===5||r.tag===6)return r;if(r.child)r.child.return=r,r=r.child;else{if(r===n)break;for(;!r.sibling;){if(!r.return||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}}return null}function Yx(n,r){for(var a=n.alternate;r!==null;){if(r===n||r===a)return!0;r=r.return}return!1}var xT,ny,ST,bT,Fg=!1,po=[],Vs=null,Us=null,zs=null,Uf=new Map,zf=new Map,kc=[],Qx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dg(n,r,a,e,t){return{blockedOn:n,domEventName:r,eventSystemFlags:a|16,nativeEvent:t,targetContainers:[e]}}function qx(n,r){switch(n){case"focusin":case"focusout":Vs=null;break;case"dragenter":case"dragleave":Us=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":Uf.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":zf.delete(r.pointerId)}}function Vc(n,r,a,e,t,i){return n===null||n.nativeEvent!==i?(n=Dg(r,a,e,t,i),r!==null&&(r=xd(r),r!==null&&ny(r)),n):(n.eventSystemFlags|=e,r=n.targetContainers,t!==null&&r.indexOf(t)===-1&&r.push(t),n)}function M2(n,r,a,e,t){switch(r){case"focusin":return Vs=Vc(Vs,n,r,a,e,t),!0;case"dragenter":return Us=Vc(Us,n,r,a,e,t),!0;case"mouseover":return zs=Vc(zs,n,r,a,e,t),!0;case"pointerover":var i=t.pointerId;return Uf.set(i,Vc(Uf.get(i)||null,n,r,a,e,t)),!0;case"gotpointercapture":return i=t.pointerId,zf.set(i,Vc(zf.get(i)||null,n,r,a,e,t)),!0}return!1}function O2(n){var r=bl(n.target);if(r!==null){var a=Xl(r);if(a!==null){if(r=a.tag,r===13){if(r=mT(a),r!==null){n.blockedOn=r,bT(n.lanePriority,function(){Cr.unstable_runWithPriority(n.priority,function(){ST(a)})});return}}else if(r===3&&a.stateNode.hydrate){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Bh(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=oy(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(a!==null)return r=xd(a),r!==null&&ny(r),n.blockedOn=a,!1;r.shift()}return!0}function Jx(n,r,a){Bh(n)&&a.delete(r)}function I2(){for(Fg=!1;0<po.length;){var n=po[0];if(n.blockedOn!==null){n=xd(n.blockedOn),n!==null&&xT(n);break}for(var r=n.targetContainers;0<r.length;){var a=oy(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(a!==null){n.blockedOn=a;break}r.shift()}n.blockedOn===null&&po.shift()}Vs!==null&&Bh(Vs)&&(Vs=null),Us!==null&&Bh(Us)&&(Us=null),zs!==null&&Bh(zs)&&(zs=null),Uf.forEach(Jx),zf.forEach(Jx)}function Uc(n,r){n.blockedOn===r&&(n.blockedOn=null,Fg||(Fg=!0,Cr.unstable_scheduleCallback(Cr.unstable_NormalPriority,I2)))}function CT(n){function r(t){return Uc(t,n)}if(0<po.length){Uc(po[0],n);for(var a=1;a<po.length;a++){var e=po[a];e.blockedOn===n&&(e.blockedOn=null)}}for(Vs!==null&&Uc(Vs,n),Us!==null&&Uc(Us,n),zs!==null&&Uc(zs,n),Uf.forEach(r),zf.forEach(r),a=0;a<kc.length;a++)e=kc[a],e.blockedOn===n&&(e.blockedOn=null);for(;0<kc.length&&(a=kc[0],a.blockedOn===null);)O2(a),a.blockedOn===null&&kc.shift()}function eh(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var xu={animationend:eh("Animation","AnimationEnd"),animationiteration:eh("Animation","AnimationIteration"),animationstart:eh("Animation","AnimationStart"),transitionend:eh("Transition","TransitionEnd")},w_={},ET={};ss&&(ET=document.createElement("div").style,"AnimationEvent"in window||(delete xu.animationend.animation,delete xu.animationiteration.animation,delete xu.animationstart.animation),"TransitionEvent"in window||delete xu.transitionend.transition);function yp(n){if(w_[n])return w_[n];if(!xu[n])return n;var r=xu[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in ET)return w_[n]=r[a];return n}var TT=yp("animationend"),RT=yp("animationiteration"),AT=yp("animationstart"),wT=yp("transitionend"),PT=new Map,ry=new Map,L2=["abort","abort",TT,"animationEnd",RT,"animationIteration",AT,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",wT,"transitionEnd","waiting","waiting"];function ay(n,r){for(var a=0;a<n.length;a+=2){var e=n[a],t=n[a+1];t="on"+(t[0].toUpperCase()+t.slice(1)),ry.set(e,r),PT.set(e,t),Wl(t,[e])}}var N2=Cr.unstable_now;N2();var An=8;function vu(n){if((1&n)!==0)return An=15,1;if((2&n)!==0)return An=14,2;if((4&n)!==0)return An=13,4;var r=24&n;return r!==0?(An=12,r):(n&32)!==0?(An=11,32):(r=192&n,r!==0?(An=10,r):(n&256)!==0?(An=9,256):(r=3584&n,r!==0?(An=8,r):(n&4096)!==0?(An=7,4096):(r=4186112&n,r!==0?(An=6,r):(r=62914560&n,r!==0?(An=5,r):n&67108864?(An=4,67108864):(n&134217728)!==0?(An=3,134217728):(r=805306368&n,r!==0?(An=2,r):(1073741824&n)!==0?(An=1,1073741824):(An=8,n))))))}function F2(n){switch(n){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function D2(n){switch(n){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(ke(358,n))}}function Gf(n,r){var a=n.pendingLanes;if(a===0)return An=0;var e=0,t=0,i=n.expiredLanes,o=n.suspendedLanes,s=n.pingedLanes;if(i!==0)e=i,t=An=15;else if(i=a&134217727,i!==0){var l=i&~o;l!==0?(e=vu(l),t=An):(s&=i,s!==0&&(e=vu(s),t=An))}else i=a&~o,i!==0?(e=vu(i),t=An):s!==0&&(e=vu(s),t=An);if(e===0)return 0;if(e=31-Ys(e),e=a&((0>e?0:1<<e)<<1)-1,r!==0&&r!==e&&(r&o)===0){if(vu(r),t<=An)return r;An=t}if(r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=e;0<r;)a=31-Ys(r),t=1<<a,e|=n[a],r&=~t;return e}function MT(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function fv(n,r){switch(n){case 15:return 1;case 14:return 2;case 12:return n=pu(24&~r),n===0?fv(10,r):n;case 10:return n=pu(192&~r),n===0?fv(8,r):n;case 8:return n=pu(3584&~r),n===0&&(n=pu(4186112&~r),n===0&&(n=512)),n;case 2:return r=pu(805306368&~r),r===0&&(r=268435456),r}throw Error(ke(358,n))}function pu(n){return n&-n}function P_(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function xp(n,r,a){n.pendingLanes|=r;var e=r-1;n.suspendedLanes&=e,n.pingedLanes&=e,n=n.eventTimes,r=31-Ys(r),n[r]=a}var Ys=Math.clz32?Math.clz32:V2,B2=Math.log,k2=Math.LN2;function V2(n){return n===0?32:31-(B2(n)/k2|0)|0}var U2=Cr.unstable_UserBlockingPriority,z2=Cr.unstable_runWithPriority,kh=!0;function G2(n,r,a,e){Sl||ey();var t=iy,i=Sl;Sl=!0;try{_T(t,n,r,a,e)}finally{(Sl=i)||ty()}}function H2(n,r,a,e){z2(U2,iy.bind(null,n,r,a,e))}function iy(n,r,a,e){if(kh){var t;if((t=(r&4)===0)&&0<po.length&&-1<Qx.indexOf(n))n=Dg(null,n,r,a,e),po.push(n);else{var i=oy(n,r,a,e);if(i===null)t&&qx(n,e);else{if(t){if(-1<Qx.indexOf(n)){n=Dg(i,n,r,a,e),po.push(n);return}if(M2(i,n,r,a,e))return;qx(n,e)}HT(n,r,e,null,a)}}}}function oy(n,r,a,e){var t=J0(e);if(t=bl(t),t!==null){var i=Xl(t);if(i===null)t=null;else{var o=i.tag;if(o===13){if(t=mT(i),t!==null)return t;t=null}else if(o===3){if(i.stateNode.hydrate)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return HT(n,r,e,t,a),null}var Ms=null,sy=null,Vh=null;function OT(){if(Vh)return Vh;var n,r=sy,a=r.length,e,t="value"in Ms?Ms.value:Ms.textContent,i=t.length;for(n=0;n<a&&r[n]===t[n];n++);var o=a-n;for(e=1;e<=o&&r[a-e]===t[i-e];e++);return Vh=t.slice(n,1<e?1-e:void 0)}function Uh(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function th(){return!0}function Zx(){return!1}function ni(n){function r(a,e,t,i,o){this._reactName=a,this._targetInst=t,this.type=e,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var s in n)n.hasOwnProperty(s)&&(a=n[s],this[s]=a?a(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?th:Zx,this.isPropagationStopped=Zx,this}return Bn(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=th)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=th)},persist:function(){},isPersistent:th}),r}var bc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ly=ni(bc),yd=Bn({},bc,{view:0,detail:0}),j2=ni(yd),M_,O_,zc,Sp=Bn({},yd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uy,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==zc&&(zc&&n.type==="mousemove"?(M_=n.screenX-zc.screenX,O_=n.screenY-zc.screenY):O_=M_=0,zc=n),M_)},movementY:function(n){return"movementY"in n?n.movementY:O_}}),eS=ni(Sp),W2=Bn({},Sp,{dataTransfer:0}),$2=ni(W2),X2=Bn({},yd,{relatedTarget:0}),I_=ni(X2),K2=Bn({},bc,{animationName:0,elapsedTime:0,pseudoElement:0}),Y2=ni(K2),Q2=Bn({},bc,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),q2=ni(Q2),J2=Bn({},bc,{data:0}),tS=ni(J2),Z2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nO(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=tO[n])?!!r[n]:!1}function uy(){return nO}var rO=Bn({},yd,{key:function(n){if(n.key){var r=Z2[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Uh(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?eO[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uy,charCode:function(n){return n.type==="keypress"?Uh(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Uh(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),aO=ni(rO),iO=Bn({},Sp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nS=ni(iO),oO=Bn({},yd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uy}),sO=ni(oO),lO=Bn({},bc,{propertyName:0,elapsedTime:0,pseudoElement:0}),uO=ni(lO),cO=Bn({},Sp,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),fO=ni(cO),dO=[9,13,27,32],cy=ss&&"CompositionEvent"in window,mf=null;ss&&"documentMode"in document&&(mf=document.documentMode);var hO=ss&&"TextEvent"in window&&!mf,IT=ss&&(!cy||mf&&8<mf&&11>=mf),rS=String.fromCharCode(32),aS=!1;function LT(n,r){switch(n){case"keyup":return dO.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NT(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Su=!1;function vO(n,r){switch(n){case"compositionend":return NT(r);case"keypress":return r.which!==32?null:(aS=!0,rS);case"textInput":return n=r.data,n===rS&&aS?null:n;default:return null}}function pO(n,r){if(Su)return n==="compositionend"||!cy&&LT(n,r)?(n=OT(),Vh=sy=Ms=null,Su=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return IT&&r.locale!=="ko"?null:r.data;default:return null}}var _O={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iS(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!_O[n.type]:r==="textarea"}function FT(n,r,a,e){vT(e),r=dv(r,"onChange"),0<r.length&&(a=new ly("onChange","change",null,a,e),n.push({event:a,listeners:r}))}var yf=null,Hf=null;function gO(n){UT(n,0)}function bp(n){var r=Cu(n);if(sT(r))return n}function mO(n,r){if(n==="change")return r}var DT=!1;if(ss){var L_;if(ss){var N_="oninput"in document;if(!N_){var oS=document.createElement("div");oS.setAttribute("oninput","return;"),N_=typeof oS.oninput=="function"}L_=N_}else L_=!1;DT=L_&&(!document.documentMode||9<document.documentMode)}function sS(){yf&&(yf.detachEvent("onpropertychange",BT),Hf=yf=null)}function BT(n){if(n.propertyName==="value"&&bp(Hf)){var r=[];if(FT(r,Hf,n,J0(n)),n=gO,Sl)n(r);else{Sl=!0;try{Z0(n,r)}finally{Sl=!1,ty()}}}}function yO(n,r,a){n==="focusin"?(sS(),yf=r,Hf=a,yf.attachEvent("onpropertychange",BT)):n==="focusout"&&sS()}function xO(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return bp(Hf)}function SO(n,r){if(n==="click")return bp(r)}function bO(n,r){if(n==="input"||n==="change")return bp(r)}function CO(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var yi=typeof Object.is=="function"?Object.is:CO,EO=Object.prototype.hasOwnProperty;function jf(n,r){if(yi(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),e=Object.keys(r);if(a.length!==e.length)return!1;for(e=0;e<a.length;e++)if(!EO.call(r,a[e])||!yi(n[a[e]],r[a[e]]))return!1;return!0}function lS(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function uS(n,r){var a=lS(n);n=0;for(var e;a;){if(a.nodeType===3){if(e=n+a.textContent.length,n<=r&&e>=r)return{node:a,offset:r-n};n=e}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=lS(a)}}function kT(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?kT(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function cS(){for(var n=window,r=lv();r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=lv(n.document)}return r}function Bg(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var TO=ss&&"documentMode"in document&&11>=document.documentMode,bu=null,kg=null,xf=null,Vg=!1;function fS(n,r,a){var e=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Vg||bu==null||bu!==lv(e)||(e=bu,"selectionStart"in e&&Bg(e)?e={start:e.selectionStart,end:e.selectionEnd}:(e=(e.ownerDocument&&e.ownerDocument.defaultView||window).getSelection(),e={anchorNode:e.anchorNode,anchorOffset:e.anchorOffset,focusNode:e.focusNode,focusOffset:e.focusOffset}),xf&&jf(xf,e)||(xf=e,e=dv(kg,"onSelect"),0<e.length&&(r=new ly("onSelect","select",null,r,a),n.push({event:r,listeners:e}),r.target=bu)))}ay("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);ay("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);ay(L2,2);for(var dS="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),F_=0;F_<dS.length;F_++)ry.set(dS[F_],0);Ku("onMouseEnter",["mouseout","mouseover"]);Ku("onMouseLeave",["mouseout","mouseover"]);Ku("onPointerEnter",["pointerout","pointerover"]);Ku("onPointerLeave",["pointerout","pointerover"]);Wl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VT=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function hS(n,r,a){var e=n.type||"unknown-event";n.currentTarget=a,w2(e,r,void 0,n),n.currentTarget=null}function UT(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var e=n[a],t=e.event;e=e.listeners;e:{var i=void 0;if(r)for(var o=e.length-1;0<=o;o--){var s=e[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&t.isPropagationStopped())break e;hS(t,s,u),i=l}else for(o=0;o<e.length;o++){if(s=e[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==i&&t.isPropagationStopped())break e;hS(t,s,u),i=l}}}if(cv)throw n=Ng,cv=!1,Ng=null,n}function In(n,r){var a=WT(r),e=n+"__bubble";a.has(e)||(GT(r,n,2,!1),a.add(e))}var vS="_reactListening"+Math.random().toString(36).slice(2);function zT(n){n[vS]||(n[vS]=!0,aT.forEach(function(r){VT.has(r)||pS(r,!1,n,null),pS(r,!0,n,null)}))}function pS(n,r,a,e){var t=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,i=a;if(n==="selectionchange"&&a.nodeType!==9&&(i=a.ownerDocument),e!==null&&!r&&VT.has(n)){if(n!=="scroll")return;t|=2,i=e}var o=WT(i),s=n+"__"+(r?"capture":"bubble");o.has(s)||(r&&(t|=4),GT(i,n,t,r),o.add(s))}function GT(n,r,a,e){var t=ry.get(r);switch(t===void 0?2:t){case 0:t=G2;break;case 1:t=H2;break;default:t=iy}a=t.bind(null,r,a,n),t=void 0,!Lg||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(t=!0),e?t!==void 0?n.addEventListener(r,a,{capture:!0,passive:t}):n.addEventListener(r,a,!0):t!==void 0?n.addEventListener(r,a,{passive:t}):n.addEventListener(r,a,!1)}function HT(n,r,a,e,t){var i=e;if((r&1)===0&&(r&2)===0&&e!==null)e:for(;;){if(e===null)return;var o=e.tag;if(o===3||o===4){var s=e.stateNode.containerInfo;if(s===t||s.nodeType===8&&s.parentNode===t)break;if(o===4)for(o=e.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===t||l.nodeType===8&&l.parentNode===t))return;o=o.return}for(;s!==null;){if(o=bl(s),o===null)return;if(l=o.tag,l===5||l===6){e=i=o;continue e}s=s.parentNode}}e=e.return}E2(function(){var u=i,c=J0(a),f=[];e:{var d=PT.get(n);if(d!==void 0){var h=ly,_=n;switch(n){case"keypress":if(Uh(a)===0)break e;case"keydown":case"keyup":h=aO;break;case"focusin":_="focus",h=I_;break;case"focusout":_="blur",h=I_;break;case"beforeblur":case"afterblur":h=I_;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=eS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=$2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=sO;break;case TT:case RT:case AT:h=Y2;break;case wT:h=uO;break;case"scroll":h=j2;break;case"wheel":h=fO;break;case"copy":case"cut":case"paste":h=q2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=nS}var p=(r&4)!==0,v=!p&&n==="scroll",y=p?d!==null?d+"Capture":null:d;p=[];for(var m=u,g;m!==null;){g=m;var x=g.stateNode;if(g.tag===5&&x!==null&&(g=x,y!==null&&(x=Vf(m,y),x!=null&&p.push(Wf(m,x,g)))),v)break;m=m.return}0<p.length&&(d=new h(d,_,null,a,c),f.push({event:d,listeners:p}))}}if((r&7)===0){e:{if(d=n==="mouseover"||n==="pointerover",h=n==="mouseout"||n==="pointerout",d&&(r&16)===0&&(_=a.relatedTarget||a.fromElement)&&(bl(_)||_[Cc]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(_=a.relatedTarget||a.toElement,h=u,_=_?bl(_):null,_!==null&&(v=Xl(_),_!==v||_.tag!==5&&_.tag!==6)&&(_=null)):(h=null,_=u),h!==_)){if(p=eS,x="onMouseLeave",y="onMouseEnter",m="mouse",(n==="pointerout"||n==="pointerover")&&(p=nS,x="onPointerLeave",y="onPointerEnter",m="pointer"),v=h==null?d:Cu(h),g=_==null?d:Cu(_),d=new p(x,m+"leave",h,a,c),d.target=v,d.relatedTarget=g,x=null,bl(c)===u&&(p=new p(y,m+"enter",_,a,c),p.target=g,p.relatedTarget=v,x=p),v=x,h&&_)t:{for(p=h,y=_,m=0,g=p;g;g=ru(g))m++;for(g=0,x=y;x;x=ru(x))g++;for(;0<m-g;)p=ru(p),m--;for(;0<g-m;)y=ru(y),g--;for(;m--;){if(p===y||y!==null&&p===y.alternate)break t;p=ru(p),y=ru(y)}p=null}else p=null;h!==null&&_S(f,d,h,p,!1),_!==null&&v!==null&&_S(f,v,_,p,!0)}}e:{if(d=u?Cu(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var b=mO;else if(iS(d))if(DT)b=bO;else{b=xO;var S=yO}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(b=SO);if(b&&(b=b(n,u))){FT(f,b,a,c);break e}S&&S(n,d,u),n==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&Tg(d,"number",d.value)}switch(S=u?Cu(u):window,n){case"focusin":(iS(S)||S.contentEditable==="true")&&(bu=S,kg=u,xf=null);break;case"focusout":xf=kg=bu=null;break;case"mousedown":Vg=!0;break;case"contextmenu":case"mouseup":case"dragend":Vg=!1,fS(f,a,c);break;case"selectionchange":if(TO)break;case"keydown":case"keyup":fS(f,a,c)}var C;if(cy)e:{switch(n){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Su?LT(n,a)&&(E="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(E="onCompositionStart");E&&(IT&&a.locale!=="ko"&&(Su||E!=="onCompositionStart"?E==="onCompositionEnd"&&Su&&(C=OT()):(Ms=c,sy="value"in Ms?Ms.value:Ms.textContent,Su=!0)),S=dv(u,E),0<S.length&&(E=new tS(E,n,null,a,c),f.push({event:E,listeners:S}),C?E.data=C:(C=NT(a),C!==null&&(E.data=C)))),(C=hO?vO(n,a):pO(n,a))&&(u=dv(u,"onBeforeInput"),0<u.length&&(c=new tS("onBeforeInput","beforeinput",null,a,c),f.push({event:c,listeners:u}),c.data=C))}UT(f,r)})}function Wf(n,r,a){return{instance:n,listener:r,currentTarget:a}}function dv(n,r){for(var a=r+"Capture",e=[];n!==null;){var t=n,i=t.stateNode;t.tag===5&&i!==null&&(t=i,i=Vf(n,a),i!=null&&e.unshift(Wf(n,i,t)),i=Vf(n,r),i!=null&&e.push(Wf(n,i,t))),n=n.return}return e}function ru(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function _S(n,r,a,e,t){for(var i=r._reactName,o=[];a!==null&&a!==e;){var s=a,l=s.alternate,u=s.stateNode;if(l!==null&&l===e)break;s.tag===5&&u!==null&&(s=u,t?(l=Vf(a,i),l!=null&&o.unshift(Wf(a,l,s))):t||(l=Vf(a,i),l!=null&&o.push(Wf(a,l,s)))),a=a.return}o.length!==0&&n.push({event:r,listeners:o})}function hv(){}var D_=null,B_=null;function jT(n,r){switch(n){case"button":case"input":case"select":case"textarea":return!!r.autoFocus}return!1}function Ug(n,r){return n==="textarea"||n==="option"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var gS=typeof setTimeout=="function"?setTimeout:void 0,RO=typeof clearTimeout=="function"?clearTimeout:void 0;function fy(n){n.nodeType===1?n.textContent="":n.nodeType===9&&(n=n.body,n!=null&&(n.textContent=""))}function Fu(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break}return n}function mS(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}var k_=0;function AO(n){return{$$typeof:Q0,toString:n,valueOf:n}}var Cp=Math.random().toString(36).slice(2),Os="__reactFiber$"+Cp,vv="__reactProps$"+Cp,Cc="__reactContainer$"+Cp,yS="__reactEvents$"+Cp;function bl(n){var r=n[Os];if(r)return r;for(var a=n.parentNode;a;){if(r=a[Cc]||a[Os]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=mS(n);n!==null;){if(a=n[Os])return a;n=mS(n)}return r}n=a,a=n.parentNode}return null}function xd(n){return n=n[Os]||n[Cc],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Cu(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(ke(33))}function Ep(n){return n[vv]||null}function WT(n){var r=n[yS];return r===void 0&&(r=n[yS]=new Set),r}var zg=[],Eu=-1;function al(n){return{current:n}}function Fn(n){0>Eu||(n.current=zg[Eu],zg[Eu]=null,Eu--)}function qn(n,r){Eu++,zg[Eu]=n.current,n.current=r}var Qs={},qr=al(Qs),Ia=al(!1),Vl=Qs;function Yu(n,r){var a=n.type.contextTypes;if(!a)return Qs;var e=n.stateNode;if(e&&e.__reactInternalMemoizedUnmaskedChildContext===r)return e.__reactInternalMemoizedMaskedChildContext;var t={},i;for(i in a)t[i]=r[i];return e&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=t),t}function La(n){return n=n.childContextTypes,n!=null}function pv(){Fn(Ia),Fn(qr)}function xS(n,r,a){if(qr.current!==Qs)throw Error(ke(168));qn(qr,r),qn(Ia,a)}function $T(n,r,a){var e=n.stateNode;if(n=r.childContextTypes,typeof e.getChildContext!="function")return a;e=e.getChildContext();for(var t in e)if(!(t in n))throw Error(ke(108,Ou(r)||"Unknown",t));return Bn({},a,e)}function zh(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Qs,Vl=qr.current,qn(qr,n),qn(Ia,Ia.current),!0}function SS(n,r,a){var e=n.stateNode;if(!e)throw Error(ke(169));a?(n=$T(n,r,Vl),e.__reactInternalMemoizedMergedChildContext=n,Fn(Ia),Fn(qr),qn(qr,n)):Fn(Ia),qn(Ia,a)}var dy=null,Ll=null,wO=Cr.unstable_runWithPriority,hy=Cr.unstable_scheduleCallback,Gg=Cr.unstable_cancelCallback,PO=Cr.unstable_shouldYield,bS=Cr.unstable_requestPaint,Hg=Cr.unstable_now,MO=Cr.unstable_getCurrentPriorityLevel,Tp=Cr.unstable_ImmediatePriority,XT=Cr.unstable_UserBlockingPriority,KT=Cr.unstable_NormalPriority,YT=Cr.unstable_LowPriority,QT=Cr.unstable_IdlePriority,V_={},OO=bS!==void 0?bS:function(){},$o=null,Gh=null,U_=!1,CS=Hg(),Xr=1e4>CS?Hg:function(){return Hg()-CS};function Qu(){switch(MO()){case Tp:return 99;case XT:return 98;case KT:return 97;case YT:return 96;case QT:return 95;default:throw Error(ke(332))}}function qT(n){switch(n){case 99:return Tp;case 98:return XT;case 97:return KT;case 96:return YT;case 95:return QT;default:throw Error(ke(332))}}function Ul(n,r){return n=qT(n),wO(n,r)}function $f(n,r,a){return n=qT(n),hy(n,r,a)}function Po(){if(Gh!==null){var n=Gh;Gh=null,Gg(n)}JT()}function JT(){if(!U_&&$o!==null){U_=!0;var n=0;try{var r=$o;Ul(99,function(){for(;n<r.length;n++){var a=r[n];do a=a(!0);while(a!==null)}}),$o=null}catch(a){throw $o!==null&&($o=$o.slice(n+1)),hy(Tp,Po),a}finally{U_=!1}}}var IO=$l.ReactCurrentBatchConfig;function ji(n,r){if(n&&n.defaultProps){r=Bn({},r),n=n.defaultProps;for(var a in n)r[a]===void 0&&(r[a]=n[a]);return r}return r}var _v=al(null),gv=null,Tu=null,mv=null;function vy(){mv=Tu=gv=null}function py(n){var r=_v.current;Fn(_v),n.type._context._currentValue=r}function ZT(n,r){for(;n!==null;){var a=n.alternate;if((n.childLanes&r)===r){if(a===null||(a.childLanes&r)===r)break;a.childLanes|=r}else n.childLanes|=r,a!==null&&(a.childLanes|=r);n=n.return}}function Du(n,r){gv=n,mv=Tu=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(Ki=!0),n.firstContext=null)}function Ti(n,r){if(mv!==n&&r!==!1&&r!==0)if((typeof r!="number"||r===1073741823)&&(mv=n,r=1073741823),r={context:n,observedBits:r,next:null},Tu===null){if(gv===null)throw Error(ke(308));Tu=r,gv.dependencies={lanes:0,firstContext:r,responders:null}}else Tu=Tu.next=r;return n._currentValue}var ws=!1;function _y(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function eR(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Gs(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function Hs(n,r){if(n=n.updateQueue,n!==null){n=n.shared;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}}function ES(n,r){var a=n.updateQueue,e=n.alternate;if(e!==null&&(e=e.updateQueue,a===e)){var t=null,i=null;if(a=a.firstBaseUpdate,a!==null){do{var o={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};i===null?t=i=o:i=i.next=o,a=a.next}while(a!==null);i===null?t=i=r:i=i.next=r}else t=i=r;a={baseState:e.baseState,firstBaseUpdate:t,lastBaseUpdate:i,shared:e.shared,effects:e.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}function Xf(n,r,a,e){var t=n.updateQueue;ws=!1;var i=t.firstBaseUpdate,o=t.lastBaseUpdate,s=t.shared.pending;if(s!==null){t.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=n.alternate;if(c!==null){c=c.updateQueue;var f=c.lastBaseUpdate;f!==o&&(f===null?c.firstBaseUpdate=u:f.next=u,c.lastBaseUpdate=l)}}if(i!==null){f=t.baseState,o=0,c=u=l=null;do{s=i.lane;var d=i.eventTime;if((e&s)===s){c!==null&&(c=c.next={eventTime:d,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var h=n,_=i;switch(s=r,d=a,_.tag){case 1:if(h=_.payload,typeof h=="function"){f=h.call(d,f,s);break e}f=h;break e;case 3:h.flags=h.flags&-4097|64;case 0:if(h=_.payload,s=typeof h=="function"?h.call(d,f,s):h,s==null)break e;f=Bn({},f,s);break e;case 2:ws=!0}}i.callback!==null&&(n.flags|=32,s=t.effects,s===null?t.effects=[i]:s.push(i))}else d={eventTime:d,lane:s,tag:i.tag,payload:i.payload,callback:i.callback,next:null},c===null?(u=c=d,l=f):c=c.next=d,o|=s;if(i=i.next,i===null){if(s=t.shared.pending,s===null)break;i=s.next,s.next=null,t.lastBaseUpdate=s,t.shared.pending=null}}while(1);c===null&&(l=f),t.baseState=l,t.firstBaseUpdate=u,t.lastBaseUpdate=c,bd|=o,n.lanes=o,n.memoizedState=f}}function TS(n,r,a){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var e=n[r],t=e.callback;if(t!==null){if(e.callback=null,e=a,typeof t!="function")throw Error(ke(191,t));t.call(e)}}}var tR=new _p.Component().refs;function yv(n,r,a,e){r=n.memoizedState,a=a(e,r),a=a==null?r:Bn({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Rp={isMounted:function(n){return(n=n._reactInternals)?Xl(n)===n:!1},enqueueSetState:function(n,r,a){n=n._reactInternals;var e=qa(),t=js(n),i=Gs(e,t);i.payload=r,a!=null&&(i.callback=a),Hs(n,i),Ws(n,t,e)},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var e=qa(),t=js(n),i=Gs(e,t);i.tag=1,i.payload=r,a!=null&&(i.callback=a),Hs(n,i),Ws(n,t,e)},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=qa(),e=js(n),t=Gs(a,e);t.tag=2,r!=null&&(t.callback=r),Hs(n,t),Ws(n,e,a)}};function RS(n,r,a,e,t,i,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(e,i,o):r.prototype&&r.prototype.isPureReactComponent?!jf(a,e)||!jf(t,i):!0}function nR(n,r,a){var e=!1,t=Qs,i=r.contextType;return typeof i=="object"&&i!==null?i=Ti(i):(t=La(r)?Vl:qr.current,e=r.contextTypes,i=(e=e!=null)?Yu(n,t):Qs),r=new r(a,i),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Rp,n.stateNode=r,r._reactInternals=n,e&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=t,n.__reactInternalMemoizedMaskedChildContext=i),r}function AS(n,r,a,e){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,e),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,e),r.state!==n&&Rp.enqueueReplaceState(r,r.state,null)}function jg(n,r,a,e){var t=n.stateNode;t.props=a,t.state=n.memoizedState,t.refs=tR,_y(n);var i=r.contextType;typeof i=="object"&&i!==null?t.context=Ti(i):(i=La(r)?Vl:qr.current,t.context=Yu(n,i)),Xf(n,a,t,e),t.state=n.memoizedState,i=r.getDerivedStateFromProps,typeof i=="function"&&(yv(n,r,i,a),t.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof t.getSnapshotBeforeUpdate=="function"||typeof t.UNSAFE_componentWillMount!="function"&&typeof t.componentWillMount!="function"||(r=t.state,typeof t.componentWillMount=="function"&&t.componentWillMount(),typeof t.UNSAFE_componentWillMount=="function"&&t.UNSAFE_componentWillMount(),r!==t.state&&Rp.enqueueReplaceState(t,t.state,null),Xf(n,a,t,e),t.state=n.memoizedState),typeof t.componentDidMount=="function"&&(n.flags|=4)}var nh=Array.isArray;function Gc(n,r,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(ke(309));var e=a.stateNode}if(!e)throw Error(ke(147,n));var t=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===t?r.ref:(r=function(i){var o=e.refs;o===tR&&(o=e.refs={}),i===null?delete o[t]:o[t]=i},r._stringRef=t,r)}if(typeof n!="string")throw Error(ke(284));if(!a._owner)throw Error(ke(290,n))}return n}function rh(n,r){if(n.type!=="textarea")throw Error(ke(31,Object.prototype.toString.call(r)==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":r))}function rR(n){function r(v,y){if(n){var m=v.lastEffect;m!==null?(m.nextEffect=y,v.lastEffect=y):v.firstEffect=v.lastEffect=y,y.nextEffect=null,y.flags=8}}function a(v,y){if(!n)return null;for(;y!==null;)r(v,y),y=y.sibling;return null}function e(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function t(v,y){return v=Js(v,y),v.index=0,v.sibling=null,v}function i(v,y,m){return v.index=m,n?(m=v.alternate,m!==null?(m=m.index,m<y?(v.flags=2,y):m):(v.flags=2,y)):y}function o(v){return n&&v.alternate===null&&(v.flags=2),v}function s(v,y,m,g){return y===null||y.tag!==6?(y=W_(m,v.mode,g),y.return=v,y):(y=t(y,m),y.return=v,y)}function l(v,y,m,g){return y!==null&&y.elementType===m.type?(g=t(y,m.props),g.ref=Gc(v,y,m),g.return=v,g):(g=$h(m.type,m.key,m.props,null,v.mode,g),g.ref=Gc(v,y,m),g.return=v,g)}function u(v,y,m,g){return y===null||y.tag!==4||y.stateNode.containerInfo!==m.containerInfo||y.stateNode.implementation!==m.implementation?(y=$_(m,v.mode,g),y.return=v,y):(y=t(y,m.children||[]),y.return=v,y)}function c(v,y,m,g,x){return y===null||y.tag!==7?(y=Uu(m,v.mode,g,x),y.return=v,y):(y=t(y,m),y.return=v,y)}function f(v,y,m){if(typeof y=="string"||typeof y=="number")return y=W_(""+y,v.mode,m),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case of:return m=$h(y.type,y.key,y.props,null,v.mode,m),m.ref=Gc(v,null,y),m.return=v,m;case xl:return y=$_(y,v.mode,m),y.return=v,y}if(nh(y)||Dc(y))return y=Uu(y,v.mode,m,null),y.return=v,y;rh(v,y)}return null}function d(v,y,m,g){var x=y!==null?y.key:null;if(typeof m=="string"||typeof m=="number")return x!==null?null:s(v,y,""+m,g);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case of:return m.key===x?m.type===Ps?c(v,y,m.props.children,g,x):l(v,y,m,g):null;case xl:return m.key===x?u(v,y,m,g):null}if(nh(m)||Dc(m))return x!==null?null:c(v,y,m,g,null);rh(v,m)}return null}function h(v,y,m,g,x){if(typeof g=="string"||typeof g=="number")return v=v.get(m)||null,s(y,v,""+g,x);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case of:return v=v.get(g.key===null?m:g.key)||null,g.type===Ps?c(y,v,g.props.children,x,g.key):l(y,v,g,x);case xl:return v=v.get(g.key===null?m:g.key)||null,u(y,v,g,x)}if(nh(g)||Dc(g))return v=v.get(m)||null,c(y,v,g,x,null);rh(y,g)}return null}function _(v,y,m,g){for(var x=null,b=null,S=y,C=y=0,E=null;S!==null&&C<m.length;C++){S.index>C?(E=S,S=null):E=S.sibling;var T=d(v,S,m[C],g);if(T===null){S===null&&(S=E);break}n&&S&&T.alternate===null&&r(v,S),y=i(T,y,C),b===null?x=T:b.sibling=T,b=T,S=E}if(C===m.length)return a(v,S),x;if(S===null){for(;C<m.length;C++)S=f(v,m[C],g),S!==null&&(y=i(S,y,C),b===null?x=S:b.sibling=S,b=S);return x}for(S=e(v,S);C<m.length;C++)E=h(S,v,C,m[C],g),E!==null&&(n&&E.alternate!==null&&S.delete(E.key===null?C:E.key),y=i(E,y,C),b===null?x=E:b.sibling=E,b=E);return n&&S.forEach(function(M){return r(v,M)}),x}function p(v,y,m,g){var x=Dc(m);if(typeof x!="function")throw Error(ke(150));if(m=x.call(m),m==null)throw Error(ke(151));for(var b=x=null,S=y,C=y=0,E=null,T=m.next();S!==null&&!T.done;C++,T=m.next()){S.index>C?(E=S,S=null):E=S.sibling;var M=d(v,S,T.value,g);if(M===null){S===null&&(S=E);break}n&&S&&M.alternate===null&&r(v,S),y=i(M,y,C),b===null?x=M:b.sibling=M,b=M,S=E}if(T.done)return a(v,S),x;if(S===null){for(;!T.done;C++,T=m.next())T=f(v,T.value,g),T!==null&&(y=i(T,y,C),b===null?x=T:b.sibling=T,b=T);return x}for(S=e(v,S);!T.done;C++,T=m.next())T=h(S,v,C,T.value,g),T!==null&&(n&&T.alternate!==null&&S.delete(T.key===null?C:T.key),y=i(T,y,C),b===null?x=T:b.sibling=T,b=T);return n&&S.forEach(function(L){return r(v,L)}),x}return function(v,y,m,g){var x=typeof m=="object"&&m!==null&&m.type===Ps&&m.key===null;x&&(m=m.props.children);var b=typeof m=="object"&&m!==null;if(b)switch(m.$$typeof){case of:e:{for(b=m.key,x=y;x!==null;){if(x.key===b){switch(x.tag){case 7:if(m.type===Ps){a(v,x.sibling),y=t(x,m.props.children),y.return=v,v=y;break e}break;default:if(x.elementType===m.type){a(v,x.sibling),y=t(x,m.props),y.ref=Gc(v,x,m),y.return=v,v=y;break e}}a(v,x);break}else r(v,x);x=x.sibling}m.type===Ps?(y=Uu(m.props.children,v.mode,g,m.key),y.return=v,v=y):(g=$h(m.type,m.key,m.props,null,v.mode,g),g.ref=Gc(v,y,m),g.return=v,v=g)}return o(v);case xl:e:{for(x=m.key;y!==null;){if(y.key===x)if(y.tag===4&&y.stateNode.containerInfo===m.containerInfo&&y.stateNode.implementation===m.implementation){a(v,y.sibling),y=t(y,m.children||[]),y.return=v,v=y;break e}else{a(v,y);break}else r(v,y);y=y.sibling}y=$_(m,v.mode,g),y.return=v,v=y}return o(v)}if(typeof m=="string"||typeof m=="number")return m=""+m,y!==null&&y.tag===6?(a(v,y.sibling),y=t(y,m),y.return=v,v=y):(a(v,y),y=W_(m,v.mode,g),y.return=v,v=y),o(v);if(nh(m))return _(v,y,m,g);if(Dc(m))return p(v,y,m,g);if(b&&rh(v,m),typeof m=="undefined"&&!x)switch(v.tag){case 1:case 22:case 0:case 11:case 15:throw Error(ke(152,Ou(v.type)||"Component"))}return a(v,y)}}var xv=rR(!0),aR=rR(!1),Sd={},So=al(Sd),Kf=al(Sd),Yf=al(Sd);function Cl(n){if(n===Sd)throw Error(ke(174));return n}function Wg(n,r){switch(qn(Yf,r),qn(Kf,n),qn(So,Sd),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:Pg(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=Pg(r,n)}Fn(So),qn(So,r)}function qu(){Fn(So),Fn(Kf),Fn(Yf)}function wS(n){Cl(Yf.current);var r=Cl(So.current),a=Pg(r,n.type);r!==a&&(qn(Kf,n),qn(So,a))}function gy(n){Kf.current===n&&(Fn(So),Fn(Kf))}var Yn=al(0);function Sv(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&64)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var qo=null,Is=null,bo=!1;function iR(n,r){var a=xi(5,null,null,0);a.elementType="DELETED",a.type="DELETED",a.stateNode=r,a.return=n,a.flags=8,n.lastEffect!==null?(n.lastEffect.nextEffect=a,n.lastEffect=a):n.firstEffect=n.lastEffect=a}function PS(n,r){switch(n.tag){case 5:var a=n.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,!0):!1;case 13:return!1;default:return!1}}function $g(n){if(bo){var r=Is;if(r){var a=r;if(!PS(n,r)){if(r=Fu(a.nextSibling),!r||!PS(n,r)){n.flags=n.flags&-1025|2,bo=!1,qo=n;return}iR(qo,a)}qo=n,Is=Fu(r.firstChild)}else n.flags=n.flags&-1025|2,bo=!1,qo=n}}function MS(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;qo=n}function ah(n){if(n!==qo)return!1;if(!bo)return MS(n),bo=!0,!1;var r=n.type;if(n.tag!==5||r!=="head"&&r!=="body"&&!Ug(r,n.memoizedProps))for(r=Is;r;)iR(n,r),r=Fu(r.nextSibling);if(MS(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ke(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(r===0){Is=Fu(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}n=n.nextSibling}Is=null}}else Is=qo?Fu(n.stateNode.nextSibling):null;return!0}function z_(){Is=qo=null,bo=!1}var Bu=[];function my(){for(var n=0;n<Bu.length;n++)Bu[n]._workInProgressVersionPrimary=null;Bu.length=0}var Sf=$l.ReactCurrentDispatcher,Ei=$l.ReactCurrentBatchConfig,Qf=0,or=null,Hr=null,wr=null,bv=!1,bf=!1;function Ta(){throw Error(ke(321))}function yy(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!yi(n[a],r[a]))return!1;return!0}function xy(n,r,a,e,t,i){if(Qf=i,or=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Sf.current=n===null||n.memoizedState===null?NO:FO,n=a(e,t),bf){i=0;do{if(bf=!1,!(25>i))throw Error(ke(301));i+=1,wr=Hr=null,r.updateQueue=null,Sf.current=DO,n=a(e,t)}while(bf)}if(Sf.current=Rv,r=Hr!==null&&Hr.next!==null,Qf=0,wr=Hr=or=null,bv=!1,r)throw Error(ke(300));return n}function El(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wr===null?or.memoizedState=wr=n:wr=wr.next=n,wr}function Kl(){if(Hr===null){var n=or.alternate;n=n!==null?n.memoizedState:null}else n=Hr.next;var r=wr===null?or.memoizedState:wr.next;if(r!==null)wr=r,Hr=n;else{if(n===null)throw Error(ke(310));Hr=n,n={memoizedState:Hr.memoizedState,baseState:Hr.baseState,baseQueue:Hr.baseQueue,queue:Hr.queue,next:null},wr===null?or.memoizedState=wr=n:wr=wr.next=n}return wr}function _o(n,r){return typeof r=="function"?r(n):r}function Hc(n){var r=Kl(),a=r.queue;if(a===null)throw Error(ke(311));a.lastRenderedReducer=n;var e=Hr,t=e.baseQueue,i=a.pending;if(i!==null){if(t!==null){var o=t.next;t.next=i.next,i.next=o}e.baseQueue=t=i,a.pending=null}if(t!==null){t=t.next,e=e.baseState;var s=o=i=null,l=t;do{var u=l.lane;if((Qf&u)===u)s!==null&&(s=s.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),e=l.eagerReducer===n?l.eagerState:n(e,l.action);else{var c={lane:u,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};s===null?(o=s=c,i=e):s=s.next=c,or.lanes|=u,bd|=u}l=l.next}while(l!==null&&l!==t);s===null?i=e:s.next=o,yi(e,r.memoizedState)||(Ki=!0),r.memoizedState=e,r.baseState=i,r.baseQueue=s,a.lastRenderedState=e}return[r.memoizedState,a.dispatch]}function jc(n){var r=Kl(),a=r.queue;if(a===null)throw Error(ke(311));a.lastRenderedReducer=n;var e=a.dispatch,t=a.pending,i=r.memoizedState;if(t!==null){a.pending=null;var o=t=t.next;do i=n(i,o.action),o=o.next;while(o!==t);yi(i,r.memoizedState)||(Ki=!0),r.memoizedState=i,r.baseQueue===null&&(r.baseState=i),a.lastRenderedState=i}return[i,e]}function OS(n,r,a){var e=r._getVersion;e=e(r._source);var t=r._workInProgressVersionPrimary;if(t!==null?n=t===e:(n=n.mutableReadLanes,(n=(Qf&n)===n)&&(r._workInProgressVersionPrimary=e,Bu.push(r))),n)return a(r._source);throw Bu.push(r),Error(ke(350))}function oR(n,r,a,e){var t=fa;if(t===null)throw Error(ke(349));var i=r._getVersion,o=i(r._source),s=Sf.current,l=s.useState(function(){return OS(t,r,a)}),u=l[1],c=l[0];l=wr;var f=n.memoizedState,d=f.refs,h=d.getSnapshot,_=f.source;f=f.subscribe;var p=or;return n.memoizedState={refs:d,source:r,subscribe:e},s.useEffect(function(){d.getSnapshot=a,d.setSnapshot=u;var v=i(r._source);if(!yi(o,v)){v=a(r._source),yi(c,v)||(u(v),v=js(p),t.mutableReadLanes|=v&t.pendingLanes),v=t.mutableReadLanes,t.entangledLanes|=v;for(var y=t.entanglements,m=v;0<m;){var g=31-Ys(m),x=1<<g;y[g]|=v,m&=~x}}},[a,r,e]),s.useEffect(function(){return e(r._source,function(){var v=d.getSnapshot,y=d.setSnapshot;try{y(v(r._source));var m=js(p);t.mutableReadLanes|=m&t.pendingLanes}catch(g){y(function(){throw g})}})},[r,e]),yi(h,a)&&yi(_,r)&&yi(f,e)||(n={pending:null,dispatch:null,lastRenderedReducer:_o,lastRenderedState:c},n.dispatch=u=Cy.bind(null,or,n),l.queue=n,l.baseQueue=null,c=OS(t,r,a),l.memoizedState=l.baseState=c),c}function sR(n,r,a){var e=Kl();return oR(e,n,r,a)}function Wc(n){var r=El();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n=r.queue={pending:null,dispatch:null,lastRenderedReducer:_o,lastRenderedState:n},n=n.dispatch=Cy.bind(null,or,n),[r.memoizedState,n]}function Cv(n,r,a,e){return n={tag:n,create:r,destroy:a,deps:e,next:null},r=or.updateQueue,r===null?(r={lastEffect:null},or.updateQueue=r,r.lastEffect=n.next=n):(a=r.lastEffect,a===null?r.lastEffect=n.next=n:(e=a.next,a.next=n,n.next=e,r.lastEffect=n)),n}function IS(n){var r=El();return n={current:n},r.memoizedState=n}function Ev(){return Kl().memoizedState}function Xg(n,r,a,e){var t=El();or.flags|=n,t.memoizedState=Cv(1|r,a,void 0,e===void 0?null:e)}function Sy(n,r,a,e){var t=Kl();e=e===void 0?null:e;var i=void 0;if(Hr!==null){var o=Hr.memoizedState;if(i=o.destroy,e!==null&&yy(e,o.deps)){Cv(r,a,i,e);return}}or.flags|=n,t.memoizedState=Cv(1|r,a,i,e)}function LS(n,r){return Xg(516,4,n,r)}function Tv(n,r){return Sy(516,4,n,r)}function lR(n,r){return Sy(4,2,n,r)}function uR(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function cR(n,r,a){return a=a!=null?a.concat([n]):null,Sy(4,2,uR.bind(null,r,n),a)}function by(){}function fR(n,r){var a=Kl();r=r===void 0?null:r;var e=a.memoizedState;return e!==null&&r!==null&&yy(r,e[1])?e[0]:(a.memoizedState=[n,r],n)}function dR(n,r){var a=Kl();r=r===void 0?null:r;var e=a.memoizedState;return e!==null&&r!==null&&yy(r,e[1])?e[0]:(n=n(),a.memoizedState=[n,r],n)}function LO(n,r){var a=Qu();Ul(98>a?98:a,function(){n(!0)}),Ul(97<a?97:a,function(){var e=Ei.transition;Ei.transition=1;try{n(!1),r()}finally{Ei.transition=e}})}function Cy(n,r,a){var e=qa(),t=js(n),i={lane:t,action:a,eagerReducer:null,eagerState:null,next:null},o=r.pending;if(o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i,o=n.alternate,n===or||o!==null&&o===or)bf=bv=!0;else{if(n.lanes===0&&(o===null||o.lanes===0)&&(o=r.lastRenderedReducer,o!==null))try{var s=r.lastRenderedState,l=o(s,a);if(i.eagerReducer=o,i.eagerState=l,yi(l,s))return}catch{}finally{}Ws(n,t,e)}}var Rv={readContext:Ti,useCallback:Ta,useContext:Ta,useEffect:Ta,useImperativeHandle:Ta,useLayoutEffect:Ta,useMemo:Ta,useReducer:Ta,useRef:Ta,useState:Ta,useDebugValue:Ta,useDeferredValue:Ta,useTransition:Ta,useMutableSource:Ta,useOpaqueIdentifier:Ta,unstable_isNewReconciler:!1},NO={readContext:Ti,useCallback:function(n,r){return El().memoizedState=[n,r===void 0?null:r],n},useContext:Ti,useEffect:LS,useImperativeHandle:function(n,r,a){return a=a!=null?a.concat([n]):null,Xg(4,2,uR.bind(null,r,n),a)},useLayoutEffect:function(n,r){return Xg(4,2,n,r)},useMemo:function(n,r){var a=El();return r=r===void 0?null:r,n=n(),a.memoizedState=[n,r],n},useReducer:function(n,r,a){var e=El();return r=a!==void 0?a(r):r,e.memoizedState=e.baseState=r,n=e.queue={pending:null,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},n=n.dispatch=Cy.bind(null,or,n),[e.memoizedState,n]},useRef:IS,useState:Wc,useDebugValue:by,useDeferredValue:function(n){var r=Wc(n),a=r[0],e=r[1];return LS(function(){var t=Ei.transition;Ei.transition=1;try{e(n)}finally{Ei.transition=t}},[n]),a},useTransition:function(){var n=Wc(!1),r=n[0];return n=LO.bind(null,n[1]),IS(n),[n,r]},useMutableSource:function(n,r,a){var e=El();return e.memoizedState={refs:{getSnapshot:r,setSnapshot:null},source:n,subscribe:a},oR(e,n,r,a)},useOpaqueIdentifier:function(){if(bo){var n=!1,r=AO(function(){throw n||(n=!0,a("r:"+(k_++).toString(36))),Error(ke(355))}),a=Wc(r)[1];return(or.mode&2)===0&&(or.flags|=516,Cv(5,function(){a("r:"+(k_++).toString(36))},void 0,null)),r}return r="r:"+(k_++).toString(36),Wc(r),r},unstable_isNewReconciler:!1},FO={readContext:Ti,useCallback:fR,useContext:Ti,useEffect:Tv,useImperativeHandle:cR,useLayoutEffect:lR,useMemo:dR,useReducer:Hc,useRef:Ev,useState:function(){return Hc(_o)},useDebugValue:by,useDeferredValue:function(n){var r=Hc(_o),a=r[0],e=r[1];return Tv(function(){var t=Ei.transition;Ei.transition=1;try{e(n)}finally{Ei.transition=t}},[n]),a},useTransition:function(){var n=Hc(_o)[0];return[Ev().current,n]},useMutableSource:sR,useOpaqueIdentifier:function(){return Hc(_o)[0]},unstable_isNewReconciler:!1},DO={readContext:Ti,useCallback:fR,useContext:Ti,useEffect:Tv,useImperativeHandle:cR,useLayoutEffect:lR,useMemo:dR,useReducer:jc,useRef:Ev,useState:function(){return jc(_o)},useDebugValue:by,useDeferredValue:function(n){var r=jc(_o),a=r[0],e=r[1];return Tv(function(){var t=Ei.transition;Ei.transition=1;try{e(n)}finally{Ei.transition=t}},[n]),a},useTransition:function(){var n=jc(_o)[0];return[Ev().current,n]},useMutableSource:sR,useOpaqueIdentifier:function(){return jc(_o)[0]},unstable_isNewReconciler:!1},BO=$l.ReactCurrentOwner,Ki=!1;function Aa(n,r,a,e){r.child=n===null?aR(r,null,a,e):xv(r,n.child,a,e)}function NS(n,r,a,e,t){a=a.render;var i=r.ref;return Du(r,t),e=xy(n,r,a,e,i,t),n!==null&&!Ki?(r.updateQueue=n.updateQueue,r.flags&=-517,n.lanes&=~t,Jo(n,r,t)):(r.flags|=1,Aa(n,r,e,t),r.child)}function FS(n,r,a,e,t,i){if(n===null){var o=a.type;return typeof o=="function"&&!Py(o)&&o.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=o,hR(n,r,o,e,t,i)):(n=$h(a.type,null,e,r,r.mode,i),n.ref=r.ref,n.return=r,r.child=n)}return o=n.child,(t&i)===0&&(t=o.memoizedProps,a=a.compare,a=a!==null?a:jf,a(t,e)&&n.ref===r.ref)?Jo(n,r,i):(r.flags|=1,n=Js(o,e),n.ref=r.ref,n.return=r,r.child=n)}function hR(n,r,a,e,t,i){if(n!==null&&jf(n.memoizedProps,e)&&n.ref===r.ref)if(Ki=!1,(i&t)!==0)(n.flags&16384)!==0&&(Ki=!0);else return r.lanes=n.lanes,Jo(n,r,i);return Kg(n,r,a,e,i)}function G_(n,r,a){var e=r.pendingProps,t=e.children,i=n!==null?n.memoizedState:null;if(e.mode==="hidden"||e.mode==="unstable-defer-without-hiding")if((r.mode&4)===0)r.memoizedState={baseLanes:0},oh(r,a);else if((a&1073741824)!==0)r.memoizedState={baseLanes:0},oh(r,i!==null?i.baseLanes:a);else return n=i!==null?i.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n},oh(r,n),null;else i!==null?(e=i.baseLanes|a,r.memoizedState=null):e=a,oh(r,e);return Aa(n,r,t,a),r.child}function vR(n,r){var a=r.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(r.flags|=128)}function Kg(n,r,a,e,t){var i=La(a)?Vl:qr.current;return i=Yu(r,i),Du(r,t),a=xy(n,r,a,e,i,t),n!==null&&!Ki?(r.updateQueue=n.updateQueue,r.flags&=-517,n.lanes&=~t,Jo(n,r,t)):(r.flags|=1,Aa(n,r,a,t),r.child)}function DS(n,r,a,e,t){if(La(a)){var i=!0;zh(r)}else i=!1;if(Du(r,t),r.stateNode===null)n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2),nR(r,a,e),jg(r,a,e,t),e=!0;else if(n===null){var o=r.stateNode,s=r.memoizedProps;o.props=s;var l=o.context,u=a.contextType;typeof u=="object"&&u!==null?u=Ti(u):(u=La(a)?Vl:qr.current,u=Yu(r,u));var c=a.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==e||l!==u)&&AS(r,o,e,u),ws=!1;var d=r.memoizedState;o.state=d,Xf(r,e,o,t),l=r.memoizedState,s!==e||d!==l||Ia.current||ws?(typeof c=="function"&&(yv(r,a,c,e),l=r.memoizedState),(s=ws||RS(r,a,s,e,d,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(r.flags|=4)):(typeof o.componentDidMount=="function"&&(r.flags|=4),r.memoizedProps=e,r.memoizedState=l),o.props=e,o.state=l,o.context=u,e=s):(typeof o.componentDidMount=="function"&&(r.flags|=4),e=!1)}else{o=r.stateNode,eR(n,r),s=r.memoizedProps,u=r.type===r.elementType?s:ji(r.type,s),o.props=u,f=r.pendingProps,d=o.context,l=a.contextType,typeof l=="object"&&l!==null?l=Ti(l):(l=La(a)?Vl:qr.current,l=Yu(r,l));var h=a.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==f||d!==l)&&AS(r,o,e,l),ws=!1,d=r.memoizedState,o.state=d,Xf(r,e,o,t);var _=r.memoizedState;s!==f||d!==_||Ia.current||ws?(typeof h=="function"&&(yv(r,a,h,e),_=r.memoizedState),(u=ws||RS(r,a,u,e,d,_,l))?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(e,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(e,_,l)),typeof o.componentDidUpdate=="function"&&(r.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(r.flags|=256)):(typeof o.componentDidUpdate!="function"||s===n.memoizedProps&&d===n.memoizedState||(r.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===n.memoizedProps&&d===n.memoizedState||(r.flags|=256),r.memoizedProps=e,r.memoizedState=_),o.props=e,o.state=_,o.context=l,e=u):(typeof o.componentDidUpdate!="function"||s===n.memoizedProps&&d===n.memoizedState||(r.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===n.memoizedProps&&d===n.memoizedState||(r.flags|=256),e=!1)}return Yg(n,r,a,e,i,t)}function Yg(n,r,a,e,t,i){vR(n,r);var o=(r.flags&64)!==0;if(!e&&!o)return t&&SS(r,a,!1),Jo(n,r,i);e=r.stateNode,BO.current=r;var s=o&&typeof a.getDerivedStateFromError!="function"?null:e.render();return r.flags|=1,n!==null&&o?(r.child=xv(r,n.child,null,i),r.child=xv(r,null,s,i)):Aa(n,r,s,i),r.memoizedState=e.state,t&&SS(r,a,!0),r.child}function BS(n){var r=n.stateNode;r.pendingContext?xS(n,r.pendingContext,r.pendingContext!==r.context):r.context&&xS(n,r.context,!1),Wg(n,r.containerInfo)}var ih={dehydrated:null,retryLane:0};function kS(n,r,a){var e=r.pendingProps,t=Yn.current,i=!1,o;return(o=(r.flags&64)!==0)||(o=n!==null&&n.memoizedState===null?!1:(t&2)!==0),o?(i=!0,r.flags&=-65):n!==null&&n.memoizedState===null||e.fallback===void 0||e.unstable_avoidThisFallback===!0||(t|=1),qn(Yn,t&1),n===null?(e.fallback!==void 0&&$g(r),n=e.children,t=e.fallback,i?(n=VS(r,n,t,a),r.child.memoizedState={baseLanes:a},r.memoizedState=ih,n):typeof e.unstable_expectedLoadTime=="number"?(n=VS(r,n,t,a),r.child.memoizedState={baseLanes:a},r.memoizedState=ih,r.lanes=33554432,n):(a=My({mode:"visible",children:n},r.mode,a,null),a.return=r,r.child=a)):n.memoizedState!==null?i?(e=zS(n,r,e.children,e.fallback,a),i=r.child,t=n.child.memoizedState,i.memoizedState=t===null?{baseLanes:a}:{baseLanes:t.baseLanes|a},i.childLanes=n.childLanes&~a,r.memoizedState=ih,e):(a=US(n,r,e.children,a),r.memoizedState=null,a):i?(e=zS(n,r,e.children,e.fallback,a),i=r.child,t=n.child.memoizedState,i.memoizedState=t===null?{baseLanes:a}:{baseLanes:t.baseLanes|a},i.childLanes=n.childLanes&~a,r.memoizedState=ih,e):(a=US(n,r,e.children,a),r.memoizedState=null,a)}function VS(n,r,a,e){var t=n.mode,i=n.child;return r={mode:"hidden",children:r},(t&2)===0&&i!==null?(i.childLanes=0,i.pendingProps=r):i=My(r,t,0,null),a=Uu(a,t,e,null),i.return=n,a.return=n,i.sibling=a,n.child=i,a}function US(n,r,a,e){var t=n.child;return n=t.sibling,a=Js(t,{mode:"visible",children:a}),(r.mode&2)===0&&(a.lanes=e),a.return=r,a.sibling=null,n!==null&&(n.nextEffect=null,n.flags=8,r.firstEffect=r.lastEffect=n),r.child=a}function zS(n,r,a,e,t){var i=r.mode,o=n.child;n=o.sibling;var s={mode:"hidden",children:a};return(i&2)===0&&r.child!==o?(a=r.child,a.childLanes=0,a.pendingProps=s,o=a.lastEffect,o!==null?(r.firstEffect=a.firstEffect,r.lastEffect=o,o.nextEffect=null):r.firstEffect=r.lastEffect=null):a=Js(o,s),n!==null?e=Js(n,e):(e=Uu(e,i,t,null),e.flags|=2),e.return=r,a.return=r,a.sibling=e,r.child=a,e}function GS(n,r){n.lanes|=r;var a=n.alternate;a!==null&&(a.lanes|=r),ZT(n.return,r)}function H_(n,r,a,e,t,i){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:e,tail:a,tailMode:t,lastEffect:i}:(o.isBackwards=r,o.rendering=null,o.renderingStartTime=0,o.last=e,o.tail=a,o.tailMode=t,o.lastEffect=i)}function HS(n,r,a){var e=r.pendingProps,t=e.revealOrder,i=e.tail;if(Aa(n,r,e.children,a),e=Yn.current,(e&2)!==0)e=e&1|2,r.flags|=64;else{if(n!==null&&(n.flags&64)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&GS(n,a);else if(n.tag===19)GS(n,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}e&=1}if(qn(Yn,e),(r.mode&2)===0)r.memoizedState=null;else switch(t){case"forwards":for(a=r.child,t=null;a!==null;)n=a.alternate,n!==null&&Sv(n)===null&&(t=a),a=a.sibling;a=t,a===null?(t=r.child,r.child=null):(t=a.sibling,a.sibling=null),H_(r,!1,t,a,i,r.lastEffect);break;case"backwards":for(a=null,t=r.child,r.child=null;t!==null;){if(n=t.alternate,n!==null&&Sv(n)===null){r.child=t;break}n=t.sibling,t.sibling=a,a=t,t=n}H_(r,!0,a,null,i,r.lastEffect);break;case"together":H_(r,!1,null,null,void 0,r.lastEffect);break;default:r.memoizedState=null}return r.child}function Jo(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),bd|=r.lanes,(a&r.childLanes)!==0){if(n!==null&&r.child!==n.child)throw Error(ke(153));if(r.child!==null){for(n=r.child,a=Js(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=Js(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}return null}var pR,Qg,_R,gR;pR=function(n,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};Qg=function(){};_R=function(n,r,a,e){var t=n.memoizedProps;if(t!==e){n=r.stateNode,Cl(So.current);var i=null;switch(a){case"input":t=Cg(n,t),e=Cg(n,e),i=[];break;case"option":t=Rg(n,t),e=Rg(n,e),i=[];break;case"select":t=Bn({},t,{value:void 0}),e=Bn({},e,{value:void 0}),i=[];break;case"textarea":t=Ag(n,t),e=Ag(n,e),i=[];break;default:typeof t.onClick!="function"&&typeof e.onClick=="function"&&(n.onclick=hv)}Mg(a,e);var o;a=null;for(u in t)if(!e.hasOwnProperty(u)&&t.hasOwnProperty(u)&&t[u]!=null)if(u==="style"){var s=t[u];for(o in s)s.hasOwnProperty(o)&&(a||(a={}),a[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Bf.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in e){var l=e[u];if(s=t!=null?t[u]:void 0,e.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(a||(a={}),a[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(a||(a={}),a[o]=l[o])}else a||(i||(i=[]),i.push(u,a)),a=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Bf.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&In("scroll",n),i||s===l||(i=[])):typeof l=="object"&&l!==null&&l.$$typeof===Q0?l.toString():(i=i||[]).push(u,l))}a&&(i=i||[]).push("style",a);var u=i;(r.updateQueue=u)&&(r.flags|=4)}};gR=function(n,r,a,e){a!==e&&(r.flags|=4)};function $c(n,r){if(!bo)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var e=null;a!==null;)a.alternate!==null&&(e=a),a=a.sibling;e===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:e.sibling=null}}function kO(n,r,a){var e=r.pendingProps;switch(r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return La(r.type)&&pv(),null;case 3:return qu(),Fn(Ia),Fn(qr),my(),e=r.stateNode,e.pendingContext&&(e.context=e.pendingContext,e.pendingContext=null),(n===null||n.child===null)&&(ah(r)?r.flags|=4:e.hydrate||(r.flags|=256)),Qg(r),null;case 5:gy(r);var t=Cl(Yf.current);if(a=r.type,n!==null&&r.stateNode!=null)_R(n,r,a,e,t),n.ref!==r.ref&&(r.flags|=128);else{if(!e){if(r.stateNode===null)throw Error(ke(166));return null}if(n=Cl(So.current),ah(r)){e=r.stateNode,a=r.type;var i=r.memoizedProps;switch(e[Os]=r,e[vv]=i,a){case"dialog":In("cancel",e),In("close",e);break;case"iframe":case"object":case"embed":In("load",e);break;case"video":case"audio":for(n=0;n<lf.length;n++)In(lf[n],e);break;case"source":In("error",e);break;case"img":case"image":case"link":In("error",e),In("load",e);break;case"details":In("toggle",e);break;case"input":Hx(e,i),In("invalid",e);break;case"select":e._wrapperState={wasMultiple:!!i.multiple},In("invalid",e);break;case"textarea":Wx(e,i),In("invalid",e)}Mg(a,i),n=null;for(var o in i)i.hasOwnProperty(o)&&(t=i[o],o==="children"?typeof t=="string"?e.textContent!==t&&(n=["children",t]):typeof t=="number"&&e.textContent!==""+t&&(n=["children",""+t]):Bf.hasOwnProperty(o)&&t!=null&&o==="onScroll"&&In("scroll",e));switch(a){case"input":Jd(e),jx(e,i,!0);break;case"textarea":Jd(e),$x(e);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(e.onclick=hv)}e=n,r.updateQueue=e,e!==null&&(r.flags|=4)}else{switch(o=t.nodeType===9?t:t.ownerDocument,n===wg.html&&(n=cT(a)),n===wg.html?a==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof e.is=="string"?n=o.createElement(a,{is:e.is}):(n=o.createElement(a),a==="select"&&(o=n,e.multiple?o.multiple=!0:e.size&&(o.size=e.size))):n=o.createElementNS(n,a),n[Os]=r,n[vv]=e,pR(n,r,!1,!1),r.stateNode=n,o=Og(a,e),a){case"dialog":In("cancel",n),In("close",n),t=e;break;case"iframe":case"object":case"embed":In("load",n),t=e;break;case"video":case"audio":for(t=0;t<lf.length;t++)In(lf[t],n);t=e;break;case"source":In("error",n),t=e;break;case"img":case"image":case"link":In("error",n),In("load",n),t=e;break;case"details":In("toggle",n),t=e;break;case"input":Hx(n,e),t=Cg(n,e),In("invalid",n);break;case"option":t=Rg(n,e);break;case"select":n._wrapperState={wasMultiple:!!e.multiple},t=Bn({},e,{value:void 0}),In("invalid",n);break;case"textarea":Wx(n,e),t=Ag(n,e),In("invalid",n);break;default:t=e}Mg(a,t);var s=t;for(i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="style"?hT(n,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&fT(n,l)):i==="children"?typeof l=="string"?(a!=="textarea"||l!=="")&&kf(n,l):typeof l=="number"&&kf(n,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Bf.hasOwnProperty(i)?l!=null&&i==="onScroll"&&In("scroll",n):l!=null&&j0(n,i,l,o))}switch(a){case"input":Jd(n),jx(n,e,!1);break;case"textarea":Jd(n),$x(n);break;case"option":e.value!=null&&n.setAttribute("value",""+Ks(e.value));break;case"select":n.multiple=!!e.multiple,i=e.value,i!=null?Iu(n,!!e.multiple,i,!1):e.defaultValue!=null&&Iu(n,!!e.multiple,e.defaultValue,!0);break;default:typeof t.onClick=="function"&&(n.onclick=hv)}jT(a,e)&&(r.flags|=4)}r.ref!==null&&(r.flags|=128)}return null;case 6:if(n&&r.stateNode!=null)gR(n,r,n.memoizedProps,e);else{if(typeof e!="string"&&r.stateNode===null)throw Error(ke(166));a=Cl(Yf.current),Cl(So.current),ah(r)?(e=r.stateNode,a=r.memoizedProps,e[Os]=r,e.nodeValue!==a&&(r.flags|=4)):(e=(a.nodeType===9?a:a.ownerDocument).createTextNode(e),e[Os]=r,r.stateNode=e)}return null;case 13:return Fn(Yn),e=r.memoizedState,(r.flags&64)!==0?(r.lanes=a,r):(e=e!==null,a=!1,n===null?r.memoizedProps.fallback!==void 0&&ah(r):a=n.memoizedState!==null,e&&!a&&(r.mode&2)!==0&&(n===null&&r.memoizedProps.unstable_avoidThisFallback!==!0||(Yn.current&1)!==0?Ir===0&&(Ir=3):((Ir===0||Ir===3)&&(Ir=4),fa===null||(bd&134217727)===0&&(Tc&134217727)===0||ku(fa,Kr))),(e||a)&&(r.flags|=4),null);case 4:return qu(),Qg(r),n===null&&zT(r.stateNode.containerInfo),null;case 10:return py(r),null;case 17:return La(r.type)&&pv(),null;case 19:if(Fn(Yn),e=r.memoizedState,e===null)return null;if(i=(r.flags&64)!==0,o=e.rendering,o===null)if(i)$c(e,!1);else{if(Ir!==0||n!==null&&(n.flags&64)!==0)for(n=r.child;n!==null;){if(o=Sv(n),o!==null){for(r.flags|=64,$c(e,!1),i=o.updateQueue,i!==null&&(r.updateQueue=i,r.flags|=4),e.lastEffect===null&&(r.firstEffect=null),r.lastEffect=e.lastEffect,e=a,a=r.child;a!==null;)i=a,n=e,i.flags&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,o=i.alternate,o===null?(i.childLanes=0,i.lanes=n,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,n=o.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return qn(Yn,Yn.current&1|2),r.child}n=n.sibling}e.tail!==null&&Xr()>nm&&(r.flags|=64,i=!0,$c(e,!1),r.lanes=33554432)}else{if(!i)if(n=Sv(o),n!==null){if(r.flags|=64,i=!0,a=n.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),$c(e,!0),e.tail===null&&e.tailMode==="hidden"&&!o.alternate&&!bo)return r=r.lastEffect=e.lastEffect,r!==null&&(r.nextEffect=null),null}else 2*Xr()-e.renderingStartTime>nm&&a!==1073741824&&(r.flags|=64,i=!0,$c(e,!1),r.lanes=33554432);e.isBackwards?(o.sibling=r.child,r.child=o):(a=e.last,a!==null?a.sibling=o:r.child=o,e.last=o)}return e.tail!==null?(a=e.tail,e.rendering=a,e.tail=a.sibling,e.lastEffect=r.lastEffect,e.renderingStartTime=Xr(),a.sibling=null,r=Yn.current,qn(Yn,i?r&1|2:r&1),a):null;case 23:case 24:return wy(),n!==null&&n.memoizedState!==null!=(r.memoizedState!==null)&&e.mode!=="unstable-defer-without-hiding"&&(r.flags|=4),null}throw Error(ke(156,r.tag))}function VO(n){switch(n.tag){case 1:La(n.type)&&pv();var r=n.flags;return r&4096?(n.flags=r&-4097|64,n):null;case 3:if(qu(),Fn(Ia),Fn(qr),my(),r=n.flags,(r&64)!==0)throw Error(ke(285));return n.flags=r&-4097|64,n;case 5:return gy(n),null;case 13:return Fn(Yn),r=n.flags,r&4096?(n.flags=r&-4097|64,n):null;case 19:return Fn(Yn),null;case 4:return qu(),null;case 10:return py(n),null;case 23:case 24:return wy(),null;default:return null}}function Ey(n,r){try{var a="",e=r;do a+=y2(e),e=e.return;while(e);var t=a}catch(i){t=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:r,stack:t}}function qg(n,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var UO=typeof WeakMap=="function"?WeakMap:Map;function mR(n,r,a){a=Gs(-1,a),a.tag=3,a.payload={element:null};var e=r.value;return a.callback=function(){wv||(wv=!0,rm=e),qg(n,r)},a}function yR(n,r,a){a=Gs(-1,a),a.tag=3;var e=n.type.getDerivedStateFromError;if(typeof e=="function"){var t=r.value;a.payload=function(){return qg(n,r),e(t)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(a.callback=function(){typeof e!="function"&&(go===null?go=new Set([this]):go.add(this),qg(n,r));var o=r.stack;this.componentDidCatch(r.value,{componentStack:o!==null?o:""})}),a}var zO=typeof WeakSet=="function"?WeakSet:Set;function jS(n){var r=n.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){$s(n,a)}else r.current=null}function GO(n,r){switch(r.tag){case 0:case 11:case 15:case 22:return;case 1:if(r.flags&256&&n!==null){var a=n.memoizedProps,e=n.memoizedState;n=r.stateNode,r=n.getSnapshotBeforeUpdate(r.elementType===r.type?a:ji(r.type,a),e),n.__reactInternalSnapshotBeforeUpdate=r}return;case 3:r.flags&256&&fy(r.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(ke(163))}function HO(n,r,a){switch(a.tag){case 0:case 11:case 15:case 22:if(r=a.updateQueue,r=r!==null?r.lastEffect:null,r!==null){n=r=r.next;do{if((n.tag&3)===3){var e=n.create;n.destroy=e()}n=n.next}while(n!==r)}if(r=a.updateQueue,r=r!==null?r.lastEffect:null,r!==null){n=r=r.next;do{var t=n;e=t.next,t=t.tag,(t&4)!==0&&(t&1)!==0&&(wR(a,n),qO(a,n)),n=e}while(n!==r)}return;case 1:n=a.stateNode,a.flags&4&&(r===null?n.componentDidMount():(e=a.elementType===a.type?r.memoizedProps:ji(a.type,r.memoizedProps),n.componentDidUpdate(e,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate))),r=a.updateQueue,r!==null&&TS(a,r,n);return;case 3:if(r=a.updateQueue,r!==null){if(n=null,a.child!==null)switch(a.child.tag){case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}TS(a,r,n)}return;case 5:n=a.stateNode,r===null&&a.flags&4&&jT(a.type,a.memoizedProps)&&n.focus();return;case 6:return;case 4:return;case 12:return;case 13:a.memoizedState===null&&(a=a.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&CT(a))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(ke(163))}function WS(n,r){for(var a=n;;){if(a.tag===5){var e=a.stateNode;if(r)e=e.style,typeof e.setProperty=="function"?e.setProperty("display","none","important"):e.display="none";else{e=a.stateNode;var t=a.memoizedProps.style;t=t!=null&&t.hasOwnProperty("display")?t.display:null,e.style.display=dT("display",t)}}else if(a.tag===6)a.stateNode.nodeValue=r?"":a.memoizedProps;else if((a.tag!==23&&a.tag!==24||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return;a=a.return}a.sibling.return=a.return,a=a.sibling}}function $S(n,r){if(Ll&&typeof Ll.onCommitFiberUnmount=="function")try{Ll.onCommitFiberUnmount(dy,r)}catch{}switch(r.tag){case 0:case 11:case 14:case 15:case 22:if(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null)){var a=n=n.next;do{var e=a,t=e.destroy;if(e=e.tag,t!==void 0)if((e&4)!==0)wR(r,a);else{e=r;try{t()}catch(i){$s(e,i)}}a=a.next}while(a!==n)}break;case 1:if(jS(r),n=r.stateNode,typeof n.componentWillUnmount=="function")try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(i){$s(r,i)}break;case 5:jS(r);break;case 4:xR(n,r)}}function XS(n){n.alternate=null,n.child=null,n.dependencies=null,n.firstEffect=null,n.lastEffect=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.return=null,n.updateQueue=null}function KS(n){return n.tag===5||n.tag===3||n.tag===4}function YS(n){e:{for(var r=n.return;r!==null;){if(KS(r))break e;r=r.return}throw Error(ke(160))}var a=r;switch(r=a.stateNode,a.tag){case 5:var e=!1;break;case 3:r=r.containerInfo,e=!0;break;case 4:r=r.containerInfo,e=!0;break;default:throw Error(ke(161))}a.flags&16&&(kf(r,""),a.flags&=-17);e:t:for(a=n;;){for(;a.sibling===null;){if(a.return===null||KS(a.return)){a=null;break e}a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(a.flags&2)){a=a.stateNode;break e}}e?Jg(n,a,r):Zg(n,a,r)}function Jg(n,r,a){var e=n.tag,t=e===5||e===6;if(t)n=t?n.stateNode:n.stateNode.instance,r?a.nodeType===8?a.parentNode.insertBefore(n,r):a.insertBefore(n,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(n,a)):(r=a,r.appendChild(n)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=hv));else if(e!==4&&(n=n.child,n!==null))for(Jg(n,r,a),n=n.sibling;n!==null;)Jg(n,r,a),n=n.sibling}function Zg(n,r,a){var e=n.tag,t=e===5||e===6;if(t)n=t?n.stateNode:n.stateNode.instance,r?a.insertBefore(n,r):a.appendChild(n);else if(e!==4&&(n=n.child,n!==null))for(Zg(n,r,a),n=n.sibling;n!==null;)Zg(n,r,a),n=n.sibling}function xR(n,r){for(var a=r,e=!1,t,i;;){if(!e){e=a.return;e:for(;;){if(e===null)throw Error(ke(160));switch(t=e.stateNode,e.tag){case 5:i=!1;break e;case 3:t=t.containerInfo,i=!0;break e;case 4:t=t.containerInfo,i=!0;break e}e=e.return}e=!0}if(a.tag===5||a.tag===6){e:for(var o=n,s=a,l=s;;)if($S(o,l),l.child!==null&&l.tag!==4)l.child.return=l,l=l.child;else{if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}i?(o=t,s=a.stateNode,o.nodeType===8?o.parentNode.removeChild(s):o.removeChild(s)):t.removeChild(a.stateNode)}else if(a.tag===4){if(a.child!==null){t=a.stateNode.containerInfo,i=!0,a.child.return=a,a=a.child;continue}}else if($S(n,a),a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return,a.tag===4&&(e=!1)}a.sibling.return=a.return,a=a.sibling}}function j_(n,r){switch(r.tag){case 0:case 11:case 14:case 15:case 22:var a=r.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var e=a=a.next;do(e.tag&3)===3&&(n=e.destroy,e.destroy=void 0,n!==void 0&&n()),e=e.next;while(e!==a)}return;case 1:return;case 5:if(a=r.stateNode,a!=null){e=r.memoizedProps;var t=n!==null?n.memoizedProps:e;n=r.type;var i=r.updateQueue;if(r.updateQueue=null,i!==null){for(a[vv]=e,n==="input"&&e.type==="radio"&&e.name!=null&&lT(a,e),Og(n,t),r=Og(n,e),t=0;t<i.length;t+=2){var o=i[t],s=i[t+1];o==="style"?hT(a,s):o==="dangerouslySetInnerHTML"?fT(a,s):o==="children"?kf(a,s):j0(a,o,s,r)}switch(n){case"input":Eg(a,e);break;case"textarea":uT(a,e);break;case"select":n=a._wrapperState.wasMultiple,a._wrapperState.wasMultiple=!!e.multiple,i=e.value,i!=null?Iu(a,!!e.multiple,i,!1):n!==!!e.multiple&&(e.defaultValue!=null?Iu(a,!!e.multiple,e.defaultValue,!0):Iu(a,!!e.multiple,e.multiple?[]:"",!1))}}}return;case 6:if(r.stateNode===null)throw Error(ke(162));r.stateNode.nodeValue=r.memoizedProps;return;case 3:a=r.stateNode,a.hydrate&&(a.hydrate=!1,CT(a.containerInfo));return;case 12:return;case 13:r.memoizedState!==null&&(Ay=Xr(),WS(r.child,!0)),QS(r);return;case 19:QS(r);return;case 17:return;case 23:case 24:WS(r,r.memoizedState!==null);return}throw Error(ke(163))}function QS(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new zO),r.forEach(function(e){var t=eI.bind(null,n,e);a.has(e)||(a.add(e),e.then(t,t))})}}function jO(n,r){return n!==null&&(n=n.memoizedState,n===null||n.dehydrated!==null)?(r=r.memoizedState,r!==null&&r.dehydrated===null):!1}var WO=Math.ceil,Av=$l.ReactCurrentDispatcher,Ty=$l.ReactCurrentOwner,Nt=0,fa=null,_r=null,Kr=0,zl=0,em=al(0),Ir=0,Ap=null,Ec=0,bd=0,Tc=0,Ry=0,tm=null,Ay=0,nm=1/0;function Rc(){nm=Xr()+500}var it=null,wv=!1,rm=null,go=null,qs=!1,Cf=null,uf=90,am=[],im=[],ts=null,Ef=0,om=null,Hh=-1,Qo=0,jh=0,Tf=null,Wh=!1;function qa(){return(Nt&48)!==0?Xr():Hh!==-1?Hh:Hh=Xr()}function js(n){if(n=n.mode,(n&2)===0)return 1;if((n&4)===0)return Qu()===99?1:2;if(Qo===0&&(Qo=Ec),IO.transition!==0){jh!==0&&(jh=tm!==null?tm.pendingLanes:0),n=Qo;var r=4186112&~jh;return r&=-r,r===0&&(n=4186112&~n,r=n&-n,r===0&&(r=8192)),r}return n=Qu(),(Nt&4)!==0&&n===98?n=fv(12,Qo):(n=F2(n),n=fv(n,Qo)),n}function Ws(n,r,a){if(50<Ef)throw Ef=0,om=null,Error(ke(185));if(n=wp(n,r),n===null)return null;xp(n,r,a),n===fa&&(Tc|=r,Ir===4&&ku(n,Kr));var e=Qu();r===1?(Nt&8)!==0&&(Nt&48)===0?sm(n):(Ri(n,a),Nt===0&&(Rc(),Po())):((Nt&4)===0||e!==98&&e!==99||(ts===null?ts=new Set([n]):ts.add(n)),Ri(n,a)),tm=n}function wp(n,r){n.lanes|=r;var a=n.alternate;for(a!==null&&(a.lanes|=r),a=n,n=n.return;n!==null;)n.childLanes|=r,a=n.alternate,a!==null&&(a.childLanes|=r),a=n,n=n.return;return a.tag===3?a.stateNode:null}function Ri(n,r){for(var a=n.callbackNode,e=n.suspendedLanes,t=n.pingedLanes,i=n.expirationTimes,o=n.pendingLanes;0<o;){var s=31-Ys(o),l=1<<s,u=i[s];if(u===-1){if((l&e)===0||(l&t)!==0){u=r,vu(l);var c=An;i[s]=10<=c?u+250:6<=c?u+5e3:-1}}else u<=r&&(n.expiredLanes|=l);o&=~l}if(e=Gf(n,n===fa?Kr:0),r=An,e===0)a!==null&&(a!==V_&&Gg(a),n.callbackNode=null,n.callbackPriority=0);else{if(a!==null){if(n.callbackPriority===r)return;a!==V_&&Gg(a)}r===15?(a=sm.bind(null,n),$o===null?($o=[a],Gh=hy(Tp,JT)):$o.push(a),a=V_):r===14?a=$f(99,sm.bind(null,n)):(a=D2(r),a=$f(a,SR.bind(null,n))),n.callbackPriority=r,n.callbackNode=a}}function SR(n){if(Hh=-1,jh=Qo=0,(Nt&48)!==0)throw Error(ke(327));var r=n.callbackNode;if(il()&&n.callbackNode!==r)return null;var a=Gf(n,n===fa?Kr:0);if(a===0)return null;var e=a,t=Nt;Nt|=16;var i=TR();(fa!==n||Kr!==e)&&(Rc(),Vu(n,e));do try{KO();break}catch(s){ER(n,s)}while(1);if(vy(),Av.current=i,Nt=t,_r!==null?e=0:(fa=null,Kr=0,e=Ir),(Ec&Tc)!==0)Vu(n,0);else if(e!==0){if(e===2&&(Nt|=64,n.hydrate&&(n.hydrate=!1,fy(n.containerInfo)),a=MT(n),a!==0&&(e=cf(n,a))),e===1)throw r=Ap,Vu(n,0),ku(n,a),Ri(n,Xr()),r;switch(n.finishedWork=n.current.alternate,n.finishedLanes=a,e){case 0:case 1:throw Error(ke(345));case 2:hl(n);break;case 3:if(ku(n,a),(a&62914560)===a&&(e=Ay+500-Xr(),10<e)){if(Gf(n,0)!==0)break;if(t=n.suspendedLanes,(t&a)!==a){qa(),n.pingedLanes|=n.suspendedLanes&t;break}n.timeoutHandle=gS(hl.bind(null,n),e);break}hl(n);break;case 4:if(ku(n,a),(a&4186112)===a)break;for(e=n.eventTimes,t=-1;0<a;){var o=31-Ys(a);i=1<<o,o=e[o],o>t&&(t=o),a&=~i}if(a=t,a=Xr()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*WO(a/1960))-a,10<a){n.timeoutHandle=gS(hl.bind(null,n),a);break}hl(n);break;case 5:hl(n);break;default:throw Error(ke(329))}}return Ri(n,Xr()),n.callbackNode===r?SR.bind(null,n):null}function ku(n,r){for(r&=~Ry,r&=~Tc,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var a=31-Ys(r),e=1<<a;n[a]=-1,r&=~e}}function sm(n){if((Nt&48)!==0)throw Error(ke(327));if(il(),n===fa&&(n.expiredLanes&Kr)!==0){var r=Kr,a=cf(n,r);(Ec&Tc)!==0&&(r=Gf(n,r),a=cf(n,r))}else r=Gf(n,0),a=cf(n,r);if(n.tag!==0&&a===2&&(Nt|=64,n.hydrate&&(n.hydrate=!1,fy(n.containerInfo)),r=MT(n),r!==0&&(a=cf(n,r))),a===1)throw a=Ap,Vu(n,0),ku(n,r),Ri(n,Xr()),a;return n.finishedWork=n.current.alternate,n.finishedLanes=r,hl(n),Ri(n,Xr()),null}function $O(){if(ts!==null){var n=ts;ts=null,n.forEach(function(r){r.expiredLanes|=24&r.pendingLanes,Ri(r,Xr())})}Po()}function bR(n,r){var a=Nt;Nt|=1;try{return n(r)}finally{Nt=a,Nt===0&&(Rc(),Po())}}function CR(n,r){var a=Nt;Nt&=-2,Nt|=8;try{return n(r)}finally{Nt=a,Nt===0&&(Rc(),Po())}}function oh(n,r){qn(em,zl),zl|=r,Ec|=r}function wy(){zl=em.current,Fn(em)}function Vu(n,r){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,RO(a)),_r!==null)for(a=_r.return;a!==null;){var e=a;switch(e.tag){case 1:e=e.type.childContextTypes,e!=null&&pv();break;case 3:qu(),Fn(Ia),Fn(qr),my();break;case 5:gy(e);break;case 4:qu();break;case 13:Fn(Yn);break;case 19:Fn(Yn);break;case 10:py(e);break;case 23:case 24:wy()}a=a.return}fa=n,_r=Js(n.current,null),Kr=zl=Ec=r,Ir=0,Ap=null,Ry=Tc=bd=0}function ER(n,r){do{var a=_r;try{if(vy(),Sf.current=Rv,bv){for(var e=or.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}bv=!1}if(Qf=0,wr=Hr=or=null,bf=!1,Ty.current=null,a===null||a.return===null){Ir=1,Ap=r,_r=null;break}e:{var i=n,o=a.return,s=a,l=r;if(r=Kr,s.flags|=2048,s.firstEffect=s.lastEffect=null,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l;if((s.mode&2)===0){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=(Yn.current&1)!==0,d=o;do{var h;if(h=d.tag===13){var _=d.memoizedState;if(_!==null)h=_.dehydrated!==null;else{var p=d.memoizedProps;h=p.fallback===void 0?!1:p.unstable_avoidThisFallback!==!0?!0:!f}}if(h){var v=d.updateQueue;if(v===null){var y=new Set;y.add(u),d.updateQueue=y}else v.add(u);if((d.mode&2)===0){if(d.flags|=64,s.flags|=16384,s.flags&=-2981,s.tag===1)if(s.alternate===null)s.tag=17;else{var m=Gs(-1,1);m.tag=2,Hs(s,m)}s.lanes|=1;break e}l=void 0,s=r;var g=i.pingCache;if(g===null?(g=i.pingCache=new UO,l=new Set,g.set(u,l)):(l=g.get(u),l===void 0&&(l=new Set,g.set(u,l))),!l.has(s)){l.add(s);var x=ZO.bind(null,i,u,s);u.then(x,x)}d.flags|=4096,d.lanes=r;break e}d=d.return}while(d!==null);l=Error((Ou(s.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Ir!==5&&(Ir=2),l=Ey(l,s),d=o;do{switch(d.tag){case 3:i=l,d.flags|=4096,r&=-r,d.lanes|=r;var b=mR(d,i,r);ES(d,b);break e;case 1:i=l;var S=d.type,C=d.stateNode;if((d.flags&64)===0&&(typeof S.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(go===null||!go.has(C)))){d.flags|=4096,r&=-r,d.lanes|=r;var E=yR(d,i,r);ES(d,E);break e}}d=d.return}while(d!==null)}AR(a)}catch(T){r=T,_r===a&&a!==null&&(_r=a=a.return);continue}break}while(1)}function TR(){var n=Av.current;return Av.current=Rv,n===null?Rv:n}function cf(n,r){var a=Nt;Nt|=16;var e=TR();fa===n&&Kr===r||Vu(n,r);do try{XO();break}catch(t){ER(n,t)}while(1);if(vy(),Nt=a,Av.current=e,_r!==null)throw Error(ke(261));return fa=null,Kr=0,Ir}function XO(){for(;_r!==null;)RR(_r)}function KO(){for(;_r!==null&&!PO();)RR(_r)}function RR(n){var r=PR(n.alternate,n,zl);n.memoizedProps=n.pendingProps,r===null?AR(n):_r=r,Ty.current=null}function AR(n){var r=n;do{var a=r.alternate;if(n=r.return,(r.flags&2048)===0){if(a=kO(a,r,zl),a!==null){_r=a;return}if(a=r,a.tag!==24&&a.tag!==23||a.memoizedState===null||(zl&1073741824)!==0||(a.mode&4)===0){for(var e=0,t=a.child;t!==null;)e|=t.lanes|t.childLanes,t=t.sibling;a.childLanes=e}n!==null&&(n.flags&2048)===0&&(n.firstEffect===null&&(n.firstEffect=r.firstEffect),r.lastEffect!==null&&(n.lastEffect!==null&&(n.lastEffect.nextEffect=r.firstEffect),n.lastEffect=r.lastEffect),1<r.flags&&(n.lastEffect!==null?n.lastEffect.nextEffect=r:n.firstEffect=r,n.lastEffect=r))}else{if(a=VO(r),a!==null){a.flags&=2047,_r=a;return}n!==null&&(n.firstEffect=n.lastEffect=null,n.flags|=2048)}if(r=r.sibling,r!==null){_r=r;return}_r=r=n}while(r!==null);Ir===0&&(Ir=5)}function hl(n){var r=Qu();return Ul(99,YO.bind(null,n,r)),null}function YO(n,r){do il();while(Cf!==null);if((Nt&48)!==0)throw Error(ke(327));var a=n.finishedWork;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(ke(177));n.callbackNode=null;var e=a.lanes|a.childLanes,t=e,i=n.pendingLanes&~t;n.pendingLanes=t,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=t,n.mutableReadLanes&=t,n.entangledLanes&=t,t=n.entanglements;for(var o=n.eventTimes,s=n.expirationTimes;0<i;){var l=31-Ys(i),u=1<<l;t[l]=0,o[l]=-1,s[l]=-1,i&=~u}if(ts!==null&&(e&24)===0&&ts.has(n)&&ts.delete(n),n===fa&&(_r=fa=null,Kr=0),1<a.flags?a.lastEffect!==null?(a.lastEffect.nextEffect=a,e=a.firstEffect):e=a:e=a.firstEffect,e!==null){if(t=Nt,Nt|=32,Ty.current=null,D_=kh,o=cS(),Bg(o)){if("selectionStart"in o)s={start:o.selectionStart,end:o.selectionEnd};else e:if(s=(s=o.ownerDocument)&&s.defaultView||window,(u=s.getSelection&&s.getSelection())&&u.rangeCount!==0){s=u.anchorNode,i=u.anchorOffset,l=u.focusNode,u=u.focusOffset;try{s.nodeType,l.nodeType}catch{s=null;break e}var c=0,f=-1,d=-1,h=0,_=0,p=o,v=null;t:for(;;){for(var y;p!==s||i!==0&&p.nodeType!==3||(f=c+i),p!==l||u!==0&&p.nodeType!==3||(d=c+u),p.nodeType===3&&(c+=p.nodeValue.length),(y=p.firstChild)!==null;)v=p,p=y;for(;;){if(p===o)break t;if(v===s&&++h===i&&(f=c),v===l&&++_===u&&(d=c),(y=p.nextSibling)!==null)break;p=v,v=p.parentNode}p=y}s=f===-1||d===-1?null:{start:f,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;B_={focusedElem:o,selectionRange:s},kh=!1,Tf=null,Wh=!1,it=e;do try{QO()}catch(T){if(it===null)throw Error(ke(330));$s(it,T),it=it.nextEffect}while(it!==null);Tf=null,it=e;do try{for(o=n;it!==null;){var m=it.flags;if(m&16&&kf(it.stateNode,""),m&128){var g=it.alternate;if(g!==null){var x=g.ref;x!==null&&(typeof x=="function"?x(null):x.current=null)}}switch(m&1038){case 2:YS(it),it.flags&=-3;break;case 6:YS(it),it.flags&=-3,j_(it.alternate,it);break;case 1024:it.flags&=-1025;break;case 1028:it.flags&=-1025,j_(it.alternate,it);break;case 4:j_(it.alternate,it);break;case 8:s=it,xR(o,s);var b=s.alternate;XS(s),b!==null&&XS(b)}it=it.nextEffect}}catch(T){if(it===null)throw Error(ke(330));$s(it,T),it=it.nextEffect}while(it!==null);if(x=B_,g=cS(),m=x.focusedElem,o=x.selectionRange,g!==m&&m&&m.ownerDocument&&kT(m.ownerDocument.documentElement,m)){for(o!==null&&Bg(m)&&(g=o.start,x=o.end,x===void 0&&(x=g),"selectionStart"in m?(m.selectionStart=g,m.selectionEnd=Math.min(x,m.value.length)):(x=(g=m.ownerDocument||document)&&g.defaultView||window,x.getSelection&&(x=x.getSelection(),s=m.textContent.length,b=Math.min(o.start,s),o=o.end===void 0?b:Math.min(o.end,s),!x.extend&&b>o&&(s=o,o=b,b=s),s=uS(m,b),i=uS(m,o),s&&i&&(x.rangeCount!==1||x.anchorNode!==s.node||x.anchorOffset!==s.offset||x.focusNode!==i.node||x.focusOffset!==i.offset)&&(g=g.createRange(),g.setStart(s.node,s.offset),x.removeAllRanges(),b>o?(x.addRange(g),x.extend(i.node,i.offset)):(g.setEnd(i.node,i.offset),x.addRange(g)))))),g=[],x=m;x=x.parentNode;)x.nodeType===1&&g.push({element:x,left:x.scrollLeft,top:x.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<g.length;m++)x=g[m],x.element.scrollLeft=x.left,x.element.scrollTop=x.top}kh=!!D_,B_=D_=null,n.current=a,it=e;do try{for(m=n;it!==null;){var S=it.flags;if(S&36&&HO(m,it.alternate,it),S&128){g=void 0;var C=it.ref;if(C!==null){var E=it.stateNode;switch(it.tag){case 5:g=E;break;default:g=E}typeof C=="function"?C(g):C.current=g}}it=it.nextEffect}}catch(T){if(it===null)throw Error(ke(330));$s(it,T),it=it.nextEffect}while(it!==null);it=null,OO(),Nt=t}else n.current=a;if(qs)qs=!1,Cf=n,uf=r;else for(it=e;it!==null;)r=it.nextEffect,it.nextEffect=null,it.flags&8&&(S=it,S.sibling=null,S.stateNode=null),it=r;if(e=n.pendingLanes,e===0&&(go=null),e===1?n===om?Ef++:(Ef=0,om=n):Ef=0,a=a.stateNode,Ll&&typeof Ll.onCommitFiberRoot=="function")try{Ll.onCommitFiberRoot(dy,a,void 0,(a.current.flags&64)===64)}catch{}if(Ri(n,Xr()),wv)throw wv=!1,n=rm,rm=null,n;return(Nt&8)!==0||Po(),null}function QO(){for(;it!==null;){var n=it.alternate;Wh||Tf===null||((it.flags&8)!==0?Yx(it,Tf)&&(Wh=!0):it.tag===13&&jO(n,it)&&Yx(it,Tf)&&(Wh=!0));var r=it.flags;(r&256)!==0&&GO(n,it),(r&512)===0||qs||(qs=!0,$f(97,function(){return il(),null})),it=it.nextEffect}}function il(){if(uf!==90){var n=97<uf?97:uf;return uf=90,Ul(n,JO)}return!1}function qO(n,r){am.push(r,n),qs||(qs=!0,$f(97,function(){return il(),null}))}function wR(n,r){im.push(r,n),qs||(qs=!0,$f(97,function(){return il(),null}))}function JO(){if(Cf===null)return!1;var n=Cf;if(Cf=null,(Nt&48)!==0)throw Error(ke(331));var r=Nt;Nt|=32;var a=im;im=[];for(var e=0;e<a.length;e+=2){var t=a[e],i=a[e+1],o=t.destroy;if(t.destroy=void 0,typeof o=="function")try{o()}catch(l){if(i===null)throw Error(ke(330));$s(i,l)}}for(a=am,am=[],e=0;e<a.length;e+=2){t=a[e],i=a[e+1];try{var s=t.create;t.destroy=s()}catch(l){if(i===null)throw Error(ke(330));$s(i,l)}}for(s=n.current.firstEffect;s!==null;)n=s.nextEffect,s.nextEffect=null,s.flags&8&&(s.sibling=null,s.stateNode=null),s=n;return Nt=r,Po(),!0}function qS(n,r,a){r=Ey(a,r),r=mR(n,r,1),Hs(n,r),r=qa(),n=wp(n,1),n!==null&&(xp(n,1,r),Ri(n,r))}function $s(n,r){if(n.tag===3)qS(n,n,r);else for(var a=n.return;a!==null;){if(a.tag===3){qS(a,n,r);break}else if(a.tag===1){var e=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof e.componentDidCatch=="function"&&(go===null||!go.has(e))){n=Ey(r,n);var t=yR(a,n,1);if(Hs(a,t),t=qa(),a=wp(a,1),a!==null)xp(a,1,t),Ri(a,t);else if(typeof e.componentDidCatch=="function"&&(go===null||!go.has(e)))try{e.componentDidCatch(r,n)}catch{}break}}a=a.return}}function ZO(n,r,a){var e=n.pingCache;e!==null&&e.delete(r),r=qa(),n.pingedLanes|=n.suspendedLanes&a,fa===n&&(Kr&a)===a&&(Ir===4||Ir===3&&(Kr&62914560)===Kr&&500>Xr()-Ay?Vu(n,0):Ry|=a),Ri(n,r)}function eI(n,r){var a=n.stateNode;a!==null&&a.delete(r),r=0,r===0&&(r=n.mode,(r&2)===0?r=1:(r&4)===0?r=Qu()===99?1:2:(Qo===0&&(Qo=Ec),r=pu(62914560&~Qo),r===0&&(r=4194304))),a=qa(),n=wp(n,r),n!==null&&(xp(n,r,a),Ri(n,a))}var PR;PR=function(n,r,a){var e=r.lanes;if(n!==null)if(n.memoizedProps!==r.pendingProps||Ia.current)Ki=!0;else if((a&e)!==0)Ki=(n.flags&16384)!==0;else{switch(Ki=!1,r.tag){case 3:BS(r),z_();break;case 5:wS(r);break;case 1:La(r.type)&&zh(r);break;case 4:Wg(r,r.stateNode.containerInfo);break;case 10:e=r.memoizedProps.value;var t=r.type._context;qn(_v,t._currentValue),t._currentValue=e;break;case 13:if(r.memoizedState!==null)return(a&r.child.childLanes)!==0?kS(n,r,a):(qn(Yn,Yn.current&1),r=Jo(n,r,a),r!==null?r.sibling:null);qn(Yn,Yn.current&1);break;case 19:if(e=(a&r.childLanes)!==0,(n.flags&64)!==0){if(e)return HS(n,r,a);r.flags|=64}if(t=r.memoizedState,t!==null&&(t.rendering=null,t.tail=null,t.lastEffect=null),qn(Yn,Yn.current),e)break;return null;case 23:case 24:return r.lanes=0,G_(n,r,a)}return Jo(n,r,a)}else Ki=!1;switch(r.lanes=0,r.tag){case 2:if(e=r.type,n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2),n=r.pendingProps,t=Yu(r,qr.current),Du(r,a),t=xy(null,r,e,n,t,a),r.flags|=1,typeof t=="object"&&t!==null&&typeof t.render=="function"&&t.$$typeof===void 0){if(r.tag=1,r.memoizedState=null,r.updateQueue=null,La(e)){var i=!0;zh(r)}else i=!1;r.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,_y(r);var o=e.getDerivedStateFromProps;typeof o=="function"&&yv(r,e,o,n),t.updater=Rp,r.stateNode=t,t._reactInternals=r,jg(r,e,n,a),r=Yg(null,r,e,!0,i,a)}else r.tag=0,Aa(null,r,t,a),r=r.child;return r;case 16:t=r.elementType;e:{switch(n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2),n=r.pendingProps,i=t._init,t=i(t._payload),r.type=t,i=r.tag=nI(t),n=ji(t,n),i){case 0:r=Kg(null,r,t,n,a);break e;case 1:r=DS(null,r,t,n,a);break e;case 11:r=NS(null,r,t,n,a);break e;case 14:r=FS(null,r,t,ji(t.type,n),e,a);break e}throw Error(ke(306,t,""))}return r;case 0:return e=r.type,t=r.pendingProps,t=r.elementType===e?t:ji(e,t),Kg(n,r,e,t,a);case 1:return e=r.type,t=r.pendingProps,t=r.elementType===e?t:ji(e,t),DS(n,r,e,t,a);case 3:if(BS(r),e=r.updateQueue,n===null||e===null)throw Error(ke(282));if(e=r.pendingProps,t=r.memoizedState,t=t!==null?t.element:null,eR(n,r),Xf(r,e,null,a),e=r.memoizedState.element,e===t)z_(),r=Jo(n,r,a);else{if(t=r.stateNode,(i=t.hydrate)&&(Is=Fu(r.stateNode.containerInfo.firstChild),qo=r,i=bo=!0),i){if(n=t.mutableSourceEagerHydrationData,n!=null)for(t=0;t<n.length;t+=2)i=n[t],i._workInProgressVersionPrimary=n[t+1],Bu.push(i);for(a=aR(r,null,e,a),r.child=a;a;)a.flags=a.flags&-3|1024,a=a.sibling}else Aa(n,r,e,a),z_();r=r.child}return r;case 5:return wS(r),n===null&&$g(r),e=r.type,t=r.pendingProps,i=n!==null?n.memoizedProps:null,o=t.children,Ug(e,t)?o=null:i!==null&&Ug(e,i)&&(r.flags|=16),vR(n,r),Aa(n,r,o,a),r.child;case 6:return n===null&&$g(r),null;case 13:return kS(n,r,a);case 4:return Wg(r,r.stateNode.containerInfo),e=r.pendingProps,n===null?r.child=xv(r,null,e,a):Aa(n,r,e,a),r.child;case 11:return e=r.type,t=r.pendingProps,t=r.elementType===e?t:ji(e,t),NS(n,r,e,t,a);case 7:return Aa(n,r,r.pendingProps,a),r.child;case 8:return Aa(n,r,r.pendingProps.children,a),r.child;case 12:return Aa(n,r,r.pendingProps.children,a),r.child;case 10:e:{e=r.type._context,t=r.pendingProps,o=r.memoizedProps,i=t.value;var s=r.type._context;if(qn(_v,s._currentValue),s._currentValue=i,o!==null)if(s=o.value,i=yi(s,i)?0:(typeof e._calculateChangedBits=="function"?e._calculateChangedBits(s,i):1073741823)|0,i===0){if(o.children===t.children&&!Ia.current){r=Jo(n,r,a);break e}}else for(s=r.child,s!==null&&(s.return=r);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===e&&(u.observedBits&i)!==0){s.tag===1&&(u=Gs(-1,a&-a),u.tag=2,Hs(s,u)),s.lanes|=a,u=s.alternate,u!==null&&(u.lanes|=a),ZT(s.return,a),l.lanes|=a;break}u=u.next}}else o=s.tag===10&&s.type===r.type?null:s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===r){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Aa(n,r,t.children,a),r=r.child}return r;case 9:return t=r.type,i=r.pendingProps,e=i.children,Du(r,a),t=Ti(t,i.unstable_observedBits),e=e(t),r.flags|=1,Aa(n,r,e,a),r.child;case 14:return t=r.type,i=ji(t,r.pendingProps),i=ji(t.type,i),FS(n,r,t,i,e,a);case 15:return hR(n,r,r.type,r.pendingProps,e,a);case 17:return e=r.type,t=r.pendingProps,t=r.elementType===e?t:ji(e,t),n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2),r.tag=1,La(e)?(n=!0,zh(r)):n=!1,Du(r,a),nR(r,e,t),jg(r,e,t,a),Yg(null,r,e,!0,n,a);case 19:return HS(n,r,a);case 23:return G_(n,r,a);case 24:return G_(n,r,a)}throw Error(ke(156,r.tag))};function tI(n,r,a,e){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=e,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function xi(n,r,a,e){return new tI(n,r,a,e)}function Py(n){return n=n.prototype,!(!n||!n.isReactComponent)}function nI(n){if(typeof n=="function")return Py(n)?1:0;if(n!=null){if(n=n.$$typeof,n===gp)return 11;if(n===mp)return 14}return 2}function Js(n,r){var a=n.alternate;return a===null?(a=xi(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null),a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function $h(n,r,a,e,t,i){var o=2;if(e=n,typeof n=="function")Py(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Ps:return Uu(a.children,t,i,r);case iT:o=8,t|=16;break;case W0:o=8,t|=1;break;case vf:return n=xi(12,a,r,t|8),n.elementType=vf,n.type=vf,n.lanes=i,n;case pf:return n=xi(13,a,r,t),n.type=pf,n.elementType=pf,n.lanes=i,n;case sv:return n=xi(19,a,r,t),n.elementType=sv,n.lanes=i,n;case q0:return My(a,t,i,r);case bg:return n=xi(24,a,r,t),n.elementType=bg,n.lanes=i,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case $0:o=10;break e;case X0:o=9;break e;case gp:o=11;break e;case mp:o=14;break e;case K0:o=16,e=null;break e;case Y0:o=22;break e}throw Error(ke(130,n==null?n:typeof n,""))}return r=xi(o,a,r,t),r.elementType=n,r.type=e,r.lanes=i,r}function Uu(n,r,a,e){return n=xi(7,n,e,r),n.lanes=a,n}function My(n,r,a,e){return n=xi(23,n,e,r),n.elementType=q0,n.lanes=a,n}function W_(n,r,a){return n=xi(6,n,null,r),n.lanes=a,n}function $_(n,r,a){return r=xi(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function rI(n,r,a){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=a,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=P_(0),this.expirationTimes=P_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=P_(0),this.mutableSourceEagerHydrationData=null}function aI(n,r,a){var e=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xl,key:e==null?null:""+e,children:n,containerInfo:r,implementation:a}}function Pv(n,r,a,e){var t=r.current,i=qa(),o=js(t);e:if(a){a=a._reactInternals;t:{if(Xl(a)!==a||a.tag!==1)throw Error(ke(170));var s=a;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(La(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(s!==null);throw Error(ke(171))}if(a.tag===1){var l=a.type;if(La(l)){a=$T(a,l,s);break e}}a=s}else a=Qs;return r.context===null?r.context=a:r.pendingContext=a,r=Gs(i,o),r.payload={element:n},e=e===void 0?null:e,e!==null&&(r.callback=e),Hs(t,r),Ws(t,o,i),o}function X_(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function JS(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function Oy(n,r){JS(n,r),(n=n.alternate)&&JS(n,r)}function iI(){return null}function Iy(n,r,a){var e=a!=null&&a.hydrationOptions!=null&&a.hydrationOptions.mutableSources||null;if(a=new rI(n,r,a!=null&&a.hydrate===!0),r=xi(3,null,null,r===2?7:r===1?3:0),a.current=r,r.stateNode=a,_y(r),n[Cc]=a.current,zT(n.nodeType===8?n.parentNode:n),e)for(n=0;n<e.length;n++){r=e[n];var t=r._getVersion;t=t(r._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[r,t]:a.mutableSourceEagerHydrationData.push(r,t)}this._internalRoot=a}Iy.prototype.render=function(n){Pv(n,this._internalRoot,null,null)};Iy.prototype.unmount=function(){var n=this._internalRoot,r=n.containerInfo;Pv(null,n,null,function(){r[Cc]=null})};function Cd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function oI(n,r){if(r||(r=n?n.nodeType===9?n.documentElement:n.firstChild:null,r=!(!r||r.nodeType!==1||!r.hasAttribute("data-reactroot"))),!r)for(var a;a=n.lastChild;)n.removeChild(a);return new Iy(n,0,r?{hydrate:!0}:void 0)}function Pp(n,r,a,e,t){var i=a._reactRootContainer;if(i){var o=i._internalRoot;if(typeof t=="function"){var s=t;t=function(){var u=X_(o);s.call(u)}}Pv(r,o,n,t)}else{if(i=a._reactRootContainer=oI(a,e),o=i._internalRoot,typeof t=="function"){var l=t;t=function(){var u=X_(o);l.call(u)}}CR(function(){Pv(r,o,n,t)})}return X_(o)}xT=function(n){if(n.tag===13){var r=qa();Ws(n,4,r),Oy(n,4)}};ny=function(n){if(n.tag===13){var r=qa();Ws(n,67108864,r),Oy(n,67108864)}};ST=function(n){if(n.tag===13){var r=qa(),a=js(n);Ws(n,a,r),Oy(n,a)}};bT=function(n,r){return r()};Ig=function(n,r,a){switch(r){case"input":if(Eg(n,a),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var e=a[r];if(e!==n&&e.form===n.form){var t=Ep(e);if(!t)throw Error(ke(90));sT(e),Eg(e,t)}}}break;case"textarea":uT(n,a);break;case"select":r=a.value,r!=null&&Iu(n,!!a.multiple,r,!1)}};Z0=bR;_T=function(n,r,a,e,t){var i=Nt;Nt|=4;try{return Ul(98,n.bind(null,r,a,e,t))}finally{Nt=i,Nt===0&&(Rc(),Po())}};ey=function(){(Nt&49)===0&&($O(),il())};gT=function(n,r){var a=Nt;Nt|=2;try{return n(r)}finally{Nt=a,Nt===0&&(Rc(),Po())}};function MR(n,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cd(r))throw Error(ke(200));return aI(n,r,null,a)}var sI={Events:[xd,Cu,Ep,vT,pT,il,{current:!1}]},Xc={findFiberByHostInstance:bl,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lI={bundleType:Xc.bundleType,version:Xc.version,rendererPackageName:Xc.rendererPackageName,rendererConfig:Xc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$l.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=yT(n),n===null?null:n.stateNode},findFiberByHostInstance:Xc.findFiberByHostInstance||iI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{dy=sh.inject(lI),Ll=sh}catch{}}Ii.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sI;Ii.createPortal=MR;Ii.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(ke(188)):Error(ke(268,Object.keys(n)));return n=yT(r),n=n===null?null:n.stateNode,n};Ii.flushSync=function(n,r){var a=Nt;if((a&48)!==0)return n(r);Nt|=1;try{if(n)return Ul(99,n.bind(null,r))}finally{Nt=a,Po()}};Ii.hydrate=function(n,r,a){if(!Cd(r))throw Error(ke(200));return Pp(null,n,r,!0,a)};Ii.render=function(n,r,a){if(!Cd(r))throw Error(ke(200));return Pp(null,n,r,!1,a)};Ii.unmountComponentAtNode=function(n){if(!Cd(n))throw Error(ke(40));return n._reactRootContainer?(CR(function(){Pp(null,null,n,!1,function(){n._reactRootContainer=null,n[Cc]=null})}),!0):!1};Ii.unstable_batchedUpdates=bR;Ii.unstable_createPortal=function(n,r){return MR(n,r,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Ii.unstable_renderSubtreeIntoContainer=function(n,r,a,e){if(!Cd(a))throw Error(ke(200));if(n==null||n._reactInternals===void 0)throw Error(ke(38));return Pp(n,r,a,!1,e)};Ii.version="17.0.2";function OR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(OR)}catch(n){console.error(n)}}OR(),kl.exports=Ii;var IR=kl.exports,LR={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var r={}.hasOwnProperty;function a(){for(var i="",o=0;o<arguments.length;o++){var s=arguments[o];s&&(i=t(i,e(s)))}return i}function e(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return a.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var o="";for(var s in i)r.call(i,s)&&i[s]&&(o=t(o,s));return o}function t(i,o){return o?i?i+" "+o:i+o:i}n.exports?(a.default=a,n.exports=a):window.classNames=a})()})(LR);var mt=LR.exports;function St(){return St=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(n[e]=a[e])}return n},St.apply(this,arguments)}var Rf={exports:{}},_n={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ly=Symbol.for("react.element"),Ny=Symbol.for("react.portal"),Mp=Symbol.for("react.fragment"),Op=Symbol.for("react.strict_mode"),Ip=Symbol.for("react.profiler"),Lp=Symbol.for("react.provider"),Np=Symbol.for("react.context"),uI=Symbol.for("react.server_context"),Fp=Symbol.for("react.forward_ref"),Dp=Symbol.for("react.suspense"),Bp=Symbol.for("react.suspense_list"),kp=Symbol.for("react.memo"),Vp=Symbol.for("react.lazy"),cI=Symbol.for("react.offscreen"),NR;NR=Symbol.for("react.module.reference");function Li(n){if(typeof n=="object"&&n!==null){var r=n.$$typeof;switch(r){case Ly:switch(n=n.type,n){case Mp:case Ip:case Op:case Dp:case Bp:return n;default:switch(n=n&&n.$$typeof,n){case uI:case Np:case Fp:case Vp:case kp:case Lp:return n;default:return r}}case Ny:return r}}}_n.ContextConsumer=Np;_n.ContextProvider=Lp;_n.Element=Ly;_n.ForwardRef=Fp;_n.Fragment=Mp;_n.Lazy=Vp;_n.Memo=kp;_n.Portal=Ny;_n.Profiler=Ip;_n.StrictMode=Op;_n.Suspense=Dp;_n.SuspenseList=Bp;_n.isAsyncMode=function(){return!1};_n.isConcurrentMode=function(){return!1};_n.isContextConsumer=function(n){return Li(n)===Np};_n.isContextProvider=function(n){return Li(n)===Lp};_n.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===Ly};_n.isForwardRef=function(n){return Li(n)===Fp};_n.isFragment=function(n){return Li(n)===Mp};_n.isLazy=function(n){return Li(n)===Vp};_n.isMemo=function(n){return Li(n)===kp};_n.isPortal=function(n){return Li(n)===Ny};_n.isProfiler=function(n){return Li(n)===Ip};_n.isStrictMode=function(n){return Li(n)===Op};_n.isSuspense=function(n){return Li(n)===Dp};_n.isSuspenseList=function(n){return Li(n)===Bp};_n.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===Mp||n===Ip||n===Op||n===Dp||n===Bp||n===cI||typeof n=="object"&&n!==null&&(n.$$typeof===Vp||n.$$typeof===kp||n.$$typeof===Lp||n.$$typeof===Np||n.$$typeof===Fp||n.$$typeof===NR||n.getModuleId!==void 0)};_n.typeOf=Li;Rf.exports=_n;function Zs(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=[];return Wt.Children.forEach(n,function(e){e==null&&!r.keepEmpty||(Array.isArray(e)?a=a.concat(Zs(e)):Rf.exports.isFragment(e)&&e.props?a=a.concat(Zs(e.props.children,r)):a.push(e))}),a}var lm={},fI=function(r){};function dI(n,r){}function hI(n,r){}function vI(){lm={}}function FR(n,r,a){!r&&!lm[a]&&(n(!1,a),lm[a]=!0)}function Yr(n,r){FR(dI,n,r)}function pI(n,r){FR(hI,n,r)}Yr.preMessage=fI;Yr.resetWarned=vI;Yr.noteOnce=pI;function Qt(n){return Qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Qt(n)}function _I(n,r){if(Qt(n)!="object"||!n)return n;var a=n[Symbol.toPrimitive];if(a!==void 0){var e=a.call(n,r||"default");if(Qt(e)!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function DR(n){var r=_I(n,"string");return Qt(r)=="symbol"?r:r+""}function Z(n,r,a){return r=DR(r),r in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,n}function ZS(n,r){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);r&&(e=e.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),a.push.apply(a,e)}return a}function ie(n){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?ZS(Object(a),!0).forEach(function(e){Z(n,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):ZS(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})}return n}function Mv(n){return n instanceof HTMLElement||n instanceof SVGElement}function Af(n){return Mv(n)?n:n instanceof Wt.Component?IR.findDOMNode(n):null}function Ed(n,r,a){var e=w.exports.useRef({});return(!("value"in e.current)||a(e.current.condition,r))&&(e.current.value=n(),e.current.condition=r),e.current.value}function Fy(n,r){typeof n=="function"?n(r):Qt(n)==="object"&&n&&"current"in n&&(n.current=r)}function Dy(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var e=r.filter(function(t){return t});return e.length<=1?e[0]:function(t){r.forEach(function(i){Fy(i,t)})}}function Td(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ed(function(){return Dy.apply(void 0,r)},r,function(e,t){return e.length!==t.length||e.every(function(i,o){return i!==t[o]})})}function Up(n){var r,a,e=Rf.exports.isMemo(n)?n.type.type:n.type;return!(typeof e=="function"&&!((r=e.prototype)!==null&&r!==void 0&&r.render)&&e.$$typeof!==Rf.exports.ForwardRef||typeof n=="function"&&!((a=n.prototype)!==null&&a!==void 0&&a.render)&&n.$$typeof!==Rf.exports.ForwardRef)}var um=w.exports.createContext(null);function gI(n){var r=n.children,a=n.onBatchResize,e=w.exports.useRef(0),t=w.exports.useRef([]),i=w.exports.useContext(um),o=w.exports.useCallback(function(s,l,u){e.current+=1;var c=e.current;t.current.push({size:s,element:l,data:u}),Promise.resolve().then(function(){c===e.current&&(a==null||a(t.current),t.current=[])}),i==null||i(s,l,u)},[a,i]);return w.exports.createElement(um.Provider,{value:o},r)}var BR=function(){if(typeof Map!="undefined")return Map;function n(r,a){var e=-1;return r.some(function(t,i){return t[0]===a?(e=i,!0):!1}),e}return function(){function r(){this.__entries__=[]}return Object.defineProperty(r.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),r.prototype.get=function(a){var e=n(this.__entries__,a),t=this.__entries__[e];return t&&t[1]},r.prototype.set=function(a,e){var t=n(this.__entries__,a);~t?this.__entries__[t][1]=e:this.__entries__.push([a,e])},r.prototype.delete=function(a){var e=this.__entries__,t=n(e,a);~t&&e.splice(t,1)},r.prototype.has=function(a){return!!~n(this.__entries__,a)},r.prototype.clear=function(){this.__entries__.splice(0)},r.prototype.forEach=function(a,e){e===void 0&&(e=null);for(var t=0,i=this.__entries__;t<i.length;t++){var o=i[t];a.call(e,o[1],o[0])}},r}()}(),cm=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,Ov=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),mI=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Ov):function(n){return setTimeout(function(){return n(Date.now())},1e3/60)}}(),yI=2;function xI(n,r){var a=!1,e=!1,t=0;function i(){a&&(a=!1,n()),e&&s()}function o(){mI(i)}function s(){var l=Date.now();if(a){if(l-t<yI)return;e=!0}else a=!0,e=!1,setTimeout(o,r);t=l}return s}var SI=20,bI=["top","right","bottom","left","width","height","size","weight"],CI=typeof MutationObserver!="undefined",EI=function(){function n(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=xI(this.refresh.bind(this),SI)}return n.prototype.addObserver=function(r){~this.observers_.indexOf(r)||this.observers_.push(r),this.connected_||this.connect_()},n.prototype.removeObserver=function(r){var a=this.observers_,e=a.indexOf(r);~e&&a.splice(e,1),!a.length&&this.connected_&&this.disconnect_()},n.prototype.refresh=function(){var r=this.updateObservers_();r&&this.refresh()},n.prototype.updateObservers_=function(){var r=this.observers_.filter(function(a){return a.gatherActive(),a.hasActive()});return r.forEach(function(a){return a.broadcastActive()}),r.length>0},n.prototype.connect_=function(){!cm||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),CI?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},n.prototype.disconnect_=function(){!cm||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},n.prototype.onTransitionEnd_=function(r){var a=r.propertyName,e=a===void 0?"":a,t=bI.some(function(i){return!!~e.indexOf(i)});t&&this.refresh()},n.getInstance=function(){return this.instance_||(this.instance_=new n),this.instance_},n.instance_=null,n}(),kR=function(n,r){for(var a=0,e=Object.keys(r);a<e.length;a++){var t=e[a];Object.defineProperty(n,t,{value:r[t],enumerable:!1,writable:!1,configurable:!0})}return n},Ju=function(n){var r=n&&n.ownerDocument&&n.ownerDocument.defaultView;return r||Ov},VR=zp(0,0,0,0);function Iv(n){return parseFloat(n)||0}function e1(n){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];return r.reduce(function(e,t){var i=n["border-"+t+"-width"];return e+Iv(i)},0)}function TI(n){for(var r=["top","right","bottom","left"],a={},e=0,t=r;e<t.length;e++){var i=t[e],o=n["padding-"+i];a[i]=Iv(o)}return a}function RI(n){var r=n.getBBox();return zp(0,0,r.width,r.height)}function AI(n){var r=n.clientWidth,a=n.clientHeight;if(!r&&!a)return VR;var e=Ju(n).getComputedStyle(n),t=TI(e),i=t.left+t.right,o=t.top+t.bottom,s=Iv(e.width),l=Iv(e.height);if(e.boxSizing==="border-box"&&(Math.round(s+i)!==r&&(s-=e1(e,"left","right")+i),Math.round(l+o)!==a&&(l-=e1(e,"top","bottom")+o)),!PI(n)){var u=Math.round(s+i)-r,c=Math.round(l+o)-a;Math.abs(u)!==1&&(s-=u),Math.abs(c)!==1&&(l-=c)}return zp(t.left,t.top,s,l)}var wI=function(){return typeof SVGGraphicsElement!="undefined"?function(n){return n instanceof Ju(n).SVGGraphicsElement}:function(n){return n instanceof Ju(n).SVGElement&&typeof n.getBBox=="function"}}();function PI(n){return n===Ju(n).document.documentElement}function MI(n){return cm?wI(n)?RI(n):AI(n):VR}function OI(n){var r=n.x,a=n.y,e=n.width,t=n.height,i=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,o=Object.create(i.prototype);return kR(o,{x:r,y:a,width:e,height:t,top:a,right:r+e,bottom:t+a,left:r}),o}function zp(n,r,a,e){return{x:n,y:r,width:a,height:e}}var II=function(){function n(r){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=zp(0,0,0,0),this.target=r}return n.prototype.isActive=function(){var r=MI(this.target);return this.contentRect_=r,r.width!==this.broadcastWidth||r.height!==this.broadcastHeight},n.prototype.broadcastRect=function(){var r=this.contentRect_;return this.broadcastWidth=r.width,this.broadcastHeight=r.height,r},n}(),LI=function(){function n(r,a){var e=OI(a);kR(this,{target:r,contentRect:e})}return n}(),NI=function(){function n(r,a,e){if(this.activeObservations_=[],this.observations_=new BR,typeof r!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=r,this.controller_=a,this.callbackCtx_=e}return n.prototype.observe=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(r instanceof Ju(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var a=this.observations_;a.has(r)||(a.set(r,new II(r)),this.controller_.addObserver(this),this.controller_.refresh())}},n.prototype.unobserve=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(r instanceof Ju(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var a=this.observations_;!a.has(r)||(a.delete(r),a.size||this.controller_.removeObserver(this))}},n.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},n.prototype.gatherActive=function(){var r=this;this.clearActive(),this.observations_.forEach(function(a){a.isActive()&&r.activeObservations_.push(a)})},n.prototype.broadcastActive=function(){if(!!this.hasActive()){var r=this.callbackCtx_,a=this.activeObservations_.map(function(e){return new LI(e.target,e.broadcastRect())});this.callback_.call(r,a,r),this.clearActive()}},n.prototype.clearActive=function(){this.activeObservations_.splice(0)},n.prototype.hasActive=function(){return this.activeObservations_.length>0},n}(),UR=typeof WeakMap!="undefined"?new WeakMap:new BR,zR=function(){function n(r){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var a=EI.getInstance(),e=new NI(r,a,this);UR.set(this,e)}return n}();["observe","unobserve","disconnect"].forEach(function(n){zR.prototype[n]=function(){var r;return(r=UR.get(this))[n].apply(r,arguments)}});var FI=function(){return typeof Ov.ResizeObserver!="undefined"?Ov.ResizeObserver:zR}(),Ls=new Map;function DI(n){n.forEach(function(r){var a,e=r.target;(a=Ls.get(e))===null||a===void 0||a.forEach(function(t){return t(e)})})}var GR=new FI(DI);function BI(n,r){Ls.has(n)||(Ls.set(n,new Set),GR.observe(n)),Ls.get(n).add(r)}function kI(n,r){Ls.has(n)&&(Ls.get(n).delete(r),Ls.get(n).size||(GR.unobserve(n),Ls.delete(n)))}function _a(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function t1(n,r){for(var a=0;a<r.length;a++){var e=r[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,DR(e.key),e)}}function ga(n,r,a){return r&&t1(n.prototype,r),a&&t1(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n}function fm(n,r){return fm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fm(n,r)}function Yl(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&fm(n,r)}function Zu(n){return Zu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Zu(n)}function By(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(By=function(){return!!n})()}function nn(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function HR(n,r){if(r&&(Qt(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nn(n)}function Rd(n){var r=By();return function(){var e=Zu(n),t;if(r){var i=Zu(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return HR(this,t)}}var VI=function(n){Yl(a,n);var r=Rd(a);function a(){return _a(this,a),r.apply(this,arguments)}return ga(a,[{key:"render",value:function(){return this.props.children}}]),a}(w.exports.Component);function UI(n,r){var a=n.children,e=n.disabled,t=w.exports.useRef(null),i=w.exports.useRef(null),o=w.exports.useContext(um),s=typeof a=="function",l=s?a(t):a,u=w.exports.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),c=!s&&w.exports.isValidElement(l)&&Up(l),f=c?l.ref:null,d=Td(f,t),h=function(){var y;return Af(t.current)||(t.current&&Qt(t.current)==="object"?Af((y=t.current)===null||y===void 0?void 0:y.nativeElement):null)||Af(i.current)};w.exports.useImperativeHandle(r,function(){return h()});var _=w.exports.useRef(n);_.current=n;var p=w.exports.useCallback(function(v){var y=_.current,m=y.onResize,g=y.data,x=v.getBoundingClientRect(),b=x.width,S=x.height,C=v.offsetWidth,E=v.offsetHeight,T=Math.floor(b),M=Math.floor(S);if(u.current.width!==T||u.current.height!==M||u.current.offsetWidth!==C||u.current.offsetHeight!==E){var L={width:T,height:M,offsetWidth:C,offsetHeight:E};u.current=L;var F=C===Math.round(b)?b:C,N=E===Math.round(S)?S:E,I=ie(ie({},L),{},{offsetWidth:F,offsetHeight:N});o==null||o(I,v,g),m&&Promise.resolve().then(function(){m(I,v)})}},[]);return w.exports.useEffect(function(){var v=h();return v&&!e&&BI(v,p),function(){return kI(v,p)}},[t.current,e]),w.exports.createElement(VI,{ref:i},c?w.exports.cloneElement(l,{ref:d}):l)}var zI=w.exports.forwardRef(UI),GI="rc-observer-key";function HI(n,r){var a=n.children,e=typeof a=="function"?[a]:Zs(a);return e.map(function(t,i){var o=(t==null?void 0:t.key)||"".concat(GI,"-").concat(i);return w.exports.createElement(zI,St({},n,{key:o,ref:i===0?r:void 0}),t)})}var Ql=w.exports.forwardRef(HI);Ql.Collection=gI;function _s(n,r){var a=ie({},n);return Array.isArray(r)&&r.forEach(function(e){delete a[e]}),a}function dm(n,r){(r==null||r>n.length)&&(r=n.length);for(var a=0,e=new Array(r);a<r;a++)e[a]=n[a];return e}function jI(n){if(Array.isArray(n))return dm(n)}function jR(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function ky(n,r){if(!!n){if(typeof n=="string")return dm(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return dm(n,r)}}function WI(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function st(n){return jI(n)||jR(n)||ky(n)||WI()}var WR=function(r){return+setTimeout(r,16)},$R=function(r){return clearTimeout(r)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(WR=function(r){return window.requestAnimationFrame(r)},$R=function(r){return window.cancelAnimationFrame(r)});var n1=0,Vy=new Map;function XR(n){Vy.delete(n)}var gr=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;n1+=1;var e=n1;function t(i){if(i===0)XR(e),r();else{var o=WR(function(){t(i-1)});Vy.set(e,o)}}return t(a),e};gr.cancel=function(n){var r=Vy.get(n);return XR(n),$R(r)};function KR(n){if(Array.isArray(n))return n}function $I(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var e,t,i,o,s=[],l=!0,u=!1;try{if(i=(a=a.call(n)).next,r===0){if(Object(a)!==a)return;l=!1}else for(;!(l=(e=i.call(a)).done)&&(s.push(e.value),s.length!==r);l=!0);}catch(c){u=!0,t=c}finally{try{if(!l&&a.return!=null&&(o=a.return(),Object(o)!==o))return}finally{if(u)throw t}}return s}}function YR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _e(n,r){return KR(n)||$I(n,r)||ky(n,r)||YR()}function Lv(n){for(var r=0,a,e=0,t=n.length;t>=4;++e,t-=4)a=n.charCodeAt(e)&255|(n.charCodeAt(++e)&255)<<8|(n.charCodeAt(++e)&255)<<16|(n.charCodeAt(++e)&255)<<24,a=(a&65535)*1540483477+((a>>>16)*59797<<16),a^=a>>>24,r=(a&65535)*1540483477+((a>>>16)*59797<<16)^(r&65535)*1540483477+((r>>>16)*59797<<16);switch(t){case 3:r^=(n.charCodeAt(e+2)&255)<<16;case 2:r^=(n.charCodeAt(e+1)&255)<<8;case 1:r^=n.charCodeAt(e)&255,r=(r&65535)*1540483477+((r>>>16)*59797<<16)}return r^=r>>>13,r=(r&65535)*1540483477+((r>>>16)*59797<<16),((r^r>>>15)>>>0).toString(36)}function Fa(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}function XI(n,r){if(!n)return!1;if(n.contains)return n.contains(r);for(var a=r;a;){if(a===n)return!0;a=a.parentNode}return!1}var r1="data-rc-order",a1="data-rc-priority",KI="rc-util-key",hm=new Map;function QR(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.mark;return r?r.startsWith("data-")?r:"data-".concat(r):KI}function Gp(n){if(n.attachTo)return n.attachTo;var r=document.querySelector("head");return r||document.body}function YI(n){return n==="queue"?"prependQueue":n?"prepend":"append"}function Uy(n){return Array.from((hm.get(n)||n).children).filter(function(r){return r.tagName==="STYLE"})}function qR(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Fa())return null;var a=r.csp,e=r.prepend,t=r.priority,i=t===void 0?0:t,o=YI(e),s=o==="prependQueue",l=document.createElement("style");l.setAttribute(r1,o),s&&i&&l.setAttribute(a1,"".concat(i)),a!=null&&a.nonce&&(l.nonce=a==null?void 0:a.nonce),l.innerHTML=n;var u=Gp(r),c=u.firstChild;if(e){if(s){var f=(r.styles||Uy(u)).filter(function(d){if(!["prepend","prependQueue"].includes(d.getAttribute(r1)))return!1;var h=Number(d.getAttribute(a1)||0);return i>=h});if(f.length)return u.insertBefore(l,f[f.length-1].nextSibling),l}u.insertBefore(l,c)}else u.appendChild(l);return l}function JR(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=Gp(r);return(r.styles||Uy(a)).find(function(e){return e.getAttribute(QR(r))===n})}function qf(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=JR(n,r);if(a){var e=Gp(r);e.removeChild(a)}}function QI(n,r){var a=hm.get(n);if(!a||!XI(document,a)){var e=qR("",r),t=e.parentNode;hm.set(n,t),n.removeChild(e)}}function ns(n,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},e=Gp(a),t=Uy(e),i=ie(ie({},a),{},{styles:t});QI(e,i);var o=JR(r,i);if(o){var s,l;if((s=i.csp)!==null&&s!==void 0&&s.nonce&&o.nonce!==((l=i.csp)===null||l===void 0?void 0:l.nonce)){var u;o.nonce=(u=i.csp)===null||u===void 0?void 0:u.nonce}return o.innerHTML!==n&&(o.innerHTML=n),o}var c=qR(n,i);return c.setAttribute(QR(i),r),c}function qI(n,r){if(n==null)return{};var a={},e=Object.keys(n),t,i;for(i=0;i<e.length;i++)t=e[i],!(r.indexOf(t)>=0)&&(a[t]=n[t]);return a}function Zt(n,r){if(n==null)return{};var a=qI(n,r),e,t;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(t=0;t<i.length;t++)e=i[t],!(r.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,e)||(a[e]=n[e]))}return a}function Jf(n,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,e=new Set;function t(i,o){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,l=e.has(i);if(Yr(!l,"Warning: There may be circular references"),l)return!1;if(i===o)return!0;if(a&&s>1)return!1;e.add(i);var u=s+1;if(Array.isArray(i)){if(!Array.isArray(o)||i.length!==o.length)return!1;for(var c=0;c<i.length;c++)if(!t(i[c],o[c],u))return!1;return!0}if(i&&o&&Qt(i)==="object"&&Qt(o)==="object"){var f=Object.keys(i);return f.length!==Object.keys(o).length?!1:f.every(function(d){return t(i[d],o[d],u)})}return!1}return t(n,r)}var JI="%";function vm(n){return n.join(JI)}var ZI=function(){function n(r){_a(this,n),Z(this,"instanceId",void 0),Z(this,"cache",new Map),this.instanceId=r}return ga(n,[{key:"get",value:function(a){return this.opGet(vm(a))}},{key:"opGet",value:function(a){return this.cache.get(a)||null}},{key:"update",value:function(a,e){return this.opUpdate(vm(a),e)}},{key:"opUpdate",value:function(a,e){var t=this.cache.get(a),i=e(t);i===null?this.cache.delete(a):this.cache.set(a,i)}}]),n}(),ec="data-token-hash",Qi="data-css-hash",Ns="__cssinjs_instance__";function eL(){var n=Math.random().toString(12).slice(2);if(typeof document!="undefined"&&document.head&&document.body){var r=document.body.querySelectorAll("style[".concat(Qi,"]"))||[],a=document.head.firstChild;Array.from(r).forEach(function(t){t[Ns]=t[Ns]||n,t[Ns]===n&&document.head.insertBefore(t,a)});var e={};Array.from(document.querySelectorAll("style[".concat(Qi,"]"))).forEach(function(t){var i=t.getAttribute(Qi);if(e[i]){if(t[Ns]===n){var o;(o=t.parentNode)===null||o===void 0||o.removeChild(t)}}else e[i]=!0})}return new ZI(n)}var Hp=w.exports.createContext({hashPriority:"low",cache:eL(),defaultCache:!0});function tL(n,r){if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(n[a]!==r[a])return!1;return!0}var zy=function(){function n(){_a(this,n),Z(this,"cache",void 0),Z(this,"keys",void 0),Z(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return ga(n,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(a){var e,t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o={map:this.cache};return a.forEach(function(s){if(!o)o=void 0;else{var l;o=(l=o)===null||l===void 0||(l=l.map)===null||l===void 0?void 0:l.get(s)}}),(e=o)!==null&&e!==void 0&&e.value&&i&&(o.value[1]=this.cacheCallTimes++),(t=o)===null||t===void 0?void 0:t.value}},{key:"get",value:function(a){var e;return(e=this.internalGet(a,!0))===null||e===void 0?void 0:e[0]}},{key:"has",value:function(a){return!!this.internalGet(a)}},{key:"set",value:function(a,e){var t=this;if(!this.has(a)){if(this.size()+1>n.MAX_CACHE_SIZE+n.MAX_CACHE_OFFSET){var i=this.keys.reduce(function(u,c){var f=_e(u,2),d=f[1];return t.internalGet(c)[1]<d?[c,t.internalGet(c)[1]]:u},[this.keys[0],this.cacheCallTimes]),o=_e(i,1),s=o[0];this.delete(s)}this.keys.push(a)}var l=this.cache;a.forEach(function(u,c){if(c===a.length-1)l.set(u,{value:[e,t.cacheCallTimes++]});else{var f=l.get(u);f?f.map||(f.map=new Map):l.set(u,{map:new Map}),l=l.get(u).map}})}},{key:"deleteByPath",value:function(a,e){var t=a.get(e[0]);if(e.length===1){var i;return t.map?a.set(e[0],{map:t.map}):a.delete(e[0]),(i=t.value)===null||i===void 0?void 0:i[0]}var o=this.deleteByPath(t.map,e.slice(1));return(!t.map||t.map.size===0)&&!t.value&&a.delete(e[0]),o}},{key:"delete",value:function(a){if(this.has(a))return this.keys=this.keys.filter(function(e){return!tL(e,a)}),this.deleteByPath(this.cache,a)}}]),n}();Z(zy,"MAX_CACHE_SIZE",20);Z(zy,"MAX_CACHE_OFFSET",5);var i1=0,ZR=function(){function n(r){_a(this,n),Z(this,"derivatives",void 0),Z(this,"id",void 0),this.derivatives=Array.isArray(r)?r:[r],this.id=i1,r.length===0&&(r.length>0,void 0),i1+=1}return ga(n,[{key:"getDerivativeToken",value:function(a){return this.derivatives.reduce(function(e,t){return t(a,e)},void 0)}}]),n}(),K_=new zy;function Zf(n){var r=Array.isArray(n)?n:[n];return K_.has(r)||K_.set(r,new ZR(r)),K_.get(r)}var nL=new WeakMap,Y_={};function rL(n,r){for(var a=nL,e=0;e<r.length;e+=1){var t=r[e];a.has(t)||a.set(t,new WeakMap),a=a.get(t)}return a.has(Y_)||a.set(Y_,n()),a.get(Y_)}var o1=new WeakMap;function wf(n){var r=o1.get(n)||"";return r||(Object.keys(n).forEach(function(a){var e=n[a];r+=a,e instanceof ZR?r+=e.id:e&&Qt(e)==="object"?r+=wf(e):r+=e}),o1.set(n,r)),r}function s1(n,r){return Lv("".concat(r,"_").concat(wf(n)))}var pm=Fa();function wt(n){return typeof n=="number"?"".concat(n,"px"):n}function Nv(n,r,a){var e,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(i)return n;var o=ie(ie({},t),{},(e={},Z(e,ec,r),Z(e,Qi,a),e)),s=Object.keys(o).map(function(l){var u=o[l];return u?"".concat(l,'="').concat(u,'"'):null}).filter(function(l){return l}).join(" ");return"<style ".concat(s,">").concat(n,"</style>")}var eA=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(a?"".concat(a,"-"):"").concat(r).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},aL=function(r,a,e){return Object.keys(r).length?".".concat(a).concat(e!=null&&e.scope?".".concat(e.scope):"","{").concat(Object.entries(r).map(function(t){var i=_e(t,2),o=i[0],s=i[1];return"".concat(o,":").concat(s,";")}).join(""),"}"):""},tA=function(r,a,e){var t={},i={};return Object.entries(r).forEach(function(o){var s,l,u=_e(o,2),c=u[0],f=u[1];if(e!=null&&(s=e.preserve)!==null&&s!==void 0&&s[c])i[c]=f;else if((typeof f=="string"||typeof f=="number")&&!(e!=null&&(l=e.ignore)!==null&&l!==void 0&&l[c])){var d,h=eA(c,e==null?void 0:e.prefix);t[h]=typeof f=="number"&&!(e!=null&&(d=e.unitless)!==null&&d!==void 0&&d[c])?"".concat(f,"px"):String(f),i[c]="var(".concat(h,")")}}),[i,aL(t,a,{scope:e==null?void 0:e.scope})]},l1=Fa()?w.exports.useLayoutEffect:w.exports.useEffect,Qn=function(r,a){var e=w.exports.useRef(!0);l1(function(){return r(e.current)},a),l1(function(){return e.current=!1,function(){e.current=!0}},[])},u1=function(r,a){Qn(function(e){if(!e)return r()},a)},iL=ie({},pp),c1=iL.useInsertionEffect,oL=function(r,a,e){w.exports.useMemo(r,e),Qn(function(){return a(!0)},e)},sL=c1?function(n,r,a){return c1(function(){return n(),r()},a)}:oL,lL=ie({},pp),uL=lL.useInsertionEffect,cL=function(r){var a=[],e=!1;function t(i){e||a.push(i)}return w.exports.useEffect(function(){return e=!1,function(){e=!0,a.length&&a.forEach(function(i){return i()})}},r),t},fL=function(){return function(r){r()}},dL=typeof uL!="undefined"?cL:fL;function Gy(n,r,a,e,t){var i=w.exports.useContext(Hp),o=i.cache,s=[n].concat(st(r)),l=vm(s),u=dL([l]),c=function(_){o.opUpdate(l,function(p){var v=p||[void 0,void 0],y=_e(v,2),m=y[0],g=m===void 0?0:m,x=y[1],b=x,S=b||a(),C=[g,S];return _?_(C):C})};w.exports.useMemo(function(){c()},[l]);var f=o.opGet(l),d=f[1];return sL(function(){t==null||t(d)},function(h){return c(function(_){var p=_e(_,2),v=p[0],y=p[1];return h&&v===0&&(t==null||t(d)),[v+1,y]}),function(){o.opUpdate(l,function(_){var p=_||[],v=_e(p,2),y=v[0],m=y===void 0?0:y,g=v[1],x=m-1;return x===0?(u(function(){(h||!o.opGet(l))&&(e==null||e(g,!1))}),null):[m-1,g]})}},[l]),d}var hL={},vL="css",ml=new Map;function pL(n){ml.set(n,(ml.get(n)||0)+1)}function _L(n,r){if(typeof document!="undefined"){var a=document.querySelectorAll("style[".concat(ec,'="').concat(n,'"]'));a.forEach(function(e){if(e[Ns]===r){var t;(t=e.parentNode)===null||t===void 0||t.removeChild(e)}})}}var gL=0;function mL(n,r){ml.set(n,(ml.get(n)||0)-1);var a=Array.from(ml.keys()),e=a.filter(function(t){var i=ml.get(t)||0;return i<=0});a.length-e.length>gL&&e.forEach(function(t){_L(t,r),ml.delete(t)})}var nA=function(r,a,e,t){var i=e.getDerivativeToken(r),o=ie(ie({},i),a);return t&&(o=t(o)),o},rA="token";function yL(n,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},e=w.exports.useContext(Hp),t=e.cache.instanceId,i=e.container,o=a.salt,s=o===void 0?"":o,l=a.override,u=l===void 0?hL:l,c=a.formatToken,f=a.getComputedToken,d=a.cssVar,h=rL(function(){return Object.assign.apply(Object,[{}].concat(st(r)))},r),_=wf(h),p=wf(u),v=d?wf(d):"",y=Gy(rA,[s,n.id,_,p,v],function(){var m,g=f?f(h,u,n):nA(h,u,n,c),x=ie({},g),b="";if(d){var S=tA(g,d.key,{prefix:d.prefix,ignore:d.ignore,unitless:d.unitless,preserve:d.preserve}),C=_e(S,2);g=C[0],b=C[1]}var E=s1(g,s);g._tokenKey=E,x._tokenKey=s1(x,s);var T=(m=d==null?void 0:d.key)!==null&&m!==void 0?m:E;g._themeKey=T,pL(T);var M="".concat(vL,"-").concat(Lv(E));return g._hashId=M,[g,M,x,b,(d==null?void 0:d.key)||""]},function(m){mL(m[0]._themeKey,t)},function(m){var g=_e(m,4),x=g[0],b=g[3];if(d&&b){var S=ns(b,Lv("css-variables-".concat(x._themeKey)),{mark:Qi,prepend:"queue",attachTo:i,priority:-999});S[Ns]=t,S.setAttribute(ec,x._themeKey)}});return y}var xL=function(r,a,e){var t=_e(r,5),i=t[2],o=t[3],s=t[4],l=e||{},u=l.plain;if(!o)return null;var c=i._tokenKey,f=-999,d={"data-rc-order":"prependQueue","data-rc-priority":"".concat(f)},h=Nv(o,s,c,d,u);return[f,c,h]},SL={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},aA="comm",iA="rule",oA="decl",bL="@import",CL="@keyframes",EL="@layer",sA=Math.abs,Hy=String.fromCharCode;function lA(n){return n.trim()}function Xh(n,r,a){return n.replace(r,a)}function TL(n,r,a){return n.indexOf(r,a)}function ed(n,r){return n.charCodeAt(r)|0}function td(n,r,a){return n.slice(r,a)}function Xo(n){return n.length}function RL(n){return n.length}function lh(n,r){return r.push(n),n}var jp=1,tc=1,uA=0,Ai=0,cr=0,Ac="";function jy(n,r,a,e,t,i,o,s){return{value:n,root:r,parent:a,type:e,props:t,children:i,line:jp,column:tc,length:o,return:"",siblings:s}}function AL(){return cr}function wL(){return cr=Ai>0?ed(Ac,--Ai):0,tc--,cr===10&&(tc=1,jp--),cr}function qi(){return cr=Ai<uA?ed(Ac,Ai++):0,tc++,cr===10&&(tc=1,jp++),cr}function Nl(){return ed(Ac,Ai)}function Kh(){return Ai}function Wp(n,r){return td(Ac,n,r)}function _m(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function PL(n){return jp=tc=1,uA=Xo(Ac=n),Ai=0,[]}function ML(n){return Ac="",n}function Q_(n){return lA(Wp(Ai-1,gm(n===91?n+2:n===40?n+1:n)))}function OL(n){for(;(cr=Nl())&&cr<33;)qi();return _m(n)>2||_m(cr)>3?"":" "}function IL(n,r){for(;--r&&qi()&&!(cr<48||cr>102||cr>57&&cr<65||cr>70&&cr<97););return Wp(n,Kh()+(r<6&&Nl()==32&&qi()==32))}function gm(n){for(;qi();)switch(cr){case n:return Ai;case 34:case 39:n!==34&&n!==39&&gm(cr);break;case 40:n===41&&gm(n);break;case 92:qi();break}return Ai}function LL(n,r){for(;qi()&&n+cr!==47+10;)if(n+cr===42+42&&Nl()===47)break;return"/*"+Wp(r,Ai-1)+"*"+Hy(n===47?n:qi())}function NL(n){for(;!_m(Nl());)qi();return Wp(n,Ai)}function FL(n){return ML(Yh("",null,null,null,[""],n=PL(n),0,[0],n))}function Yh(n,r,a,e,t,i,o,s,l){for(var u=0,c=0,f=o,d=0,h=0,_=0,p=1,v=1,y=1,m=0,g="",x=t,b=i,S=e,C=g;v;)switch(_=m,m=qi()){case 40:if(_!=108&&ed(C,f-1)==58){TL(C+=Xh(Q_(m),"&","&\f"),"&\f",sA(u?s[u-1]:0))!=-1&&(y=-1);break}case 34:case 39:case 91:C+=Q_(m);break;case 9:case 10:case 13:case 32:C+=OL(_);break;case 92:C+=IL(Kh()-1,7);continue;case 47:switch(Nl()){case 42:case 47:lh(DL(LL(qi(),Kh()),r,a,l),l);break;default:C+="/"}break;case 123*p:s[u++]=Xo(C)*y;case 125*p:case 59:case 0:switch(m){case 0:case 125:v=0;case 59+c:y==-1&&(C=Xh(C,/\f/g,"")),h>0&&Xo(C)-f&&lh(h>32?d1(C+";",e,a,f-1,l):d1(Xh(C," ","")+";",e,a,f-2,l),l);break;case 59:C+=";";default:if(lh(S=f1(C,r,a,u,c,t,s,g,x=[],b=[],f,i),i),m===123)if(c===0)Yh(C,r,S,S,x,i,f,s,b);else switch(d===99&&ed(C,3)===110?100:d){case 100:case 108:case 109:case 115:Yh(n,S,S,e&&lh(f1(n,S,S,0,0,t,s,g,t,x=[],f,b),b),t,b,f,s,e?x:b);break;default:Yh(C,S,S,S,[""],b,0,s,b)}}u=c=h=0,p=y=1,g=C="",f=o;break;case 58:f=1+Xo(C),h=_;default:if(p<1){if(m==123)--p;else if(m==125&&p++==0&&wL()==125)continue}switch(C+=Hy(m),m*p){case 38:y=c>0?1:(C+="\f",-1);break;case 44:s[u++]=(Xo(C)-1)*y,y=1;break;case 64:Nl()===45&&(C+=Q_(qi())),d=Nl(),c=f=Xo(g=C+=NL(Kh())),m++;break;case 45:_===45&&Xo(C)==2&&(p=0)}}return i}function f1(n,r,a,e,t,i,o,s,l,u,c,f){for(var d=t-1,h=t===0?i:[""],_=RL(h),p=0,v=0,y=0;p<e;++p)for(var m=0,g=td(n,d+1,d=sA(v=o[p])),x=n;m<_;++m)(x=lA(v>0?h[m]+" "+g:Xh(g,/&\f/g,h[m])))&&(l[y++]=x);return jy(n,r,a,t===0?iA:s,l,u,c,f)}function DL(n,r,a,e){return jy(n,r,a,aA,Hy(AL()),td(n,2,-2),0,e)}function d1(n,r,a,e,t){return jy(n,r,a,oA,td(n,0,e),td(n,e+1,-1),e,t)}function mm(n,r){for(var a="",e=0;e<n.length;e++)a+=r(n[e],e,n,r)||"";return a}function BL(n,r,a,e){switch(n.type){case EL:if(n.children.length)break;case bL:case oA:return n.return=n.return||n.value;case aA:return"";case CL:return n.return=n.value+"{"+mm(n.children,e)+"}";case iA:if(!Xo(n.value=n.props.join(",")))return""}return Xo(a=mm(n.children,e))?n.return=n.value+"{"+a+"}":""}var h1="data-ant-cssinjs-cache-path",cA="_FILE_STYLE__",Fl,fA=!0;function kL(){if(!Fl&&(Fl={},Fa())){var n=document.createElement("div");n.className=h1,n.style.position="fixed",n.style.visibility="hidden",n.style.top="-9999px",document.body.appendChild(n);var r=getComputedStyle(n).content||"";r=r.replace(/^"/,"").replace(/"$/,""),r.split(";").forEach(function(t){var i=t.split(":"),o=_e(i,2),s=o[0],l=o[1];Fl[s]=l});var a=document.querySelector("style[".concat(h1,"]"));if(a){var e;fA=!1,(e=a.parentNode)===null||e===void 0||e.removeChild(a)}document.body.removeChild(n)}}function VL(n){return kL(),!!Fl[n]}function UL(n){var r=Fl[n],a=null;if(r&&Fa())if(fA)a=cA;else{var e=document.querySelector("style[".concat(Qi,'="').concat(Fl[n],'"]'));e?a=e.innerHTML:delete Fl[n]}return[a,r]}var zL="_skip_check_",dA="_multi_value_";function Qh(n){var r=mm(FL(n),BL);return r.replace(/\{%%%\:[^;];}/g,";")}function GL(n){return Qt(n)==="object"&&n&&(zL in n||dA in n)}function HL(n,r,a){if(!r)return n;var e=".".concat(r),t=a==="low"?":where(".concat(e,")"):e,i=n.split(",").map(function(o){var s,l=o.trim().split(/\s+/),u=l[0]||"",c=((s=u.match(/^\w+/))===null||s===void 0?void 0:s[0])||"";return u="".concat(c).concat(t).concat(u.slice(c.length)),[u].concat(st(l.slice(1))).join(" ")});return i.join(",")}var jL=function n(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},t=e.root,i=e.injectHash,o=e.parentSelectors,s=a.hashId,l=a.layer;a.path;var u=a.hashPriority,c=a.transformers,f=c===void 0?[]:c;a.linters;var d="",h={};function _(y){var m=y.getName(s);if(!h[m]){var g=n(y.style,a,{root:!1,parentSelectors:o}),x=_e(g,1),b=x[0];h[m]="@keyframes ".concat(y.getName(s)).concat(b)}}function p(y){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return y.forEach(function(g){Array.isArray(g)?p(g,m):g&&m.push(g)}),m}var v=p(Array.isArray(r)?r:[r]);return v.forEach(function(y){var m=typeof y=="string"&&!t?{}:y;if(typeof m=="string")d+="".concat(m,`
`);else if(m._keyframe)_(m);else{var g=f.reduce(function(x,b){var S;return(b==null||(S=b.visit)===null||S===void 0?void 0:S.call(b,x))||x},m);Object.keys(g).forEach(function(x){var b=g[x];if(Qt(b)==="object"&&b&&(x!=="animationName"||!b._keyframe)&&!GL(b)){var S=!1,C=x.trim(),E=!1;(t||i)&&s?C.startsWith("@")?S=!0:C=HL(x,s,u):t&&!s&&(C==="&"||C==="")&&(C="",E=!0);var T=n(b,a,{root:E,injectHash:S,parentSelectors:[].concat(st(o),[C])}),M=_e(T,2),L=M[0],F=M[1];h=ie(ie({},h),F),d+="".concat(C).concat(L)}else{let P=function(R,A){var D=R.replace(/[A-Z]/g,function(k){return"-".concat(k.toLowerCase())}),B=A;!SL[R]&&typeof B=="number"&&B!==0&&(B="".concat(B,"px")),R==="animationName"&&A!==null&&A!==void 0&&A._keyframe&&(_(A),B=A.getName(s)),d+="".concat(D,":").concat(B,";")};var O=P,N,I=(N=b==null?void 0:b.value)!==null&&N!==void 0?N:b;Qt(b)==="object"&&b!==null&&b!==void 0&&b[dA]&&Array.isArray(I)?I.forEach(function(R){P(x,R)}):P(x,I)}})}}),t?l&&(d="@layer ".concat(l.name," {").concat(d,"}"),l.dependencies&&(h["@layer ".concat(l.name)]=l.dependencies.map(function(y){return"@layer ".concat(y,", ").concat(l.name,";")}).join(`
`))):d="{".concat(d,"}"),[d,h]};function hA(n,r){return Lv("".concat(n.join("%")).concat(r))}function WL(){return null}var vA="style";function ym(n,r){var a=n.token,e=n.path,t=n.hashId,i=n.layer,o=n.nonce,s=n.clientOnly,l=n.order,u=l===void 0?0:l,c=w.exports.useContext(Hp),f=c.autoClear;c.mock;var d=c.defaultCache,h=c.hashPriority,_=c.container,p=c.ssrInline,v=c.transformers,y=c.linters,m=c.cache,g=c.layer,x=a._tokenKey,b=[x];g&&b.push("layer"),b.push.apply(b,st(e));var S=pm,C=Gy(vA,b,function(){var F=b.join("|");if(VL(F)){var N=UL(F),I=_e(N,2),O=I[0],P=I[1];if(O)return[O,x,P,{},s,u]}var R=r(),A=jL(R,{hashId:t,hashPriority:h,layer:g?i:void 0,path:e.join("-"),transformers:v,linters:y}),D=_e(A,2),B=D[0],k=D[1],V=Qh(B),U=hA(b,V);return[V,x,U,k,s,u]},function(F,N){var I=_e(F,3),O=I[2];(N||f)&&pm&&qf(O,{mark:Qi})},function(F){var N=_e(F,4),I=N[0];N[1];var O=N[2],P=N[3];if(S&&I!==cA){var R={mark:Qi,prepend:g?!1:"queue",attachTo:_,priority:u},A=typeof o=="function"?o():o;A&&(R.csp={nonce:A});var D=[],B=[];Object.keys(P).forEach(function(V){V.startsWith("@layer")?D.push(V):B.push(V)}),D.forEach(function(V){ns(Qh(P[V]),"_layer-".concat(V),ie(ie({},R),{},{prepend:!0}))});var k=ns(I,O,R);k[Ns]=m.instanceId,k.setAttribute(ec,x),B.forEach(function(V){ns(Qh(P[V]),"_effect-".concat(V),R)})}}),E=_e(C,3),T=E[0],M=E[1],L=E[2];return function(F){var N;if(!p||S||!d)N=w.exports.createElement(WL,null);else{var I;N=w.exports.createElement("style",St({},(I={},Z(I,ec,M),Z(I,Qi,L),I),{dangerouslySetInnerHTML:{__html:T}}))}return w.exports.createElement(w.exports.Fragment,null,N,F)}}var $L=function(r,a,e){var t=_e(r,6),i=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=e||{},d=f.plain;if(u)return null;var h=i,_={"data-rc-order":"prependQueue","data-rc-priority":"".concat(c)};return h=Nv(i,o,s,_,d),l&&Object.keys(l).forEach(function(p){if(!a[p]){a[p]=!0;var v=Qh(l[p]),y=Nv(v,o,"_effect-".concat(p),_,d);p.startsWith("@layer")?h=y+h:h+=y}}),[c,s,h]},pA="cssVar",XL=function(r,a){var e=r.key,t=r.prefix,i=r.unitless,o=r.ignore,s=r.token,l=r.scope,u=l===void 0?"":l,c=w.exports.useContext(Hp),f=c.cache.instanceId,d=c.container,h=s._tokenKey,_=[].concat(st(r.path),[e,u,h]),p=Gy(pA,_,function(){var v=a(),y=tA(v,e,{prefix:t,unitless:i,ignore:o,scope:u}),m=_e(y,2),g=m[0],x=m[1],b=hA(_,x);return[g,x,b,e]},function(v){var y=_e(v,3),m=y[2];pm&&qf(m,{mark:Qi})},function(v){var y=_e(v,3),m=y[1],g=y[2];if(!!m){var x=ns(m,g,{mark:Qi,prepend:"queue",attachTo:d,priority:-999});x[Ns]=f,x.setAttribute(ec,e)}});return p},KL=function(r,a,e){var t=_e(r,4),i=t[1],o=t[2],s=t[3],l=e||{},u=l.plain;if(!i)return null;var c=-999,f={"data-rc-order":"prependQueue","data-rc-priority":"".concat(c)},d=Nv(i,s,o,f,u);return[c,o,d]},Kc;Kc={},Z(Kc,vA,$L),Z(Kc,rA,xL),Z(Kc,pA,KL);var Sn=function(){function n(r,a){_a(this,n),Z(this,"name",void 0),Z(this,"style",void 0),Z(this,"_keyframe",!0),this.name=r,this.style=a}return ga(n,[{key:"getName",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return a?"".concat(a,"-").concat(this.name):this.name}}]),n}();function au(n){return n.notSplit=!0,n}au(["borderTop","borderBottom"]),au(["borderTop"]),au(["borderBottom"]),au(["borderLeft","borderRight"]),au(["borderLeft"]),au(["borderRight"]);var YL=w.exports.createContext({}),Wy=YL;function _A(n){return KR(n)||jR(n)||ky(n)||YR()}function mo(n,r){for(var a=n,e=0;e<r.length;e+=1){if(a==null)return;a=a[r[e]]}return a}function gA(n,r,a,e){if(!r.length)return a;var t=_A(r),i=t[0],o=t.slice(1),s;return!n&&typeof i=="number"?s=[]:Array.isArray(n)?s=st(n):s=ie({},n),e&&a===void 0&&o.length===1?delete s[i][o[0]]:s[i]=gA(s[i],o,a,e),s}function $i(n,r,a){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return r.length&&e&&a===void 0&&!mo(n,r.slice(0,-1))?n:gA(n,r,a,e)}function QL(n){return Qt(n)==="object"&&n!==null&&Object.getPrototypeOf(n)===Object.prototype}function v1(n){return Array.isArray(n)?[]:{}}var qL=typeof Reflect=="undefined"?Object.keys:Reflect.ownKeys;function Ru(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var e=v1(r[0]);return r.forEach(function(t){function i(o,s){var l=new Set(s),u=mo(t,o),c=Array.isArray(u);if(c||QL(u)){if(!l.has(u)){l.add(u);var f=mo(e,o);c?e=$i(e,o,[]):(!f||Qt(f)!=="object")&&(e=$i(e,o,v1(u))),qL(u).forEach(function(d){i([].concat(st(o),[d]),l)})}}else e=$i(e,o,u)}i([])}),e}function JL(){}const ZL=w.exports.createContext({}),mA=()=>{const n=()=>{};return n.deprecated=JL,n};var eN=w.exports.createContext(void 0),tN={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},nN={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};const rN={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};var yA=rN;const aN={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},nN),timePickerLocale:Object.assign({},yA)};var p1=aN;const za="${label} is not a valid ${type}",iN={locale:"en",Pagination:tN,DatePicker:p1,TimePicker:yA,Calendar:p1,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:za,method:za,array:za,object:za,number:za,date:za,boolean:za,integer:za,float:za,regexp:za,email:za,url:za,hex:za},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty"}};var nc=iN;Object.assign({},nc.Modal);let qh=[];const _1=()=>qh.reduce((n,r)=>Object.assign(Object.assign({},n),r),nc.Modal);function oN(n){if(n){const r=Object.assign({},n);return qh.push(r),_1(),()=>{qh=qh.filter(a=>a!==r),_1()}}Object.assign({},nc.Modal)}const sN=w.exports.createContext(void 0);var $y=sN;const lN=(n,r)=>{const a=w.exports.useContext($y),e=w.exports.useMemo(()=>{var i;const o=r||nc[n],s=(i=a==null?void 0:a[n])!==null&&i!==void 0?i:{};return Object.assign(Object.assign({},typeof o=="function"?o():o),s||{})},[n,r,a]),t=w.exports.useMemo(()=>{const i=a==null?void 0:a.locale;return(a==null?void 0:a.exist)&&!i?nc.locale:i},[a]);return[e,t]};var uN=lN;const cN="internalMark",fN=n=>{const{locale:r={},children:a,_ANT_MARK__:e}=n;w.exports.useEffect(()=>oN(r&&r.Modal),[r]);const t=w.exports.useMemo(()=>Object.assign(Object.assign({},r),{exist:!0}),[r]);return w.exports.createElement($y.Provider,{value:t},a)};var dN=fN;function Dr(n,r){hN(n)&&(n="100%");var a=vN(n);return n=r===360?n:Math.min(r,Math.max(0,parseFloat(n))),a&&(n=parseInt(String(n*r),10)/100),Math.abs(n-r)<1e-6?1:(r===360?n=(n<0?n%r+r:n%r)/parseFloat(String(r)):n=n%r/parseFloat(String(r)),n)}function uh(n){return Math.min(1,Math.max(0,n))}function hN(n){return typeof n=="string"&&n.indexOf(".")!==-1&&parseFloat(n)===1}function vN(n){return typeof n=="string"&&n.indexOf("%")!==-1}function xA(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function ch(n){return n<=1?"".concat(Number(n)*100,"%"):n}function Tl(n){return n.length===1?"0"+n:String(n)}function pN(n,r,a){return{r:Dr(n,255)*255,g:Dr(r,255)*255,b:Dr(a,255)*255}}function g1(n,r,a){n=Dr(n,255),r=Dr(r,255),a=Dr(a,255);var e=Math.max(n,r,a),t=Math.min(n,r,a),i=0,o=0,s=(e+t)/2;if(e===t)o=0,i=0;else{var l=e-t;switch(o=s>.5?l/(2-e-t):l/(e+t),e){case n:i=(r-a)/l+(r<a?6:0);break;case r:i=(a-n)/l+2;break;case a:i=(n-r)/l+4;break}i/=6}return{h:i,s:o,l:s}}function q_(n,r,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?n+(r-n)*(6*a):a<1/2?r:a<2/3?n+(r-n)*(2/3-a)*6:n}function _N(n,r,a){var e,t,i;if(n=Dr(n,360),r=Dr(r,100),a=Dr(a,100),r===0)t=a,i=a,e=a;else{var o=a<.5?a*(1+r):a+r-a*r,s=2*a-o;e=q_(s,o,n+1/3),t=q_(s,o,n),i=q_(s,o,n-1/3)}return{r:e*255,g:t*255,b:i*255}}function xm(n,r,a){n=Dr(n,255),r=Dr(r,255),a=Dr(a,255);var e=Math.max(n,r,a),t=Math.min(n,r,a),i=0,o=e,s=e-t,l=e===0?0:s/e;if(e===t)i=0;else{switch(e){case n:i=(r-a)/s+(r<a?6:0);break;case r:i=(a-n)/s+2;break;case a:i=(n-r)/s+4;break}i/=6}return{h:i,s:l,v:o}}function gN(n,r,a){n=Dr(n,360)*6,r=Dr(r,100),a=Dr(a,100);var e=Math.floor(n),t=n-e,i=a*(1-r),o=a*(1-t*r),s=a*(1-(1-t)*r),l=e%6,u=[a,o,i,i,s,a][l],c=[s,a,a,o,i,i][l],f=[i,i,s,a,a,o][l];return{r:u*255,g:c*255,b:f*255}}function Sm(n,r,a,e){var t=[Tl(Math.round(n).toString(16)),Tl(Math.round(r).toString(16)),Tl(Math.round(a).toString(16))];return e&&t[0].startsWith(t[0].charAt(1))&&t[1].startsWith(t[1].charAt(1))&&t[2].startsWith(t[2].charAt(1))?t[0].charAt(0)+t[1].charAt(0)+t[2].charAt(0):t.join("")}function mN(n,r,a,e,t){var i=[Tl(Math.round(n).toString(16)),Tl(Math.round(r).toString(16)),Tl(Math.round(a).toString(16)),Tl(yN(e))];return t&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))&&i[3].startsWith(i[3].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}function yN(n){return Math.round(parseFloat(n)*255).toString(16)}function m1(n){return Ha(n)/255}function Ha(n){return parseInt(n,16)}function xN(n){return{r:n>>16,g:(n&65280)>>8,b:n&255}}var bm={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function _u(n){var r={r:0,g:0,b:0},a=1,e=null,t=null,i=null,o=!1,s=!1;return typeof n=="string"&&(n=CN(n)),typeof n=="object"&&(ko(n.r)&&ko(n.g)&&ko(n.b)?(r=pN(n.r,n.g,n.b),o=!0,s=String(n.r).substr(-1)==="%"?"prgb":"rgb"):ko(n.h)&&ko(n.s)&&ko(n.v)?(e=ch(n.s),t=ch(n.v),r=gN(n.h,e,t),o=!0,s="hsv"):ko(n.h)&&ko(n.s)&&ko(n.l)&&(e=ch(n.s),i=ch(n.l),r=_N(n.h,e,i),o=!0,s="hsl"),Object.prototype.hasOwnProperty.call(n,"a")&&(a=n.a)),a=xA(a),{ok:o,format:n.format||s,r:Math.min(255,Math.max(r.r,0)),g:Math.min(255,Math.max(r.g,0)),b:Math.min(255,Math.max(r.b,0)),a}}var SN="[-\\+]?\\d+%?",bN="[-\\+]?\\d*\\.\\d+%?",Fs="(?:".concat(bN,")|(?:").concat(SN,")"),J_="[\\s|\\(]+(".concat(Fs,")[,|\\s]+(").concat(Fs,")[,|\\s]+(").concat(Fs,")\\s*\\)?"),Z_="[\\s|\\(]+(".concat(Fs,")[,|\\s]+(").concat(Fs,")[,|\\s]+(").concat(Fs,")[,|\\s]+(").concat(Fs,")\\s*\\)?"),Gi={CSS_UNIT:new RegExp(Fs),rgb:new RegExp("rgb"+J_),rgba:new RegExp("rgba"+Z_),hsl:new RegExp("hsl"+J_),hsla:new RegExp("hsla"+Z_),hsv:new RegExp("hsv"+J_),hsva:new RegExp("hsva"+Z_),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function CN(n){if(n=n.trim().toLowerCase(),n.length===0)return!1;var r=!1;if(bm[n])n=bm[n],r=!0;else if(n==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var a=Gi.rgb.exec(n);return a?{r:a[1],g:a[2],b:a[3]}:(a=Gi.rgba.exec(n),a?{r:a[1],g:a[2],b:a[3],a:a[4]}:(a=Gi.hsl.exec(n),a?{h:a[1],s:a[2],l:a[3]}:(a=Gi.hsla.exec(n),a?{h:a[1],s:a[2],l:a[3],a:a[4]}:(a=Gi.hsv.exec(n),a?{h:a[1],s:a[2],v:a[3]}:(a=Gi.hsva.exec(n),a?{h:a[1],s:a[2],v:a[3],a:a[4]}:(a=Gi.hex8.exec(n),a?{r:Ha(a[1]),g:Ha(a[2]),b:Ha(a[3]),a:m1(a[4]),format:r?"name":"hex8"}:(a=Gi.hex6.exec(n),a?{r:Ha(a[1]),g:Ha(a[2]),b:Ha(a[3]),format:r?"name":"hex"}:(a=Gi.hex4.exec(n),a?{r:Ha(a[1]+a[1]),g:Ha(a[2]+a[2]),b:Ha(a[3]+a[3]),a:m1(a[4]+a[4]),format:r?"name":"hex8"}:(a=Gi.hex3.exec(n),a?{r:Ha(a[1]+a[1]),g:Ha(a[2]+a[2]),b:Ha(a[3]+a[3]),format:r?"name":"hex"}:!1)))))))))}function ko(n){return Boolean(Gi.CSS_UNIT.exec(String(n)))}var ir=function(){function n(r,a){r===void 0&&(r=""),a===void 0&&(a={});var e;if(r instanceof n)return r;typeof r=="number"&&(r=xN(r)),this.originalInput=r;var t=_u(r);this.originalInput=r,this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this.roundA=Math.round(100*this.a)/100,this.format=(e=a.format)!==null&&e!==void 0?e:t.format,this.gradientType=a.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=t.ok}return n.prototype.isDark=function(){return this.getBrightness()<128},n.prototype.isLight=function(){return!this.isDark()},n.prototype.getBrightness=function(){var r=this.toRgb();return(r.r*299+r.g*587+r.b*114)/1e3},n.prototype.getLuminance=function(){var r=this.toRgb(),a,e,t,i=r.r/255,o=r.g/255,s=r.b/255;return i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),o<=.03928?e=o/12.92:e=Math.pow((o+.055)/1.055,2.4),s<=.03928?t=s/12.92:t=Math.pow((s+.055)/1.055,2.4),.2126*a+.7152*e+.0722*t},n.prototype.getAlpha=function(){return this.a},n.prototype.setAlpha=function(r){return this.a=xA(r),this.roundA=Math.round(100*this.a)/100,this},n.prototype.isMonochrome=function(){var r=this.toHsl().s;return r===0},n.prototype.toHsv=function(){var r=xm(this.r,this.g,this.b);return{h:r.h*360,s:r.s,v:r.v,a:this.a}},n.prototype.toHsvString=function(){var r=xm(this.r,this.g,this.b),a=Math.round(r.h*360),e=Math.round(r.s*100),t=Math.round(r.v*100);return this.a===1?"hsv(".concat(a,", ").concat(e,"%, ").concat(t,"%)"):"hsva(".concat(a,", ").concat(e,"%, ").concat(t,"%, ").concat(this.roundA,")")},n.prototype.toHsl=function(){var r=g1(this.r,this.g,this.b);return{h:r.h*360,s:r.s,l:r.l,a:this.a}},n.prototype.toHslString=function(){var r=g1(this.r,this.g,this.b),a=Math.round(r.h*360),e=Math.round(r.s*100),t=Math.round(r.l*100);return this.a===1?"hsl(".concat(a,", ").concat(e,"%, ").concat(t,"%)"):"hsla(".concat(a,", ").concat(e,"%, ").concat(t,"%, ").concat(this.roundA,")")},n.prototype.toHex=function(r){return r===void 0&&(r=!1),Sm(this.r,this.g,this.b,r)},n.prototype.toHexString=function(r){return r===void 0&&(r=!1),"#"+this.toHex(r)},n.prototype.toHex8=function(r){return r===void 0&&(r=!1),mN(this.r,this.g,this.b,this.a,r)},n.prototype.toHex8String=function(r){return r===void 0&&(r=!1),"#"+this.toHex8(r)},n.prototype.toHexShortString=function(r){return r===void 0&&(r=!1),this.a===1?this.toHexString(r):this.toHex8String(r)},n.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},n.prototype.toRgbString=function(){var r=Math.round(this.r),a=Math.round(this.g),e=Math.round(this.b);return this.a===1?"rgb(".concat(r,", ").concat(a,", ").concat(e,")"):"rgba(".concat(r,", ").concat(a,", ").concat(e,", ").concat(this.roundA,")")},n.prototype.toPercentageRgb=function(){var r=function(a){return"".concat(Math.round(Dr(a,255)*100),"%")};return{r:r(this.r),g:r(this.g),b:r(this.b),a:this.a}},n.prototype.toPercentageRgbString=function(){var r=function(a){return Math.round(Dr(a,255)*100)};return this.a===1?"rgb(".concat(r(this.r),"%, ").concat(r(this.g),"%, ").concat(r(this.b),"%)"):"rgba(".concat(r(this.r),"%, ").concat(r(this.g),"%, ").concat(r(this.b),"%, ").concat(this.roundA,")")},n.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var r="#"+Sm(this.r,this.g,this.b,!1),a=0,e=Object.entries(bm);a<e.length;a++){var t=e[a],i=t[0],o=t[1];if(r===o)return i}return!1},n.prototype.toString=function(r){var a=Boolean(r);r=r!=null?r:this.format;var e=!1,t=this.a<1&&this.a>=0,i=!a&&t&&(r.startsWith("hex")||r==="name");return i?r==="name"&&this.a===0?this.toName():this.toRgbString():(r==="rgb"&&(e=this.toRgbString()),r==="prgb"&&(e=this.toPercentageRgbString()),(r==="hex"||r==="hex6")&&(e=this.toHexString()),r==="hex3"&&(e=this.toHexString(!0)),r==="hex4"&&(e=this.toHex8String(!0)),r==="hex8"&&(e=this.toHex8String()),r==="name"&&(e=this.toName()),r==="hsl"&&(e=this.toHslString()),r==="hsv"&&(e=this.toHsvString()),e||this.toHexString())},n.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},n.prototype.clone=function(){return new n(this.toString())},n.prototype.lighten=function(r){r===void 0&&(r=10);var a=this.toHsl();return a.l+=r/100,a.l=uh(a.l),new n(a)},n.prototype.brighten=function(r){r===void 0&&(r=10);var a=this.toRgb();return a.r=Math.max(0,Math.min(255,a.r-Math.round(255*-(r/100)))),a.g=Math.max(0,Math.min(255,a.g-Math.round(255*-(r/100)))),a.b=Math.max(0,Math.min(255,a.b-Math.round(255*-(r/100)))),new n(a)},n.prototype.darken=function(r){r===void 0&&(r=10);var a=this.toHsl();return a.l-=r/100,a.l=uh(a.l),new n(a)},n.prototype.tint=function(r){return r===void 0&&(r=10),this.mix("white",r)},n.prototype.shade=function(r){return r===void 0&&(r=10),this.mix("black",r)},n.prototype.desaturate=function(r){r===void 0&&(r=10);var a=this.toHsl();return a.s-=r/100,a.s=uh(a.s),new n(a)},n.prototype.saturate=function(r){r===void 0&&(r=10);var a=this.toHsl();return a.s+=r/100,a.s=uh(a.s),new n(a)},n.prototype.greyscale=function(){return this.desaturate(100)},n.prototype.spin=function(r){var a=this.toHsl(),e=(a.h+r)%360;return a.h=e<0?360+e:e,new n(a)},n.prototype.mix=function(r,a){a===void 0&&(a=50);var e=this.toRgb(),t=new n(r).toRgb(),i=a/100,o={r:(t.r-e.r)*i+e.r,g:(t.g-e.g)*i+e.g,b:(t.b-e.b)*i+e.b,a:(t.a-e.a)*i+e.a};return new n(o)},n.prototype.analogous=function(r,a){r===void 0&&(r=6),a===void 0&&(a=30);var e=this.toHsl(),t=360/a,i=[this];for(e.h=(e.h-(t*r>>1)+720)%360;--r;)e.h=(e.h+t)%360,i.push(new n(e));return i},n.prototype.complement=function(){var r=this.toHsl();return r.h=(r.h+180)%360,new n(r)},n.prototype.monochromatic=function(r){r===void 0&&(r=6);for(var a=this.toHsv(),e=a.h,t=a.s,i=a.v,o=[],s=1/r;r--;)o.push(new n({h:e,s:t,v:i})),i=(i+s)%1;return o},n.prototype.splitcomplement=function(){var r=this.toHsl(),a=r.h;return[this,new n({h:(a+72)%360,s:r.s,l:r.l}),new n({h:(a+216)%360,s:r.s,l:r.l})]},n.prototype.onBackground=function(r){var a=this.toRgb(),e=new n(r).toRgb(),t=a.a+e.a*(1-a.a);return new n({r:(a.r*a.a+e.r*e.a*(1-a.a))/t,g:(a.g*a.a+e.g*e.a*(1-a.a))/t,b:(a.b*a.a+e.b*e.a*(1-a.a))/t,a:t})},n.prototype.triad=function(){return this.polyad(3)},n.prototype.tetrad=function(){return this.polyad(4)},n.prototype.polyad=function(r){for(var a=this.toHsl(),e=a.h,t=[this],i=360/r,o=1;o<r;o++)t.push(new n({h:(e+o*i)%360,s:a.s,l:a.l}));return t},n.prototype.equals=function(r){return this.toRgbString()===new n(r).toRgbString()},n}(),fh=2,y1=.16,EN=.05,TN=.05,RN=.15,SA=5,bA=4,AN=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function x1(n){var r=n.r,a=n.g,e=n.b,t=xm(r,a,e);return{h:t.h*360,s:t.s,v:t.v}}function dh(n){var r=n.r,a=n.g,e=n.b;return"#".concat(Sm(r,a,e,!1))}function wN(n,r,a){var e=a/100,t={r:(r.r-n.r)*e+n.r,g:(r.g-n.g)*e+n.g,b:(r.b-n.b)*e+n.b};return t}function S1(n,r,a){var e;return Math.round(n.h)>=60&&Math.round(n.h)<=240?e=a?Math.round(n.h)-fh*r:Math.round(n.h)+fh*r:e=a?Math.round(n.h)+fh*r:Math.round(n.h)-fh*r,e<0?e+=360:e>=360&&(e-=360),e}function b1(n,r,a){if(n.h===0&&n.s===0)return n.s;var e;return a?e=n.s-y1*r:r===bA?e=n.s+y1:e=n.s+EN*r,e>1&&(e=1),a&&r===SA&&e>.1&&(e=.1),e<.06&&(e=.06),Number(e.toFixed(2))}function C1(n,r,a){var e;return a?e=n.v+TN*r:e=n.v-RN*r,e>1&&(e=1),Number(e.toFixed(2))}function ls(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=[],e=_u(n),t=SA;t>0;t-=1){var i=x1(e),o=dh(_u({h:S1(i,t,!0),s:b1(i,t,!0),v:C1(i,t,!0)}));a.push(o)}a.push(dh(e));for(var s=1;s<=bA;s+=1){var l=x1(e),u=dh(_u({h:S1(l,s),s:b1(l,s),v:C1(l,s)}));a.push(u)}return r.theme==="dark"?AN.map(function(c){var f=c.index,d=c.opacity,h=dh(wN(_u(r.backgroundColor||"#141414"),_u(a[f]),d*100));return h}):a}var eg={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Jh={},tg={};Object.keys(eg).forEach(function(n){Jh[n]=ls(eg[n]),Jh[n].primary=Jh[n][5],tg[n]=ls(eg[n],{theme:"dark",backgroundColor:"#141414"}),tg[n].primary=tg[n][5]});var PN=Jh.blue;const Xy={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},rc=Object.assign(Object.assign({},Xy),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0});function CA(n,r){let{generateColorPalettes:a,generateNeutralColorPalettes:e}=r;const{colorSuccess:t,colorWarning:i,colorError:o,colorInfo:s,colorPrimary:l,colorBgBase:u,colorTextBase:c}=n,f=a(l),d=a(t),h=a(i),_=a(o),p=a(s),v=e(u,c),y=n.colorLink||n.colorInfo,m=a(y);return Object.assign(Object.assign({},v),{colorPrimaryBg:f[1],colorPrimaryBgHover:f[2],colorPrimaryBorder:f[3],colorPrimaryBorderHover:f[4],colorPrimaryHover:f[5],colorPrimary:f[6],colorPrimaryActive:f[7],colorPrimaryTextHover:f[8],colorPrimaryText:f[9],colorPrimaryTextActive:f[10],colorSuccessBg:d[1],colorSuccessBgHover:d[2],colorSuccessBorder:d[3],colorSuccessBorderHover:d[4],colorSuccessHover:d[4],colorSuccess:d[6],colorSuccessActive:d[7],colorSuccessTextHover:d[8],colorSuccessText:d[9],colorSuccessTextActive:d[10],colorErrorBg:_[1],colorErrorBgHover:_[2],colorErrorBorder:_[3],colorErrorBorderHover:_[4],colorErrorHover:_[5],colorError:_[6],colorErrorActive:_[7],colorErrorTextHover:_[8],colorErrorText:_[9],colorErrorTextActive:_[10],colorWarningBg:h[1],colorWarningBgHover:h[2],colorWarningBorder:h[3],colorWarningBorderHover:h[4],colorWarningHover:h[4],colorWarning:h[6],colorWarningActive:h[7],colorWarningTextHover:h[8],colorWarningText:h[9],colorWarningTextActive:h[10],colorInfoBg:p[1],colorInfoBgHover:p[2],colorInfoBorder:p[3],colorInfoBorderHover:p[4],colorInfoHover:p[4],colorInfo:p[6],colorInfoActive:p[7],colorInfoTextHover:p[8],colorInfoText:p[9],colorInfoTextActive:p[10],colorLinkHover:m[4],colorLink:m[6],colorLinkActive:m[7],colorBgMask:new ir("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const MN=n=>{let r=n,a=n,e=n,t=n;return n<6&&n>=5?r=n+1:n<16&&n>=6?r=n+2:n>=16&&(r=16),n<7&&n>=5?a=4:n<8&&n>=7?a=5:n<14&&n>=8?a=6:n<16&&n>=14?a=7:n>=16&&(a=8),n<6&&n>=2?e=1:n>=6&&(e=2),n>4&&n<8?t=4:n>=8&&(t=6),{borderRadius:n,borderRadiusXS:e,borderRadiusSM:a,borderRadiusLG:r,borderRadiusOuter:t}};var ON=MN;function IN(n){const{motionUnit:r,motionBase:a,borderRadius:e,lineWidth:t}=n;return Object.assign({motionDurationFast:`${(a+r).toFixed(1)}s`,motionDurationMid:`${(a+r*2).toFixed(1)}s`,motionDurationSlow:`${(a+r*3).toFixed(1)}s`,lineWidthBold:t+1},ON(e))}const LN=n=>{const{controlHeight:r}=n;return{controlHeightSM:r*.75,controlHeightXS:r*.5,controlHeightLG:r*1.25}};var EA=LN;function NN(n){return(n+8)/n}function FN(n){const r=new Array(10).fill(null).map((a,e)=>{const t=e-1,i=n*Math.pow(2.71828,t/5),o=e>1?Math.floor(i):Math.ceil(i);return Math.floor(o/2)*2});return r[1]=n,r.map(a=>({size:a,lineHeight:NN(a)}))}const DN=n=>{const r=FN(n),a=r.map(c=>c.size),e=r.map(c=>c.lineHeight),t=a[1],i=a[0],o=a[2],s=e[1],l=e[0],u=e[2];return{fontSizeSM:i,fontSize:t,fontSizeLG:o,fontSizeXL:a[3],fontSizeHeading1:a[6],fontSizeHeading2:a[5],fontSizeHeading3:a[4],fontSizeHeading4:a[3],fontSizeHeading5:a[2],lineHeight:s,lineHeightLG:u,lineHeightSM:l,fontHeight:Math.round(s*t),fontHeightLG:Math.round(u*o),fontHeightSM:Math.round(l*i),lineHeightHeading1:e[6],lineHeightHeading2:e[5],lineHeightHeading3:e[4],lineHeightHeading4:e[3],lineHeightHeading5:e[2]}};var TA=DN;function BN(n){const{sizeUnit:r,sizeStep:a}=n;return{sizeXXL:r*(a+8),sizeXL:r*(a+4),sizeLG:r*(a+2),sizeMD:r*(a+1),sizeMS:r*a,size:r*a,sizeSM:r*(a-1),sizeXS:r*(a-2),sizeXXS:r*(a-3)}}const Vo=(n,r)=>new ir(n).setAlpha(r).toRgbString(),Yc=(n,r)=>new ir(n).darken(r).toHexString(),kN=n=>{const r=ls(n);return{1:r[0],2:r[1],3:r[2],4:r[3],5:r[4],6:r[5],7:r[6],8:r[4],9:r[5],10:r[6]}},VN=(n,r)=>{const a=n||"#fff",e=r||"#000";return{colorBgBase:a,colorTextBase:e,colorText:Vo(e,.88),colorTextSecondary:Vo(e,.65),colorTextTertiary:Vo(e,.45),colorTextQuaternary:Vo(e,.25),colorFill:Vo(e,.15),colorFillSecondary:Vo(e,.06),colorFillTertiary:Vo(e,.04),colorFillQuaternary:Vo(e,.02),colorBgLayout:Yc(a,4),colorBgContainer:Yc(a,0),colorBgElevated:Yc(a,0),colorBgSpotlight:Vo(e,.85),colorBgBlur:"transparent",colorBorder:Yc(a,15),colorBorderSecondary:Yc(a,6)}};function Ad(n){const r=Object.keys(Xy).map(a=>{const e=ls(n[a]);return new Array(10).fill(1).reduce((t,i,o)=>(t[`${a}-${o+1}`]=e[o],t[`${a}${o+1}`]=e[o],t),{})}).reduce((a,e)=>(a=Object.assign(Object.assign({},a),e),a),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n),r),CA(n,{generateColorPalettes:kN,generateNeutralColorPalettes:VN})),TA(n.fontSize)),BN(n)),EA(n)),IN(n))}const RA=Zf(Ad),nd={token:rc,override:{override:rc},hashed:!0},AA=Wt.createContext(nd),wA="anticon",UN=(n,r)=>r||(n?`ant-${n}`:"ant"),Jr=w.exports.createContext({getPrefixCls:UN,iconPrefixCls:wA}),zN=`-ant-${Date.now()}-${Math.random()}`;function GN(n,r){const a={},e=(o,s)=>{let l=o.clone();return l=(s==null?void 0:s(l))||l,l.toRgbString()},t=(o,s)=>{const l=new ir(o),u=ls(l.toRgbString());a[`${s}-color`]=e(l),a[`${s}-color-disabled`]=u[1],a[`${s}-color-hover`]=u[4],a[`${s}-color-active`]=u[6],a[`${s}-color-outline`]=l.clone().setAlpha(.2).toRgbString(),a[`${s}-color-deprecated-bg`]=u[0],a[`${s}-color-deprecated-border`]=u[2]};if(r.primaryColor){t(r.primaryColor,"primary");const o=new ir(r.primaryColor),s=ls(o.toRgbString());s.forEach((u,c)=>{a[`primary-${c+1}`]=u}),a["primary-color-deprecated-l-35"]=e(o,u=>u.lighten(35)),a["primary-color-deprecated-l-20"]=e(o,u=>u.lighten(20)),a["primary-color-deprecated-t-20"]=e(o,u=>u.tint(20)),a["primary-color-deprecated-t-50"]=e(o,u=>u.tint(50)),a["primary-color-deprecated-f-12"]=e(o,u=>u.setAlpha(u.getAlpha()*.12));const l=new ir(s[0]);a["primary-color-active-deprecated-f-30"]=e(l,u=>u.setAlpha(u.getAlpha()*.3)),a["primary-color-active-deprecated-d-02"]=e(l,u=>u.darken(2))}return r.successColor&&t(r.successColor,"success"),r.warningColor&&t(r.warningColor,"warning"),r.errorColor&&t(r.errorColor,"error"),r.infoColor&&t(r.infoColor,"info"),`
  :root {
    ${Object.keys(a).map(o=>`--${n}-${o}: ${a[o]};`).join(`
`)}
  }
  `.trim()}function HN(n,r){const a=GN(n,r);Fa()&&ns(a,`${zN}-dynamic-theme`)}const Cm=w.exports.createContext(!1),jN=n=>{let{children:r,disabled:a}=n;const e=w.exports.useContext(Cm);return w.exports.createElement(Cm.Provider,{value:a!=null?a:e},r)};var PA=Cm;const Em=w.exports.createContext(void 0),WN=n=>{let{children:r,size:a}=n;const e=w.exports.useContext(Em);return w.exports.createElement(Em.Provider,{value:a||e},r)};var $p=Em;function $N(){const n=w.exports.useContext(PA),r=w.exports.useContext($p);return{componentDisabled:n,componentSize:r}}const Fv=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"];var XN="5.16.1";function ng(n){return n>=0&&n<=255}function hh(n,r){const{r:a,g:e,b:t,a:i}=new ir(n).toRgb();if(i<1)return n;const{r:o,g:s,b:l}=new ir(r).toRgb();for(let u=.01;u<=1;u+=.01){const c=Math.round((a-o*(1-u))/u),f=Math.round((e-s*(1-u))/u),d=Math.round((t-l*(1-u))/u);if(ng(c)&&ng(f)&&ng(d))return new ir({r:c,g:f,b:d,a:Math.round(u*100)/100}).toRgbString()}return new ir({r:a,g:e,b:t,a:1}).toRgbString()}var KN=globalThis&&globalThis.__rest||function(n,r){var a={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&r.indexOf(e)<0&&(a[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,e=Object.getOwnPropertySymbols(n);t<e.length;t++)r.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(n,e[t])&&(a[e[t]]=n[e[t]]);return a};function Ky(n){const{override:r}=n,a=KN(n,["override"]),e=Object.assign({},r);Object.keys(rc).forEach(d=>{delete e[d]});const t=Object.assign(Object.assign({},a),e),i=480,o=576,s=768,l=992,u=1200,c=1600;if(t.motion===!1){const d="0s";t.motionDurationFast=d,t.motionDurationMid=d,t.motionDurationSlow=d}return Object.assign(Object.assign(Object.assign({},t),{colorFillContent:t.colorFillSecondary,colorFillContentHover:t.colorFill,colorFillAlter:t.colorFillQuaternary,colorBgContainerDisabled:t.colorFillTertiary,colorBorderBg:t.colorBgContainer,colorSplit:hh(t.colorBorderSecondary,t.colorBgContainer),colorTextPlaceholder:t.colorTextQuaternary,colorTextDisabled:t.colorTextQuaternary,colorTextHeading:t.colorText,colorTextLabel:t.colorTextSecondary,colorTextDescription:t.colorTextTertiary,colorTextLightSolid:t.colorWhite,colorHighlight:t.colorError,colorBgTextHover:t.colorFillSecondary,colorBgTextActive:t.colorFill,colorIcon:t.colorTextTertiary,colorIconHover:t.colorText,colorErrorOutline:hh(t.colorErrorBg,t.colorBgContainer),colorWarningOutline:hh(t.colorWarningBg,t.colorBgContainer),fontSizeIcon:t.fontSizeSM,lineWidthFocus:t.lineWidth*4,lineWidth:t.lineWidth,controlOutlineWidth:t.lineWidth*2,controlInteractiveSize:t.controlHeight/2,controlItemBgHover:t.colorFillTertiary,controlItemBgActive:t.colorPrimaryBg,controlItemBgActiveHover:t.colorPrimaryBgHover,controlItemBgActiveDisabled:t.colorFill,controlTmpOutline:t.colorFillQuaternary,controlOutline:hh(t.colorPrimaryBg,t.colorBgContainer),lineType:t.lineType,borderRadius:t.borderRadius,borderRadiusXS:t.borderRadiusXS,borderRadiusSM:t.borderRadiusSM,borderRadiusLG:t.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:t.sizeXXS,paddingXS:t.sizeXS,paddingSM:t.sizeSM,padding:t.size,paddingMD:t.sizeMD,paddingLG:t.sizeLG,paddingXL:t.sizeXL,paddingContentHorizontalLG:t.sizeLG,paddingContentVerticalLG:t.sizeMS,paddingContentHorizontal:t.sizeMS,paddingContentVertical:t.sizeSM,paddingContentHorizontalSM:t.size,paddingContentVerticalSM:t.sizeXS,marginXXS:t.sizeXXS,marginXS:t.sizeXS,marginSM:t.sizeSM,margin:t.size,marginMD:t.sizeMD,marginLG:t.sizeLG,marginXL:t.sizeXL,marginXXL:t.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:i,screenXSMin:i,screenXSMax:o-1,screenSM:o,screenSMMin:o,screenSMMax:s-1,screenMD:s,screenMDMin:s,screenMDMax:l-1,screenLG:l,screenLGMin:l,screenLGMax:u-1,screenXL:u,screenXLMin:u,screenXLMax:c-1,screenXXL:c,screenXXLMin:c,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new ir("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new ir("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new ir("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),e)}var E1=globalThis&&globalThis.__rest||function(n,r){var a={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&r.indexOf(e)<0&&(a[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,e=Object.getOwnPropertySymbols(n);t<e.length;t++)r.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(n,e[t])&&(a[e[t]]=n[e[t]]);return a};const MA={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0},OA={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},YN={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},IA=(n,r,a)=>{const e=a.getDerivativeToken(n),{override:t}=r,i=E1(r,["override"]);let o=Object.assign(Object.assign({},e),{override:t});return o=Ky(o),i&&Object.entries(i).forEach(s=>{let[l,u]=s;const{theme:c}=u,f=E1(u,["theme"]);let d=f;c&&(d=IA(Object.assign(Object.assign({},o),f),{override:f},c)),o[l]=d}),o};function wi(){const{token:n,hashed:r,theme:a,override:e,cssVar:t}=Wt.useContext(AA),i=`${XN}-${r||""}`,o=a||RA,[s,l,u]=yL(o,[rc,n],{salt:i,override:e,getComputedToken:IA,formatToken:Ky,cssVar:t&&{prefix:t.prefix,key:t.key,unitless:MA,ignore:OA,preserve:YN}});return[o,u,r?l:"",s,t]}function Xa(n){var r=w.exports.useRef();r.current=n;var a=w.exports.useCallback(function(){for(var e,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=r.current)===null||e===void 0?void 0:e.call.apply(e,[r].concat(i))},[]);return a}function zu(n){var r=w.exports.useRef(!1),a=w.exports.useState(n),e=_e(a,2),t=e[0],i=e[1];w.exports.useEffect(function(){return r.current=!1,function(){r.current=!0}},[]);function o(s,l){l&&r.current||i(s)}return[t,o]}function rg(n){return n!==void 0}function rs(n,r){var a=r||{},e=a.defaultValue,t=a.value,i=a.onChange,o=a.postState,s=zu(function(){return rg(t)?t:rg(e)?typeof e=="function"?e():e:typeof n=="function"?n():n}),l=_e(s,2),u=l[0],c=l[1],f=t!==void 0?t:u,d=o?o(f):f,h=Xa(i),_=zu([f]),p=_e(_,2),v=p[0],y=p[1];u1(function(){var g=v[0];u!==g&&h(u,g)},[v]),u1(function(){rg(t)||c(t)},[t]);var m=Xa(function(g,x){c(g,x),y([f],x)});return[d,m]}const Dv={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},wd=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:n.colorText,fontSize:n.fontSize,lineHeight:n.lineHeight,listStyle:"none",fontFamily:r?"inherit":n.fontFamily}},Xp=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),T1=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),QN=n=>({a:{color:n.colorLink,textDecoration:n.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${n.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:n.colorLinkHover},"&:active":{color:n.colorLinkActive},[`&:active,
  &:hover`]:{textDecoration:n.linkHoverDecoration,outline:0},"&:focus":{textDecoration:n.linkFocusDecoration,outline:0},"&[disabled]":{color:n.colorTextDisabled,cursor:"not-allowed"}}}),qN=(n,r,a)=>{const{fontFamily:e,fontSize:t}=n,i=`[class^="${r}"], [class*=" ${r}"]`;return{[a?`.${a}`:i]:{fontFamily:e,fontSize:t,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[i]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}},JN=n=>({outline:`${wt(n.lineWidthFocus)} solid ${n.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"});function LA(n,r,a){return r=Zu(r),HR(n,By()?Reflect.construct(r,a||[],Zu(n).constructor):r.apply(n,a))}let ZN=ga(function n(){_a(this,n)});var NA=ZN;let eF=function(n){function r(a){var e;return _a(this,r),e=LA(this,r),e.result=0,a instanceof r?e.result=a.result:typeof a=="number"&&(e.result=a),e}return Yl(r,n),ga(r,[{key:"add",value:function(e){return e instanceof r?this.result+=e.result:typeof e=="number"&&(this.result+=e),this}},{key:"sub",value:function(e){return e instanceof r?this.result-=e.result:typeof e=="number"&&(this.result-=e),this}},{key:"mul",value:function(e){return e instanceof r?this.result*=e.result:typeof e=="number"&&(this.result*=e),this}},{key:"div",value:function(e){return e instanceof r?this.result/=e.result:typeof e=="number"&&(this.result/=e),this}},{key:"equal",value:function(){return this.result}}])}(NA);const FA="CALC_UNIT";function ag(n){return typeof n=="number"?`${n}${FA}`:n}let tF=function(n){function r(a){var e;return _a(this,r),e=LA(this,r),e.result="",a instanceof r?e.result=`(${a.result})`:typeof a=="number"?e.result=ag(a):typeof a=="string"&&(e.result=a),e}return Yl(r,n),ga(r,[{key:"add",value:function(e){return e instanceof r?this.result=`${this.result} + ${e.getResult()}`:(typeof e=="number"||typeof e=="string")&&(this.result=`${this.result} + ${ag(e)}`),this.lowPriority=!0,this}},{key:"sub",value:function(e){return e instanceof r?this.result=`${this.result} - ${e.getResult()}`:(typeof e=="number"||typeof e=="string")&&(this.result=`${this.result} - ${ag(e)}`),this.lowPriority=!0,this}},{key:"mul",value:function(e){return this.lowPriority&&(this.result=`(${this.result})`),e instanceof r?this.result=`${this.result} * ${e.getResult(!0)}`:(typeof e=="number"||typeof e=="string")&&(this.result=`${this.result} * ${e}`),this.lowPriority=!1,this}},{key:"div",value:function(e){return this.lowPriority&&(this.result=`(${this.result})`),e instanceof r?this.result=`${this.result} / ${e.getResult(!0)}`:(typeof e=="number"||typeof e=="string")&&(this.result=`${this.result} / ${e}`),this.lowPriority=!1,this}},{key:"getResult",value:function(e){return this.lowPriority||e?`(${this.result})`:this.result}},{key:"equal",value:function(e){const{unit:t=!0}=e||{},i=new RegExp(`${FA}`,"g");return this.result=this.result.replace(i,t?"px":""),typeof this.lowPriority!="undefined"?`calc(${this.result})`:this.result}}])}(NA);const nF=n=>{const r=n==="css"?tF:eF;return a=>new r(a)};var rF=nF;function aF(n){return n==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var r=arguments.length,a=new Array(r),e=0;e<r;e++)a[e]=arguments[e];return`max(${a.map(t=>wt(t)).join(",")})`},min:function(){for(var r=arguments.length,a=new Array(r),e=0;e<r;e++)a[e]=arguments[e];return`min(${a.map(t=>wt(t)).join(",")})`}}}const DA=typeof CSSINJS_STATISTIC!="undefined";let Tm=!0;function Pi(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];if(!DA)return Object.assign.apply(Object,[{}].concat(r));Tm=!1;const e={};return r.forEach(t=>{Object.keys(t).forEach(o=>{Object.defineProperty(e,o,{configurable:!0,enumerable:!0,get:()=>t[o]})})}),Tm=!0,e}const R1={};function iF(){}const oF=n=>{let r,a=n,e=iF;return DA&&typeof Proxy!="undefined"&&(r=new Set,a=new Proxy(n,{get(t,i){return Tm&&r.add(i),t[i]}}),e=(t,i)=>{var o;R1[t]={global:Array.from(r),component:Object.assign(Object.assign({},(o=R1[t])===null||o===void 0?void 0:o.component),i)}}),{token:a,keys:r,flush:e}},sF=(n,r)=>{const[a,e]=wi();return ym({theme:a,token:e,hashId:"",path:["ant-design-icons",n],nonce:()=>r==null?void 0:r.nonce},()=>[{[`.${n}`]:Object.assign(Object.assign({},Xp()),{[`.${n} .${n}-icon`]:{display:"block"}})}])};var BA=sF;const kA=(n,r,a)=>{var e;return typeof a=="function"?a(Pi(r,(e=r[n])!==null&&e!==void 0?e:{})):a!=null?a:{}},VA=(n,r,a,e)=>{const t=Object.assign({},r[n]);if(e!=null&&e.deprecatedTokens){const{deprecatedTokens:o}=e;o.forEach(s=>{let[l,u]=s;var c;((t==null?void 0:t[l])||(t==null?void 0:t[u]))&&((c=t[u])!==null&&c!==void 0||(t[u]=t==null?void 0:t[l]))})}const i=Object.assign(Object.assign({},a),t);return Object.keys(i).forEach(o=>{i[o]===r[o]&&delete i[o]}),i},lF=(n,r)=>`${[r,n.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-")}`;function uF(n,r,a){let e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const t=Array.isArray(n)?n:[n,n],[i]=t,o=t.join("-");return function(s){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s;const[u,c,f,d,h]=wi(),{getPrefixCls:_,iconPrefixCls:p,csp:v}=w.exports.useContext(Jr),y=_(),m=h?"css":"js",g=rF(m),{max:x,min:b}=aF(m),S={theme:u,token:d,hashId:f,nonce:()=>v==null?void 0:v.nonce,clientOnly:e.clientOnly,order:e.order||-999};return ym(Object.assign(Object.assign({},S),{clientOnly:!1,path:["Shared",y]}),()=>[{"&":QN(d)}]),BA(p,v),[ym(Object.assign(Object.assign({},S),{path:[o,s,p]}),()=>{if(e.injectStyle===!1)return[];const{token:E,flush:T}=oF(d),M=kA(i,c,a),L=`.${s}`,F=VA(i,c,M,{deprecatedTokens:e.deprecatedTokens});h&&Object.keys(M).forEach(O=>{M[O]=`var(${eA(O,lF(i,h.prefix))})`});const N=Pi(E,{componentCls:L,prefixCls:s,iconCls:`.${p}`,antCls:`.${y}`,calc:g,max:x,min:b},h?M:F),I=r(N,{hashId:f,prefixCls:s,rootPrefixCls:y,iconPrefixCls:p});return T(i,F),[e.resetStyle===!1?null:qN(N,s,l),I]}),f]}}const cF=(n,r,a)=>{function e(u){return`${n}${u.slice(0,1).toUpperCase()}${u.slice(1)}`}const{unitless:t={},injectStyle:i=!0}=a!=null?a:{},o={[e("zIndexPopup")]:!0};Object.keys(t).forEach(u=>{o[e(u)]=t[u]});const s=u=>{let{rootCls:c,cssVar:f}=u;const[,d]=wi();return XL({path:[n],prefix:f.prefix,key:f==null?void 0:f.key,unitless:Object.assign(Object.assign({},MA),o),ignore:OA,token:d,scope:c},()=>{const h=kA(n,d,r),_=VA(n,d,h,{deprecatedTokens:a==null?void 0:a.deprecatedTokens});return Object.keys(h).forEach(p=>{_[e(p)]=_[p],delete _[p]}),_}),null};return u=>{const[,,,,c]=wi();return[f=>i&&c?Wt.createElement(Wt.Fragment,null,Wt.createElement(s,{rootCls:u,cssVar:c,component:n}),f):f,c==null?void 0:c.key]}},Pd=(n,r,a,e)=>{const t=uF(n,r,a,e),i=cF(Array.isArray(n)?n[0]:n,a,e);return function(o){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o;const[,l]=t(o,s),[u,c]=i(s);return[u,l,c]}};function fF(n,r){return Fv.reduce((a,e)=>{const t=n[`${e}1`],i=n[`${e}3`],o=n[`${e}6`],s=n[`${e}7`];return Object.assign(Object.assign({},a),r(e,{lightColor:t,lightBorderColor:i,darkColor:o,textColor:s}))},{})}const dF=Object.assign({},pp),{useId:A1}=dF,hF=()=>"",vF=typeof A1=="undefined"?hF:A1;var pF=vF;function _F(n,r,a){var e;mA();const t=n||{},i=t.inherit===!1||!r?Object.assign(Object.assign({},nd),{hashed:(e=r==null?void 0:r.hashed)!==null&&e!==void 0?e:nd.hashed,cssVar:r==null?void 0:r.cssVar}):r,o=pF();return Ed(()=>{var s,l;if(!n)return r;const u=Object.assign({},i.components);Object.keys(n.components||{}).forEach(d=>{u[d]=Object.assign(Object.assign({},u[d]),n.components[d])});const c=`css-var-${o.replace(/:/g,"")}`,f=((s=t.cssVar)!==null&&s!==void 0?s:i.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:a==null?void 0:a.prefixCls},typeof i.cssVar=="object"?i.cssVar:{}),typeof t.cssVar=="object"?t.cssVar:{}),{key:typeof t.cssVar=="object"&&((l=t.cssVar)===null||l===void 0?void 0:l.key)||c});return Object.assign(Object.assign(Object.assign({},i),t),{token:Object.assign(Object.assign({},i.token),t.token),components:u,cssVar:f})},[t,i],(s,l)=>s.some((u,c)=>{const f=l[c];return!Jf(u,f,!0)}))}var gF=["children"],UA=w.exports.createContext({});function mF(n){var r=n.children,a=Zt(n,gF);return w.exports.createElement(UA.Provider,{value:a},r)}var yF=function(n){Yl(a,n);var r=Rd(a);function a(){return _a(this,a),r.apply(this,arguments)}return ga(a,[{key:"render",value:function(){return this.props.children}}]),a}(w.exports.Component),vl="none",vh="appear",ph="enter",_h="leave",w1="none",Xi="prepare",Au="start",wu="active",Yy="end",zA="prepared";function P1(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit".concat(n)]="webkit".concat(r),a["Moz".concat(n)]="moz".concat(r),a["ms".concat(n)]="MS".concat(r),a["O".concat(n)]="o".concat(r.toLowerCase()),a}function xF(n,r){var a={animationend:P1("Animation","AnimationEnd"),transitionend:P1("Transition","TransitionEnd")};return n&&("AnimationEvent"in r||delete a.animationend.animation,"TransitionEvent"in r||delete a.transitionend.transition),a}var SF=xF(Fa(),typeof window!="undefined"?window:{}),GA={};if(Fa()){var bF=document.createElement("div");GA=bF.style}var gh={};function HA(n){if(gh[n])return gh[n];var r=SF[n];if(r)for(var a=Object.keys(r),e=a.length,t=0;t<e;t+=1){var i=a[t];if(Object.prototype.hasOwnProperty.call(r,i)&&i in GA)return gh[n]=r[i],gh[n]}return""}var jA=HA("animationend"),WA=HA("transitionend"),$A=!!(jA&&WA),M1=jA||"animationend",O1=WA||"transitionend";function I1(n,r){if(!n)return null;if(Qt(n)==="object"){var a=r.replace(/-\w/g,function(e){return e[1].toUpperCase()});return n[a]}return"".concat(n,"-").concat(r)}var CF=function(n){var r=w.exports.useRef(),a=w.exports.useRef(n);a.current=n;var e=w.exports.useCallback(function(o){a.current(o)},[]);function t(o){o&&(o.removeEventListener(O1,e),o.removeEventListener(M1,e))}function i(o){r.current&&r.current!==o&&t(r.current),o&&o!==r.current&&(o.addEventListener(O1,e),o.addEventListener(M1,e),r.current=o)}return w.exports.useEffect(function(){return function(){t(r.current)}},[]),[i,t]},XA=Fa()?w.exports.useLayoutEffect:w.exports.useEffect,EF=function(){var n=w.exports.useRef(null);function r(){gr.cancel(n.current)}function a(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;r();var i=gr(function(){t<=1?e({isCanceled:function(){return i!==n.current}}):a(e,t-1)});n.current=i}return w.exports.useEffect(function(){return function(){r()}},[]),[a,r]},TF=[Xi,Au,wu,Yy],RF=[Xi,zA],KA=!1,AF=!0;function YA(n){return n===wu||n===Yy}var wF=function(n,r,a){var e=zu(w1),t=_e(e,2),i=t[0],o=t[1],s=EF(),l=_e(s,2),u=l[0],c=l[1];function f(){o(Xi,!0)}var d=r?RF:TF;return XA(function(){if(i!==w1&&i!==Yy){var h=d.indexOf(i),_=d[h+1],p=a(i);p===KA?o(_,!0):_&&u(function(v){function y(){v.isCanceled()||o(_,!0)}p===!0?y():Promise.resolve(p).then(y)})}},[n,i]),w.exports.useEffect(function(){return function(){c()}},[]),[f,i]};function PF(n,r,a,e){var t=e.motionEnter,i=t===void 0?!0:t,o=e.motionAppear,s=o===void 0?!0:o,l=e.motionLeave,u=l===void 0?!0:l,c=e.motionDeadline,f=e.motionLeaveImmediately,d=e.onAppearPrepare,h=e.onEnterPrepare,_=e.onLeavePrepare,p=e.onAppearStart,v=e.onEnterStart,y=e.onLeaveStart,m=e.onAppearActive,g=e.onEnterActive,x=e.onLeaveActive,b=e.onAppearEnd,S=e.onEnterEnd,C=e.onLeaveEnd,E=e.onVisibleChanged,T=zu(),M=_e(T,2),L=M[0],F=M[1],N=zu(vl),I=_e(N,2),O=I[0],P=I[1],R=zu(null),A=_e(R,2),D=A[0],B=A[1],k=w.exports.useRef(!1),V=w.exports.useRef(null);function U(){return a()}var j=w.exports.useRef(!1);function G(){P(vl,!0),B(null,!0)}function $(pe){var J=U();if(!(pe&&!pe.deadline&&pe.target!==J)){var ae=j.current,ne;O===vh&&ae?ne=b==null?void 0:b(J,pe):O===ph&&ae?ne=S==null?void 0:S(J,pe):O===_h&&ae&&(ne=C==null?void 0:C(J,pe)),O!==vl&&ae&&ne!==!1&&G()}}var W=CF($),K=_e(W,1),q=K[0],Y=function(J){var ae,ne,ge;switch(J){case vh:return ae={},Z(ae,Xi,d),Z(ae,Au,p),Z(ae,wu,m),ae;case ph:return ne={},Z(ne,Xi,h),Z(ne,Au,v),Z(ne,wu,g),ne;case _h:return ge={},Z(ge,Xi,_),Z(ge,Au,y),Z(ge,wu,x),ge;default:return{}}},Q=w.exports.useMemo(function(){return Y(O)},[O]),re=wF(O,!n,function(pe){if(pe===Xi){var J=Q[Xi];return J?J(U()):KA}if(ee in Q){var ae;B(((ae=Q[ee])===null||ae===void 0?void 0:ae.call(Q,U(),null))||null)}return ee===wu&&(q(U()),c>0&&(clearTimeout(V.current),V.current=setTimeout(function(){$({deadline:!0})},c))),ee===zA&&G(),AF}),ue=_e(re,2),oe=ue[0],ee=ue[1],xe=YA(ee);j.current=xe,XA(function(){F(r);var pe=k.current;k.current=!0;var J;!pe&&r&&s&&(J=vh),pe&&r&&i&&(J=ph),(pe&&!r&&u||!pe&&f&&!r&&u)&&(J=_h);var ae=Y(J);J&&(n||ae[Xi])?(P(J),oe()):P(vl)},[r]),w.exports.useEffect(function(){(O===vh&&!s||O===ph&&!i||O===_h&&!u)&&P(vl)},[s,i,u]),w.exports.useEffect(function(){return function(){k.current=!1,clearTimeout(V.current)}},[]);var Te=w.exports.useRef(!1);w.exports.useEffect(function(){L&&(Te.current=!0),L!==void 0&&O===vl&&((Te.current||L)&&(E==null||E(L)),Te.current=!0)},[L,O]);var Ce=D;return Q[Xi]&&ee===Au&&(Ce=ie({transition:"none"},Ce)),[O,ee,Ce,L!=null?L:r]}function MF(n){var r=n;Qt(n)==="object"&&(r=n.transitionSupport);function a(t,i){return!!(t.motionName&&r&&i!==!1)}var e=w.exports.forwardRef(function(t,i){var o=t.visible,s=o===void 0?!0:o,l=t.removeOnLeave,u=l===void 0?!0:l,c=t.forceRender,f=t.children,d=t.motionName,h=t.leavedClassName,_=t.eventProps,p=w.exports.useContext(UA),v=p.motion,y=a(t,v),m=w.exports.useRef(),g=w.exports.useRef();function x(){try{return m.current instanceof HTMLElement?m.current:Af(g.current)}catch{return null}}var b=PF(y,s,x,t),S=_e(b,4),C=S[0],E=S[1],T=S[2],M=S[3],L=w.exports.useRef(M);M&&(L.current=!0);var F=w.exports.useCallback(function(B){m.current=B,Fy(i,B)},[i]),N,I=ie(ie({},_),{},{visible:s});if(!f)N=null;else if(C===vl)M?N=f(ie({},I),F):!u&&L.current&&h?N=f(ie(ie({},I),{},{className:h}),F):c||!u&&!h?N=f(ie(ie({},I),{},{style:{display:"none"}}),F):N=null;else{var O,P;E===Xi?P="prepare":YA(E)?P="active":E===Au&&(P="start");var R=I1(d,"".concat(C,"-").concat(P));N=f(ie(ie({},I),{},{className:mt(I1(d,C),(O={},Z(O,R,R&&P),Z(O,d,typeof d=="string"),O)),style:T}),F)}if(w.exports.isValidElement(N)&&Up(N)){var A=N,D=A.ref;D||(N=w.exports.cloneElement(N,{ref:F}))}return w.exports.createElement(yF,{ref:g},N)});return e.displayName="CSSMotion",e}var Kp=MF($A),Rm="add",Am="keep",wm="remove",ig="removed";function OF(n){var r;return n&&Qt(n)==="object"&&"key"in n?r=n:r={key:n},ie(ie({},r),{},{key:String(r.key)})}function Pm(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return n.map(OF)}function IF(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=[],e=0,t=r.length,i=Pm(n),o=Pm(r);i.forEach(function(u){for(var c=!1,f=e;f<t;f+=1){var d=o[f];if(d.key===u.key){e<f&&(a=a.concat(o.slice(e,f).map(function(h){return ie(ie({},h),{},{status:Rm})})),e=f),a.push(ie(ie({},d),{},{status:Am})),e+=1,c=!0;break}}c||a.push(ie(ie({},u),{},{status:wm}))}),e<t&&(a=a.concat(o.slice(e).map(function(u){return ie(ie({},u),{},{status:Rm})})));var s={};a.forEach(function(u){var c=u.key;s[c]=(s[c]||0)+1});var l=Object.keys(s).filter(function(u){return s[u]>1});return l.forEach(function(u){a=a.filter(function(c){var f=c.key,d=c.status;return f!==u||d!==wm}),a.forEach(function(c){c.key===u&&(c.status=Am)})}),a}var LF=["component","children","onVisibleChanged","onAllRemoved"],NF=["status"],FF=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function DF(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Kp,a=function(e){Yl(i,e);var t=Rd(i);function i(){var o;_a(this,i);for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return o=t.call.apply(t,[this].concat(l)),Z(nn(o),"state",{keyEntities:[]}),Z(nn(o),"removeKey",function(c){var f=o.state.keyEntities,d=f.map(function(h){return h.key!==c?h:ie(ie({},h),{},{status:ig})});return o.setState({keyEntities:d}),d.filter(function(h){var _=h.status;return _!==ig}).length}),o}return ga(i,[{key:"render",value:function(){var s=this,l=this.state.keyEntities,u=this.props,c=u.component,f=u.children,d=u.onVisibleChanged,h=u.onAllRemoved,_=Zt(u,LF),p=c||w.exports.Fragment,v={};return FF.forEach(function(y){v[y]=_[y],delete _[y]}),delete _.keys,w.exports.createElement(p,_,l.map(function(y,m){var g=y.status,x=Zt(y,NF),b=g===Rm||g===Am;return w.exports.createElement(r,St({},v,{key:x.key,visible:b,eventProps:x,onVisibleChanged:function(C){if(d==null||d(C,{key:x.key}),!C){var E=s.removeKey(x.key);E===0&&h&&h()}}}),function(S,C){return f(ie(ie({},S),{},{index:m}),C)})}))}}],[{key:"getDerivedStateFromProps",value:function(s,l){var u=s.keys,c=l.keyEntities,f=Pm(u),d=IF(c,f);return{keyEntities:d.filter(function(h){var _=c.find(function(p){var v=p.key;return h.key===v});return!(_&&_.status===ig&&h.status===wm)})}}}]),i}(w.exports.Component);return Z(a,"defaultProps",{component:"div"}),a}DF($A);function BF(n){const{children:r}=n,[,a]=wi(),{motion:e}=a,t=w.exports.useRef(!1);return t.current=t.current||e===!1,t.current?w.exports.createElement(mF,{motion:e},r):r}var kF=()=>null,VF=globalThis&&globalThis.__rest||function(n,r){var a={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&r.indexOf(e)<0&&(a[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,e=Object.getOwnPropertySymbols(n);t<e.length;t++)r.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(n,e[t])&&(a[e[t]]=n[e[t]]);return a};const UF=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"],zF="ant";let QA;function GF(){return QA||zF}function HF(n){return Object.keys(n).some(r=>r.endsWith("Color"))}const jF=n=>{const{prefixCls:r,iconPrefixCls:a,theme:e,holderRender:t}=n;r!==void 0&&(QA=r),e&&HF(e)&&HN(GF(),e)},WF=n=>{const{children:r,csp:a,autoInsertSpaceInButton:e,alert:t,anchor:i,form:o,locale:s,componentSize:l,direction:u,space:c,virtual:f,dropdownMatchSelectWidth:d,popupMatchSelectWidth:h,popupOverflow:_,legacyLocale:p,parentContext:v,iconPrefixCls:y,theme:m,componentDisabled:g,segmented:x,statistic:b,spin:S,calendar:C,carousel:E,cascader:T,collapse:M,typography:L,checkbox:F,descriptions:N,divider:I,drawer:O,skeleton:P,steps:R,image:A,layout:D,list:B,mentions:k,modal:V,progress:U,result:j,slider:G,breadcrumb:$,menu:W,pagination:K,input:q,textArea:Y,empty:Q,badge:re,radio:ue,rate:oe,switch:ee,transfer:xe,avatar:Te,message:Ce,tag:pe,table:J,card:ae,tabs:ne,timeline:ge,timePicker:se,upload:Re,notification:de,tree:Pe,colorPicker:De,datePicker:Ke,rangePicker:Be,flex:He,wave:We,dropdown:yt,warning:bt,tour:Mt,floatButtonGroup:ce}=n,le=w.exports.useCallback((Ne,ct)=>{const{prefixCls:Bt}=n;if(ct)return ct;const Oe=Bt||v.getPrefixCls("");return Ne?`${Oe}-${Ne}`:Oe},[v.getPrefixCls,n.prefixCls]),he=y||v.iconPrefixCls||wA,Se=a||v.csp;BA(he,Se);const me=_F(m,v.theme,{prefixCls:le("")}),Le={csp:Se,autoInsertSpaceInButton:e,alert:t,anchor:i,locale:s||p,direction:u,space:c,virtual:f,popupMatchSelectWidth:h!=null?h:d,popupOverflow:_,getPrefixCls:le,iconPrefixCls:he,theme:me,segmented:x,statistic:b,spin:S,calendar:C,carousel:E,cascader:T,collapse:M,typography:L,checkbox:F,descriptions:N,divider:I,drawer:O,skeleton:P,steps:R,image:A,input:q,textArea:Y,layout:D,list:B,mentions:k,modal:V,progress:U,result:j,slider:G,breadcrumb:$,menu:W,pagination:K,empty:Q,badge:re,radio:ue,rate:oe,switch:ee,transfer:xe,avatar:Te,message:Ce,tag:pe,table:J,card:ae,tabs:ne,timeline:ge,timePicker:se,upload:Re,notification:de,tree:Pe,colorPicker:De,datePicker:Ke,rangePicker:Be,flex:He,wave:We,dropdown:yt,warning:bt,tour:Mt,floatButtonGroup:ce},Qe=Object.assign({},v);Object.keys(Le).forEach(Ne=>{Le[Ne]!==void 0&&(Qe[Ne]=Le[Ne])}),UF.forEach(Ne=>{const ct=n[Ne];ct&&(Qe[Ne]=ct)});const at=Ed(()=>Qe,Qe,(Ne,ct)=>{const Bt=Object.keys(Ne),Oe=Object.keys(ct);return Bt.length!==Oe.length||Bt.some(Ye=>Ne[Ye]!==ct[Ye])}),lt=w.exports.useMemo(()=>({prefixCls:he,csp:Se}),[he,Se]);let ze=w.exports.createElement(w.exports.Fragment,null,w.exports.createElement(kF,{dropdownMatchSelectWidth:d}),r);const Rt=w.exports.useMemo(()=>{var Ne,ct,Bt,Oe;return Ru(((Ne=nc.Form)===null||Ne===void 0?void 0:Ne.defaultValidateMessages)||{},((Bt=(ct=at.locale)===null||ct===void 0?void 0:ct.Form)===null||Bt===void 0?void 0:Bt.defaultValidateMessages)||{},((Oe=at.form)===null||Oe===void 0?void 0:Oe.validateMessages)||{},(o==null?void 0:o.validateMessages)||{})},[at,o==null?void 0:o.validateMessages]);Object.keys(Rt).length>0&&(ze=w.exports.createElement(eN.Provider,{value:Rt},ze)),s&&(ze=w.exports.createElement(dN,{locale:s,_ANT_MARK__:cN},ze)),(he||Se)&&(ze=w.exports.createElement(Wy.Provider,{value:lt},ze)),l&&(ze=w.exports.createElement(WN,{size:l},ze)),ze=w.exports.createElement(BF,null,ze);const et=w.exports.useMemo(()=>{const Ne=me||{},{algorithm:ct,token:Bt,components:Oe,cssVar:Ye}=Ne,Fe=VF(Ne,["algorithm","token","components","cssVar"]),Ve=ct&&(!Array.isArray(ct)||ct.length>0)?Zf(ct):RA,Ee={};Object.entries(Oe||{}).forEach(gn=>{let[dn,On]=gn;const At=Object.assign({},On);"algorithm"in At&&(At.algorithm===!0?At.theme=Ve:(Array.isArray(At.algorithm)||typeof At.algorithm=="function")&&(At.theme=Zf(At.algorithm)),delete At.algorithm),Ee[dn]=At});const tt=Object.assign(Object.assign({},rc),Bt);return Object.assign(Object.assign({},Fe),{theme:Ve,token:tt,components:Ee,override:Object.assign({override:tt},Ee),cssVar:Ye})},[me]);return m&&(ze=w.exports.createElement(AA.Provider,{value:et},ze)),at.warning&&(ze=w.exports.createElement(ZL.Provider,{value:at.warning},ze)),g!==void 0&&(ze=w.exports.createElement(jN,{disabled:g},ze)),w.exports.createElement(Jr.Provider,{value:at},ze)},wc=n=>{const r=w.exports.useContext(Jr),a=w.exports.useContext($y);return w.exports.createElement(WF,Object.assign({parentContext:r,legacyLocale:a},n))};wc.ConfigContext=Jr;wc.SizeContext=$p;wc.config=jF;wc.useConfig=$N;Object.defineProperty(wc,"SizeContext",{get:()=>$p});function qA(n){var r;return n==null||(r=n.getRootNode)===null||r===void 0?void 0:r.call(n)}function $F(n){return qA(n)instanceof ShadowRoot}function Bv(n){return $F(n)?qA(n):null}function XF(n){return n.replace(/-(.)/g,function(r,a){return a.toUpperCase()})}function KF(n,r){Yr(n,"[@ant-design/icons] ".concat(r))}function L1(n){return Qt(n)==="object"&&typeof n.name=="string"&&typeof n.theme=="string"&&(Qt(n.icon)==="object"||typeof n.icon=="function")}function N1(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(n).reduce(function(r,a){var e=n[a];switch(a){case"class":r.className=e,delete r.class;break;default:delete r[a],r[XF(a)]=e}return r},{})}function Mm(n,r,a){return a?Wt.createElement(n.tag,ie(ie({key:r},N1(n.attrs)),a),(n.children||[]).map(function(e,t){return Mm(e,"".concat(r,"-").concat(n.tag,"-").concat(t))})):Wt.createElement(n.tag,ie({key:r},N1(n.attrs)),(n.children||[]).map(function(e,t){return Mm(e,"".concat(r,"-").concat(n.tag,"-").concat(t))}))}function JA(n){return ls(n)[0]}function ZA(n){return n?Array.isArray(n)?n:[n]:[]}var YF=`
.anticon {
  display: inline-flex;
  alignItems: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,QF=function(r){var a=w.exports.useContext(Wy),e=a.csp,t=a.prefixCls,i=YF;t&&(i=i.replace(/anticon/g,t)),w.exports.useEffect(function(){var o=r.current,s=Bv(o);ns(i,"@ant-design-icons",{prepend:!0,csp:e,attachTo:s})},[])},qF=["icon","className","onClick","style","primaryColor","secondaryColor"],Pf={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function JF(n){var r=n.primaryColor,a=n.secondaryColor;Pf.primaryColor=r,Pf.secondaryColor=a||JA(r),Pf.calculated=!!a}function ZF(){return ie({},Pf)}var Yp=function(r){var a=r.icon,e=r.className,t=r.onClick,i=r.style,o=r.primaryColor,s=r.secondaryColor,l=Zt(r,qF),u=w.exports.useRef(),c=Pf;if(o&&(c={primaryColor:o,secondaryColor:s||JA(o)}),QF(u),KF(L1(a),"icon should be icon definiton, but got ".concat(a)),!L1(a))return null;var f=a;return f&&typeof f.icon=="function"&&(f=ie(ie({},f),{},{icon:f.icon(c.primaryColor,c.secondaryColor)})),Mm(f.icon,"svg-".concat(f.name),ie(ie({className:e,onClick:t,style:i,"data-icon":f.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},l),{},{ref:u}))};Yp.displayName="IconReact";Yp.getTwoToneColors=ZF;Yp.setTwoToneColors=JF;var Qy=Yp;function ew(n){var r=ZA(n),a=_e(r,2),e=a[0],t=a[1];return Qy.setTwoToneColors({primaryColor:e,secondaryColor:t})}function eD(){var n=Qy.getTwoToneColors();return n.calculated?[n.primaryColor,n.secondaryColor]:n.primaryColor}var tD=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];ew(PN.primary);var Qp=w.exports.forwardRef(function(n,r){var a=n.className,e=n.icon,t=n.spin,i=n.rotate,o=n.tabIndex,s=n.onClick,l=n.twoToneColor,u=Zt(n,tD),c=w.exports.useContext(Wy),f=c.prefixCls,d=f===void 0?"anticon":f,h=c.rootClassName,_=mt(h,d,Z(Z({},"".concat(d,"-").concat(e.name),!!e.name),"".concat(d,"-spin"),!!t||e.name==="loading"),a),p=o;p===void 0&&s&&(p=-1);var v=i?{msTransform:"rotate(".concat(i,"deg)"),transform:"rotate(".concat(i,"deg)")}:void 0,y=ZA(l),m=_e(y,2),g=m[0],x=m[1];return w.exports.createElement("span",St({role:"img","aria-label":e.name},u,{ref:r,tabIndex:p,onClick:s,className:_}),w.exports.createElement(Qy,{icon:e,primaryColor:g,secondaryColor:x,style:v}))});Qp.displayName="AntdIcon";Qp.getTwoToneColor=eD;Qp.setTwoToneColor=ew;var Mo=Qp,nD={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"},rD=nD,aD=function(r,a){return w.exports.createElement(Mo,St({},r,{ref:a,icon:rD}))},iD=w.exports.forwardRef(aD),oD=iD,sD={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},lD=sD,uD=function(r,a){return w.exports.createElement(Mo,St({},r,{ref:a,icon:lD}))},cD=w.exports.forwardRef(uD),fD=cD,dD=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,hD=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,vD="".concat(dD," ").concat(hD).split(/[\s\n]+/),pD="aria-",_D="data-";function F1(n,r){return n.indexOf(r)===0}function kv(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a;r===!1?a={aria:!0,data:!0,attr:!0}:r===!0?a={aria:!0}:a=ie({},r);var e={};return Object.keys(n).forEach(function(t){(a.aria&&(t==="role"||F1(t,pD))||a.data&&F1(t,_D)||a.attr&&vD.includes(t))&&(e[t]=n[t])}),e}function gD(n){return n&&Wt.isValidElement(n)&&n.type===Wt.Fragment}const mD=(n,r,a)=>Wt.isValidElement(n)?Wt.cloneElement(n,typeof a=="function"?a(n.props||{}):a):r;function qp(n,r){return mD(n,n,r)}const yD=n=>{const[,,,,r]=wi();return r?`${n}-css-var`:""};var tw=yD,we={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(r){var a=r.keyCode;if(r.altKey&&!r.ctrlKey||r.metaKey||a>=we.F1&&a<=we.F12)return!1;switch(a){case we.ALT:case we.CAPS_LOCK:case we.CONTEXT_MENU:case we.CTRL:case we.DOWN:case we.END:case we.ESC:case we.HOME:case we.INSERT:case we.LEFT:case we.MAC_FF_META:case we.META:case we.NUMLOCK:case we.NUM_CENTER:case we.PAGE_DOWN:case we.PAGE_UP:case we.PAUSE:case we.PRINT_SCREEN:case we.RIGHT:case we.SHIFT:case we.UP:case we.WIN_KEY:case we.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(r){if(r>=we.ZERO&&r<=we.NINE||r>=we.NUM_ZERO&&r<=we.NUM_MULTIPLY||r>=we.A&&r<=we.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&r===0)return!0;switch(r){case we.SPACE:case we.QUESTION_MARK:case we.NUM_PLUS:case we.NUM_MINUS:case we.NUM_PERIOD:case we.NUM_DIVISION:case we.SEMICOLON:case we.DASH:case we.EQUALS:case we.COMMA:case we.PERIOD:case we.SLASH:case we.APOSTROPHE:case we.SINGLE_QUOTE:case we.OPEN_SQUARE_BRACKET:case we.BACKSLASH:case we.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},xD={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},SD=xD,bD=function(r,a){return w.exports.createElement(Mo,St({},r,{ref:a,icon:SD}))},CD=w.exports.forwardRef(bD),ED=CD;const TD=Wt.createContext(void 0);var nw=TD;const pl=100,RD=10,AD=pl*RD,rw={Modal:pl,Drawer:pl,Popover:pl,Popconfirm:pl,Tooltip:pl,Tour:pl},wD={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function PD(n){return n in rw}function qy(n,r){const[,a]=wi(),e=Wt.useContext(nw),t=PD(n);if(r!==void 0)return[r,r];let i=e!=null?e:0;return t?(i+=(e?0:a.zIndexPopupBase)+rw[n],i=Math.min(i,a.zIndexPopupBase+AD)):i+=wD[n],[e===void 0?r:i,i]}function Zi(){Zi=function(){return r};var n,r={},a=Object.prototype,e=a.hasOwnProperty,t=Object.defineProperty||function(P,R,A){P[R]=A.value},i=typeof Symbol=="function"?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(P,R,A){return Object.defineProperty(P,R,{value:A,enumerable:!0,configurable:!0,writable:!0}),P[R]}try{u({},"")}catch{u=function(A,D,B){return A[D]=B}}function c(P,R,A,D){var B=R&&R.prototype instanceof y?R:y,k=Object.create(B.prototype),V=new I(D||[]);return t(k,"_invoke",{value:M(P,A,V)}),k}function f(P,R,A){try{return{type:"normal",arg:P.call(R,A)}}catch(D){return{type:"throw",arg:D}}}r.wrap=c;var d="suspendedStart",h="suspendedYield",_="executing",p="completed",v={};function y(){}function m(){}function g(){}var x={};u(x,o,function(){return this});var b=Object.getPrototypeOf,S=b&&b(b(O([])));S&&S!==a&&e.call(S,o)&&(x=S);var C=g.prototype=y.prototype=Object.create(x);function E(P){["next","throw","return"].forEach(function(R){u(P,R,function(A){return this._invoke(R,A)})})}function T(P,R){function A(B,k,V,U){var j=f(P[B],P,k);if(j.type!=="throw"){var G=j.arg,$=G.value;return $&&Qt($)=="object"&&e.call($,"__await")?R.resolve($.__await).then(function(W){A("next",W,V,U)},function(W){A("throw",W,V,U)}):R.resolve($).then(function(W){G.value=W,V(G)},function(W){return A("throw",W,V,U)})}U(j.arg)}var D;t(this,"_invoke",{value:function(k,V){function U(){return new R(function(j,G){A(k,V,j,G)})}return D=D?D.then(U,U):U()}})}function M(P,R,A){var D=d;return function(B,k){if(D===_)throw Error("Generator is already running");if(D===p){if(B==="throw")throw k;return{value:n,done:!0}}for(A.method=B,A.arg=k;;){var V=A.delegate;if(V){var U=L(V,A);if(U){if(U===v)continue;return U}}if(A.method==="next")A.sent=A._sent=A.arg;else if(A.method==="throw"){if(D===d)throw D=p,A.arg;A.dispatchException(A.arg)}else A.method==="return"&&A.abrupt("return",A.arg);D=_;var j=f(P,R,A);if(j.type==="normal"){if(D=A.done?p:h,j.arg===v)continue;return{value:j.arg,done:A.done}}j.type==="throw"&&(D=p,A.method="throw",A.arg=j.arg)}}}function L(P,R){var A=R.method,D=P.iterator[A];if(D===n)return R.delegate=null,A==="throw"&&P.iterator.return&&(R.method="return",R.arg=n,L(P,R),R.method==="throw")||A!=="return"&&(R.method="throw",R.arg=new TypeError("The iterator does not provide a '"+A+"' method")),v;var B=f(D,P.iterator,R.arg);if(B.type==="throw")return R.method="throw",R.arg=B.arg,R.delegate=null,v;var k=B.arg;return k?k.done?(R[P.resultName]=k.value,R.next=P.nextLoc,R.method!=="return"&&(R.method="next",R.arg=n),R.delegate=null,v):k:(R.method="throw",R.arg=new TypeError("iterator result is not an object"),R.delegate=null,v)}function F(P){var R={tryLoc:P[0]};1 in P&&(R.catchLoc=P[1]),2 in P&&(R.finallyLoc=P[2],R.afterLoc=P[3]),this.tryEntries.push(R)}function N(P){var R=P.completion||{};R.type="normal",delete R.arg,P.completion=R}function I(P){this.tryEntries=[{tryLoc:"root"}],P.forEach(F,this),this.reset(!0)}function O(P){if(P||P===""){var R=P[o];if(R)return R.call(P);if(typeof P.next=="function")return P;if(!isNaN(P.length)){var A=-1,D=function B(){for(;++A<P.length;)if(e.call(P,A))return B.value=P[A],B.done=!1,B;return B.value=n,B.done=!0,B};return D.next=D}}throw new TypeError(Qt(P)+" is not iterable")}return m.prototype=g,t(C,"constructor",{value:g,configurable:!0}),t(g,"constructor",{value:m,configurable:!0}),m.displayName=u(g,l,"GeneratorFunction"),r.isGeneratorFunction=function(P){var R=typeof P=="function"&&P.constructor;return!!R&&(R===m||(R.displayName||R.name)==="GeneratorFunction")},r.mark=function(P){return Object.setPrototypeOf?Object.setPrototypeOf(P,g):(P.__proto__=g,u(P,l,"GeneratorFunction")),P.prototype=Object.create(C),P},r.awrap=function(P){return{__await:P}},E(T.prototype),u(T.prototype,s,function(){return this}),r.AsyncIterator=T,r.async=function(P,R,A,D,B){B===void 0&&(B=Promise);var k=new T(c(P,R,A,D),B);return r.isGeneratorFunction(R)?k:k.next().then(function(V){return V.done?V.value:k.next()})},E(C),u(C,l,"Generator"),u(C,o,function(){return this}),u(C,"toString",function(){return"[object Generator]"}),r.keys=function(P){var R=Object(P),A=[];for(var D in R)A.push(D);return A.reverse(),function B(){for(;A.length;){var k=A.pop();if(k in R)return B.value=k,B.done=!1,B}return B.done=!0,B}},r.values=O,I.prototype={constructor:I,reset:function(R){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(N),!R)for(var A in this)A.charAt(0)==="t"&&e.call(this,A)&&!isNaN(+A.slice(1))&&(this[A]=n)},stop:function(){this.done=!0;var R=this.tryEntries[0].completion;if(R.type==="throw")throw R.arg;return this.rval},dispatchException:function(R){if(this.done)throw R;var A=this;function D(G,$){return V.type="throw",V.arg=R,A.next=G,$&&(A.method="next",A.arg=n),!!$}for(var B=this.tryEntries.length-1;B>=0;--B){var k=this.tryEntries[B],V=k.completion;if(k.tryLoc==="root")return D("end");if(k.tryLoc<=this.prev){var U=e.call(k,"catchLoc"),j=e.call(k,"finallyLoc");if(U&&j){if(this.prev<k.catchLoc)return D(k.catchLoc,!0);if(this.prev<k.finallyLoc)return D(k.finallyLoc)}else if(U){if(this.prev<k.catchLoc)return D(k.catchLoc,!0)}else{if(!j)throw Error("try statement without catch or finally");if(this.prev<k.finallyLoc)return D(k.finallyLoc)}}}},abrupt:function(R,A){for(var D=this.tryEntries.length-1;D>=0;--D){var B=this.tryEntries[D];if(B.tryLoc<=this.prev&&e.call(B,"finallyLoc")&&this.prev<B.finallyLoc){var k=B;break}}k&&(R==="break"||R==="continue")&&k.tryLoc<=A&&A<=k.finallyLoc&&(k=null);var V=k?k.completion:{};return V.type=R,V.arg=A,k?(this.method="next",this.next=k.finallyLoc,v):this.complete(V)},complete:function(R,A){if(R.type==="throw")throw R.arg;return R.type==="break"||R.type==="continue"?this.next=R.arg:R.type==="return"?(this.rval=this.arg=R.arg,this.method="return",this.next="end"):R.type==="normal"&&A&&(this.next=A),v},finish:function(R){for(var A=this.tryEntries.length-1;A>=0;--A){var D=this.tryEntries[A];if(D.finallyLoc===R)return this.complete(D.completion,D.afterLoc),N(D),v}},catch:function(R){for(var A=this.tryEntries.length-1;A>=0;--A){var D=this.tryEntries[A];if(D.tryLoc===R){var B=D.completion;if(B.type==="throw"){var k=B.arg;N(D)}return k}}throw Error("illegal catch attempt")},delegateYield:function(R,A,D){return this.delegate={iterator:O(R),resultName:A,nextLoc:D},this.method==="next"&&(this.arg=n),v}},r}function D1(n,r,a,e,t,i,o){try{var s=n[i](o),l=s.value}catch(u){a(u);return}s.done?r(l):Promise.resolve(l).then(e,t)}function Md(n){return function(){var r=this,a=arguments;return new Promise(function(e,t){var i=n.apply(r,a);function o(l){D1(i,e,t,o,s,"next",l)}function s(l){D1(i,e,t,o,s,"throw",l)}o(void 0)})}}const og=()=>({height:0,opacity:0}),B1=n=>{const{scrollHeight:r}=n;return{height:r,opacity:1}},MD=n=>({height:n?n.offsetHeight:0}),sg=(n,r)=>(r==null?void 0:r.deadline)===!0||r.propertyName==="height",OD=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:og,onEnterStart:og,onAppearActive:B1,onEnterActive:B1,onLeaveStart:MD,onLeaveActive:og,onAppearEnd:sg,onEnterEnd:sg,onLeaveEnd:sg,motionDeadline:500}},aw=(n,r,a)=>a!==void 0?a:`${n}-${r}`;var ID=OD,iw=function(n){if(!n)return!1;if(n instanceof Element){if(n.offsetParent)return!0;if(n.getBBox){var r=n.getBBox(),a=r.width,e=r.height;if(a||e)return!0}if(n.getBoundingClientRect){var t=n.getBoundingClientRect(),i=t.width,o=t.height;if(i||o)return!0}}return!1};const LD=n=>{const r=Wt.useContext($p);return Wt.useMemo(()=>n?typeof n=="string"?n!=null?n:r:n instanceof Function?n(r):r:r,[n,r])};var ND=LD;globalThis&&globalThis.__rest;const ow=w.exports.createContext(null),FD=(n,r)=>{const a=w.exports.useContext(ow),e=w.exports.useMemo(()=>{if(!a)return"";const{compactDirection:t,isFirstItem:i,isLastItem:o}=a,s=t==="vertical"?"-vertical-":"-";return mt(`${n}-compact${s}item`,{[`${n}-compact${s}first-item`]:i,[`${n}-compact${s}last-item`]:o,[`${n}-compact${s}item-rtl`]:r==="rtl"})},[n,r,a]);return{compactSize:a==null?void 0:a.compactSize,compactDirection:a==null?void 0:a.compactDirection,compactItemClassnames:e}},DD=n=>{let{children:r}=n;return w.exports.createElement(ow.Provider,{value:null},r)};function BD(n,r,a){const{focusElCls:e,focus:t,borderElCls:i}=a,o=i?"> *":"",s=["hover",t?"focus":null,"active"].filter(Boolean).map(l=>`&:${l} ${o}`).join(",");return{[`&-item:not(${r}-last-item)`]:{marginInlineEnd:n.calc(n.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[s]:{zIndex:2}},e?{[`&${e}`]:{zIndex:2}}:{}),{[`&[disabled] ${o}`]:{zIndex:0}})}}function kD(n,r,a){const{borderElCls:e}=a,t=e?`> ${e}`:"";return{[`&-item:not(${r}-first-item):not(${r}-last-item) ${t}`]:{borderRadius:0},[`&-item:not(${r}-last-item)${r}-first-item`]:{[`& ${t}, &${n}-sm ${t}, &${n}-lg ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${r}-first-item)${r}-last-item`]:{[`& ${t}, &${n}-sm ${t}, &${n}-lg ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function VD(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:a}=n,e=`${a}-compact`;return{[e]:Object.assign(Object.assign({},BD(n,e,r)),kD(a,e,r))}}var sw=w.exports.createContext(null),k1=[];function UD(n,r){var a=w.exports.useState(function(){if(!Fa())return null;var _=document.createElement("div");return _}),e=_e(a,1),t=e[0],i=w.exports.useRef(!1),o=w.exports.useContext(sw),s=w.exports.useState(k1),l=_e(s,2),u=l[0],c=l[1],f=o||(i.current?void 0:function(_){c(function(p){var v=[_].concat(st(p));return v})});function d(){t.parentElement||document.body.appendChild(t),i.current=!0}function h(){var _;(_=t.parentElement)===null||_===void 0||_.removeChild(t),i.current=!1}return Qn(function(){return n?o?o(d):d():h(),h},[n]),Qn(function(){u.length&&(u.forEach(function(_){return _()}),c(k1))},[u]),[t,f]}function zD(n){var r="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),a=document.createElement("div");a.id=r;var e=a.style;e.position="absolute",e.left="0",e.top="0",e.width="100px",e.height="100px",e.overflow="scroll";var t,i;if(n){var o=getComputedStyle(n);e.scrollbarColor=o.scrollbarColor,e.scrollbarWidth=o.scrollbarWidth;var s=getComputedStyle(n,"::-webkit-scrollbar"),l=parseInt(s.width,10),u=parseInt(s.height,10);try{var c=l?"width: ".concat(s.width,";"):"",f=u?"height: ".concat(s.height,";"):"";ns(`
#`.concat(r,`::-webkit-scrollbar {
`).concat(c,`
`).concat(f,`
}`),r)}catch(_){console.error(_),t=l,i=u}}document.body.appendChild(a);var d=n&&t&&!isNaN(t)?t:a.offsetWidth-a.clientWidth,h=n&&i&&!isNaN(i)?i:a.offsetHeight-a.clientHeight;return document.body.removeChild(a),qf(r),{width:d,height:h}}function GD(n){return typeof document=="undefined"||!n||!(n instanceof Element)?{width:0,height:0}:zD(n)}function HD(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var jD="rc-util-locker-".concat(Date.now()),V1=0;function WD(n){var r=!!n,a=w.exports.useState(function(){return V1+=1,"".concat(jD,"_").concat(V1)}),e=_e(a,1),t=e[0];Qn(function(){if(r){var i=GD(document.body).width,o=HD();ns(`
html body {
  overflow-y: hidden;
  `.concat(o?"width: calc(100% - ".concat(i,"px);"):"",`
}`),t)}else qf(t);return function(){qf(t)}},[r,t])}var U1=!1;function $D(n){return typeof n=="boolean"&&(U1=n),U1}var z1=function(r){return r===!1?!1:!Fa()||!r?null:typeof r=="string"?document.querySelector(r):typeof r=="function"?r():r},lw=w.exports.forwardRef(function(n,r){var a=n.open,e=n.autoLock,t=n.getContainer;n.debug;var i=n.autoDestroy,o=i===void 0?!0:i,s=n.children,l=w.exports.useState(a),u=_e(l,2),c=u[0],f=u[1],d=c||a;w.exports.useEffect(function(){(o||a)&&f(a)},[a,o]);var h=w.exports.useState(function(){return z1(t)}),_=_e(h,2),p=_[0],v=_[1];w.exports.useEffect(function(){var L=z1(t);v(L!=null?L:null)});var y=UD(d&&!p),m=_e(y,2),g=m[0],x=m[1],b=p!=null?p:g;WD(e&&a&&Fa()&&(b===g||b===document.body));var S=null;if(s&&Up(s)&&r){var C=s;S=C.ref}var E=Td(S,r);if(!d||!Fa()||p===void 0)return null;var T=b===!1||$D(),M=s;return r&&(M=w.exports.cloneElement(s,{ref:E})),w.exports.createElement(sw.Provider,{value:x},T?M:kl.exports.createPortal(M,b))});function XD(){var n=ie({},pp);return n.useId}var G1=0,H1=XD(),KD=H1?function(r){var a=H1();return r||a}:function(r){var a=w.exports.useState("ssr-id"),e=_e(a,2),t=e[0],i=e[1];return w.exports.useEffect(function(){var o=G1;G1+=1,i("rc_unique_".concat(o))},[]),r||t},Rl="RC_FORM_INTERNAL_HOOKS",mn=function(){Yr(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},ac=w.exports.createContext({getFieldValue:mn,getFieldsValue:mn,getFieldError:mn,getFieldWarning:mn,getFieldsError:mn,isFieldsTouched:mn,isFieldTouched:mn,isFieldValidating:mn,isFieldsValidating:mn,resetFields:mn,setFields:mn,setFieldValue:mn,setFieldsValue:mn,validateFields:mn,submit:mn,getInternalHooks:function(){return mn(),{dispatch:mn,initEntityValue:mn,registerField:mn,useSubscribe:mn,setInitialValues:mn,destroyForm:mn,setCallbacks:mn,registerWatch:mn,getFields:mn,setValidateMessages:mn,setPreserve:mn,getInitialValue:mn}}}),Vv=w.exports.createContext(null);function Om(n){return n==null?[]:Array.isArray(n)?n:[n]}function YD(n){return n&&!!n._init}function Al(){return Al=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(n[e]=a[e])}return n},Al.apply(this,arguments)}function QD(n,r){n.prototype=Object.create(r.prototype),n.prototype.constructor=n,rd(n,r)}function Im(n){return Im=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Im(n)}function rd(n,r){return rd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rd(n,r)}function qD(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Zh(n,r,a){return qD()?Zh=Reflect.construct.bind():Zh=function(t,i,o){var s=[null];s.push.apply(s,i);var l=Function.bind.apply(t,s),u=new l;return o&&rd(u,o.prototype),u},Zh.apply(null,arguments)}function JD(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function Lm(n){var r=typeof Map=="function"?new Map:void 0;return Lm=function(e){if(e===null||!JD(e))return e;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r!="undefined"){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return Zh(e,arguments,Im(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),rd(t,e)},Lm(n)}var ZD=/%[sdj%]/g,eB=function(){};typeof process!="undefined"&&process.env;function Nm(n){if(!n||!n.length)return null;var r={};return n.forEach(function(a){var e=a.field;r[e]=r[e]||[],r[e].push(a)}),r}function Ka(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),e=1;e<r;e++)a[e-1]=arguments[e];var t=0,i=a.length;if(typeof n=="function")return n.apply(null,a);if(typeof n=="string"){var o=n.replace(ZD,function(s){if(s==="%%")return"%";if(t>=i)return s;switch(s){case"%s":return String(a[t++]);case"%d":return Number(a[t++]);case"%j":try{return JSON.stringify(a[t++])}catch{return"[Circular]"}break;default:return s}});return o}return n}function tB(n){return n==="string"||n==="url"||n==="hex"||n==="email"||n==="date"||n==="pattern"}function mr(n,r){return!!(n==null||r==="array"&&Array.isArray(n)&&!n.length||tB(r)&&typeof n=="string"&&!n)}function nB(n,r,a){var e=[],t=0,i=n.length;function o(s){e.push.apply(e,s||[]),t++,t===i&&a(e)}n.forEach(function(s){r(s,o)})}function j1(n,r,a){var e=0,t=n.length;function i(o){if(o&&o.length){a(o);return}var s=e;e=e+1,s<t?r(n[s],i):a([])}i([])}function rB(n){var r=[];return Object.keys(n).forEach(function(a){r.push.apply(r,n[a]||[])}),r}var W1=function(n){QD(r,n);function r(a,e){var t;return t=n.call(this,"Async Validation Error")||this,t.errors=a,t.fields=e,t}return r}(Lm(Error));function aB(n,r,a,e,t){if(r.first){var i=new Promise(function(d,h){var _=function(y){return e(y),y.length?h(new W1(y,Nm(y))):d(t)},p=rB(n);j1(p,a,_)});return i.catch(function(d){return d}),i}var o=r.firstFields===!0?Object.keys(n):r.firstFields||[],s=Object.keys(n),l=s.length,u=0,c=[],f=new Promise(function(d,h){var _=function(v){if(c.push.apply(c,v),u++,u===l)return e(c),c.length?h(new W1(c,Nm(c))):d(t)};s.length||(e(c),d(t)),s.forEach(function(p){var v=n[p];o.indexOf(p)!==-1?j1(v,a,_):nB(v,a,_)})});return f.catch(function(d){return d}),f}function iB(n){return!!(n&&n.message!==void 0)}function oB(n,r){for(var a=n,e=0;e<r.length;e++){if(a==null)return a;a=a[r[e]]}return a}function $1(n,r){return function(a){var e;return n.fullFields?e=oB(r,n.fullFields):e=r[a.field||n.fullField],iB(a)?(a.field=a.field||n.fullField,a.fieldValue=e,a):{message:typeof a=="function"?a():a,fieldValue:e,field:a.field||n.fullField}}}function X1(n,r){if(r){for(var a in r)if(r.hasOwnProperty(a)){var e=r[a];typeof e=="object"&&typeof n[a]=="object"?n[a]=Al({},n[a],e):n[a]=e}}return n}var uw=function(r,a,e,t,i,o){r.required&&(!e.hasOwnProperty(r.field)||mr(a,o||r.type))&&t.push(Ka(i.messages.required,r.fullField))},sB=function(r,a,e,t,i){(/^\s+$/.test(a)||a==="")&&t.push(Ka(i.messages.whitespace,r.fullField))},mh,lB=function(){if(mh)return mh;var n="[a-fA-F\\d:]",r=function(x){return x&&x.includeBoundaries?"(?:(?<=\\s|^)(?="+n+")|(?<="+n+")(?=\\s|$))":""},a="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",e="[a-fA-F\\d]{1,4}",t=(`
(?:
(?:`+e+":){7}(?:"+e+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+e+":){6}(?:"+a+"|:"+e+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+e+":){5}(?::"+a+"|(?::"+e+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+e+":){4}(?:(?::"+e+"){0,1}:"+a+"|(?::"+e+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+e+":){3}(?:(?::"+e+"){0,2}:"+a+"|(?::"+e+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+e+":){2}(?:(?::"+e+"){0,3}:"+a+"|(?::"+e+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+e+":){1}(?:(?::"+e+"){0,4}:"+a+"|(?::"+e+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+e+"){0,5}:"+a+"|(?::"+e+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),i=new RegExp("(?:^"+a+"$)|(?:^"+t+"$)"),o=new RegExp("^"+a+"$"),s=new RegExp("^"+t+"$"),l=function(x){return x&&x.exact?i:new RegExp("(?:"+r(x)+a+r(x)+")|(?:"+r(x)+t+r(x)+")","g")};l.v4=function(g){return g&&g.exact?o:new RegExp(""+r(g)+a+r(g),"g")},l.v6=function(g){return g&&g.exact?s:new RegExp(""+r(g)+t+r(g),"g")};var u="(?:(?:[a-z]+:)?//)",c="(?:\\S+(?::\\S*)?@)?",f=l.v4().source,d=l.v6().source,h="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",_="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",p="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",v="(?::\\d{2,5})?",y='(?:[/?#][^\\s"]*)?',m="(?:"+u+"|www\\.)"+c+"(?:localhost|"+f+"|"+d+"|"+h+_+p+")"+v+y;return mh=new RegExp("(?:^"+m+"$)","i"),mh},K1={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},ff={integer:function(r){return ff.number(r)&&parseInt(r,10)===r},float:function(r){return ff.number(r)&&!ff.integer(r)},array:function(r){return Array.isArray(r)},regexp:function(r){if(r instanceof RegExp)return!0;try{return!!new RegExp(r)}catch{return!1}},date:function(r){return typeof r.getTime=="function"&&typeof r.getMonth=="function"&&typeof r.getYear=="function"&&!isNaN(r.getTime())},number:function(r){return isNaN(r)?!1:typeof r=="number"},object:function(r){return typeof r=="object"&&!ff.array(r)},method:function(r){return typeof r=="function"},email:function(r){return typeof r=="string"&&r.length<=320&&!!r.match(K1.email)},url:function(r){return typeof r=="string"&&r.length<=2048&&!!r.match(lB())},hex:function(r){return typeof r=="string"&&!!r.match(K1.hex)}},uB=function(r,a,e,t,i){if(r.required&&a===void 0){uw(r,a,e,t,i);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],s=r.type;o.indexOf(s)>-1?ff[s](a)||t.push(Ka(i.messages.types[s],r.fullField,r.type)):s&&typeof a!==r.type&&t.push(Ka(i.messages.types[s],r.fullField,r.type))},cB=function(r,a,e,t,i){var o=typeof r.len=="number",s=typeof r.min=="number",l=typeof r.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=a,f=null,d=typeof a=="number",h=typeof a=="string",_=Array.isArray(a);if(d?f="number":h?f="string":_&&(f="array"),!f)return!1;_&&(c=a.length),h&&(c=a.replace(u,"_").length),o?c!==r.len&&t.push(Ka(i.messages[f].len,r.fullField,r.len)):s&&!l&&c<r.min?t.push(Ka(i.messages[f].min,r.fullField,r.min)):l&&!s&&c>r.max?t.push(Ka(i.messages[f].max,r.fullField,r.max)):s&&l&&(c<r.min||c>r.max)&&t.push(Ka(i.messages[f].range,r.fullField,r.min,r.max))},iu="enum",fB=function(r,a,e,t,i){r[iu]=Array.isArray(r[iu])?r[iu]:[],r[iu].indexOf(a)===-1&&t.push(Ka(i.messages[iu],r.fullField,r[iu].join(", ")))},dB=function(r,a,e,t,i){if(r.pattern){if(r.pattern instanceof RegExp)r.pattern.lastIndex=0,r.pattern.test(a)||t.push(Ka(i.messages.pattern.mismatch,r.fullField,a,r.pattern));else if(typeof r.pattern=="string"){var o=new RegExp(r.pattern);o.test(a)||t.push(Ka(i.messages.pattern.mismatch,r.fullField,a,r.pattern))}}},Yt={required:uw,whitespace:sB,type:uB,range:cB,enum:fB,pattern:dB},hB=function(r,a,e,t,i){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(mr(a,"string")&&!r.required)return e();Yt.required(r,a,t,o,i,"string"),mr(a,"string")||(Yt.type(r,a,t,o,i),Yt.range(r,a,t,o,i),Yt.pattern(r,a,t,o,i),r.whitespace===!0&&Yt.whitespace(r,a,t,o,i))}e(o)},vB=function(r,a,e,t,i){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(mr(a)&&!r.required)return e();Yt.required(r,a,t,o,i),a!==void 0&&Yt.type(r,a,t,o,i)}e(o)},pB=function(r,a,e,t,i){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(a===""&&(a=void 0),mr(a)&&!r.required)return e();Yt.required(r,a,t,o,i),a!==void 0&&(Yt.type(r,a,t,o,i),Yt.range(r,a,t,o,i))}e(o)},_B=function(r,a,e,t,i){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(mr(a)&&!r.required)return e();Yt.required(r,a,t,o,i),a!==void 0&&Yt.type(r,a,t,o,i)}e(o)},gB=function(r,a,e,t,i){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(mr(a)&&!r.required)return e();Yt.required(r,a,t,o,i),mr(a)||Yt.type(r,a,t,o,i)}e(o)},mB=function(r,a,e,t,i){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(mr(a)&&!r.required)return e();Yt.required(r,a,t,o,i),a!==void 0&&(Yt.type(r,a,t,o,i),Yt.range(r,a,t,o,i))}e(o)},yB=function(r,a,e,t,i){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(mr(a)&&!r.required)return e();Yt.required(r,a,t,o,i),a!==void 0&&(Yt.type(r,a,t,o,i),Yt.range(r,a,t,o,i))}e(o)},xB=function(r,a,e,t,i){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(a==null&&!r.required)return e();Yt.required(r,a,t,o,i,"array"),a!=null&&(Yt.type(r,a,t,o,i),Yt.range(r,a,t,o,i))}e(o)},SB=function(r,a,e,t,i){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(mr(a)&&!r.required)return e();Yt.required(r,a,t,o,i),a!==void 0&&Yt.type(r,a,t,o,i)}e(o)},bB="enum",CB=function(r,a,e,t,i){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(mr(a)&&!r.required)return e();Yt.required(r,a,t,o,i),a!==void 0&&Yt[bB](r,a,t,o,i)}e(o)},EB=function(r,a,e,t,i){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(mr(a,"string")&&!r.required)return e();Yt.required(r,a,t,o,i),mr(a,"string")||Yt.pattern(r,a,t,o,i)}e(o)},TB=function(r,a,e,t,i){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(mr(a,"date")&&!r.required)return e();if(Yt.required(r,a,t,o,i),!mr(a,"date")){var l;a instanceof Date?l=a:l=new Date(a),Yt.type(r,l,t,o,i),l&&Yt.range(r,l.getTime(),t,o,i)}}e(o)},RB=function(r,a,e,t,i){var o=[],s=Array.isArray(a)?"array":typeof a;Yt.required(r,a,t,o,i,s),e(o)},lg=function(r,a,e,t,i){var o=r.type,s=[],l=r.required||!r.required&&t.hasOwnProperty(r.field);if(l){if(mr(a,o)&&!r.required)return e();Yt.required(r,a,t,s,i,o),mr(a,o)||Yt.type(r,a,t,s,i)}e(s)},AB=function(r,a,e,t,i){var o=[],s=r.required||!r.required&&t.hasOwnProperty(r.field);if(s){if(mr(a)&&!r.required)return e();Yt.required(r,a,t,o,i)}e(o)},Mf={string:hB,method:vB,number:pB,boolean:_B,regexp:gB,integer:mB,float:yB,array:xB,object:SB,enum:CB,pattern:EB,date:TB,url:lg,hex:lg,email:lg,required:RB,any:AB};function Fm(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var r=JSON.parse(JSON.stringify(this));return r.clone=this.clone,r}}}var Dm=Fm(),Od=function(){function n(a){this.rules=null,this._messages=Dm,this.define(a)}var r=n.prototype;return r.define=function(e){var t=this;if(!e)throw new Error("Cannot configure a schema with no rules");if(typeof e!="object"||Array.isArray(e))throw new Error("Rules must be an object");this.rules={},Object.keys(e).forEach(function(i){var o=e[i];t.rules[i]=Array.isArray(o)?o:[o]})},r.messages=function(e){return e&&(this._messages=X1(Fm(),e)),this._messages},r.validate=function(e,t,i){var o=this;t===void 0&&(t={}),i===void 0&&(i=function(){});var s=e,l=t,u=i;if(typeof l=="function"&&(u=l,l={}),!this.rules||Object.keys(this.rules).length===0)return u&&u(null,s),Promise.resolve(s);function c(p){var v=[],y={};function m(x){if(Array.isArray(x)){var b;v=(b=v).concat.apply(b,x)}else v.push(x)}for(var g=0;g<p.length;g++)m(p[g]);v.length?(y=Nm(v),u(v,y)):u(null,s)}if(l.messages){var f=this.messages();f===Dm&&(f=Fm()),X1(f,l.messages),l.messages=f}else l.messages=this.messages();var d={},h=l.keys||Object.keys(this.rules);h.forEach(function(p){var v=o.rules[p],y=s[p];v.forEach(function(m){var g=m;typeof g.transform=="function"&&(s===e&&(s=Al({},s)),y=s[p]=g.transform(y)),typeof g=="function"?g={validator:g}:g=Al({},g),g.validator=o.getValidationMethod(g),g.validator&&(g.field=p,g.fullField=g.fullField||p,g.type=o.getType(g),d[p]=d[p]||[],d[p].push({rule:g,value:y,source:s,field:p}))})});var _={};return aB(d,l,function(p,v){var y=p.rule,m=(y.type==="object"||y.type==="array")&&(typeof y.fields=="object"||typeof y.defaultField=="object");m=m&&(y.required||!y.required&&p.value),y.field=p.field;function g(S,C){return Al({},C,{fullField:y.fullField+"."+S,fullFields:y.fullFields?[].concat(y.fullFields,[S]):[S]})}function x(S){S===void 0&&(S=[]);var C=Array.isArray(S)?S:[S];!l.suppressWarning&&C.length&&n.warning("async-validator:",C),C.length&&y.message!==void 0&&(C=[].concat(y.message));var E=C.map($1(y,s));if(l.first&&E.length)return _[y.field]=1,v(E);if(!m)v(E);else{if(y.required&&!p.value)return y.message!==void 0?E=[].concat(y.message).map($1(y,s)):l.error&&(E=[l.error(y,Ka(l.messages.required,y.field))]),v(E);var T={};y.defaultField&&Object.keys(p.value).map(function(F){T[F]=y.defaultField}),T=Al({},T,p.rule.fields);var M={};Object.keys(T).forEach(function(F){var N=T[F],I=Array.isArray(N)?N:[N];M[F]=I.map(g.bind(null,F))});var L=new n(M);L.messages(l.messages),p.rule.options&&(p.rule.options.messages=l.messages,p.rule.options.error=l.error),L.validate(p.value,p.rule.options||l,function(F){var N=[];E&&E.length&&N.push.apply(N,E),F&&F.length&&N.push.apply(N,F),v(N.length?N:null)})}}var b;if(y.asyncValidator)b=y.asyncValidator(y,p.value,x,p.source,l);else if(y.validator){try{b=y.validator(y,p.value,x,p.source,l)}catch(S){console.error==null||console.error(S),l.suppressValidatorError||setTimeout(function(){throw S},0),x(S.message)}b===!0?x():b===!1?x(typeof y.message=="function"?y.message(y.fullField||y.field):y.message||(y.fullField||y.field)+" fails"):b instanceof Array?x(b):b instanceof Error&&x(b.message)}b&&b.then&&b.then(function(){return x()},function(S){return x(S)})},function(p){c(p)},s)},r.getType=function(e){if(e.type===void 0&&e.pattern instanceof RegExp&&(e.type="pattern"),typeof e.validator!="function"&&e.type&&!Mf.hasOwnProperty(e.type))throw new Error(Ka("Unknown rule type %s",e.type));return e.type||"string"},r.getValidationMethod=function(e){if(typeof e.validator=="function")return e.validator;var t=Object.keys(e),i=t.indexOf("message");return i!==-1&&t.splice(i,1),t.length===1&&t[0]==="required"?Mf.required:Mf[this.getType(e)]||void 0},n}();Od.register=function(r,a){if(typeof a!="function")throw new Error("Cannot register a validator by type, validator is not a function");Mf[r]=a};Od.warning=eB;Od.messages=Dm;Od.validators=Mf;var Ga="'${name}' is not a valid ${type}",cw={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:Ga,method:Ga,array:Ga,object:Ga,number:Ga,date:Ga,boolean:Ga,integer:Ga,float:Ga,regexp:Ga,email:Ga,url:Ga,hex:Ga},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},Y1=Od;function wB(n,r){return n.replace(/\$\{\w+\}/g,function(a){var e=a.slice(2,-1);return r[e]})}var Q1="CODE_LOGIC_ERROR";function Bm(n,r,a,e,t){return km.apply(this,arguments)}function km(){return km=Md(Zi().mark(function n(r,a,e,t,i){var o,s,l,u,c,f,d,h,_;return Zi().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return o=ie({},e),delete o.ruleIndex,Y1.warning=function(){},o.validator&&(s=o.validator,o.validator=function(){try{return s.apply(void 0,arguments)}catch(y){return console.error(y),Promise.reject(Q1)}}),l=null,o&&o.type==="array"&&o.defaultField&&(l=o.defaultField,delete o.defaultField),u=new Y1(Z({},r,[o])),c=Ru(cw,t.validateMessages),u.messages(c),f=[],v.prev=10,v.next=13,Promise.resolve(u.validate(Z({},r,a),ie({},t)));case 13:v.next=18;break;case 15:v.prev=15,v.t0=v.catch(10),v.t0.errors&&(f=v.t0.errors.map(function(y,m){var g=y.message,x=g===Q1?c.default:g;return w.exports.isValidElement(x)?w.exports.cloneElement(x,{key:"error_".concat(m)}):x}));case 18:if(!(!f.length&&l)){v.next=23;break}return v.next=21,Promise.all(a.map(function(y,m){return Bm("".concat(r,".").concat(m),y,l,t,i)}));case 21:return d=v.sent,v.abrupt("return",d.reduce(function(y,m){return[].concat(st(y),st(m))},[]));case 23:return h=ie(ie({},e),{},{name:r,enum:(e.enum||[]).join(", ")},i),_=f.map(function(y){return typeof y=="string"?wB(y,h):y}),v.abrupt("return",_);case 26:case"end":return v.stop()}},n,null,[[10,15]])})),km.apply(this,arguments)}function PB(n,r,a,e,t,i){var o=n.join("."),s=a.map(function(c,f){var d=c.validator,h=ie(ie({},c),{},{ruleIndex:f});return d&&(h.validator=function(_,p,v){var y=!1,m=function(){for(var b=arguments.length,S=new Array(b),C=0;C<b;C++)S[C]=arguments[C];Promise.resolve().then(function(){Yr(!y,"Your validator function has already return a promise. `callback` will be ignored."),y||v.apply(void 0,S)})},g=d(_,p,m);y=g&&typeof g.then=="function"&&typeof g.catch=="function",Yr(y,"`callback` is deprecated. Please return a promise instead."),y&&g.then(function(){v()}).catch(function(x){v(x||" ")})}),h}).sort(function(c,f){var d=c.warningOnly,h=c.ruleIndex,_=f.warningOnly,p=f.ruleIndex;return!!d==!!_?h-p:d?1:-1}),l;if(t===!0)l=new Promise(function(){var c=Md(Zi().mark(function f(d,h){var _,p,v;return Zi().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:_=0;case 1:if(!(_<s.length)){m.next=12;break}return p=s[_],m.next=5,Bm(o,r,p,e,i);case 5:if(v=m.sent,!v.length){m.next=9;break}return h([{errors:v,rule:p}]),m.abrupt("return");case 9:_+=1,m.next=1;break;case 12:d([]);case 13:case"end":return m.stop()}},f)}));return function(f,d){return c.apply(this,arguments)}}());else{var u=s.map(function(c){return Bm(o,r,c,e,i).then(function(f){return{errors:f,rule:c}})});l=(t?OB(u):MB(u)).then(function(c){return Promise.reject(c)})}return l.catch(function(c){return c}),l}function MB(n){return Vm.apply(this,arguments)}function Vm(){return Vm=Md(Zi().mark(function n(r){return Zi().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(r).then(function(t){var i,o=(i=[]).concat.apply(i,st(t));return o}));case 1:case"end":return e.stop()}},n)})),Vm.apply(this,arguments)}function OB(n){return Um.apply(this,arguments)}function Um(){return Um=Md(Zi().mark(function n(r){var a;return Zi().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=0,t.abrupt("return",new Promise(function(i){r.forEach(function(o){o.then(function(s){s.errors.length&&i([s]),a+=1,a===r.length&&i([])})})}));case 2:case"end":return t.stop()}},n)})),Um.apply(this,arguments)}function rr(n){return Om(n)}function q1(n,r){var a={};return r.forEach(function(e){var t=mo(n,e);a=$i(a,e,t)}),a}function Gu(n,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return n&&n.some(function(e){return fw(r,e,a)})}function fw(n,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!n||!r||!a&&n.length!==r.length?!1:r.every(function(e,t){return n[t]===e})}function IB(n,r){if(n===r)return!0;if(!n&&r||n&&!r||!n||!r||Qt(n)!=="object"||Qt(r)!=="object")return!1;var a=Object.keys(n),e=Object.keys(r),t=new Set([].concat(a,e));return st(t).every(function(i){var o=n[i],s=r[i];return typeof o=="function"&&typeof s=="function"?!0:o===s})}function LB(n){var r=arguments.length<=1?void 0:arguments[1];return r&&r.target&&Qt(r.target)==="object"&&n in r.target?r.target[n]:r}function J1(n,r,a){var e=n.length;if(r<0||r>=e||a<0||a>=e)return n;var t=n[r],i=r-a;return i>0?[].concat(st(n.slice(0,a)),[t],st(n.slice(a,r)),st(n.slice(r+1,e))):i<0?[].concat(st(n.slice(0,r)),st(n.slice(r+1,a+1)),[t],st(n.slice(a+1,e))):n}var NB=["name"],ui=[];function Z1(n,r,a,e,t,i){return typeof n=="function"?n(r,a,"source"in i?{source:i.source}:{}):e!==t}var Jy=function(n){Yl(a,n);var r=Rd(a);function a(e){var t;if(_a(this,a),t=r.call(this,e),Z(nn(t),"state",{resetCount:0}),Z(nn(t),"cancelRegisterFunc",null),Z(nn(t),"mounted",!1),Z(nn(t),"touched",!1),Z(nn(t),"dirty",!1),Z(nn(t),"validatePromise",void 0),Z(nn(t),"prevValidating",void 0),Z(nn(t),"errors",ui),Z(nn(t),"warnings",ui),Z(nn(t),"cancelRegister",function(){var l=t.props,u=l.preserve,c=l.isListField,f=l.name;t.cancelRegisterFunc&&t.cancelRegisterFunc(c,u,rr(f)),t.cancelRegisterFunc=null}),Z(nn(t),"getNamePath",function(){var l=t.props,u=l.name,c=l.fieldContext,f=c.prefixName,d=f===void 0?[]:f;return u!==void 0?[].concat(st(d),st(u)):[]}),Z(nn(t),"getRules",function(){var l=t.props,u=l.rules,c=u===void 0?[]:u,f=l.fieldContext;return c.map(function(d){return typeof d=="function"?d(f):d})}),Z(nn(t),"refresh",function(){!t.mounted||t.setState(function(l){var u=l.resetCount;return{resetCount:u+1}})}),Z(nn(t),"metaCache",null),Z(nn(t),"triggerMetaEvent",function(l){var u=t.props.onMetaChange;if(u){var c=ie(ie({},t.getMeta()),{},{destroy:l});Jf(t.metaCache,c)||u(c),t.metaCache=c}else t.metaCache=null}),Z(nn(t),"onStoreChange",function(l,u,c){var f=t.props,d=f.shouldUpdate,h=f.dependencies,_=h===void 0?[]:h,p=f.onReset,v=c.store,y=t.getNamePath(),m=t.getValue(l),g=t.getValue(v),x=u&&Gu(u,y);switch(c.type==="valueUpdate"&&c.source==="external"&&!Jf(m,g)&&(t.touched=!0,t.dirty=!0,t.validatePromise=null,t.errors=ui,t.warnings=ui,t.triggerMetaEvent()),c.type){case"reset":if(!u||x){t.touched=!1,t.dirty=!1,t.validatePromise=void 0,t.errors=ui,t.warnings=ui,t.triggerMetaEvent(),p==null||p(),t.refresh();return}break;case"remove":{if(d){t.reRender();return}break}case"setField":{var b=c.data;if(x){"touched"in b&&(t.touched=b.touched),"validating"in b&&!("originRCField"in b)&&(t.validatePromise=b.validating?Promise.resolve([]):null),"errors"in b&&(t.errors=b.errors||ui),"warnings"in b&&(t.warnings=b.warnings||ui),t.dirty=!0,t.triggerMetaEvent(),t.reRender();return}else if("value"in b&&Gu(u,y,!0)){t.reRender();return}if(d&&!y.length&&Z1(d,l,v,m,g,c)){t.reRender();return}break}case"dependenciesUpdate":{var S=_.map(rr);if(S.some(function(C){return Gu(c.relatedFields,C)})){t.reRender();return}break}default:if(x||(!_.length||y.length||d)&&Z1(d,l,v,m,g,c)){t.reRender();return}break}d===!0&&t.reRender()}),Z(nn(t),"validateRules",function(l){var u=t.getNamePath(),c=t.getValue(),f=l||{},d=f.triggerName,h=f.validateOnly,_=h===void 0?!1:h,p=Promise.resolve().then(Md(Zi().mark(function v(){var y,m,g,x,b,S,C;return Zi().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(t.mounted){T.next=2;break}return T.abrupt("return",[]);case 2:if(y=t.props,m=y.validateFirst,g=m===void 0?!1:m,x=y.messageVariables,b=y.validateDebounce,S=t.getRules(),d&&(S=S.filter(function(M){return M}).filter(function(M){var L=M.validateTrigger;if(!L)return!0;var F=Om(L);return F.includes(d)})),!(b&&d)){T.next=10;break}return T.next=8,new Promise(function(M){setTimeout(M,b)});case 8:if(t.validatePromise===p){T.next=10;break}return T.abrupt("return",[]);case 10:return C=PB(u,c,S,l,g,x),C.catch(function(M){return M}).then(function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ui;if(t.validatePromise===p){var L;t.validatePromise=null;var F=[],N=[];(L=M.forEach)===null||L===void 0||L.call(M,function(I){var O=I.rule.warningOnly,P=I.errors,R=P===void 0?ui:P;O?N.push.apply(N,st(R)):F.push.apply(F,st(R))}),t.errors=F,t.warnings=N,t.triggerMetaEvent(),t.reRender()}}),T.abrupt("return",C);case 13:case"end":return T.stop()}},v)})));return _||(t.validatePromise=p,t.dirty=!0,t.errors=ui,t.warnings=ui,t.triggerMetaEvent(),t.reRender()),p}),Z(nn(t),"isFieldValidating",function(){return!!t.validatePromise}),Z(nn(t),"isFieldTouched",function(){return t.touched}),Z(nn(t),"isFieldDirty",function(){if(t.dirty||t.props.initialValue!==void 0)return!0;var l=t.props.fieldContext,u=l.getInternalHooks(Rl),c=u.getInitialValue;return c(t.getNamePath())!==void 0}),Z(nn(t),"getErrors",function(){return t.errors}),Z(nn(t),"getWarnings",function(){return t.warnings}),Z(nn(t),"isListField",function(){return t.props.isListField}),Z(nn(t),"isList",function(){return t.props.isList}),Z(nn(t),"isPreserve",function(){return t.props.preserve}),Z(nn(t),"getMeta",function(){t.prevValidating=t.isFieldValidating();var l={touched:t.isFieldTouched(),validating:t.prevValidating,errors:t.errors,warnings:t.warnings,name:t.getNamePath(),validated:t.validatePromise===null};return l}),Z(nn(t),"getOnlyChild",function(l){if(typeof l=="function"){var u=t.getMeta();return ie(ie({},t.getOnlyChild(l(t.getControlled(),u,t.props.fieldContext))),{},{isFunction:!0})}var c=Zs(l);return c.length!==1||!w.exports.isValidElement(c[0])?{child:c,isFunction:!1}:{child:c[0],isFunction:!1}}),Z(nn(t),"getValue",function(l){var u=t.props.fieldContext.getFieldsValue,c=t.getNamePath();return mo(l||u(!0),c)}),Z(nn(t),"getControlled",function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=t.props,c=u.name,f=u.trigger,d=u.validateTrigger,h=u.getValueFromEvent,_=u.normalize,p=u.valuePropName,v=u.getValueProps,y=u.fieldContext,m=d!==void 0?d:y.validateTrigger,g=t.getNamePath(),x=y.getInternalHooks,b=y.getFieldsValue,S=x(Rl),C=S.dispatch,E=t.getValue(),T=v||function(I){return Z({},p,I)},M=l[f],L=c!==void 0?T(E):{},F=ie(ie({},l),L);F[f]=function(){t.touched=!0,t.dirty=!0,t.triggerMetaEvent();for(var I,O=arguments.length,P=new Array(O),R=0;R<O;R++)P[R]=arguments[R];h?I=h.apply(void 0,P):I=LB.apply(void 0,[p].concat(P)),_&&(I=_(I,E,b(!0))),C({type:"updateValue",namePath:g,value:I}),M&&M.apply(void 0,P)};var N=Om(m||[]);return N.forEach(function(I){var O=F[I];F[I]=function(){O&&O.apply(void 0,arguments);var P=t.props.rules;P&&P.length&&C({type:"validateField",namePath:g,triggerName:I})}}),F}),e.fieldContext){var i=e.fieldContext.getInternalHooks,o=i(Rl),s=o.initEntityValue;s(nn(t))}return t}return ga(a,[{key:"componentDidMount",value:function(){var t=this.props,i=t.shouldUpdate,o=t.fieldContext;if(this.mounted=!0,o){var s=o.getInternalHooks,l=s(Rl),u=l.registerField;this.cancelRegisterFunc=u(this)}i===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){!this.mounted||this.forceUpdate()}},{key:"render",value:function(){var t=this.state.resetCount,i=this.props.children,o=this.getOnlyChild(i),s=o.child,l=o.isFunction,u;return l?u=s:w.exports.isValidElement(s)?u=w.exports.cloneElement(s,this.getControlled(s.props)):(Yr(!s,"`children` of Field is not validate ReactElement."),u=s),w.exports.createElement(w.exports.Fragment,{key:t},u)}}]),a}(w.exports.Component);Z(Jy,"contextType",ac);Z(Jy,"defaultProps",{trigger:"onChange",valuePropName:"value"});function dw(n){var r=n.name,a=Zt(n,NB),e=w.exports.useContext(ac),t=w.exports.useContext(Vv),i=r!==void 0?rr(r):void 0,o="keep";return a.isListField||(o="_".concat((i||[]).join("_"))),w.exports.createElement(Jy,St({key:o,name:i,isListField:!!t},a,{fieldContext:e}))}function FB(n){var r=n.name,a=n.initialValue,e=n.children,t=n.rules,i=n.validateTrigger,o=n.isListField,s=w.exports.useContext(ac),l=w.exports.useContext(Vv),u=w.exports.useRef({keys:[],id:0}),c=u.current,f=w.exports.useMemo(function(){var p=rr(s.prefixName)||[];return[].concat(st(p),st(rr(r)))},[s.prefixName,r]),d=w.exports.useMemo(function(){return ie(ie({},s),{},{prefixName:f})},[s,f]),h=w.exports.useMemo(function(){return{getKey:function(v){var y=f.length,m=v[y];return[c.keys[m],v.slice(y+1)]}}},[f]);if(typeof e!="function")return Yr(!1,"Form.List only accepts function as children."),null;var _=function(v,y,m){var g=m.source;return g==="internal"?!1:v!==y};return w.exports.createElement(Vv.Provider,{value:h},w.exports.createElement(ac.Provider,{value:d},w.exports.createElement(dw,{name:[],shouldUpdate:_,rules:t,validateTrigger:i,initialValue:a,isList:!0,isListField:o!=null?o:!!l},function(p,v){var y=p.value,m=y===void 0?[]:y,g=p.onChange,x=s.getFieldValue,b=function(){var T=x(f||[]);return T||[]},S={add:function(T,M){var L=b();M>=0&&M<=L.length?(c.keys=[].concat(st(c.keys.slice(0,M)),[c.id],st(c.keys.slice(M))),g([].concat(st(L.slice(0,M)),[T],st(L.slice(M))))):(c.keys=[].concat(st(c.keys),[c.id]),g([].concat(st(L),[T]))),c.id+=1},remove:function(T){var M=b(),L=new Set(Array.isArray(T)?T:[T]);L.size<=0||(c.keys=c.keys.filter(function(F,N){return!L.has(N)}),g(M.filter(function(F,N){return!L.has(N)})))},move:function(T,M){if(T!==M){var L=b();T<0||T>=L.length||M<0||M>=L.length||(c.keys=J1(c.keys,T,M),g(J1(L,T,M)))}}},C=m||[];return Array.isArray(C)||(C=[]),e(C.map(function(E,T){var M=c.keys[T];return M===void 0&&(c.keys[T]=c.id,M=c.keys[T],c.id+=1),{name:T,key:M,isListField:!0}}),S,v)})))}function DB(n){var r=!1,a=n.length,e=[];return n.length?new Promise(function(t,i){n.forEach(function(o,s){o.catch(function(l){return r=!0,l}).then(function(l){a-=1,e[s]=l,!(a>0)&&(r&&i(e),t(e))})})}):Promise.resolve([])}var hw="__@field_split__";function ug(n){return n.map(function(r){return"".concat(Qt(r),":").concat(r)}).join(hw)}var ou=function(){function n(){_a(this,n),Z(this,"kvs",new Map)}return ga(n,[{key:"set",value:function(a,e){this.kvs.set(ug(a),e)}},{key:"get",value:function(a){return this.kvs.get(ug(a))}},{key:"update",value:function(a,e){var t=this.get(a),i=e(t);i?this.set(a,i):this.delete(a)}},{key:"delete",value:function(a){this.kvs.delete(ug(a))}},{key:"map",value:function(a){return st(this.kvs.entries()).map(function(e){var t=_e(e,2),i=t[0],o=t[1],s=i.split(hw);return a({key:s.map(function(l){var u=l.match(/^([^:]*):(.*)$/),c=_e(u,3),f=c[1],d=c[2];return f==="number"?Number(d):d}),value:o})})}},{key:"toJSON",value:function(){var a={};return this.map(function(e){var t=e.key,i=e.value;return a[t.join(".")]=i,null}),a}}]),n}(),BB=["name"],kB=ga(function n(r){var a=this;_a(this,n),Z(this,"formHooked",!1),Z(this,"forceRootUpdate",void 0),Z(this,"subscribable",!0),Z(this,"store",{}),Z(this,"fieldEntities",[]),Z(this,"initialValues",{}),Z(this,"callbacks",{}),Z(this,"validateMessages",null),Z(this,"preserve",null),Z(this,"lastValidatePromise",null),Z(this,"getForm",function(){return{getFieldValue:a.getFieldValue,getFieldsValue:a.getFieldsValue,getFieldError:a.getFieldError,getFieldWarning:a.getFieldWarning,getFieldsError:a.getFieldsError,isFieldsTouched:a.isFieldsTouched,isFieldTouched:a.isFieldTouched,isFieldValidating:a.isFieldValidating,isFieldsValidating:a.isFieldsValidating,resetFields:a.resetFields,setFields:a.setFields,setFieldValue:a.setFieldValue,setFieldsValue:a.setFieldsValue,validateFields:a.validateFields,submit:a.submit,_init:!0,getInternalHooks:a.getInternalHooks}}),Z(this,"getInternalHooks",function(e){return e===Rl?(a.formHooked=!0,{dispatch:a.dispatch,initEntityValue:a.initEntityValue,registerField:a.registerField,useSubscribe:a.useSubscribe,setInitialValues:a.setInitialValues,destroyForm:a.destroyForm,setCallbacks:a.setCallbacks,setValidateMessages:a.setValidateMessages,getFields:a.getFields,setPreserve:a.setPreserve,getInitialValue:a.getInitialValue,registerWatch:a.registerWatch}):(Yr(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),Z(this,"useSubscribe",function(e){a.subscribable=e}),Z(this,"prevWithoutPreserves",null),Z(this,"setInitialValues",function(e,t){if(a.initialValues=e||{},t){var i,o=Ru(e,a.store);(i=a.prevWithoutPreserves)===null||i===void 0||i.map(function(s){var l=s.key;o=$i(o,l,mo(e,l))}),a.prevWithoutPreserves=null,a.updateStore(o)}}),Z(this,"destroyForm",function(){var e=new ou;a.getFieldEntities(!0).forEach(function(t){a.isMergedPreserve(t.isPreserve())||e.set(t.getNamePath(),!0)}),a.prevWithoutPreserves=e}),Z(this,"getInitialValue",function(e){var t=mo(a.initialValues,e);return e.length?Ru(t):t}),Z(this,"setCallbacks",function(e){a.callbacks=e}),Z(this,"setValidateMessages",function(e){a.validateMessages=e}),Z(this,"setPreserve",function(e){a.preserve=e}),Z(this,"watchList",[]),Z(this,"registerWatch",function(e){return a.watchList.push(e),function(){a.watchList=a.watchList.filter(function(t){return t!==e})}}),Z(this,"notifyWatch",function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(a.watchList.length){var t=a.getFieldsValue(),i=a.getFieldsValue(!0);a.watchList.forEach(function(o){o(t,i,e)})}}),Z(this,"timeoutId",null),Z(this,"warningUnhooked",function(){}),Z(this,"updateStore",function(e){a.store=e}),Z(this,"getFieldEntities",function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return e?a.fieldEntities.filter(function(t){return t.getNamePath().length}):a.fieldEntities}),Z(this,"getFieldsMap",function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=new ou;return a.getFieldEntities(e).forEach(function(i){var o=i.getNamePath();t.set(o,i)}),t}),Z(this,"getFieldEntitiesForNamePathList",function(e){if(!e)return a.getFieldEntities(!0);var t=a.getFieldsMap(!0);return e.map(function(i){var o=rr(i);return t.get(o)||{INVALIDATE_NAME_PATH:rr(i)}})}),Z(this,"getFieldsValue",function(e,t){a.warningUnhooked();var i,o,s;if(e===!0||Array.isArray(e)?(i=e,o=t):e&&Qt(e)==="object"&&(s=e.strict,o=e.filter),i===!0&&!o)return a.store;var l=a.getFieldEntitiesForNamePathList(Array.isArray(i)?i:null),u=[];return l.forEach(function(c){var f,d,h="INVALIDATE_NAME_PATH"in c?c.INVALIDATE_NAME_PATH:c.getNamePath();if(s){var _,p;if((_=(p=c).isList)!==null&&_!==void 0&&_.call(p))return}else if(!i&&(f=(d=c).isListField)!==null&&f!==void 0&&f.call(d))return;if(!o)u.push(h);else{var v="getMeta"in c?c.getMeta():null;o(v)&&u.push(h)}}),q1(a.store,u.map(rr))}),Z(this,"getFieldValue",function(e){a.warningUnhooked();var t=rr(e);return mo(a.store,t)}),Z(this,"getFieldsError",function(e){a.warningUnhooked();var t=a.getFieldEntitiesForNamePathList(e);return t.map(function(i,o){return i&&!("INVALIDATE_NAME_PATH"in i)?{name:i.getNamePath(),errors:i.getErrors(),warnings:i.getWarnings()}:{name:rr(e[o]),errors:[],warnings:[]}})}),Z(this,"getFieldError",function(e){a.warningUnhooked();var t=rr(e),i=a.getFieldsError([t])[0];return i.errors}),Z(this,"getFieldWarning",function(e){a.warningUnhooked();var t=rr(e),i=a.getFieldsError([t])[0];return i.warnings}),Z(this,"isFieldsTouched",function(){a.warningUnhooked();for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var o=t[0],s=t[1],l,u=!1;t.length===0?l=null:t.length===1?Array.isArray(o)?(l=o.map(rr),u=!1):(l=null,u=o):(l=o.map(rr),u=s);var c=a.getFieldEntities(!0),f=function(v){return v.isFieldTouched()};if(!l)return u?c.every(function(p){return f(p)||p.isList()}):c.some(f);var d=new ou;l.forEach(function(p){d.set(p,[])}),c.forEach(function(p){var v=p.getNamePath();l.forEach(function(y){y.every(function(m,g){return v[g]===m})&&d.update(y,function(m){return[].concat(st(m),[p])})})});var h=function(v){return v.some(f)},_=d.map(function(p){var v=p.value;return v});return u?_.every(h):_.some(h)}),Z(this,"isFieldTouched",function(e){return a.warningUnhooked(),a.isFieldsTouched([e])}),Z(this,"isFieldsValidating",function(e){a.warningUnhooked();var t=a.getFieldEntities();if(!e)return t.some(function(o){return o.isFieldValidating()});var i=e.map(rr);return t.some(function(o){var s=o.getNamePath();return Gu(i,s)&&o.isFieldValidating()})}),Z(this,"isFieldValidating",function(e){return a.warningUnhooked(),a.isFieldsValidating([e])}),Z(this,"resetWithFieldInitialValue",function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=new ou,i=a.getFieldEntities(!0);i.forEach(function(l){var u=l.props.initialValue,c=l.getNamePath();if(u!==void 0){var f=t.get(c)||new Set;f.add({entity:l,value:u}),t.set(c,f)}});var o=function(u){u.forEach(function(c){var f=c.props.initialValue;if(f!==void 0){var d=c.getNamePath(),h=a.getInitialValue(d);if(h!==void 0)Yr(!1,"Form already set 'initialValues' with path '".concat(d.join("."),"'. Field can not overwrite it."));else{var _=t.get(d);if(_&&_.size>1)Yr(!1,"Multiple Field with path '".concat(d.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(_){var p=a.getFieldValue(d),v=c.isListField();!v&&(!e.skipExist||p===void 0)&&a.updateStore($i(a.store,d,st(_)[0].value))}}}})},s;e.entities?s=e.entities:e.namePathList?(s=[],e.namePathList.forEach(function(l){var u=t.get(l);if(u){var c;(c=s).push.apply(c,st(st(u).map(function(f){return f.entity})))}})):s=i,o(s)}),Z(this,"resetFields",function(e){a.warningUnhooked();var t=a.store;if(!e){a.updateStore(Ru(a.initialValues)),a.resetWithFieldInitialValue(),a.notifyObservers(t,null,{type:"reset"}),a.notifyWatch();return}var i=e.map(rr);i.forEach(function(o){var s=a.getInitialValue(o);a.updateStore($i(a.store,o,s))}),a.resetWithFieldInitialValue({namePathList:i}),a.notifyObservers(t,i,{type:"reset"}),a.notifyWatch(i)}),Z(this,"setFields",function(e){a.warningUnhooked();var t=a.store,i=[];e.forEach(function(o){var s=o.name,l=Zt(o,BB),u=rr(s);i.push(u),"value"in l&&a.updateStore($i(a.store,u,l.value)),a.notifyObservers(t,[u],{type:"setField",data:o})}),a.notifyWatch(i)}),Z(this,"getFields",function(){var e=a.getFieldEntities(!0),t=e.map(function(i){var o=i.getNamePath(),s=i.getMeta(),l=ie(ie({},s),{},{name:o,value:a.getFieldValue(o)});return Object.defineProperty(l,"originRCField",{value:!0}),l});return t}),Z(this,"initEntityValue",function(e){var t=e.props.initialValue;if(t!==void 0){var i=e.getNamePath(),o=mo(a.store,i);o===void 0&&a.updateStore($i(a.store,i,t))}}),Z(this,"isMergedPreserve",function(e){var t=e!==void 0?e:a.preserve;return t!=null?t:!0}),Z(this,"registerField",function(e){a.fieldEntities.push(e);var t=e.getNamePath();if(a.notifyWatch([t]),e.props.initialValue!==void 0){var i=a.store;a.resetWithFieldInitialValue({entities:[e],skipExist:!0}),a.notifyObservers(i,[e.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(o,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(a.fieldEntities=a.fieldEntities.filter(function(f){return f!==e}),!a.isMergedPreserve(s)&&(!o||l.length>1)){var u=o?void 0:a.getInitialValue(t);if(t.length&&a.getFieldValue(t)!==u&&a.fieldEntities.every(function(f){return!fw(f.getNamePath(),t)})){var c=a.store;a.updateStore($i(c,t,u,!0)),a.notifyObservers(c,[t],{type:"remove"}),a.triggerDependenciesUpdate(c,t)}}a.notifyWatch([t])}}),Z(this,"dispatch",function(e){switch(e.type){case"updateValue":{var t=e.namePath,i=e.value;a.updateValue(t,i);break}case"validateField":{var o=e.namePath,s=e.triggerName;a.validateFields([o],{triggerName:s});break}}}),Z(this,"notifyObservers",function(e,t,i){if(a.subscribable){var o=ie(ie({},i),{},{store:a.getFieldsValue(!0)});a.getFieldEntities().forEach(function(s){var l=s.onStoreChange;l(e,t,o)})}else a.forceRootUpdate()}),Z(this,"triggerDependenciesUpdate",function(e,t){var i=a.getDependencyChildrenFields(t);return i.length&&a.validateFields(i),a.notifyObservers(e,i,{type:"dependenciesUpdate",relatedFields:[t].concat(st(i))}),i}),Z(this,"updateValue",function(e,t){var i=rr(e),o=a.store;a.updateStore($i(a.store,i,t)),a.notifyObservers(o,[i],{type:"valueUpdate",source:"internal"}),a.notifyWatch([i]);var s=a.triggerDependenciesUpdate(o,i),l=a.callbacks.onValuesChange;if(l){var u=q1(a.store,[i]);l(u,a.getFieldsValue())}a.triggerOnFieldsChange([i].concat(st(s)))}),Z(this,"setFieldsValue",function(e){a.warningUnhooked();var t=a.store;if(e){var i=Ru(a.store,e);a.updateStore(i)}a.notifyObservers(t,null,{type:"valueUpdate",source:"external"}),a.notifyWatch()}),Z(this,"setFieldValue",function(e,t){a.setFields([{name:e,value:t}])}),Z(this,"getDependencyChildrenFields",function(e){var t=new Set,i=[],o=new ou;a.getFieldEntities().forEach(function(l){var u=l.props.dependencies;(u||[]).forEach(function(c){var f=rr(c);o.update(f,function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return d.add(l),d})})});var s=function l(u){var c=o.get(u)||new Set;c.forEach(function(f){if(!t.has(f)){t.add(f);var d=f.getNamePath();f.isFieldDirty()&&d.length&&(i.push(d),l(d))}})};return s(e),i}),Z(this,"triggerOnFieldsChange",function(e,t){var i=a.callbacks.onFieldsChange;if(i){var o=a.getFields();if(t){var s=new ou;t.forEach(function(u){var c=u.name,f=u.errors;s.set(c,f)}),o.forEach(function(u){u.errors=s.get(u.name)||u.errors})}var l=o.filter(function(u){var c=u.name;return Gu(e,c)});l.length&&i(l,o)}}),Z(this,"validateFields",function(e,t){a.warningUnhooked();var i,o;Array.isArray(e)||typeof e=="string"||typeof t=="string"?(i=e,o=t):o=e;var s=!!i,l=s?i.map(rr):[],u=[],c=String(Date.now()),f=new Set,d=o||{},h=d.recursive,_=d.dirty;a.getFieldEntities(!0).forEach(function(m){if(s||l.push(m.getNamePath()),!(!m.props.rules||!m.props.rules.length)&&!(_&&!m.isFieldDirty())){var g=m.getNamePath();if(f.add(g.join(c)),!s||Gu(l,g,h)){var x=m.validateRules(ie({validateMessages:ie(ie({},cw),a.validateMessages)},o));u.push(x.then(function(){return{name:g,errors:[],warnings:[]}}).catch(function(b){var S,C=[],E=[];return(S=b.forEach)===null||S===void 0||S.call(b,function(T){var M=T.rule.warningOnly,L=T.errors;M?E.push.apply(E,st(L)):C.push.apply(C,st(L))}),C.length?Promise.reject({name:g,errors:C,warnings:E}):{name:g,errors:C,warnings:E}}))}}});var p=DB(u);a.lastValidatePromise=p,p.catch(function(m){return m}).then(function(m){var g=m.map(function(x){var b=x.name;return b});a.notifyObservers(a.store,g,{type:"validateFinish"}),a.triggerOnFieldsChange(g,m)});var v=p.then(function(){return a.lastValidatePromise===p?Promise.resolve(a.getFieldsValue(l)):Promise.reject([])}).catch(function(m){var g=m.filter(function(x){return x&&x.errors.length});return Promise.reject({values:a.getFieldsValue(l),errorFields:g,outOfDate:a.lastValidatePromise!==p})});v.catch(function(m){return m});var y=l.filter(function(m){return f.has(m.join(c))});return a.triggerOnFieldsChange(y),v}),Z(this,"submit",function(){a.warningUnhooked(),a.validateFields().then(function(e){var t=a.callbacks.onFinish;if(t)try{t(e)}catch(i){console.error(i)}}).catch(function(e){var t=a.callbacks.onFinishFailed;t&&t(e)})}),this.forceRootUpdate=r});function vw(n){var r=w.exports.useRef(),a=w.exports.useState({}),e=_e(a,2),t=e[1];if(!r.current)if(n)r.current=n;else{var i=function(){t({})},o=new kB(i);r.current=o.getForm()}return[r.current]}var zm=w.exports.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),VB=function(r){var a=r.validateMessages,e=r.onFormChange,t=r.onFormFinish,i=r.children,o=w.exports.useContext(zm),s=w.exports.useRef({});return w.exports.createElement(zm.Provider,{value:ie(ie({},o),{},{validateMessages:ie(ie({},o.validateMessages),a),triggerFormChange:function(u,c){e&&e(u,{changedFields:c,forms:s.current}),o.triggerFormChange(u,c)},triggerFormFinish:function(u,c){t&&t(u,{values:c,forms:s.current}),o.triggerFormFinish(u,c)},registerForm:function(u,c){u&&(s.current=ie(ie({},s.current),{},Z({},u,c))),o.registerForm(u,c)},unregisterForm:function(u){var c=ie({},s.current);delete c[u],s.current=c,o.unregisterForm(u)}})},i)},UB=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],zB=function(r,a){var e=r.name,t=r.initialValues,i=r.fields,o=r.form,s=r.preserve,l=r.children,u=r.component,c=u===void 0?"form":u,f=r.validateMessages,d=r.validateTrigger,h=d===void 0?"onChange":d,_=r.onValuesChange,p=r.onFieldsChange,v=r.onFinish,y=r.onFinishFailed,m=Zt(r,UB),g=w.exports.useContext(zm),x=vw(o),b=_e(x,1),S=b[0],C=S.getInternalHooks(Rl),E=C.useSubscribe,T=C.setInitialValues,M=C.setCallbacks,L=C.setValidateMessages,F=C.setPreserve,N=C.destroyForm;w.exports.useImperativeHandle(a,function(){return S}),w.exports.useEffect(function(){return g.registerForm(e,S),function(){g.unregisterForm(e)}},[g,S,e]),L(ie(ie({},g.validateMessages),f)),M({onValuesChange:_,onFieldsChange:function(V){if(g.triggerFormChange(e,V),p){for(var U=arguments.length,j=new Array(U>1?U-1:0),G=1;G<U;G++)j[G-1]=arguments[G];p.apply(void 0,[V].concat(j))}},onFinish:function(V){g.triggerFormFinish(e,V),v&&v(V)},onFinishFailed:y}),F(s);var I=w.exports.useRef(null);T(t,!I.current),I.current||(I.current=!0),w.exports.useEffect(function(){return N},[]);var O,P=typeof l=="function";if(P){var R=S.getFieldsValue(!0);O=l(R,S)}else O=l;E(!P);var A=w.exports.useRef();w.exports.useEffect(function(){IB(A.current||[],i||[])||S.setFields(i||[]),A.current=i},[i,S]);var D=w.exports.useMemo(function(){return ie(ie({},S),{},{validateTrigger:h})},[S,h]),B=w.exports.createElement(Vv.Provider,{value:null},w.exports.createElement(ac.Provider,{value:D},O));return c===!1?B:w.exports.createElement(c,St({},m,{onSubmit:function(V){V.preventDefault(),V.stopPropagation(),S.submit()},onReset:function(V){var U;V.preventDefault(),S.resetFields(),(U=m.onReset)===null||U===void 0||U.call(m,V)}}),B)};function eb(n){try{return JSON.stringify(n)}catch{return Math.random()}}function GB(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var e=r[0],t=r[1],i=t===void 0?{}:t,o=YD(i)?{form:i}:i,s=o.form,l=w.exports.useState(),u=_e(l,2),c=u[0],f=u[1],d=w.exports.useMemo(function(){return eb(c)},[c]),h=w.exports.useRef(d);h.current=d;var _=w.exports.useContext(ac),p=s||_,v=p&&p._init,y=rr(e),m=w.exports.useRef(y);return m.current=y,w.exports.useEffect(function(){if(!!v){var g=p.getFieldsValue,x=p.getInternalHooks,b=x(Rl),S=b.registerWatch,C=function(L,F){var N=o.preserve?F:L;return typeof e=="function"?e(N):mo(N,m.current)},E=S(function(M,L){var F=C(M,L),N=eb(F);h.current!==N&&(h.current=N,f(F))}),T=C(g(),g(!0));return c!==T&&f(T),E}},[v]),c}var HB=w.exports.forwardRef(zB),Id=HB;Id.FormProvider=VB;Id.Field=dw;Id.List=FB;Id.useForm=vw;Id.useWatch=GB;const jB=w.exports.createContext({}),WB=w.exports.createContext(void 0),$B=n=>({animationDuration:n,animationFillMode:"both"}),XB=n=>({animationDuration:n,animationFillMode:"both"}),Zy=function(n,r,a,e){const i=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${i}${n}-enter,
      ${i}${n}-appear
    `]:Object.assign(Object.assign({},$B(e)),{animationPlayState:"paused"}),[`${i}${n}-leave`]:Object.assign(Object.assign({},XB(e)),{animationPlayState:"paused"}),[`
      ${i}${n}-enter${n}-enter-active,
      ${i}${n}-appear${n}-appear-active
    `]:{animationName:r,animationPlayState:"running"},[`${i}${n}-leave${n}-leave-active`]:{animationName:a,animationPlayState:"running",pointerEvents:"none"}}},KB=new Sn("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),YB=new Sn("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),QB=new Sn("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),qB=new Sn("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),JB=new Sn("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),ZB=new Sn("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),e3=new Sn("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),t3=new Sn("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),n3={"move-up":{inKeyframes:e3,outKeyframes:t3},"move-down":{inKeyframes:KB,outKeyframes:YB},"move-left":{inKeyframes:QB,outKeyframes:qB},"move-right":{inKeyframes:JB,outKeyframes:ZB}},tb=(n,r)=>{const{antCls:a}=n,e=`${a}-${r}`,{inKeyframes:t,outKeyframes:i}=n3[r];return[Zy(e,t,i,n.motionDurationMid),{[`
        ${e}-enter,
        ${e}-appear
      `]:{opacity:0,animationTimingFunction:n.motionEaseOutCirc},[`${e}-leave`]:{animationTimingFunction:n.motionEaseInOutCirc}}]},pw=new Sn("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),_w=new Sn("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),gw=new Sn("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),mw=new Sn("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),r3=new Sn("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),a3=new Sn("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),i3=new Sn("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),o3=new Sn("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),s3={"slide-up":{inKeyframes:pw,outKeyframes:_w},"slide-down":{inKeyframes:gw,outKeyframes:mw},"slide-left":{inKeyframes:r3,outKeyframes:a3},"slide-right":{inKeyframes:i3,outKeyframes:o3}},Uv=(n,r)=>{const{antCls:a}=n,e=`${a}-${r}`,{inKeyframes:t,outKeyframes:i}=s3[r];return[Zy(e,t,i,n.motionDurationMid),{[`
      ${e}-enter,
      ${e}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:n.motionEaseOutQuint,["&-prepare"]:{transform:"scale(1)"}},[`${e}-leave`]:{animationTimingFunction:n.motionEaseInQuint}}]},l3=new Sn("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),u3=new Sn("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),nb=new Sn("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),rb=new Sn("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),c3=new Sn("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),f3=new Sn("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),d3=new Sn("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),h3=new Sn("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),v3=new Sn("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),p3=new Sn("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),_3=new Sn("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),g3=new Sn("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),m3={zoom:{inKeyframes:l3,outKeyframes:u3},"zoom-big":{inKeyframes:nb,outKeyframes:rb},"zoom-big-fast":{inKeyframes:nb,outKeyframes:rb},"zoom-left":{inKeyframes:d3,outKeyframes:h3},"zoom-right":{inKeyframes:v3,outKeyframes:p3},"zoom-up":{inKeyframes:c3,outKeyframes:f3},"zoom-down":{inKeyframes:_3,outKeyframes:g3}},yw=(n,r)=>{const{antCls:a}=n,e=`${a}-${r}`,{inKeyframes:t,outKeyframes:i}=m3[r];return[Zy(e,t,i,r==="zoom-big-fast"?n.motionDurationFast:n.motionDurationMid),{[`
        ${e}-enter,
        ${e}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:n.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${e}-leave`]:{animationTimingFunction:n.motionEaseInOutCirc}}]},y3=n=>({[n.componentCls]:{[`${n.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${n.motionDurationMid} ${n.motionEaseInOut},
        opacity ${n.motionDurationMid} ${n.motionEaseInOut} !important`}},[`${n.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${n.motionDurationMid} ${n.motionEaseInOut},
        opacity ${n.motionDurationMid} ${n.motionEaseInOut} !important`}}});var x3=y3;function S3(n){return r=>w.exports.createElement(wc,{theme:{token:{motion:!1,zIndexPopupBase:0}}},w.exports.createElement(n,Object.assign({},r)))}const b3=(n,r,a,e)=>S3(i=>{const{prefixCls:o,style:s}=i,l=w.exports.useRef(null),[u,c]=w.exports.useState(0),[f,d]=w.exports.useState(0),[h,_]=rs(!1,{value:i.open}),{getPrefixCls:p}=w.exports.useContext(Jr),v=p(r||"select",o);w.exports.useEffect(()=>{if(_(!0),typeof ResizeObserver!="undefined"){const g=new ResizeObserver(b=>{const S=b[0].target;c(S.offsetHeight+8),d(S.offsetWidth)}),x=setInterval(()=>{var b;const S=a?`.${a(v)}`:`.${v}-dropdown`,C=(b=l.current)===null||b===void 0?void 0:b.querySelector(S);C&&(clearInterval(x),g.observe(C))},10);return()=>{clearInterval(x),g.disconnect()}}},[]);let y=Object.assign(Object.assign({},i),{style:Object.assign(Object.assign({},s),{margin:0}),open:h,visible:h,getPopupContainer:()=>l.current});e&&(y=e(y));const m={paddingBottom:u,position:"relative",minWidth:f};return w.exports.createElement("div",{ref:l,style:m},w.exports.createElement(n,Object.assign({},y)))});var C3=b3,xw=function(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;var n=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(n==null?void 0:n.substr(0,4))},Jp=function(r){var a=r.className,e=r.customizeIcon,t=r.customizeIconProps,i=r.children,o=r.onMouseDown,s=r.onClick,l=typeof e=="function"?e(t):e;return w.exports.createElement("span",{className:a,onMouseDown:function(c){c.preventDefault(),o==null||o(c)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:s,"aria-hidden":!0},l!==void 0?l:w.exports.createElement("span",{className:mt(a.split(/\s+/).map(function(u){return"".concat(u,"-icon")}))},i))},E3=function(r,a,e,t,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,s=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,u=Wt.useMemo(function(){if(Qt(t)==="object")return t.clearIcon;if(i)return i},[t,i]),c=Wt.useMemo(function(){return!!(!o&&!!t&&(e.length||s)&&!(l==="combobox"&&s===""))},[t,o,e.length,s,l]);return{allowClear:c,clearIcon:Wt.createElement(Jp,{className:"".concat(r,"-clear"),onMouseDown:a,customizeIcon:u},"\xD7")}},Sw=w.exports.createContext(null);function T3(){return w.exports.useContext(Sw)}function R3(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,r=w.exports.useState(!1),a=_e(r,2),e=a[0],t=a[1],i=w.exports.useRef(null),o=function(){window.clearTimeout(i.current)};w.exports.useEffect(function(){return o},[]);var s=function(u,c){o(),i.current=window.setTimeout(function(){t(u),c&&c()},n)};return[e,s,o]}function bw(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,r=w.exports.useRef(null),a=w.exports.useRef(null);w.exports.useEffect(function(){return function(){window.clearTimeout(a.current)}},[]);function e(t){(t||r.current===null)&&(r.current=t),window.clearTimeout(a.current),a.current=window.setTimeout(function(){r.current=null},n)}return[function(){return r.current},e]}function A3(n,r,a,e){var t=w.exports.useRef(null);t.current={open:r,triggerOpen:a,customizedTrigger:e},w.exports.useEffect(function(){function i(o){var s;if(!((s=t.current)!==null&&s!==void 0&&s.customizedTrigger)){var l=o.target;l.shadowRoot&&o.composed&&(l=o.composedPath()[0]||l),t.current.open&&n().filter(function(u){return u}).every(function(u){return!u.contains(l)&&u!==l})&&t.current.triggerOpen(!1)}}return window.addEventListener("mousedown",i),function(){return window.removeEventListener("mousedown",i)}},[])}function w3(n){return![we.ESC,we.SHIFT,we.BACKSPACE,we.TAB,we.WIN_KEY,we.ALT,we.META,we.WIN_KEY_RIGHT,we.CTRL,we.SEMICOLON,we.EQUALS,we.CAPS_LOCK,we.CONTEXT_MENU,we.F1,we.F2,we.F3,we.F4,we.F5,we.F6,we.F7,we.F8,we.F9,we.F10,we.F11,we.F12].includes(n)}var P3=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],su=void 0;function M3(n,r){var a=n.prefixCls,e=n.invalidate,t=n.item,i=n.renderItem,o=n.responsive,s=n.responsiveDisabled,l=n.registerSize,u=n.itemKey,c=n.className,f=n.style,d=n.children,h=n.display,_=n.order,p=n.component,v=p===void 0?"div":p,y=Zt(n,P3),m=o&&!h;function g(E){l(u,E)}w.exports.useEffect(function(){return function(){g(null)}},[]);var x=i&&t!==su?i(t):d,b;e||(b={opacity:m?0:1,height:m?0:su,overflowY:m?"hidden":su,order:o?_:su,pointerEvents:m?"none":su,position:m?"absolute":su});var S={};m&&(S["aria-hidden"]=!0);var C=w.exports.createElement(v,St({className:mt(!e&&a,c),style:ie(ie({},b),f)},S,y,{ref:r}),x);return o&&(C=w.exports.createElement(Ql,{onResize:function(T){var M=T.offsetWidth;g(M)},disabled:s},C)),C}var Of=w.exports.forwardRef(M3);Of.displayName="Item";function O3(n){if(typeof MessageChannel=="undefined")gr(n);else{var r=new MessageChannel;r.port1.onmessage=function(){return n()},r.port2.postMessage(void 0)}}function I3(){var n=w.exports.useRef(null),r=function(e){n.current||(n.current=[],O3(function(){kl.exports.unstable_batchedUpdates(function(){n.current.forEach(function(t){t()}),n.current=null})})),n.current.push(e)};return r}function Qc(n,r){var a=w.exports.useState(r),e=_e(a,2),t=e[0],i=e[1],o=Xa(function(s){n(function(){i(s)})});return[t,o]}var zv=Wt.createContext(null),L3=["component"],N3=["className"],F3=["className"],D3=function(r,a){var e=w.exports.useContext(zv);if(!e){var t=r.component,i=t===void 0?"div":t,o=Zt(r,L3);return w.exports.createElement(i,St({},o,{ref:a}))}var s=e.className,l=Zt(e,N3),u=r.className,c=Zt(r,F3);return w.exports.createElement(zv.Provider,{value:null},w.exports.createElement(Of,St({ref:a,className:mt(s,u)},l,c)))},Cw=w.exports.forwardRef(D3);Cw.displayName="RawItem";var B3=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],Ew="responsive",Tw="invalidate";function k3(n){return"+ ".concat(n.length," ...")}function V3(n,r){var a=n.prefixCls,e=a===void 0?"rc-overflow":a,t=n.data,i=t===void 0?[]:t,o=n.renderItem,s=n.renderRawItem,l=n.itemKey,u=n.itemWidth,c=u===void 0?10:u,f=n.ssr,d=n.style,h=n.className,_=n.maxCount,p=n.renderRest,v=n.renderRawRest,y=n.suffix,m=n.component,g=m===void 0?"div":m,x=n.itemComponent,b=n.onVisibleChange,S=Zt(n,B3),C=f==="full",E=I3(),T=Qc(E,null),M=_e(T,2),L=M[0],F=M[1],N=L||0,I=Qc(E,new Map),O=_e(I,2),P=O[0],R=O[1],A=Qc(E,0),D=_e(A,2),B=D[0],k=D[1],V=Qc(E,0),U=_e(V,2),j=U[0],G=U[1],$=Qc(E,0),W=_e($,2),K=W[0],q=W[1],Y=w.exports.useState(null),Q=_e(Y,2),re=Q[0],ue=Q[1],oe=w.exports.useState(null),ee=_e(oe,2),xe=ee[0],Te=ee[1],Ce=w.exports.useMemo(function(){return xe===null&&C?Number.MAX_SAFE_INTEGER:xe||0},[xe,L]),pe=w.exports.useState(!1),J=_e(pe,2),ae=J[0],ne=J[1],ge="".concat(e,"-item"),se=Math.max(B,j),Re=_===Ew,de=i.length&&Re,Pe=_===Tw,De=de||typeof _=="number"&&i.length>_,Ke=w.exports.useMemo(function(){var et=i;return de?L===null&&C?et=i:et=i.slice(0,Math.min(i.length,N/c)):typeof _=="number"&&(et=i.slice(0,_)),et},[i,c,L,_,de]),Be=w.exports.useMemo(function(){return de?i.slice(Ce+1):i.slice(Ke.length)},[i,Ke,de,Ce]),He=w.exports.useCallback(function(et,Ne){var ct;return typeof l=="function"?l(et):(ct=l&&(et==null?void 0:et[l]))!==null&&ct!==void 0?ct:Ne},[l]),We=w.exports.useCallback(o||function(et){return et},[o]);function yt(et,Ne,ct){xe===et&&(Ne===void 0||Ne===re)||(Te(et),ct||(ne(et<i.length-1),b==null||b(et)),Ne!==void 0&&ue(Ne))}function bt(et,Ne){F(Ne.clientWidth)}function Mt(et,Ne){R(function(ct){var Bt=new Map(ct);return Ne===null?Bt.delete(et):Bt.set(et,Ne),Bt})}function ce(et,Ne){G(Ne),k(j)}function le(et,Ne){q(Ne)}function he(et){return P.get(He(Ke[et],et))}Qn(function(){if(N&&typeof se=="number"&&Ke){var et=K,Ne=Ke.length,ct=Ne-1;if(!Ne){yt(0,null);return}for(var Bt=0;Bt<Ne;Bt+=1){var Oe=he(Bt);if(C&&(Oe=Oe||0),Oe===void 0){yt(Bt-1,void 0,!0);break}if(et+=Oe,ct===0&&et<=N||Bt===ct-1&&et+he(ct)<=N){yt(ct,null);break}else if(et+se>N){yt(Bt-1,et-Oe-K+j);break}}y&&he(0)+K>N&&ue(null)}},[N,P,j,K,He,Ke]);var Se=ae&&!!Be.length,me={};re!==null&&de&&(me={position:"absolute",left:re,top:0});var Le={prefixCls:ge,responsive:de,component:x,invalidate:Pe},Qe=s?function(et,Ne){var ct=He(et,Ne);return w.exports.createElement(zv.Provider,{key:ct,value:ie(ie({},Le),{},{order:Ne,item:et,itemKey:ct,registerSize:Mt,display:Ne<=Ce})},s(et,Ne))}:function(et,Ne){var ct=He(et,Ne);return w.exports.createElement(Of,St({},Le,{order:Ne,key:ct,item:et,renderItem:We,itemKey:ct,registerSize:Mt,display:Ne<=Ce}))},at,lt={order:Se?Ce:Number.MAX_SAFE_INTEGER,className:"".concat(ge,"-rest"),registerSize:ce,display:Se};if(v)v&&(at=w.exports.createElement(zv.Provider,{value:ie(ie({},Le),lt)},v(Be)));else{var ze=p||k3;at=w.exports.createElement(Of,St({},Le,lt),typeof ze=="function"?ze(Be):ze)}var Rt=w.exports.createElement(g,St({className:mt(!Pe&&e,h),style:d,ref:r},S),Ke.map(Qe),De?at:null,y&&w.exports.createElement(Of,St({},Le,{responsive:Re,responsiveDisabled:!de,order:Ce,className:"".concat(ge,"-suffix"),registerSize:le,display:!0,style:me}),y));return Re&&(Rt=w.exports.createElement(Ql,{onResize:bt,disabled:!de},Rt)),Rt}var Co=w.exports.forwardRef(V3);Co.displayName="Overflow";Co.Item=Cw;Co.RESPONSIVE=Ew;Co.INVALIDATE=Tw;var U3=function(r,a){var e,t=r.prefixCls,i=r.id,o=r.inputElement,s=r.disabled,l=r.tabIndex,u=r.autoFocus,c=r.autoComplete,f=r.editable,d=r.activeDescendantId,h=r.value,_=r.maxLength,p=r.onKeyDown,v=r.onMouseDown,y=r.onChange,m=r.onPaste,g=r.onCompositionStart,x=r.onCompositionEnd,b=r.open,S=r.attrs,C=o||w.exports.createElement("input",null),E=C,T=E.ref,M=E.props,L=M.onKeyDown,F=M.onChange,N=M.onMouseDown,I=M.onCompositionStart,O=M.onCompositionEnd,P=M.style;return"maxLength"in C.props,C=w.exports.cloneElement(C,ie(ie(ie({type:"search"},M),{},{id:i,ref:Dy(a,T),disabled:s,tabIndex:l,autoComplete:c||"off",autoFocus:u,className:mt("".concat(t,"-selection-search-input"),(e=C)===null||e===void 0||(e=e.props)===null||e===void 0?void 0:e.className),role:"combobox","aria-expanded":b||!1,"aria-haspopup":"listbox","aria-owns":"".concat(i,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(i,"_list"),"aria-activedescendant":b?d:void 0},S),{},{value:f?h:"",maxLength:_,readOnly:!f,unselectable:f?null:"on",style:ie(ie({},P),{},{opacity:f?null:0}),onKeyDown:function(A){p(A),L&&L(A)},onMouseDown:function(A){v(A),N&&N(A)},onChange:function(A){y(A),F&&F(A)},onCompositionStart:function(A){g(A),I&&I(A)},onCompositionEnd:function(A){x(A),O&&O(A)},onPaste:m})),C},Rw=w.exports.forwardRef(U3);function Aw(n){return Array.isArray(n)?n:n!==void 0?[n]:[]}var z3=typeof window!="undefined"&&window.document&&window.document.documentElement,G3=z3;function H3(n){return n!=null}function j3(n){return!n&&n!==0}function ab(n){return["string","number"].includes(Qt(n))}function ww(n){var r=void 0;return n&&(ab(n.title)?r=n.title.toString():ab(n.label)&&(r=n.label.toString())),r}function W3(n,r){G3?w.exports.useLayoutEffect(n,r):w.exports.useEffect(n,r)}function $3(n){var r;return(r=n.key)!==null&&r!==void 0?r:n.value}var ib=function(r){r.preventDefault(),r.stopPropagation()},X3=function(r){var a=r.id,e=r.prefixCls,t=r.values,i=r.open,o=r.searchValue,s=r.autoClearSearchValue,l=r.inputRef,u=r.placeholder,c=r.disabled,f=r.mode,d=r.showSearch,h=r.autoFocus,_=r.autoComplete,p=r.activeDescendantId,v=r.tabIndex,y=r.removeIcon,m=r.maxTagCount,g=r.maxTagTextLength,x=r.maxTagPlaceholder,b=x===void 0?function(ue){return"+ ".concat(ue.length," ...")}:x,S=r.tagRender,C=r.onToggleOpen,E=r.onRemove,T=r.onInputChange,M=r.onInputPaste,L=r.onInputKeyDown,F=r.onInputMouseDown,N=r.onInputCompositionStart,I=r.onInputCompositionEnd,O=w.exports.useRef(null),P=w.exports.useState(0),R=_e(P,2),A=R[0],D=R[1],B=w.exports.useState(!1),k=_e(B,2),V=k[0],U=k[1],j="".concat(e,"-selection"),G=i||f==="multiple"&&s===!1||f==="tags"?o:"",$=f==="tags"||f==="multiple"&&s===!1||d&&(i||V);W3(function(){D(O.current.scrollWidth)},[G]);var W=function(oe,ee,xe,Te,Ce){return w.exports.createElement("span",{title:ww(oe),className:mt("".concat(j,"-item"),Z({},"".concat(j,"-item-disabled"),xe))},w.exports.createElement("span",{className:"".concat(j,"-item-content")},ee),Te&&w.exports.createElement(Jp,{className:"".concat(j,"-item-remove"),onMouseDown:ib,onClick:Ce,customizeIcon:y},"\xD7"))},K=function(oe,ee,xe,Te,Ce){var pe=function(ae){ib(ae),C(!i)};return w.exports.createElement("span",{onMouseDown:pe},S({label:ee,value:oe,disabled:xe,closable:Te,onClose:Ce}))},q=function(oe){var ee=oe.disabled,xe=oe.label,Te=oe.value,Ce=!c&&!ee,pe=xe;if(typeof g=="number"&&(typeof xe=="string"||typeof xe=="number")){var J=String(pe);J.length>g&&(pe="".concat(J.slice(0,g),"..."))}var ae=function(ge){ge&&ge.stopPropagation(),E(oe)};return typeof S=="function"?K(Te,pe,ee,Ce,ae):W(oe,pe,ee,Ce,ae)},Y=function(oe){var ee=typeof b=="function"?b(oe):b;return W({title:ee},ee,!1)},Q=w.exports.createElement("div",{className:"".concat(j,"-search"),style:{width:A},onFocus:function(){U(!0)},onBlur:function(){U(!1)}},w.exports.createElement(Rw,{ref:l,open:i,prefixCls:e,id:a,inputElement:null,disabled:c,autoFocus:h,autoComplete:_,editable:$,activeDescendantId:p,value:G,onKeyDown:L,onMouseDown:F,onChange:T,onPaste:M,onCompositionStart:N,onCompositionEnd:I,tabIndex:v,attrs:kv(r,!0)}),w.exports.createElement("span",{ref:O,className:"".concat(j,"-search-mirror"),"aria-hidden":!0},G,"\xA0")),re=w.exports.createElement(Co,{prefixCls:"".concat(j,"-overflow"),data:t,renderItem:q,renderRest:Y,suffix:Q,itemKey:$3,maxCount:m});return w.exports.createElement(w.exports.Fragment,null,re,!t.length&&!G&&w.exports.createElement("span",{className:"".concat(j,"-placeholder")},u))},K3=function(r){var a=r.inputElement,e=r.prefixCls,t=r.id,i=r.inputRef,o=r.disabled,s=r.autoFocus,l=r.autoComplete,u=r.activeDescendantId,c=r.mode,f=r.open,d=r.values,h=r.placeholder,_=r.tabIndex,p=r.showSearch,v=r.searchValue,y=r.activeValue,m=r.maxLength,g=r.onInputKeyDown,x=r.onInputMouseDown,b=r.onInputChange,S=r.onInputPaste,C=r.onInputCompositionStart,E=r.onInputCompositionEnd,T=r.title,M=w.exports.useState(!1),L=_e(M,2),F=L[0],N=L[1],I=c==="combobox",O=I||p,P=d[0],R=v||"";I&&y&&!F&&(R=y),w.exports.useEffect(function(){I&&N(!1)},[I,y]);var A=c!=="combobox"&&!f&&!p?!1:!!R,D=T===void 0?ww(P):T,B=w.exports.useMemo(function(){return P?null:w.exports.createElement("span",{className:"".concat(e,"-selection-placeholder"),style:A?{visibility:"hidden"}:void 0},h)},[P,A,h,e]);return w.exports.createElement(w.exports.Fragment,null,w.exports.createElement("span",{className:"".concat(e,"-selection-search")},w.exports.createElement(Rw,{ref:i,prefixCls:e,id:t,open:f,inputElement:a,disabled:o,autoFocus:s,autoComplete:l,editable:O,activeDescendantId:u,value:R,onKeyDown:g,onMouseDown:x,onChange:function(V){N(!0),b(V)},onPaste:S,onCompositionStart:C,onCompositionEnd:E,tabIndex:_,attrs:kv(r,!0),maxLength:I?m:void 0})),!I&&P?w.exports.createElement("span",{className:"".concat(e,"-selection-item"),title:D,style:A?{visibility:"hidden"}:void 0},P.label):null,B)},Y3=function(r,a){var e=w.exports.useRef(null),t=w.exports.useRef(!1),i=r.prefixCls,o=r.open,s=r.mode,l=r.showSearch,u=r.tokenWithEnter,c=r.autoClearSearchValue,f=r.onSearch,d=r.onSearchSubmit,h=r.onToggleOpen,_=r.onInputKeyDown,p=r.domRef;w.exports.useImperativeHandle(a,function(){return{focus:function(R){e.current.focus(R)},blur:function(){e.current.blur()}}});var v=bw(0),y=_e(v,2),m=y[0],g=y[1],x=function(R){var A=R.which;(A===we.UP||A===we.DOWN)&&R.preventDefault(),_&&_(R),A===we.ENTER&&s==="tags"&&!t.current&&!o&&(d==null||d(R.target.value)),w3(A)&&h(!0)},b=function(){g(!0)},S=w.exports.useRef(null),C=function(R){f(R,!0,t.current)!==!1&&h(!0)},E=function(){t.current=!0},T=function(R){t.current=!1,s!=="combobox"&&C(R.target.value)},M=function(R){var A=R.target.value;if(u&&S.current&&/[\r\n]/.test(S.current)){var D=S.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");A=A.replace(D,S.current)}S.current=null,C(A)},L=function(R){var A=R.clipboardData,D=A==null?void 0:A.getData("text");S.current=D||""},F=function(R){var A=R.target;if(A!==e.current){var D=document.body.style.msTouchAction!==void 0;D?setTimeout(function(){e.current.focus()}):e.current.focus()}},N=function(R){var A=m();R.target!==e.current&&!A&&s!=="combobox"&&R.preventDefault(),(s!=="combobox"&&(!l||!A)||!o)&&(o&&c!==!1&&f("",!0,!1),h())},I={inputRef:e,onInputKeyDown:x,onInputMouseDown:b,onInputChange:M,onInputPaste:L,onInputCompositionStart:E,onInputCompositionEnd:T},O=s==="multiple"||s==="tags"?w.exports.createElement(X3,St({},r,I)):w.exports.createElement(K3,St({},r,I));return w.exports.createElement("div",{ref:p,className:"".concat(i,"-selector"),onClick:F,onMouseDown:N},O)},Q3=w.exports.forwardRef(Y3);function q3(n){var r=n.prefixCls,a=n.align,e=n.arrow,t=n.arrowPos,i=e||{},o=i.className,s=i.content,l=t.x,u=l===void 0?0:l,c=t.y,f=c===void 0?0:c,d=w.exports.useRef();if(!a||!a.points)return null;var h={position:"absolute"};if(a.autoArrow!==!1){var _=a.points[0],p=a.points[1],v=_[0],y=_[1],m=p[0],g=p[1];v===m||!["t","b"].includes(v)?h.top=f:v==="t"?h.top=0:h.bottom=0,y===g||!["l","r"].includes(y)?h.left=u:y==="l"?h.left=0:h.right=0}return w.exports.createElement("div",{ref:d,className:mt("".concat(r,"-arrow"),o),style:h},s)}function J3(n){var r=n.prefixCls,a=n.open,e=n.zIndex,t=n.mask,i=n.motion;return t?w.exports.createElement(Kp,St({},i,{motionAppear:!0,visible:a,removeOnLeave:!0}),function(o){var s=o.className;return w.exports.createElement("div",{style:{zIndex:e},className:mt("".concat(r,"-mask"),s)})}):null}var Z3=w.exports.memo(function(n){var r=n.children;return r},function(n,r){return r.cache}),ek=w.exports.forwardRef(function(n,r){var a=n.popup,e=n.className,t=n.prefixCls,i=n.style,o=n.target,s=n.onVisibleChanged,l=n.open,u=n.keepDom,c=n.fresh,f=n.onClick,d=n.mask,h=n.arrow,_=n.arrowPos,p=n.align,v=n.motion,y=n.maskMotion,m=n.forceRender,g=n.getPopupContainer,x=n.autoDestroy,b=n.portal,S=n.zIndex,C=n.onMouseEnter,E=n.onMouseLeave,T=n.onPointerEnter,M=n.ready,L=n.offsetX,F=n.offsetY,N=n.offsetR,I=n.offsetB,O=n.onAlign,P=n.onPrepare,R=n.stretch,A=n.targetWidth,D=n.targetHeight,B=typeof a=="function"?a():a,k=l||u,V=(g==null?void 0:g.length)>0,U=w.exports.useState(!g||!V),j=_e(U,2),G=j[0],$=j[1];if(Qn(function(){!G&&V&&o&&$(!0)},[G,V,o]),!G)return null;var W="auto",K={left:"-1000vw",top:"-1000vh",right:W,bottom:W};if(M||!l){var q,Y=p.points,Q=p.dynamicInset||((q=p._experimental)===null||q===void 0?void 0:q.dynamicInset),re=Q&&Y[0][1]==="r",ue=Q&&Y[0][0]==="b";re?(K.right=N,K.left=W):(K.left=L,K.right=W),ue?(K.bottom=I,K.top=W):(K.top=F,K.bottom=W)}var oe={};return R&&(R.includes("height")&&D?oe.height=D:R.includes("minHeight")&&D&&(oe.minHeight=D),R.includes("width")&&A?oe.width=A:R.includes("minWidth")&&A&&(oe.minWidth=A)),l||(oe.pointerEvents="none"),w.exports.createElement(b,{open:m||k,getContainer:g&&function(){return g(o)},autoDestroy:x},w.exports.createElement(J3,{prefixCls:t,open:l,zIndex:S,mask:d,motion:y}),w.exports.createElement(Ql,{onResize:O,disabled:!l},function(ee){return w.exports.createElement(Kp,St({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:m,leavedClassName:"".concat(t,"-hidden")},v,{onAppearPrepare:P,onEnterPrepare:P,visible:l,onVisibleChanged:function(Te){var Ce;v==null||(Ce=v.onVisibleChanged)===null||Ce===void 0||Ce.call(v,Te),s(Te)}}),function(xe,Te){var Ce=xe.className,pe=xe.style,J=mt(t,Ce,e);return w.exports.createElement("div",{ref:Dy(ee,r,Te),className:J,style:ie(ie(ie(ie({"--arrow-x":"".concat(_.x||0,"px"),"--arrow-y":"".concat(_.y||0,"px")},K),oe),pe),{},{boxSizing:"border-box",zIndex:S},i),onMouseEnter:C,onMouseLeave:E,onPointerEnter:T,onClick:f},h&&w.exports.createElement(q3,{prefixCls:t,arrow:h,arrowPos:_,align:p}),w.exports.createElement(Z3,{cache:!l&&!c},B))})}))}),tk=w.exports.forwardRef(function(n,r){var a=n.children,e=n.getTriggerDOMNode,t=Up(a),i=w.exports.useCallback(function(s){Fy(r,e?e(s):s)},[e]),o=Td(i,a.ref);return t?w.exports.cloneElement(a,{ref:o}):a}),ob=w.exports.createContext(null);function sb(n){return n?Array.isArray(n)?n:[n]:[]}function nk(n,r,a,e){return w.exports.useMemo(function(){var t=sb(a!=null?a:r),i=sb(e!=null?e:r),o=new Set(t),s=new Set(i);return n&&(o.has("hover")&&(o.delete("hover"),o.add("click")),s.has("hover")&&(s.delete("hover"),s.add("click"))),[o,s]},[n,r,a,e])}function rk(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;return a?n[0]===r[0]:n[0]===r[0]&&n[1]===r[1]}function ak(n,r,a,e){for(var t=a.points,i=Object.keys(n),o=0;o<i.length;o+=1){var s,l=i[o];if(rk((s=n[l])===null||s===void 0?void 0:s.points,t,e))return"".concat(r,"-placement-").concat(l)}return""}function lb(n,r,a,e){return r||(a?{motionName:"".concat(n,"-").concat(a)}:e?{motionName:e}:null)}function Ld(n){return n.ownerDocument.defaultView}function Gm(n){for(var r=[],a=n==null?void 0:n.parentElement,e=["hidden","scroll","clip","auto"];a;){var t=Ld(a).getComputedStyle(a),i=t.overflowX,o=t.overflowY,s=t.overflow;[i,o,s].some(function(l){return e.includes(l)})&&r.push(a),a=a.parentElement}return r}function ad(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(n)?r:n}function qc(n){return ad(parseFloat(n),0)}function ub(n,r){var a=ie({},n);return(r||[]).forEach(function(e){if(!(e instanceof HTMLBodyElement||e instanceof HTMLHtmlElement)){var t=Ld(e).getComputedStyle(e),i=t.overflow,o=t.overflowClipMargin,s=t.borderTopWidth,l=t.borderBottomWidth,u=t.borderLeftWidth,c=t.borderRightWidth,f=e.getBoundingClientRect(),d=e.offsetHeight,h=e.clientHeight,_=e.offsetWidth,p=e.clientWidth,v=qc(s),y=qc(l),m=qc(u),g=qc(c),x=ad(Math.round(f.width/_*1e3)/1e3),b=ad(Math.round(f.height/d*1e3)/1e3),S=(_-p-m-g)*x,C=(d-h-v-y)*b,E=v*b,T=y*b,M=m*x,L=g*x,F=0,N=0;if(i==="clip"){var I=qc(o);F=I*x,N=I*b}var O=f.x+M-F,P=f.y+E-N,R=O+f.width+2*F-M-L-S,A=P+f.height+2*N-E-T-C;a.left=Math.max(a.left,O),a.top=Math.max(a.top,P),a.right=Math.min(a.right,R),a.bottom=Math.min(a.bottom,A)}}),a}function cb(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a="".concat(r),e=a.match(/^(.*)\%$/);return e?n*(parseFloat(e[1])/100):parseFloat(a)}function fb(n,r){var a=r||[],e=_e(a,2),t=e[0],i=e[1];return[cb(n.width,t),cb(n.height,i)]}function db(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[n[0],n[1]]}function lu(n,r){var a=r[0],e=r[1],t,i;return a==="t"?i=n.y:a==="b"?i=n.y+n.height:i=n.y+n.height/2,e==="l"?t=n.x:e==="r"?t=n.x+n.width:t=n.x+n.width/2,{x:t,y:i}}function Es(n,r){var a={t:"b",b:"t",l:"r",r:"l"};return n.map(function(e,t){return t===r?a[e]||"c":e}).join("")}function ik(n,r,a,e,t,i,o){var s=w.exports.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:t[e]||{}}),l=_e(s,2),u=l[0],c=l[1],f=w.exports.useRef(0),d=w.exports.useMemo(function(){return r?Gm(r):[]},[r]),h=w.exports.useRef({}),_=function(){h.current={}};n||_();var p=Xa(function(){if(r&&a&&n){let Ua=function($d,ul){var Cs=arguments.length>2&&arguments[2]!==void 0?arguments[2]:J,Fc=B.x+$d,nu=B.y+ul,Xd=Fc+q,y_=nu+K,x_=Math.max(Fc,Cs.left),S_=Math.max(nu,Cs.top),b_=Math.min(Xd,Cs.right),ot=Math.min(y_,Cs.bottom);return Math.max(0,(b_-x_)*(ot-S_))},uo=function(){dn=B.y+ze,On=dn+K,At=B.x+lt,Cn=At+q};var r2=Ua,n2=uo,m,g,x=r,b=x.ownerDocument,S=Ld(x),C=S.getComputedStyle(x),E=C.width,T=C.height,M=C.position,L=x.style.left,F=x.style.top,N=x.style.right,I=x.style.bottom,O=x.style.overflow,P=ie(ie({},t[e]),i),R=b.createElement("div");(m=x.parentElement)===null||m===void 0||m.appendChild(R),R.style.left="".concat(x.offsetLeft,"px"),R.style.top="".concat(x.offsetTop,"px"),R.style.position=M,R.style.height="".concat(x.offsetHeight,"px"),R.style.width="".concat(x.offsetWidth,"px"),x.style.left="0",x.style.top="0",x.style.right="auto",x.style.bottom="auto",x.style.overflow="hidden";var A;if(Array.isArray(a))A={x:a[0],y:a[1],width:0,height:0};else{var D=a.getBoundingClientRect();A={x:D.x,y:D.y,width:D.width,height:D.height}}var B=x.getBoundingClientRect(),k=b.documentElement,V=k.clientWidth,U=k.clientHeight,j=k.scrollWidth,G=k.scrollHeight,$=k.scrollTop,W=k.scrollLeft,K=B.height,q=B.width,Y=A.height,Q=A.width,re={left:0,top:0,right:V,bottom:U},ue={left:-W,top:-$,right:j-W,bottom:G-$},oe=P.htmlRegion,ee="visible",xe="visibleFirst";oe!=="scroll"&&oe!==xe&&(oe=ee);var Te=oe===xe,Ce=ub(ue,d),pe=ub(re,d),J=oe===ee?pe:Ce,ae=Te?pe:J;x.style.left="auto",x.style.top="auto",x.style.right="0",x.style.bottom="0";var ne=x.getBoundingClientRect();x.style.left=L,x.style.top=F,x.style.right=N,x.style.bottom=I,x.style.overflow=O,(g=x.parentElement)===null||g===void 0||g.removeChild(R);var ge=ad(Math.round(q/parseFloat(E)*1e3)/1e3),se=ad(Math.round(K/parseFloat(T)*1e3)/1e3);if(ge===0||se===0||Mv(a)&&!iw(a))return;var Re=P.offset,de=P.targetOffset,Pe=fb(B,Re),De=_e(Pe,2),Ke=De[0],Be=De[1],He=fb(A,de),We=_e(He,2),yt=We[0],bt=We[1];A.x-=yt,A.y-=bt;var Mt=P.points||[],ce=_e(Mt,2),le=ce[0],he=ce[1],Se=db(he),me=db(le),Le=lu(A,Se),Qe=lu(B,me),at=ie({},P),lt=Le.x-Qe.x+Ke,ze=Le.y-Qe.y+Be,Rt=Ua(lt,ze),et=Ua(lt,ze,pe),Ne=lu(A,["t","l"]),ct=lu(B,["t","l"]),Bt=lu(A,["b","r"]),Oe=lu(B,["b","r"]),Ye=P.overflow||{},Fe=Ye.adjustX,Ve=Ye.adjustY,Ee=Ye.shiftX,tt=Ye.shiftY,gn=function(ul){return typeof ul=="boolean"?ul:ul>=0},dn,On,At,Cn;uo();var dt=gn(Ve),ft=me[0]===Se[0];if(dt&&me[0]==="t"&&(On>ae.bottom||h.current.bt)){var Ft=ze;ft?Ft-=K-Y:Ft=Ne.y-Oe.y-Be;var on=Ua(lt,Ft),En=Ua(lt,Ft,pe);on>Rt||on===Rt&&(!Te||En>=et)?(h.current.bt=!0,ze=Ft,Be=-Be,at.points=[Es(me,0),Es(Se,0)]):h.current.bt=!1}if(dt&&me[0]==="b"&&(dn<ae.top||h.current.tb)){var Sa=ze;ft?Sa+=K-Y:Sa=Bt.y-ct.y-Be;var tn=Ua(lt,Sa),Ni=Ua(lt,Sa,pe);tn>Rt||tn===Rt&&(!Te||Ni>=et)?(h.current.tb=!0,ze=Sa,Be=-Be,at.points=[Es(me,0),Es(Se,0)]):h.current.tb=!1}var lo=gn(Fe),Fi=me[1]===Se[1];if(lo&&me[1]==="l"&&(Cn>ae.right||h.current.rl)){var aa=lt;Fi?aa-=q-Q:aa=Ne.x-Oe.x-Ke;var No=Ua(aa,ze),Di=Ua(aa,ze,pe);No>Rt||No===Rt&&(!Te||Di>=et)?(h.current.rl=!0,lt=aa,Ke=-Ke,at.points=[Es(me,1),Es(Se,1)]):h.current.rl=!1}if(lo&&me[1]==="r"&&(At<ae.left||h.current.lr)){var Bi=lt;Fi?Bi+=q-Q:Bi=Bt.x-ct.x-Ke;var Fo=Ua(Bi,ze),Ss=Ua(Bi,ze,pe);Fo>Rt||Fo===Rt&&(!Te||Ss>=et)?(h.current.lr=!0,lt=Bi,Ke=-Ke,at.points=[Es(me,1),Es(Se,1)]):h.current.lr=!1}uo();var ia=Ee===!0?0:Ee;typeof ia=="number"&&(At<pe.left&&(lt-=At-pe.left-Ke,A.x+Q<pe.left+ia&&(lt+=A.x-pe.left+Q-ia)),Cn>pe.right&&(lt-=Cn-pe.right-Ke,A.x>pe.right-ia&&(lt+=A.x-pe.right+ia)));var ba=tt===!0?0:tt;typeof ba=="number"&&(dn<pe.top&&(ze-=dn-pe.top-Be,A.y+Y<pe.top+ba&&(ze+=A.y-pe.top+Y-ba)),On>pe.bottom&&(ze-=On-pe.bottom-Be,A.y>pe.bottom-ba&&(ze+=A.y-pe.bottom+ba)));var Do=B.x+lt,bs=Do+q,li=B.y+ze,ki=li+K,cn=A.x,$t=cn+Q,qe=A.y,ht=qe+Y,Jt=Math.max(Do,cn),Vn=Math.min(bs,$t),pn=(Jt+Vn)/2,tr=pn-Do,Tr=Math.max(li,qe),oa=Math.min(ki,ht),dr=(Tr+oa)/2,Ca=dr-li;o==null||o(r,at);var Ea=ne.right-B.x-(lt+B.width),Bo=ne.bottom-B.y-(ze+B.height);c({ready:!0,offsetX:lt/ge,offsetY:ze/se,offsetR:Ea/ge,offsetB:Bo/se,arrowX:tr/ge,arrowY:Ca/se,scaleX:ge,scaleY:se,align:at})}}),v=function(){f.current+=1;var g=f.current;Promise.resolve().then(function(){f.current===g&&p()})},y=function(){c(function(g){return ie(ie({},g),{},{ready:!1})})};return Qn(y,[e]),Qn(function(){n||y()},[n]),[u.ready,u.offsetX,u.offsetY,u.offsetR,u.offsetB,u.arrowX,u.arrowY,u.scaleX,u.scaleY,u.align,v]}function ok(n,r,a,e,t){Qn(function(){if(n&&r&&a){let d=function(){e(),t()};var f=d,i=r,o=a,s=Gm(i),l=Gm(o),u=Ld(o),c=new Set([u].concat(st(s),st(l)));return c.forEach(function(h){h.addEventListener("scroll",d,{passive:!0})}),u.addEventListener("resize",d,{passive:!0}),e(),function(){c.forEach(function(h){h.removeEventListener("scroll",d),u.removeEventListener("resize",d)})}}},[n,r,a])}function sk(n,r,a,e,t,i,o,s){var l=w.exports.useRef(n);l.current=n,w.exports.useEffect(function(){if(r&&e&&(!t||i)){var u=function(h){var _=h.target;l.current&&!o(_)&&s(!1)},c=Ld(e);c.addEventListener("mousedown",u,!0),c.addEventListener("contextmenu",u,!0);var f=Bv(a);return f&&(f.addEventListener("mousedown",u,!0),f.addEventListener("contextmenu",u,!0)),function(){c.removeEventListener("mousedown",u,!0),c.removeEventListener("contextmenu",u,!0),f&&(f.removeEventListener("mousedown",u,!0),f.removeEventListener("contextmenu",u,!0))}}},[r,a,e,t,i])}var lk=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function uk(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:lw,r=w.exports.forwardRef(function(a,e){var t=a.prefixCls,i=t===void 0?"rc-trigger-popup":t,o=a.children,s=a.action,l=s===void 0?"hover":s,u=a.showAction,c=a.hideAction,f=a.popupVisible,d=a.defaultPopupVisible,h=a.onPopupVisibleChange,_=a.afterPopupVisibleChange,p=a.mouseEnterDelay,v=a.mouseLeaveDelay,y=v===void 0?.1:v,m=a.focusDelay,g=a.blurDelay,x=a.mask,b=a.maskClosable,S=b===void 0?!0:b,C=a.getPopupContainer,E=a.forceRender,T=a.autoDestroy,M=a.destroyPopupOnHide,L=a.popup,F=a.popupClassName,N=a.popupStyle,I=a.popupPlacement,O=a.builtinPlacements,P=O===void 0?{}:O,R=a.popupAlign,A=a.zIndex,D=a.stretch,B=a.getPopupClassNameFromAlign,k=a.fresh,V=a.alignPoint,U=a.onPopupClick,j=a.onPopupAlign,G=a.arrow,$=a.popupMotion,W=a.maskMotion,K=a.popupTransitionName,q=a.popupAnimation,Y=a.maskTransitionName,Q=a.maskAnimation,re=a.className,ue=a.getTriggerDOMNode,oe=Zt(a,lk),ee=T||M||!1,xe=w.exports.useState(!1),Te=_e(xe,2),Ce=Te[0],pe=Te[1];Qn(function(){pe(xw())},[]);var J=w.exports.useRef({}),ae=w.exports.useContext(ob),ne=w.exports.useMemo(function(){return{registerSubPopup:function(Lt,Wn){J.current[Lt]=Wn,ae==null||ae.registerSubPopup(Lt,Wn)}}},[ae]),ge=KD(),se=w.exports.useState(null),Re=_e(se,2),de=Re[0],Pe=Re[1],De=w.exports.useRef(null),Ke=Xa(function(ot){De.current=ot,Mv(ot)&&de!==ot&&Pe(ot),ae==null||ae.registerSubPopup(ge,ot)}),Be=w.exports.useState(null),He=_e(Be,2),We=He[0],yt=He[1],bt=w.exports.useRef(null),Mt=Xa(function(ot){Mv(ot)&&We!==ot&&(yt(ot),bt.current=ot)}),ce=w.exports.Children.only(o),le=(ce==null?void 0:ce.props)||{},he={},Se=Xa(function(ot){var Lt,Wn,hr=We;return(hr==null?void 0:hr.contains(ot))||((Lt=Bv(hr))===null||Lt===void 0?void 0:Lt.host)===ot||ot===hr||(de==null?void 0:de.contains(ot))||((Wn=Bv(de))===null||Wn===void 0?void 0:Wn.host)===ot||ot===de||Object.values(J.current).some(function($n){return($n==null?void 0:$n.contains(ot))||ot===$n})}),me=lb(i,$,q,K),Le=lb(i,W,Q,Y),Qe=w.exports.useState(d||!1),at=_e(Qe,2),lt=at[0],ze=at[1],Rt=f!=null?f:lt,et=Xa(function(ot){f===void 0&&ze(ot)});Qn(function(){ze(f||!1)},[f]);var Ne=w.exports.useRef(Rt);Ne.current=Rt;var ct=w.exports.useRef([]);ct.current=[];var Bt=Xa(function(ot){var Lt;et(ot),((Lt=ct.current[ct.current.length-1])!==null&&Lt!==void 0?Lt:Rt)!==ot&&(ct.current.push(ot),h==null||h(ot))}),Oe=w.exports.useRef(),Ye=function(){clearTimeout(Oe.current)},Fe=function(Lt){var Wn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Ye(),Wn===0?Bt(Lt):Oe.current=setTimeout(function(){Bt(Lt)},Wn*1e3)};w.exports.useEffect(function(){return Ye},[]);var Ve=w.exports.useState(!1),Ee=_e(Ve,2),tt=Ee[0],gn=Ee[1];Qn(function(ot){(!ot||Rt)&&gn(!0)},[Rt]);var dn=w.exports.useState(null),On=_e(dn,2),At=On[0],Cn=On[1],dt=w.exports.useState([0,0]),ft=_e(dt,2),Ft=ft[0],on=ft[1],En=function(Lt){on([Lt.clientX,Lt.clientY])},Sa=ik(Rt,de,V?Ft:We,I,P,R,j),tn=_e(Sa,11),Ni=tn[0],lo=tn[1],Fi=tn[2],aa=tn[3],No=tn[4],Di=tn[5],Bi=tn[6],Fo=tn[7],Ss=tn[8],ia=tn[9],ba=tn[10],Do=nk(Ce,l,u,c),bs=_e(Do,2),li=bs[0],ki=bs[1],cn=li.has("click"),$t=ki.has("click")||ki.has("contextMenu"),qe=Xa(function(){tt||ba()}),ht=function(){Ne.current&&V&&$t&&Fe(!1)};ok(Rt,We,de,qe,ht),Qn(function(){qe()},[Ft,I]),Qn(function(){Rt&&!(P!=null&&P[I])&&qe()},[JSON.stringify(R)]);var Jt=w.exports.useMemo(function(){var ot=ak(P,i,ia,V);return mt(ot,B==null?void 0:B(ia))},[ia,B,P,i,V]);w.exports.useImperativeHandle(e,function(){return{nativeElement:bt.current,popupElement:De.current,forceAlign:qe}});var Vn=w.exports.useState(0),pn=_e(Vn,2),tr=pn[0],Tr=pn[1],oa=w.exports.useState(0),dr=_e(oa,2),Ca=dr[0],Ea=dr[1],Bo=function(){if(D&&We){var Lt=We.getBoundingClientRect();Tr(Lt.width),Ea(Lt.height)}},n2=function(){Bo(),qe()},r2=function(Lt){gn(!1),ba(),_==null||_(Lt)},Ua=function(){return new Promise(function(Lt){Bo(),Cn(function(){return Lt})})};Qn(function(){At&&(ba(),At(),Cn(null))},[At]);function uo(ot,Lt,Wn,hr){he[ot]=function($n){var Kd;hr==null||hr($n),Fe(Lt,Wn);for(var C_=arguments.length,Fx=new Array(C_>1?C_-1:0),Yd=1;Yd<C_;Yd++)Fx[Yd-1]=arguments[Yd];(Kd=le[ot])===null||Kd===void 0||Kd.call.apply(Kd,[le,$n].concat(Fx))}}(cn||$t)&&(he.onClick=function(ot){var Lt;Ne.current&&$t?Fe(!1):!Ne.current&&cn&&(En(ot),Fe(!0));for(var Wn=arguments.length,hr=new Array(Wn>1?Wn-1:0),$n=1;$n<Wn;$n++)hr[$n-1]=arguments[$n];(Lt=le.onClick)===null||Lt===void 0||Lt.call.apply(Lt,[le,ot].concat(hr))}),sk(Rt,$t,We,de,x,S,Se,Fe);var $d=li.has("hover"),ul=ki.has("hover"),Cs,Fc;$d&&(uo("onMouseEnter",!0,p,function(ot){En(ot)}),uo("onPointerEnter",!0,p,function(ot){En(ot)}),Cs=function(Lt){(Rt||tt)&&de!==null&&de!==void 0&&de.contains(Lt.target)&&Fe(!0,p)},V&&(he.onMouseMove=function(ot){var Lt;(Lt=le.onMouseMove)===null||Lt===void 0||Lt.call(le,ot)})),ul&&(uo("onMouseLeave",!1,y),uo("onPointerLeave",!1,y),Fc=function(){Fe(!1,y)}),li.has("focus")&&uo("onFocus",!0,m),ki.has("focus")&&uo("onBlur",!1,g),li.has("contextMenu")&&(he.onContextMenu=function(ot){var Lt;Ne.current&&ki.has("contextMenu")?Fe(!1):(En(ot),Fe(!0)),ot.preventDefault();for(var Wn=arguments.length,hr=new Array(Wn>1?Wn-1:0),$n=1;$n<Wn;$n++)hr[$n-1]=arguments[$n];(Lt=le.onContextMenu)===null||Lt===void 0||Lt.call.apply(Lt,[le,ot].concat(hr))}),re&&(he.className=mt(le.className,re));var nu=ie(ie({},le),he),Xd={},y_=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];y_.forEach(function(ot){oe[ot]&&(Xd[ot]=function(){for(var Lt,Wn=arguments.length,hr=new Array(Wn),$n=0;$n<Wn;$n++)hr[$n]=arguments[$n];(Lt=nu[ot])===null||Lt===void 0||Lt.call.apply(Lt,[nu].concat(hr)),oe[ot].apply(oe,hr)})});var x_=w.exports.cloneElement(ce,ie(ie({},nu),Xd)),S_={x:Di,y:Bi},b_=G?ie({},G!==!0?G:{}):null;return w.exports.createElement(w.exports.Fragment,null,w.exports.createElement(Ql,{disabled:!Rt,ref:Mt,onResize:n2},w.exports.createElement(tk,{getTriggerDOMNode:ue},x_)),w.exports.createElement(ob.Provider,{value:ne},w.exports.createElement(ek,{portal:n,ref:Ke,prefixCls:i,popup:L,className:mt(F,Jt),style:N,target:We,onMouseEnter:Cs,onMouseLeave:Fc,onPointerEnter:Cs,zIndex:A,open:Rt,keepDom:tt,fresh:k,onClick:U,mask:x,motion:me,maskMotion:Le,onVisibleChanged:r2,onPrepare:Ua,forceRender:E,autoDestroy:ee,getPopupContainer:C,align:ia,arrow:b_,arrowPos:S_,ready:Ni,offsetX:lo,offsetY:Fi,offsetR:aa,offsetB:No,onAlign:qe,stretch:D,targetWidth:tr/Fo,targetHeight:Ca/Ss})))});return r}var ex=uk(lw),ck=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],fk=function(r){var a=r===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:a,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:a,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:a,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:a,adjustY:1},htmlRegion:"scroll"}}},dk=function(r,a){var e=r.prefixCls;r.disabled;var t=r.visible,i=r.children,o=r.popupElement,s=r.animation,l=r.transitionName,u=r.dropdownStyle,c=r.dropdownClassName,f=r.direction,d=f===void 0?"ltr":f,h=r.placement,_=r.builtinPlacements,p=r.dropdownMatchSelectWidth,v=r.dropdownRender,y=r.dropdownAlign,m=r.getPopupContainer,g=r.empty,x=r.getTriggerDOMNode,b=r.onPopupVisibleChange,S=r.onPopupMouseEnter,C=Zt(r,ck),E="".concat(e,"-dropdown"),T=o;v&&(T=v(o));var M=w.exports.useMemo(function(){return _||fk(p)},[_,p]),L=s?"".concat(E,"-").concat(s):l,F=typeof p=="number",N=w.exports.useMemo(function(){return F?null:p===!1?"minWidth":"width"},[p,F]),I=u;F&&(I=ie(ie({},I),{},{width:p}));var O=w.exports.useRef(null);return w.exports.useImperativeHandle(a,function(){return{getPopupElement:function(){var R;return(R=O.current)===null||R===void 0?void 0:R.popupElement}}}),w.exports.createElement(ex,St({},C,{showAction:b?["click"]:[],hideAction:b?["click"]:[],popupPlacement:h||(d==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:M,prefixCls:E,popupTransitionName:L,popup:w.exports.createElement("div",{onMouseEnter:S},T),ref:O,stretch:N,popupAlign:y,popupVisible:t,getPopupContainer:m,popupClassName:mt(c,Z({},"".concat(E,"-empty"),g)),popupStyle:I,getTriggerDOMNode:x,onPopupVisibleChange:b}),i)},hk=w.exports.forwardRef(dk);function hb(n,r){var a=n.key,e;return"value"in n&&(e=n.value),a!=null?a:e!==void 0?e:"rc-index-key-".concat(r)}function Hm(n){return typeof n!="undefined"&&!Number.isNaN(n)}function Pw(n,r){var a=n||{},e=a.label,t=a.value,i=a.options,o=a.groupLabel,s=e||(r?"children":"label");return{label:s,value:t||"value",options:i||"options",groupLabel:o||s}}function vk(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.fieldNames,e=r.childrenAsData,t=[],i=Pw(a,!1),o=i.label,s=i.value,l=i.options,u=i.groupLabel;function c(f,d){!Array.isArray(f)||f.forEach(function(h){if(d||!(l in h)){var _=h[s];t.push({key:hb(h,t.length),groupOption:d,data:h,label:h[o],value:_})}else{var p=h[u];p===void 0&&e&&(p=h.label),t.push({key:hb(h,t.length),group:!0,data:h,label:p}),c(h[l],!0)}})}return c(n,!1),t}function jm(n){var r=ie({},n);return"props"in r||Object.defineProperty(r,"props",{get:function(){return Yr(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),r}}),r}var pk=function(r,a,e){if(!a||!a.length)return null;var t=!1,i=function s(l,u){var c=_A(u),f=c[0],d=c.slice(1);if(!f)return[l];var h=l.split(f);return t=t||h.length>1,h.reduce(function(_,p){return[].concat(st(_),st(s(p,d)))},[]).filter(Boolean)},o=i(r,a);return t?typeof e!="undefined"?o.slice(0,e):o:null},tx=w.exports.createContext(null),_k=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],gk=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],Wm=function(r){return r==="tags"||r==="multiple"},mk=w.exports.forwardRef(function(n,r){var a,e=n.id,t=n.prefixCls,i=n.className,o=n.showSearch,s=n.tagRender,l=n.direction,u=n.omitDomProps,c=n.displayValues,f=n.onDisplayValuesChange,d=n.emptyOptions,h=n.notFoundContent,_=h===void 0?"Not Found":h,p=n.onClear,v=n.mode,y=n.disabled,m=n.loading,g=n.getInputElement,x=n.getRawInputElement,b=n.open,S=n.defaultOpen,C=n.onDropdownVisibleChange,E=n.activeValue,T=n.onActiveValueChange,M=n.activeDescendantId,L=n.searchValue,F=n.autoClearSearchValue,N=n.onSearch,I=n.onSearchSplit,O=n.tokenSeparators,P=n.allowClear,R=n.suffixIcon,A=n.clearIcon,D=n.OptionList,B=n.animation,k=n.transitionName,V=n.dropdownStyle,U=n.dropdownClassName,j=n.dropdownMatchSelectWidth,G=n.dropdownRender,$=n.dropdownAlign,W=n.placement,K=n.builtinPlacements,q=n.getPopupContainer,Y=n.showAction,Q=Y===void 0?[]:Y,re=n.onFocus,ue=n.onBlur,oe=n.onKeyUp,ee=n.onKeyDown,xe=n.onMouseDown,Te=Zt(n,_k),Ce=Wm(v),pe=(o!==void 0?o:Ce)||v==="combobox",J=ie({},Te);gk.forEach(function(qe){delete J[qe]}),u==null||u.forEach(function(qe){delete J[qe]});var ae=w.exports.useState(!1),ne=_e(ae,2),ge=ne[0],se=ne[1];w.exports.useEffect(function(){se(xw())},[]);var Re=w.exports.useRef(null),de=w.exports.useRef(null),Pe=w.exports.useRef(null),De=w.exports.useRef(null),Ke=w.exports.useRef(null),Be=w.exports.useRef(!1),He=R3(),We=_e(He,3),yt=We[0],bt=We[1],Mt=We[2];w.exports.useImperativeHandle(r,function(){var qe,ht;return{focus:(qe=De.current)===null||qe===void 0?void 0:qe.focus,blur:(ht=De.current)===null||ht===void 0?void 0:ht.blur,scrollTo:function(Vn){var pn;return(pn=Ke.current)===null||pn===void 0?void 0:pn.scrollTo(Vn)}}});var ce=w.exports.useMemo(function(){var qe;if(v!=="combobox")return L;var ht=(qe=c[0])===null||qe===void 0?void 0:qe.value;return typeof ht=="string"||typeof ht=="number"?String(ht):""},[L,v,c]),le=v==="combobox"&&typeof g=="function"&&g()||null,he=typeof x=="function"&&x(),Se=Td(de,he==null||(a=he.props)===null||a===void 0?void 0:a.ref),me=w.exports.useState(!1),Le=_e(me,2),Qe=Le[0],at=Le[1];Qn(function(){at(!0)},[]);var lt=rs(!1,{defaultValue:S,value:b}),ze=_e(lt,2),Rt=ze[0],et=ze[1],Ne=Qe?Rt:!1,ct=!_&&d;(y||ct&&Ne&&v==="combobox")&&(Ne=!1);var Bt=ct?!1:Ne,Oe=w.exports.useCallback(function(qe){var ht=qe!==void 0?qe:!Ne;y||(et(ht),Ne!==ht&&(C==null||C(ht)))},[y,Ne,et,C]),Ye=w.exports.useMemo(function(){return(O||[]).some(function(qe){return[`
`,`\r
`].includes(qe)})},[O]),Fe=w.exports.useContext(tx)||{},Ve=Fe.maxCount,Ee=Fe.rawValues,tt=function(ht,Jt,Vn){if(!(Ce&&Hm(Ve)&&(Ee==null?void 0:Ee.size)>=Ve)){var pn=!0,tr=ht;T==null||T(null);var Tr=pk(ht,O,Hm(Ve)?Ve-Ee.size:void 0),oa=Vn?null:Tr;return v!=="combobox"&&oa&&(tr="",I==null||I(oa),Oe(!1),pn=!1),N&&ce!==tr&&N(tr,{source:Jt?"typing":"effect"}),pn}},gn=function(ht){!ht||!ht.trim()||N(ht,{source:"submit"})};w.exports.useEffect(function(){!Ne&&!Ce&&v!=="combobox"&&tt("",!1,!1)},[Ne]),w.exports.useEffect(function(){Rt&&y&&et(!1),y&&!Be.current&&bt(!1)},[y]);var dn=bw(),On=_e(dn,2),At=On[0],Cn=On[1],dt=function(ht){var Jt=At(),Vn=ht.which;if(Vn===we.ENTER&&(v!=="combobox"&&ht.preventDefault(),Ne||Oe(!0)),Cn(!!ce),Vn===we.BACKSPACE&&!Jt&&Ce&&!ce&&c.length){for(var pn=st(c),tr=null,Tr=pn.length-1;Tr>=0;Tr-=1){var oa=pn[Tr];if(!oa.disabled){pn.splice(Tr,1),tr=oa;break}}tr&&f(pn,{type:"remove",values:[tr]})}for(var dr=arguments.length,Ca=new Array(dr>1?dr-1:0),Ea=1;Ea<dr;Ea++)Ca[Ea-1]=arguments[Ea];if(Ne){var Bo;(Bo=Ke.current)===null||Bo===void 0||Bo.onKeyDown.apply(Bo,[ht].concat(Ca))}ee==null||ee.apply(void 0,[ht].concat(Ca))},ft=function(ht){for(var Jt=arguments.length,Vn=new Array(Jt>1?Jt-1:0),pn=1;pn<Jt;pn++)Vn[pn-1]=arguments[pn];if(Ne){var tr;(tr=Ke.current)===null||tr===void 0||tr.onKeyUp.apply(tr,[ht].concat(Vn))}oe==null||oe.apply(void 0,[ht].concat(Vn))},Ft=function(ht){var Jt=c.filter(function(Vn){return Vn!==ht});f(Jt,{type:"remove",values:[ht]})},on=w.exports.useRef(!1),En=function(){bt(!0),y||(re&&!on.current&&re.apply(void 0,arguments),Q.includes("focus")&&Oe(!0)),on.current=!0},Sa=function(){Be.current=!0,bt(!1,function(){on.current=!1,Be.current=!1,Oe(!1)}),!y&&(ce&&(v==="tags"?N(ce,{source:"submit"}):v==="multiple"&&N("",{source:"blur"})),ue&&ue.apply(void 0,arguments))},tn=[];w.exports.useEffect(function(){return function(){tn.forEach(function(qe){return clearTimeout(qe)}),tn.splice(0,tn.length)}},[]);var Ni=function(ht){var Jt,Vn=ht.target,pn=(Jt=Pe.current)===null||Jt===void 0?void 0:Jt.getPopupElement();if(pn&&pn.contains(Vn)){var tr=setTimeout(function(){var Ca=tn.indexOf(tr);if(Ca!==-1&&tn.splice(Ca,1),Mt(),!ge&&!pn.contains(document.activeElement)){var Ea;(Ea=De.current)===null||Ea===void 0||Ea.focus()}});tn.push(tr)}for(var Tr=arguments.length,oa=new Array(Tr>1?Tr-1:0),dr=1;dr<Tr;dr++)oa[dr-1]=arguments[dr];xe==null||xe.apply(void 0,[ht].concat(oa))},lo=w.exports.useState({}),Fi=_e(lo,2),aa=Fi[1];function No(){aa({})}var Di;he&&(Di=function(ht){Oe(ht)}),A3(function(){var qe;return[Re.current,(qe=Pe.current)===null||qe===void 0?void 0:qe.getPopupElement()]},Bt,Oe,!!he);var Bi=w.exports.useMemo(function(){return ie(ie({},n),{},{notFoundContent:_,open:Ne,triggerOpen:Bt,id:e,showSearch:pe,multiple:Ce,toggleOpen:Oe})},[n,_,Bt,Ne,e,pe,Ce,Oe]),Fo=!!R||m,Ss;Fo&&(Ss=w.exports.createElement(Jp,{className:mt("".concat(t,"-arrow"),Z({},"".concat(t,"-arrow-loading"),m)),customizeIcon:R,customizeIconProps:{loading:m,searchValue:ce,open:Ne,focused:yt,showSearch:pe}}));var ia=function(){var ht;p==null||p(),(ht=De.current)===null||ht===void 0||ht.focus(),f([],{type:"clear",values:c}),tt("",!1,!1)},ba=E3(t,ia,c,P,A,y,ce,v),Do=ba.allowClear,bs=ba.clearIcon,li=w.exports.createElement(D,{ref:Ke}),ki=mt(t,i,Z(Z(Z(Z(Z(Z(Z(Z(Z(Z({},"".concat(t,"-focused"),yt),"".concat(t,"-multiple"),Ce),"".concat(t,"-single"),!Ce),"".concat(t,"-allow-clear"),P),"".concat(t,"-show-arrow"),Fo),"".concat(t,"-disabled"),y),"".concat(t,"-loading"),m),"".concat(t,"-open"),Ne),"".concat(t,"-customize-input"),le),"".concat(t,"-show-search"),pe)),cn=w.exports.createElement(hk,{ref:Pe,disabled:y,prefixCls:t,visible:Bt,popupElement:li,animation:B,transitionName:k,dropdownStyle:V,dropdownClassName:U,direction:l,dropdownMatchSelectWidth:j,dropdownRender:G,dropdownAlign:$,placement:W,builtinPlacements:K,getPopupContainer:q,empty:d,getTriggerDOMNode:function(){return de.current},onPopupVisibleChange:Di,onPopupMouseEnter:No},he?w.exports.cloneElement(he,{ref:Se}):w.exports.createElement(Q3,St({},n,{domRef:de,prefixCls:t,inputElement:le,ref:De,id:e,showSearch:pe,autoClearSearchValue:F,mode:v,activeDescendantId:M,tagRender:s,values:c,open:Ne,onToggleOpen:Oe,activeValue:E,searchValue:ce,onSearch:tt,onSearchSubmit:gn,onRemove:Ft,tokenWithEnter:Ye}))),$t;return he?$t=cn:$t=w.exports.createElement("div",St({className:ki},J,{ref:Re,onMouseDown:Ni,onKeyDown:dt,onKeyUp:ft,onFocus:En,onBlur:Sa}),yt&&!Ne&&w.exports.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(c.map(function(qe){var ht=qe.label,Jt=qe.value;return["number","string"].includes(Qt(ht))?ht:Jt}).join(", "))),cn,Ss,Do&&bs),w.exports.createElement(Sw.Provider,{value:Bi},$t)}),nx=function(){return null};nx.isSelectOptGroup=!0;var rx=function(){return null};rx.isSelectOption=!0;var Mw=w.exports.forwardRef(function(n,r){var a=n.height,e=n.offsetY,t=n.offsetX,i=n.children,o=n.prefixCls,s=n.onInnerResize,l=n.innerProps,u=n.rtl,c=n.extra,f={},d={display:"flex",flexDirection:"column"};return e!==void 0&&(f={height:a,position:"relative",overflow:"hidden"},d=ie(ie({},d),{},Z(Z(Z(Z(Z({transform:"translateY(".concat(e,"px)")},u?"marginRight":"marginLeft",-t),"position","absolute"),"left",0),"right",0),"top",0))),w.exports.createElement("div",{style:f},w.exports.createElement(Ql,{onResize:function(_){var p=_.offsetHeight;p&&s&&s()}},w.exports.createElement("div",St({style:d,className:mt(Z({},"".concat(o,"-holder-inner"),o)),ref:r},l),i,c)))});Mw.displayName="Filler";function vb(n,r){var a="touches"in n?n.touches[0]:n;return a[r?"pageX":"pageY"]}var pb=w.exports.forwardRef(function(n,r){var a=n.prefixCls,e=n.rtl,t=n.scrollOffset,i=n.scrollRange,o=n.onStartMove,s=n.onStopMove,l=n.onScroll,u=n.horizontal,c=n.spinSize,f=n.containerSize,d=n.style,h=n.thumbStyle,_=w.exports.useState(!1),p=_e(_,2),v=p[0],y=p[1],m=w.exports.useState(null),g=_e(m,2),x=g[0],b=g[1],S=w.exports.useState(null),C=_e(S,2),E=C[0],T=C[1],M=!e,L=w.exports.useRef(),F=w.exports.useRef(),N=w.exports.useState(!1),I=_e(N,2),O=I[0],P=I[1],R=w.exports.useRef(),A=function(){clearTimeout(R.current),P(!0),R.current=setTimeout(function(){P(!1)},3e3)},D=i-f||0,B=f-c||0,k=w.exports.useMemo(function(){if(t===0||D===0)return 0;var Y=t/D;return Y*B},[t,D,B]),V=function(Q){Q.stopPropagation(),Q.preventDefault()},U=w.exports.useRef({top:k,dragging:v,pageY:x,startTop:E});U.current={top:k,dragging:v,pageY:x,startTop:E};var j=function(Q){y(!0),b(vb(Q,u)),T(U.current.top),o(),Q.stopPropagation(),Q.preventDefault()};w.exports.useEffect(function(){var Y=function(oe){oe.preventDefault()},Q=L.current,re=F.current;return Q.addEventListener("touchstart",Y),re.addEventListener("touchstart",j),function(){Q.removeEventListener("touchstart",Y),re.removeEventListener("touchstart",j)}},[]);var G=w.exports.useRef();G.current=D;var $=w.exports.useRef();$.current=B,w.exports.useEffect(function(){if(v){var Y,Q=function(oe){var ee=U.current,xe=ee.dragging,Te=ee.pageY,Ce=ee.startTop;if(gr.cancel(Y),xe){var pe=vb(oe,u)-Te,J=Ce;!M&&u?J-=pe:J+=pe;var ae=G.current,ne=$.current,ge=ne?J/ne:0,se=Math.ceil(ge*ae);se=Math.max(se,0),se=Math.min(se,ae),Y=gr(function(){l(se,u)})}},re=function(){y(!1),s()};return window.addEventListener("mousemove",Q),window.addEventListener("touchmove",Q),window.addEventListener("mouseup",re),window.addEventListener("touchend",re),function(){window.removeEventListener("mousemove",Q),window.removeEventListener("touchmove",Q),window.removeEventListener("mouseup",re),window.removeEventListener("touchend",re),gr.cancel(Y)}}},[v]),w.exports.useEffect(function(){A()},[t]),w.exports.useImperativeHandle(r,function(){return{delayHidden:A}});var W="".concat(a,"-scrollbar"),K={position:"absolute",visibility:O?null:"hidden"},q={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return u?(K.height=8,K.left=0,K.right=0,K.bottom=0,q.height="100%",q.width=c,M?q.left=k:q.right=k):(K.width=8,K.top=0,K.bottom=0,M?K.right=0:K.left=0,q.width="100%",q.height=c,q.top=k),w.exports.createElement("div",{ref:L,className:mt(W,Z(Z(Z({},"".concat(W,"-horizontal"),u),"".concat(W,"-vertical"),!u),"".concat(W,"-visible"),O)),style:ie(ie({},K),d),onMouseDown:V,onMouseMove:A},w.exports.createElement("div",{ref:F,className:mt("".concat(W,"-thumb"),Z({},"".concat(W,"-thumb-moving"),v)),style:ie(ie({},q),h),onMouseDown:j}))});function yk(n){var r=n.children,a=n.setRef,e=w.exports.useCallback(function(t){a(t)},[]);return w.exports.cloneElement(r,{ref:e})}function xk(n,r,a,e,t,i,o){var s=o.getKey;return n.slice(r,a+1).map(function(l,u){var c=r+u,f=i(l,c,{style:{width:e}}),d=s(l);return w.exports.createElement(yk,{key:d,setRef:function(_){return t(l,_)}},f)})}var Sk=function(){function n(){_a(this,n),Z(this,"maps",void 0),Z(this,"id",0),this.maps=Object.create(null)}return ga(n,[{key:"set",value:function(a,e){this.maps[a]=e,this.id+=1}},{key:"get",value:function(a){return this.maps[a]}}]),n}();function bk(n,r,a){var e=w.exports.useState(0),t=_e(e,2),i=t[0],o=t[1],s=w.exports.useRef(new Map),l=w.exports.useRef(new Sk),u=w.exports.useRef();function c(){gr.cancel(u.current)}function f(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;c();var _=function(){s.current.forEach(function(v,y){if(v&&v.offsetParent){var m=Af(v),g=m.offsetHeight;l.current.get(y)!==g&&l.current.set(y,m.offsetHeight)}}),o(function(v){return v+1})};h?_():u.current=gr(_)}function d(h,_){var p=n(h),v=s.current.get(p);_?(s.current.set(p,_),f()):s.current.delete(p),!v!=!_&&(_?r==null||r(h):a==null||a(h))}return w.exports.useEffect(function(){return c},[]),[d,f,l.current,i]}var Ck=10;function Ek(n,r,a,e,t,i,o,s){var l=w.exports.useRef(),u=w.exports.useState(null),c=_e(u,2),f=c[0],d=c[1];return Qn(function(){if(f&&f.times<Ck){if(!n.current){d(function(D){return ie({},D)});return}i();var h=f.targetAlign,_=f.originAlign,p=f.index,v=f.offset,y=n.current.clientHeight,m=!1,g=h,x=null;if(y){for(var b=h||_,S=0,C=0,E=0,T=Math.min(r.length-1,p),M=0;M<=T;M+=1){var L=t(r[M]);C=S;var F=a.get(L);E=C+(F===void 0?e:F),S=E}for(var N=b==="top"?v:y-v,I=T;I>=0;I-=1){var O=t(r[I]),P=a.get(O);if(P===void 0){m=!0;break}if(N-=P,N<=0)break}switch(b){case"top":x=C-v;break;case"bottom":x=E-y+v;break;default:{var R=n.current.scrollTop,A=R+y;C<R?g="top":E>A&&(g="bottom")}}x!==null&&o(x),x!==f.lastTop&&(m=!0)}m&&d(ie(ie({},f),{},{times:f.times+1,targetAlign:g,lastTop:x}))}},[f,n.current]),function(h){if(h==null){s();return}if(gr.cancel(l.current),typeof h=="number")o(h);else if(h&&Qt(h)==="object"){var _,p=h.align;"index"in h?_=h.index:_=r.findIndex(function(m){return t(m)===h.key});var v=h.offset,y=v===void 0?0:v;d({times:0,index:_,offset:y,originAlign:p})}}}function Tk(n,r,a){var e=n.length,t=r.length,i,o;if(e===0&&t===0)return null;e<t?(i=n,o=r):(i=r,o=n);var s={__EMPTY_ITEM__:!0};function l(_){return _!==void 0?a(_):s}for(var u=null,c=Math.abs(e-t)!==1,f=0;f<o.length;f+=1){var d=l(i[f]),h=l(o[f]);if(d!==h){u=f,c=c||d!==l(o[f+1]);break}}return u===null?null:{index:u,multiple:c}}function Rk(n,r,a){var e=w.exports.useState(n),t=_e(e,2),i=t[0],o=t[1],s=w.exports.useState(null),l=_e(s,2),u=l[0],c=l[1];return w.exports.useEffect(function(){var f=Tk(i||[],n||[],r);(f==null?void 0:f.index)!==void 0&&(a==null||a(f.index),c(n[f.index])),o(n)},[n]),[u]}var _b=(typeof navigator=="undefined"?"undefined":Qt(navigator))==="object"&&/Firefox/i.test(navigator.userAgent),Ow=function(n,r){var a=w.exports.useRef(!1),e=w.exports.useRef(null);function t(){clearTimeout(e.current),a.current=!0,e.current=setTimeout(function(){a.current=!1},50)}var i=w.exports.useRef({top:n,bottom:r});return i.current.top=n,i.current.bottom=r,function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=o<0&&i.current.top||o>0&&i.current.bottom;return s&&l?(clearTimeout(e.current),a.current=!1):(!l||a.current)&&t(),!a.current&&l}};function Ak(n,r,a,e,t){var i=w.exports.useRef(0),o=w.exports.useRef(null),s=w.exports.useRef(null),l=w.exports.useRef(!1),u=Ow(r,a);function c(v,y){gr.cancel(o.current),i.current+=y,s.current=y,!u(y)&&(_b||v.preventDefault(),o.current=gr(function(){var m=l.current?10:1;t(i.current*m),i.current=0}))}function f(v,y){t(y,!0),_b||v.preventDefault()}var d=w.exports.useRef(null),h=w.exports.useRef(null);function _(v){if(!!n){gr.cancel(h.current),h.current=gr(function(){d.current=null},2);var y=v.deltaX,m=v.deltaY,g=v.shiftKey,x=y,b=m;(d.current==="sx"||!d.current&&(g||!1)&&m&&!y)&&(x=m,b=0,d.current="sx");var S=Math.abs(x),C=Math.abs(b);d.current===null&&(d.current=e&&S>C?"x":"y"),d.current==="y"?c(v,b):f(v,x)}}function p(v){!n||(l.current=v.detail===s.current)}return[_,p]}var wk=14/15;function Pk(n,r,a){var e=w.exports.useRef(!1),t=w.exports.useRef(0),i=w.exports.useRef(null),o=w.exports.useRef(null),s,l=function(d){if(e.current){var h=Math.ceil(d.touches[0].pageY),_=t.current-h;t.current=h,a(_)&&d.preventDefault(),clearInterval(o.current),o.current=setInterval(function(){_*=wk,(!a(_,!0)||Math.abs(_)<=.1)&&clearInterval(o.current)},16)}},u=function(){e.current=!1,s()},c=function(d){s(),d.touches.length===1&&!e.current&&(e.current=!0,t.current=Math.ceil(d.touches[0].pageY),i.current=d.target,i.current.addEventListener("touchmove",l),i.current.addEventListener("touchend",u))};s=function(){i.current&&(i.current.removeEventListener("touchmove",l),i.current.removeEventListener("touchend",u))},Qn(function(){return n&&r.current.addEventListener("touchstart",c),function(){var f;(f=r.current)===null||f===void 0||f.removeEventListener("touchstart",c),s(),clearInterval(o.current)}},[n])}var Mk=20;function gb(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=n/r*n;return isNaN(a)&&(a=0),a=Math.max(a,Mk),Math.floor(a)}function Ok(n,r,a,e){var t=w.exports.useMemo(function(){return[new Map,[]]},[n,a.id,e]),i=_e(t,2),o=i[0],s=i[1],l=function(c){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:c,d=o.get(c),h=o.get(f);if(d===void 0||h===void 0)for(var _=n.length,p=s.length;p<_;p+=1){var v,y=n[p],m=r(y);o.set(m,p);var g=(v=a.get(m))!==null&&v!==void 0?v:e;if(s[p]=(s[p-1]||0)+g,m===c&&(d=p),m===f&&(h=p),d!==void 0&&h!==void 0)break}return{top:s[d-1]||0,bottom:s[h]}};return l}var Ik=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles"],Lk=[],Nk={overflowY:"auto",overflowAnchor:"none"};function Fk(n,r){var a=n.prefixCls,e=a===void 0?"rc-virtual-list":a,t=n.className,i=n.height,o=n.itemHeight,s=n.fullHeight,l=s===void 0?!0:s,u=n.style,c=n.data,f=n.children,d=n.itemKey,h=n.virtual,_=n.direction,p=n.scrollWidth,v=n.component,y=v===void 0?"div":v,m=n.onScroll,g=n.onVirtualScroll,x=n.onVisibleChange,b=n.innerProps,S=n.extraRender,C=n.styles,E=Zt(n,Ik),T=!!(h!==!1&&i&&o),M=T&&c&&(o*c.length>i||!!p),L=_==="rtl",F=mt(e,Z({},"".concat(e,"-rtl"),L),t),N=c||Lk,I=w.exports.useRef(),O=w.exports.useRef(),P=w.exports.useState(0),R=_e(P,2),A=R[0],D=R[1],B=w.exports.useState(0),k=_e(B,2),V=k[0],U=k[1],j=w.exports.useState(!1),G=_e(j,2),$=G[0],W=G[1],K=function(){W(!0)},q=function(){W(!1)},Y=w.exports.useCallback(function(dt){return typeof d=="function"?d(dt):dt==null?void 0:dt[d]},[d]),Q={getKey:Y};function re(dt){D(function(ft){var Ft;typeof dt=="function"?Ft=dt(ft):Ft=dt;var on=me(Ft);return I.current.scrollTop=on,on})}var ue=w.exports.useRef({start:0,end:N.length}),oe=w.exports.useRef(),ee=Rk(N,Y),xe=_e(ee,1),Te=xe[0];oe.current=Te;var Ce=bk(Y,null,null),pe=_e(Ce,4),J=pe[0],ae=pe[1],ne=pe[2],ge=pe[3],se=w.exports.useMemo(function(){if(!T)return{scrollHeight:void 0,start:0,end:N.length-1,offset:void 0};if(!M){var dt;return{scrollHeight:((dt=O.current)===null||dt===void 0?void 0:dt.offsetHeight)||0,start:0,end:N.length-1,offset:void 0}}for(var ft=0,Ft,on,En,Sa=N.length,tn=0;tn<Sa;tn+=1){var Ni=N[tn],lo=Y(Ni),Fi=ne.get(lo),aa=ft+(Fi===void 0?o:Fi);aa>=A&&Ft===void 0&&(Ft=tn,on=ft),aa>A+i&&En===void 0&&(En=tn),ft=aa}return Ft===void 0&&(Ft=0,on=0,En=Math.ceil(i/o)),En===void 0&&(En=N.length-1),En=Math.min(En+1,N.length-1),{scrollHeight:ft,start:Ft,end:En,offset:on}},[M,T,A,N,ge,i]),Re=se.scrollHeight,de=se.start,Pe=se.end,De=se.offset;ue.current.start=de,ue.current.end=Pe;var Ke=w.exports.useState({width:0,height:i}),Be=_e(Ke,2),He=Be[0],We=Be[1],yt=function(ft){We({width:ft.width||ft.offsetWidth,height:ft.height||ft.offsetHeight})},bt=w.exports.useRef(),Mt=w.exports.useRef(),ce=w.exports.useMemo(function(){return gb(He.width,p)},[He.width,p]),le=w.exports.useMemo(function(){return gb(He.height,Re)},[He.height,Re]),he=Re-i,Se=w.exports.useRef(he);Se.current=he;function me(dt){var ft=dt;return Number.isNaN(Se.current)||(ft=Math.min(ft,Se.current)),ft=Math.max(ft,0),ft}var Le=A<=0,Qe=A>=he,at=Ow(Le,Qe),lt=function(){return{x:L?-V:V,y:A}},ze=w.exports.useRef(lt()),Rt=Xa(function(){if(g){var dt=lt();(ze.current.x!==dt.x||ze.current.y!==dt.y)&&(g(dt),ze.current=dt)}});function et(dt,ft){var Ft=dt;ft?(kl.exports.flushSync(function(){U(Ft)}),Rt()):re(Ft)}function Ne(dt){var ft=dt.currentTarget.scrollTop;ft!==A&&re(ft),m==null||m(dt),Rt()}var ct=function(ft){var Ft=ft,on=p-He.width;return Ft=Math.max(Ft,0),Ft=Math.min(Ft,on),Ft},Bt=Xa(function(dt,ft){ft?(kl.exports.flushSync(function(){U(function(Ft){var on=Ft+(L?-dt:dt);return ct(on)})}),Rt()):re(function(Ft){var on=Ft+dt;return on})}),Oe=Ak(T,Le,Qe,!!p,Bt),Ye=_e(Oe,2),Fe=Ye[0],Ve=Ye[1];Pk(T,I,function(dt,ft){return at(dt,ft)?!1:(Fe({preventDefault:function(){},deltaY:dt}),!0)}),Qn(function(){function dt(Ft){T&&Ft.preventDefault()}var ft=I.current;return ft.addEventListener("wheel",Fe),ft.addEventListener("DOMMouseScroll",Ve),ft.addEventListener("MozMousePixelScroll",dt),function(){ft.removeEventListener("wheel",Fe),ft.removeEventListener("DOMMouseScroll",Ve),ft.removeEventListener("MozMousePixelScroll",dt)}},[T]),Qn(function(){p&&U(function(dt){return ct(dt)})},[He.width,p]);var Ee=function(){var ft,Ft;(ft=bt.current)===null||ft===void 0||ft.delayHidden(),(Ft=Mt.current)===null||Ft===void 0||Ft.delayHidden()},tt=Ek(I,N,ne,o,Y,function(){return ae(!0)},re,Ee);w.exports.useImperativeHandle(r,function(){return{getScrollInfo:lt,scrollTo:function(ft){function Ft(on){return on&&Qt(on)==="object"&&("left"in on||"top"in on)}Ft(ft)?(ft.left!==void 0&&U(ct(ft.left)),tt(ft.top)):tt(ft)}}}),Qn(function(){if(x){var dt=N.slice(de,Pe+1);x(dt,N)}},[de,Pe,N]);var gn=Ok(N,Y,ne,o),dn=S==null?void 0:S({start:de,end:Pe,virtual:M,offsetX:V,offsetY:De,rtl:L,getSize:gn}),On=xk(N,de,Pe,p,J,f,Q),At=null;i&&(At=ie(Z({},l?"height":"maxHeight",i),Nk),T&&(At.overflowY="hidden",p&&(At.overflowX="hidden"),$&&(At.pointerEvents="none")));var Cn={};return L&&(Cn.dir="rtl"),w.exports.createElement("div",St({style:ie(ie({},u),{},{position:"relative"}),className:F},Cn,E),w.exports.createElement(Ql,{onResize:yt},w.exports.createElement(y,{className:"".concat(e,"-holder"),style:At,ref:I,onScroll:Ne,onMouseEnter:Ee},w.exports.createElement(Mw,{prefixCls:e,height:Re,offsetX:V,offsetY:De,scrollWidth:p,onInnerResize:ae,ref:O,innerProps:b,rtl:L,extra:dn},On))),M&&Re>i&&w.exports.createElement(pb,{ref:bt,prefixCls:e,scrollOffset:A,scrollRange:Re,rtl:L,onScroll:et,onStartMove:K,onStopMove:q,spinSize:le,containerSize:He.height,style:C==null?void 0:C.verticalScrollBar,thumbStyle:C==null?void 0:C.verticalScrollBarThumb}),M&&p>He.width&&w.exports.createElement(pb,{ref:Mt,prefixCls:e,scrollOffset:V,scrollRange:p,rtl:L,onScroll:et,onStartMove:K,onStopMove:q,spinSize:ce,containerSize:He.width,horizontal:!0,style:C==null?void 0:C.horizontalScrollBar,thumbStyle:C==null?void 0:C.horizontalScrollBarThumb}))}var Iw=w.exports.forwardRef(Fk);Iw.displayName="List";function Dk(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var Bk=["disabled","title","children","style","className"];function mb(n){return typeof n=="string"||typeof n=="number"}var kk=function(r,a){var e=T3(),t=e.prefixCls,i=e.id,o=e.open,s=e.multiple,l=e.mode,u=e.searchValue,c=e.toggleOpen,f=e.notFoundContent,d=e.onPopupScroll,h=w.exports.useContext(tx),_=h.maxCount,p=h.flattenOptions,v=h.onActiveValue,y=h.defaultActiveFirstOption,m=h.onSelect,g=h.menuItemSelectedIcon,x=h.rawValues,b=h.fieldNames,S=h.virtual,C=h.direction,E=h.listHeight,T=h.listItemHeight,M=h.optionRender,L="".concat(t,"-item"),F=Ed(function(){return p},[o,p],function(Y,Q){return Q[0]&&Y[1]!==Q[1]}),N=w.exports.useRef(null),I=w.exports.useMemo(function(){return s&&Hm(_)&&(x==null?void 0:x.size)>=_},[s,_,x==null?void 0:x.size]),O=function(Q){Q.preventDefault()},P=function(Q){var re;(re=N.current)===null||re===void 0||re.scrollTo(typeof Q=="number"?{index:Q}:Q)},R=function(Q){for(var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,ue=F.length,oe=0;oe<ue;oe+=1){var ee=(Q+oe*re+ue)%ue,xe=F[ee]||{},Te=xe.group,Ce=xe.data;if(!Te&&!(Ce!=null&&Ce.disabled)&&!I)return ee}return-1},A=w.exports.useState(function(){return R(0)}),D=_e(A,2),B=D[0],k=D[1],V=function(Q){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;k(Q);var ue={source:re?"keyboard":"mouse"},oe=F[Q];if(!oe){v(null,-1,ue);return}v(oe.value,Q,ue)};w.exports.useEffect(function(){V(y!==!1?R(0):-1)},[F.length,u]);var U=w.exports.useCallback(function(Y){return x.has(Y)&&l!=="combobox"},[l,st(x).toString(),x.size]);w.exports.useEffect(function(){var Y=setTimeout(function(){if(!s&&o&&x.size===1){var re=Array.from(x)[0],ue=F.findIndex(function(oe){var ee=oe.data;return ee.value===re});ue!==-1&&(V(ue),P(ue))}});if(o){var Q;(Q=N.current)===null||Q===void 0||Q.scrollTo(void 0)}return function(){return clearTimeout(Y)}},[o,u]);var j=function(Q){Q!==void 0&&m(Q,{selected:!x.has(Q)}),s||c(!1)};if(w.exports.useImperativeHandle(a,function(){return{onKeyDown:function(Q){var re=Q.which,ue=Q.ctrlKey;switch(re){case we.N:case we.P:case we.UP:case we.DOWN:{var oe=0;if(re===we.UP?oe=-1:re===we.DOWN?oe=1:Dk()&&ue&&(re===we.N?oe=1:re===we.P&&(oe=-1)),oe!==0){var ee=R(B+oe,oe);P(ee),V(ee,!0)}break}case we.ENTER:{var xe,Te=F[B];Te&&!(Te!=null&&(xe=Te.data)!==null&&xe!==void 0&&xe.disabled)&&!I?j(Te.value):j(void 0),o&&Q.preventDefault();break}case we.ESC:c(!1),o&&Q.stopPropagation()}},onKeyUp:function(){},scrollTo:function(Q){P(Q)}}}),F.length===0)return w.exports.createElement("div",{role:"listbox",id:"".concat(i,"_list"),className:"".concat(L,"-empty"),onMouseDown:O},f);var G=Object.keys(b).map(function(Y){return b[Y]}),$=function(Q){return Q.label};function W(Y,Q){var re=Y.group;return{role:re?"presentation":"option",id:"".concat(i,"_list_").concat(Q)}}var K=function(Q){var re=F[Q];if(!re)return null;var ue=re.data||{},oe=ue.value,ee=re.group,xe=kv(ue,!0),Te=$(re);return re?w.exports.createElement("div",St({"aria-label":typeof Te=="string"&&!ee?Te:null},xe,{key:Q},W(re,Q),{"aria-selected":U(oe)}),oe):null},q={role:"listbox",id:"".concat(i,"_list")};return w.exports.createElement(w.exports.Fragment,null,S&&w.exports.createElement("div",St({},q,{style:{height:0,width:0,overflow:"hidden"}}),K(B-1),K(B),K(B+1)),w.exports.createElement(Iw,{itemKey:"key",ref:N,data:F,height:E,itemHeight:T,fullHeight:!1,onMouseDown:O,onScroll:d,virtual:S,direction:C,innerProps:S?null:q},function(Y,Q){var re=Y.group,ue=Y.groupOption,oe=Y.data,ee=Y.label,xe=Y.value,Te=oe.key;if(re){var Ce,pe=(Ce=oe.title)!==null&&Ce!==void 0?Ce:mb(ee)?ee.toString():void 0;return w.exports.createElement("div",{className:mt(L,"".concat(L,"-group"),oe.className),title:pe},ee!==void 0?ee:Te)}var J=oe.disabled,ae=oe.title;oe.children;var ne=oe.style,ge=oe.className,se=Zt(oe,Bk),Re=_s(se,G),de=U(xe),Pe=J||!de&&I,De="".concat(L,"-option"),Ke=mt(L,De,ge,Z(Z(Z(Z({},"".concat(De,"-grouped"),ue),"".concat(De,"-active"),B===Q&&!Pe),"".concat(De,"-disabled"),Pe),"".concat(De,"-selected"),de)),Be=$(Y),He=!g||typeof g=="function"||de,We=typeof Be=="number"?Be:Be||xe,yt=mb(We)?We.toString():void 0;return ae!==void 0&&(yt=ae),w.exports.createElement("div",St({},kv(Re),S?{}:W(Y,Q),{"aria-selected":de,className:Ke,title:yt,onMouseMove:function(){B===Q||Pe||V(Q)},onClick:function(){Pe||j(xe)},style:ne}),w.exports.createElement("div",{className:"".concat(De,"-content")},typeof M=="function"?M(Y,{index:Q}):We),w.exports.isValidElement(g)||de,He&&w.exports.createElement(Jp,{className:"".concat(L,"-option-state"),customizeIcon:g,customizeIconProps:{value:xe,disabled:Pe,isSelected:de}},de?"\u2713":null))}))},Vk=w.exports.forwardRef(kk),Uk=function(n,r){var a=w.exports.useRef({values:new Map,options:new Map}),e=w.exports.useMemo(function(){var i=a.current,o=i.values,s=i.options,l=n.map(function(f){if(f.label===void 0){var d;return ie(ie({},f),{},{label:(d=o.get(f.value))===null||d===void 0?void 0:d.label})}return f}),u=new Map,c=new Map;return l.forEach(function(f){u.set(f.value,f),c.set(f.value,r.get(f.value)||s.get(f.value))}),a.current.values=u,a.current.options=c,l},[n,r]),t=w.exports.useCallback(function(i){return r.get(i)||a.current.options.get(i)},[r]);return[e,t]};function cg(n,r){return Aw(n).join("").toUpperCase().includes(r)}var zk=function(n,r,a,e,t){return w.exports.useMemo(function(){if(!a||e===!1)return n;var i=r.options,o=r.label,s=r.value,l=[],u=typeof e=="function",c=a.toUpperCase(),f=u?e:function(h,_){return t?cg(_[t],c):_[i]?cg(_[o!=="children"?o:"label"],c):cg(_[s],c)},d=u?function(h){return jm(h)}:function(h){return h};return n.forEach(function(h){if(h[i]){var _=f(a,d(h));if(_)l.push(h);else{var p=h[i].filter(function(v){return f(a,d(v))});p.length&&l.push(ie(ie({},h),{},Z({},i,p)))}return}f(a,d(h))&&l.push(h)}),l},[n,e,t,a,r])},yb=0,Gk=Fa();function Hk(){var n;return Gk?(n=yb,yb+=1):n="TEST_OR_SSR",n}function jk(n){var r=w.exports.useState(),a=_e(r,2),e=a[0],t=a[1];return w.exports.useEffect(function(){t("rc_select_".concat(Hk()))},[]),n||e}var Wk=["children","value"],$k=["children"];function Xk(n){var r=n,a=r.key,e=r.props,t=e.children,i=e.value,o=Zt(e,Wk);return ie({key:a,value:i!==void 0?i:a,children:t},o)}function Lw(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Zs(n).map(function(a,e){if(!w.exports.isValidElement(a)||!a.type)return null;var t=a,i=t.type.isSelectOptGroup,o=t.key,s=t.props,l=s.children,u=Zt(s,$k);return r||!i?Xk(a):ie(ie({key:"__RC_SELECT_GRP__".concat(o===null?e:o,"__"),label:o},u),{},{options:Lw(l)})}).filter(function(a){return a})}var Kk=function(r,a,e,t,i){return w.exports.useMemo(function(){var o=r,s=!r;s&&(o=Lw(a));var l=new Map,u=new Map,c=function(h,_,p){p&&typeof p=="string"&&h.set(_[p],_)},f=function d(h){for(var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,p=0;p<h.length;p+=1){var v=h[p];!v[e.options]||_?(l.set(v[e.value],v),c(u,v,e.label),c(u,v,t),c(u,v,i)):d(v[e.options],!0)}};return f(o),{options:o,valueOptions:l,labelOptions:u}},[r,a,e,t,i])};function xb(n){var r=w.exports.useRef();r.current=n;var a=w.exports.useCallback(function(){return r.current.apply(r,arguments)},[]);return a}var Yk=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],Qk=["inputValue"];function qk(n){return!n||Qt(n)!=="object"}var Jk=w.exports.forwardRef(function(n,r){var a=n.id,e=n.mode,t=n.prefixCls,i=t===void 0?"rc-select":t,o=n.backfill,s=n.fieldNames,l=n.inputValue,u=n.searchValue,c=n.onSearch,f=n.autoClearSearchValue,d=f===void 0?!0:f,h=n.onSelect,_=n.onDeselect,p=n.dropdownMatchSelectWidth,v=p===void 0?!0:p,y=n.filterOption,m=n.filterSort,g=n.optionFilterProp,x=n.optionLabelProp,b=n.options,S=n.optionRender,C=n.children,E=n.defaultActiveFirstOption,T=n.menuItemSelectedIcon,M=n.virtual,L=n.direction,F=n.listHeight,N=F===void 0?200:F,I=n.listItemHeight,O=I===void 0?20:I,P=n.labelRender,R=n.value,A=n.defaultValue,D=n.labelInValue,B=n.onChange,k=n.maxCount,V=Zt(n,Yk),U=jk(a),j=Wm(e),G=!!(!b&&C),$=w.exports.useMemo(function(){return y===void 0&&e==="combobox"?!1:y},[y,e]),W=w.exports.useMemo(function(){return Pw(s,G)},[JSON.stringify(s),G]),K=rs("",{value:u!==void 0?u:l,postState:function(Ye){return Ye||""}}),q=_e(K,2),Y=q[0],Q=q[1],re=Kk(b,C,W,g,x),ue=re.valueOptions,oe=re.labelOptions,ee=re.options,xe=w.exports.useCallback(function(Oe){var Ye=Aw(Oe);return Ye.map(function(Fe){var Ve,Ee,tt,gn,dn;if(qk(Fe))Ve=Fe;else{var On;tt=Fe.key,Ee=Fe.label,Ve=(On=Fe.value)!==null&&On!==void 0?On:tt}var At=ue.get(Ve);if(At){var Cn;Ee===void 0&&(Ee=At==null?void 0:At[x||W.label]),tt===void 0&&(tt=(Cn=At==null?void 0:At.key)!==null&&Cn!==void 0?Cn:Ve),gn=At==null?void 0:At.disabled,dn=At==null?void 0:At.title}return{label:Ee,value:Ve,key:tt,disabled:gn,title:dn}})},[W,x,ue]),Te=rs(A,{value:R}),Ce=_e(Te,2),pe=Ce[0],J=Ce[1],ae=w.exports.useMemo(function(){var Oe,Ye=j&&pe===null?[]:pe,Fe=xe(Ye);return e==="combobox"&&j3((Oe=Fe[0])===null||Oe===void 0?void 0:Oe.value)?[]:Fe},[pe,xe,e,j]),ne=Uk(ae,ue),ge=_e(ne,2),se=ge[0],Re=ge[1],de=w.exports.useMemo(function(){if(!e&&se.length===1){var Oe=se[0];if(Oe.value===null&&(Oe.label===null||Oe.label===void 0))return[]}return se.map(function(Ye){var Fe;return ie(ie({},Ye),{},{label:(Fe=typeof P=="function"?P(Ye):Ye.label)!==null&&Fe!==void 0?Fe:Ye.value})})},[e,se,P]),Pe=w.exports.useMemo(function(){return new Set(se.map(function(Oe){return Oe.value}))},[se]);w.exports.useEffect(function(){if(e==="combobox"){var Oe,Ye=(Oe=se[0])===null||Oe===void 0?void 0:Oe.value;Q(H3(Ye)?String(Ye):"")}},[se]);var De=xb(function(Oe,Ye){var Fe=Ye!=null?Ye:Oe;return Z(Z({},W.value,Oe),W.label,Fe)}),Ke=w.exports.useMemo(function(){if(e!=="tags")return ee;var Oe=st(ee),Ye=function(Ve){return ue.has(Ve)};return st(se).sort(function(Fe,Ve){return Fe.value<Ve.value?-1:1}).forEach(function(Fe){var Ve=Fe.value;Ye(Ve)||Oe.push(De(Ve,Fe.label))}),Oe},[De,ee,ue,se,e]),Be=zk(Ke,W,Y,$,g),He=w.exports.useMemo(function(){return e!=="tags"||!Y||Be.some(function(Oe){return Oe[g||"value"]===Y})||Be.some(function(Oe){return Oe[W.value]===Y})?Be:[De(Y)].concat(st(Be))},[De,g,e,Be,Y,W]),We=w.exports.useMemo(function(){return m?st(He).sort(function(Oe,Ye){return m(Oe,Ye)}):He},[He,m]),yt=w.exports.useMemo(function(){return vk(We,{fieldNames:W,childrenAsData:G})},[We,W,G]),bt=function(Ye){var Fe=xe(Ye);if(J(Fe),B&&(Fe.length!==se.length||Fe.some(function(tt,gn){var dn;return((dn=se[gn])===null||dn===void 0?void 0:dn.value)!==(tt==null?void 0:tt.value)}))){var Ve=D?Fe:Fe.map(function(tt){return tt.value}),Ee=Fe.map(function(tt){return jm(Re(tt.value))});B(j?Ve:Ve[0],j?Ee:Ee[0])}},Mt=w.exports.useState(null),ce=_e(Mt,2),le=ce[0],he=ce[1],Se=w.exports.useState(0),me=_e(Se,2),Le=me[0],Qe=me[1],at=E!==void 0?E:e!=="combobox",lt=w.exports.useCallback(function(Oe,Ye){var Fe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ve=Fe.source,Ee=Ve===void 0?"keyboard":Ve;Qe(Ye),o&&e==="combobox"&&Oe!==null&&Ee==="keyboard"&&he(String(Oe))},[o,e]),ze=function(Ye,Fe,Ve){var Ee=function(){var on,En=Re(Ye);return[D?{label:En==null?void 0:En[W.label],value:Ye,key:(on=En==null?void 0:En.key)!==null&&on!==void 0?on:Ye}:Ye,jm(En)]};if(Fe&&h){var tt=Ee(),gn=_e(tt,2),dn=gn[0],On=gn[1];h(dn,On)}else if(!Fe&&_&&Ve!=="clear"){var At=Ee(),Cn=_e(At,2),dt=Cn[0],ft=Cn[1];_(dt,ft)}},Rt=xb(function(Oe,Ye){var Fe,Ve=j?Ye.selected:!0;Ve?Fe=j?[].concat(st(se),[Oe]):[Oe]:Fe=se.filter(function(Ee){return Ee.value!==Oe}),bt(Fe),ze(Oe,Ve),e==="combobox"?he(""):(!Wm||d)&&(Q(""),he(""))}),et=function(Ye,Fe){bt(Ye);var Ve=Fe.type,Ee=Fe.values;(Ve==="remove"||Ve==="clear")&&Ee.forEach(function(tt){ze(tt.value,!1,Ve)})},Ne=function(Ye,Fe){if(Q(Ye),he(null),Fe.source==="submit"){var Ve=(Ye||"").trim();if(Ve){var Ee=Array.from(new Set([].concat(st(Pe),[Ve])));bt(Ee),ze(Ve,!0),Q("")}return}Fe.source!=="blur"&&(e==="combobox"&&bt(Ye),c==null||c(Ye))},ct=function(Ye){var Fe=Ye;e!=="tags"&&(Fe=Ye.map(function(Ee){var tt=oe.get(Ee);return tt==null?void 0:tt.value}).filter(function(Ee){return Ee!==void 0}));var Ve=Array.from(new Set([].concat(st(Pe),st(Fe))));bt(Ve),Ve.forEach(function(Ee){ze(Ee,!0)})},Bt=w.exports.useMemo(function(){var Oe=M!==!1&&v!==!1;return ie(ie({},re),{},{flattenOptions:yt,onActiveValue:lt,defaultActiveFirstOption:at,onSelect:Rt,menuItemSelectedIcon:T,rawValues:Pe,fieldNames:W,virtual:Oe,direction:L,listHeight:N,listItemHeight:O,childrenAsData:G,maxCount:k,optionRender:S})},[k,re,yt,lt,at,Rt,T,Pe,W,M,v,L,N,O,G,S]);return w.exports.createElement(tx.Provider,{value:Bt},w.exports.createElement(mk,St({},V,{id:U,prefixCls:i,ref:r,omitDomProps:Qk,mode:e,displayValues:de,onDisplayValuesChange:et,direction:L,searchValue:Y,onSearch:Ne,autoClearSearchValue:d,onSearchSplit:ct,dropdownMatchSelectWidth:v,OptionList:Vk,emptyOptions:!yt.length,activeValue:le,activeDescendantId:"".concat(U,"_list_").concat(Le)})))}),ax=Jk;ax.Option=rx;ax.OptGroup=nx;function Zk(n,r,a){return mt({[`${n}-status-success`]:r==="success",[`${n}-status-warning`]:r==="warning",[`${n}-status-error`]:r==="error",[`${n}-status-validating`]:r==="validating",[`${n}-has-feedback`]:a})}const eV=(n,r)=>r||n,tV=()=>{const[,n]=wi(),a=new ir(n.colorBgBase).toHsl().l<.5?{opacity:.65}:{};return w.exports.createElement("svg",{style:a,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},w.exports.createElement("g",{fill:"none",fillRule:"evenodd"},w.exports.createElement("g",{transform:"translate(24 31.67)"},w.exports.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),w.exports.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),w.exports.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),w.exports.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),w.exports.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),w.exports.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),w.exports.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},w.exports.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),w.exports.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))};var nV=tV;const rV=()=>{const[,n]=wi(),{colorFill:r,colorFillTertiary:a,colorFillQuaternary:e,colorBgContainer:t}=n,{borderColor:i,shadowColor:o,contentColor:s}=w.exports.useMemo(()=>({borderColor:new ir(r).onBackground(t).toHexShortString(),shadowColor:new ir(a).onBackground(t).toHexShortString(),contentColor:new ir(e).onBackground(t).toHexShortString()}),[r,a,e,t]);return w.exports.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},w.exports.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},w.exports.createElement("ellipse",{fill:o,cx:"32",cy:"33",rx:"32",ry:"7"}),w.exports.createElement("g",{fillRule:"nonzero",stroke:i},w.exports.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),w.exports.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:s}))))};var aV=rV;const iV=n=>{const{componentCls:r,margin:a,marginXS:e,marginXL:t,fontSize:i,lineHeight:o}=n;return{[r]:{marginInline:e,fontSize:i,lineHeight:o,textAlign:"center",[`${r}-image`]:{height:n.emptyImgHeight,marginBottom:e,opacity:n.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},[`${r}-description`]:{color:n.colorText},[`${r}-footer`]:{marginTop:a},"&-normal":{marginBlock:t,color:n.colorTextDescription,[`${r}-description`]:{color:n.colorTextDescription},[`${r}-image`]:{height:n.emptyImgHeightMD}},"&-small":{marginBlock:e,color:n.colorTextDescription,[`${r}-image`]:{height:n.emptyImgHeightSM}}}}};var oV=Pd("Empty",n=>{const{componentCls:r,controlHeightLG:a,calc:e}=n,t=Pi(n,{emptyImgCls:`${r}-img`,emptyImgHeight:e(a).mul(2.5).equal(),emptyImgHeightMD:a,emptyImgHeightSM:e(a).mul(.875).equal()});return[iV(t)]}),sV=globalThis&&globalThis.__rest||function(n,r){var a={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&r.indexOf(e)<0&&(a[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,e=Object.getOwnPropertySymbols(n);t<e.length;t++)r.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(n,e[t])&&(a[e[t]]=n[e[t]]);return a};const Nw=w.exports.createElement(nV,null),Fw=w.exports.createElement(aV,null),ix=n=>{var{className:r,rootClassName:a,prefixCls:e,image:t=Nw,description:i,children:o,imageStyle:s,style:l}=n,u=sV(n,["className","rootClassName","prefixCls","image","description","children","imageStyle","style"]);const{getPrefixCls:c,direction:f,empty:d}=w.exports.useContext(Jr),h=c("empty",e),[_,p,v]=oV(h),[y]=uN("Empty"),m=typeof i!="undefined"?i:y==null?void 0:y.description,g=typeof m=="string"?m:"empty";let x=null;return typeof t=="string"?x=w.exports.createElement("img",{alt:g,src:t}):x=t,_(w.exports.createElement("div",Object.assign({className:mt(p,v,h,d==null?void 0:d.className,{[`${h}-normal`]:t===Fw,[`${h}-rtl`]:f==="rtl"},r,a),style:Object.assign(Object.assign({},d==null?void 0:d.style),l)},u),w.exports.createElement("div",{className:`${h}-image`,style:s},x),m&&w.exports.createElement("div",{className:`${h}-description`},m),o&&w.exports.createElement("div",{className:`${h}-footer`},o)))};ix.PRESENTED_IMAGE_DEFAULT=Nw;ix.PRESENTED_IMAGE_SIMPLE=Fw;var Jc=ix;const lV=n=>{const{componentName:r}=n,{getPrefixCls:a}=w.exports.useContext(Jr),e=a("empty");switch(r){case"Table":case"List":return Wt.createElement(Jc,{image:Jc.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return Wt.createElement(Jc,{image:Jc.PRESENTED_IMAGE_SIMPLE,className:`${e}-small`});default:return Wt.createElement(Jc,null)}};var uV=lV;const cV=["outlined","borderless","filled"],fV=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;const a=w.exports.useContext(WB);let e;typeof n!="undefined"?e=n:r===!1?e="borderless":e=a!=null?a:"outlined";const t=cV.includes(e);return[e,t]};var dV=fV;const hV=n=>{const a={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:n==="scroll"?"scroll":"visible",dynamicInset:!0};return{bottomLeft:Object.assign(Object.assign({},a),{points:["tl","bl"],offset:[0,4]}),bottomRight:Object.assign(Object.assign({},a),{points:["tr","br"],offset:[0,4]}),topLeft:Object.assign(Object.assign({},a),{points:["bl","tl"],offset:[0,-4]}),topRight:Object.assign(Object.assign({},a),{points:["br","tr"],offset:[0,-4]})}};function vV(n,r){return n||hV(r)}const Sb=n=>{const{optionHeight:r,optionFontSize:a,optionLineHeight:e,optionPadding:t}=n;return{position:"relative",display:"block",minHeight:r,padding:t,color:n.colorText,fontWeight:"normal",fontSize:a,lineHeight:e,boxSizing:"border-box"}},pV=n=>{const{antCls:r,componentCls:a}=n,e=`${a}-item`,t=`&${r}-slide-up-enter${r}-slide-up-enter-active`,i=`&${r}-slide-up-appear${r}-slide-up-appear-active`,o=`&${r}-slide-up-leave${r}-slide-up-leave-active`,s=`${a}-dropdown-placement-`;return[{[`${a}-dropdown`]:Object.assign(Object.assign({},wd(n)),{position:"absolute",top:-9999,zIndex:n.zIndexPopup,boxSizing:"border-box",padding:n.paddingXXS,overflow:"hidden",fontSize:n.fontSize,fontVariant:"initial",backgroundColor:n.colorBgElevated,borderRadius:n.borderRadiusLG,outline:"none",boxShadow:n.boxShadowSecondary,[`
          ${t}${s}bottomLeft,
          ${i}${s}bottomLeft
        `]:{animationName:pw},[`
          ${t}${s}topLeft,
          ${i}${s}topLeft,
          ${t}${s}topRight,
          ${i}${s}topRight
        `]:{animationName:gw},[`${o}${s}bottomLeft`]:{animationName:_w},[`
          ${o}${s}topLeft,
          ${o}${s}topRight
        `]:{animationName:mw},"&-hidden":{display:"none"},[`${e}`]:Object.assign(Object.assign({},Sb(n)),{cursor:"pointer",transition:`background ${n.motionDurationSlow} ease`,borderRadius:n.borderRadiusSM,"&-group":{color:n.colorTextDescription,fontSize:n.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign({flex:"auto"},Dv),"&-state":{flex:"none",display:"flex",alignItems:"center"},[`&-active:not(${e}-option-disabled)`]:{backgroundColor:n.optionActiveBg},[`&-selected:not(${e}-option-disabled)`]:{color:n.optionSelectedColor,fontWeight:n.optionSelectedFontWeight,backgroundColor:n.optionSelectedBg,[`${e}-option-state`]:{color:n.colorPrimary},[`&:has(+ ${e}-option-selected:not(${e}-option-disabled))`]:{borderEndStartRadius:0,borderEndEndRadius:0,[`& + ${e}-option-selected:not(${e}-option-disabled)`]:{borderStartStartRadius:0,borderStartEndRadius:0}}},"&-disabled":{[`&${e}-option-selected`]:{backgroundColor:n.colorBgContainerDisabled},color:n.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:n.calc(n.controlPaddingHorizontal).mul(2).equal()}},"&-empty":Object.assign(Object.assign({},Sb(n)),{color:n.colorTextDisabled})}),"&-rtl":{direction:"rtl"}})},Uv(n,"slide-up"),Uv(n,"slide-down"),tb(n,"move-up"),tb(n,"move-down")]};var _V=pV;const Gv=2,gV=n=>{const{multipleSelectItemHeight:r,paddingXXS:a,lineWidth:e}=n,t=n.max(n.calc(a).sub(e).equal(),0),i=n.max(n.calc(t).sub(Gv).equal(),0);return{basePadding:t,containerPadding:i,itemHeight:wt(r),itemLineHeight:wt(n.calc(r).sub(n.calc(n.lineWidth).mul(2)).equal())}},mV=n=>{const{multipleSelectItemHeight:r,selectHeight:a,lineWidth:e}=n;return n.calc(a).sub(r).div(2).sub(e).equal()},yV=n=>{const{componentCls:r,iconCls:a,borderRadiusSM:e,motionDurationSlow:t,paddingXS:i,multipleItemColorDisabled:o,multipleItemBorderColorDisabled:s,colorIcon:l,colorIconHover:u}=n;return{[`${r}-selection-overflow`]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"},[`${r}-selection-item`]:{display:"flex",alignSelf:"center",flex:"none",boxSizing:"border-box",maxWidth:"100%",marginBlock:Gv,borderRadius:e,cursor:"default",transition:`font-size ${t}, line-height ${t}, height ${t}`,marginInlineEnd:n.calc(Gv).mul(2).equal(),paddingInlineStart:i,paddingInlineEnd:n.calc(i).div(2).equal(),[`${r}-disabled&`]:{color:o,borderColor:s,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:n.calc(i).div(2).equal(),overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},Xp()),{display:"inline-flex",alignItems:"center",color:l,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${a}`]:{verticalAlign:"-0.2em"},"&:hover":{color:u}})}}}},xV=(n,r)=>{const{componentCls:a}=n,e=`${a}-selection-overflow`,t=n.multipleSelectItemHeight,i=mV(n),o=r?`${a}-${r}`:"",s=gV(n);return{[`${a}-multiple${o}`]:Object.assign(Object.assign({},yV(n)),{[`${a}-selector`]:{display:"flex",flexWrap:"wrap",alignItems:"center",height:"100%",paddingInline:s.basePadding,paddingBlock:s.containerPadding,borderRadius:n.borderRadius,[`${a}-disabled&`]:{background:n.multipleSelectorBgDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${wt(Gv)} 0`,lineHeight:wt(t),visibility:"hidden",content:'"\\a0"'}},[`${a}-selection-item`]:{height:s.itemHeight,lineHeight:wt(s.itemLineHeight)},[`${e}-item + ${e}-item`]:{[`${a}-selection-search`]:{marginInlineStart:0}},[`${e}-item-suffix`]:{height:"100%"},[`${a}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:n.calc(n.inputPaddingHorizontalBase).sub(i).equal(),[`
          &-input,
          &-mirror
        `]:{height:t,fontFamily:n.fontFamily,lineHeight:wt(t),transition:`all ${n.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${a}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:n.inputPaddingHorizontalBase,insetInlineEnd:n.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${n.motionDurationSlow}`}})}};function fg(n,r){const{componentCls:a}=n,e=r?`${a}-${r}`:"",t={[`${a}-multiple${e}`]:{fontSize:n.fontSize,[`${a}-selector`]:{[`${a}-show-search&`]:{cursor:"text"}},[`
        &${a}-show-arrow ${a}-selector,
        &${a}-allow-clear ${a}-selector
      `]:{paddingInlineEnd:n.calc(n.fontSizeIcon).add(n.controlPaddingHorizontal).equal()}}};return[xV(n,r),t]}const SV=n=>{const{componentCls:r}=n,a=Pi(n,{selectHeight:n.controlHeightSM,multipleSelectItemHeight:n.multipleItemHeightSM,borderRadius:n.borderRadiusSM,borderRadiusSM:n.borderRadiusXS}),e=Pi(n,{fontSize:n.fontSizeLG,selectHeight:n.controlHeightLG,multipleSelectItemHeight:n.multipleItemHeightLG,borderRadius:n.borderRadiusLG,borderRadiusSM:n.borderRadius});return[fg(n),fg(a,"sm"),{[`${r}-multiple${r}-sm`]:{[`${r}-selection-placeholder`]:{insetInline:n.calc(n.controlPaddingHorizontalSM).sub(n.lineWidth).equal()},[`${r}-selection-search`]:{marginInlineStart:2}}},fg(e,"lg")]};var bV=SV;function dg(n,r){const{componentCls:a,inputPaddingHorizontalBase:e,borderRadius:t}=n,i=n.calc(n.controlHeight).sub(n.calc(n.lineWidth).mul(2)).equal(),o=r?`${a}-${r}`:"";return{[`${a}-single${o}`]:{fontSize:n.fontSize,height:n.controlHeight,[`${a}-selector`]:Object.assign(Object.assign({},wd(n,!0)),{display:"flex",borderRadius:t,[`${a}-selection-search`]:{position:"absolute",top:0,insetInlineStart:e,insetInlineEnd:e,bottom:0,"&-input":{width:"100%",WebkitAppearance:"textfield"}},[`
          ${a}-selection-item,
          ${a}-selection-placeholder
        `]:{padding:0,lineHeight:wt(i),transition:`all ${n.motionDurationSlow}, visibility 0s`,alignSelf:"center"},[`${a}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${a}-selection-item:empty:after`,`${a}-selection-placeholder:empty:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`
        &${a}-show-arrow ${a}-selection-item,
        &${a}-show-arrow ${a}-selection-placeholder
      `]:{paddingInlineEnd:n.showArrowPaddingInlineEnd},[`&${a}-open ${a}-selection-item`]:{color:n.colorTextPlaceholder},[`&:not(${a}-customize-input)`]:{[`${a}-selector`]:{width:"100%",height:"100%",padding:`0 ${wt(e)}`,[`${a}-selection-search-input`]:{height:i},"&:after":{lineHeight:wt(i)}}},[`&${a}-customize-input`]:{[`${a}-selector`]:{"&:after":{display:"none"},[`${a}-selection-search`]:{position:"static",width:"100%"},[`${a}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${wt(e)}`,"&:after":{display:"none"}}}}}}}function CV(n){const{componentCls:r}=n,a=n.calc(n.controlPaddingHorizontalSM).sub(n.lineWidth).equal();return[dg(n),dg(Pi(n,{controlHeight:n.controlHeightSM,borderRadius:n.borderRadiusSM}),"sm"),{[`${r}-single${r}-sm`]:{[`&:not(${r}-customize-input)`]:{[`${r}-selection-search`]:{insetInlineStart:a,insetInlineEnd:a},[`${r}-selector`]:{padding:`0 ${wt(a)}`},[`&${r}-show-arrow ${r}-selection-search`]:{insetInlineEnd:n.calc(a).add(n.calc(n.fontSize).mul(1.5)).equal()},[`
            &${r}-show-arrow ${r}-selection-item,
            &${r}-show-arrow ${r}-selection-placeholder
          `]:{paddingInlineEnd:n.calc(n.fontSize).mul(1.5).equal()}}}},dg(Pi(n,{controlHeight:n.singleItemHeightLG,fontSize:n.fontSizeLG,borderRadius:n.borderRadiusLG}),"lg")]}const EV=n=>{const{fontSize:r,lineHeight:a,controlHeight:e,controlHeightSM:t,controlHeightLG:i,paddingXXS:o,controlPaddingHorizontal:s,zIndexPopupBase:l,colorText:u,fontWeightStrong:c,controlItemBgActive:f,controlItemBgHover:d,colorBgContainer:h,colorFillSecondary:_,colorBgContainerDisabled:p,colorTextDisabled:v}=n,y=e-o*2,m=t-o*2,g=i-o*2;return{zIndexPopup:l+50,optionSelectedColor:u,optionSelectedFontWeight:c,optionSelectedBg:f,optionActiveBg:d,optionPadding:`${(e-r*a)/2}px ${s}px`,optionFontSize:r,optionLineHeight:a,optionHeight:e,selectorBg:h,clearBg:h,singleItemHeightLG:i,multipleItemBg:_,multipleItemBorderColor:"transparent",multipleItemHeight:y,multipleItemHeightSM:m,multipleItemHeightLG:g,multipleSelectorBgDisabled:p,multipleItemColorDisabled:v,multipleItemBorderColorDisabled:"transparent",showArrowPaddingInlineEnd:Math.ceil(n.fontSize*1.25)}},Dw=(n,r)=>{const{componentCls:a,antCls:e,controlOutlineWidth:t}=n;return{[`&:not(${a}-customize-input) ${a}-selector`]:{border:`${wt(n.lineWidth)} ${n.lineType} ${r.borderColor}`,background:n.selectorBg},[`&:not(${a}-disabled):not(${a}-customize-input):not(${e}-pagination-size-changer)`]:{[`&:hover ${a}-selector`]:{borderColor:r.hoverBorderHover},[`${a}-focused& ${a}-selector`]:{borderColor:r.activeBorderColor,boxShadow:`0 0 0 ${wt(t)} ${r.activeShadowColor}`,outline:0}}}},bb=(n,r)=>({[`&${n.componentCls}-status-${r.status}`]:Object.assign({},Dw(n,r))}),TV=n=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign({},Dw(n,{borderColor:n.colorBorder,hoverBorderHover:n.colorPrimaryHover,activeBorderColor:n.colorPrimary,activeShadowColor:n.controlOutline})),bb(n,{status:"error",borderColor:n.colorError,hoverBorderHover:n.colorErrorHover,activeBorderColor:n.colorError,activeShadowColor:n.colorErrorOutline})),bb(n,{status:"warning",borderColor:n.colorWarning,hoverBorderHover:n.colorWarningHover,activeBorderColor:n.colorWarning,activeShadowColor:n.colorWarningOutline})),{[`&${n.componentCls}-disabled`]:{[`&:not(${n.componentCls}-customize-input) ${n.componentCls}-selector`]:{background:n.colorBgContainerDisabled,color:n.colorTextDisabled}},[`&${n.componentCls}-multiple ${n.componentCls}-selection-item`]:{background:n.multipleItemBg,border:`${wt(n.lineWidth)} ${n.lineType} ${n.multipleItemBorderColor}`}})}),Bw=(n,r)=>{const{componentCls:a,antCls:e}=n;return{[`&:not(${a}-customize-input) ${a}-selector`]:{background:r.bg,border:`${wt(n.lineWidth)} ${n.lineType} transparent`,color:r.color},[`&:not(${a}-disabled):not(${a}-customize-input):not(${e}-pagination-size-changer)`]:{[`&:hover ${a}-selector`]:{background:r.hoverBg},[`${a}-focused& ${a}-selector`]:{background:n.selectorBg,borderColor:r.activeBorderColor,outline:0}}}},Cb=(n,r)=>({[`&${n.componentCls}-status-${r.status}`]:Object.assign({},Bw(n,r))}),RV=n=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign({},Bw(n,{bg:n.colorFillTertiary,hoverBg:n.colorFillSecondary,activeBorderColor:n.colorPrimary,color:n.colorText})),Cb(n,{status:"error",bg:n.colorErrorBg,hoverBg:n.colorErrorBgHover,activeBorderColor:n.colorError,color:n.colorError})),Cb(n,{status:"warning",bg:n.colorWarningBg,hoverBg:n.colorWarningBgHover,activeBorderColor:n.colorWarning,color:n.colorWarning})),{[`&${n.componentCls}-disabled`]:{[`&:not(${n.componentCls}-customize-input) ${n.componentCls}-selector`]:{borderColor:n.colorBorder,background:n.colorBgContainerDisabled,color:n.colorTextDisabled}},[`&${n.componentCls}-multiple ${n.componentCls}-selection-item`]:{background:n.colorBgContainer,border:`${wt(n.lineWidth)} ${n.lineType} ${n.colorSplit}`}})}),AV=n=>({"&-borderless":{[`${n.componentCls}-selector`]:{background:"transparent",borderColor:"transparent"},[`&${n.componentCls}-disabled`]:{[`&:not(${n.componentCls}-customize-input) ${n.componentCls}-selector`]:{color:n.colorTextDisabled}},[`&${n.componentCls}-multiple ${n.componentCls}-selection-item`]:{background:n.multipleItemBg,border:`${wt(n.lineWidth)} ${n.lineType} ${n.multipleItemBorderColor}`}}}),wV=n=>({[n.componentCls]:Object.assign(Object.assign(Object.assign({},TV(n)),RV(n)),AV(n))});var PV=wV;const MV=n=>{const{componentCls:r}=n;return{position:"relative",transition:`all ${n.motionDurationMid} ${n.motionEaseInOut}`,input:{cursor:"pointer"},[`${r}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit",height:"100%"}},[`${r}-disabled&`]:{cursor:"not-allowed",input:{cursor:"not-allowed"}}}},OV=n=>{const{componentCls:r}=n;return{[`${r}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none",fontFamily:"inherit","&::-webkit-search-cancel-button":{display:"none","-webkit-appearance":"none"}}}},IV=n=>{const{antCls:r,componentCls:a,inputPaddingHorizontalBase:e,iconCls:t}=n;return{[a]:Object.assign(Object.assign({},wd(n)),{position:"relative",display:"inline-block",cursor:"pointer",[`&:not(${a}-customize-input) ${a}-selector`]:Object.assign(Object.assign({},MV(n)),OV(n)),[`${a}-selection-item`]:Object.assign(Object.assign({flex:1,fontWeight:"normal",position:"relative",userSelect:"none"},Dv),{[`> ${r}-typography`]:{display:"inline"}}),[`${a}-selection-placeholder`]:Object.assign(Object.assign({},Dv),{flex:1,color:n.colorTextPlaceholder,pointerEvents:"none"}),[`${a}-arrow`]:Object.assign(Object.assign({},Xp()),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:e,height:n.fontSizeIcon,marginTop:n.calc(n.fontSizeIcon).mul(-1).div(2).equal(),color:n.colorTextQuaternary,fontSize:n.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",transition:`opacity ${n.motionDurationSlow} ease`,[t]:{verticalAlign:"top",transition:`transform ${n.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${a}-suffix)`]:{pointerEvents:"auto"}},[`${a}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${a}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:e,zIndex:1,display:"inline-block",width:n.fontSizeIcon,height:n.fontSizeIcon,marginTop:n.calc(n.fontSizeIcon).mul(-1).div(2).equal(),color:n.colorTextQuaternary,fontSize:n.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",cursor:"pointer",opacity:0,transition:`color ${n.motionDurationMid} ease, opacity ${n.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:n.colorTextTertiary}},"&:hover":{[`${a}-clear`]:{opacity:1},[`${a}-arrow:not(:last-child)`]:{opacity:0}}}),[`${a}-has-feedback`]:{[`${a}-clear`]:{insetInlineEnd:n.calc(e).add(n.fontSize).add(n.paddingXS).equal()}}}},LV=n=>{const{componentCls:r}=n;return[{[r]:{[`&${r}-in-form-item`]:{width:"100%"}}},IV(n),CV(n),bV(n),_V(n),{[`${r}-rtl`]:{direction:"rtl"}},VD(n,{borderElCls:`${r}-selector`,focusElCls:`${r}-focused`})]};var NV=Pd("Select",(n,r)=>{let{rootPrefixCls:a}=r;const e=Pi(n,{rootPrefixCls:a,inputPaddingHorizontalBase:n.calc(n.paddingSM).sub(1).equal(),multipleSelectItemHeight:n.multipleItemHeight,selectHeight:n.controlHeight});return[LV(e),PV(e)]},EV,{unitless:{optionLineHeight:!0,optionSelectedFontWeight:!0}}),FV={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},DV=FV,BV=function(r,a){return w.exports.createElement(Mo,St({},r,{ref:a,icon:DV}))},kV=w.exports.forwardRef(BV),VV=kV,UV={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},zV=UV,GV=function(r,a){return w.exports.createElement(Mo,St({},r,{ref:a,icon:zV}))},HV=w.exports.forwardRef(GV),jV=HV,WV={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},$V=WV,XV=function(r,a){return w.exports.createElement(Mo,St({},r,{ref:a,icon:$V}))},KV=w.exports.forwardRef(XV),YV=KV;function QV(n){let{suffixIcon:r,clearIcon:a,menuItemSelectedIcon:e,removeIcon:t,loading:i,multiple:o,hasFeedback:s,prefixCls:l,showSuffixIcon:u,feedbackIcon:c,showArrow:f,componentName:d}=n;const h=a!=null?a:w.exports.createElement(oD,null),_=m=>r===null&&!s&&!f?null:w.exports.createElement(w.exports.Fragment,null,u!==!1&&m,s&&c);let p=null;if(r!==void 0)p=_(r);else if(i)p=_(w.exports.createElement(ED,{spin:!0}));else{const m=`${l}-suffix`;p=g=>{let{open:x,showSearch:b}=g;return _(x&&b?w.exports.createElement(YV,{className:m}):w.exports.createElement(jV,{className:m}))}}let v=null;e!==void 0?v=e:o?v=w.exports.createElement(VV,null):v=null;let y=null;return t!==void 0?y=t:y=w.exports.createElement(fD,null),{clearIcon:h,suffixIcon:p,itemIcon:v,removeIcon:y}}function qV(n,r){return r!==void 0?r:n!==null}var JV=globalThis&&globalThis.__rest||function(n,r){var a={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&r.indexOf(e)<0&&(a[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,e=Object.getOwnPropertySymbols(n);t<e.length;t++)r.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(n,e[t])&&(a[e[t]]=n[e[t]]);return a};const kw="SECRET_COMBOBOX_MODE_DO_NOT_USE",ZV=(n,r)=>{var a;const{prefixCls:e,bordered:t,className:i,rootClassName:o,getPopupContainer:s,popupClassName:l,dropdownClassName:u,listHeight:c=256,placement:f,listItemHeight:d,size:h,disabled:_,notFoundContent:p,status:v,builtinPlacements:y,dropdownMatchSelectWidth:m,popupMatchSelectWidth:g,direction:x,style:b,allowClear:S,variant:C,dropdownStyle:E,transitionName:T,tagRender:M,maxCount:L}=n,F=JV(n,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","direction","style","allowClear","variant","dropdownStyle","transitionName","tagRender","maxCount"]),{getPopupContainer:N,getPrefixCls:I,renderEmpty:O,direction:P,virtual:R,popupMatchSelectWidth:A,popupOverflow:D,select:B}=w.exports.useContext(Jr),[,k]=wi(),V=d!=null?d:k==null?void 0:k.controlHeight,U=I("select",e),j=I(),G=x!=null?x:P,{compactSize:$,compactItemClassnames:W}=FD(U,G),[K,q]=dV(C,t),Y=tw(U),[Q,re,ue]=NV(U,Y),oe=w.exports.useMemo(()=>{const{mode:le}=n;if(le!=="combobox")return le===kw?"combobox":le},[n.mode]),ee=oe==="multiple"||oe==="tags",xe=qV(n.suffixIcon,n.showArrow),Te=(a=g!=null?g:m)!==null&&a!==void 0?a:A,{status:Ce,hasFeedback:pe,isFormItemInput:J,feedbackIcon:ae}=w.exports.useContext(jB),ne=eV(Ce,v);let ge;p!==void 0?ge=p:oe==="combobox"?ge=null:ge=(O==null?void 0:O("Select"))||w.exports.createElement(uV,{componentName:"Select"});const{suffixIcon:se,itemIcon:Re,removeIcon:de,clearIcon:Pe}=QV(Object.assign(Object.assign({},F),{multiple:ee,hasFeedback:pe,feedbackIcon:ae,showSuffixIcon:xe,prefixCls:U,componentName:"Select"})),De=S===!0?{clearIcon:Pe}:S,Ke=_s(F,["suffixIcon","itemIcon"]),Be=mt(l||u,{[`${U}-dropdown-${G}`]:G==="rtl"},o,ue,Y,re),He=ND(le=>{var he;return(he=h!=null?h:$)!==null&&he!==void 0?he:le}),We=w.exports.useContext(PA),yt=_!=null?_:We,bt=mt({[`${U}-lg`]:He==="large",[`${U}-sm`]:He==="small",[`${U}-rtl`]:G==="rtl",[`${U}-${K}`]:q,[`${U}-in-form-item`]:J},Zk(U,ne,pe),W,B==null?void 0:B.className,i,o,ue,Y,re),Mt=w.exports.useMemo(()=>f!==void 0?f:G==="rtl"?"bottomRight":"bottomLeft",[f,G]),[ce]=qy("SelectLike",E==null?void 0:E.zIndex);return Q(w.exports.createElement(ax,Object.assign({ref:r,virtual:R,showSearch:B==null?void 0:B.showSearch},Ke,{style:Object.assign(Object.assign({},B==null?void 0:B.style),b),dropdownMatchSelectWidth:Te,transitionName:aw(j,"slide-up",T),builtinPlacements:vV(y,D),listHeight:c,listItemHeight:V,mode:oe,prefixCls:U,placement:Mt,direction:G,suffixIcon:se,menuItemSelectedIcon:Re,removeIcon:de,allowClear:De,notFoundContent:ge,className:bt,getPopupContainer:s||N,dropdownClassName:Be,disabled:yt,dropdownStyle:Object.assign(Object.assign({},E),{zIndex:ce}),maxCount:ee?L:void 0,tagRender:ee?M:void 0})))},Pc=w.exports.forwardRef(ZV),e4=C3(Pc);Pc.SECRET_COMBOBOX_MODE_DO_NOT_USE=kw;Pc.Option=rx;Pc.OptGroup=nx;Pc._InternalPanelDoNotUseOrYouWillBeFired=e4;var t4=Pc;function Vw(n){var r=n.children,a=n.prefixCls,e=n.id,t=n.overlayInnerStyle,i=n.className,o=n.style;return w.exports.createElement("div",{className:mt("".concat(a,"-content"),i),style:o},w.exports.createElement("div",{className:"".concat(a,"-inner"),id:e,role:"tooltip",style:t},typeof r=="function"?r():r))}var uu={shiftX:64,adjustY:1},cu={adjustX:1,shiftY:!0},ci=[0,0],n4={left:{points:["cr","cl"],overflow:cu,offset:[-4,0],targetOffset:ci},right:{points:["cl","cr"],overflow:cu,offset:[4,0],targetOffset:ci},top:{points:["bc","tc"],overflow:uu,offset:[0,-4],targetOffset:ci},bottom:{points:["tc","bc"],overflow:uu,offset:[0,4],targetOffset:ci},topLeft:{points:["bl","tl"],overflow:uu,offset:[0,-4],targetOffset:ci},leftTop:{points:["tr","tl"],overflow:cu,offset:[-4,0],targetOffset:ci},topRight:{points:["br","tr"],overflow:uu,offset:[0,-4],targetOffset:ci},rightTop:{points:["tl","tr"],overflow:cu,offset:[4,0],targetOffset:ci},bottomRight:{points:["tr","br"],overflow:uu,offset:[0,4],targetOffset:ci},rightBottom:{points:["bl","br"],overflow:cu,offset:[4,0],targetOffset:ci},bottomLeft:{points:["tl","bl"],overflow:uu,offset:[0,4],targetOffset:ci},leftBottom:{points:["br","bl"],overflow:cu,offset:[-4,0],targetOffset:ci}},r4=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],a4=function(r,a){var e=r.overlayClassName,t=r.trigger,i=t===void 0?["hover"]:t,o=r.mouseEnterDelay,s=o===void 0?0:o,l=r.mouseLeaveDelay,u=l===void 0?.1:l,c=r.overlayStyle,f=r.prefixCls,d=f===void 0?"rc-tooltip":f,h=r.children,_=r.onVisibleChange,p=r.afterVisibleChange,v=r.transitionName,y=r.animation,m=r.motion,g=r.placement,x=g===void 0?"right":g,b=r.align,S=b===void 0?{}:b,C=r.destroyTooltipOnHide,E=C===void 0?!1:C,T=r.defaultVisible,M=r.getTooltipContainer,L=r.overlayInnerStyle;r.arrowContent;var F=r.overlay,N=r.id,I=r.showArrow,O=I===void 0?!0:I,P=Zt(r,r4),R=w.exports.useRef(null);w.exports.useImperativeHandle(a,function(){return R.current});var A=ie({},P);"visible"in r&&(A.popupVisible=r.visible);var D=function(){return w.exports.createElement(Vw,{key:"content",prefixCls:d,id:N,overlayInnerStyle:L},F)};return w.exports.createElement(ex,St({popupClassName:e,prefixCls:d,popup:D,action:i,builtinPlacements:n4,popupPlacement:x,ref:R,popupAlign:S,getPopupContainer:M,onPopupVisibleChange:_,afterPopupVisibleChange:p,popupTransitionName:v,popupAnimation:y,popupMotion:m,defaultPopupVisible:T,autoDestroy:E,mouseLeaveDelay:u,popupStyle:c,mouseEnterDelay:s,arrow:O},A),h)},i4=w.exports.forwardRef(a4);function o4(n){const{sizePopupArrow:r,borderRadiusXS:a,borderRadiusOuter:e}=n,t=r/2,i=0,o=t,s=e*1/Math.sqrt(2),l=t-e*(1-1/Math.sqrt(2)),u=t-a*(1/Math.sqrt(2)),c=e*(Math.sqrt(2)-1)+a*(1/Math.sqrt(2)),f=2*t-u,d=c,h=2*t-s,_=l,p=2*t-i,v=o,y=t*Math.sqrt(2)+e*(Math.sqrt(2)-2),m=e*(Math.sqrt(2)-1),g=`polygon(${m}px 100%, 50% ${m}px, ${2*t-m}px 100%, ${m}px 100%)`,x=`path('M ${i} ${o} A ${e} ${e} 0 0 0 ${s} ${l} L ${u} ${c} A ${a} ${a} 0 0 1 ${f} ${d} L ${h} ${_} A ${e} ${e} 0 0 0 ${p} ${v} Z')`;return{arrowShadowWidth:y,arrowPath:x,arrowPolygon:g}}const s4=(n,r,a)=>{const{sizePopupArrow:e,arrowPolygon:t,arrowPath:i,arrowShadowWidth:o,borderRadiusXS:s,calc:l}=n;return{pointerEvents:"none",width:e,height:e,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:e,height:l(e).div(2).equal(),background:r,clipPath:{_multi_value_:!0,value:[t,i]},content:'""'},"&::after":{content:'""',position:"absolute",width:o,height:o,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${wt(s)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:a,zIndex:0,background:"transparent"}}},Uw=8;function zw(n){const{contentRadius:r,limitVerticalRadius:a}=n,e=r>12?r+2:12;return{arrowOffsetHorizontal:e,arrowOffsetVertical:a?Uw:e}}function yh(n,r){return n?r:{}}function l4(n,r,a){const{componentCls:e,boxShadowPopoverArrow:t,arrowOffsetVertical:i,arrowOffsetHorizontal:o}=n,{arrowDistance:s=0,arrowPlacement:l={left:!0,right:!0,top:!0,bottom:!0}}=a||{};return{[e]:Object.assign(Object.assign(Object.assign(Object.assign({[`${e}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},s4(n,r,t)),{"&:before":{background:r}})]},yh(!!l.top,{[[`&-placement-top > ${e}-arrow`,`&-placement-topLeft > ${e}-arrow`,`&-placement-topRight > ${e}-arrow`].join(",")]:{bottom:s,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${e}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft > ${e}-arrow`]:{left:{_skip_check_:!0,value:o}},[`&-placement-topRight > ${e}-arrow`]:{right:{_skip_check_:!0,value:o}}})),yh(!!l.bottom,{[[`&-placement-bottom > ${e}-arrow`,`&-placement-bottomLeft > ${e}-arrow`,`&-placement-bottomRight > ${e}-arrow`].join(",")]:{top:s,transform:"translateY(-100%)"},[`&-placement-bottom > ${e}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft > ${e}-arrow`]:{left:{_skip_check_:!0,value:o}},[`&-placement-bottomRight > ${e}-arrow`]:{right:{_skip_check_:!0,value:o}}})),yh(!!l.left,{[[`&-placement-left > ${e}-arrow`,`&-placement-leftTop > ${e}-arrow`,`&-placement-leftBottom > ${e}-arrow`].join(",")]:{right:{_skip_check_:!0,value:s},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${e}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${e}-arrow`]:{top:i},[`&-placement-leftBottom > ${e}-arrow`]:{bottom:i}})),yh(!!l.right,{[[`&-placement-right > ${e}-arrow`,`&-placement-rightTop > ${e}-arrow`,`&-placement-rightBottom > ${e}-arrow`].join(",")]:{left:{_skip_check_:!0,value:s},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${e}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${e}-arrow`]:{top:i},[`&-placement-rightBottom > ${e}-arrow`]:{bottom:i}}))}}function u4(n,r,a,e){if(e===!1)return{adjustX:!1,adjustY:!1};const t=e&&typeof e=="object"?e:{},i={};switch(n){case"top":case"bottom":i.shiftX=r.arrowOffsetHorizontal*2+a,i.shiftY=!0,i.adjustY=!0;break;case"left":case"right":i.shiftY=r.arrowOffsetVertical*2+a,i.shiftX=!0,i.adjustX=!0;break}const o=Object.assign(Object.assign({},i),t);return o.shiftX||(o.adjustX=!0),o.shiftY||(o.adjustY=!0),o}const Eb={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},c4={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},f4=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function d4(n){const{arrowWidth:r,autoAdjustOverflow:a,arrowPointAtCenter:e,offset:t,borderRadius:i,visibleFirst:o}=n,s=r/2,l={};return Object.keys(Eb).forEach(u=>{const c=e&&c4[u]||Eb[u],f=Object.assign(Object.assign({},c),{offset:[0,0],dynamicInset:!0});switch(l[u]=f,f4.has(u)&&(f.autoArrow=!1),u){case"top":case"topLeft":case"topRight":f.offset[1]=-s-t;break;case"bottom":case"bottomLeft":case"bottomRight":f.offset[1]=s+t;break;case"left":case"leftTop":case"leftBottom":f.offset[0]=-s-t;break;case"right":case"rightTop":case"rightBottom":f.offset[0]=s+t;break}const d=zw({contentRadius:i,limitVerticalRadius:!0});if(e)switch(u){case"topLeft":case"bottomLeft":f.offset[0]=-d.arrowOffsetHorizontal-s;break;case"topRight":case"bottomRight":f.offset[0]=d.arrowOffsetHorizontal+s;break;case"leftTop":case"rightTop":f.offset[1]=-d.arrowOffsetHorizontal-s;break;case"leftBottom":case"rightBottom":f.offset[1]=d.arrowOffsetHorizontal+s;break}f.overflow=u4(u,d,r,a),o&&(f.htmlRegion="visibleFirst")}),l}const h4=n=>{const{componentCls:r,tooltipMaxWidth:a,tooltipColor:e,tooltipBg:t,tooltipBorderRadius:i,zIndexPopup:o,controlHeight:s,boxShadowSecondary:l,paddingSM:u,paddingXS:c}=n;return[{[r]:Object.assign(Object.assign(Object.assign(Object.assign({},wd(n)),{position:"absolute",zIndex:o,display:"block",width:"max-content",maxWidth:a,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":t,[`${r}-inner`]:{minWidth:s,minHeight:s,padding:`${wt(n.calc(u).div(2).equal())} ${wt(c)}`,color:e,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:t,borderRadius:i,boxShadow:l,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${r}-inner`]:{borderRadius:n.min(i,Uw)}},[`${r}-content`]:{position:"relative"}}),fF(n,(f,d)=>{let{darkColor:h}=d;return{[`&${r}-${f}`]:{[`${r}-inner`]:{backgroundColor:h},[`${r}-arrow`]:{"--antd-arrow-background-color":h}}}})),{"&-rtl":{direction:"rtl"}})},l4(n,"var(--antd-arrow-background-color)"),{[`${r}-pure`]:{position:"relative",maxWidth:"none",margin:n.sizePopupArrow}}]},v4=n=>Object.assign(Object.assign({zIndexPopup:n.zIndexPopupBase+70},zw({contentRadius:n.borderRadius,limitVerticalRadius:!0})),o4(Pi(n,{borderRadiusOuter:Math.min(n.borderRadiusOuter,4)})));var Gw=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Pd("Tooltip",e=>{const{borderRadius:t,colorTextLightSolid:i,colorBgSpotlight:o}=e,s=Pi(e,{tooltipMaxWidth:250,tooltipColor:i,tooltipBorderRadius:t,tooltipBg:o});return[h4(s),yw(e,"zoom-big-fast")]},v4,{resetStyle:!1,injectStyle:r})(n)};const p4=Fv.map(n=>`${n}-inverse`);function _4(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(st(p4),st(Fv)).includes(n):Fv.includes(n)}function Hw(n,r){const a=_4(r),e=mt({[`${n}-${r}`]:r&&a}),t={},i={};return r&&!a&&(t.background=r,i["--antd-arrow-background-color"]=r),{className:e,overlayStyle:t,arrowStyle:i}}const g4=n=>{const{prefixCls:r,className:a,placement:e="top",title:t,color:i,overlayInnerStyle:o}=n,{getPrefixCls:s}=w.exports.useContext(Jr),l=s("tooltip",r),[u,c,f]=Gw(l),d=Hw(l,i),h=d.arrowStyle,_=Object.assign(Object.assign({},o),d.overlayStyle),p=mt(c,f,l,`${l}-pure`,`${l}-placement-${e}`,a,d.className);return u(w.exports.createElement("div",{className:p,style:h},w.exports.createElement("div",{className:`${l}-arrow`}),w.exports.createElement(Vw,Object.assign({},n,{className:c,prefixCls:l,overlayInnerStyle:_}),t)))};var m4=g4,y4=globalThis&&globalThis.__rest||function(n,r){var a={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&r.indexOf(e)<0&&(a[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,e=Object.getOwnPropertySymbols(n);t<e.length;t++)r.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(n,e[t])&&(a[e[t]]=n[e[t]]);return a};const jw=w.exports.forwardRef((n,r)=>{var a,e;const{prefixCls:t,openClassName:i,getTooltipContainer:o,overlayClassName:s,color:l,overlayInnerStyle:u,children:c,afterOpenChange:f,afterVisibleChange:d,destroyTooltipOnHide:h,arrow:_=!0,title:p,overlay:v,builtinPlacements:y,arrowPointAtCenter:m=!1,autoAdjustOverflow:g=!0}=n,x=!!_,[,b]=wi(),{getPopupContainer:S,getPrefixCls:C,direction:E}=w.exports.useContext(Jr),T=mA(),M=w.exports.useRef(null),L=()=>{var ge;(ge=M.current)===null||ge===void 0||ge.forceAlign()};w.exports.useImperativeHandle(r,()=>({forceAlign:L,forcePopupAlign:()=>{T.deprecated(!1,"forcePopupAlign","forceAlign"),L()}}));const[F,N]=rs(!1,{value:(a=n.open)!==null&&a!==void 0?a:n.visible,defaultValue:(e=n.defaultOpen)!==null&&e!==void 0?e:n.defaultVisible}),I=!p&&!v&&p!==0,O=ge=>{var se,Re;N(I?!1:ge),I||((se=n.onOpenChange)===null||se===void 0||se.call(n,ge),(Re=n.onVisibleChange)===null||Re===void 0||Re.call(n,ge))},P=w.exports.useMemo(()=>{var ge,se;let Re=m;return typeof _=="object"&&(Re=(se=(ge=_.pointAtCenter)!==null&&ge!==void 0?ge:_.arrowPointAtCenter)!==null&&se!==void 0?se:m),y||d4({arrowPointAtCenter:Re,autoAdjustOverflow:g,arrowWidth:x?b.sizePopupArrow:0,borderRadius:b.borderRadius,offset:b.marginXXS,visibleFirst:!0})},[m,_,y,b]),R=w.exports.useMemo(()=>p===0?p:v||p||"",[v,p]),A=w.exports.createElement(DD,null,typeof R=="function"?R():R),{getPopupContainer:D,placement:B="top",mouseEnterDelay:k=.1,mouseLeaveDelay:V=.1,overlayStyle:U,rootClassName:j}=n,G=y4(n,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),$=C("tooltip",t),W=C(),K=n["data-popover-inject"];let q=F;!("open"in n)&&!("visible"in n)&&I&&(q=!1);const Y=w.exports.isValidElement(c)&&!gD(c)?c:w.exports.createElement("span",null,c),Q=Y.props,re=!Q.className||typeof Q.className=="string"?mt(Q.className,i||`${$}-open`):Q.className,[ue,oe,ee]=Gw($,!K),xe=Hw($,l),Te=xe.arrowStyle,Ce=Object.assign(Object.assign({},u),xe.overlayStyle),pe=mt(s,{[`${$}-rtl`]:E==="rtl"},xe.className,j,oe,ee),[J,ae]=qy("Tooltip",G.zIndex),ne=w.exports.createElement(i4,Object.assign({},G,{zIndex:J,showArrow:x,placement:B,mouseEnterDelay:k,mouseLeaveDelay:V,prefixCls:$,overlayClassName:pe,overlayStyle:Object.assign(Object.assign({},Te),U),getTooltipContainer:D||o||S,ref:M,builtinPlacements:P,overlay:A,visible:q,onVisibleChange:O,afterVisibleChange:f!=null?f:d,overlayInnerStyle:Ce,arrowContent:w.exports.createElement("span",{className:`${$}-arrow-content`}),motion:{motionName:aw(W,"zoom-big-fast",n.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!h}),q?qp(Y,{className:re}):Y);return ue(w.exports.createElement(nw.Provider,{value:ae},ne))});jw._InternalPanelDoNotUseOrYouWillBeFired=m4;var x4=jw,S4={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},b4=S4,C4=function(r,a){return w.exports.createElement(Mo,St({},r,{ref:a,icon:b4}))},E4=w.exports.forwardRef(C4),Tb=E4,Ww=w.exports.createContext(null);function $w(n,r){return n===void 0?null:"".concat(n,"-").concat(r)}function Xw(n){var r=w.exports.useContext(Ww);return $w(r,n)}var T4=["children","locked"],eo=w.exports.createContext(null);function R4(n,r){var a=ie({},n);return Object.keys(r).forEach(function(e){var t=r[e];t!==void 0&&(a[e]=t)}),a}function id(n){var r=n.children,a=n.locked,e=Zt(n,T4),t=w.exports.useContext(eo),i=Ed(function(){return R4(t,e)},[t,e],function(o,s){return!a&&(o[0]!==s[0]||!Jf(o[1],s[1],!0))});return w.exports.createElement(eo.Provider,{value:i},r)}var A4=[],Kw=w.exports.createContext(null);function Zp(){return w.exports.useContext(Kw)}var Yw=w.exports.createContext(A4);function Mc(n){var r=w.exports.useContext(Yw);return w.exports.useMemo(function(){return n!==void 0?[].concat(st(r),[n]):r},[r,n])}var Qw=w.exports.createContext(null),ox=w.exports.createContext({});function Rb(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(iw(n)){var a=n.nodeName.toLowerCase(),e=["input","select","textarea","button"].includes(a)||n.isContentEditable||a==="a"&&!!n.getAttribute("href"),t=n.getAttribute("tabindex"),i=Number(t),o=null;return t&&!Number.isNaN(i)?o=i:e&&o===null&&(o=0),e&&n.disabled&&(o=null),o!==null&&(o>=0||r&&o<0)}return!1}function w4(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=st(n.querySelectorAll("*")).filter(function(e){return Rb(e,r)});return Rb(n,r)&&a.unshift(n),a}var $m=we.LEFT,Xm=we.RIGHT,Km=we.UP,ev=we.DOWN,tv=we.ENTER,qw=we.ESC,Zc=we.HOME,ef=we.END,Ab=[Km,ev,$m,Xm];function P4(n,r,a,e){var t,i="prev",o="next",s="children",l="parent";if(n==="inline"&&e===tv)return{inlineTrigger:!0};var u=Z(Z({},Km,i),ev,o),c=Z(Z(Z(Z({},$m,a?o:i),Xm,a?i:o),ev,s),tv,s),f=Z(Z(Z(Z(Z(Z({},Km,i),ev,o),tv,s),qw,l),$m,a?s:l),Xm,a?l:s),d={inline:u,horizontal:c,vertical:f,inlineSub:u,horizontalSub:f,verticalSub:f},h=(t=d["".concat(n).concat(r?"":"Sub")])===null||t===void 0?void 0:t[e];switch(h){case i:return{offset:-1,sibling:!0};case o:return{offset:1,sibling:!0};case l:return{offset:-1,sibling:!1};case s:return{offset:1,sibling:!1};default:return null}}function M4(n){for(var r=n;r;){if(r.getAttribute("data-menu-list"))return r;r=r.parentElement}return null}function O4(n,r){for(var a=n||document.activeElement;a;){if(r.has(a))return a;a=a.parentElement}return null}function sx(n,r){var a=w4(n,!0);return a.filter(function(e){return r.has(e)})}function wb(n,r,a){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!n)return null;var t=sx(n,r),i=t.length,o=t.findIndex(function(s){return a===s});return e<0?o===-1?o=i-1:o-=1:e>0&&(o+=1),o=(o+i)%i,t[o]}var Ym=function(r,a){var e=new Set,t=new Map,i=new Map;return r.forEach(function(o){var s=document.querySelector("[data-menu-id='".concat($w(a,o),"']"));s&&(e.add(s),i.set(s,o),t.set(o,s))}),{elements:e,key2element:t,element2key:i}};function I4(n,r,a,e,t,i,o,s,l,u){var c=w.exports.useRef(),f=w.exports.useRef();f.current=r;var d=function(){gr.cancel(c.current)};return w.exports.useEffect(function(){return function(){d()}},[]),function(h){var _=h.which;if([].concat(Ab,[tv,qw,Zc,ef]).includes(_)){var p=i(),v=Ym(p,e),y=v,m=y.elements,g=y.key2element,x=y.element2key,b=g.get(r),S=O4(b,m),C=x.get(S),E=P4(n,o(C,!0).length===1,a,_);if(!E&&_!==Zc&&_!==ef)return;(Ab.includes(_)||[Zc,ef].includes(_))&&h.preventDefault();var T=function(R){if(R){var A=R,D=R.querySelector("a");D!=null&&D.getAttribute("href")&&(A=D);var B=x.get(R);s(B),d(),c.current=gr(function(){f.current===B&&A.focus()})}};if([Zc,ef].includes(_)||E.sibling||!S){var M;!S||n==="inline"?M=t.current:M=M4(S);var L,F=sx(M,m);_===Zc?L=F[0]:_===ef?L=F[F.length-1]:L=wb(M,m,S,E.offset),T(L)}else if(E.inlineTrigger)l(C);else if(E.offset>0)l(C,!0),d(),c.current=gr(function(){v=Ym(p,e);var P=S.getAttribute("aria-controls"),R=document.getElementById(P),A=wb(R,v.elements);T(A)},5);else if(E.offset<0){var N=o(C,!0),I=N[N.length-2],O=g.get(I);l(I,!1),T(O)}}u==null||u(h)}}function L4(n){Promise.resolve().then(n)}var lx="__RC_UTIL_PATH_SPLIT__",Pb=function(r){return r.join(lx)},N4=function(r){return r.split(lx)},Qm="rc-menu-more";function F4(){var n=w.exports.useState({}),r=_e(n,2),a=r[1],e=w.exports.useRef(new Map),t=w.exports.useRef(new Map),i=w.exports.useState([]),o=_e(i,2),s=o[0],l=o[1],u=w.exports.useRef(0),c=w.exports.useRef(!1),f=function(){c.current||a({})},d=w.exports.useCallback(function(g,x){var b=Pb(x);t.current.set(b,g),e.current.set(g,b),u.current+=1;var S=u.current;L4(function(){S===u.current&&f()})},[]),h=w.exports.useCallback(function(g,x){var b=Pb(x);t.current.delete(b),e.current.delete(g)},[]),_=w.exports.useCallback(function(g){l(g)},[]),p=w.exports.useCallback(function(g,x){var b=e.current.get(g)||"",S=N4(b);return x&&s.includes(S[0])&&S.unshift(Qm),S},[s]),v=w.exports.useCallback(function(g,x){return g.some(function(b){var S=p(b,!0);return S.includes(x)})},[p]),y=function(){var x=st(e.current.keys());return s.length&&x.push(Qm),x},m=w.exports.useCallback(function(g){var x="".concat(e.current.get(g)).concat(lx),b=new Set;return st(t.current.keys()).forEach(function(S){S.startsWith(x)&&b.add(t.current.get(S))}),b},[]);return w.exports.useEffect(function(){return function(){c.current=!0}},[]),{registerPath:d,unregisterPath:h,refreshOverflowKeys:_,isSubPathKey:v,getKeyPath:p,getKeys:y,getSubPathKeys:m}}function df(n){var r=w.exports.useRef(n);r.current=n;var a=w.exports.useCallback(function(){for(var e,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=r.current)===null||e===void 0?void 0:e.call.apply(e,[r].concat(i))},[]);return n?a:void 0}var D4=Math.random().toFixed(5).toString().slice(2),Mb=0;function B4(n){var r=rs(n,{value:n}),a=_e(r,2),e=a[0],t=a[1];return w.exports.useEffect(function(){Mb+=1;var i="".concat(D4,"-").concat(Mb);t("rc-menu-uuid-".concat(i))},[]),e}function Jw(n,r,a,e){var t=w.exports.useContext(eo),i=t.activeKey,o=t.onActive,s=t.onInactive,l={active:i===n};return r||(l.onMouseEnter=function(u){a==null||a({key:n,domEvent:u}),o(n)},l.onMouseLeave=function(u){e==null||e({key:n,domEvent:u}),s(n)}),l}function Zw(n){var r=w.exports.useContext(eo),a=r.mode,e=r.rtl,t=r.inlineIndent;if(a!=="inline")return null;var i=n;return e?{paddingRight:i*t}:{paddingLeft:i*t}}function eP(n){var r=n.icon,a=n.props,e=n.children,t;return r===null||r===!1?null:(typeof r=="function"?t=w.exports.createElement(r,ie({},a)):typeof r!="boolean"&&(t=r),t||e||null)}var k4=["item"];function Hv(n){var r=n.item,a=Zt(n,k4);return Object.defineProperty(a,"item",{get:function(){return Yr(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),r}}),a}var V4=["title","attribute","elementRef"],U4=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],z4=["active"],G4=function(n){Yl(a,n);var r=Rd(a);function a(){return _a(this,a),r.apply(this,arguments)}return ga(a,[{key:"render",value:function(){var t=this.props,i=t.title,o=t.attribute,s=t.elementRef,l=Zt(t,V4),u=_s(l,["eventKey","popupClassName","popupOffset","onTitleClick"]);return Yr(!o,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),w.exports.createElement(Co.Item,St({},o,{title:typeof i=="string"?i:void 0},u,{ref:s}))}}]),a}(w.exports.Component),H4=w.exports.forwardRef(function(n,r){var a=n.style,e=n.className,t=n.eventKey;n.warnKey;var i=n.disabled,o=n.itemIcon,s=n.children,l=n.role,u=n.onMouseEnter,c=n.onMouseLeave,f=n.onClick,d=n.onKeyDown,h=n.onFocus,_=Zt(n,U4),p=Xw(t),v=w.exports.useContext(eo),y=v.prefixCls,m=v.onItemClick,g=v.disabled,x=v.overflowDisabled,b=v.itemIcon,S=v.selectedKeys,C=v.onActive,E=w.exports.useContext(ox),T=E._internalRenderMenuItem,M="".concat(y,"-item"),L=w.exports.useRef(),F=w.exports.useRef(),N=g||i,I=Td(r,F),O=Mc(t),P=function(q){return{key:t,keyPath:st(O).reverse(),item:L.current,domEvent:q}},R=o||b,A=Jw(t,N,u,c),D=A.active,B=Zt(A,z4),k=S.includes(t),V=Zw(O.length),U=function(q){if(!N){var Y=P(q);f==null||f(Hv(Y)),m(Y)}},j=function(q){if(d==null||d(q),q.which===we.ENTER){var Y=P(q);f==null||f(Hv(Y)),m(Y)}},G=function(q){C(t),h==null||h(q)},$={};n.role==="option"&&($["aria-selected"]=k);var W=w.exports.createElement(G4,St({ref:L,elementRef:I,role:l===null?"none":l||"menuitem",tabIndex:i?null:-1,"data-menu-id":x&&p?null:p},_,B,$,{component:"li","aria-disabled":i,style:ie(ie({},V),a),className:mt(M,Z(Z(Z({},"".concat(M,"-active"),D),"".concat(M,"-selected"),k),"".concat(M,"-disabled"),N),e),onClick:U,onKeyDown:j,onFocus:G}),s,w.exports.createElement(eP,{props:ie(ie({},n),{},{isSelected:k}),icon:R}));return T&&(W=T(W,n,{selected:k})),W});function j4(n,r){var a=n.eventKey,e=Zp(),t=Mc(a);return w.exports.useEffect(function(){if(e)return e.registerPath(a,t),function(){e.unregisterPath(a,t)}},[t]),e?null:w.exports.createElement(H4,St({},n,{ref:r}))}var e_=w.exports.forwardRef(j4),W4=["className","children"],$4=function(r,a){var e=r.className,t=r.children,i=Zt(r,W4),o=w.exports.useContext(eo),s=o.prefixCls,l=o.mode,u=o.rtl;return w.exports.createElement("ul",St({className:mt(s,u&&"".concat(s,"-rtl"),"".concat(s,"-sub"),"".concat(s,"-").concat(l==="inline"?"inline":"vertical"),e),role:"menu"},i,{"data-menu-list":!0,ref:a}),t)},ux=w.exports.forwardRef($4);ux.displayName="SubMenuList";function cx(n,r){return Zs(n).map(function(a,e){if(w.exports.isValidElement(a)){var t,i,o=a.key,s=(t=(i=a.props)===null||i===void 0?void 0:i.eventKey)!==null&&t!==void 0?t:o,l=s==null;l&&(s="tmp_key-".concat([].concat(st(r),[e]).join("-")));var u={key:s,eventKey:s};return w.exports.cloneElement(a,u)}return a})}var jr={adjustX:1,adjustY:1},X4={topLeft:{points:["bl","tl"],overflow:jr},topRight:{points:["br","tr"],overflow:jr},bottomLeft:{points:["tl","bl"],overflow:jr},bottomRight:{points:["tr","br"],overflow:jr},leftTop:{points:["tr","tl"],overflow:jr},leftBottom:{points:["br","bl"],overflow:jr},rightTop:{points:["tl","tr"],overflow:jr},rightBottom:{points:["bl","br"],overflow:jr}},K4={topLeft:{points:["bl","tl"],overflow:jr},topRight:{points:["br","tr"],overflow:jr},bottomLeft:{points:["tl","bl"],overflow:jr},bottomRight:{points:["tr","br"],overflow:jr},rightTop:{points:["tr","tl"],overflow:jr},rightBottom:{points:["br","bl"],overflow:jr},leftTop:{points:["tl","tr"],overflow:jr},leftBottom:{points:["bl","br"],overflow:jr}};function tP(n,r,a){if(r)return r;if(a)return a[n]||a.other}var Y4={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function Q4(n){var r=n.prefixCls,a=n.visible,e=n.children,t=n.popup,i=n.popupStyle,o=n.popupClassName,s=n.popupOffset,l=n.disabled,u=n.mode,c=n.onVisibleChange,f=w.exports.useContext(eo),d=f.getPopupContainer,h=f.rtl,_=f.subMenuOpenDelay,p=f.subMenuCloseDelay,v=f.builtinPlacements,y=f.triggerSubMenuAction,m=f.forceSubMenuRender,g=f.rootClassName,x=f.motion,b=f.defaultMotions,S=w.exports.useState(!1),C=_e(S,2),E=C[0],T=C[1],M=ie(h?ie({},K4):ie({},X4),v),L=Y4[u],F=tP(u,x,b),N=w.exports.useRef(F);u!=="inline"&&(N.current=F);var I=ie(ie({},N.current),{},{leavedClassName:"".concat(r,"-hidden"),removeOnLeave:!1,motionAppear:!0}),O=w.exports.useRef();return w.exports.useEffect(function(){return O.current=gr(function(){T(a)}),function(){gr.cancel(O.current)}},[a]),w.exports.createElement(ex,{prefixCls:r,popupClassName:mt("".concat(r,"-popup"),Z({},"".concat(r,"-rtl"),h),o,g),stretch:u==="horizontal"?"minWidth":null,getPopupContainer:d,builtinPlacements:M,popupPlacement:L,popupVisible:E,popup:t,popupStyle:i,popupAlign:s&&{offset:s},action:l?[]:[y],mouseEnterDelay:_,mouseLeaveDelay:p,onPopupVisibleChange:c,forceRender:m,popupMotion:I,fresh:!0},e)}function q4(n){var r=n.id,a=n.open,e=n.keyPath,t=n.children,i="inline",o=w.exports.useContext(eo),s=o.prefixCls,l=o.forceSubMenuRender,u=o.motion,c=o.defaultMotions,f=o.mode,d=w.exports.useRef(!1);d.current=f===i;var h=w.exports.useState(!d.current),_=_e(h,2),p=_[0],v=_[1],y=d.current?a:!1;w.exports.useEffect(function(){d.current&&v(!1)},[f]);var m=ie({},tP(i,u,c));e.length>1&&(m.motionAppear=!1);var g=m.onVisibleChanged;return m.onVisibleChanged=function(x){return!d.current&&!x&&v(!0),g==null?void 0:g(x)},p?null:w.exports.createElement(id,{mode:i,locked:!d.current},w.exports.createElement(Kp,St({visible:y},m,{forceRender:l,removeOnLeave:!1,leavedClassName:"".concat(s,"-hidden")}),function(x){var b=x.className,S=x.style;return w.exports.createElement(ux,{id:r,className:b,style:S},t)}))}var J4=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","popupStyle","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],Z4=["active"],eU=function(r){var a=r.style,e=r.className,t=r.title,i=r.eventKey;r.warnKey;var o=r.disabled,s=r.internalPopupClose,l=r.children,u=r.itemIcon,c=r.expandIcon,f=r.popupClassName,d=r.popupOffset,h=r.popupStyle,_=r.onClick,p=r.onMouseEnter,v=r.onMouseLeave,y=r.onTitleClick,m=r.onTitleMouseEnter,g=r.onTitleMouseLeave,x=Zt(r,J4),b=Xw(i),S=w.exports.useContext(eo),C=S.prefixCls,E=S.mode,T=S.openKeys,M=S.disabled,L=S.overflowDisabled,F=S.activeKey,N=S.selectedKeys,I=S.itemIcon,O=S.expandIcon,P=S.onItemClick,R=S.onOpenChange,A=S.onActive,D=w.exports.useContext(ox),B=D._internalRenderSubMenuItem,k=w.exports.useContext(Qw),V=k.isSubPathKey,U=Mc(),j="".concat(C,"-submenu"),G=M||o,$=w.exports.useRef(),W=w.exports.useRef(),K=u!=null?u:I,q=c!=null?c:O,Y=T.includes(i),Q=!L&&Y,re=V(N,i),ue=Jw(i,G,m,g),oe=ue.active,ee=Zt(ue,Z4),xe=w.exports.useState(!1),Te=_e(xe,2),Ce=Te[0],pe=Te[1],J=function(Mt){G||pe(Mt)},ae=function(Mt){J(!0),p==null||p({key:i,domEvent:Mt})},ne=function(Mt){J(!1),v==null||v({key:i,domEvent:Mt})},ge=w.exports.useMemo(function(){return oe||(E!=="inline"?Ce||V([F],i):!1)},[E,oe,F,Ce,i,V]),se=Zw(U.length),Re=function(Mt){G||(y==null||y({key:i,domEvent:Mt}),E==="inline"&&R(i,!Y))},de=df(function(bt){_==null||_(Hv(bt)),P(bt)}),Pe=function(Mt){E!=="inline"&&R(i,Mt)},De=function(){A(i)},Ke=b&&"".concat(b,"-popup"),Be=w.exports.createElement("div",St({role:"menuitem",style:se,className:"".concat(j,"-title"),tabIndex:G?null:-1,ref:$,title:typeof t=="string"?t:null,"data-menu-id":L&&b?null:b,"aria-expanded":Q,"aria-haspopup":!0,"aria-controls":Ke,"aria-disabled":G,onClick:Re,onFocus:De},ee),t,w.exports.createElement(eP,{icon:E!=="horizontal"?q:void 0,props:ie(ie({},r),{},{isOpen:Q,isSubMenu:!0})},w.exports.createElement("i",{className:"".concat(j,"-arrow")}))),He=w.exports.useRef(E);if(E!=="inline"&&U.length>1?He.current="vertical":He.current=E,!L){var We=He.current;Be=w.exports.createElement(Q4,{mode:We,prefixCls:j,visible:!s&&Q&&E!=="inline",popupClassName:f,popupOffset:d,popupStyle:h,popup:w.exports.createElement(id,{mode:We==="horizontal"?"vertical":We},w.exports.createElement(ux,{id:Ke,ref:W},l)),disabled:G,onVisibleChange:Pe},Be)}var yt=w.exports.createElement(Co.Item,St({role:"none"},x,{component:"li",style:a,className:mt(j,"".concat(j,"-").concat(E),e,Z(Z(Z(Z({},"".concat(j,"-open"),Q),"".concat(j,"-active"),ge),"".concat(j,"-selected"),re),"".concat(j,"-disabled"),G)),onMouseEnter:ae,onMouseLeave:ne}),Be,!L&&w.exports.createElement(q4,{id:Ke,open:Q,keyPath:U},l));return B&&(yt=B(yt,r,{selected:re,active:ge,open:Q,disabled:G})),w.exports.createElement(id,{onItemClick:de,mode:E==="horizontal"?"vertical":E,itemIcon:K,expandIcon:q},yt)};function t_(n){var r=n.eventKey,a=n.children,e=Mc(r),t=cx(a,e),i=Zp();w.exports.useEffect(function(){if(i)return i.registerPath(r,e),function(){i.unregisterPath(r,e)}},[e]);var o;return i?o=t:o=w.exports.createElement(eU,n,t),w.exports.createElement(Yw.Provider,{value:e},o)}var tU=["className","title","eventKey","children"],nU=["children"],rU=function(r){var a=r.className,e=r.title;r.eventKey;var t=r.children,i=Zt(r,tU),o=w.exports.useContext(eo),s=o.prefixCls,l="".concat(s,"-item-group");return w.exports.createElement("li",St({role:"presentation"},i,{onClick:function(c){return c.stopPropagation()},className:mt(l,a)}),w.exports.createElement("div",{role:"presentation",className:"".concat(l,"-title"),title:typeof e=="string"?e:void 0},e),w.exports.createElement("ul",{role:"group",className:"".concat(l,"-list")},t))};function n_(n){var r=n.children,a=Zt(n,nU),e=Mc(a.eventKey),t=cx(r,e),i=Zp();return i?t:w.exports.createElement(rU,_s(a,["warnKey"]),t)}function fx(n){var r=n.className,a=n.style,e=w.exports.useContext(eo),t=e.prefixCls,i=Zp();return i?null:w.exports.createElement("li",{role:"separator",className:mt("".concat(t,"-item-divider"),r),style:a})}var aU=["label","children","key","type"];function qm(n){return(n||[]).map(function(r,a){if(r&&Qt(r)==="object"){var e=r,t=e.label,i=e.children,o=e.key,s=e.type,l=Zt(e,aU),u=o!=null?o:"tmp-".concat(a);return i||s==="group"?s==="group"?w.exports.createElement(n_,St({key:u},l,{title:t}),qm(i)):w.exports.createElement(t_,St({key:u},l,{title:t}),qm(i)):s==="divider"?w.exports.createElement(fx,St({key:u},l)):w.exports.createElement(e_,St({key:u},l),t)}return null}).filter(function(r){return r})}function iU(n,r,a){var e=n;return r&&(e=qm(r)),cx(e,a)}var oU=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],fu=[],sU=w.exports.forwardRef(function(n,r){var a,e=n,t=e.prefixCls,i=t===void 0?"rc-menu":t,o=e.rootClassName,s=e.style,l=e.className,u=e.tabIndex,c=u===void 0?0:u,f=e.items,d=e.children,h=e.direction,_=e.id,p=e.mode,v=p===void 0?"vertical":p,y=e.inlineCollapsed,m=e.disabled,g=e.disabledOverflow,x=e.subMenuOpenDelay,b=x===void 0?.1:x,S=e.subMenuCloseDelay,C=S===void 0?.1:S,E=e.forceSubMenuRender,T=e.defaultOpenKeys,M=e.openKeys,L=e.activeKey,F=e.defaultActiveFirst,N=e.selectable,I=N===void 0?!0:N,O=e.multiple,P=O===void 0?!1:O,R=e.defaultSelectedKeys,A=e.selectedKeys,D=e.onSelect,B=e.onDeselect,k=e.inlineIndent,V=k===void 0?24:k,U=e.motion,j=e.defaultMotions,G=e.triggerSubMenuAction,$=G===void 0?"hover":G,W=e.builtinPlacements,K=e.itemIcon,q=e.expandIcon,Y=e.overflowedIndicator,Q=Y===void 0?"...":Y,re=e.overflowedIndicatorPopupClassName,ue=e.getPopupContainer,oe=e.onClick,ee=e.onOpenChange,xe=e.onKeyDown;e.openAnimation,e.openTransitionName;var Te=e._internalRenderMenuItem,Ce=e._internalRenderSubMenuItem,pe=Zt(e,oU),J=w.exports.useMemo(function(){return iU(d,f,fu)},[d,f]),ae=w.exports.useState(!1),ne=_e(ae,2),ge=ne[0],se=ne[1],Re=w.exports.useRef(),de=B4(_),Pe=h==="rtl",De=rs(T,{value:M,postState:function($t){return $t||fu}}),Ke=_e(De,2),Be=Ke[0],He=Ke[1],We=function($t){var qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;function ht(){He($t),ee==null||ee($t)}qe?kl.exports.flushSync(ht):ht()},yt=w.exports.useState(Be),bt=_e(yt,2),Mt=bt[0],ce=bt[1],le=w.exports.useRef(!1),he=w.exports.useMemo(function(){return(v==="inline"||v==="vertical")&&y?["vertical",y]:[v,!1]},[v,y]),Se=_e(he,2),me=Se[0],Le=Se[1],Qe=me==="inline",at=w.exports.useState(me),lt=_e(at,2),ze=lt[0],Rt=lt[1],et=w.exports.useState(Le),Ne=_e(et,2),ct=Ne[0],Bt=Ne[1];w.exports.useEffect(function(){Rt(me),Bt(Le),le.current&&(Qe?He(Mt):We(fu))},[me,Le]);var Oe=w.exports.useState(0),Ye=_e(Oe,2),Fe=Ye[0],Ve=Ye[1],Ee=Fe>=J.length-1||ze!=="horizontal"||g;w.exports.useEffect(function(){Qe&&ce(Be)},[Be]),w.exports.useEffect(function(){return le.current=!0,function(){le.current=!1}},[]);var tt=F4(),gn=tt.registerPath,dn=tt.unregisterPath,On=tt.refreshOverflowKeys,At=tt.isSubPathKey,Cn=tt.getKeyPath,dt=tt.getKeys,ft=tt.getSubPathKeys,Ft=w.exports.useMemo(function(){return{registerPath:gn,unregisterPath:dn}},[gn,dn]),on=w.exports.useMemo(function(){return{isSubPathKey:At}},[At]);w.exports.useEffect(function(){On(Ee?fu:J.slice(Fe+1).map(function(cn){return cn.key}))},[Fe,Ee]);var En=rs(L||F&&((a=J[0])===null||a===void 0?void 0:a.key),{value:L}),Sa=_e(En,2),tn=Sa[0],Ni=Sa[1],lo=df(function(cn){Ni(cn)}),Fi=df(function(){Ni(void 0)});w.exports.useImperativeHandle(r,function(){return{list:Re.current,focus:function($t){var qe,ht=dt(),Jt=Ym(ht,de),Vn=Jt.elements,pn=Jt.key2element,tr=Jt.element2key,Tr=sx(Re.current,Vn),oa=tn!=null?tn:Tr[0]?tr.get(Tr[0]):(qe=J.find(function(Ea){return!Ea.props.disabled}))===null||qe===void 0?void 0:qe.key,dr=pn.get(oa);if(oa&&dr){var Ca;dr==null||(Ca=dr.focus)===null||Ca===void 0||Ca.call(dr,$t)}}}});var aa=rs(R||[],{value:A,postState:function($t){return Array.isArray($t)?$t:$t==null?fu:[$t]}}),No=_e(aa,2),Di=No[0],Bi=No[1],Fo=function($t){if(I){var qe=$t.key,ht=Di.includes(qe),Jt;P?ht?Jt=Di.filter(function(pn){return pn!==qe}):Jt=[].concat(st(Di),[qe]):Jt=[qe],Bi(Jt);var Vn=ie(ie({},$t),{},{selectedKeys:Jt});ht?B==null||B(Vn):D==null||D(Vn)}!P&&Be.length&&ze!=="inline"&&We(fu)},Ss=df(function(cn){oe==null||oe(Hv(cn)),Fo(cn)}),ia=df(function(cn,$t){var qe=Be.filter(function(Jt){return Jt!==cn});if($t)qe.push(cn);else if(ze!=="inline"){var ht=ft(cn);qe=qe.filter(function(Jt){return!ht.has(Jt)})}Jf(Be,qe,!0)||We(qe,!0)}),ba=function($t,qe){var ht=qe!=null?qe:!Be.includes($t);ia($t,ht)},Do=I4(ze,tn,Pe,de,Re,dt,Cn,Ni,ba,xe);w.exports.useEffect(function(){se(!0)},[]);var bs=w.exports.useMemo(function(){return{_internalRenderMenuItem:Te,_internalRenderSubMenuItem:Ce}},[Te,Ce]),li=ze!=="horizontal"||g?J:J.map(function(cn,$t){return w.exports.createElement(id,{key:cn.key,overflowDisabled:$t>Fe},cn)}),ki=w.exports.createElement(Co,St({id:_,ref:Re,prefixCls:"".concat(i,"-overflow"),component:"ul",itemComponent:e_,className:mt(i,"".concat(i,"-root"),"".concat(i,"-").concat(ze),l,Z(Z({},"".concat(i,"-inline-collapsed"),ct),"".concat(i,"-rtl"),Pe),o),dir:h,style:s,role:"menu",tabIndex:c,data:li,renderRawItem:function($t){return $t},renderRawRest:function($t){var qe=$t.length,ht=qe?J.slice(-qe):null;return w.exports.createElement(t_,{eventKey:Qm,title:Q,disabled:Ee,internalPopupClose:qe===0,popupClassName:re},ht)},maxCount:ze!=="horizontal"||g?Co.INVALIDATE:Co.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function($t){Ve($t)},onKeyDown:Do},pe));return w.exports.createElement(ox.Provider,{value:bs},w.exports.createElement(Ww.Provider,{value:de},w.exports.createElement(id,{prefixCls:i,rootClassName:o,mode:ze,openKeys:Be,rtl:Pe,disabled:m,motion:ge?U:null,defaultMotions:ge?j:null,activeKey:tn,onActive:lo,onInactive:Fi,selectedKeys:Di,inlineIndent:V,subMenuOpenDelay:b,subMenuCloseDelay:C,forceSubMenuRender:E,builtinPlacements:W,triggerSubMenuAction:$,getPopupContainer:ue,itemIcon:K,expandIcon:q,onItemClick:Ss,onOpenChange:ia},w.exports.createElement(Qw.Provider,{value:on},ki),w.exports.createElement("div",{style:{display:"none"},"aria-hidden":!0},w.exports.createElement(Kw.Provider,{value:Ft},J)))))}),Nd=sU;Nd.Item=e_;Nd.SubMenu=t_;Nd.ItemGroup=n_;Nd.Divider=fx;var lU={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"},uU=lU,cU=function(r,a){return w.exports.createElement(Mo,St({},r,{ref:a,icon:uU}))},fU=w.exports.forwardRef(cU),dU=fU,hU={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},vU=hU,pU=function(r,a){return w.exports.createElement(Mo,St({},r,{ref:a,icon:vU}))},_U=w.exports.forwardRef(pU),Ob=_U;const gU=n=>!isNaN(parseFloat(n))&&isFinite(n);var mU=gU;const nP=w.exports.createContext({siderHook:{addSider:()=>null,removeSider:()=>null}});var yU=globalThis&&globalThis.__rest||function(n,r){var a={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&r.indexOf(e)<0&&(a[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,e=Object.getOwnPropertySymbols(n);t<e.length;t++)r.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(n,e[t])&&(a[e[t]]=n[e[t]]);return a};const Ib={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px"},r_=w.exports.createContext({}),xU=(()=>{let n=0;return function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return n+=1,`${r}${n}`}})(),SU=w.exports.forwardRef((n,r)=>{const{prefixCls:a,className:e,trigger:t,children:i,defaultCollapsed:o=!1,theme:s="dark",style:l={},collapsible:u=!1,reverseArrow:c=!1,width:f=200,collapsedWidth:d=80,zeroWidthTriggerStyle:h,breakpoint:_,onCollapse:p,onBreakpoint:v}=n,y=yU(n,["prefixCls","className","trigger","children","defaultCollapsed","theme","style","collapsible","reverseArrow","width","collapsedWidth","zeroWidthTriggerStyle","breakpoint","onCollapse","onBreakpoint"]),{siderHook:m}=w.exports.useContext(nP),[g,x]=w.exports.useState("collapsed"in n?n.collapsed:o),[b,S]=w.exports.useState(!1);w.exports.useEffect(()=>{"collapsed"in n&&x(n.collapsed)},[n.collapsed]);const C=(N,I)=>{"collapsed"in n||x(N),p==null||p(N,I)},E=w.exports.useRef();E.current=N=>{S(N.matches),v==null||v(N.matches),g!==N.matches&&C(N.matches,"responsive")},w.exports.useEffect(()=>{function N(O){return E.current(O)}let I;if(typeof window!="undefined"){const{matchMedia:O}=window;if(O&&_&&_ in Ib){I=O(`screen and (max-width: ${Ib[_]})`);try{I.addEventListener("change",N)}catch{I.addListener(N)}N(I)}}return()=>{try{I==null||I.removeEventListener("change",N)}catch{I==null||I.removeListener(N)}}},[_]),w.exports.useEffect(()=>{const N=xU("ant-sider-");return m.addSider(N),()=>m.removeSider(N)},[]);const T=()=>{C(!g,"clickTrigger")},{getPrefixCls:M}=w.exports.useContext(Jr),L=()=>{const N=M("layout-sider",a),I=_s(y,["collapsed"]),O=g?d:f,P=mU(O)?`${O}px`:String(O),R=parseFloat(String(d||0))===0?w.exports.createElement("span",{onClick:T,className:mt(`${N}-zero-width-trigger`,`${N}-zero-width-trigger-${c?"right":"left"}`),style:h},t||w.exports.createElement(dU,null)):null,B={expanded:c?w.exports.createElement(Tb,null):w.exports.createElement(Ob,null),collapsed:c?w.exports.createElement(Ob,null):w.exports.createElement(Tb,null)}[g?"collapsed":"expanded"],k=t!==null?R||w.exports.createElement("div",{className:`${N}-trigger`,onClick:T,style:{width:P}},t||B):null,V=Object.assign(Object.assign({},l),{flex:`0 0 ${P}`,maxWidth:P,minWidth:P,width:P}),U=mt(N,`${N}-${s}`,{[`${N}-collapsed`]:!!g,[`${N}-has-trigger`]:u&&t!==null&&!R,[`${N}-below`]:!!b,[`${N}-zero-width`]:parseFloat(P)===0},e);return w.exports.createElement("aside",Object.assign({className:U},I,{style:V,ref:r}),w.exports.createElement("div",{className:`${N}-children`},i),u||b&&R?k:null)},F=w.exports.useMemo(()=>({siderCollapsed:g}),[g]);return w.exports.createElement(r_.Provider,{value:F},L())});var rP=SU,bU={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},CU=bU,EU=function(r,a){return w.exports.createElement(Mo,St({},r,{ref:a,icon:CU}))},TU=w.exports.forwardRef(EU),RU=TU,AU=globalThis&&globalThis.__rest||function(n,r){var a={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&r.indexOf(e)<0&&(a[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,e=Object.getOwnPropertySymbols(n);t<e.length;t++)r.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(n,e[t])&&(a[e[t]]=n[e[t]]);return a};const wU=n=>{const{prefixCls:r,className:a,dashed:e}=n,t=AU(n,["prefixCls","className","dashed"]),{getPrefixCls:i}=w.exports.useContext(Jr),o=i("menu",r),s=mt({[`${o}-item-divider-dashed`]:!!e},a);return w.exports.createElement(fx,Object.assign({className:s},t))};var aP=wU;const PU=w.exports.createContext({prefixCls:"",firstLevel:!0,inlineCollapsed:!1});var jv=PU;const MU=n=>{var r;const{className:a,children:e,icon:t,title:i,danger:o}=n,{prefixCls:s,firstLevel:l,direction:u,disableMenuItemTitleTooltip:c,inlineCollapsed:f}=w.exports.useContext(jv),d=m=>{const g=w.exports.createElement("span",{className:`${s}-title-content`},e);return(!t||w.exports.isValidElement(e)&&e.type==="span")&&e&&m&&l&&typeof e=="string"?w.exports.createElement("div",{className:`${s}-inline-collapsed-noicon`},e.charAt(0)):g},{siderCollapsed:h}=w.exports.useContext(r_);let _=i;typeof i=="undefined"?_=l?e:"":i===!1&&(_="");const p={title:_};!h&&!f&&(p.title=null,p.open=!1);const v=Zs(e).length;let y=w.exports.createElement(e_,Object.assign({},_s(n,["title","icon","danger"]),{className:mt({[`${s}-item-danger`]:o,[`${s}-item-only-child`]:(t?v+1:v)===1},a),title:typeof i=="string"?i:void 0}),qp(t,{className:mt(w.exports.isValidElement(t)?(r=t.props)===null||r===void 0?void 0:r.className:"",`${s}-item-icon`)}),d(f));return c||(y=w.exports.createElement(x4,Object.assign({},p,{placement:u==="rtl"?"left":"right",overlayClassName:`${s}-inline-collapsed-tooltip`}),y)),y};var iP=MU;const OU=n=>{var r;const{popupClassName:a,icon:e,title:t,theme:i}=n,o=w.exports.useContext(jv),{prefixCls:s,inlineCollapsed:l,theme:u}=o,c=Mc();let f;if(!e)f=l&&!c.length&&t&&typeof t=="string"?w.exports.createElement("div",{className:`${s}-inline-collapsed-noicon`},t.charAt(0)):w.exports.createElement("span",{className:`${s}-title-content`},t);else{const _=w.exports.isValidElement(t)&&t.type==="span";f=w.exports.createElement(w.exports.Fragment,null,qp(e,{className:mt(w.exports.isValidElement(e)?(r=e.props)===null||r===void 0?void 0:r.className:"",`${s}-item-icon`)}),_?t:w.exports.createElement("span",{className:`${s}-title-content`},t))}const d=w.exports.useMemo(()=>Object.assign(Object.assign({},o),{firstLevel:!1}),[o]),[h]=qy("Menu");return w.exports.createElement(jv.Provider,{value:d},w.exports.createElement(t_,Object.assign({},_s(n,["icon"]),{title:f,popupClassName:mt(s,a,`${s}-${i||u}`),popupStyle:{zIndex:h}})))};var oP=OU,IU=globalThis&&globalThis.__rest||function(n,r){var a={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&r.indexOf(e)<0&&(a[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,e=Object.getOwnPropertySymbols(n);t<e.length;t++)r.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(n,e[t])&&(a[e[t]]=n[e[t]]);return a};function Jm(n){return(n||[]).map((r,a)=>{if(r&&typeof r=="object"){const e=r,{label:t,children:i,key:o,type:s}=e,l=IU(e,["label","children","key","type"]),u=o!=null?o:`tmp-${a}`;return i||s==="group"?s==="group"?w.exports.createElement(n_,Object.assign({key:u},l,{title:t}),Jm(i)):w.exports.createElement(oP,Object.assign({key:u},l,{title:t}),Jm(i)):s==="divider"?w.exports.createElement(aP,Object.assign({key:u},l)):w.exports.createElement(iP,Object.assign({key:u},l),t)}return null}).filter(r=>r)}function LU(n){return w.exports.useMemo(()=>n&&Jm(n),[n])}globalThis&&globalThis.__rest;const NU=w.exports.createContext(null);var Lb=NU;const FU=n=>{const{componentCls:r,motionDurationSlow:a,horizontalLineHeight:e,colorSplit:t,lineWidth:i,lineType:o,itemPaddingInline:s}=n;return{[`${r}-horizontal`]:{lineHeight:e,border:0,borderBottom:`${wt(i)} ${o} ${t}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${r}-item, ${r}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:s},[`> ${r}-item:hover,
        > ${r}-item-active,
        > ${r}-submenu ${r}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${r}-item, ${r}-submenu-title`]:{transition:[`border-color ${a}`,`background ${a}`].join(",")},[`${r}-submenu-arrow`]:{display:"none"}}}};var DU=FU;const BU=n=>{let{componentCls:r,menuArrowOffset:a,calc:e}=n;return{[`${r}-rtl`]:{direction:"rtl"},[`${r}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${r}-rtl${r}-vertical,
    ${r}-submenu-rtl ${r}-vertical`]:{[`${r}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(${wt(e(a).mul(-1).equal())})`},"&::after":{transform:`rotate(45deg) translateY(${wt(a)})`}}}}};var kU=BU;const Nb=n=>Object.assign({},JN(n)),VU=(n,r)=>{const{componentCls:a,itemColor:e,itemSelectedColor:t,groupTitleColor:i,itemBg:o,subMenuItemBg:s,itemSelectedBg:l,activeBarHeight:u,activeBarWidth:c,activeBarBorderWidth:f,motionDurationSlow:d,motionEaseInOut:h,motionEaseOut:_,itemPaddingInline:p,motionDurationMid:v,itemHoverColor:y,lineType:m,colorSplit:g,itemDisabledColor:x,dangerItemColor:b,dangerItemHoverColor:S,dangerItemSelectedColor:C,dangerItemActiveBg:E,dangerItemSelectedBg:T,popupBg:M,itemHoverBg:L,itemActiveBg:F,menuSubMenuBg:N,horizontalItemSelectedColor:I,horizontalItemSelectedBg:O,horizontalItemBorderRadius:P,horizontalItemHoverBg:R}=n;return{[`${a}-${r}, ${a}-${r} > ${a}`]:{color:e,background:o,[`&${a}-root:focus-visible`]:Object.assign({},Nb(n)),[`${a}-item-group-title`]:{color:i},[`${a}-submenu-selected`]:{[`> ${a}-submenu-title`]:{color:t}},[`${a}-item, ${a}-submenu-title`]:{color:e,[`&:not(${a}-item-disabled):focus-visible`]:Object.assign({},Nb(n))},[`${a}-item-disabled, ${a}-submenu-disabled`]:{color:`${x} !important`},[`${a}-item:not(${a}-item-selected):not(${a}-submenu-selected)`]:{[`&:hover, > ${a}-submenu-title:hover`]:{color:y}},[`&:not(${a}-horizontal)`]:{[`${a}-item:not(${a}-item-selected)`]:{"&:hover":{backgroundColor:L},"&:active":{backgroundColor:F}},[`${a}-submenu-title`]:{"&:hover":{backgroundColor:L},"&:active":{backgroundColor:F}}},[`${a}-item-danger`]:{color:b,[`&${a}-item:hover`]:{[`&:not(${a}-item-selected):not(${a}-submenu-selected)`]:{color:S}},[`&${a}-item:active`]:{background:E}},[`${a}-item a`]:{"&, &:hover":{color:"inherit"}},[`${a}-item-selected`]:{color:t,[`&${a}-item-danger`]:{color:C},["a, a:hover"]:{color:"inherit"}},[`& ${a}-item-selected`]:{backgroundColor:l,[`&${a}-item-danger`]:{backgroundColor:T}},[`&${a}-submenu > ${a}`]:{backgroundColor:N},[`&${a}-popup > ${a}`]:{backgroundColor:M},[`&${a}-submenu-popup > ${a}`]:{backgroundColor:M},[`&${a}-horizontal`]:Object.assign(Object.assign({},r==="dark"?{borderBottom:0}:{}),{[`> ${a}-item, > ${a}-submenu`]:{top:f,marginTop:n.calc(f).mul(-1).equal(),marginBottom:0,borderRadius:P,"&::after":{position:"absolute",insetInline:p,bottom:0,borderBottom:`${wt(u)} solid transparent`,transition:`border-color ${d} ${h}`,content:'""'},["&:hover, &-active, &-open"]:{background:R,"&::after":{borderBottomWidth:u,borderBottomColor:I}},["&-selected"]:{color:I,backgroundColor:O,"&:hover":{backgroundColor:O},"&::after":{borderBottomWidth:u,borderBottomColor:I}}}}),[`&${a}-root`]:{[`&${a}-inline, &${a}-vertical`]:{borderInlineEnd:`${wt(f)} ${m} ${g}`}},[`&${a}-inline`]:{[`${a}-sub${a}-inline`]:{background:s},[`${a}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${wt(c)} solid ${t}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${v} ${_}`,`opacity ${v} ${_}`].join(","),content:'""'},[`&${a}-item-danger`]:{"&::after":{borderInlineEndColor:C}}},[`${a}-selected, ${a}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${v} ${h}`,`opacity ${v} ${h}`].join(",")}}}}}};var Fb=VU;const Db=n=>{const{componentCls:r,itemHeight:a,itemMarginInline:e,padding:t,menuArrowSize:i,marginXS:o,itemMarginBlock:s,itemWidth:l}=n,u=n.calc(i).add(t).add(o).equal();return{[`${r}-item`]:{position:"relative",overflow:"hidden"},[`${r}-item, ${r}-submenu-title`]:{height:a,lineHeight:wt(a),paddingInline:t,overflow:"hidden",textOverflow:"ellipsis",marginInline:e,marginBlock:s,width:l},[`> ${r}-item,
            > ${r}-submenu > ${r}-submenu-title`]:{height:a,lineHeight:wt(a)},[`${r}-item-group-list ${r}-submenu-title,
            ${r}-submenu-title`]:{paddingInlineEnd:u}}},UU=n=>{const{componentCls:r,iconCls:a,itemHeight:e,colorTextLightSolid:t,dropdownWidth:i,controlHeightLG:o,motionDurationMid:s,motionEaseOut:l,paddingXL:u,itemMarginInline:c,fontSizeLG:f,motionDurationSlow:d,paddingXS:h,boxShadowSecondary:_,collapsedWidth:p,collapsedIconSize:v}=n,y={height:e,lineHeight:wt(e),listStylePosition:"inside",listStyleType:"disc"};return[{[r]:{["&-inline, &-vertical"]:Object.assign({[`&${r}-root`]:{boxShadow:"none"}},Db(n))},[`${r}-submenu-popup`]:{[`${r}-vertical`]:Object.assign(Object.assign({},Db(n)),{boxShadow:_})}},{[`${r}-submenu-popup ${r}-vertical${r}-sub`]:{minWidth:i,maxHeight:`calc(100vh - ${wt(n.calc(o).mul(2.5).equal())})`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${r}-inline`]:{width:"100%",[`&${r}-root`]:{[`${r}-item, ${r}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${d}`,`background ${d}`,`padding ${s} ${l}`].join(","),[`> ${r}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${r}-sub${r}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${r}-submenu > ${r}-submenu-title`]:y,[`& ${r}-item-group-title`]:{paddingInlineStart:u}},[`${r}-item`]:y}},{[`${r}-inline-collapsed`]:{width:p,[`&${r}-root`]:{[`${r}-item, ${r}-submenu ${r}-submenu-title`]:{[`> ${r}-inline-collapsed-noicon`]:{fontSize:f,textAlign:"center"}}},[`> ${r}-item,
          > ${r}-item-group > ${r}-item-group-list > ${r}-item,
          > ${r}-item-group > ${r}-item-group-list > ${r}-submenu > ${r}-submenu-title,
          > ${r}-submenu > ${r}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${wt(n.calc(f).div(2).equal())} - ${wt(c)})`,textOverflow:"clip",[`
            ${r}-submenu-arrow,
            ${r}-submenu-expand-icon
          `]:{opacity:0},[`${r}-item-icon, ${a}`]:{margin:0,fontSize:v,lineHeight:wt(e),"+ span":{display:"inline-block",opacity:0}}},[`${r}-item-icon, ${a}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${r}-item-icon, ${a}`]:{display:"none"},"a, a:hover":{color:t}},[`${r}-item-group-title`]:Object.assign(Object.assign({},Dv),{paddingInline:h})}}]};var zU=UU;const Bb=n=>{const{componentCls:r,motionDurationSlow:a,motionDurationMid:e,motionEaseInOut:t,motionEaseOut:i,iconCls:o,iconSize:s,iconMarginInlineEnd:l}=n;return{[`${r}-item, ${r}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${a}`,`background ${a}`,`padding ${a} ${t}`].join(","),[`${r}-item-icon, ${o}`]:{minWidth:s,fontSize:s,transition:[`font-size ${e} ${i}`,`margin ${a} ${t}`,`color ${a}`].join(","),"+ span":{marginInlineStart:l,opacity:1,transition:[`opacity ${a} ${t}`,`margin ${a}`,`color ${a}`].join(",")}},[`${r}-item-icon`]:Object.assign({},Xp()),[`&${r}-item-only-child`]:{[`> ${o}, > ${r}-item-icon`]:{marginInlineEnd:0}}},[`${r}-item-disabled, ${r}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important"},[`> ${r}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},kb=n=>{const{componentCls:r,motionDurationSlow:a,motionEaseInOut:e,borderRadius:t,menuArrowSize:i,menuArrowOffset:o}=n;return{[`${r}-submenu`]:{["&-expand-icon, &-arrow"]:{position:"absolute",top:"50%",insetInlineEnd:n.margin,width:i,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${a} ${e}, opacity ${a}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:n.calc(i).mul(.6).equal(),height:n.calc(i).mul(.15).equal(),backgroundColor:"currentcolor",borderRadius:t,transition:[`background ${a} ${e}`,`transform ${a} ${e}`,`top ${a} ${e}`,`color ${a} ${e}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(${wt(n.calc(o).mul(-1).equal())})`},"&::after":{transform:`rotate(-45deg) translateY(${wt(o)})`}}}}},GU=n=>{const{antCls:r,componentCls:a,fontSize:e,motionDurationSlow:t,motionDurationMid:i,motionEaseInOut:o,paddingXS:s,padding:l,colorSplit:u,lineWidth:c,zIndexPopup:f,borderRadiusLG:d,subMenuItemBorderRadius:h,menuArrowSize:_,menuArrowOffset:p,lineType:v,groupTitleLineHeight:y,groupTitleFontSize:m}=n;return[{"":{[`${a}`]:Object.assign(Object.assign({},T1()),{["&-hidden"]:{display:"none"}})},[`${a}-submenu-hidden`]:{display:"none"}},{[a]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},wd(n)),T1()),{marginBottom:0,paddingInlineStart:0,fontSize:e,lineHeight:0,listStyle:"none",outline:"none",transition:`width ${t} cubic-bezier(0.2, 0, 0, 1) 0s`,["ul, ol"]:{margin:0,padding:0,listStyle:"none"},["&-overflow"]:{display:"flex",[`${a}-item`]:{flex:"none"}},[`${a}-item, ${a}-submenu, ${a}-submenu-title`]:{borderRadius:n.itemBorderRadius},[`${a}-item-group-title`]:{padding:`${wt(s)} ${wt(l)}`,fontSize:m,lineHeight:y,transition:`all ${t}`},[`&-horizontal ${a}-submenu`]:{transition:[`border-color ${t} ${o}`,`background ${t} ${o}`].join(",")},[`${a}-submenu, ${a}-submenu-inline`]:{transition:[`border-color ${t} ${o}`,`background ${t} ${o}`,`padding ${i} ${o}`].join(",")},[`${a}-submenu ${a}-sub`]:{cursor:"initial",transition:[`background ${t} ${o}`,`padding ${t} ${o}`].join(",")},[`${a}-title-content`]:{transition:`color ${t}`,[`> ${r}-typography-ellipsis-single-line`]:{display:"inline",verticalAlign:"unset"}},[`${a}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${a}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:u,borderStyle:v,borderWidth:0,borderTopWidth:c,marginBlock:c,padding:0,"&-dashed":{borderStyle:"dashed"}}}),Bb(n)),{[`${a}-item-group`]:{[`${a}-item-group-list`]:{margin:0,padding:0,[`${a}-item, ${a}-submenu-title`]:{paddingInline:`${wt(n.calc(e).mul(2).equal())} ${wt(l)}`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:f,borderRadius:d,boxShadow:"none",transformOrigin:"0 0",[`&${a}-submenu`]:{background:"transparent"},"&::before":{position:"absolute",inset:0,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'},[`> ${a}`]:Object.assign(Object.assign(Object.assign({borderRadius:d},Bb(n)),kb(n)),{[`${a}-item, ${a}-submenu > ${a}-submenu-title`]:{borderRadius:h},[`${a}-submenu-title::after`]:{transition:`transform ${t} ${o}`}})},[`
          &-placement-leftTop,
          &-placement-bottomRight,
          `]:{transformOrigin:"100% 0"},[`
          &-placement-leftBottom,
          &-placement-topRight,
          `]:{transformOrigin:"100% 100%"},[`
          &-placement-rightBottom,
          &-placement-topLeft,
          `]:{transformOrigin:"0 100%"},[`
          &-placement-bottomLeft,
          &-placement-rightTop,
          `]:{transformOrigin:"0 0"},[`
          &-placement-leftTop,
          &-placement-leftBottom
          `]:{paddingInlineEnd:n.paddingXS},[`
          &-placement-rightTop,
          &-placement-rightBottom
          `]:{paddingInlineStart:n.paddingXS},[`
          &-placement-topRight,
          &-placement-topLeft
          `]:{paddingBottom:n.paddingXS},[`
          &-placement-bottomRight,
          &-placement-bottomLeft
          `]:{paddingTop:n.paddingXS}}}),kb(n)),{[`&-inline-collapsed ${a}-submenu-arrow,
        &-inline ${a}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${wt(p)})`},"&::after":{transform:`rotate(45deg) translateX(${wt(n.calc(p).mul(-1).equal())})`}},[`${a}-submenu-open${a}-submenu-inline > ${a}-submenu-title > ${a}-submenu-arrow`]:{transform:`translateY(${wt(n.calc(_).mul(.2).mul(-1).equal())})`,"&::after":{transform:`rotate(-45deg) translateX(${wt(n.calc(p).mul(-1).equal())})`},"&::before":{transform:`rotate(45deg) translateX(${wt(p)})`}}})},{[`${r}-layout-header`]:{[a]:{lineHeight:"inherit"}}}]},HU=n=>{var r,a,e;const{colorPrimary:t,colorError:i,colorTextDisabled:o,colorErrorBg:s,colorText:l,colorTextDescription:u,colorBgContainer:c,colorFillAlter:f,colorFillContent:d,lineWidth:h,lineWidthBold:_,controlItemBgActive:p,colorBgTextHover:v,controlHeightLG:y,lineHeight:m,colorBgElevated:g,marginXXS:x,padding:b,fontSize:S,controlHeightSM:C,fontSizeLG:E,colorTextLightSolid:T,colorErrorHover:M}=n,L=(r=n.activeBarWidth)!==null&&r!==void 0?r:0,F=(a=n.activeBarBorderWidth)!==null&&a!==void 0?a:h,N=(e=n.itemMarginInline)!==null&&e!==void 0?e:n.marginXXS,I=new ir(T).setAlpha(.65).toRgbString();return{dropdownWidth:160,zIndexPopup:n.zIndexPopupBase+50,radiusItem:n.borderRadiusLG,itemBorderRadius:n.borderRadiusLG,radiusSubMenuItem:n.borderRadiusSM,subMenuItemBorderRadius:n.borderRadiusSM,colorItemText:l,itemColor:l,colorItemTextHover:l,itemHoverColor:l,colorItemTextHoverHorizontal:t,horizontalItemHoverColor:t,colorGroupTitle:u,groupTitleColor:u,colorItemTextSelected:t,itemSelectedColor:t,colorItemTextSelectedHorizontal:t,horizontalItemSelectedColor:t,colorItemBg:c,itemBg:c,colorItemBgHover:v,itemHoverBg:v,colorItemBgActive:d,itemActiveBg:p,colorSubItemBg:f,subMenuItemBg:f,colorItemBgSelected:p,itemSelectedBg:p,colorItemBgSelectedHorizontal:"transparent",horizontalItemSelectedBg:"transparent",colorActiveBarWidth:0,activeBarWidth:L,colorActiveBarHeight:_,activeBarHeight:_,colorActiveBarBorderSize:h,activeBarBorderWidth:F,colorItemTextDisabled:o,itemDisabledColor:o,colorDangerItemText:i,dangerItemColor:i,colorDangerItemTextHover:i,dangerItemHoverColor:i,colorDangerItemTextSelected:i,dangerItemSelectedColor:i,colorDangerItemBgActive:s,dangerItemActiveBg:s,colorDangerItemBgSelected:s,dangerItemSelectedBg:s,itemMarginInline:N,horizontalItemBorderRadius:0,horizontalItemHoverBg:"transparent",itemHeight:y,groupTitleLineHeight:m,collapsedWidth:y*2,popupBg:g,itemMarginBlock:x,itemPaddingInline:b,horizontalLineHeight:`${y*1.15}px`,iconSize:S,iconMarginInlineEnd:C-S,collapsedIconSize:E,groupTitleFontSize:S,darkItemDisabledColor:new ir(T).setAlpha(.25).toRgbString(),darkItemColor:I,darkDangerItemColor:i,darkItemBg:"#001529",darkPopupBg:"#001529",darkSubMenuItemBg:"#000c17",darkItemSelectedColor:T,darkItemSelectedBg:t,darkDangerItemSelectedBg:i,darkItemHoverBg:"transparent",darkGroupTitleColor:I,darkItemHoverColor:T,darkDangerItemHoverColor:M,darkDangerItemSelectedColor:T,darkDangerItemActiveBg:i,itemWidth:L?`calc(100% + ${F}px)`:`calc(100% - ${N*2}px)`}};var jU=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return Pd("Menu",t=>{const{colorBgElevated:i,controlHeightLG:o,fontSize:s,darkItemColor:l,darkDangerItemColor:u,darkItemBg:c,darkSubMenuItemBg:f,darkItemSelectedColor:d,darkItemSelectedBg:h,darkDangerItemSelectedBg:_,darkItemHoverBg:p,darkGroupTitleColor:v,darkItemHoverColor:y,darkItemDisabledColor:m,darkDangerItemHoverColor:g,darkDangerItemSelectedColor:x,darkDangerItemActiveBg:b,popupBg:S,darkPopupBg:C}=t,E=t.calc(s).div(7).mul(5).equal(),T=Pi(t,{menuArrowSize:E,menuHorizontalHeight:t.calc(o).mul(1.15).equal(),menuArrowOffset:t.calc(E).mul(.25).equal(),menuSubMenuBg:i,calc:t.calc,popupBg:S}),M=Pi(T,{itemColor:l,itemHoverColor:y,groupTitleColor:v,itemSelectedColor:d,itemBg:c,popupBg:C,subMenuItemBg:f,itemActiveBg:"transparent",itemSelectedBg:h,activeBarHeight:0,activeBarBorderWidth:0,itemHoverBg:p,itemDisabledColor:m,dangerItemColor:u,dangerItemHoverColor:g,dangerItemSelectedColor:x,dangerItemActiveBg:b,dangerItemSelectedBg:_,menuSubMenuBg:f,horizontalItemSelectedColor:d,horizontalItemSelectedBg:h});return[GU(T),DU(T),zU(T),Fb(T,"light"),Fb(M,"dark"),kU(T),x3(T),Uv(T,"slide-up"),Uv(T,"slide-down"),yw(T,"zoom-big")]},HU,{deprecatedTokens:[["colorGroupTitle","groupTitleColor"],["radiusItem","itemBorderRadius"],["radiusSubMenuItem","subMenuItemBorderRadius"],["colorItemText","itemColor"],["colorItemTextHover","itemHoverColor"],["colorItemTextHoverHorizontal","horizontalItemHoverColor"],["colorItemTextSelected","itemSelectedColor"],["colorItemTextSelectedHorizontal","horizontalItemSelectedColor"],["colorItemTextDisabled","itemDisabledColor"],["colorDangerItemText","dangerItemColor"],["colorDangerItemTextHover","dangerItemHoverColor"],["colorDangerItemTextSelected","dangerItemSelectedColor"],["colorDangerItemBgActive","dangerItemActiveBg"],["colorDangerItemBgSelected","dangerItemSelectedBg"],["colorItemBg","itemBg"],["colorItemBgHover","itemHoverBg"],["colorSubItemBg","subMenuItemBg"],["colorItemBgActive","itemActiveBg"],["colorItemBgSelectedHorizontal","horizontalItemSelectedBg"],["colorActiveBarWidth","activeBarWidth"],["colorActiveBarHeight","activeBarHeight"],["colorActiveBarBorderSize","activeBarBorderWidth"],["colorItemBgSelected","itemSelectedBg"]],injectStyle:a,unitless:{groupTitleLineHeight:!0}})(n,r)},WU=globalThis&&globalThis.__rest||function(n,r){var a={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&r.indexOf(e)<0&&(a[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,e=Object.getOwnPropertySymbols(n);t<e.length;t++)r.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(n,e[t])&&(a[e[t]]=n[e[t]]);return a};function hg(n){return n===null||n===!1}const $U=w.exports.forwardRef((n,r)=>{var a;const e=w.exports.useContext(Lb),t=e||{},{getPrefixCls:i,getPopupContainer:o,direction:s,menu:l}=w.exports.useContext(Jr),u=i(),{prefixCls:c,className:f,style:d,theme:h="light",expandIcon:_,_internalDisableMenuItemTitleTooltip:p,inlineCollapsed:v,siderCollapsed:y,items:m,children:g,rootClassName:x,mode:b,selectable:S,onClick:C,overflowedIndicatorPopupClassName:E}=n,T=WU(n,["prefixCls","className","style","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","items","children","rootClassName","mode","selectable","onClick","overflowedIndicatorPopupClassName"]),M=_s(T,["collapsedWidth"]),L=LU(m)||g;(a=t.validator)===null||a===void 0||a.call(t,{mode:b});const F=Xa(function(){var G;C==null||C.apply(void 0,arguments),(G=t.onClick)===null||G===void 0||G.call(t)}),N=t.mode||b,I=S!=null?S:t.selectable,O=w.exports.useMemo(()=>y!==void 0?y:v,[v,y]),P={horizontal:{motionName:`${u}-slide-up`},inline:ID(u),other:{motionName:`${u}-zoom-big`}},R=i("menu",c||t.prefixCls),A=tw(R),[D,B,k]=jU(R,A,!e),V=mt(`${R}-${h}`,l==null?void 0:l.className,f),U=w.exports.useMemo(()=>{var G,$;if(typeof _=="function"||hg(_))return _||null;if(typeof t.expandIcon=="function"||hg(t.expandIcon))return t.expandIcon||null;if(typeof(l==null?void 0:l.expandIcon)=="function"||hg(l==null?void 0:l.expandIcon))return(l==null?void 0:l.expandIcon)||null;const W=(G=_!=null?_:t==null?void 0:t.expandIcon)!==null&&G!==void 0?G:l==null?void 0:l.expandIcon;return qp(W,{className:mt(`${R}-submenu-expand-icon`,w.exports.isValidElement(W)?($=W.props)===null||$===void 0?void 0:$.className:void 0)})},[_,t==null?void 0:t.expandIcon,l==null?void 0:l.expandIcon,R]),j=w.exports.useMemo(()=>({prefixCls:R,inlineCollapsed:O||!1,direction:s,firstLevel:!0,theme:h,mode:N,disableMenuItemTitleTooltip:p}),[R,O,s,p,h]);return D(w.exports.createElement(Lb.Provider,{value:null},w.exports.createElement(jv.Provider,{value:j},w.exports.createElement(Nd,Object.assign({getPopupContainer:o,overflowedIndicator:w.exports.createElement(RU,null),overflowedIndicatorPopupClassName:mt(R,`${R}-${h}`,E),mode:N,selectable:I,onClick:F},M,{inlineCollapsed:O,style:Object.assign(Object.assign({},l==null?void 0:l.style),d),className:V,prefixCls:R,direction:s,defaultMotions:P,expandIcon:U,ref:r,rootClassName:mt(x,B,t.rootClassName,k,A)}),L))))});var XU=$U;const Fd=w.exports.forwardRef((n,r)=>{const a=w.exports.useRef(null),e=w.exports.useContext(r_);return w.exports.useImperativeHandle(r,()=>({menu:a.current,focus:t=>{var i;(i=a.current)===null||i===void 0||i.focus(t)}})),w.exports.createElement(XU,Object.assign({ref:a},n,e))});Fd.Item=iP;Fd.SubMenu=oP;Fd.Divider=aP;Fd.ItemGroup=n_;var KU=Fd;function YU(n,r,a){return typeof a=="boolean"?a:n.length?!0:Zs(r).some(t=>t.type===rP)}const QU=n=>{const{componentCls:r,bodyBg:a,lightSiderBg:e,lightTriggerBg:t,lightTriggerColor:i}=n;return{[`${r}-sider-light`]:{background:e,[`${r}-sider-trigger`]:{color:i,background:t},[`${r}-sider-zero-width-trigger`]:{color:i,background:t,border:`1px solid ${a}`,borderInlineStart:0}}}};var qU=QU;const JU=n=>{const{antCls:r,componentCls:a,colorText:e,triggerColor:t,footerBg:i,triggerBg:o,headerHeight:s,headerPadding:l,headerColor:u,footerPadding:c,triggerHeight:f,zeroTriggerHeight:d,zeroTriggerWidth:h,motionDurationMid:_,motionDurationSlow:p,fontSize:v,borderRadius:y,bodyBg:m,headerBg:g,siderBg:x}=n;return{[a]:Object.assign(Object.assign({display:"flex",flex:"auto",flexDirection:"column",minHeight:0,background:m,"&, *":{boxSizing:"border-box"},[`&${a}-has-sider`]:{flexDirection:"row",[`> ${a}, > ${a}-content`]:{width:0}},[`${a}-header, &${a}-footer`]:{flex:"0 0 auto"},[`${a}-sider`]:{position:"relative",minWidth:0,background:x,transition:`all ${_}, background 0s`,"&-children":{height:"100%",marginTop:-.1,paddingTop:.1,[`${r}-menu${r}-menu-inline-collapsed`]:{width:"auto"}},"&-has-trigger":{paddingBottom:f},"&-right":{order:1},"&-trigger":{position:"fixed",bottom:0,zIndex:1,height:f,color:t,lineHeight:wt(f),textAlign:"center",background:o,cursor:"pointer",transition:`all ${_}`},"&-zero-width":{"> *":{overflow:"hidden"},"&-trigger":{position:"absolute",top:s,insetInlineEnd:n.calc(h).mul(-1).equal(),zIndex:1,width:h,height:d,color:t,fontSize:n.fontSizeXL,display:"flex",alignItems:"center",justifyContent:"center",background:x,borderStartStartRadius:0,borderStartEndRadius:y,borderEndEndRadius:y,borderEndStartRadius:0,cursor:"pointer",transition:`background ${p} ease`,"&::after":{position:"absolute",inset:0,background:"transparent",transition:`all ${p}`,content:'""'},"&:hover::after":{background:"rgba(255, 255, 255, 0.2)"},"&-right":{insetInlineStart:n.calc(h).mul(-1).equal(),borderStartStartRadius:y,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:y}}}}},qU(n)),{"&-rtl":{direction:"rtl"}}),[`${a}-header`]:{height:s,padding:l,color:u,lineHeight:wt(s),background:g,[`${r}-menu`]:{lineHeight:"inherit"}},[`${a}-footer`]:{padding:c,color:e,fontSize:v,background:i},[`${a}-content`]:{flex:"auto",color:e,minHeight:0}}},ZU=n=>{const{colorBgLayout:r,controlHeight:a,controlHeightLG:e,colorText:t,controlHeightSM:i,marginXXS:o,colorTextLightSolid:s,colorBgContainer:l}=n,u=e*1.25;return{colorBgHeader:"#001529",colorBgBody:r,colorBgTrigger:"#002140",bodyBg:r,headerBg:"#001529",headerHeight:a*2,headerPadding:`0 ${u}px`,headerColor:t,footerPadding:`${i}px ${u}px`,footerBg:r,siderBg:"#001529",triggerHeight:e+o*2,triggerBg:"#002140",triggerColor:s,zeroTriggerWidth:e,zeroTriggerHeight:e,lightSiderBg:l,lightTriggerBg:l,lightTriggerColor:t}};var sP=Pd("Layout",n=>[JU(n)],ZU,{deprecatedTokens:[["colorBgBody","bodyBg"],["colorBgHeader","headerBg"],["colorBgTrigger","triggerBg"]]}),lP=globalThis&&globalThis.__rest||function(n,r){var a={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&r.indexOf(e)<0&&(a[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,e=Object.getOwnPropertySymbols(n);t<e.length;t++)r.indexOf(e[t])<0&&Object.prototype.propertyIsEnumerable.call(n,e[t])&&(a[e[t]]=n[e[t]]);return a};function a_(n){let{suffixCls:r,tagName:a,displayName:e}=n;return t=>w.exports.forwardRef((o,s)=>w.exports.createElement(t,Object.assign({ref:s,suffixCls:r,tagName:a},o)))}const dx=w.exports.forwardRef((n,r)=>{const{prefixCls:a,suffixCls:e,className:t,tagName:i}=n,o=lP(n,["prefixCls","suffixCls","className","tagName"]),{getPrefixCls:s}=w.exports.useContext(Jr),l=s("layout",a),[u,c,f]=sP(l),d=e?`${l}-${e}`:l;return u(w.exports.createElement(i,Object.assign({className:mt(a||d,t,c,f),ref:r},o)))}),ez=w.exports.forwardRef((n,r)=>{const{direction:a}=w.exports.useContext(Jr),[e,t]=w.exports.useState([]),{prefixCls:i,className:o,rootClassName:s,children:l,hasSider:u,tagName:c,style:f}=n,d=lP(n,["prefixCls","className","rootClassName","children","hasSider","tagName","style"]),h=_s(d,["suffixCls"]),{getPrefixCls:_,layout:p}=w.exports.useContext(Jr),v=_("layout",i),y=YU(e,l,u),[m,g,x]=sP(v),b=mt(v,{[`${v}-has-sider`]:y,[`${v}-rtl`]:a==="rtl"},p==null?void 0:p.className,o,s,g,x),S=w.exports.useMemo(()=>({siderHook:{addSider:C=>{t(E=>[].concat(st(E),[C]))},removeSider:C=>{t(E=>E.filter(T=>T!==C))}}}),[]);return m(w.exports.createElement(nP.Provider,{value:S},w.exports.createElement(c,Object.assign({ref:r,className:b,style:Object.assign(Object.assign({},p==null?void 0:p.style),f)},h),l)))}),tz=a_({tagName:"div",displayName:"Layout"})(ez),nz=a_({suffixCls:"header",tagName:"header",displayName:"Header"})(dx),rz=a_({suffixCls:"footer",tagName:"footer",displayName:"Footer"})(dx),az=a_({suffixCls:"content",tagName:"main",displayName:"Content"})(dx);var iz=tz;const Oc=iz;Oc.Header=nz;Oc.Footer=rz;Oc.Content=az;Oc.Sider=rP;Oc._InternalSiderContext=r_;var Zm=Oc;const oz=n=>{const r=n!=null&&n.algorithm?Zf(n.algorithm):Zf(Ad),a=Object.assign(Object.assign({},rc),n==null?void 0:n.token);return nA(a,{override:n==null?void 0:n.token},r,Ky)};var sz=oz;function lz(n){const{sizeUnit:r,sizeStep:a}=n,e=a-2;return{sizeXXL:r*(e+10),sizeXL:r*(e+6),sizeLG:r*(e+2),sizeMD:r*(e+2),sizeMS:r*(e+1),size:r*e,sizeSM:r*e,sizeXS:r*(e-1),sizeXXS:r*(e-1)}}const uz=(n,r)=>{const a=r!=null?r:Ad(n),e=a.fontSizeSM,t=a.controlHeight-4;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a),lz(r!=null?r:n)),TA(e)),{controlHeight:t}),EA(Object.assign(Object.assign({},a),{controlHeight:t})))};var cz=uz;const Uo=(n,r)=>new ir(n).setAlpha(r).toRgbString(),du=(n,r)=>new ir(n).lighten(r).toHexString(),fz=n=>{const r=ls(n,{theme:"dark"});return{1:r[0],2:r[1],3:r[2],4:r[3],5:r[6],6:r[5],7:r[4],8:r[6],9:r[5],10:r[4]}},dz=(n,r)=>{const a=n||"#000",e=r||"#fff";return{colorBgBase:a,colorTextBase:e,colorText:Uo(e,.85),colorTextSecondary:Uo(e,.65),colorTextTertiary:Uo(e,.45),colorTextQuaternary:Uo(e,.25),colorFill:Uo(e,.18),colorFillSecondary:Uo(e,.12),colorFillTertiary:Uo(e,.08),colorFillQuaternary:Uo(e,.04),colorBgElevated:du(a,12),colorBgContainer:du(a,8),colorBgLayout:du(a,0),colorBgSpotlight:du(a,26),colorBgBlur:Uo(e,.04),colorBorder:du(a,26),colorBorderSecondary:du(a,19)}},hz=(n,r)=>{const a=Object.keys(Xy).map(t=>{const i=ls(n[t],{theme:"dark"});return new Array(10).fill(1).reduce((o,s,l)=>(o[`${t}-${l+1}`]=i[l],o[`${t}${l+1}`]=i[l],o),{})}).reduce((t,i)=>(t=Object.assign(Object.assign({},t),i),t),{}),e=r!=null?r:Ad(n);return Object.assign(Object.assign(Object.assign({},e),a),CA(n,{generateColorPalettes:fz,generateNeutralColorPalettes:dz}))};var vz=hz;function pz(){const[n,r,a]=wi();return{theme:n,token:r,hashId:a}}var _z={defaultConfig:nd,defaultSeed:nd.token,useToken:pz,defaultAlgorithm:Ad,darkAlgorithm:vz,compactAlgorithm:cz,getDesignToken:sz};function Vb(n,r){for(var a=0;a<r.length;a++){var e=r[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function gz(n,r,a){return r&&Vb(n.prototype,r),a&&Vb(n,a),n}function e0(n,r){return e0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e0(n,r)}function mz(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&e0(n,r)}var Xn;(function(n){n[n.Disjoint=0]="Disjoint",n[n.Contains=1]="Contains",n[n.Intersects=2]="Intersects"})(Xn||(Xn={}));var sa;(function(n){n[n.Back=0]="Back",n[n.Front=1]="Front",n[n.Intersecting=2]="Intersecting"})(sa||(sa={}));var Ht;(function(n){n[n.Near=0]="Near",n[n.Far=1]="Far",n[n.Left=2]="Left",n[n.Right=3]="Right",n[n.Bottom=4]="Bottom",n[n.Top=5]="Top"})(Ht||(Ht={}));function Ub(n,r){for(var a=0;a<r.length;a++){var e=r[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function Ic(n,r,a){return r&&Ub(n.prototype,r),a&&Ub(n,a),n}var ve=function(){function n(){}return n.clamp=function(a,e,t){return Math.max(e,Math.min(t,a))},n.equals=function(a,e){return Math.abs(a-e)<=n.zeroTolerance},n.isPowerOf2=function(a){return(a&a-1)===0},n.radianToDegree=function(a){return a*n.radToDegreeFactor},n.degreeToRadian=function(a){return a*n.degreeToRadFactor},n}();(function(){ve.zeroTolerance=1e-6})();(function(){ve.radToDegreeFactor=180/Math.PI})();(function(){ve.degreeToRadFactor=Math.PI/180})();var z=function(){function n(a,e,t){a===void 0&&(a=0),e===void 0&&(e=0),t===void 0&&(t=0),this._onValueChanged=null,this._x=a,this._y=e,this._z=t}var r=n.prototype;return r.set=function(e,t,i){return this._x=e,this._y=t,this._z=i,this._onValueChanged&&this._onValueChanged(),this},r.add=function(e){return this._x+=e._x,this._y+=e._y,this._z+=e._z,this._onValueChanged&&this._onValueChanged(),this},r.subtract=function(e){return this._x-=e._x,this._y-=e._y,this._z-=e._z,this._onValueChanged&&this._onValueChanged(),this},r.multiply=function(e){return this._x*=e._x,this._y*=e._y,this._z*=e._z,this._onValueChanged&&this._onValueChanged(),this},r.divide=function(e){return this._x/=e._x,this._y/=e._y,this._z/=e._z,this._onValueChanged&&this._onValueChanged(),this},r.length=function(){var e=this,t=e._x,i=e._y,o=e._z;return Math.sqrt(t*t+i*i+o*o)},r.lengthSquared=function(){var e=this,t=e._x,i=e._y,o=e._z;return t*t+i*i+o*o},r.negate=function(){return this._x=-this._x,this._y=-this._y,this._z=-this._z,this._onValueChanged&&this._onValueChanged(),this},r.normalize=function(){return n.normalize(this,this),this},r.scale=function(e){return this._x*=e,this._y*=e,this._z*=e,this._onValueChanged&&this._onValueChanged(),this},r.transformNormal=function(e){return n.transformNormal(this,e,this),this},r.transformToVec3=function(e){return n.transformToVec3(this,e,this),this},r.transformCoordinate=function(e){return n.transformCoordinate(this,e,this),this},r.transformByQuat=function(e){return n.transformByQuat(this,e,this),this},r.clone=function(){return new n(this._x,this._y,this._z)},r.copyFrom=function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._onValueChanged&&this._onValueChanged(),this},r.copyFromArray=function(e,t){return t===void 0&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._onValueChanged&&this._onValueChanged(),this},r.copyToArray=function(e,t){t===void 0&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z},r.toJSON=function(){return{x:this._x,y:this._y,z:this._z}},n.add=function(e,t,i){i._x=e._x+t._x,i._y=e._y+t._y,i._z=e._z+t._z,i._onValueChanged&&i._onValueChanged()},n.subtract=function(e,t,i){i._x=e._x-t._x,i._y=e._y-t._y,i._z=e._z-t._z,i._onValueChanged&&i._onValueChanged()},n.multiply=function(e,t,i){i._x=e._x*t._x,i._y=e._y*t._y,i._z=e._z*t._z,i._onValueChanged&&i._onValueChanged()},n.divide=function(e,t,i){i._x=e._x/t._x,i._y=e._y/t._y,i._z=e._z/t._z,i._onValueChanged&&i._onValueChanged()},n.dot=function(e,t){return e._x*t._x+e._y*t._y+e._z*t._z},n.cross=function(e,t,i){var o=e._x,s=e._y,l=e._z,u=t._x,c=t._y,f=t._z;i.set(s*f-l*c,l*u-o*f,o*c-s*u)},n.distance=function(e,t){var i=t._x-e._x,o=t._y-e._y,s=t._z-e._z;return Math.sqrt(i*i+o*o+s*s)},n.distanceSquared=function(e,t){var i=t._x-e._x,o=t._y-e._y,s=t._z-e._z;return i*i+o*o+s*s},n.equals=function(e,t){return ve.equals(e._x,t._x)&&ve.equals(e._y,t._y)&&ve.equals(e._z,t._z)},n.lerp=function(e,t,i,o){var s=e._x,l=e._y,u=e._z;o._x=s+(t._x-s)*i,o._y=l+(t._y-l)*i,o._z=u+(t._z-u)*i,o._onValueChanged&&o._onValueChanged()},n.max=function(e,t,i){i._x=Math.max(e._x,t._x),i._y=Math.max(e._y,t._y),i._z=Math.max(e._z,t._z),i._onValueChanged&&i._onValueChanged()},n.min=function(e,t,i){i._x=Math.min(e._x,t._x),i._y=Math.min(e._y,t._y),i._z=Math.min(e._z,t._z),i._onValueChanged&&i._onValueChanged()},n.negate=function(e,t){t._x=-e._x,t._y=-e._y,t._z=-e._z,t._onValueChanged&&t._onValueChanged()},n.normalize=function(e,t){var i=e._x,o=e._y,s=e._z,l=Math.sqrt(i*i+o*o+s*s);l>ve.zeroTolerance&&(l=1/l,t.set(i*l,o*l,s*l))},n.scale=function(e,t,i){i._x=e._x*t,i._y=e._y*t,i._z=e._z*t,i._onValueChanged&&i._onValueChanged()},n.transformNormal=function(e,t,i){var o=e._x,s=e._y,l=e._z,u=t.elements;i._x=o*u[0]+s*u[4]+l*u[8],i._y=o*u[1]+s*u[5]+l*u[9],i._z=o*u[2]+s*u[6]+l*u[10],i._onValueChanged&&i._onValueChanged()},n.transformToVec3=function(e,t,i){var o=e._x,s=e._y,l=e._z,u=t.elements;i._x=o*u[0]+s*u[4]+l*u[8]+u[12],i._y=o*u[1]+s*u[5]+l*u[9]+u[13],i._z=o*u[2]+s*u[6]+l*u[10]+u[14],i._onValueChanged&&i._onValueChanged()},n.transformToVec4=function(e,t,i){var o=e._x,s=e._y,l=e._z,u=t.elements;i._x=o*u[0]+s*u[4]+l*u[8]+u[12],i._y=o*u[1]+s*u[5]+l*u[9]+u[13],i._z=o*u[2]+s*u[6]+l*u[10]+u[14],i._w=o*u[3]+s*u[7]+l*u[11]+u[15],i._onValueChanged&&i._onValueChanged()},n.transformCoordinate=function(e,t,i){var o=e._x,s=e._y,l=e._z,u=t.elements,c=o*u[3]+s*u[7]+l*u[11]+u[15];c=1/c,i._x=(o*u[0]+s*u[4]+l*u[8]+u[12])*c,i._y=(o*u[1]+s*u[5]+l*u[9]+u[13])*c,i._z=(o*u[2]+s*u[6]+l*u[10]+u[14])*c,i._onValueChanged&&i._onValueChanged()},n.transformByQuat=function(e,t,i){var o=e._x,s=e._y,l=e._z,u=t._x,c=t._y,f=t._z,d=t._w,h=d*o+c*l-f*s,_=d*s+f*o-u*l,p=d*l+u*s-c*o,v=-u*o-c*s-f*l;i._x=h*d-v*u-_*f+p*c,i._y=_*d-v*c-p*u+h*f,i._z=p*d-v*f-h*c+_*u,i._onValueChanged&&i._onValueChanged()},Ic(n,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onValueChanged&&this._onValueChanged()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onValueChanged&&this._onValueChanged()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onValueChanged&&this._onValueChanged()}}]),n}();(function(){z._zero=new z(0,0,0)})();(function(){z._one=new z(1,1,1)})();var uP=function(){function n(a,e){a===void 0&&(a=null),e===void 0&&(e=0),this.center=new z,this.radius=0,a&&this.center.copyFrom(a),this.radius=e}var r=n.prototype;return r.clone=function(){return new n(this.center,this.radius)},r.copyFrom=function(e){return this.center.copyFrom(e.center),this.radius=e.radius,this},n.fromPoints=function(e,t){if(!e||e.length===0)throw new Error("points must be array and length must > 0");var i=e.length,o=n._tempVec30;o.x=o.y=o.z=0;for(var s=0;s<i;++s)z.add(e[s],o,o);z.scale(o,1/i,t.center);for(var l=0,u=0;u<i;++u){var c=z.distanceSquared(o,e[u]);c>l&&(l=c)}t.radius=Math.sqrt(l)},n.fromBox=function(e,t){var i=t.center,o=e.min,s=e.max;i.x=(o.x+s.x)*.5,i.y=(o.y+s.y)*.5,i.z=(o.z+s.z)*.5,t.radius=z.distance(i,s)},n}();(function(){uP._tempVec30=new z})();var Da=function(){function n(a,e){a===void 0&&(a=null),e===void 0&&(e=null),this.min=new z,this.max=new z,a&&this.min.copyFrom(a),e&&this.max.copyFrom(e)}var r=n.prototype;return r.getCenter=function(e){var t=this,i=t.min,o=t.max,s=o._x+i._x,l=o._y+i._y,u=o._z+i._z;return e.set(isNaN(s)?0:s*.5,isNaN(l)?0:l*.5,isNaN(u)?0:u*.5),e},r.getExtent=function(e){var t=this,i=t.min,o=t.max,s=o._x-i._x,l=o._y-i._y,u=o._z-i._z;return e.set(isNaN(s)?0:s*.5,isNaN(l)?0:l*.5,isNaN(u)?0:u*.5),e},r.getCorners=function(e){e===void 0&&(e=[]);var t=this,i=t.min,o=t.max,s=i.x,l=i.y,u=i.z,c=o.x,f=o.y,d=o.z,h=e.length;if(h<8)for(var _=0,p=8-h;_<p;++_)e[h+_]=new z;return e[0].set(s,f,d),e[1].set(c,f,d),e[2].set(c,l,d),e[3].set(s,l,d),e[4].set(s,f,u),e[5].set(c,f,u),e[6].set(c,l,u),e[7].set(s,l,u),e},r.transform=function(e){return n.transform(this,e,this),this},r.clone=function(){return new n(this.min,this.max)},r.copyFrom=function(e){return this.min.copyFrom(e.min),this.max.copyFrom(e.max),this},n.fromCenterAndExtent=function(e,t,i){z.subtract(e,t,i.min),z.add(e,t,i.max)},n.fromPoints=function(e,t){if(!e||e.length===0)throw new Error("points must be array and length must > 0");var i=t.min,o=t.max;i.x=i.y=i.z=Number.MAX_VALUE,o.x=o.y=o.z=-Number.MAX_VALUE;for(var s=0,l=e.length;s<l;++s){var u=e[s];z.min(i,u,i),z.max(o,u,o)}},n.fromSphere=function(e,t){var i=e.center,o=e.radius,s=t.min,l=t.max;s.x=i.x-o,s.y=i.y-o,s.z=i.z-o,l.x=i.x+o,l.y=i.y+o,l.z=i.z+o},n.transform=function(e,t,i){var o=n._tempVec30,s=n._tempVec31;e.getCenter(o),e.getExtent(s),z.transformCoordinate(o,t,o);var l=s.x,u=s.y,c=s.z,f=t.elements,d=f[0],h=f[1],_=f[2],p=f[4],v=f[5],y=f[6],m=f[8],g=f[9],x=f[10];s.set((d===0?0:Math.abs(l*d))+(p===0?0:Math.abs(u*p))+(m===0?0:Math.abs(c*m)),(h===0?0:Math.abs(l*h))+(v===0?0:Math.abs(u*v))+(g===0?0:Math.abs(c*g)),(_===0?0:Math.abs(l*_))+(y===0?0:Math.abs(u*y))+(x===0?0:Math.abs(c*x))),z.subtract(o,s,i.min),z.add(o,s,i.max)},n.merge=function(e,t,i){return z.min(e.min,t.min,i.min),z.max(e.max,t.max,i.max),i},n}();(function(){Da._tempVec30=new z})();(function(){Da._tempVec31=new z})();var Wr=function(){function n(){}return n.intersectionPointThreePlanes=function(a,e,t,i){var o=a.normal,s=e.normal,l=t.normal;z.cross(s,l,n._tempVec30),z.cross(l,o,n._tempVec31),z.cross(o,s,n._tempVec32);var u=-z.dot(o,n._tempVec30),c=-z.dot(s,n._tempVec31),f=-z.dot(l,n._tempVec32);z.scale(n._tempVec30,a.distance/u,n._tempVec30),z.scale(n._tempVec31,e.distance/c,n._tempVec31),z.scale(n._tempVec32,t.distance/f,n._tempVec32),z.add(n._tempVec30,n._tempVec31,i),z.add(i,n._tempVec32,i)},n.distancePlaneAndPoint=function(a,e){return z.dot(a.normal,e)+a.distance},n.intersectsPlaneAndPoint=function(a,e){var t=n.distancePlaneAndPoint(a,e);return t>0?sa.Front:t<0?sa.Back:sa.Intersecting},n.intersectsPlaneAndBox=function(a,e){var t=e.min,i=e.max,o=a.normal,s=n._tempVec30,l=n._tempVec31;return o.x>=0?(s.x=i.x,l.x=t.x):(s.x=t.x,l.x=i.x),o.y>=0?(s.y=i.y,l.y=t.y):(s.y=t.y,l.y=i.y),o.z>=0?(s.z=i.z,l.z=t.z):(s.z=t.z,l.z=i.z),n.distancePlaneAndPoint(a,s)<0?sa.Back:n.distancePlaneAndPoint(a,l)>0?sa.Front:sa.Intersecting},n.intersectsPlaneAndSphere=function(a,e){var t=e.center,i=e.radius,o=n.distancePlaneAndPoint(a,t);return o>i?sa.Front:o<-i?sa.Back:sa.Intersecting},n.intersectsRayAndPlane=function(a,e){var t=e.normal,i=ve.zeroTolerance,o=z.dot(t,a.direction);if(Math.abs(o)<i)return-1;var s=z.dot(t,a.origin),l=(-e.distance-s)/o;if(l<0){if(l<-i)return-1;l=0}return l},n.intersectsRayAndBox=function(a,e){var t=ve.zeroTolerance,i=a.origin,o=a.direction,s=e.min,l=e.max,u=o.x,c=o.y,f=o.z,d=i.x,h=i.y,_=i.z,p=0,v=Number.MAX_VALUE;if(Math.abs(u)<t){if(d<s.x||d>l.x)return-1}else{var y=1/u,m=(s.x-d)*y,g=(l.x-d)*y;if(m>g){var x=m;m=g,g=x}if(p=Math.max(m,p),v=Math.min(g,v),p>v)return-1}if(Math.abs(c)<t){if(h<s.y||h>l.y)return-1}else{var b=1/c,S=(s.y-h)*b,C=(l.y-h)*b;if(S>C){var E=S;S=C,C=E}if(p=Math.max(S,p),v=Math.min(C,v),p>v)return-1}if(Math.abs(f)<t){if(_<s.z||_>l.z)return-1}else{var T=1/f,M=(s.z-_)*T,L=(l.z-_)*T;if(M>L){var F=M;M=L,L=F}if(p=Math.max(M,p),v=Math.min(L,v),p>v)return-1}return p},n.intersectsRayAndSphere=function(a,e){var t=a.origin,i=a.direction,o=e.center,s=e.radius,l=n._tempVec30;z.subtract(t,o,l);var u=z.dot(l,i),c=z.dot(l,l)-s*s;if(u>0&&c>0)return-1;var f=u*u-c;if(f<0)return-1;var d=-u-Math.sqrt(f);return d<0&&(d=0),d},n.intersectsBoxAndBox=function(a,e){return a.min.x>e.max.x||e.min.x>a.max.x||a.min.y>e.max.y||e.min.y>a.max.y?!1:!(a.min.z>e.max.z||e.min.z>a.max.z)},n.intersectsSphereAndSphere=function(a,e){var t=a.radius+e.radius;return z.distanceSquared(a.center,e.center)<t*t},n.intersectsSphereAndBox=function(a,e){var t=a.center,i=e.max,o=e.min,s=n._tempVec30;s.set(Math.max(o.x,Math.min(t.x,i.x)),Math.max(o.y,Math.min(t.y,i.y)),Math.max(o.z,Math.min(t.z,i.z)));var l=z.distanceSquared(t,s);return l<=a.radius*a.radius},n.intersectsFrustumAndBox=function(a,e){for(var t=e.min,i=e.max,o=n._tempVec30,s=0;s<6;++s){var l=a.getPlane(s),u=l.normal;if(o.set(u.x>=0?i.x:t.x,u.y>=0?i.y:t.y,u.z>=0?i.z:t.z),z.dot(u,o)<-l.distance)return!1}return!0},n.frustumContainsPoint=function(a,e){var t=n.distancePlaneAndPoint(a.near,e);return Math.abs(t)<ve.zeroTolerance?Xn.Intersects:t<0?Xn.Disjoint:(t=n.distancePlaneAndPoint(a.far,e),Math.abs(t)<ve.zeroTolerance?Xn.Intersects:t<0?Xn.Disjoint:(t=n.distancePlaneAndPoint(a.left,e),Math.abs(t)<ve.zeroTolerance?Xn.Intersects:t<0?Xn.Disjoint:(t=n.distancePlaneAndPoint(a.right,e),Math.abs(t)<ve.zeroTolerance?Xn.Intersects:t<0?Xn.Disjoint:(t=n.distancePlaneAndPoint(a.top,e),Math.abs(t)<ve.zeroTolerance?Xn.Intersects:t<0?Xn.Disjoint:(t=n.distancePlaneAndPoint(a.bottom,e),Math.abs(t)<ve.zeroTolerance?Xn.Intersects:t<0?Xn.Disjoint:Xn.Contains)))))},n.frustumContainsBox=function(a,e){for(var t=e.min,i=e.max,o=n._tempVec30,s=n._tempVec31,l=Xn.Contains,u=0;u<6;++u){var c=a.getPlane(u),f=c.normal;if(f.x>=0?(o.x=i.x,s.x=t.x):(o.x=t.x,s.x=i.x),f.y>=0?(o.y=i.y,s.y=t.y):(o.y=t.y,s.y=i.y),f.z>=0?(o.z=i.z,s.z=t.z):(o.z=t.z,s.z=i.z),n.intersectsPlaneAndPoint(c,o)===sa.Back)return Xn.Disjoint;n.intersectsPlaneAndPoint(c,s)===sa.Back&&(l=Xn.Intersects)}return l},n.frustumContainsSphere=function(a,e){for(var t=Xn.Contains,i=0;i<6;++i){var o=a.getPlane(i),s=n.intersectsPlaneAndSphere(o,e);if(s===sa.Back)return Xn.Disjoint;if(s===sa.Intersecting){t=Xn.Intersects;break}}return t},n}();(function(){Wr._tempVec30=new z})();(function(){Wr._tempVec31=new z})();(function(){Wr._tempVec32=new z})();var wn=function(){function n(a,e){a===void 0&&(a=null),e===void 0&&(e=0),this.normal=new z,this.distance=0,a&&this.normal.copyFrom(a),this.distance=e}var r=n.prototype;return r.normalize=function(){return n.normalize(this,this),this},r.clone=function(){var e=new n;return e.copyFrom(this),e},r.copyFrom=function(e){return this.normal.copyFrom(e.normal),this.distance=e.distance,this},n.normalize=function(e,t){var i=e.normal,o=1/i.length();z.scale(i,o,t.normal),t.distance=e.distance*o},n.fromPoints=function(e,t,i,o){var s=e.x,l=e.y,u=e.z,c=t.x-s,f=t.y-l,d=t.z-u,h=i.x-s,_=i.y-l,p=i.z-u,v=f*p-d*_,y=d*h-c*p,m=c*_-f*h,g=1/Math.sqrt(v*v+y*y+m*m),x=v*g,b=y*g,S=m*g,C=o.normal;C.x=x,C.y=b,C.z=S,o.distance=-(x*s+b*l+S*u)},n}(),cP=function(){function n(a){a===void 0&&(a=null),this.near=new wn,this.far=new wn,this.left=new wn,this.right=new wn,this.top=new wn,this.bottom=new wn,a&&this.calculateFromMatrix(a)}var r=n.prototype;return r.getPlane=function(e){switch(e){case Ht.Near:return this.near;case Ht.Far:return this.far;case Ht.Left:return this.left;case Ht.Right:return this.right;case Ht.Bottom:return this.bottom;case Ht.Top:return this.top;default:return null}},r.calculateFromMatrix=function(e){var t=e.elements,i=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=t[6],d=t[7],h=t[8],_=t[9],p=t[10],v=t[11],y=t[12],m=t[13],g=t[14],x=t[15],b=this.near.normal;b.set(l+s,d+f,v+p),this.near.distance=x+g,this.near.normalize();var S=this.far.normal;S.set(l-s,d-f,v-p),this.far.distance=x-g,this.far.normalize();var C=this.left.normal;C.set(l+i,d+u,v+h),this.left.distance=x+y,this.left.normalize();var E=this.right.normal;E.set(l-i,d-u,v-h),this.right.distance=x-y,this.right.normalize();var T=this.bottom.normal;T.set(l+o,d+c,v+_),this.bottom.distance=x+m,this.bottom.normalize();var M=this.top.normal;M.set(l-o,d-c,v-_),this.top.distance=x-m,this.top.normalize()},r.intersectsBox=function(e){return Wr.intersectsFrustumAndBox(this,e)},r.intersectsSphere=function(e){return Wr.frustumContainsSphere(this,e)!==Xn.Disjoint},r.clone=function(){var e=new n;return e.copyFrom(this),e},r.copyFrom=function(e){return this.near.copyFrom(e.near),this.far.copyFrom(e.far),this.left.copyFrom(e.left),this.right.copyFrom(e.right),this.bottom.copyFrom(e.bottom),this.top.copyFrom(e.top),this},n}(),ic=function(){function n(a,e,t,i,o,s,l,u,c){a===void 0&&(a=1),e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),o===void 0&&(o=1),s===void 0&&(s=0),l===void 0&&(l=0),u===void 0&&(u=0),c===void 0&&(c=1),this.elements=new Float32Array(9);var f=this.elements;f[0]=a,f[1]=e,f[2]=t,f[3]=i,f[4]=o,f[5]=s,f[6]=l,f[7]=u,f[8]=c}var r=n.prototype;return r.set=function(e,t,i,o,s,l,u,c,f){var d=this.elements;return d[0]=e,d[1]=t,d[2]=i,d[3]=o,d[4]=s,d[5]=l,d[6]=u,d[7]=c,d[8]=f,this},r.add=function(e){return n.add(this,e,this),this},r.subtract=function(e){return n.subtract(this,e,this),this},r.multiply=function(e){return n.multiply(this,e,this),this},r.determinant=function(){var e=this.elements,t=e[0],i=e[1],o=e[2],s=e[3],l=e[4],u=e[5],c=e[6],f=e[7],d=e[8],h=d*l-u*f,_=-d*s+u*c,p=f*s-l*c;return t*h+i*_+o*p},r.identity=function(){var e=this.elements;return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,this},r.invert=function(){return n.invert(this,this),this},r.rotate=function(e){return n.rotate(this,e,this),this},r.scale=function(e){return n.scale(this,e,this),this},r.translate=function(e){return n.translate(this,e,this),this},r.transpose=function(){return n.transpose(this,this),this},r.clone=function(){var e=this.elements,t=new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]);return t},r.copyFrom=function(e){var t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this},r.copyFromArray=function(e,t){t===void 0&&(t=0);for(var i=this.elements,o=0;o<12;o++)i[o]=e[o+t];return this},r.copyToArray=function(e,t){t===void 0&&(t=0);var i=this.elements;e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8]},r.copyFromMatrix=function(e){var t=e.elements,i=this.elements;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[4],i[4]=t[5],i[5]=t[6],i[6]=t[8],i[7]=t[9],i[8]=t[10],this},n.add=function(e,t,i){var o=e.elements,s=t.elements,l=i.elements;l[0]=o[0]+s[0],l[1]=o[1]+s[1],l[2]=o[2]+s[2],l[3]=o[3]+s[3],l[4]=o[4]+s[4],l[5]=o[5]+s[5],l[6]=o[6]+s[6],l[7]=o[7]+s[7],l[8]=o[8]+s[8]},n.subtract=function(e,t,i){var o=e.elements,s=t.elements,l=i.elements;l[0]=o[0]-s[0],l[1]=o[1]-s[1],l[2]=o[2]-s[2],l[3]=o[3]-s[3],l[4]=o[4]-s[4],l[5]=o[5]-s[5],l[6]=o[6]-s[6],l[7]=o[7]-s[7],l[8]=o[8]-s[8]},n.multiply=function(e,t,i){var o=e.elements,s=t.elements,l=i.elements,u=o[0],c=o[1],f=o[2],d=o[3],h=o[4],_=o[5],p=o[6],v=o[7],y=o[8],m=s[0],g=s[1],x=s[2],b=s[3],S=s[4],C=s[5],E=s[6],T=s[7],M=s[8];l[0]=u*m+d*g+p*x,l[1]=c*m+h*g+v*x,l[2]=f*m+_*g+y*x,l[3]=u*b+d*S+p*C,l[4]=c*b+h*S+v*C,l[5]=f*b+_*S+y*C,l[6]=u*E+d*T+p*M,l[7]=c*E+h*T+v*M,l[8]=f*E+_*T+y*M},n.equals=function(e,t){var i=e.elements,o=t.elements;return ve.equals(i[0],o[0])&&ve.equals(i[1],o[1])&&ve.equals(i[2],o[2])&&ve.equals(i[3],o[3])&&ve.equals(i[4],o[4])&&ve.equals(i[5],o[5])&&ve.equals(i[6],o[6])&&ve.equals(i[7],o[7])&&ve.equals(i[8],o[8])},n.lerp=function(e,t,i,o){var s=e.elements,l=t.elements,u=o.elements,c=1-i;u[0]=s[0]*c+l[0]*i,u[1]=s[1]*c+l[1]*i,u[2]=s[2]*c+l[2]*i,u[3]=s[3]*c+l[3]*i,u[4]=s[4]*c+l[4]*i,u[5]=s[5]*c+l[5]*i,u[6]=s[6]*c+l[6]*i,u[7]=s[7]*c+l[7]*i,u[8]=s[8]*c+l[8]*i},n.rotationQuaternion=function(e,t){var i=t.elements,o=e._x,s=e._y,l=e._z,u=e._w,c=o+o,f=s+s,d=l+l,h=o*c,_=s*c,p=s*f,v=l*c,y=l*f,m=l*d,g=u*c,x=u*f,b=u*d;i[0]=1-p-m,i[3]=_-b,i[6]=v+x,i[1]=_+b,i[4]=1-h-m,i[7]=y-g,i[2]=v-x,i[5]=y+g,i[8]=1-h-p},n.scaling=function(e,t){var i=t.elements;i[0]=e._x,i[1]=0,i[2]=0,i[3]=0,i[4]=e._y,i[5]=0,i[6]=0,i[7]=0,i[8]=1},n.translation=function(a,e){var t=e.elements;t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=a._x,t[7]=a._y,t[8]=1},n.invert=function(e,t){var i=e.elements,o=t.elements,s=i[0],l=i[1],u=i[2],c=i[3],f=i[4],d=i[5],h=i[6],_=i[7],p=i[8],v=p*f-d*_,y=-p*c+d*h,m=_*c-f*h,g=s*v+l*y+u*m;!g||(g=1/g,o[0]=v*g,o[1]=(-p*l+u*_)*g,o[2]=(d*l-u*f)*g,o[3]=y*g,o[4]=(p*s-u*h)*g,o[5]=(-d*s+u*c)*g,o[6]=m*g,o[7]=(-_*s+l*h)*g,o[8]=(f*s-l*c)*g)},n.normalMatrix=function(e,t){var i=e.elements,o=t.elements,s=i[0],l=i[1],u=i[2],c=i[3],f=i[4],d=i[5],h=i[6],_=i[7],p=i[8],v=i[9],y=i[10],m=i[11],g=i[12],x=i[13],b=i[14],S=i[15],C=s*d-l*f,E=s*h-u*f,T=s*_-c*f,M=l*h-u*d,L=l*_-c*d,F=u*_-c*h,N=p*x-v*g,I=p*b-y*g,O=p*S-m*g,P=v*b-y*x,R=v*S-m*x,A=y*S-m*b,D=C*A-E*R+T*P+M*O-L*I+F*N;if(!D)return null;D=1/D,o[0]=(d*A-h*R+_*P)*D,o[1]=(h*O-f*A-_*I)*D,o[2]=(f*R-d*O+_*N)*D,o[3]=(u*R-l*A-c*P)*D,o[4]=(s*A-u*O+c*I)*D,o[5]=(l*O-s*R-c*N)*D,o[6]=(x*F-b*L+S*M)*D,o[7]=(b*T-g*F-S*E)*D,o[8]=(g*L-x*T+S*C)*D},n.rotate=function(e,t,i){var o=e.elements,s=i.elements,l=Math.sin(t),u=Math.cos(t),c=o[0],f=o[1],d=o[2],h=o[3],_=o[4],p=o[5],v=o[6],y=o[7],m=o[8];s[0]=u*c+l*h,s[1]=u*f+l*_,s[2]=u*d+l*p,s[3]=u*h-l*c,s[4]=u*_-l*f,s[5]=u*p-l*d,s[6]=v,s[7]=y,s[8]=m},n.scale=function(e,t,i){var o=t._x,s=t._y,l=e.elements,u=i.elements;u[0]=o*l[0],u[1]=o*l[1],u[2]=o*l[2],u[3]=s*l[3],u[4]=s*l[4],u[5]=s*l[5],u[6]=l[6],u[7]=l[7],u[8]=l[8]},n.translate=function(e,t,i){var o=t._x,s=t._y,l=e.elements,u=i.elements,c=l[0],f=l[1],d=l[2],h=l[3],_=l[4],p=l[5],v=l[6],y=l[7],m=l[8];u[0]=c,u[1]=f,u[2]=d,u[3]=h,u[4]=_,u[5]=p,u[6]=o*c+s*h+v,u[7]=o*f+s*_+y,u[8]=o*d+s*p+m},n.transpose=function(e,t){var i=e.elements,o=t.elements;if(t===e){var s=i[1],l=i[2],u=i[5];o[1]=i[3],o[2]=i[6],o[3]=s,o[5]=i[7],o[6]=l,o[7]=u}else o[0]=i[0],o[1]=i[3],o[2]=i[6],o[3]=i[1],o[4]=i[4],o[5]=i[7],o[6]=i[2],o[7]=i[5],o[8]=i[8]},n}(),Ut=function(){function n(a,e,t,i){a===void 0&&(a=0),e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=1),this._onValueChanged=null,this._x=a,this._y=e,this._z=t,this._w=i}var r=n.prototype;return r.set=function(e,t,i,o){return this._x=e,this._y=t,this._z=i,this._w=o,this._onValueChanged&&this._onValueChanged(),this},r.conjugate=function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onValueChanged&&this._onValueChanged(),this},r.getAxisAngle=function(e){var t=this,i=t._x,o=t._y,s=t._z,l=i*i+o*o+s*s;if(l<ve.zeroTolerance)return e._x=1,e._y=0,e._z=0,0;var u=1/l;return e._x=this._x*u,e._y=this._y*u,e._z=this._z*u,Math.acos(this._w)*2},r.identity=function(){return this._x=0,this._y=0,this._z=0,this._w=1,this._onValueChanged&&this._onValueChanged(),this},r.length=function(){var e=this,t=e._x,i=e._y,o=e._z,s=e._w;return Math.sqrt(t*t+i*i+o*o+s*s)},r.lengthSquared=function(){var e=this,t=e._x,i=e._y,o=e._z,s=e._w;return t*t+i*i+o*o+s*s},r.normalize=function(){return n.normalize(this,this),this},r.toEuler=function(e){this._toYawPitchRoll(e);var t=e._x;return e._x=e._y,e._y=t,e._onValueChanged&&e._onValueChanged(),e},r.toYawPitchRoll=function(e){return this._toYawPitchRoll(e),e._onValueChanged&&e._onValueChanged(),e},r.rotateX=function(e){return n.rotateX(this,e,this),this},r.rotateY=function(e){return n.rotateY(this,e,this),this},r.rotateZ=function(e){return n.rotateZ(this,e,this),this},r.rotationAxisAngle=function(e,t){return n.rotationAxisAngle(e,t,this),this},r.multiply=function(e){return n.multiply(this,e,this),this},r.invert=function(){return n.invert(this,this),this},r.dot=function(e){return n.dot(this,e)},r.lerp=function(e,t){return n.lerp(this,e,t,this),this},r.rotateAxisAngle=function(e,t){return n._tempQuat1.rotationAxisAngle(e,t),this.multiply(n._tempQuat1),this},r.clone=function(){return new n(this._x,this._y,this._z,this._w)},r.copyFrom=function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onValueChanged&&this._onValueChanged(),this},r.copyFromArray=function(e,t){return t===void 0&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onValueChanged&&this._onValueChanged(),this},r.copyToArray=function(e,t){t===void 0&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w},r.toJSON=function(){return{x:this._x,y:this._y,z:this._z,w:this._w}},r._toYawPitchRoll=function(e){var t=this,i=t._x,o=t._y,s=t._z,l=t._w,u=i*i,c=o*o,f=s*s,d=l*l,h=u+c+f+d,_=2*(i*l-o*s);_>(1-ve.zeroTolerance)*h?(e._x=Math.atan2(2*(l*o-i*s),f+d-c-f),e._y=Math.PI/2,e._z=0):_<-(1-ve.zeroTolerance)*h?(e._x=Math.atan2(2*(l*o-i*s),f+d-c-f),e._y=-Math.PI/2,e._z=0):(e._x=Math.atan2(2*(s*i+o*l),f+d-c-u),e._y=Math.asin(_/h),e._z=Math.atan2(2*(i*o+s*l),c+d-f-u))},n.add=function(e,t,i){i._x=e._x+t._x,i._y=e._y+t._y,i._z=e._z+t._z,i._w=e._w+t._w,i._onValueChanged&&i._onValueChanged()},n.multiply=function(e,t,i){var o=e._x,s=e._y,l=e._z,u=e._w,c=t._x,f=t._y,d=t._z,h=t._w;i._x=o*h+u*c+s*d-l*f,i._y=s*h+u*f+l*c-o*d,i._z=l*h+u*d+o*f-s*c,i._w=u*h-o*c-s*f-l*d,i._onValueChanged&&i._onValueChanged()},n.conjugate=function(e,t){t._x=-e._x,t._y=-e._y,t._z=-e._z,t._w=e._w,t._onValueChanged&&t._onValueChanged()},n.dot=function(e,t){return e._x*t._x+e._y*t._y+e._z*t._z+e._w*t._w},n.equals=function(e,t){return ve.equals(e._x,t._x)&&ve.equals(e._y,t._y)&&ve.equals(e._z,t._z)&&ve.equals(e._w,t._w)},n.rotationAxisAngle=function(e,t,i){var o=n._tempVector3;z.normalize(e,o),t*=.5;var s=Math.sin(t);i._x=o._x*s,i._y=o._y*s,i._z=o._z*s,i._w=Math.cos(t),i._onValueChanged&&i._onValueChanged()},n.rotationEuler=function(e,t,i,o){n.rotationYawPitchRoll(t,e,i,o)},n.rotationYawPitchRoll=function(e,t,i,o){var s=i*.5,l=t*.5,u=e*.5,c=Math.sin(s),f=Math.cos(s),d=Math.sin(l),h=Math.cos(l),_=Math.sin(u),p=Math.cos(u),v=p*h,y=_*d;o._x=p*d*f+_*h*c,o._y=_*h*f-p*d*c,o._z=v*c-y*f,o._w=v*f+y*c,o._onValueChanged&&o._onValueChanged()},n.rotationMatrix3x3=function(e,t){var i=e.elements,o=i[0],s=i[1],l=i[2],u=i[3],c=i[4],f=i[5],d=i[6],h=i[7],_=i[8],p=o+c+_,v,y;p>0?(v=Math.sqrt(p+1),t._w=v*.5,v=.5/v,t._x=(f-h)*v,t._y=(d-l)*v,t._z=(s-u)*v):o>=c&&o>=_?(v=Math.sqrt(1+o-c-_),y=.5/v,t._x=.5*v,t._y=(s+u)*y,t._z=(l+d)*y,t._w=(f-h)*y):c>_?(v=Math.sqrt(1+c-o-_),y=.5/v,t._x=(u+s)*y,t._y=.5*v,t._z=(h+f)*y,t._w=(d-l)*y):(v=Math.sqrt(1+_-o-c),y=.5/v,t._x=(l+d)*y,t._y=(f+h)*y,t._z=.5*v,t._w=(s-u)*y),t._onValueChanged&&t._onValueChanged()},n.invert=function(e,t){var i=e._x,o=e._y,s=e._z,l=e._w,u=i*i+o*o+s*s+l*l;if(u>ve.zeroTolerance){var c=1/u;t._x=-i*c,t._y=-o*c,t._z=-s*c,t._w=l*c,t._onValueChanged&&t._onValueChanged()}},n.lerp=function(e,t,i,o){var s=1-i;n.dot(e,t)>=0?(o._x=e._x*s+t._x*i,o._y=e._y*s+t._y*i,o._z=e._z*s+t._z*i,o._w=e._w*s+t._w*i):(o._x=e._x*s-t._x*i,o._y=e._y*s-t._y*i,o._z=e._z*s-t._z*i,o._w=e._w*s-t._w*i),o.normalize()},n.slerp=function(e,t,i,o){var s,l,u=n.dot(e,t);if(Math.abs(u)>1-ve.zeroTolerance)l=1-i,s=i*Math.sign(u);else{var c=Math.acos(Math.abs(u)),f=1/Math.sin(c);l=Math.sin((1-i)*c)*f,s=Math.sin(i*c)*f*Math.sign(u)}o.x=l*e.x+s*t.x,o.y=l*e.y+s*t.y,o.z=l*e.z+s*t.z,o.w=l*e.w+s*t.w,o._onValueChanged&&o._onValueChanged()},n.normalize=function(e,t){var i=e._x,o=e._y,s=e._z,l=e._w,u=Math.sqrt(i*i+o*o+s*s+l*l);u>ve.zeroTolerance&&(u=1/u,t._x=i*u,t._y=o*u,t._z=s*u,t._w=l*u,t._onValueChanged&&t._onValueChanged())},n.rotationX=function(e,t){e*=.5;var i=Math.sin(e),o=Math.cos(e);t._x=i,t._y=0,t._z=0,t._w=o,t._onValueChanged&&t._onValueChanged()},n.rotationY=function(e,t){e*=.5;var i=Math.sin(e),o=Math.cos(e);t._x=0,t._y=i,t._z=0,t._w=o,t._onValueChanged&&t._onValueChanged()},n.rotationZ=function(e,t){e*=.5;var i=Math.sin(e),o=Math.cos(e);t._x=0,t._y=0,t._z=i,t._w=o,t._onValueChanged&&t._onValueChanged()},n.rotateX=function(e,t,i){var o=e._x,s=e._y,l=e._z,u=e._w;t*=.5;var c=Math.sin(t),f=Math.cos(t);i._x=o*f+u*c,i._y=s*f+l*c,i._z=l*f-s*c,i._w=u*f-o*c,i._onValueChanged&&i._onValueChanged()},n.rotateY=function(e,t,i){var o=e._x,s=e._y,l=e._z,u=e._w;t*=.5;var c=Math.sin(t),f=Math.cos(t);i._x=o*f-l*c,i._y=s*f+u*c,i._z=l*f+o*c,i._w=u*f-s*c,i._onValueChanged&&i._onValueChanged()},n.rotateZ=function(e,t,i){var o=e._x,s=e._y,l=e._z,u=e._w;t*=.5;var c=Math.sin(t),f=Math.cos(t);i._x=o*f+s*c,i._y=s*f-o*c,i._z=l*f+u*c,i._w=u*f-l*c,i._onValueChanged&&i._onValueChanged()},n.scale=function(e,t,i){i._x=e._x*t,i._y=e._y*t,i._z=e._z*t,i._w=e._w*t,i._onValueChanged&&i._onValueChanged()},Ic(n,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onValueChanged&&this._onValueChanged()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onValueChanged&&this._onValueChanged()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onValueChanged&&this._onValueChanged()}},{key:"normalized",get:function(){return Math.abs(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w-1)<ve.zeroTolerance}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onValueChanged&&this._onValueChanged()}}]),n}();(function(){Ut._tempVector3=new z})();(function(){Ut._tempQuat1=new Ut})();var Ge=function(){function n(a,e,t,i,o,s,l,u,c,f,d,h,_,p,v,y){a===void 0&&(a=1),e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=1),l===void 0&&(l=0),u===void 0&&(u=0),c===void 0&&(c=0),f===void 0&&(f=0),d===void 0&&(d=1),h===void 0&&(h=0),_===void 0&&(_=0),p===void 0&&(p=0),v===void 0&&(v=0),y===void 0&&(y=1),this.elements=new Float32Array(16);var m=this.elements;m[0]=a,m[1]=e,m[2]=t,m[3]=i,m[4]=o,m[5]=s,m[6]=l,m[7]=u,m[8]=c,m[9]=f,m[10]=d,m[11]=h,m[12]=_,m[13]=p,m[14]=v,m[15]=y}var r=n.prototype;return r.set=function(e,t,i,o,s,l,u,c,f,d,h,_,p,v,y,m){var g=this.elements;return g[0]=e,g[1]=t,g[2]=i,g[3]=o,g[4]=s,g[5]=l,g[6]=u,g[7]=c,g[8]=f,g[9]=d,g[10]=h,g[11]=_,g[12]=p,g[13]=v,g[14]=y,g[15]=m,this},r.multiply=function(e){return n.multiply(this,e,this),this},r.determinant=function(){var e=this.elements,t=e[0],i=e[1],o=e[2],s=e[3],l=e[4],u=e[5],c=e[6],f=e[7],d=e[8],h=e[9],_=e[10],p=e[11],v=e[12],y=e[13],m=e[14],g=e[15],x=t*u-i*l,b=t*c-o*l,S=t*f-s*l,C=i*c-o*u,E=i*f-s*u,T=o*f-s*c,M=d*y-h*v,L=d*m-_*v,F=d*g-p*v,N=h*m-_*y,I=h*g-p*y,O=_*g-p*m;return x*O-b*I+S*N+C*F-E*L+T*M},r.decompose=function(e,t,i){var o=n._tempMat30,s=this.elements,l=o.elements,u=s[0],c=s[1],f=s[2],d=s[4],h=s[5],_=s[6],p=s[8],v=s[9],y=s[10];e.set(s[12],s[13],s[14]);var m=Math.sqrt(u*u+c*c+f*f),g=Math.sqrt(d*d+h*h+_*_),x=Math.sqrt(p*p+v*v+y*y);if(this.determinant()<0&&(m=-m),i.set(m,g,x),Math.abs(m)<ve.zeroTolerance||Math.abs(g)<ve.zeroTolerance||Math.abs(x)<ve.zeroTolerance)return t.identity(),!1;var b=1/m,S=1/g,C=1/x;return l[0]=u*b,l[1]=c*b,l[2]=f*b,l[3]=d*S,l[4]=h*S,l[5]=_*S,l[6]=p*C,l[7]=v*C,l[8]=y*C,Ut.rotationMatrix3x3(o,t),!0},r.getRotation=function(e){var t=this.elements,i=t[0]+t[5]+t[10];if(i>ve.zeroTolerance){var o=Math.sqrt(i+1)*2;e._w=.25*o,e._x=(t[6]-t[9])/o,e._y=(t[8]-t[2])/o,e._z=(t[1]-t[4])/o}else if(t[0]>t[5]&&t[0]>t[10]){var s=Math.sqrt(1+t[0]-t[5]-t[10])*2;e._w=(t[6]-t[9])/s,e._x=.25*s,e._y=(t[1]+t[4])/s,e._z=(t[8]+t[2])/s}else if(t[5]>t[10]){var l=Math.sqrt(1+t[5]-t[0]-t[10])*2;e._w=(t[8]-t[2])/l,e._x=(t[1]+t[4])/l,e._y=.25*l,e._z=(t[6]+t[9])/l}else{var u=Math.sqrt(1+t[10]-t[0]-t[5])*2;e._w=(t[1]-t[4])/u,e._x=(t[8]+t[2])/u,e._y=(t[6]+t[9])/u,e._z=.25*u}return e._onValueChanged&&e._onValueChanged(),e},r.getScaling=function(e){var t=this.elements,i=t[0],o=t[1],s=t[2],l=t[4],u=t[5],c=t[6],f=t[8],d=t[9],h=t[10];return e.set(Math.sqrt(i*i+o*o+s*s),Math.sqrt(l*l+u*u+c*c),Math.sqrt(f*f+d*d+h*h)),e},r.getTranslation=function(e){var t=this.elements;return e.set(t[12],t[13],t[14]),e},r.identity=function(){var e=this.elements;return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},r.invert=function(){return n.invert(this,this),this},r.rotateAxisAngle=function(e,t){return n.rotateAxisAngle(this,e,t,this),this},r.scale=function(e){return n.scale(this,e,this),this},r.translate=function(e){return n.translate(this,e,this),this},r.transpose=function(){return n.transpose(this,this),this},r.clone=function(){var e=this.elements,t=new n(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]);return t},r.copyFrom=function(e){var t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this},r.copyFromArray=function(e,t){t===void 0&&(t=0);for(var i=this.elements,o=0;o<16;o++)i[o]=e[o+t];return this},r.copyToArray=function(e,t){t===void 0&&(t=0);var i=this.elements;e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15]},n.multiply=function(e,t,i){var o=e.elements,s=t.elements,l=i.elements,u=o[0],c=o[1],f=o[2],d=o[3],h=o[4],_=o[5],p=o[6],v=o[7],y=o[8],m=o[9],g=o[10],x=o[11],b=o[12],S=o[13],C=o[14],E=o[15],T=s[0],M=s[1],L=s[2],F=s[3],N=s[4],I=s[5],O=s[6],P=s[7],R=s[8],A=s[9],D=s[10],B=s[11],k=s[12],V=s[13],U=s[14],j=s[15];l[0]=u*T+h*M+y*L+b*F,l[1]=c*T+_*M+m*L+S*F,l[2]=f*T+p*M+g*L+C*F,l[3]=d*T+v*M+x*L+E*F,l[4]=u*N+h*I+y*O+b*P,l[5]=c*N+_*I+m*O+S*P,l[6]=f*N+p*I+g*O+C*P,l[7]=d*N+v*I+x*O+E*P,l[8]=u*R+h*A+y*D+b*B,l[9]=c*R+_*A+m*D+S*B,l[10]=f*R+p*A+g*D+C*B,l[11]=d*R+v*A+x*D+E*B,l[12]=u*k+h*V+y*U+b*j,l[13]=c*k+_*V+m*U+S*j,l[14]=f*k+p*V+g*U+C*j,l[15]=d*k+v*V+x*U+E*j},n.equals=function(e,t){var i=e.elements,o=t.elements;return ve.equals(i[0],o[0])&&ve.equals(i[1],o[1])&&ve.equals(i[2],o[2])&&ve.equals(i[3],o[3])&&ve.equals(i[4],o[4])&&ve.equals(i[5],o[5])&&ve.equals(i[6],o[6])&&ve.equals(i[7],o[7])&&ve.equals(i[8],o[8])&&ve.equals(i[9],o[9])&&ve.equals(i[10],o[10])&&ve.equals(i[11],o[11])&&ve.equals(i[12],o[12])&&ve.equals(i[13],o[13])&&ve.equals(i[14],o[14])&&ve.equals(i[15],o[15])},n.lerp=function(e,t,i,o){var s=e.elements,l=t.elements,u=o.elements,c=1-i;u[0]=s[0]*c+l[0]*i,u[1]=s[1]*c+l[1]*i,u[2]=s[2]*c+l[2]*i,u[3]=s[3]*c+l[3]*i,u[4]=s[4]*c+l[4]*i,u[5]=s[5]*c+l[5]*i,u[6]=s[6]*c+l[6]*i,u[7]=s[7]*c+l[7]*i,u[8]=s[8]*c+l[8]*i,u[9]=s[9]*c+l[9]*i,u[10]=s[10]*c+l[10]*i,u[11]=s[11]*c+l[11]*i,u[12]=s[12]*c+l[12]*i,u[13]=s[13]*c+l[13]*i,u[14]=s[14]*c+l[14]*i,u[15]=s[15]*c+l[15]*i},n.add=function(e,t,i){var o=e.elements,s=t.elements,l=i.elements;l[0]=o[0]+s[0],l[1]=o[1]+s[1],l[2]=o[2]+s[2],l[3]=o[3]+s[3],l[4]=o[4]+s[4],l[5]=o[5]+s[5],l[6]=o[6]+s[6],l[7]=o[7]+s[7],l[8]=o[8]+s[8],l[9]=o[9]+s[9],l[10]=o[10]+s[10],l[11]=o[11]+s[11],l[12]=o[12]+s[12],l[13]=o[13]+s[13],l[14]=o[14]+s[14],l[15]=o[15]+s[15]},n.multiplyScalar=function(e,t,i){var o=e.elements,s=i.elements;s[0]=o[0]*t,s[1]=o[1]*t,s[2]=o[2]*t,s[3]=o[3]*t,s[4]=o[4]*t,s[5]=o[5]*t,s[6]=o[6]*t,s[7]=o[7]*t,s[8]=o[8]*t,s[9]=o[9]*t,s[10]=o[10]*t,s[11]=o[11]*t,s[12]=o[12]*t,s[13]=o[13]*t,s[14]=o[14]*t,s[15]=o[15]*t},n.rotationQuaternion=function(e,t){var i=t.elements,o=e._x,s=e._y,l=e._z,u=e._w,c=o+o,f=s+s,d=l+l,h=o*c,_=s*c,p=s*f,v=l*c,y=l*f,m=l*d,g=u*c,x=u*f,b=u*d;i[0]=1-p-m,i[1]=_+b,i[2]=v-x,i[3]=0,i[4]=_-b,i[5]=1-h-m,i[6]=y+g,i[7]=0,i[8]=v+x,i[9]=y-g,i[10]=1-h-p,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1},n.rotationAxisAngle=function(e,t,i){var o=i.elements,s=e._x,l=e._y,u=e._z,c=Math.sqrt(s*s+l*l+u*u),f,d,h;Math.abs(c)<ve.zeroTolerance||(c=1/c,s*=c,l*=c,u*=c,f=Math.sin(t),d=Math.cos(t),h=1-d,o[0]=s*s*h+d,o[1]=l*s*h+u*f,o[2]=u*s*h-l*f,o[3]=0,o[4]=s*l*h-u*f,o[5]=l*l*h+d,o[6]=u*l*h+s*f,o[7]=0,o[8]=s*u*h+l*f,o[9]=l*u*h-s*f,o[10]=u*u*h+d,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1)},n.rotationTranslation=function(e,t,i){n.rotationQuaternion(e,i);var o=i.elements;o[12]=t._x,o[13]=t._y,o[14]=t._z},n.affineTransformation=function(e,t,i,o){var s=o.elements,l=t._x,u=t._y,c=t._z,f=t._w,d=l+l,h=u+u,_=c+c,p=l*d,v=l*h,y=l*_,m=u*h,g=u*_,x=c*_,b=f*d,S=f*h,C=f*_,E=e._x,T=e._y,M=e._z;s[0]=(1-(m+x))*E,s[1]=(v+C)*E,s[2]=(y-S)*E,s[3]=0,s[4]=(v-C)*T,s[5]=(1-(p+x))*T,s[6]=(g+b)*T,s[7]=0,s[8]=(y+S)*M,s[9]=(g-b)*M,s[10]=(1-(p+m))*M,s[11]=0,s[12]=i._x,s[13]=i._y,s[14]=i._z,s[15]=1},n.scaling=function(e,t){var i=t.elements;i[0]=e._x,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=e._y,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=e._z,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1},n.translation=function(a,e){var t=e.elements;t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a._x,t[13]=a._y,t[14]=a._z,t[15]=1},n.invert=function(e,t){var i=e.elements,o=t.elements,s=i[0],l=i[1],u=i[2],c=i[3],f=i[4],d=i[5],h=i[6],_=i[7],p=i[8],v=i[9],y=i[10],m=i[11],g=i[12],x=i[13],b=i[14],S=i[15],C=s*d-l*f,E=s*h-u*f,T=s*_-c*f,M=l*h-u*d,L=l*_-c*d,F=u*_-c*h,N=p*x-v*g,I=p*b-y*g,O=p*S-m*g,P=v*b-y*x,R=v*S-m*x,A=y*S-m*b,D=C*A-E*R+T*P+M*O-L*I+F*N;if(!D)return null;D=1/D,o[0]=(d*A-h*R+_*P)*D,o[1]=(u*R-l*A-c*P)*D,o[2]=(x*F-b*L+S*M)*D,o[3]=(y*L-v*F-m*M)*D,o[4]=(h*O-f*A-_*I)*D,o[5]=(s*A-u*O+c*I)*D,o[6]=(b*T-g*F-S*E)*D,o[7]=(p*F-y*T+m*E)*D,o[8]=(f*R-d*O+_*N)*D,o[9]=(l*O-s*R-c*N)*D,o[10]=(g*L-x*T+S*C)*D,o[11]=(v*T-p*L-m*C)*D,o[12]=(d*I-f*P-h*N)*D,o[13]=(s*P-l*I+u*N)*D,o[14]=(x*E-g*M-b*C)*D,o[15]=(p*M-v*E+y*C)*D},n.lookAt=function(e,t,i,o){var s=o.elements,l=n._tempVec30,u=n._tempVec31,c=n._tempVec32;z.subtract(e,t,c),c.normalize(),z.cross(i,c,l),l.normalize(),z.cross(c,l,u),s[0]=l._x,s[1]=u._x,s[2]=c._x,s[3]=0,s[4]=l._y,s[5]=u._y,s[6]=c._y,s[7]=0,s[8]=l._z,s[9]=u._z,s[10]=c._z,s[11]=0,s[12]=-z.dot(l,e),s[13]=-z.dot(u,e),s[14]=-z.dot(c,e),s[15]=1},n.ortho=function(e,t,i,o,s,l,u){var c=u.elements,f=1/(e-t),d=1/(i-o),h=1/(s-l);c[0]=-2*f,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*d,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*h,c[11]=0,c[12]=(e+t)*f,c[13]=(o+i)*d,c[14]=(l+s)*h,c[15]=1},n.perspective=function(e,t,i,o,s){var l=s.elements,u=1/Math.tan(e/2),c=1/(i-o);l[0]=u/t,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=u,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=(o+i)*c,l[11]=-1,l[12]=0,l[13]=0,l[14]=2*o*i*c,l[15]=0},n.rotateAxisAngle=function(e,t,i,o){var s=t._x,l=t._y,u=t._z,c=Math.sqrt(s*s+l*l+u*u);if(!(Math.abs(c)<ve.zeroTolerance)){var f=e.elements,d=o.elements,h,_,p;c=1/c,s*=c,l*=c,u*=c,h=Math.sin(i),_=Math.cos(i),p=1-_;var v=f[0],y=f[1],m=f[2],g=f[3],x=f[4],b=f[5],S=f[6],C=f[7],E=f[8],T=f[9],M=f[10],L=f[11],F=s*s*p+_,N=l*s*p+u*h,I=u*s*p-l*h,O=s*l*p-u*h,P=l*l*p+_,R=u*l*p+s*h,A=s*u*p+l*h,D=l*u*p-s*h,B=u*u*p+_;d[0]=v*F+x*N+E*I,d[1]=y*F+b*N+T*I,d[2]=m*F+S*N+M*I,d[3]=g*F+C*N+L*I,d[4]=v*O+x*P+E*R,d[5]=y*O+b*P+T*R,d[6]=m*O+S*P+M*R,d[7]=g*O+C*P+L*R,d[8]=v*A+x*D+E*B,d[9]=y*A+b*D+T*B,d[10]=m*A+S*D+M*B,d[11]=g*A+C*D+L*B,e!==o&&(d[12]=f[12],d[13]=f[13],d[14]=f[14],d[15]=f[15])}},n.scale=function(e,t,i){var o=e.elements,s=i.elements,l=t._x,u=t._y,c=t._z;s[0]=o[0]*l,s[1]=o[1]*l,s[2]=o[2]*l,s[3]=o[3]*l,s[4]=o[4]*u,s[5]=o[5]*u,s[6]=o[6]*u,s[7]=o[7]*u,s[8]=o[8]*c,s[9]=o[9]*c,s[10]=o[10]*c,s[11]=o[11]*c,s[12]=o[12],s[13]=o[13],s[14]=o[14],s[15]=o[15]},n.translate=function(e,t,i){var o=e.elements,s=i.elements,l=t._x,u=t._y,c=t._z;if(e===i)s[12]=o[0]*l+o[4]*u+o[8]*c+o[12],s[13]=o[1]*l+o[5]*u+o[9]*c+o[13],s[14]=o[2]*l+o[6]*u+o[10]*c+o[14],s[15]=o[3]*l+o[7]*u+o[11]*c+o[15];else{var f=o[0],d=o[1],h=o[2],_=o[3],p=o[4],v=o[5],y=o[6],m=o[7],g=o[8],x=o[9],b=o[10],S=o[11];s[0]=f,s[1]=d,s[2]=h,s[3]=_,s[4]=p,s[5]=v,s[6]=y,s[7]=m,s[8]=g,s[9]=x,s[10]=b,s[11]=S,s[12]=f*l+p*u+g*c+o[12],s[13]=d*l+v*u+x*c+o[13],s[14]=h*l+y*u+b*c+o[14],s[15]=_*l+m*u+S*c+o[15]}},n.transpose=function(e,t){var i=e.elements,o=t.elements;if(t===e){var s=i[1],l=i[2],u=i[3],c=i[6],f=i[7],d=i[11];o[1]=i[4],o[2]=i[8],o[3]=i[12],o[4]=s,o[6]=i[9],o[7]=i[13],o[8]=l,o[9]=c,o[11]=i[14],o[12]=u,o[13]=f,o[14]=d}else o[0]=i[0],o[1]=i[4],o[2]=i[8],o[3]=i[12],o[4]=i[1],o[5]=i[5],o[6]=i[9],o[7]=i[13],o[8]=i[2],o[9]=i[6],o[10]=i[10],o[11]=i[14],o[12]=i[3],o[13]=i[7],o[14]=i[11],o[15]=i[15]},n}();(function(){Ge._tempVec30=new z})();(function(){Ge._tempVec31=new z})();(function(){Ge._tempVec32=new z})();(function(){Ge._tempMat30=new ic})();(function(){Ge._identity=new Ge(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)})();var yz=function(){function n(a,e){a===void 0&&(a=null),e===void 0&&(e=null),this.origin=new z,this.direction=new z,a&&this.origin.copyFrom(a),e&&this.direction.copyFrom(e)}var r=n.prototype;return r.intersectPlane=function(e){return Wr.intersectsRayAndPlane(this,e)},r.intersectSphere=function(e){return Wr.intersectsRayAndSphere(this,e)},r.intersectBox=function(e){return Wr.intersectsRayAndBox(this,e)},r.getPoint=function(e,t){return z.scale(this.direction,e,t),t.add(this.origin)},n}(),Ze=function(){function n(a,e){a===void 0&&(a=0),e===void 0&&(e=0),this._onValueChanged=null,this._x=a,this._y=e}var r=n.prototype;return r.set=function(e,t){return this._x=e,this._y=t,this._onValueChanged&&this._onValueChanged(),this},r.add=function(e){return this._x+=e._x,this._y+=e._y,this._onValueChanged&&this._onValueChanged(),this},r.subtract=function(e){return this._x-=e._x,this._y-=e._y,this._onValueChanged&&this._onValueChanged(),this},r.multiply=function(e){return this._x*=e._x,this._y*=e._y,this._onValueChanged&&this._onValueChanged(),this},r.divide=function(e){return this._x/=e._x,this._y/=e._y,this._onValueChanged&&this._onValueChanged(),this},r.length=function(){var e=this,t=e._x,i=e._y;return Math.sqrt(t*t+i*i)},r.lengthSquared=function(){var e=this,t=e._x,i=e._y;return t*t+i*i},r.negate=function(){return this._x=-this._x,this._y=-this._y,this._onValueChanged&&this._onValueChanged(),this},r.normalize=function(){return n.normalize(this,this),this},r.scale=function(e){return this._x*=e,this._y*=e,this._onValueChanged&&this._onValueChanged(),this},r.clone=function(){return new n(this._x,this._y)},r.copyFrom=function(e){return this._x=e.x,this._y=e.y,this._onValueChanged&&this._onValueChanged(),this},r.copyFromArray=function(e,t){return t===void 0&&(t=0),this._x=e[t],this._y=e[t+1],this._onValueChanged&&this._onValueChanged(),this},r.copyToArray=function(e,t){t===void 0&&(t=0),e[t]=this._x,e[t+1]=this._y},r.toJSON=function(){return{x:this._x,y:this._y}},n.add=function(e,t,i){i._x=e._x+t._x,i._y=e._y+t._y,i._onValueChanged&&i._onValueChanged()},n.subtract=function(e,t,i){i._x=e._x-t._x,i._y=e._y-t._y,i._onValueChanged&&i._onValueChanged()},n.multiply=function(e,t,i){i._x=e._x*t._x,i._y=e._y*t._y,i._onValueChanged&&i._onValueChanged()},n.divide=function(e,t,i){i._x=e._x/t._x,i._y=e._y/t._y,i._onValueChanged&&i._onValueChanged()},n.dot=function(e,t){return e._x*t._x+e._y*t._y},n.distance=function(e,t){var i=t._x-e._x,o=t._y-e._y;return Math.sqrt(i*i+o*o)},n.distanceSquared=function(e,t){var i=t._x-e._x,o=t._y-e._y;return i*i+o*o},n.equals=function(e,t){return ve.equals(e._x,t._x)&&ve.equals(e._y,t._y)},n.lerp=function(e,t,i,o){var s=e._x,l=e._y;o._x=s+(t._x-s)*i,o._y=l+(t._y-l)*i,o._onValueChanged&&o._onValueChanged()},n.max=function(e,t,i){i._x=Math.max(e._x,t._x),i._y=Math.max(e._y,t._y),i._onValueChanged&&i._onValueChanged()},n.min=function(e,t,i){i._x=Math.min(e._x,t._x),i._y=Math.min(e._y,t._y),i._onValueChanged&&i._onValueChanged()},n.negate=function(e,t){t._x=-e._x,t._y=-e._y,t._onValueChanged&&t._onValueChanged()},n.normalize=function(e,t){var i=e._x,o=e._y,s=Math.sqrt(i*i+o*o);s>ve.zeroTolerance&&(s=1/s,t._x=i*s,t._y=o*s,t._onValueChanged&&t._onValueChanged())},n.scale=function(e,t,i){i._x=e._x*t,i._y=e._y*t,i._onValueChanged&&i._onValueChanged()},Ic(n,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onValueChanged&&this._onValueChanged()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onValueChanged&&this._onValueChanged()}}]),n}();(function(){Ze._zero=new Ze(0,0)})();(function(){Ze._one=new Ze(1,1)})();var pt=function(){function n(a,e,t,i){a===void 0&&(a=0),e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),this._onValueChanged=null,this._x=a,this._y=e,this._z=t,this._w=i}var r=n.prototype;return r.set=function(e,t,i,o){return this._x=e,this._y=t,this._z=i,this._w=o,this._onValueChanged&&this._onValueChanged(),this},r.add=function(e){return this._x+=e._x,this._y+=e._y,this._z+=e._z,this._w+=e._w,this._onValueChanged&&this._onValueChanged(),this},r.subtract=function(e){return this._x-=e._x,this._y-=e._y,this._z-=e._z,this._w-=e._w,this._onValueChanged&&this._onValueChanged(),this},r.multiply=function(e){return this._x*=e._x,this._y*=e._y,this._z*=e._z,this._w*=e._w,this._onValueChanged&&this._onValueChanged(),this},r.divide=function(e){return this._x/=e._x,this._y/=e._y,this._z/=e._z,this._w/=e._w,this._onValueChanged&&this._onValueChanged(),this},r.length=function(){var e=this,t=e._x,i=e._y,o=e._z,s=e._w;return Math.sqrt(t*t+i*i+o*o+s*s)},r.lengthSquared=function(){var e=this,t=e._x,i=e._y,o=e._z,s=e._w;return t*t+i*i+o*o+s*s},r.negate=function(){return this._x=-this._x,this._y=-this._y,this._z=-this._z,this._w=-this._w,this._onValueChanged&&this._onValueChanged(),this},r.normalize=function(){return n.normalize(this,this),this},r.scale=function(e){return this._x*=e,this._y*=e,this._z*=e,this._w*=e,this._onValueChanged&&this._onValueChanged(),this},r.clone=function(){var e=new n(this._x,this._y,this._z,this._w);return e},r.copyFrom=function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onValueChanged&&this._onValueChanged(),this},r.copyFromArray=function(e,t){return t===void 0&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onValueChanged&&this._onValueChanged(),this},r.copyToArray=function(e,t){t===void 0&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w},r.toJSON=function(){return{x:this._x,y:this._y,z:this._z,w:this._w}},n.add=function(e,t,i){i._x=e._x+t._x,i._y=e._y+t._y,i._z=e._z+t._z,i._w=e._w+t._w,i._onValueChanged&&i._onValueChanged()},n.subtract=function(e,t,i){i._x=e._x-t._x,i._y=e._y-t._y,i._z=e._z-t._z,i._w=e._w-t._w,i._onValueChanged&&i._onValueChanged()},n.multiply=function(e,t,i){i._x=e._x*t._x,i._y=e._y*t._y,i._z=e._z*t._z,i._w=e._w*t._w,i._onValueChanged&&i._onValueChanged()},n.divide=function(e,t,i){i._x=e._x/t._x,i._y=e._y/t._y,i._z=e._z/t._z,i._w=e._w/t._w,i._onValueChanged&&i._onValueChanged()},n.dot=function(e,t){return e._x*t._x+e._y*t._y+e._z*t._z+e._w*t._w},n.distance=function(e,t){var i=t._x-e._x,o=t._y-e._y,s=t._z-e._z,l=t._w-e._w;return Math.sqrt(i*i+o*o+s*s+l*l)},n.distanceSquared=function(e,t){var i=t._x-e._x,o=t._y-e._y,s=t._z-e._z,l=t._w-e._w;return i*i+o*o+s*s+l*l},n.equals=function(e,t){return ve.equals(e._x,t._x)&&ve.equals(e._y,t._y)&&ve.equals(e._z,t._z)&&ve.equals(e._w,t._w)},n.lerp=function(e,t,i,o){var s=e._x,l=e._y,u=e._z,c=e._w;o._x=s+(t._x-s)*i,o._y=l+(t._y-l)*i,o._z=u+(t._z-u)*i,o._w=c+(t._w-c)*i,o._onValueChanged&&o._onValueChanged()},n.max=function(e,t,i){i._x=Math.max(e._x,t._x),i._y=Math.max(e._y,t._y),i._z=Math.max(e._z,t._z),i._w=Math.max(e._w,t._w),i._onValueChanged&&i._onValueChanged()},n.min=function(e,t,i){i._x=Math.min(e._x,t._x),i._y=Math.min(e._y,t._y),i._z=Math.min(e._z,t._z),i._w=Math.min(e._w,t._w),i._onValueChanged&&i._onValueChanged()},n.negate=function(e,t){t._x=-e._x,t._y=-e._y,t._z=-e._z,t._w=-e._w,t._onValueChanged&&t._onValueChanged()},n.normalize=function(e,t){var i=e._x,o=e._y,s=e._z,l=e._w,u=Math.sqrt(i*i+o*o+s*s+l*l);u>ve.zeroTolerance&&(u=1/u,t._x=i*u,t._y=o*u,t._z=s*u,t._w=l*u,t._onValueChanged&&t._onValueChanged())},n.scale=function(e,t,i){i._x=e._x*t,i._y=e._y*t,i._z=e._z*t,i._w=e._w*t,i._onValueChanged&&i._onValueChanged()},n.transform=function(e,t,i){var o=e._x,s=e._y,l=e._z,u=e._w,c=t.elements;i._x=o*c[0]+s*c[4]+l*c[8]+u*c[12],i._y=o*c[1]+s*c[5]+l*c[9]+u*c[13],i._z=o*c[2]+s*c[6]+l*c[10]+u*c[14],i._w=o*c[3]+s*c[7]+l*c[11]+u*c[15],i._onValueChanged&&i._onValueChanged()},n.transformByQuat=function(e,t,i){var o=e._x,s=e._y,l=e._z,u=e._w,c=t._x,f=t._y,d=t._z,h=t._w,_=h*o+f*l-d*s,p=h*s+d*o-c*l,v=h*l+c*s-f*o,y=-c*o-f*s-d*l;i._x=_*h-y*c-p*d+v*f,i._y=p*h-y*f-v*c+_*d,i._z=v*h-y*d-_*f+p*c,i._w=u,i._onValueChanged&&i._onValueChanged()},Ic(n,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onValueChanged&&this._onValueChanged()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onValueChanged&&this._onValueChanged()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onValueChanged&&this._onValueChanged()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onValueChanged&&this._onValueChanged()}}]),n}();(function(){pt._zero=new pt(0,0,0,0)})();(function(){pt._one=new pt(1,1,1,1)})();var Me=function(){function n(a,e,t,i){a===void 0&&(a=1),e===void 0&&(e=1),t===void 0&&(t=1),i===void 0&&(i=1),this._onValueChanged=null,this._r=a,this._g=e,this._b=t,this._a=i}var r=n.prototype;return r.set=function(e,t,i,o){return this._r=e,this._g=t,this._b=i,this._a=o,this._onValueChanged&&this._onValueChanged(),this},r.add=function(e){return this._r+=e._r,this._g+=e._g,this._b+=e._b,this._a+=e._a,this._onValueChanged&&this._onValueChanged(),this},r.scale=function(e){return this._r*=e,this._g*=e,this._b*=e,this._a*=e,this._onValueChanged&&this._onValueChanged(),this},r.clone=function(){var e=new n(this._r,this._g,this._b,this._a);return e},r.copyFrom=function(e){return this._r=e.r,this._g=e.g,this._b=e.b,this._a=e.a,this._onValueChanged&&this._onValueChanged(),this},r.copyFromArray=function(e,t){return t===void 0&&(t=0),this._r=e[t],this._g=e[t+1],this._b=e[t+2],this._a=e[t+3],this._onValueChanged&&this._onValueChanged(),this},r.copyToArray=function(e,t){t===void 0&&(t=0),e[t]=this._r,e[t+1]=this._g,e[t+2]=this._b,e[t+3]=this._a},r.toLinear=function(e){return e._r=n.gammaToLinearSpace(this._r),e._g=n.gammaToLinearSpace(this._g),e._b=n.gammaToLinearSpace(this._b),this._onValueChanged&&this._onValueChanged(),e},r.toGamma=function(e){return e._r=n.linearToGammaSpace(this._r),e._g=n.linearToGammaSpace(this._g),e._b=n.linearToGammaSpace(this._b),this._onValueChanged&&this._onValueChanged(),e},r.getBrightness=function(){var e=this.r,t=this.g,i=this.b,o=e,s=e;return t>o&&(o=t),i>o&&(o=i),t<s&&(s=t),i<s&&(s=i),(o+s)/2},r.toJSON=function(){return{r:this._r,g:this._g,b:this._b,a:this._a}},n.gammaToLinearSpace=function(e){return e<=0?0:e<=.04045?e/12.92:e<1?Math.pow((e+.055)/1.055,2.4):Math.pow(e,2.4)},n.linearToGammaSpace=function(e){return e<=0?0:e<.0031308?12.92*e:e<1?1.055*Math.pow(e,.41666)-.055:Math.pow(e,.41666)},n.equals=function(e,t){return ve.equals(e._r,t._r)&&ve.equals(e._g,t._g)&&ve.equals(e._b,t._b)&&ve.equals(e._a,t._a)},n.add=function(e,t,i){return i._r=e._r+t._r,i._g=e._g+t._g,i._b=e._b+t._b,i._a=e._a+t._a,i._onValueChanged&&i._onValueChanged(),i},n.subtract=function(e,t,i){i._r=e._r-t._r,i._g=e._g-t._g,i._b=e._b-t._b,i._a=e._a-t._a,i._onValueChanged&&i._onValueChanged()},n.scale=function(e,t,i){return i._r=e._r*t,i._g=e._g*t,i._b=e._b*t,i._a=e._a*t,i._onValueChanged&&i._onValueChanged(),i},n.lerp=function(e,t,i,o){var s=e._r,l=e._g,u=e._b,c=e._a;return o._r=s+(t._r-s)*i,o._g=l+(t._g-l)*i,o._b=u+(t._b-u)*i,o._a=c+(t._a-c)*i,o._onValueChanged&&o._onValueChanged(),o},Ic(n,[{key:"r",get:function(){return this._r},set:function(e){this._r=e,this._onValueChanged&&this._onValueChanged()}},{key:"g",get:function(){return this._g},set:function(e){this._g=e,this._onValueChanged&&this._onValueChanged()}},{key:"b",get:function(){return this._b},set:function(e){this._b=e,this._onValueChanged&&this._onValueChanged()}},{key:"a",get:function(){return this._a},set:function(e){this._a=e,this._onValueChanged&&this._onValueChanged()}}]),n}(),ho=function(){function n(a,e,t,i){a===void 0&&(a=0),e===void 0&&(e=0),t===void 0&&(t=0),i===void 0&&(i=0),this._onValueChanged=null,this._x=a,this._y=e,this._width=t,this._height=i}var r=n.prototype;return r.set=function(e,t,i,o){return this._x=e,this._y=t,this._width=i,this._height=o,this._onValueChanged&&this._onValueChanged(),this},r.clone=function(){return new n(this.x,this.y,this.width,this.height)},r.copyFrom=function(e){return this._x=e.x,this._y=e.y,this._width=e.width,this._height=e.height,this._onValueChanged&&this._onValueChanged(),this},Ic(n,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onValueChanged&&this._onValueChanged()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onValueChanged&&this._onValueChanged()}},{key:"width",get:function(){return this._width},set:function(e){this._width=e,this._onValueChanged&&this._onValueChanged()}},{key:"height",get:function(){return this._height},set:function(e){this._height=e,this._onValueChanged&&this._onValueChanged()}}]),n}(),xz=function(){function n(){this.coefficients=new Float32Array(27)}var r=n.prototype;return r.addLight=function(e,t,i){t.scale(i);var o=this.coefficients,s=e._x,l=e._y,u=e._z,c=t.r,f=t.g,d=t.b,h=.282095,_=-.488603*l,p=.488603*u,v=-.488603*s,y=1.092548*(s*l),m=-1.092548*(l*u),g=.315392*(3*u*u-1),x=-1.092548*(s*u),b=.546274*(s*s-l*l);o[0]+=c*h,o[1]+=f*h,o[2]+=d*h,o[3]+=c*_,o[4]+=f*_,o[5]+=d*_,o[6]+=c*p,o[7]+=f*p,o[8]+=d*p,o[9]+=c*v,o[10]+=f*v,o[11]+=d*v,o[12]+=c*y,o[13]+=f*y,o[14]+=d*y,o[15]+=c*m,o[16]+=f*m,o[17]+=d*m,o[18]+=c*g,o[19]+=f*g,o[20]+=d*g,o[21]+=c*x,o[22]+=f*x,o[23]+=d*x,o[24]+=c*b,o[25]+=f*b,o[26]+=d*b},r.evaluate=function(e,t){var i=this.coefficients,o=e._x,s=e._y,l=e._z,u=.886227,c=-1.023327*s,f=1.023327*l,d=-1.023327*o,h=.858086*s*o,_=-.858086*s*l,p=.247708*(3*l*l-1),v=-.858086*l*o,y=.429042*(o*o-s*s),m=i[0]*u,g=i[1]*u,x=i[2]*u;return m+=i[3]*c+i[6]*f+i[9]*d,g+=i[4]*c+i[7]*f+i[10]*d,x+=i[5]*c+i[8]*f+i[11]*d,m+=i[12]*h+i[15]*_+i[18]*p+i[21]*v+i[24]*y,g+=i[13]*h+i[16]*_+i[19]*p+i[22]*v+i[25]*y,x+=i[14]*h+i[17]*_+i[20]*p+i[23]*v+i[26]*y,t.set(m,g,x,1),t},r.scale=function(e){var t=this.coefficients;t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e,t[4]*=e,t[5]*=e,t[6]*=e,t[7]*=e,t[8]*=e,t[9]*=e,t[10]*=e,t[11]*=e,t[12]*=e,t[13]*=e,t[14]*=e,t[15]*=e,t[16]*=e,t[17]*=e,t[18]*=e,t[19]*=e,t[20]*=e,t[21]*=e,t[22]*=e,t[23]*=e,t[24]*=e,t[25]*=e,t[26]*=e},r.clone=function(){var e=new n;return e.copyFrom(this),e},r.copyFrom=function(e){return e.copyToArray(this.coefficients),this},r.copyFromArray=function(e,t){t===void 0&&(t=0);var i=this.coefficients;i[0]=e[t],i[1]=e[1+t],i[2]=e[2+t],i[3]=e[3+t],i[4]=e[4+t],i[5]=e[5+t],i[6]=e[6+t],i[7]=e[7+t],i[8]=e[8+t],i[9]=e[9+t],i[10]=e[10+t],i[11]=e[11+t],i[12]=e[12+t],i[13]=e[13+t],i[14]=e[14+t],i[15]=e[15+t],i[16]=e[16+t],i[17]=e[17+t],i[18]=e[18+t],i[19]=e[19+t],i[20]=e[20+t],i[21]=e[21+t],i[22]=e[22+t],i[23]=e[23+t],i[24]=e[24+t],i[25]=e[25+t],i[26]=e[26+t]},r.copyToArray=function(e,t){t===void 0&&(t=0);var i=this.coefficients;e[0+t]=i[0],e[1+t]=i[1],e[2+t]=i[2],e[3+t]=i[3],e[4+t]=i[4],e[5+t]=i[5],e[6+t]=i[6],e[7+t]=i[7],e[8+t]=i[8],e[9+t]=i[9],e[10+t]=i[10],e[11+t]=i[11],e[12+t]=i[12],e[13+t]=i[13],e[14+t]=i[14],e[15+t]=i[15],e[16+t]=i[16],e[17+t]=i[17],e[18+t]=i[18],e[19+t]=i[19],e[20+t]=i[20],e[21+t]=i[21],e[22+t]=i[22],e[23+t]=i[23],e[24+t]=i[24],e[25+t]=i[25],e[26+t]=i[26]},n}(),mi=function(){function n(a,e){this.reset(a,e)}var r=n.prototype;return r.randomInt32=function(){var e=this._state0,t=this._state1;return this._state0=t,e^=e<<23,e^=e>>>17,e^=t^t>>>26,this._state1=e,this._state0+this._state1>>>0},r.random=function(){return this.randomInt32()/4294967295},r.reset=function(e,t){this._state0=e>>>0,this._state1=t>>>0},n}(),ca;(function(n){n[n.Android=0]="Android",n[n.IPhone=1]="IPhone",n[n.IPad=2]="IPad",n[n.Mac=3]="Mac",n[n.Unknown=4]="Unknown"})(ca||(ca={}));function Et(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function zb(n,r){for(var a=0;a<r.length;a++){var e=r[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function Ie(n,r,a){return r&&zb(n.prototype,r),a&&zb(n,a),n}function t0(n,r){return t0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t0(n,r)}function be(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&t0(n,r)}var ur;(function(n){n[n.None=0]="None",n[n.VisibleInsideMask=1]="VisibleInsideMask",n[n.VisibleOutsideMask=2]="VisibleOutsideMask"})(ur||(ur={}));var oc;(function(n){n[n.Layer0=1]="Layer0",n[n.Layer1=2]="Layer1",n[n.Layer2=4]="Layer2",n[n.Layer3=8]="Layer3",n[n.Layer4=16]="Layer4",n[n.Layer5=32]="Layer5",n[n.Layer6=64]="Layer6",n[n.Layer7=128]="Layer7",n[n.Layer8=256]="Layer8",n[n.Layer9=512]="Layer9",n[n.Layer10=1024]="Layer10",n[n.Layer11=2048]="Layer11",n[n.Layer12=4096]="Layer12",n[n.Layer13=8192]="Layer13",n[n.Layer14=16384]="Layer14",n[n.Layer15=32768]="Layer15",n[n.Layer16=65536]="Layer16",n[n.Layer17=131072]="Layer17",n[n.Layer18=262144]="Layer18",n[n.Layer19=524288]="Layer19",n[n.Layer20=1048576]="Layer20",n[n.Layer21=2097152]="Layer21",n[n.Layer22=4194304]="Layer22",n[n.Layer23=8388608]="Layer23",n[n.Layer24=16777216]="Layer24",n[n.Layer25=33554432]="Layer25",n[n.Layer26=67108864]="Layer26",n[n.Layer27=134217728]="Layer27",n[n.Layer28=268435456]="Layer28",n[n.Layer29=536870912]="Layer29",n[n.Layer30=1073741824]="Layer30",n[n.Layer31=2147483648]="Layer31",n[n.Everything=4294967295]="Everything"})(oc||(oc={}));var wl;(function(n){n[n.Left=0]="Left",n[n.Center=1]="Center",n[n.Right=2]="Right"})(wl||(wl={}));var Pl;(function(n){n[n.Top=0]="Top",n[n.Center=1]="Center",n[n.Bottom=2]="Bottom"})(Pl||(Pl={}));var Gl;(function(n){n[n.Overflow=0]="Overflow",n[n.Truncate=1]="Truncate"})(Gl||(Gl={}));var Ds;(function(n){n[n.None=0]="None",n[n.Bold=1]="Bold",n[n.Italic=2]="Italic"})(Ds||(Ds={}));function H(n,r,a,e){var t=arguments.length,i=t<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,a):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,r,a,e);else for(var s=n.length-1;s>=0;s--)(o=n[s])&&(i=(t<3?o(i):t>3?o(r,a,i):o(r,a))||i);return t>3&&i&&Object.defineProperty(r,a,i),i}function fr(n,r){return r!=null&&typeof Symbol!="undefined"&&r[Symbol.hasInstance]?!!r[Symbol.hasInstance](n):n instanceof r}var as;(function(n){n[n.Ignore=0]="Ignore",n[n.Assignment=1]="Assignment",n[n.Shallow=2]="Shallow",n[n.Deep=3]="Deep"})(as||(as={}));function te(n,r){Mi.registerCloneMode(n,r,as.Ignore)}function en(n,r){Mi.registerCloneMode(n,r,as.Assignment)}function hx(n,r){Mi.registerCloneMode(n,r,as.Shallow)}function Xe(n,r){Mi.registerCloneMode(n,r,as.Deep)}var Mi=function(){function n(){}return n.registerCloneMode=function(a,e,t){var i=n._subCloneModeMap.get(a.constructor);i||(i=Object.create(null),n._subCloneModeMap.set(a.constructor,i)),i[e]=t},n.getCloneMode=function(a){var e=n._cloneModeMap.get(a);if(!e){e=Object.create(null),n._cloneModeMap.set(a,e);for(var t=n._objectType,i=n._subCloneModeMap;a!==t;){var o=i.get(a);o&&Object.assign(e,o),a=Object.getPrototypeOf(a)}}return e},n.cloneProperty=function(a,e,t,i){if(i!==as.Ignore){var o=a[t];if(fr(o,Object)){if(i===void 0||i===as.Assignment){e[t]=o;return}var s=o.constructor;switch(s){case Uint8Array:case Uint16Array:case Uint32Array:case Int8Array:case Int16Array:case Int32Array:case Float32Array:case Float64Array:var l=e[t];l==null||l.length!==o.length?e[t]=o.slice():l.set(o);break;case Array:var u=e[t],c=o.length;u==null?e[t]=u=new Array(c):u.length=c;for(var f=0;f<c;f++)n.cloneProperty(o,u,f,i);break;default:var d,h,_=(d=e)[h=t]||(d[h]=new o.constructor),p=n.getCloneMode(o.constructor);for(var v in o)n.cloneProperty(o,_,v,p[v]);o._cloneTo&&o._cloneTo(_),o.copyFrom&&_.copyFrom(o);break}}else e[t]=o}},n.deepCloneObject=function(a,e){for(var t in a)n.cloneProperty(a,e,t,as.Deep)},n}();(function(){Mi._subCloneModeMap=new Map})();(function(){Mi._cloneModeMap=new Map})();(function(){Mi._objectType=Object.getPrototypeOf(Object)})();var Oo=function(){function n(a){this.instanceId=++n._instanceIdCounter,this._destroyed=!1,this._engine=a}var r=n.prototype;return r.destroy=function(){this._destroyed||(this._onDestroy(),this._destroyed=!0)},r._onDestroy=function(){var e=this._engine.resourceManager;e._deleteAsset(this),e._deleteContentRestorer(this)},Ie(n,[{key:"engine",get:function(){return this._engine}},{key:"destroyed",get:function(){return this._destroyed}}]),n}();(function(){Oo._instanceIdCounter=0})();H([te],Oo.prototype,"instanceId",void 0);H([te],Oo.prototype,"_engine",void 0);var Io=function(n){be(r,n);function r(e){var t;return t=n.call(this,e)||this,t.isGCIgnored=!1,t._refCount=0,t._superResources=null,e.resourceManager._addReferResource(Et(t)),t}var a=r.prototype;return a.destroy=function(t,i){if(t===void 0&&(t=!1),!t){var o;if(this._refCount!==0)return!1;var s=this._superResources;if((o=s)!=null&&o.length)if(i){for(var l=0,u=s.length;l<u;l++)if(s[l].refCount>0)return!1}else return!1}return n.prototype.destroy.call(this),!0},a._associationSuperResource=function(t){(this._superResources||(this._superResources=[])).push(t)},a._disassociationSuperResource=function(t){var i=this._superResources,o=i.indexOf(t);i.splice(o,1)},a._getReferCount=function(){return this._refCount},a._addReferCount=function(t){this._refCount+=t},a._addToResourceManager=function(t){this._engine.resourceManager._addAsset(t,this)},a._onDestroy=function(){n.prototype._onDestroy.call(this),this._engine.resourceManager._deleteReferResource(this);var t=this._getReferCount();t>0&&this._addReferCount(-t)},Ie(r,[{key:"refCount",get:function(){return this._refCount}}]),r}(Oo),fP=function(n){be(r,n);function r(e){var t;return t=n.call(this,e)||this,t._sprites=new Array,t._spriteNamesToIndex={},t}var a=r.prototype;return a.getSprite=function(t){var i=this._sprites[this._spriteNamesToIndex[t]];return i||console.warn("There is no sprite named "+t+" in the atlas."),i},a.getSprites=function(t,i){i.length=0;var o=this._spriteNamesToIndex[t];if(o!==void 0)for(var s=this._sprites;o>=0;o--){var l=s[o];l.name===t&&i.push(l)}else console.warn("The name of the sprite you want to find is not exit in SpriteAtlas.");return i},a._addSprite=function(t){this._spriteNamesToIndex[t.name]=this._sprites.push(t)-1,t._atlas=this,t.isGCIgnored=!0},a._onDestroy=function(){n.prototype._onDestroy.call(this);for(var t=this,i=t._sprites,o=0,s=i.length;o<s;o++)i[o].destroy();i.length=0,this._sprites=null,this._spriteNamesToIndex=null},Ie(r,[{key:"sprites",get:function(){return this._sprites}}]),r}(Io),vi;(function(n){n[n.Simple=0]="Simple",n[n.Sliced=1]="Sliced",n[n.Tiled=2]="Tiled"})(vi||(vi={}));var od;(function(n){n[n.Continuous=0]="Continuous",n[n.Adaptive=1]="Adaptive"})(od||(od={}));var Mn=function(){function n(){}return n.removeFromArray=function(a,e){var t=a.indexOf(e);if(t<0)return!1;var i=a.length-1;if(t!==i){var o=a[i];a[t]=o}return a.length--,!0},n.decodeText=function(a){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(a);for(var e="",t=0,i=a.length;t<i;t++)e+=String.fromCharCode(a[t]);return decodeURIComponent(encodeURIComponent(e))},n.isAbsoluteUrl=function(a){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(a)},n.isBase64Url=function(a){return/^data:.*,.*$/i.test(a)},n.objectValues=function(a){return Object.keys(a).map(function(e){return a[e]})},n.resolveAbsoluteUrl=function(a,e){return n.isAbsoluteUrl(e)||n.isBase64Url(e)?e:e?new URL(e,a).href:a},n._floatMatrixMultiply=function(a,e,t,i,o){var s=a.elements,l=s[0],u=s[1],c=s[2],f=s[3],d=s[4],h=s[5],_=s[6],p=s[7],v=s[8],y=s[9],m=s[10],g=s[11],x=s[12],b=s[13],S=s[14],C=s[15],E=e[t],T=e[t+1],M=e[t+2],L=e[t+3],F=e[t+4],N=e[t+5],I=e[t+6],O=e[t+7],P=e[t+8],R=e[t+9],A=e[t+10],D=e[t+11],B=e[t+12],k=e[t+13],V=e[t+14],U=e[t+15];i[o]=l*E+d*T+v*M+x*L,i[o+1]=u*E+h*T+y*M+b*L,i[o+2]=c*E+_*T+m*M+S*L,i[o+3]=f*E+p*T+g*M+C*L,i[o+4]=l*F+d*N+v*I+x*O,i[o+5]=u*F+h*N+y*I+b*O,i[o+6]=c*F+_*N+m*I+S*O,i[o+7]=f*F+p*N+g*I+C*O,i[o+8]=l*P+d*R+v*A+x*D,i[o+9]=u*P+h*R+y*A+b*D,i[o+10]=c*P+_*R+m*A+S*D,i[o+11]=f*P+p*R+g*A+C*D,i[o+12]=l*B+d*k+v*V+x*U,i[o+13]=u*B+h*k+y*V+b*U,i[o+14]=c*B+_*k+m*V+S*U,i[o+15]=f*B+p*k+g*V+C*U},n._reflectGet=function(a,e){for(var t=this._stringToPath(e),i=a,o=0,s=t.length;i!=null&&o<s;)i=i[t[o++]];return o&&o==s?i:void 0},n._quickSort=function(a,e,t,i){for(;;){if(t-e<=10){this._insertionSort(a,e,t,i);return}var o=e+t>>1,s=a[e],l=a[t-1],u=a[o],c=i(s,l);if(c>0){var f=s;s=l,l=f}var d=i(s,u);if(d>=0){var h=s;s=u,u=l,l=h}else{var _=i(l,u);if(_>0){var p=l;l=u,u=p}}a[e]=s,a[t-1]=u;var v=l,y=e+1,m=t-1;a[o]=a[y],a[y]=v;e:for(var g=y+1;g<m;g++){var x=a[g],b=i(x,v);if(b<0)a[g]=a[y],a[y]=x,y++;else if(b>0){do{if(m--,m==g)break e;var S=a[m];b=i(S,v)}while(b>0);a[g]=a[m],a[m]=x,b<0&&(x=a[g],a[g]=a[y],a[y]=x,y++)}}t-m<y-e?(this._quickSort(a,m,t,i),t=y):(this._quickSort(a,e,y,i),e=m)}},n._stringToPath=function(a){var e=[];return a.charCodeAt(0)===Sz&&e.push(""),a.replace(Cz,function(t,i,o,s){var l=t;o?l=s.replace(bz,"$1"):i&&(l=i.trim()),e.push(l)}),e},n._insertionSort=function(a,e,t,i){for(var o=e+1;o<t;o++){var s=void 0,l=a[o];for(s=o-1;s>=e;s--){var u=a[s],c=i(u,l);if(c>0)a[s+1]=u;else break}a[s+1]=l}},n}(),Sz=".".charCodeAt(0),bz=/\\(\\)?/g,Cz=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),to=function(){function n(){this._updateFlags=[],this._listeners=[]}var r=n.prototype;return r.createFlag=function(e){var t=new e;return this.addFlag(t),t},r.addFlag=function(e){this._updateFlags.push(e),e._flagManagers.push(this)},r.removeFlag=function(e){var t=Mn.removeFromArray(this._updateFlags,e);t&&Mn.removeFromArray(e._flagManagers,this)},r.addListener=function(e){this._listeners.push(e)},r.removeListener=function(e){Mn.removeFromArray(this._listeners,e)},r.dispatch=function(e,t){for(var i=this._updateFlags,o=i.length-1;o>=0;o--)i[o].dispatch(e,t);for(var s=this._listeners,l=s.length-1;l>=0;l--)s[l](e,t)},n}(),qt;(function(n){n[n.texture=1]="texture",n[n.size=2]="size",n[n.atlasRotate=4]="atlasRotate",n[n.atlasRegion=8]="atlasRegion",n[n.atlasRegionOffset=16]="atlasRegionOffset",n[n.region=32]="region",n[n.pivot=64]="pivot",n[n.border=128]="border",n[n.destroy=256]="destroy"})(qt||(qt={}));var Wv=function(n){be(r,n);function r(e,t,i,o,s,l){t===void 0&&(t=null),i===void 0&&(i=null),o===void 0&&(o=null),s===void 0&&(s=null),l===void 0&&(l=null);var u;return u=n.call(this,e)||this,u._automaticWidth=0,u._automaticHeight=0,u._customWidth=void 0,u._customHeight=void 0,u._positions=[new Ze,new Ze,new Ze,new Ze],u._uvs=[new Ze,new Ze,new Ze,new Ze],u._bounds=new Da,u._texture=null,u._atlasRotated=!1,u._atlasRegion=new ho(0,0,1,1),u._atlasRegionOffset=new pt(0,0,0,0),u._region=new ho(0,0,1,1),u._pivot=new Ze(.5,.5),u._border=new pt(0,0,0,0),u._dirtyUpdateFlag=7,u._updateFlagManager=new to,u._texture=t,u._onRegionChange=u._onRegionChange.bind(Et(u)),u._onPivotChange=u._onPivotChange.bind(Et(u)),u._onBorderChange=u._onBorderChange.bind(Et(u)),u._region._onValueChanged=u._onRegionChange,u._pivot._onValueChanged=u._onPivotChange,u._border._onValueChanged=u._onBorderChange,i&&u._region.copyFrom(i),o&&u._pivot.copyFrom(o),s&&u._border.copyFrom(s),u.name=l,u}var a=r.prototype;return a.clone=function(){var t=new r(this._engine,this._texture,this._region,this._pivot,this._border,this.name);return t._atlasRotated=this._atlasRotated,t._atlasRegion.copyFrom(this._atlasRegion),t._atlasRegionOffset.copyFrom(this._atlasRegionOffset),t},a._getPositions=function(){return this._dirtyUpdateFlag&1&&this._updatePositions(),this._positions},a._getUVs=function(){return this._dirtyUpdateFlag&2&&this._updateUVs(),this._uvs},a._getBounds=function(){return this._dirtyUpdateFlag&1&&this._updatePositions(),this._bounds},a._addReferCount=function(t){var i;n.prototype._addReferCount.call(this,t),(i=this._atlas)==null||i._addReferCount(t)},a._onDestroy=function(){this._dispatchSpriteChange(qt.destroy),n.prototype._onDestroy.call(this),this._positions.length=0,this._positions=null,this._uvs.length=0,this._uvs=null,this._atlasRegion=null,this._atlasRegionOffset=null,this._region=null,this._pivot=null,this._border=null,this._bounds=null,this._atlas=null,this._texture=null,this._updateFlagManager=null},a._calDefaultSize=function(){if(this._texture){var t=this,i=t._texture,o=t._atlasRegion,s=t._atlasRegionOffset,l=t._region,u=1/fs._pixelsPerUnit;this._automaticWidth=i.width*o.width/(1-s.x-s.z)*l.width*u,this._automaticHeight=i.height*o.height/(1-s.y-s.w)*l.height*u}else this._automaticWidth=this._automaticHeight=0;this._dirtyUpdateFlag&=-5},a._updatePositions=function(){var t=this._atlasRegionOffset,i=this._region,o=i.x,s=i.y,l=i.width,u=i.height,c=1-o-l,f=1-s-u,d=Math.max(t.x-o,0)/l,h=Math.max(t.w-s,0)/u,_=1-Math.max(t.z-c,0)/l,p=1-Math.max(t.y-f,0)/u,v=this._positions;v[0].set(d,h),v[1].set(_,h),v[2].set(d,p),v[3].set(_,p);var y=this._bounds,m=y.min,g=y.max;m.set(d,h,0),g.set(_,p,0),this._dirtyUpdateFlag&=-2},a._updateUVs=function(){var t=this,i=t._uvs,o=t._atlasRegionOffset,s=this._region,l=s.x,u=s.y,c=s.width,f=s.height,d=1-l-c,h=1-u-f,_=this._atlasRegion,p=_.x,v=_.y,y=_.width,m=_.height,g=o.x,x=o.y,b=o.z,S=o.w,C=y/(1-g-b),E=m/(1-x-S),T=Math.max(l-g,0)*C+p,M=Math.max(h-x,0)*E+v,L=y+p-Math.max(d-b,0)*C,F=m+v-Math.max(u-S,0)*E,N=this._border,I=N.x,O=N.y,P=N.z,R=N.w;i[0].set(T,F),i[1].set((l-g+I*c)*C+p,m+v-(u-S+O*f)*E),i[2].set(y+p-(d-b+P*c)*C,(h-x+R*f)*E+v),i[3].set(L,M),this._dirtyUpdateFlag&=-3},a._dispatchSpriteChange=function(t){switch(t){case qt.texture:this._dirtyUpdateFlag|=4;break;case qt.atlasRegionOffset:case qt.region:this._dirtyUpdateFlag|=7;break;case qt.atlasRegion:this._dirtyUpdateFlag|=6;break;case qt.border:this._dirtyUpdateFlag|=2;break}this._updateFlagManager.dispatch(t)},a._onRegionChange=function(){var t=this,i=t._region;i._onValueChanged=null;var o=ve.clamp(i.x,0,1),s=ve.clamp(i.y,0,1);i.set(o,s,ve.clamp(i.width,0,1-o),ve.clamp(i.height,0,1-s)),this._dispatchSpriteChange(qt.region),(this._customWidth===void 0||this._customHeight===void 0)&&this._dispatchSpriteChange(qt.size),i._onValueChanged=this._onRegionChange},a._onPivotChange=function(){this._dispatchSpriteChange(qt.pivot)},a._onBorderChange=function(){var t=this,i=t._border;i._onValueChanged=null;var o=ve.clamp(i.x,0,1),s=ve.clamp(i.y,0,1);i.set(o,s,ve.clamp(i.z,0,1-o),ve.clamp(i.w,0,1-s)),this._dispatchSpriteChange(qt.border),i._onValueChanged=this._onBorderChange},Ie(r,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this._dispatchSpriteChange(qt.texture),(this._customWidth===void 0||this._customHeight===void 0)&&this._dispatchSpriteChange(qt.size))}},{key:"width",get:function(){return this._customWidth!==void 0?this._customWidth:(this._dirtyUpdateFlag&4&&this._calDefaultSize(),this._automaticWidth)},set:function(t){this._customWidth!==t&&(this._customWidth=t,this._dispatchSpriteChange(qt.size))}},{key:"height",get:function(){return this._customHeight!==void 0?this._customHeight:(this._dirtyUpdateFlag&4&&this._calDefaultSize(),this._automaticHeight)},set:function(t){this._customHeight!==t&&(this._customHeight=t,this._dispatchSpriteChange(qt.size))}},{key:"atlasRotated",get:function(){return this._atlasRotated},set:function(t){this._atlasRotated!=t&&(this._atlasRotated=t)}},{key:"atlasRegion",get:function(){return this._atlasRegion},set:function(t){var i=ve.clamp(t.x,0,1),o=ve.clamp(t.y,0,1);this._atlasRegion.set(i,o,ve.clamp(t.width,0,1-i),ve.clamp(t.height,0,1-o)),this._dispatchSpriteChange(qt.atlasRegion),(this._customWidth===void 0||this._customHeight===void 0)&&this._dispatchSpriteChange(qt.size)}},{key:"atlasRegionOffset",get:function(){return this._atlasRegionOffset},set:function(t){var i=ve.clamp(t.x,0,1),o=ve.clamp(t.y,0,1);this._atlasRegionOffset.set(i,o,ve.clamp(t.z,0,1-i),ve.clamp(t.w,0,1-o)),this._dispatchSpriteChange(qt.atlasRegionOffset),(this._customWidth===void 0||this._customHeight===void 0)&&this._dispatchSpriteChange(qt.size)}},{key:"region",get:function(){return this._region},set:function(t){this._region!==t&&this._region.copyFrom(t)}},{key:"pivot",get:function(){return this._pivot},set:function(t){this._pivot!==t&&this._pivot.copyFrom(t)}},{key:"border",get:function(){return this._border},set:function(t){this._border!==t&&this._border.copyFrom(t)}}]),r}(Io),Gb;(function(n){n[n.positions=1]="positions",n[n.uvs=2]="uvs",n[n.automaticSize=4]="automaticSize",n[n.all=7]="all"})(Gb||(Gb={}));var vx=function(){function n(){this._events=Object.create(null),this._eventCount=0}var r=n.prototype;return r.hasEvent=function(e){return this._events[e]!=null},r.eventNames=function(){return this._eventCount===0?[]:Object.keys(this._events)},r.listenerCount=function(e){var t=this._events[e];return t?Array.isArray(t)?t.length:1:0},r.dispatch=function(e,t){if(!this._events[e])return!1;var i=this._events[e];if(Array.isArray(i)){var o=i.length,s=n._dispatchingListenersPool,l=s.length>0?s.pop():[];l.length=o;for(var u=0;u<o;u++)l[u]=i[u];for(var c=0;c<o;c++){var f=l[c];f.destroyed||(f.once&&this.off(e,f.fn),f.fn(t))}l.length=0,s.push(l)}else i.once&&this.off(e,i.fn),i.fn(t);return!0},r.on=function(e,t){return this._addEventListener(e,t)},r.once=function(e,t){return this._addEventListener(e,t,!0)},r.off=function(e,t){if(!this._events[e])return this;if(!t)return this._clearEvent(e),this;var i=this._events[e],o=Array.isArray(i);if(!o&&i.fn===t)this._clearEvent(e);else if(o){for(var s=i.length-1;s>=0;s--)i[s].fn===t&&(i[s].destroyed=!0,i.splice(s,1));i.length===0?this._clearEvent(e):i.length===1&&(this._events[e]=i[0])}return this},r.removeEventListener=function(e,t){return this.off(e,t)},r.removeAllEventListeners=function(e){e?this._events[e]&&this._clearEvent(e):(this._events=Object.create(null),this._eventCount=0)},r._addEventListener=function(e,t,i){var o={fn:t,once:i},s=this._events,l=s[e];return l?Array.isArray(l)?l.push(o):s[e]=[l,o]:(s[e]=o,this._eventCount++),this},r._clearEvent=function(e){--this._eventCount===0?this._events=Object.create(null):delete this._events[e]},n}();(function(){vx._dispatchingListenersPool=[]})();var Ts=function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),e=1;e<r;e++)a[e-1]=arguments[e]},Ez=console.log.bind(console),Tz=console.info.bind(console),Rz=console.warn.bind(console),Az=console.error.bind(console),Pt={debug:Ts,info:Ts,warn:Ts,error:Ts,isEnabled:!1,enable:function(){this.debug=Ez,this.info=Tz,this.warn=Rz,this.error=Az,this.isEnabled=!0},disable:function(){this.debug=Ts,this.info=Ts,this.warn=Ts,this.error=Ts,this.isEnabled=!1}},X=function(){function n(r){this.name=r,this._uniqueId=n._propertyNameCounter++}return n.getByName=function(a){var e=n._propertyNameMap;if(e[a]!=null)return e[a];var t=new n(a);return e[a]=t,n._propertyIdMap[t._uniqueId]=t,t},n._getShaderPropertyGroup=function(a){var e,t=n._propertyNameMap[a];return(e=t)==null?void 0:e._group},Ie(n,[{key:"type",get:function(){return this._type}}]),n}();(function(){X._propertyIdMap=Object.create(null)})();(function(){X._propertyNameCounter=0})();(function(){X._propertyNameMap=Object.create(null)})();var i_=function(){function n(){this._frameCount=0,this._deltaTime=0,this._actualDeltaTime=0,this._elapsedTime=0,this._actualElapsedTime=0,this._elapsedTimeValue=new pt,this._deltaTimeValue=new pt,this.maximumDeltaTime=.333333,this.timeScale=1,this._lastSystemTime=performance.now()/1e3}var r=n.prototype;return r._reset=function(){this._lastSystemTime=performance.now()/1e3},r._update=function(){var e=performance.now()/1e3,t=e-this._lastSystemTime;this._actualDeltaTime=t,this._actualElapsedTime+=t;var i=Math.min(t,this.maximumDeltaTime)*this.timeScale;this._deltaTime=i,this._elapsedTime+=i,this._frameCount++,this._lastSystemTime=e},r._updateSceneShaderData=function(e){var t=this,i=t._elapsedTimeValue,o=t._deltaTimeValue,s=this._elapsedTime;i.set(s,Math.sin(s),Math.cos(s),0),e.setVector4(n._elapsedTimeProperty,i),o.set(this._deltaTime,0,0,0),e.setVector4(n._deltaTimeProperty,o)},Ie(n,[{key:"frameCount",get:function(){return this._frameCount}},{key:"deltaTime",get:function(){return this._deltaTime}},{key:"elapsedTime",get:function(){return this._elapsedTime}},{key:"actualDeltaTime",get:function(){return this._actualDeltaTime}},{key:"actualElapsedTime",get:function(){return this._actualElapsedTime}}]),n}();(function(){i_._elapsedTimeProperty=X.getByName("scene_ElapsedTime")})();(function(){i_._deltaTimeProperty=X.getByName("scene_DeltaTime")})();var Rn;(function(n){n[n.FLOAT=5126]="FLOAT",n[n.FLOAT_VEC2=35664]="FLOAT_VEC2",n[n.FLOAT_VEC3=35665]="FLOAT_VEC3",n[n.FLOAT_VEC4=35666]="FLOAT_VEC4",n[n.INT=5124]="INT",n[n.INT_VEC2=35667]="INT_VEC2",n[n.INT_VEC3=35668]="INT_VEC3",n[n.INT_VEC4=35669]="INT_VEC4",n[n.BOOL=35670]="BOOL",n[n.BOOL_VEC2=35671]="BOOL_VEC2",n[n.BOOL_VEC3=35672]="BOOL_VEC3",n[n.BOOL_VEC4=35673]="BOOL_VEC4",n[n.FLOAT_MAT2=35674]="FLOAT_MAT2",n[n.FLOAT_MAT3=35675]="FLOAT_MAT3",n[n.FLOAT_MAT4=35676]="FLOAT_MAT4",n[n.FLOAT_ARRAY=35677]="FLOAT_ARRAY",n[n.FLOAT_VEC2_ARRAY=1e5]="FLOAT_VEC2_ARRAY",n[n.FLOAT_VEC3_ARRAY=100001]="FLOAT_VEC3_ARRAY",n[n.FLOAT_VEC4_ARRAY=100002]="FLOAT_VEC4_ARRAY",n[n.INT_ARRAY=100003]="INT_ARRAY",n[n.INT_VEC2_ARRAY=100004]="INT_VEC2_ARRAY",n[n.INT_VEC3_ARRAY=100005]="INT_VEC3_ARRAY",n[n.INT_VEC4_ARRAY=100006]="INT_VEC4_ARRAY",n[n.FLOAT_MAT2_ARRAY=100007]="FLOAT_MAT2_ARRAY",n[n.FLOAT_MAT3_ARRAY=100008]="FLOAT_MAT3_ARRAY",n[n.FLOAT_MAT4_ARRAY=100009]="FLOAT_MAT4_ARRAY",n[n.SAMPLER_2D_ARRAY=100010]="SAMPLER_2D_ARRAY",n[n.SAMPLER_CUBE_ARRAY=100011]="SAMPLER_CUBE_ARRAY",n[n.SAMPLER_2D=35678]="SAMPLER_2D",n[n.SAMPLER_CUBE=35680]="SAMPLER_CUBE",n[n.BYTE=5120]="BYTE",n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.SHORT=5122]="SHORT",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT"})(Rn||(Rn={}));var Ue;(function(n){n.shaderVertexID="shaderVertexID",n.standardDerivatives="OES_standard_derivatives",n.shaderTextureLod="EXT_shader_texture_lod",n.elementIndexUint="OES_element_index_uint",n.depthTexture="WEBGL_depth_texture",n.drawBuffers="WEBGL_draw_buffers",n.vertexArrayObject="OES_vertex_array_object",n.instancedArrays="ANGLE_instanced_arrays",n.multipleSample="multipleSampleOnlySupportedInWebGL2",n.textureFloat="OES_texture_float",n.textureFloatLinear="OES_texture_float_linear",n.textureHalfFloat="OES_texture_half_float",n.textureHalfFloatLinear="OES_texture_half_float_linear",n.WEBGL_colorBufferFloat="WEBGL_color_buffer_float",n.colorBufferFloat="EXT_color_buffer_float",n.colorBufferHalfFloat="EXT_color_buffer_half_float",n.textureFilterAnisotropic="EXT_texture_filter_anisotropic",n.blendMinMax="EXT_blend_minmax",n.fragDepth="EXT_frag_depth",n.astc="WEBGL_compressed_texture_astc",n.astc_webkit="WEBKIT_WEBGL_compressed_texture_astc",n.etc="WEBGL_compressed_texture_etc",n.etc_webkit="WEBKIT_WEBGL_compressed_texture_etc",n.etc1="WEBGL_compressed_texture_etc1",n.etc1_webkit="WEBKIT_WEBGL_compressed_texture_etc1",n.pvrtc="WEBGL_compressed_texture_pvrtc",n.pvrtc_webkit="WEBKIT_WEBGL_compressed_texture_pvrtc",n.s3tc="WEBGL_compressed_texture_s3tc",n.s3tc_webkit="WEBKIT_WEBGL_compressed_texture_s3tc",n.bptc="EXT_texture_compression_bptc",n.WEBGL_lose_context="WEBGL_lose_context"})(Ue||(Ue={}));var Ot;(function(n){n[n.None=0]="None",n[n.Scene=1]="Scene",n[n.Hierarchy=2]="Hierarchy",n[n.All=3]="All"})(Ot||(Ot={}));var Zr=function(n){be(r,n);function r(e){var t;return t=n.call(this,e.engine)||this,t._awoken=!1,t._phasedActiveInScene=!1,t._phasedActive=!1,t._enabled=!0,t._entity=e,t}var a=r.prototype;return a._onAwake=function(){},a._onEnable=function(){},a._onDisable=function(){},a._onEnableInScene=function(){},a._onDisableInScene=function(){},a._setActive=function(t,i){var o=this._entity;i&Ot.Scene&&(t?!this._phasedActiveInScene&&o._isActiveInScene&&this._enabled&&(this._phasedActiveInScene=!0,this._onEnableInScene()):this._phasedActiveInScene&&!(o._isActiveInScene&&this._enabled)&&(this._phasedActiveInScene=!1,this._onDisableInScene())),i&Ot.Hierarchy&&(t?(!this._awoken&&o._isActiveInHierarchy&&(this._awoken=!0,this._onAwake()),!this._phasedActive&&o._isActiveInHierarchy&&this._enabled&&(this._phasedActive=!0,this._onEnable())):this._phasedActive&&!(o._isActiveInHierarchy&&this._enabled)&&(this._phasedActive=!1,this._onDisable()))},a._addResourceReferCount=function(t,i){this._entity._isTemplate||t._addReferCount(i)},a._onDestroy=function(){n.prototype._onDestroy.call(this);var t=this._entity;t._removeComponent(this),this._enabled&&(t._isActiveInScene&&this._onDisableInScene(),t._isActiveInHierarchy&&this._onDisable())},Ie(r,[{key:"enabled",get:function(){return this._enabled},set:function(t){t!==this._enabled&&(this._enabled=t,this._entity._isActiveInScene&&(t?this._phasedActiveInScene||(this._phasedActiveInScene=!0,this._onEnableInScene()):this._phasedActiveInScene&&(this._phasedActiveInScene=!1,this._onDisableInScene())),this._entity.isActiveInHierarchy&&(t?this._phasedActive||(this._phasedActive=!0,this._onEnable()):this._phasedActive&&(this._phasedActive=!1,this._onDisable())))}},{key:"entity",get:function(){return this._entity}},{key:"scene",get:function(){return this._entity.scene}}]),r}(Oo);H([te],Zr.prototype,"_entity",void 0);H([te],Zr.prototype,"_awoken",void 0);H([te],Zr.prototype,"_phasedActiveInScene",void 0);H([te],Zr.prototype,"_phasedActive",void 0);H([en],Zr.prototype,"_enabled",void 0);var sc=function(){function n(){}return n._addCheck=function(a,e){for(;e!==Zr;){var t=n._dependenciesMap.get(e);if(t)for(var i=t.components,o=t.mode,s=0,l=i.length;s<l;s++){var u=i[s];if(!a.getComponent(u))if(o===1)a.addComponent(u);else throw"Should add "+u.name+" before adding "+e.name}e=Object.getPrototypeOf(e)}},n._removeCheck=function(a,e){for(;e!==Zr;){var t=n._invDependenciesMap.get(e);if(t){for(var i=0,o=t.length;i<o;i++)if(a.getComponent(t[i]))throw"Should remove "+t[i].name+" before adding "+e.name}e=Object.getPrototypeOf(e)}},n._addDependency=function(a,e,t){var i=t.get(a);i?i.includes(e)||i.push(e):t.set(a,[e])},n._addInvDependency=function(a,e){var t=this._invDependenciesMap,i=t.get(a);i?i.includes(e)||i.push(e):t.set(a,[e])},n}();(function(){sc._invDependenciesMap=new Map})();(function(){sc._dependenciesMap=new Map})();function gs(n,r){r===void 0&&(r=0);var a=Array.isArray(n)?n:[n];return function(e){sc._dependenciesMap.set(e,{mode:r,components:a}),a.forEach(function(t){return sc._addInvDependency(t,e)})}}var no;(function(n){n[n.CheckOnly=0]="CheckOnly",n[n.AutoAdd=1]="AutoAdd"})(no||(no={}));var wz=function(){function n(){this._flagManagers=[]}var r=n.prototype;return r.clearFromManagers=function(){this._removeFromManagers(),this._flagManagers.length=0},r.destroy=function(){this._removeFromManagers(),this._flagManagers=null},r._removeFromManagers=function(){for(var e=this._flagManagers,t=0,i=e.length;t<i;t++)Mn.removeFromArray(e[t]._updateFlags,this)},n}(),o_=function(n){be(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e.flag=!0,e}var a=r.prototype;return a.dispatch=function(){this.flag=!0},r}(wz),Vt=function(n){be(r,n);function r(e){var t;return t=n.call(this,e)||this,t._position=new z,t._rotation=new z,t._rotationQuaternion=new Ut,t._scale=new z(1,1,1),t._worldPosition=new z,t._worldRotation=new z,t._worldRotationQuaternion=new Ut,t._lossyWorldScale=new z(1,1,1),t._localMatrix=new Ge,t._worldMatrix=new Ge,t._worldForward=null,t._worldRight=null,t._worldUp=null,t._isParentDirty=!0,t._parentTransformCache=null,t._dirtyFlag=188,t._updateFlagManager=new to,t._onPositionChanged=t._onPositionChanged.bind(Et(t)),t._onWorldPositionChanged=t._onWorldPositionChanged.bind(Et(t)),t._onRotationChanged=t._onRotationChanged.bind(Et(t)),t._onWorldRotationChanged=t._onWorldRotationChanged.bind(Et(t)),t._onRotationQuaternionChanged=t._onRotationQuaternionChanged.bind(Et(t)),t._onWorldRotationQuaternionChanged=t._onWorldRotationQuaternionChanged.bind(Et(t)),t._onScaleChanged=t._onScaleChanged.bind(Et(t)),t._position._onValueChanged=t._onPositionChanged,t._worldPosition._onValueChanged=t._onWorldPositionChanged,t._rotation._onValueChanged=t._onRotationChanged,t._worldRotation._onValueChanged=t._onWorldRotationChanged,t._rotationQuaternion._onValueChanged=t._onRotationQuaternionChanged,t._worldRotationQuaternion._onValueChanged=t._onWorldRotationQuaternionChanged,t._scale._onValueChanged=t._onScaleChanged,t}var a=r.prototype;return a.setPosition=function(t,i,o){this._position.set(t,i,o)},a.setRotation=function(t,i,o){this._rotation.set(t,i,o)},a.setRotationQuaternion=function(t,i,o,s){this._rotationQuaternion.set(t,i,o,s)},a.setScale=function(t,i,o){this._scale.set(t,i,o)},a.setWorldPosition=function(t,i,o){this._worldPosition.set(t,i,o)},a.setWorldRotation=function(t,i,o){this._worldRotation.set(t,i,o)},a.setWorldRotationQuaternion=function(t,i,o,s){this._worldRotationQuaternion.set(t,i,o,s)},a.translate=function(t,i,o,s){if(typeof t=="number"){var l=r._tempVec30;l.set(t,i,o),this._translate(l,s)}else this._translate(t,i)},a.rotate=function(t,i,o,s){typeof t=="number"?this._rotateXYZ(t,i,o,s):this._rotateXYZ(t.x,t.y,t.z,i)},a.rotateByAxis=function(t,i,o){o===void 0&&(o=!0);var s=i*ve.degreeToRadFactor;Ut.rotationAxisAngle(t,s,r._tempQuat0),this._rotateByQuat(r._tempQuat0,o)},a.lookAt=function(t,i){var o=r._tempVec30;z.subtract(this.worldPosition,t,o);var s=o.length();if(!(s<=ve.zeroTolerance)){o.scale(1/s);var l=r._tempVec31;if(i?z.cross(i,o,l):l.set(o.z,0,-o.x),s=l.length(),!(s<=ve.zeroTolerance)){l.scale(1/s);var u=r._tempVec32;z.cross(o,l,u);var c=r._tempMat41,f=c.elements;f[0]=l.x,f[1]=l.y,f[2]=l.z,f[4]=u.x,f[5]=u.y,f[6]=u.z,f[8]=o.x,f[9]=o.y,f[10]=o.z,c.getRotation(this._worldRotationQuaternion)}}},a.registerWorldChangeFlag=function(){return this._updateFlagManager.createFlag(o_)},a._parentChange=function(){this._isParentDirty=!0,this._updateAllWorldFlag()},a._isFrontFaceInvert=function(){var t=this.lossyWorldScale,i=t.x<0;return t.y<0&&(i=!i),t.z<0&&(i=!i),i},a._onDestroy=function(){n.prototype._onDestroy.call(this),this._worldPosition._onValueChanged=null,this._rotation._onValueChanged=null,this._worldRotation._onValueChanged=null,this._rotationQuaternion._onValueChanged=null,this._worldRotationQuaternion._onValueChanged=null,this._position._onValueChanged=null,this._scale._onValueChanged=null},a._updateWorldPositionFlag=function(){if(!this._isContainDirtyFlags(132)){this._worldAssociatedChange(132);for(var t=this._entity._children,i=0,o=t.length;i<o;i++){var s;(s=t[i].transform)==null||s._updateWorldPositionFlag()}}},a._updateWorldRotationFlag=function(){if(!this._isContainDirtyFlags(152)){this._worldAssociatedChange(152);for(var t=this._entity._children,i=0,o=t.length;i<o;i++){var s;(s=t[i].transform)==null||s._updateWorldPositionAndRotationFlag()}}},a._updateWorldPositionAndRotationFlag=function(){if(!this._isContainDirtyFlags(156)){this._worldAssociatedChange(156);for(var t=this._entity._children,i=0,o=t.length;i<o;i++){var s;(s=t[i].transform)==null||s._updateWorldPositionAndRotationFlag()}}},a._updateWorldScaleFlag=function(){if(!this._isContainDirtyFlags(160)){this._worldAssociatedChange(160);for(var t=this._entity._children,i=0,o=t.length;i<o;i++){var s;(s=t[i].transform)==null||s._updateWorldPositionAndScaleFlag()}}},a._updateWorldPositionAndScaleFlag=function(){if(!this._isContainDirtyFlags(164)){this._worldAssociatedChange(164);for(var t=this._entity._children,i=0,o=t.length;i<o;i++){var s;(s=t[i].transform)==null||s._updateWorldPositionAndScaleFlag()}}},a._updateAllWorldFlag=function(){if(!this._isContainDirtyFlags(188)){this._worldAssociatedChange(188);for(var t=this._entity._children,i=0,o=t.length;i<o;i++){var s;(s=t[i].transform)==null||s._updateAllWorldFlag()}}},a._getParentTransform=function(){if(!this._isParentDirty)return this._parentTransformCache;for(var t=null,i=this._entity.parent;i;){var o=i.transform;if(o){t=o;break}else i=i.parent}return this._parentTransformCache=t,this._isParentDirty=!1,t},a._getScaleMatrix=function(){var t=r._tempQuat0,i=r._tempMat30,o=r._tempMat31,s=r._tempMat32;return o.copyFromMatrix(this.worldMatrix),Ut.invert(this.worldRotationQuaternion,t),ic.rotationQuaternion(t,i),ic.multiply(i,o,s),s},a._isContainDirtyFlags=function(t){return(this._dirtyFlag&t)===t},a._isContainDirtyFlag=function(t){return(this._dirtyFlag&t)!=0},a._setDirtyFlagTrue=function(t){this._dirtyFlag|=t},a._setDirtyFlagFalse=function(t){this._dirtyFlag&=~t},a._worldAssociatedChange=function(t){this._dirtyFlag|=t,this._updateFlagManager.dispatch(128)},a._rotateByQuat=function(t,i){i?Ut.multiply(this.rotationQuaternion,t,this._rotationQuaternion):Ut.multiply(t,this.worldRotationQuaternion,this._worldRotationQuaternion)},a._translate=function(t,i){if(i===void 0&&(i=!0),i){var o=r._tempVec30;z.transformByQuat(t,this.worldRotationQuaternion,o),this.worldPosition.add(o)}else this.worldPosition.add(t)},a._rotateXYZ=function(t,i,o,s){s===void 0&&(s=!0);var l=ve.degreeToRadFactor,u=r._tempQuat0;Ut.rotationEuler(t*l,i*l,o*l,u),this._rotateByQuat(u,s)},a._onPositionChanged=function(){this._setDirtyFlagTrue(64),this._updateWorldPositionFlag()},a._onWorldPositionChanged=function(){var t=this._worldPosition,i=this._getParentTransform();i?(Ge.invert(i.worldMatrix,r._tempMat41),z.transformCoordinate(t,r._tempMat41,this._position)):this._position.copyFrom(t),this._setDirtyFlagFalse(4)},a._onRotationChanged=function(){this._setDirtyFlagTrue(66),this._setDirtyFlagFalse(1),this._updateWorldRotationFlag()},a._onWorldRotationChanged=function(){var t=this._worldRotation;Ut.rotationEuler(ve.degreeToRadian(t.x),ve.degreeToRadian(t.y),ve.degreeToRadian(t.z),this._worldRotationQuaternion),this._setDirtyFlagFalse(8)},a._onRotationQuaternionChanged=function(){this._setDirtyFlagTrue(65),this._setDirtyFlagFalse(2),this._updateWorldRotationFlag()},a._onWorldRotationQuaternionChanged=function(){var t=this._worldRotationQuaternion,i=this._getParentTransform();if(i){var o=r._tempQuat0;Ut.invert(i.worldRotationQuaternion,o),Ut.multiply(o,t,this._rotationQuaternion)}else this._rotationQuaternion.copyFrom(t);this._setDirtyFlagFalse(16)},a._onScaleChanged=function(){this._setDirtyFlagTrue(64),this._updateWorldScaleFlag()},Ie(r,[{key:"position",get:function(){return this._position},set:function(t){this._position!==t&&this._position.copyFrom(t)}},{key:"worldPosition",get:function(){var t=this._worldPosition;return this._isContainDirtyFlag(4)&&(t._onValueChanged=null,this._getParentTransform()?this.worldMatrix.getTranslation(t):t.copyFrom(this._position),t._onValueChanged=this._onWorldPositionChanged,this._setDirtyFlagFalse(4)),t},set:function(t){this._worldPosition!==t&&this._worldPosition.copyFrom(t)}},{key:"rotation",get:function(){var t=this._rotation;return this._isContainDirtyFlag(1)&&(t._onValueChanged=null,this._rotationQuaternion.toEuler(t),t.scale(ve.radToDegreeFactor),t._onValueChanged=this._onRotationChanged,this._setDirtyFlagFalse(1)),t},set:function(t){this._rotation!==t&&this._rotation.copyFrom(t)}},{key:"worldRotation",get:function(){var t=this._worldRotation;return this._isContainDirtyFlag(8)&&(t._onValueChanged=null,this.worldRotationQuaternion.toEuler(t),t.scale(ve.radToDegreeFactor),t._onValueChanged=this._onWorldRotationChanged,this._setDirtyFlagFalse(8)),t},set:function(t){this._worldRotation!==t&&this._worldRotation.copyFrom(t)}},{key:"rotationQuaternion",get:function(){var t=this._rotationQuaternion;return this._isContainDirtyFlag(2)&&(t._onValueChanged=null,Ut.rotationEuler(ve.degreeToRadian(this._rotation.x),ve.degreeToRadian(this._rotation.y),ve.degreeToRadian(this._rotation.z),t),t._onValueChanged=this._onRotationQuaternionChanged,this._setDirtyFlagFalse(2)),t},set:function(t){this._rotationQuaternion!==t?t.normalized?this._rotationQuaternion.copyFrom(t):Ut.normalize(t,this._rotationQuaternion):t.normalized||t.normalize()}},{key:"worldRotationQuaternion",get:function(){var t=this._worldRotationQuaternion;if(this._isContainDirtyFlag(16)){t._onValueChanged=null;var i=this._getParentTransform();i!=null?Ut.multiply(i.worldRotationQuaternion,this.rotationQuaternion,t):t.copyFrom(this.rotationQuaternion),t._onValueChanged=this._onWorldRotationQuaternionChanged,this._setDirtyFlagFalse(16)}return t},set:function(t){this._worldRotationQuaternion!==t&&(t.normalized?this._worldRotationQuaternion.copyFrom(t):Ut.normalize(t,this._worldRotationQuaternion)),t.normalized||t.normalize()}},{key:"scale",get:function(){return this._scale},set:function(t){this._scale!==t&&this._scale.copyFrom(t)}},{key:"lossyWorldScale",get:function(){if(this._isContainDirtyFlag(32)){if(this._getParentTransform()){var t=this._getScaleMatrix(),i=t.elements;this._lossyWorldScale.set(i[0],i[4],i[8])}else this._lossyWorldScale.copyFrom(this._scale);this._setDirtyFlagFalse(32)}return this._lossyWorldScale}},{key:"localMatrix",get:function(){return this._isContainDirtyFlag(64)&&(Ge.affineTransformation(this._scale,this.rotationQuaternion,this._position,this._localMatrix),this._setDirtyFlagFalse(64)),this._localMatrix},set:function(t){this._localMatrix!==t&&this._localMatrix.copyFrom(t),this._position._onValueChanged=this._rotationQuaternion._onValueChanged=this._scale._onValueChanged=null,this._localMatrix.decompose(this._position,this._rotationQuaternion,this._scale),this._position._onValueChanged=this._onPositionChanged,this._rotationQuaternion._onValueChanged=this._onRotationQuaternionChanged,this._scale._onValueChanged=this._onScaleChanged,this._setDirtyFlagTrue(1),this._setDirtyFlagFalse(66),this._updateAllWorldFlag()}},{key:"worldMatrix",get:function(){if(this._isContainDirtyFlag(128)){var t=this._getParentTransform();t?Ge.multiply(t.worldMatrix,this.localMatrix,this._worldMatrix):this._worldMatrix.copyFrom(this.localMatrix),this._setDirtyFlagFalse(128)}return this._worldMatrix},set:function(t){this._worldMatrix!==t&&this._worldMatrix.copyFrom(t);var i=this._getParentTransform();i?(Ge.invert(i.worldMatrix,r._tempMat42),Ge.multiply(r._tempMat42,t,this._localMatrix)):this._localMatrix.copyFrom(t),this.localMatrix=this._localMatrix,this._setDirtyFlagFalse(128)}},{key:"worldForward",get:function(){var t=this._worldForward||(this._worldForward=new z),i=this.worldMatrix.elements;return t.set(-i[8],-i[9],-i[10]),t.normalize()}},{key:"worldRight",get:function(){var t=this._worldRight||(this._worldRight=new z),i=this.worldMatrix.elements;return t.set(i[0],i[1],i[2]),t.normalize()}},{key:"worldUp",get:function(){var t=this._worldUp||(this._worldUp=new z),i=this.worldMatrix.elements;return t.set(i[4],i[5],i[6]),t.normalize()}}]),r}(Zr);(function(){Vt._tempQuat0=new Ut})();(function(){Vt._tempVec30=new z})();(function(){Vt._tempVec31=new z})();(function(){Vt._tempVec32=new z})();(function(){Vt._tempMat30=new ic})();(function(){Vt._tempMat31=new ic})();(function(){Vt._tempMat32=new ic})();(function(){Vt._tempMat41=new Ge})();(function(){Vt._tempMat42=new Ge})();H([Xe],Vt.prototype,"_position",void 0);H([Xe],Vt.prototype,"_rotation",void 0);H([Xe],Vt.prototype,"_rotationQuaternion",void 0);H([Xe],Vt.prototype,"_scale",void 0);H([Xe],Vt.prototype,"_worldPosition",void 0);H([Xe],Vt.prototype,"_worldRotation",void 0);H([Xe],Vt.prototype,"_worldRotationQuaternion",void 0);H([Xe],Vt.prototype,"_lossyWorldScale",void 0);H([Xe],Vt.prototype,"_localMatrix",void 0);H([Xe],Vt.prototype,"_worldMatrix",void 0);H([te],Vt.prototype,"_worldForward",void 0);H([te],Vt.prototype,"_worldRight",void 0);H([te],Vt.prototype,"_worldUp",void 0);H([te],Vt.prototype,"_isParentDirty",void 0);H([te],Vt.prototype,"_parentTransformCache",void 0);H([te],Vt.prototype,"_updateFlagManager",void 0);H([te],Vt.prototype,"_onPositionChanged",null);H([te],Vt.prototype,"_onWorldPositionChanged",null);H([te],Vt.prototype,"_onRotationChanged",null);H([te],Vt.prototype,"_onWorldRotationChanged",null);H([te],Vt.prototype,"_onRotationQuaternionChanged",null);H([te],Vt.prototype,"_onWorldRotationQuaternionChanged",null);H([te],Vt.prototype,"_onScaleChanged",null);var Hb;(function(n){n[n.LocalEuler=1]="LocalEuler",n[n.LocalQuat=2]="LocalQuat",n[n.WorldPosition=4]="WorldPosition",n[n.WorldEuler=8]="WorldEuler",n[n.WorldQuat=16]="WorldQuat",n[n.WorldScale=32]="WorldScale",n[n.LocalMatrix=64]="LocalMatrix",n[n.WorldMatrix=128]="WorldMatrix",n[n.WmWp=132]="WmWp",n[n.WmWeWq=152]="WmWeWq",n[n.WmWpWeWq=156]="WmWpWeWq",n[n.WmWs=160]="WmWs",n[n.WmWpWs=164]="WmWpWs",n[n.WmWpWeWqWs=188]="WmWpWeWqWs"})(Hb||(Hb={}));var jt;(function(n){n[n.Zero=0]="Zero",n[n.One=1]="One",n[n.SourceColor=2]="SourceColor",n[n.OneMinusSourceColor=3]="OneMinusSourceColor",n[n.DestinationColor=4]="DestinationColor",n[n.OneMinusDestinationColor=5]="OneMinusDestinationColor",n[n.SourceAlpha=6]="SourceAlpha",n[n.OneMinusSourceAlpha=7]="OneMinusSourceAlpha",n[n.DestinationAlpha=8]="DestinationAlpha",n[n.OneMinusDestinationAlpha=9]="OneMinusDestinationAlpha",n[n.SourceAlphaSaturate=10]="SourceAlphaSaturate",n[n.BlendColor=11]="BlendColor",n[n.OneMinusBlendColor=12]="OneMinusBlendColor"})(jt||(jt={}));var Mr;(function(n){n[n.Add=0]="Add",n[n.Subtract=1]="Subtract",n[n.ReverseSubtract=2]="ReverseSubtract",n[n.Min=3]="Min",n[n.Max=4]="Max"})(Mr||(Mr={}));var Si;(function(n){n[n.None=0]="None",n[n.Red=1]="Red",n[n.Green=2]="Green",n[n.Blue=4]="Blue",n[n.Alpha=8]="Alpha",n[n.All=15]="All"})(Si||(Si={}));var Xt;(function(n){n[n.Never=0]="Never",n[n.Less=1]="Less",n[n.Equal=2]="Equal",n[n.LessEqual=3]="LessEqual",n[n.Greater=4]="Greater",n[n.NotEqual=5]="NotEqual",n[n.GreaterEqual=6]="GreaterEqual",n[n.Always=7]="Always"})(Xt||(Xt={}));var Fr;(function(n){n[n.Off=0]="Off",n[n.Front=1]="Front",n[n.Back=2]="Back"})(Fr||(Fr={}));var ut;(function(n){n[n.BlendStateEnabled0=0]="BlendStateEnabled0",n[n.BlendStateColorBlendOperation0=1]="BlendStateColorBlendOperation0",n[n.BlendStateAlphaBlendOperation0=2]="BlendStateAlphaBlendOperation0",n[n.BlendStateSourceColorBlendFactor0=3]="BlendStateSourceColorBlendFactor0",n[n.BlendStateSourceAlphaBlendFactor0=4]="BlendStateSourceAlphaBlendFactor0",n[n.BlendStateDestinationColorBlendFactor0=5]="BlendStateDestinationColorBlendFactor0",n[n.BlendStateDestinationAlphaBlendFactor0=6]="BlendStateDestinationAlphaBlendFactor0",n[n.BlendStateColorWriteMask0=7]="BlendStateColorWriteMask0",n[n.BlendStateBlendColor=8]="BlendStateBlendColor",n[n.BlendStateAlphaToCoverage=9]="BlendStateAlphaToCoverage",n[n.DepthStateEnabled=10]="DepthStateEnabled",n[n.DepthStateWriteEnabled=11]="DepthStateWriteEnabled",n[n.DepthStateCompareFunction=12]="DepthStateCompareFunction",n[n.StencilStateEnabled=13]="StencilStateEnabled",n[n.StencilStateReferenceValue=14]="StencilStateReferenceValue",n[n.StencilStateMask=15]="StencilStateMask",n[n.StencilStateWriteMask=16]="StencilStateWriteMask",n[n.StencilStateCompareFunctionFront=17]="StencilStateCompareFunctionFront",n[n.StencilStateCompareFunctionBack=18]="StencilStateCompareFunctionBack",n[n.StencilStatePassOperationFront=19]="StencilStatePassOperationFront",n[n.StencilStatePassOperationBack=20]="StencilStatePassOperationBack",n[n.StencilStateFailOperationFront=21]="StencilStateFailOperationFront",n[n.StencilStateFailOperationBack=22]="StencilStateFailOperationBack",n[n.StencilStateZFailOperationFront=23]="StencilStateZFailOperationFront",n[n.StencilStateZFailOperationBack=24]="StencilStateZFailOperationBack",n[n.RasterStateCullMode=25]="RasterStateCullMode",n[n.RasterStateDepthBias=26]="RasterStateDepthBias",n[n.RasterStateSlopeScaledDepthBias=27]="RasterStateSlopeScaledDepthBias",n[n.RenderQueueType=28]="RenderQueueType"})(ut||(ut={}));var ar;(function(n){n[n.Opaque=0]="Opaque",n[n.AlphaTest=1]="AlphaTest",n[n.Transparent=2]="Transparent"})(ar||(ar={}));var la;(function(n){n[n.Float=0]="Float",n[n.Int=1]="Int",n[n.Vector2=2]="Vector2",n[n.Vector3=3]="Vector3",n[n.Vector4=4]="Vector4",n[n.Matrix=5]="Matrix",n[n.Color=6]="Color",n[n.Texture=7]="Texture",n[n.FloatArray=8]="FloatArray",n[n.IntArray=9]="IntArray",n[n.TextureArray=10]="TextureArray"})(la||(la={}));var Tn;(function(n){n[n.Keep=0]="Keep",n[n.Zero=1]="Zero",n[n.Replace=2]="Replace",n[n.IncrementSaturate=3]="IncrementSaturate",n[n.DecrementSaturate=4]="DecrementSaturate",n[n.Invert=5]="Invert",n[n.IncrementWrap=6]="IncrementWrap",n[n.DecrementWrap=7]="DecrementWrap"})(Tn||(Tn={}));var _t=function(){function n(r,a,e,t){this.name=r,this._maskIndex=e,this._maskValue=t,this.value=a;var i=n._macroNameIdMap,o=i[r];i[r]===void 0&&(i[r]=o=n._macroNameCounter++),this._nameId=o}return n.getByName=function(a,e){var t=e?a+" "+e:a,i=n._macroMap[t];if(!i){var o=n._macroMaskMap,s=n._macroCounter,l=Math.floor(s/32),u=s%32;i=new n(a,e,l,1<<u),n._macroMap[t]=i,l==o.length&&(o.length++,o[l]=new Array(32)),o[l][u]=t,n._macroCounter++}return i},n._getNamesByMacros=function(a,e){var t=n._macroMaskMap,i=a._mask;e.length=0;for(var o=0,s=a._length;o<s;o++)for(var l=t[o],u=i[o],c=u<0?32:Math.floor(Math.log2(u))+1,f=0;f<c;f++)u&1<<f&&e.push(l[f])},n}();(function(){_t._macroMaskMap=[]})();(function(){_t._macroNameIdMap=Object.create(null)})();(function(){_t._macroNameCounter=0})();(function(){_t._macroCounter=0})();(function(){_t._macroMap=Object.create(null)})();var Ba=function(){function n(){this._mask=[],this._length=0}var r=n.prototype;return r.enable=function(e){var t=e._maskIndex,i=t+1,o=this._mask,s=this._length;if(s<i){for(o.length<i&&(o.length=i);s<t;s++)o[s]=0;o[t]=e._maskValue,this._length=i}else o[t]|=e._maskValue},r.disable=function(e){var t=e._maskIndex,i=this._mask,o=this._length-1;if(!(t>o)){var s=i[t]&~e._maskValue;t==o&&s===0?this._length--:i[t]=s}},r.unionCollection=function(e){var t=e._mask,i=e._length,o=this._mask,s=this._length;if(s<i){o.length<i&&(o.length=i);for(var l=0;l<s;l++)o[l]|=t[l];for(;l<i;l++)o[l]=t[l];this._length=i}else for(var u=0;u<i;u++)o[u]|=t[u]},r.complementaryCollection=function(e){for(var t=e._mask,i=this._mask,o=this._length-1,s=Math.min(e._length-1,o);s>=0;s--){var l=i[s]&~t[s];s==o&&l===0?(o--,this._length--):i[s]=l}},r.intersectionCollection=function(e){for(var t=e._mask,i=this._mask,o=this._length-1;o>=0;o--){var s=i[o]&t[o];s==0&&o==this._length-1?this._length--:i[o]=s}},r.isEnable=function(e){var t=e._maskIndex;return t>=this._length?!1:(this._mask[t]&e._maskValue)!==0},r.clear=function(){this._length=0},n.unionCollection=function(e,t,i){var o=i._mask,s,l,u,c;e._length<t._length?(s=e._length,l=t._length,u=e._mask,c=t._mask):(s=t._length,l=e._length,u=t._mask,c=e._mask);var f=0;for(o.length<l&&(o.length=l);f<s;f++)o[f]=u[f]|c[f];for(;f<l;f++)o[f]=c[f];i._length=l},n}(),da;(function(n){n.DepthOnly="DepthOnly",n.ShadowCaster="ShadowCaster",n.Forward="Forward"})(da||(da={}));function n0(){return n0=Object.assign||function(r){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}return r},n0.apply(this,arguments)}var Pz=`#define GLSLIFY 1
uniform vec3 camera_Position;uniform vec3 camera_Forward;uniform vec4 camera_ProjectionParams;`,Mz=`#define GLSLIFY 1
#define PI 3.14159265359
#define RECIPROCAL_PI 0.31830988618
#define EPSILON 1e-6
#define LOG2 1.442695
#define saturate( a ) clamp( a, 0.0, 1.0 )
float pow2(float x){return x*x;}vec4 RGBMToLinear(vec4 value,float maxRange){return vec4(value.rgb*value.a*maxRange,1.0);}vec4 gammaToLinear(vec4 srgbIn){return vec4(pow(srgbIn.rgb,vec3(2.2)),srgbIn.a);}vec4 linearToGamma(vec4 linearIn){return vec4(pow(linearIn.rgb,vec3(1.0/2.2)),linearIn.a);}uniform vec4 camera_DepthBufferParams;float remapDepthBufferLinear01(float z){return 1.0/(camera_DepthBufferParams.x*z+camera_DepthBufferParams.y);}
#ifdef GRAPHICS_API_WEBGL2
#define INVERSE_MAT(mat) inverse(mat)
#else
mat2 inverseMat(mat2 m){return mat2(m[1][1],-m[0][1],-m[1][0],m[0][0])/(m[0][0]*m[1][1]-m[0][1]*m[1][0]);}mat3 inverseMat(mat3 m){float a00=m[0][0],a01=m[0][1],a02=m[0][2];float a10=m[1][0],a11=m[1][1],a12=m[1][2];float a20=m[2][0],a21=m[2][1],a22=m[2][2];float b01=a22*a11-a12*a21;float b11=-a22*a10+a12*a20;float b21=a21*a10-a11*a20;float det=a00*b01+a01*b11+a02*b21;return mat3(b01,(-a22*a01+a02*a21),(a12*a01-a02*a11),b11,(a22*a00-a02*a20),(-a12*a00+a02*a10),b21,(-a21*a00+a01*a20),(a11*a00-a01*a10))/det;}mat4 inverseMat(mat4 m){float a00=m[0][0],a01=m[0][1],a02=m[0][2],a03=m[0][3],a10=m[1][0],a11=m[1][1],a12=m[1][2],a13=m[1][3],a20=m[2][0],a21=m[2][1],a22=m[2][2],a23=m[2][3],a30=m[3][0],a31=m[3][1],a32=m[3][2],a33=m[3][3],b00=a00*a11-a01*a10,b01=a00*a12-a02*a10,b02=a00*a13-a03*a10,b03=a01*a12-a02*a11,b04=a01*a13-a03*a11,b05=a02*a13-a03*a12,b06=a20*a31-a21*a30,b07=a20*a32-a22*a30,b08=a20*a33-a23*a30,b09=a21*a32-a22*a31,b10=a21*a33-a23*a31,b11=a22*a33-a23*a32,det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;return mat4(a11*b11-a12*b10+a13*b09,a02*b10-a01*b11-a03*b09,a31*b05-a32*b04+a33*b03,a22*b04-a21*b05-a23*b03,a12*b08-a10*b11-a13*b07,a00*b11-a02*b08+a03*b07,a32*b02-a30*b05-a33*b01,a20*b05-a22*b02+a23*b01,a10*b10-a11*b08+a13*b06,a01*b08-a00*b10-a03*b06,a30*b04-a31*b02+a33*b00,a21*b02-a20*b04-a23*b00,a11*b07-a10*b09-a12*b06,a00*b09-a01*b07+a02*b06,a31*b01-a30*b03-a32*b00,a20*b03-a21*b01+a22*b00)/det;}
#define INVERSE_MAT(mat) inverseMat(mat)
#endif
`,Oz=`#define GLSLIFY 1
attribute vec3 POSITION;
#ifdef RENDERER_HAS_UV
attribute vec2 TEXCOORD_0;
#endif
#ifdef RENDERER_HAS_UV1
attribute vec2 TEXCOORD_1;
#endif
#ifdef RENDERER_HAS_SKIN
attribute vec4 JOINTS_0;attribute vec4 WEIGHTS_0;
#ifdef RENDERER_USE_JOINT_TEXTURE
uniform sampler2D renderer_JointSampler;uniform float renderer_JointCount;mat4 getJointMatrix(sampler2D smp,float index){float base=index/renderer_JointCount;float hf=0.5/renderer_JointCount;float v=base+hf;vec4 m0=texture2D(smp,vec2(0.125,v));vec4 m1=texture2D(smp,vec2(0.375,v));vec4 m2=texture2D(smp,vec2(0.625,v));vec4 m3=texture2D(smp,vec2(0.875,v));return mat4(m0,m1,m2,m3);}
#else
uniform mat4 renderer_JointMatrix[RENDERER_JOINTS_NUM];
#endif
#endif
#ifdef RENDERER_ENABLE_VERTEXCOLOR
attribute vec4 COLOR_0;
#endif
#include <transform_declare>
#include <camera_declare>
uniform vec4 material_TilingOffset;
#ifndef MATERIAL_OMIT_NORMAL
#ifdef RENDERER_HAS_NORMAL
attribute vec3 NORMAL;
#endif
#ifdef RENDERER_HAS_TANGENT
attribute vec4 TANGENT;
#endif
#endif
`,Iz=`#define GLSLIFY 1
uniform mat4 renderer_LocalMat;uniform mat4 renderer_ModelMat;uniform mat4 camera_ViewMat;uniform mat4 camera_ProjMat;uniform mat4 renderer_MVMat;uniform mat4 renderer_MVPMat;uniform mat4 renderer_NormalMat;`,Lz=`#define GLSLIFY 1
#ifdef RENDERER_ENABLE_VERTEXCOLOR
varying vec4 v_color;
#endif
`,Nz=`#define GLSLIFY 1
#if SCENE_FOG_MODE != 0
varying vec3 v_positionVS;uniform vec4 scene_FogColor;uniform vec4 scene_FogParams;float ComputeFogIntensity(float fogDepth){
#if SCENE_FOG_MODE == 1
return clamp(fogDepth*scene_FogParams.x+scene_FogParams.y,0.0,1.0);
#elif SCENE_FOG_MODE == 2
return clamp(exp2(-fogDepth*scene_FogParams.z),0.0,1.0);
#elif SCENE_FOG_MODE == 3
float factor=fogDepth*scene_FogParams.w;return clamp(exp2(-factor*factor),0.0,1.0);
#endif
}
#endif
`,Fz=`#define GLSLIFY 1
#if SCENE_FOG_MODE != 0
varying vec3 v_positionVS;
#endif
`,Dz=`#define GLSLIFY 1
#ifndef MATERIAL_OMIT_NORMAL
#ifdef RENDERER_HAS_NORMAL
varying vec3 v_normal;
#if defined(RENDERER_HAS_TANGENT) && ( defined(MATERIAL_HAS_NORMALTEXTURE) || defined(MATERIAL_HAS_CLEAR_COAT_NORMAL_TEXTURE) || defined(MATERIAL_ENABLE_ANISOTROPY) )
varying mat3 v_TBN;
#endif
#endif
#endif
`,Bz=`#define GLSLIFY 1
varying vec2 v_uv;
#ifdef RENDERER_HAS_UV1
varying vec2 v_uv1;
#endif
`,kz=`#define GLSLIFY 1
#ifdef MATERIAL_NEED_WORLD_POS
varying vec3 v_pos;
#endif
`,Vz=`#define GLSLIFY 1
#ifndef MATERIAL_OMIT_NORMAL
#ifdef RENDERER_HAS_NORMAL
vec3 normal=vec3(NORMAL);
#endif
#ifdef RENDERER_HAS_TANGENT
vec4 tangent=vec4(TANGENT);
#endif
#endif
`,Uz=`#define GLSLIFY 1
vec4 position=vec4(POSITION,1.0);`,zz=`#define GLSLIFY 1
#ifdef RENDERER_HAS_BLENDSHAPE
#ifdef RENDERER_BLENDSHAPE_USE_TEXTURE
uniform mediump sampler2DArray renderer_BlendShapeTexture;uniform ivec3 renderer_BlendShapeTextureInfo;uniform float renderer_BlendShapeWeights[RENDERER_BLENDSHAPE_COUNT];
#else
attribute vec3 POSITION_BS0;attribute vec3 POSITION_BS1;
#if defined( RENDERER_BLENDSHAPE_HAS_NORMAL ) && defined( RENDERER_BLENDSHAPE_HAS_TANGENT )
attribute vec3 NORMAL_BS0;attribute vec3 NORMAL_BS1;attribute vec3 TANGENT_BS0;attribute vec3 TANGENT_BS1;uniform float renderer_BlendShapeWeights[2];
#else
#if defined( RENDERER_BLENDSHAPE_HAS_NORMAL ) || defined( RENDERER_BLENDSHAPE_HAS_TANGENT )
attribute vec3 POSITION_BS2;attribute vec3 POSITION_BS3;
#ifdef RENDERER_BLENDSHAPE_HAS_NORMAL
attribute vec3 NORMAL_BS0;attribute vec3 NORMAL_BS1;attribute vec3 NORMAL_BS2;attribute vec3 NORMAL_BS3;
#endif
#ifdef RENDERER_BLENDSHAPE_HAS_TANGENT
attribute vec3 TANGENT_BS0;attribute vec3 TANGENT_BS1;attribute vec3 TANGENT_BS2;attribute vec3 TANGENT_BS3;
#endif
uniform float renderer_BlendShapeWeights[4];
#else
attribute vec3 POSITION_BS2;attribute vec3 POSITION_BS3;attribute vec3 POSITION_BS4;attribute vec3 POSITION_BS5;attribute vec3 POSITION_BS6;attribute vec3 POSITION_BS7;uniform float renderer_BlendShapeWeights[8];
#endif
#endif
#endif
#ifdef RENDERER_BLENDSHAPE_USE_TEXTURE
vec3 getBlendShapeVertexElement(int blendShapeIndex,int vertexElementIndex){int y=vertexElementIndex/renderer_BlendShapeTextureInfo.y;int x=vertexElementIndex-y*renderer_BlendShapeTextureInfo.y;ivec3 uv=ivec3(x,y,blendShapeIndex);return texelFetch(renderer_BlendShapeTexture,uv,0).xyz;}
#endif
#endif
`,Gz=`#define GLSLIFY 1
#ifdef RENDERER_HAS_BLENDSHAPE
#ifdef RENDERER_BLENDSHAPE_USE_TEXTURE
int vertexOffset=gl_VertexID*renderer_BlendShapeTextureInfo.x;for(int i=0;i<RENDERER_BLENDSHAPE_COUNT;i++){int vertexElementOffset=vertexOffset;float weight=renderer_BlendShapeWeights[i];if(weight!=0.0){position.xyz+=getBlendShapeVertexElement(i,vertexElementOffset)*weight;
#ifndef MATERIAL_OMIT_NORMAL
#if defined( RENDERER_HAS_NORMAL ) && defined( RENDERER_BLENDSHAPE_HAS_NORMAL )
vertexElementOffset+=1;normal+=getBlendShapeVertexElement(i,vertexElementOffset)*weight;
#endif
#if defined( RENDERER_HAS_TANGENT ) && defined(RENDERER_BLENDSHAPE_HAS_TANGENT) && ( defined(MATERIAL_HAS_NORMALTEXTURE) || defined(MATERIAL_HAS_CLEAR_COAT_NORMAL_TEXTURE) )
vertexElementOffset+=1;tangent.xyz+=getBlendShapeVertexElement(i,vertexElementOffset)*weight;
#endif
#endif
}}
#else
position.xyz+=POSITION_BS0*renderer_BlendShapeWeights[0];position.xyz+=POSITION_BS1*renderer_BlendShapeWeights[1];
#if defined( RENDERER_BLENDSHAPE_HAS_NORMAL ) && defined( RENDERER_BLENDSHAPE_HAS_TANGENT )
#ifndef MATERIAL_OMIT_NORMAL
#ifdef RENDERER_HAS_NORMAL
normal+=NORMAL_BS0*renderer_BlendShapeWeights[0];normal+=NORMAL_BS1*renderer_BlendShapeWeights[1];
#endif
#if defined( RENDERER_HAS_TANGENT ) && ( defined(MATERIAL_HAS_NORMALTEXTURE) || defined(MATERIAL_HAS_CLEAR_COAT_NORMAL_TEXTURE) )
tangent.xyz+=TANGENT_BS0*renderer_BlendShapeWeights[0];tangent.xyz+=TANGENT_BS1*renderer_BlendShapeWeights[1];
#endif
#endif
#else
#if defined( RENDERER_BLENDSHAPE_HAS_NORMAL ) || defined( RENDERER_BLENDSHAPE_HAS_TANGENT )
#ifndef MATERIAL_OMIT_NORMAL
position.xyz+=POSITION_BS2*renderer_BlendShapeWeights[2];position.xyz+=POSITION_BS3*renderer_BlendShapeWeights[3];
#if defined( RENDERER_BLENDSHAPE_HAS_NORMAL ) && defined( RENDERER_HAS_NORMAL )
normal+=NORMAL_BS0*renderer_BlendShapeWeights[0];normal+=NORMAL_BS1*renderer_BlendShapeWeights[1];normal+=NORMAL_BS2*renderer_BlendShapeWeights[2];normal+=NORMAL_BS3*renderer_BlendShapeWeights[3];
#endif
#if defined(RENDERER_BLENDSHAPE_HAS_TANGENT) && defined( RENDERER_HAS_TANGENT ) && ( defined(MATERIAL_HAS_NORMALTEXTURE) || defined(MATERIAL_HAS_CLEAR_COAT_NORMAL_TEXTURE) )
tangent.xyz+=TANGENT_BS0*renderer_BlendShapeWeights[0];tangent.xyz+=TANGENT_BS1*renderer_BlendShapeWeights[1];tangent.xyz+=TANGENT_BS2*renderer_BlendShapeWeights[2];tangent.xyz+=TANGENT_BS3*renderer_BlendShapeWeights[3];
#endif
#endif
#else
position.xyz+=POSITION_BS2*renderer_BlendShapeWeights[2];position.xyz+=POSITION_BS3*renderer_BlendShapeWeights[3];position.xyz+=POSITION_BS4*renderer_BlendShapeWeights[4];position.xyz+=POSITION_BS5*renderer_BlendShapeWeights[5];position.xyz+=POSITION_BS6*renderer_BlendShapeWeights[6];position.xyz+=POSITION_BS7*renderer_BlendShapeWeights[7];
#endif
#endif
#endif
#endif
`,Hz=`#define GLSLIFY 1
#ifdef RENDERER_ENABLE_VERTEXCOLOR
v_color=COLOR_0;
#endif
`,jz=`#define GLSLIFY 1
#if SCENE_FOG_MODE != 0
vec4 positionVS=renderer_MVMat*position;v_positionVS=positionVS.xyz/positionVS.w;
#endif
`,Wz=`#define GLSLIFY 1
#ifndef MATERIAL_OMIT_NORMAL
#ifdef RENDERER_HAS_NORMAL
v_normal=normalize(mat3(renderer_NormalMat)*normal);
#if defined(RENDERER_HAS_TANGENT) && ( defined(MATERIAL_HAS_NORMALTEXTURE) || defined(MATERIAL_HAS_CLEAR_COAT_NORMAL_TEXTURE) || defined(MATERIAL_ENABLE_ANISOTROPY) )
vec3 tangentW=normalize(mat3(renderer_NormalMat)*tangent.xyz);vec3 bitangentW=cross(v_normal,tangentW)*tangent.w;v_TBN=mat3(tangentW,bitangentW,v_normal);
#endif
#endif
#endif
`,$z=`#define GLSLIFY 1
gl_Position=renderer_MVPMat*position;`,Xz=`#define GLSLIFY 1
#ifdef RENDERER_HAS_SKIN
#ifdef RENDERER_USE_JOINT_TEXTURE
mat4 skinMatrix=WEIGHTS_0.x*getJointMatrix(renderer_JointSampler,JOINTS_0.x)+WEIGHTS_0.y*getJointMatrix(renderer_JointSampler,JOINTS_0.y)+WEIGHTS_0.z*getJointMatrix(renderer_JointSampler,JOINTS_0.z)+WEIGHTS_0.w*getJointMatrix(renderer_JointSampler,JOINTS_0.w);
#else
mat4 skinMatrix=WEIGHTS_0.x*renderer_JointMatrix[int(JOINTS_0.x)]+WEIGHTS_0.y*renderer_JointMatrix[int(JOINTS_0.y)]+WEIGHTS_0.z*renderer_JointMatrix[int(JOINTS_0.z)]+WEIGHTS_0.w*renderer_JointMatrix[int(JOINTS_0.w)];
#endif
position=skinMatrix*position;
#if defined(RENDERER_HAS_NORMAL) && !defined(MATERIAL_OMIT_NORMAL)
mat3 skinNormalMatrix=INVERSE_MAT(mat3(skinMatrix));normal=normal*skinNormalMatrix;
#if defined(RENDERER_HAS_TANGENT) && ( defined(MATERIAL_HAS_NORMALTEXTURE) || defined(MATERIAL_HAS_CLEAR_COAT_NORMAL_TEXTURE) )
tangent.xyz=tangent.xyz*skinNormalMatrix;
#endif
#endif
#endif
`,Kz=`#define GLSLIFY 1
#ifdef RENDERER_HAS_UV
v_uv=TEXCOORD_0;
#else
v_uv=vec2(0.,0.);
#endif
#ifdef RENDERER_HAS_UV1
v_uv1=TEXCOORD_1;
#endif
#ifdef MATERIAL_NEED_TILING_OFFSET
v_uv=v_uv*material_TilingOffset.xy+material_TilingOffset.zw;
#endif
`,Yz=`#define GLSLIFY 1
#ifdef MATERIAL_NEED_WORLD_POS
vec4 temp_pos=renderer_ModelMat*position;v_pos=temp_pos.xyz/temp_pos.w;
#endif
`,Qz=`#define GLSLIFY 1
#if SCENE_FOG_MODE != 0
float fogIntensity=ComputeFogIntensity(length(v_positionVS));gl_FragColor.rgb=mix(scene_FogColor.rgb,gl_FragColor.rgb,fogIntensity);
#endif
`,qz=`#define GLSLIFY 1
#ifdef SCENE_DIRECT_LIGHT_COUNT
struct DirectLight{vec3 color;vec3 direction;};uniform ivec2 scene_DirectLightCullingMask[SCENE_DIRECT_LIGHT_COUNT];uniform vec3 scene_DirectLightColor[SCENE_DIRECT_LIGHT_COUNT];uniform vec3 scene_DirectLightDirection[SCENE_DIRECT_LIGHT_COUNT];
#endif
#ifdef SCENE_POINT_LIGHT_COUNT
struct PointLight{vec3 color;vec3 position;float distance;};uniform ivec2 scene_PointLightCullingMask[SCENE_POINT_LIGHT_COUNT];uniform vec3 scene_PointLightColor[SCENE_POINT_LIGHT_COUNT];uniform vec3 scene_PointLightPosition[SCENE_POINT_LIGHT_COUNT];uniform float scene_PointLightDistance[SCENE_POINT_LIGHT_COUNT];
#endif
#ifdef SCENE_SPOT_LIGHT_COUNT
struct SpotLight{vec3 color;vec3 position;vec3 direction;float distance;float angleCos;float penumbraCos;};uniform ivec2 scene_SpotLightCullingMask[SCENE_SPOT_LIGHT_COUNT];uniform vec3 scene_SpotLightColor[SCENE_SPOT_LIGHT_COUNT];uniform vec3 scene_SpotLightPosition[SCENE_SPOT_LIGHT_COUNT];uniform vec3 scene_SpotLightDirection[SCENE_SPOT_LIGHT_COUNT];uniform float scene_SpotLightDistance[SCENE_SPOT_LIGHT_COUNT];uniform float scene_SpotLightAngleCos[SCENE_SPOT_LIGHT_COUNT];uniform float scene_SpotLightPenumbraCos[SCENE_SPOT_LIGHT_COUNT];
#endif
struct EnvMapLight{vec3 diffuse;float mipMapLevel;float diffuseIntensity;float specularIntensity;};uniform EnvMapLight scene_EnvMapLight;uniform ivec4 renderer_Layer;
#ifdef SCENE_USE_SH
uniform vec3 scene_EnvSH[9];
#endif
#ifdef SCENE_USE_SPECULAR_ENV
uniform samplerCube scene_EnvSpecularSampler;
#endif
#ifndef GRAPHICS_API_WEBGL2
bool isBitSet(float value,float mask,float bitIndex){return mod(floor(value/pow(2.0,bitIndex)),2.0)==1.0&&mod(floor(mask/pow(2.0,bitIndex)),2.0)==1.0;}
#endif
bool isRendererCulledByLight(ivec2 rendererLayer,ivec2 lightCullingMask){
#ifdef GRAPHICS_API_WEBGL2
return!((rendererLayer.x&lightCullingMask.x)!=0||(rendererLayer.y&lightCullingMask.y)!=0);
#else
for(int i=0;i<16;i++){if(isBitSet(float(rendererLayer.x),float(lightCullingMask.x),float(i))||isBitSet(float(rendererLayer.y),float(lightCullingMask.y),float(i))){return false;}}return true;
#endif
}`,Jz=`#define GLSLIFY 1
uniform vec4 material_EmissiveColor;uniform vec4 material_BaseColor;uniform vec4 material_SpecularColor;uniform float material_Shininess;uniform float material_NormalIntensity;uniform float material_AlphaCutoff;
#ifdef MATERIAL_HAS_EMISSIVETEXTURE
uniform sampler2D material_EmissiveTexture;
#endif
#ifdef MATERIAL_HAS_BASETEXTURE
uniform sampler2D material_BaseTexture;
#endif
#ifdef MATERIAL_HAS_SPECULAR_TEXTURE
uniform sampler2D material_SpecularTexture;
#endif
#ifdef MATERIAL_HAS_NORMALTEXTURE
uniform sampler2D material_NormalTexture;
#endif
`,Zz=`#define GLSLIFY 1
vec4 ambient=vec4(0.0);vec4 emission=material_EmissiveColor;vec4 diffuse=material_BaseColor;vec4 specular=material_SpecularColor;
#ifdef MATERIAL_HAS_EMISSIVETEXTURE
vec4 emissiveTextureColor=texture2D(material_EmissiveTexture,v_uv);
#ifndef ENGINE_IS_COLORSPACE_GAMMA
emissiveTextureColor=gammaToLinear(emissiveTextureColor);
#endif
emission*=emissiveTextureColor;
#endif
#ifdef MATERIAL_HAS_BASETEXTURE
vec4 diffuseTextureColor=texture2D(material_BaseTexture,v_uv);
#ifndef ENGINE_IS_COLORSPACE_GAMMA
diffuseTextureColor=gammaToLinear(diffuseTextureColor);
#endif
diffuse*=diffuseTextureColor;
#endif
#ifdef RENDERER_ENABLE_VERTEXCOLOR
diffuse*=v_color;
#endif
#ifdef MATERIAL_HAS_SPECULAR_TEXTURE
vec4 specularTextureColor=texture2D(material_SpecularTexture,v_uv);
#ifndef ENGINE_IS_COLORSPACE_GAMMA
specularTextureColor=gammaToLinear(specularTextureColor);
#endif
specular*=specularTextureColor;
#endif
ambient=vec4(scene_EnvMapLight.diffuse*scene_EnvMapLight.diffuseIntensity,1.0)*diffuse;`,e5=`#define GLSLIFY 1
#ifdef CAMERA_ORTHOGRAPHIC
vec3 V=-camera_Forward;
#else
#ifdef MATERIAL_NEED_WORLD_POS
vec3 V=normalize(camera_Position-v_pos);
#endif
#endif
`,t5=`#define GLSLIFY 1
#ifdef MATERIAL_HAS_NORMALTEXTURE
mat3 tbn=getTBN(gl_FrontFacing);vec3 N=getNormalByNormalTexture(tbn,material_NormalTexture,material_NormalIntensity,v_uv,gl_FrontFacing);
#else
vec3 N=getNormal(gl_FrontFacing);
#endif
vec3 lightDiffuse=vec3(0.0,0.0,0.0);vec3 lightSpecular=vec3(0.0,0.0,0.0);float shadowAttenuation=1.0;
#ifdef SCENE_DIRECT_LIGHT_COUNT
shadowAttenuation=1.0;
#ifdef SCENE_IS_CALCULATE_SHADOWS
shadowAttenuation*=sampleShadowMap();
#endif
DirectLight directionalLight;for(int i=0;i<SCENE_DIRECT_LIGHT_COUNT;i++){if(!isRendererCulledByLight(renderer_Layer.xy,scene_DirectLightCullingMask[i])){directionalLight.color=scene_DirectLightColor[i];
#ifdef SCENE_IS_CALCULATE_SHADOWS
if(i==0){directionalLight.color*=shadowAttenuation;}
#endif
directionalLight.direction=scene_DirectLightDirection[i];float d=max(dot(N,-directionalLight.direction),0.0);lightDiffuse+=directionalLight.color*d;vec3 halfDir=normalize(V-directionalLight.direction);float s=pow(clamp(dot(N,halfDir),0.0,1.0),material_Shininess);lightSpecular+=directionalLight.color*s;}}
#endif
#ifdef SCENE_POINT_LIGHT_COUNT
PointLight pointLight;for(int i=0;i<SCENE_POINT_LIGHT_COUNT;i++){if(!isRendererCulledByLight(renderer_Layer.xy,scene_PointLightCullingMask[i])){pointLight.color=scene_PointLightColor[i];pointLight.position=scene_PointLightPosition[i];pointLight.distance=scene_PointLightDistance[i];vec3 direction=v_pos-pointLight.position;float dist=length(direction);direction/=dist;float decay=clamp(1.0-pow(dist/pointLight.distance,4.0),0.0,1.0);float d=max(dot(N,-direction),0.0)*decay;lightDiffuse+=pointLight.color*d;vec3 halfDir=normalize(V-direction);float s=pow(clamp(dot(N,halfDir),0.0,1.0),material_Shininess)*decay;lightSpecular+=pointLight.color*s;}}
#endif
#ifdef SCENE_SPOT_LIGHT_COUNT
SpotLight spotLight;for(int i=0;i<SCENE_SPOT_LIGHT_COUNT;i++){if(!isRendererCulledByLight(renderer_Layer.xy,scene_SpotLightCullingMask[i])){spotLight.color=scene_SpotLightColor[i];spotLight.position=scene_SpotLightPosition[i];spotLight.direction=scene_SpotLightDirection[i];spotLight.distance=scene_SpotLightDistance[i];spotLight.angleCos=scene_SpotLightAngleCos[i];spotLight.penumbraCos=scene_SpotLightPenumbraCos[i];vec3 direction=spotLight.position-v_pos;float lightDistance=length(direction);direction/=lightDistance;float angleCos=dot(direction,-spotLight.direction);float decay=clamp(1.0-pow(lightDistance/spotLight.distance,4.0),0.0,1.0);float spotEffect=smoothstep(spotLight.penumbraCos,spotLight.angleCos,angleCos);float decayTotal=decay*spotEffect;float d=max(dot(N,direction),0.0)*decayTotal;lightDiffuse+=spotLight.color*d;vec3 halfDir=normalize(V+direction);float s=pow(clamp(dot(N,halfDir),0.0,1.0),material_Shininess)*decayTotal;lightSpecular+=spotLight.color*s;}}
#endif
diffuse*=vec4(lightDiffuse,1.0);specular*=vec4(lightSpecular,1.0);
#ifdef MATERIAL_IS_ALPHA_CUTOFF
if(diffuse.a<material_AlphaCutoff){discard;}
#endif
`,n5=`#define GLSLIFY 1
#include <noise_cellular_2D>
#include <noise_cellular_3D>
#include <noise_cellular_2x2>
#include <noise_cellular_2x2x2>
`,r5=`#define GLSLIFY 1
vec2 cellular(vec2 P){vec2 Pi=mod289(floor(P));vec2 Pf=fract(P);vec3 oi=vec3(-1.0,0.0,1.0);vec3 of=vec3(-0.5,0.5,1.5);vec3 px=permute(Pi.x+oi);vec3 p=permute(px.x+Pi.y+oi);vec3 ox=fract(p*K)-Ko;vec3 oy=mod7(floor(p*K))*K-Ko;vec3 dx=Pf.x+0.5+jitter*ox;vec3 dy=Pf.y-of+jitter*oy;vec3 d1=dx*dx+dy*dy;p=permute(px.y+Pi.y+oi);ox=fract(p*K)-Ko;oy=mod7(floor(p*K))*K-Ko;dx=Pf.x-0.5+jitter*ox;dy=Pf.y-of+jitter*oy;vec3 d2=dx*dx+dy*dy;p=permute(px.z+Pi.y+oi);ox=fract(p*K)-Ko;oy=mod7(floor(p*K))*K-Ko;dx=Pf.x-1.5+jitter*ox;dy=Pf.y-of+jitter*oy;vec3 d3=dx*dx+dy*dy;vec3 d1a=min(d1,d2);d2=max(d1,d2);d2=min(d2,d3);d1=min(d1a,d2);d2=max(d1a,d2);d1.xy=(d1.x<d1.y)? d1.xy : d1.yx;d1.xz=(d1.x<d1.z)? d1.xz : d1.zx;d1.yz=min(d1.yz,d2.yz);d1.y=min(d1.y,d1.z);d1.y=min(d1.y,d2.x);return sqrt(d1.xy);}`,a5=`#define GLSLIFY 1
vec2 cellular2x2(vec2 P){vec2 Pi=mod289(floor(P));vec2 Pf=fract(P);vec4 Pfx=Pf.x+vec4(-0.5,-1.5,-0.5,-1.5);vec4 Pfy=Pf.y+vec4(-0.5,-0.5,-1.5,-1.5);vec4 p=permute(Pi.x+vec4(0.0,1.0,0.0,1.0));p=permute(p+Pi.y+vec4(0.0,0.0,1.0,1.0));vec4 ox=mod7(p)*K+Kd2;vec4 oy=mod7(floor(p*K))*K+Kd2;vec4 dx=Pfx+jitter1*ox;vec4 dy=Pfy+jitter1*oy;vec4 d=dx*dx+dy*dy;d.xy=(d.x<d.y)? d.xy : d.yx;d.xz=(d.x<d.z)? d.xz : d.zx;d.xw=(d.x<d.w)? d.xw : d.wx;d.y=min(d.y,d.z);d.y=min(d.y,d.w);return sqrt(d.xy);}`,i5=`#define GLSLIFY 1
vec2 cellular2x2x2(vec3 P){vec3 Pi=mod289(floor(P));vec3 Pf=fract(P);vec4 Pfx=Pf.x+vec4(0.0,-1.0,0.0,-1.0);vec4 Pfy=Pf.y+vec4(0.0,0.0,-1.0,-1.0);vec4 p=permute(Pi.x+vec4(0.0,1.0,0.0,1.0));p=permute(p+Pi.y+vec4(0.0,0.0,1.0,1.0));vec4 p1=permute(p+Pi.z);vec4 p2=permute(p+Pi.z+vec4(1.0));vec4 ox1=fract(p1*K)-Ko;vec4 oy1=mod7(floor(p1*K))*K-Ko;vec4 oz1=floor(p1*K2)*Kz-Kzo;vec4 ox2=fract(p2*K)-Ko;vec4 oy2=mod7(floor(p2*K))*K-Ko;vec4 oz2=floor(p2*K2)*Kz-Kzo;vec4 dx1=Pfx+jitter1*ox1;vec4 dy1=Pfy+jitter1*oy1;vec4 dz1=Pf.z+jitter1*oz1;vec4 dx2=Pfx+jitter1*ox2;vec4 dy2=Pfy+jitter1*oy2;vec4 dz2=Pf.z-1.0+jitter1*oz2;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;vec4 d=min(d1,d2);d2=max(d1,d2);d.xy=(d.x<d.y)? d.xy : d.yx;d.xz=(d.x<d.z)? d.xz : d.zx;d.xw=(d.x<d.w)? d.xw : d.wx;d.yzw=min(d.yzw,d2.yzw);d.y=min(d.y,d.z);d.y=min(d.y,d.w);d.y=min(d.y,d2.x);return sqrt(d.xy);}`,o5=`#define GLSLIFY 1
vec2 cellular(vec3 P){vec3 Pi=mod289(floor(P));vec3 Pf=fract(P)-0.5;vec3 Pfx=Pf.x+vec3(1.0,0.0,-1.0);vec3 Pfy=Pf.y+vec3(1.0,0.0,-1.0);vec3 Pfz=Pf.z+vec3(1.0,0.0,-1.0);vec3 p=permute(Pi.x+vec3(-1.0,0.0,1.0));vec3 p1=permute(p+Pi.y-1.0);vec3 p2=permute(p+Pi.y);vec3 p3=permute(p+Pi.y+1.0);vec3 p11=permute(p1+Pi.z-1.0);vec3 p12=permute(p1+Pi.z);vec3 p13=permute(p1+Pi.z+1.0);vec3 p21=permute(p2+Pi.z-1.0);vec3 p22=permute(p2+Pi.z);vec3 p23=permute(p2+Pi.z+1.0);vec3 p31=permute(p3+Pi.z-1.0);vec3 p32=permute(p3+Pi.z);vec3 p33=permute(p3+Pi.z+1.0);vec3 ox11=fract(p11*K)-Ko;vec3 oy11=mod7(floor(p11*K))*K-Ko;vec3 oz11=floor(p11*K2)*Kz-Kzo;vec3 ox12=fract(p12*K)-Ko;vec3 oy12=mod7(floor(p12*K))*K-Ko;vec3 oz12=floor(p12*K2)*Kz-Kzo;vec3 ox13=fract(p13*K)-Ko;vec3 oy13=mod7(floor(p13*K))*K-Ko;vec3 oz13=floor(p13*K2)*Kz-Kzo;vec3 ox21=fract(p21*K)-Ko;vec3 oy21=mod7(floor(p21*K))*K-Ko;vec3 oz21=floor(p21*K2)*Kz-Kzo;vec3 ox22=fract(p22*K)-Ko;vec3 oy22=mod7(floor(p22*K))*K-Ko;vec3 oz22=floor(p22*K2)*Kz-Kzo;vec3 ox23=fract(p23*K)-Ko;vec3 oy23=mod7(floor(p23*K))*K-Ko;vec3 oz23=floor(p23*K2)*Kz-Kzo;vec3 ox31=fract(p31*K)-Ko;vec3 oy31=mod7(floor(p31*K))*K-Ko;vec3 oz31=floor(p31*K2)*Kz-Kzo;vec3 ox32=fract(p32*K)-Ko;vec3 oy32=mod7(floor(p32*K))*K-Ko;vec3 oz32=floor(p32*K2)*Kz-Kzo;vec3 ox33=fract(p33*K)-Ko;vec3 oy33=mod7(floor(p33*K))*K-Ko;vec3 oz33=floor(p33*K2)*Kz-Kzo;vec3 dx11=Pfx+jitter*ox11;vec3 dy11=Pfy.x+jitter*oy11;vec3 dz11=Pfz.x+jitter*oz11;vec3 dx12=Pfx+jitter*ox12;vec3 dy12=Pfy.x+jitter*oy12;vec3 dz12=Pfz.y+jitter*oz12;vec3 dx13=Pfx+jitter*ox13;vec3 dy13=Pfy.x+jitter*oy13;vec3 dz13=Pfz.z+jitter*oz13;vec3 dx21=Pfx+jitter*ox21;vec3 dy21=Pfy.y+jitter*oy21;vec3 dz21=Pfz.x+jitter*oz21;vec3 dx22=Pfx+jitter*ox22;vec3 dy22=Pfy.y+jitter*oy22;vec3 dz22=Pfz.y+jitter*oz22;vec3 dx23=Pfx+jitter*ox23;vec3 dy23=Pfy.y+jitter*oy23;vec3 dz23=Pfz.z+jitter*oz23;vec3 dx31=Pfx+jitter*ox31;vec3 dy31=Pfy.z+jitter*oy31;vec3 dz31=Pfz.x+jitter*oz31;vec3 dx32=Pfx+jitter*ox32;vec3 dy32=Pfy.z+jitter*oy32;vec3 dz32=Pfz.y+jitter*oz32;vec3 dx33=Pfx+jitter*ox33;vec3 dy33=Pfy.z+jitter*oy33;vec3 dz33=Pfz.z+jitter*oz33;vec3 d11=dx11*dx11+dy11*dy11+dz11*dz11;vec3 d12=dx12*dx12+dy12*dy12+dz12*dz12;vec3 d13=dx13*dx13+dy13*dy13+dz13*dz13;vec3 d21=dx21*dx21+dy21*dy21+dz21*dz21;vec3 d22=dx22*dx22+dy22*dy22+dz22*dz22;vec3 d23=dx23*dx23+dy23*dy23+dz23*dz23;vec3 d31=dx31*dx31+dy31*dy31+dz31*dz31;vec3 d32=dx32*dx32+dy32*dy32+dz32*dz32;vec3 d33=dx33*dx33+dy33*dy33+dz33*dz33;vec3 d1a=min(d11,d12);d12=max(d11,d12);d11=min(d1a,d13);d13=max(d1a,d13);d12=min(d12,d13);vec3 d2a=min(d21,d22);d22=max(d21,d22);d21=min(d2a,d23);d23=max(d2a,d23);d22=min(d22,d23);vec3 d3a=min(d31,d32);d32=max(d31,d32);d31=min(d3a,d33);d33=max(d3a,d33);d32=min(d32,d33);vec3 da=min(d11,d21);d21=max(d11,d21);d11=min(da,d31);d31=max(da,d31);d11.xy=(d11.x<d11.y)? d11.xy : d11.yx;d11.xz=(d11.x<d11.z)? d11.xz : d11.zx;d12=min(d12,d21);d12=min(d12,d22);d12=min(d12,d31);d12=min(d12,d32);d11.yz=min(d11.yz,d12.xy);d11.y=min(d11.y,d12.z);d11.y=min(d11.y,d11.z);return sqrt(d11.xy);}`,s5=`#define GLSLIFY 1
vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec2 mod289(vec2 x){return x-floor(x*(1.0/289.0))*289.0;}float mod289(float x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod7(vec4 x){return x-floor(x*(1.0/7.0))*7.0;}vec3 mod7(vec3 x){return x-floor(x*(1.0/7.0))*7.0;}vec4 permute(vec4 x){return mod289((34.0*x+1.0)*x);}vec3 permute(vec3 x){return mod289((34.0*x+1.0)*x);}float permute(float x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float taylorInvSqrt(float r){return 1.79284291400159-0.85373472095314*r;}vec4 fade(vec4 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}vec2 fade(vec2 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}
#define K 0.142857142857
#define Ko 0.428571428571
#define K2 0.020408163265306
#define Kd2 0.0714285714285
#define Kz 0.166666666667
#define Kzo 0.416666666667
#define jitter 1.0
#define jitter1 0.8
`,l5=`#define GLSLIFY 1
#include <noise_perlin_2D>
#include <noise_perlin_3D>
#include <noise_perlin_4D>
`,u5=`#define GLSLIFY 1
float perlin(vec2 P){vec4 Pi=floor(P.xyxy)+vec4(0.0,0.0,1.0,1.0);vec4 Pf=fract(P.xyxy)-vec4(0.0,0.0,1.0,1.0);Pi=mod289(Pi);vec4 ix=Pi.xzxz;vec4 iy=Pi.yyww;vec4 fx=Pf.xzxz;vec4 fy=Pf.yyww;vec4 i=permute(permute(ix)+iy);vec4 gx=fract(i*(1.0/41.0))*2.0-1.0;vec4 gy=abs(gx)-0.5;vec4 tx=floor(gx+0.5);gx=gx-tx;vec2 g00=vec2(gx.x,gy.x);vec2 g10=vec2(gx.y,gy.y);vec2 g01=vec2(gx.z,gy.z);vec2 g11=vec2(gx.w,gy.w);vec4 norm=taylorInvSqrt(vec4(dot(g00,g00),dot(g01,g01),dot(g10,g10),dot(g11,g11)));g00*=norm.x;g01*=norm.y;g10*=norm.z;g11*=norm.w;float n00=dot(g00,vec2(fx.x,fy.x));float n10=dot(g10,vec2(fx.y,fy.y));float n01=dot(g01,vec2(fx.z,fy.z));float n11=dot(g11,vec2(fx.w,fy.w));vec2 fade_xy=fade(Pf.xy);vec2 n_x=mix(vec2(n00,n01),vec2(n10,n11),fade_xy.x);float n_xy=mix(n_x.x,n_x.y,fade_xy.y);return 2.3*n_xy;}float perlin(vec2 P,vec2 rep){vec4 Pi=floor(P.xyxy)+vec4(0.0,0.0,1.0,1.0);vec4 Pf=fract(P.xyxy)-vec4(0.0,0.0,1.0,1.0);Pi=mod(Pi,rep.xyxy);Pi=mod289(Pi);vec4 ix=Pi.xzxz;vec4 iy=Pi.yyww;vec4 fx=Pf.xzxz;vec4 fy=Pf.yyww;vec4 i=permute(permute(ix)+iy);vec4 gx=fract(i*(1.0/41.0))*2.0-1.0;vec4 gy=abs(gx)-0.5;vec4 tx=floor(gx+0.5);gx=gx-tx;vec2 g00=vec2(gx.x,gy.x);vec2 g10=vec2(gx.y,gy.y);vec2 g01=vec2(gx.z,gy.z);vec2 g11=vec2(gx.w,gy.w);vec4 norm=taylorInvSqrt(vec4(dot(g00,g00),dot(g01,g01),dot(g10,g10),dot(g11,g11)));g00*=norm.x;g01*=norm.y;g10*=norm.z;g11*=norm.w;float n00=dot(g00,vec2(fx.x,fy.x));float n10=dot(g10,vec2(fx.y,fy.y));float n01=dot(g01,vec2(fx.z,fy.z));float n11=dot(g11,vec2(fx.w,fy.w));vec2 fade_xy=fade(Pf.xy);vec2 n_x=mix(vec2(n00,n01),vec2(n10,n11),fade_xy.x);float n_xy=mix(n_x.x,n_x.y,fade_xy.y);return 2.3*n_xy;}`,c5=`#define GLSLIFY 1
float perlin(vec3 P){vec3 Pi0=floor(P);vec3 Pi1=Pi0+vec3(1.0);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}float perlin(vec3 P,vec3 rep){vec3 Pi0=mod(floor(P),rep);vec3 Pi1=mod(Pi0+vec3(1.0),rep);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}`,f5=`#define GLSLIFY 1
float perlin(vec4 P){vec4 Pi0=floor(P);vec4 Pi1=Pi0+1.0;Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec4 Pf0=fract(P);vec4 Pf1=Pf0-1.0;vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=vec4(Pi0.zzzz);vec4 iz1=vec4(Pi1.zzzz);vec4 iw0=vec4(Pi0.wwww);vec4 iw1=vec4(Pi1.wwww);vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 ixy00=permute(ixy0+iw0);vec4 ixy01=permute(ixy0+iw1);vec4 ixy10=permute(ixy1+iw0);vec4 ixy11=permute(ixy1+iw1);vec4 gx00=ixy00*(1.0/7.0);vec4 gy00=floor(gx00)*(1.0/7.0);vec4 gz00=floor(gy00)*(1.0/6.0);gx00=fract(gx00)-0.5;gy00=fract(gy00)-0.5;gz00=fract(gz00)-0.5;vec4 gw00=vec4(0.75)-abs(gx00)-abs(gy00)-abs(gz00);vec4 sw00=step(gw00,vec4(0.0));gx00-=sw00*(step(0.0,gx00)-0.5);gy00-=sw00*(step(0.0,gy00)-0.5);vec4 gx01=ixy01*(1.0/7.0);vec4 gy01=floor(gx01)*(1.0/7.0);vec4 gz01=floor(gy01)*(1.0/6.0);gx01=fract(gx01)-0.5;gy01=fract(gy01)-0.5;gz01=fract(gz01)-0.5;vec4 gw01=vec4(0.75)-abs(gx01)-abs(gy01)-abs(gz01);vec4 sw01=step(gw01,vec4(0.0));gx01-=sw01*(step(0.0,gx01)-0.5);gy01-=sw01*(step(0.0,gy01)-0.5);vec4 gx10=ixy10*(1.0/7.0);vec4 gy10=floor(gx10)*(1.0/7.0);vec4 gz10=floor(gy10)*(1.0/6.0);gx10=fract(gx10)-0.5;gy10=fract(gy10)-0.5;gz10=fract(gz10)-0.5;vec4 gw10=vec4(0.75)-abs(gx10)-abs(gy10)-abs(gz10);vec4 sw10=step(gw10,vec4(0.0));gx10-=sw10*(step(0.0,gx10)-0.5);gy10-=sw10*(step(0.0,gy10)-0.5);vec4 gx11=ixy11*(1.0/7.0);vec4 gy11=floor(gx11)*(1.0/7.0);vec4 gz11=floor(gy11)*(1.0/6.0);gx11=fract(gx11)-0.5;gy11=fract(gy11)-0.5;gz11=fract(gz11)-0.5;vec4 gw11=vec4(0.75)-abs(gx11)-abs(gy11)-abs(gz11);vec4 sw11=step(gw11,vec4(0.0));gx11-=sw11*(step(0.0,gx11)-0.5);gy11-=sw11*(step(0.0,gy11)-0.5);vec4 g0000=vec4(gx00.x,gy00.x,gz00.x,gw00.x);vec4 g1000=vec4(gx00.y,gy00.y,gz00.y,gw00.y);vec4 g0100=vec4(gx00.z,gy00.z,gz00.z,gw00.z);vec4 g1100=vec4(gx00.w,gy00.w,gz00.w,gw00.w);vec4 g0010=vec4(gx10.x,gy10.x,gz10.x,gw10.x);vec4 g1010=vec4(gx10.y,gy10.y,gz10.y,gw10.y);vec4 g0110=vec4(gx10.z,gy10.z,gz10.z,gw10.z);vec4 g1110=vec4(gx10.w,gy10.w,gz10.w,gw10.w);vec4 g0001=vec4(gx01.x,gy01.x,gz01.x,gw01.x);vec4 g1001=vec4(gx01.y,gy01.y,gz01.y,gw01.y);vec4 g0101=vec4(gx01.z,gy01.z,gz01.z,gw01.z);vec4 g1101=vec4(gx01.w,gy01.w,gz01.w,gw01.w);vec4 g0011=vec4(gx11.x,gy11.x,gz11.x,gw11.x);vec4 g1011=vec4(gx11.y,gy11.y,gz11.y,gw11.y);vec4 g0111=vec4(gx11.z,gy11.z,gz11.z,gw11.z);vec4 g1111=vec4(gx11.w,gy11.w,gz11.w,gw11.w);vec4 norm00=taylorInvSqrt(vec4(dot(g0000,g0000),dot(g0100,g0100),dot(g1000,g1000),dot(g1100,g1100)));g0000*=norm00.x;g0100*=norm00.y;g1000*=norm00.z;g1100*=norm00.w;vec4 norm01=taylorInvSqrt(vec4(dot(g0001,g0001),dot(g0101,g0101),dot(g1001,g1001),dot(g1101,g1101)));g0001*=norm01.x;g0101*=norm01.y;g1001*=norm01.z;g1101*=norm01.w;vec4 norm10=taylorInvSqrt(vec4(dot(g0010,g0010),dot(g0110,g0110),dot(g1010,g1010),dot(g1110,g1110)));g0010*=norm10.x;g0110*=norm10.y;g1010*=norm10.z;g1110*=norm10.w;vec4 norm11=taylorInvSqrt(vec4(dot(g0011,g0011),dot(g0111,g0111),dot(g1011,g1011),dot(g1111,g1111)));g0011*=norm11.x;g0111*=norm11.y;g1011*=norm11.z;g1111*=norm11.w;float n0000=dot(g0000,Pf0);float n1000=dot(g1000,vec4(Pf1.x,Pf0.yzw));float n0100=dot(g0100,vec4(Pf0.x,Pf1.y,Pf0.zw));float n1100=dot(g1100,vec4(Pf1.xy,Pf0.zw));float n0010=dot(g0010,vec4(Pf0.xy,Pf1.z,Pf0.w));float n1010=dot(g1010,vec4(Pf1.x,Pf0.y,Pf1.z,Pf0.w));float n0110=dot(g0110,vec4(Pf0.x,Pf1.yz,Pf0.w));float n1110=dot(g1110,vec4(Pf1.xyz,Pf0.w));float n0001=dot(g0001,vec4(Pf0.xyz,Pf1.w));float n1001=dot(g1001,vec4(Pf1.x,Pf0.yz,Pf1.w));float n0101=dot(g0101,vec4(Pf0.x,Pf1.y,Pf0.z,Pf1.w));float n1101=dot(g1101,vec4(Pf1.xy,Pf0.z,Pf1.w));float n0011=dot(g0011,vec4(Pf0.xy,Pf1.zw));float n1011=dot(g1011,vec4(Pf1.x,Pf0.y,Pf1.zw));float n0111=dot(g0111,vec4(Pf0.x,Pf1.yzw));float n1111=dot(g1111,Pf1);vec4 fade_xyzw=fade(Pf0);vec4 n_0w=mix(vec4(n0000,n1000,n0100,n1100),vec4(n0001,n1001,n0101,n1101),fade_xyzw.w);vec4 n_1w=mix(vec4(n0010,n1010,n0110,n1110),vec4(n0011,n1011,n0111,n1111),fade_xyzw.w);vec4 n_zw=mix(n_0w,n_1w,fade_xyzw.z);vec2 n_yzw=mix(n_zw.xy,n_zw.zw,fade_xyzw.y);float n_xyzw=mix(n_yzw.x,n_yzw.y,fade_xyzw.x);return 2.2*n_xyzw;}float perlin(vec4 P,vec4 rep){vec4 Pi0=mod(floor(P),rep);vec4 Pi1=mod(Pi0+1.0,rep);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec4 Pf0=fract(P);vec4 Pf1=Pf0-1.0;vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=vec4(Pi0.zzzz);vec4 iz1=vec4(Pi1.zzzz);vec4 iw0=vec4(Pi0.wwww);vec4 iw1=vec4(Pi1.wwww);vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 ixy00=permute(ixy0+iw0);vec4 ixy01=permute(ixy0+iw1);vec4 ixy10=permute(ixy1+iw0);vec4 ixy11=permute(ixy1+iw1);vec4 gx00=ixy00*(1.0/7.0);vec4 gy00=floor(gx00)*(1.0/7.0);vec4 gz00=floor(gy00)*(1.0/6.0);gx00=fract(gx00)-0.5;gy00=fract(gy00)-0.5;gz00=fract(gz00)-0.5;vec4 gw00=vec4(0.75)-abs(gx00)-abs(gy00)-abs(gz00);vec4 sw00=step(gw00,vec4(0.0));gx00-=sw00*(step(0.0,gx00)-0.5);gy00-=sw00*(step(0.0,gy00)-0.5);vec4 gx01=ixy01*(1.0/7.0);vec4 gy01=floor(gx01)*(1.0/7.0);vec4 gz01=floor(gy01)*(1.0/6.0);gx01=fract(gx01)-0.5;gy01=fract(gy01)-0.5;gz01=fract(gz01)-0.5;vec4 gw01=vec4(0.75)-abs(gx01)-abs(gy01)-abs(gz01);vec4 sw01=step(gw01,vec4(0.0));gx01-=sw01*(step(0.0,gx01)-0.5);gy01-=sw01*(step(0.0,gy01)-0.5);vec4 gx10=ixy10*(1.0/7.0);vec4 gy10=floor(gx10)*(1.0/7.0);vec4 gz10=floor(gy10)*(1.0/6.0);gx10=fract(gx10)-0.5;gy10=fract(gy10)-0.5;gz10=fract(gz10)-0.5;vec4 gw10=vec4(0.75)-abs(gx10)-abs(gy10)-abs(gz10);vec4 sw10=step(gw10,vec4(0.0));gx10-=sw10*(step(0.0,gx10)-0.5);gy10-=sw10*(step(0.0,gy10)-0.5);vec4 gx11=ixy11*(1.0/7.0);vec4 gy11=floor(gx11)*(1.0/7.0);vec4 gz11=floor(gy11)*(1.0/6.0);gx11=fract(gx11)-0.5;gy11=fract(gy11)-0.5;gz11=fract(gz11)-0.5;vec4 gw11=vec4(0.75)-abs(gx11)-abs(gy11)-abs(gz11);vec4 sw11=step(gw11,vec4(0.0));gx11-=sw11*(step(0.0,gx11)-0.5);gy11-=sw11*(step(0.0,gy11)-0.5);vec4 g0000=vec4(gx00.x,gy00.x,gz00.x,gw00.x);vec4 g1000=vec4(gx00.y,gy00.y,gz00.y,gw00.y);vec4 g0100=vec4(gx00.z,gy00.z,gz00.z,gw00.z);vec4 g1100=vec4(gx00.w,gy00.w,gz00.w,gw00.w);vec4 g0010=vec4(gx10.x,gy10.x,gz10.x,gw10.x);vec4 g1010=vec4(gx10.y,gy10.y,gz10.y,gw10.y);vec4 g0110=vec4(gx10.z,gy10.z,gz10.z,gw10.z);vec4 g1110=vec4(gx10.w,gy10.w,gz10.w,gw10.w);vec4 g0001=vec4(gx01.x,gy01.x,gz01.x,gw01.x);vec4 g1001=vec4(gx01.y,gy01.y,gz01.y,gw01.y);vec4 g0101=vec4(gx01.z,gy01.z,gz01.z,gw01.z);vec4 g1101=vec4(gx01.w,gy01.w,gz01.w,gw01.w);vec4 g0011=vec4(gx11.x,gy11.x,gz11.x,gw11.x);vec4 g1011=vec4(gx11.y,gy11.y,gz11.y,gw11.y);vec4 g0111=vec4(gx11.z,gy11.z,gz11.z,gw11.z);vec4 g1111=vec4(gx11.w,gy11.w,gz11.w,gw11.w);vec4 norm00=taylorInvSqrt(vec4(dot(g0000,g0000),dot(g0100,g0100),dot(g1000,g1000),dot(g1100,g1100)));g0000*=norm00.x;g0100*=norm00.y;g1000*=norm00.z;g1100*=norm00.w;vec4 norm01=taylorInvSqrt(vec4(dot(g0001,g0001),dot(g0101,g0101),dot(g1001,g1001),dot(g1101,g1101)));g0001*=norm01.x;g0101*=norm01.y;g1001*=norm01.z;g1101*=norm01.w;vec4 norm10=taylorInvSqrt(vec4(dot(g0010,g0010),dot(g0110,g0110),dot(g1010,g1010),dot(g1110,g1110)));g0010*=norm10.x;g0110*=norm10.y;g1010*=norm10.z;g1110*=norm10.w;vec4 norm11=taylorInvSqrt(vec4(dot(g0011,g0011),dot(g0111,g0111),dot(g1011,g1011),dot(g1111,g1111)));g0011*=norm11.x;g0111*=norm11.y;g1011*=norm11.z;g1111*=norm11.w;float n0000=dot(g0000,Pf0);float n1000=dot(g1000,vec4(Pf1.x,Pf0.yzw));float n0100=dot(g0100,vec4(Pf0.x,Pf1.y,Pf0.zw));float n1100=dot(g1100,vec4(Pf1.xy,Pf0.zw));float n0010=dot(g0010,vec4(Pf0.xy,Pf1.z,Pf0.w));float n1010=dot(g1010,vec4(Pf1.x,Pf0.y,Pf1.z,Pf0.w));float n0110=dot(g0110,vec4(Pf0.x,Pf1.yz,Pf0.w));float n1110=dot(g1110,vec4(Pf1.xyz,Pf0.w));float n0001=dot(g0001,vec4(Pf0.xyz,Pf1.w));float n1001=dot(g1001,vec4(Pf1.x,Pf0.yz,Pf1.w));float n0101=dot(g0101,vec4(Pf0.x,Pf1.y,Pf0.z,Pf1.w));float n1101=dot(g1101,vec4(Pf1.xy,Pf0.z,Pf1.w));float n0011=dot(g0011,vec4(Pf0.xy,Pf1.zw));float n1011=dot(g1011,vec4(Pf1.x,Pf0.y,Pf1.zw));float n0111=dot(g0111,vec4(Pf0.x,Pf1.yzw));float n1111=dot(g1111,Pf1);vec4 fade_xyzw=fade(Pf0);vec4 n_0w=mix(vec4(n0000,n1000,n0100,n1100),vec4(n0001,n1001,n0101,n1101),fade_xyzw.w);vec4 n_1w=mix(vec4(n0010,n1010,n0110,n1110),vec4(n0011,n1011,n0111,n1111),fade_xyzw.w);vec4 n_zw=mix(n_0w,n_1w,fade_xyzw.z);vec2 n_yzw=mix(n_zw.xy,n_zw.zw,fade_xyzw.y);float n_xyzw=mix(n_yzw.x,n_yzw.y,fade_xyzw.x);return 2.2*n_xyzw;}`,d5=`#define GLSLIFY 1
vec2 rgrad2(vec2 p,float rot){float u=permute(permute(p.x)+p.y)*0.0243902439+rot;u=fract(u)*6.28318530718;return vec2(cos(u),sin(u));}vec3 psrdnoise(vec2 pos,vec2 per,float rot){pos.y+=0.01;vec2 uv=vec2(pos.x+pos.y*0.5,pos.y);vec2 i0=floor(uv);vec2 f0=fract(uv);vec2 i1=(f0.x>f0.y)? vec2(1.0,0.0): vec2(0.0,1.0);vec2 p0=vec2(i0.x-i0.y*0.5,i0.y);vec2 p1=vec2(p0.x+i1.x-i1.y*0.5,p0.y+i1.y);vec2 p2=vec2(p0.x+0.5,p0.y+1.0);i1=i0+i1;vec2 i2=i0+vec2(1.0,1.0);vec2 d0=pos-p0;vec2 d1=pos-p1;vec2 d2=pos-p2;vec3 xw=mod(vec3(p0.x,p1.x,p2.x),per.x);vec3 yw=mod(vec3(p0.y,p1.y,p2.y),per.y);vec3 iuw=xw+0.5*yw;vec3 ivw=yw;vec2 g0=rgrad2(vec2(iuw.x,ivw.x),rot);vec2 g1=rgrad2(vec2(iuw.y,ivw.y),rot);vec2 g2=rgrad2(vec2(iuw.z,ivw.z),rot);vec3 w=vec3(dot(g0,d0),dot(g1,d1),dot(g2,d2));vec3 t=0.8-vec3(dot(d0,d0),dot(d1,d1),dot(d2,d2));vec3 dtdx=-2.0*vec3(d0.x,d1.x,d2.x);vec3 dtdy=-2.0*vec3(d0.y,d1.y,d2.y);if(t.x<0.0){dtdx.x=0.0;dtdy.x=0.0;t.x=0.0;}if(t.y<0.0){dtdx.y=0.0;dtdy.y=0.0;t.y=0.0;}if(t.z<0.0){dtdx.z=0.0;dtdy.z=0.0;t.z=0.0;}vec3 t2=t*t;vec3 t4=t2*t2;vec3 t3=t2*t;float n=dot(t4,w);vec2 dt0=vec2(dtdx.x,dtdy.x)*4.0*t3.x;vec2 dn0=t4.x*g0+dt0*w.x;vec2 dt1=vec2(dtdx.y,dtdy.y)*4.0*t3.y;vec2 dn1=t4.y*g1+dt1*w.y;vec2 dt2=vec2(dtdx.z,dtdy.z)*4.0*t3.z;vec2 dn2=t4.z*g2+dt2*w.z;return 11.0*vec3(n,dn0+dn1+dn2);}vec3 psdnoise(vec2 pos,vec2 per){return psrdnoise(pos,per,0.0);}float psrnoise(vec2 pos,vec2 per,float rot){pos.y+=0.001;vec2 uv=vec2(pos.x+pos.y*0.5,pos.y);vec2 i0=floor(uv);vec2 f0=fract(uv);vec2 i1=(f0.x>f0.y)? vec2(1.0,0.0): vec2(0.0,1.0);vec2 p0=vec2(i0.x-i0.y*0.5,i0.y);vec2 p1=vec2(p0.x+i1.x-i1.y*0.5,p0.y+i1.y);vec2 p2=vec2(p0.x+0.5,p0.y+1.0);i1=i0+i1;vec2 i2=i0+vec2(1.0,1.0);vec2 d0=pos-p0;vec2 d1=pos-p1;vec2 d2=pos-p2;vec3 xw=mod(vec3(p0.x,p1.x,p2.x),per.x);vec3 yw=mod(vec3(p0.y,p1.y,p2.y),per.y);vec3 iuw=xw+0.5*yw;vec3 ivw=yw;vec2 g0=rgrad2(vec2(iuw.x,ivw.x),rot);vec2 g1=rgrad2(vec2(iuw.y,ivw.y),rot);vec2 g2=rgrad2(vec2(iuw.z,ivw.z),rot);vec3 w=vec3(dot(g0,d0),dot(g1,d1),dot(g2,d2));vec3 t=0.8-vec3(dot(d0,d0),dot(d1,d1),dot(d2,d2));t=max(t,0.0);vec3 t2=t*t;vec3 t4=t2*t2;float n=dot(t4,w);return 11.0*n;}float psnoise(vec2 pos,vec2 per){return psrnoise(pos,per,0.0);}vec3 srdnoise(vec2 pos,float rot){pos.y+=0.001;vec2 uv=vec2(pos.x+pos.y*0.5,pos.y);vec2 i0=floor(uv);vec2 f0=fract(uv);vec2 i1=(f0.x>f0.y)? vec2(1.0,0.0): vec2(0.0,1.0);vec2 p0=vec2(i0.x-i0.y*0.5,i0.y);vec2 p1=vec2(p0.x+i1.x-i1.y*0.5,p0.y+i1.y);vec2 p2=vec2(p0.x+0.5,p0.y+1.0);i1=i0+i1;vec2 i2=i0+vec2(1.0,1.0);vec2 d0=pos-p0;vec2 d1=pos-p1;vec2 d2=pos-p2;vec3 x=vec3(p0.x,p1.x,p2.x);vec3 y=vec3(p0.y,p1.y,p2.y);vec3 iuw=x+0.5*y;vec3 ivw=y;iuw=mod289(iuw);ivw=mod289(ivw);vec2 g0=rgrad2(vec2(iuw.x,ivw.x),rot);vec2 g1=rgrad2(vec2(iuw.y,ivw.y),rot);vec2 g2=rgrad2(vec2(iuw.z,ivw.z),rot);vec3 w=vec3(dot(g0,d0),dot(g1,d1),dot(g2,d2));vec3 t=0.8-vec3(dot(d0,d0),dot(d1,d1),dot(d2,d2));vec3 dtdx=-2.0*vec3(d0.x,d1.x,d2.x);vec3 dtdy=-2.0*vec3(d0.y,d1.y,d2.y);if(t.x<0.0){dtdx.x=0.0;dtdy.x=0.0;t.x=0.0;}if(t.y<0.0){dtdx.y=0.0;dtdy.y=0.0;t.y=0.0;}if(t.z<0.0){dtdx.z=0.0;dtdy.z=0.0;t.z=0.0;}vec3 t2=t*t;vec3 t4=t2*t2;vec3 t3=t2*t;float n=dot(t4,w);vec2 dt0=vec2(dtdx.x,dtdy.x)*4.0*t3.x;vec2 dn0=t4.x*g0+dt0*w.x;vec2 dt1=vec2(dtdx.y,dtdy.y)*4.0*t3.y;vec2 dn1=t4.y*g1+dt1*w.y;vec2 dt2=vec2(dtdx.z,dtdy.z)*4.0*t3.z;vec2 dn2=t4.z*g2+dt2*w.z;return 11.0*vec3(n,dn0+dn1+dn2);}vec3 sdnoise(vec2 pos){return srdnoise(pos,0.0);}float srnoise(vec2 pos,float rot){pos.y+=0.001;vec2 uv=vec2(pos.x+pos.y*0.5,pos.y);vec2 i0=floor(uv);vec2 f0=fract(uv);vec2 i1=(f0.x>f0.y)? vec2(1.0,0.0): vec2(0.0,1.0);vec2 p0=vec2(i0.x-i0.y*0.5,i0.y);vec2 p1=vec2(p0.x+i1.x-i1.y*0.5,p0.y+i1.y);vec2 p2=vec2(p0.x+0.5,p0.y+1.0);i1=i0+i1;vec2 i2=i0+vec2(1.0,1.0);vec2 d0=pos-p0;vec2 d1=pos-p1;vec2 d2=pos-p2;vec3 x=vec3(p0.x,p1.x,p2.x);vec3 y=vec3(p0.y,p1.y,p2.y);vec3 iuw=x+0.5*y;vec3 ivw=y;iuw=mod289(iuw);ivw=mod289(ivw);vec2 g0=rgrad2(vec2(iuw.x,ivw.x),rot);vec2 g1=rgrad2(vec2(iuw.y,ivw.y),rot);vec2 g2=rgrad2(vec2(iuw.z,ivw.z),rot);vec3 w=vec3(dot(g0,d0),dot(g1,d1),dot(g2,d2));vec3 t=0.8-vec3(dot(d0,d0),dot(d1,d1),dot(d2,d2));t=max(t,0.0);vec3 t2=t*t;vec3 t4=t2*t2;float n=dot(t4,w);return 11.0*n;}float snoise(vec2 pos){return srnoise(pos,0.0);}`,h5=`#define GLSLIFY 1
#include <noise_simplex_2D>
#include <noise_simplex_3D>
#include <noise_simplex_3D_grad>
#include <noise_simplex_4D>
`,v5=`#define GLSLIFY 1
float simplex(vec2 v){const vec4 C=vec4(0.211324865405187,0.366025403784439,-0.577350269189626,0.024390243902439);vec2 i=floor(v+dot(v,C.yy));vec2 x0=v-i+dot(i,C.xx);vec2 i1;i1=(x0.x>x0.y)? vec2(1.0,0.0): vec2(0.0,1.0);vec4 x12=x0.xyxy+C.xxzz;x12.xy-=i1;i=mod289(i);vec3 p=permute(permute(i.y+vec3(0.0,i1.y,1.0))+i.x+vec3(0.0,i1.x,1.0));vec3 m=max(0.5-vec3(dot(x0,x0),dot(x12.xy,x12.xy),dot(x12.zw,x12.zw)),0.0);m=m*m;m=m*m;vec3 x=2.0*fract(p*C.www)-1.0;vec3 h=abs(x)-0.5;vec3 ox=floor(x+0.5);vec3 a0=x-ox;m*=1.79284291400159-0.85373472095314*(a0*a0+h*h);vec3 g;g.x=a0.x*x0.x+h.x*x0.y;g.yz=a0.yz*x12.xz+h.yz*x12.yw;return 130.0*dot(m,g);}`,p5=`#define GLSLIFY 1
float simplex(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}`,_5=`#define GLSLIFY 1
float simplex(vec3 v,out vec3 gradient){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);vec4 m2=m*m;vec4 m4=m2*m2;vec4 pdotx=vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3));vec4 temp=m2*m*pdotx;gradient=-8.0*(temp.x*x0+temp.y*x1+temp.z*x2+temp.w*x3);gradient+=m4.x*p0+m4.y*p1+m4.z*p2+m4.w*p3;gradient*=42.0;return 42.0*dot(m4,pdotx);}`,g5=`#define GLSLIFY 1
vec4 grad4(float j,vec4 ip){const vec4 ones=vec4(1.0,1.0,1.0,-1.0);vec4 p,s;p.xyz=floor(fract(vec3(j)*ip.xyz)*7.0)*ip.z-1.0;p.w=1.5-dot(abs(p.xyz),ones.xyz);s=vec4(lessThan(p,vec4(0.0)));p.xyz=p.xyz+(s.xyz*2.0-1.0)*s.www;return p;}
#define F4 0.309016994374947451
float simplex(vec4 v){const vec4 C=vec4(0.138196601125011,0.276393202250021,0.414589803375032,-0.447213595499958);vec4 i=floor(v+dot(v,vec4(F4)));vec4 x0=v-i+dot(i,C.xxxx);vec4 i0;vec3 isX=step(x0.yzw,x0.xxx);vec3 isYZ=step(x0.zww,x0.yyz);i0.x=isX.x+isX.y+isX.z;i0.yzw=1.0-isX;i0.y+=isYZ.x+isYZ.y;i0.zw+=1.0-isYZ.xy;i0.z+=isYZ.z;i0.w+=1.0-isYZ.z;vec4 i3=clamp(i0,0.0,1.0);vec4 i2=clamp(i0-1.0,0.0,1.0);vec4 i1=clamp(i0-2.0,0.0,1.0);vec4 x1=x0-i1+C.xxxx;vec4 x2=x0-i2+C.yyyy;vec4 x3=x0-i3+C.zzzz;vec4 x4=x0+C.wwww;i=mod289(i);float j0=permute(permute(permute(permute(i.w)+i.z)+i.y)+i.x);vec4 j1=permute(permute(permute(permute(i.w+vec4(i1.w,i2.w,i3.w,1.0))+i.z+vec4(i1.z,i2.z,i3.z,1.0))+i.y+vec4(i1.y,i2.y,i3.y,1.0))+i.x+vec4(i1.x,i2.x,i3.x,1.0));vec4 ip=vec4(1.0/294.0,1.0/49.0,1.0/7.0,0.0);vec4 p0=grad4(j0,ip);vec4 p1=grad4(j1.x,ip);vec4 p2=grad4(j1.y,ip);vec4 p3=grad4(j1.z,ip);vec4 p4=grad4(j1.w,ip);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;p4*=taylorInvSqrt(dot(p4,p4));vec3 m0=max(0.6-vec3(dot(x0,x0),dot(x1,x1),dot(x2,x2)),0.0);vec2 m1=max(0.6-vec2(dot(x3,x3),dot(x4,x4)),0.0);m0=m0*m0;m1=m1*m1;return 49.0*(dot(m0*m0,vec3(dot(p0,x0),dot(p1,x1),dot(p2,x2)))+dot(m1*m1,vec2(dot(p3,x3),dot(p4,x4))));}`,m5=`#define GLSLIFY 1
#define MIN_PERCEPTUAL_ROUGHNESS 0.045
#define MIN_ROUGHNESS 0.002025
uniform float material_AlphaCutoff;uniform vec4 material_BaseColor;uniform float material_Metal;uniform float material_Roughness;uniform float material_IOR;uniform vec3 material_PBRSpecularColor;uniform float material_Glossiness;uniform vec3 material_EmissiveColor;uniform float material_NormalIntensity;uniform float material_OcclusionIntensity;uniform float material_OcclusionTextureCoord;
#ifdef MATERIAL_ENABLE_CLEAR_COAT
uniform float material_ClearCoat;uniform float material_ClearCoatRoughness;
#ifdef MATERIAL_HAS_CLEAR_COAT_TEXTURE
uniform sampler2D material_ClearCoatTexture;
#endif
#ifdef MATERIAL_HAS_CLEAR_COAT_ROUGHNESS_TEXTURE
uniform sampler2D material_ClearCoatRoughnessTexture;
#endif
#ifdef MATERIAL_HAS_CLEAR_COAT_NORMAL_TEXTURE
uniform sampler2D material_ClearCoatNormalTexture;
#endif
#endif
#ifdef MATERIAL_ENABLE_ANISOTROPY
uniform vec3 material_AnisotropyInfo;
#ifdef MATERIAL_HAS_ANISOTROPY_TEXTURE
uniform sampler2D material_AnisotropyTexture;
#endif
#endif
#ifdef MATERIAL_HAS_BASETEXTURE
uniform sampler2D material_BaseTexture;
#endif
#ifdef MATERIAL_HAS_NORMALTEXTURE
uniform sampler2D material_NormalTexture;
#endif
#ifdef MATERIAL_HAS_EMISSIVETEXTURE
uniform sampler2D material_EmissiveTexture;
#endif
#ifdef MATERIAL_HAS_ROUGHNESS_METALLIC_TEXTURE
uniform sampler2D material_RoughnessMetallicTexture;
#endif
#ifdef MATERIAL_HAS_SPECULAR_GLOSSINESS_TEXTURE
uniform sampler2D material_SpecularGlossinessTexture;
#endif
#ifdef MATERIAL_HAS_OCCLUSION_TEXTURE
uniform sampler2D material_OcclusionTexture;
#endif
struct ReflectedLight{vec3 directDiffuse;vec3 directSpecular;vec3 indirectDiffuse;vec3 indirectSpecular;};struct Geometry{vec3 position;vec3 normal;vec3 viewDir;float dotNV;
#ifdef MATERIAL_ENABLE_CLEAR_COAT
vec3 clearCoatNormal;float clearCoatDotNV;
#endif
#ifdef MATERIAL_ENABLE_ANISOTROPY
vec3 anisotropicT;vec3 anisotropicB;vec3 anisotropicN;float anisotropy;
#endif
};struct Material{vec3 diffuseColor;float roughness;vec3 specularColor;float opacity;float f0;
#ifdef MATERIAL_ENABLE_CLEAR_COAT
float clearCoat;float clearCoatRoughness;
#endif
};`,y5=`#define GLSLIFY 1
#include <normal_get>
float computeSpecularOcclusion(float ambientOcclusion,float roughness,float dotNV){return saturate(pow(dotNV+ambientOcclusion,exp2(-16.0*roughness-1.0))-1.0+ambientOcclusion);}float getAARoughnessFactor(vec3 normal){
#ifdef HAS_DERIVATIVES
vec3 dxy=max(abs(dFdx(normal)),abs(dFdy(normal)));return MIN_PERCEPTUAL_ROUGHNESS+max(max(dxy.x,dxy.y),dxy.z);
#else
return MIN_PERCEPTUAL_ROUGHNESS;
#endif
}
#ifdef MATERIAL_ENABLE_ANISOTROPY
vec3 getAnisotropicBentNormal(Geometry geometry,vec3 n,float roughness){vec3 anisotropyDirection=geometry.anisotropy>=0.0 ? geometry.anisotropicB : geometry.anisotropicT;vec3 anisotropicTangent=cross(anisotropyDirection,geometry.viewDir);vec3 anisotropicNormal=cross(anisotropicTangent,anisotropyDirection);vec3 bentNormal=normalize(mix(n,anisotropicNormal,abs(geometry.anisotropy)*saturate(5.0*roughness)));return bentNormal;}
#endif
void initGeometry(out Geometry geometry,bool isFrontFacing){geometry.position=v_pos;
#ifdef CAMERA_ORTHOGRAPHIC
geometry.viewDir=-camera_Forward;
#else
geometry.viewDir=normalize(camera_Position-v_pos);
#endif
#if defined(MATERIAL_HAS_NORMALTEXTURE) || defined(MATERIAL_HAS_CLEAR_COAT_NORMAL_TEXTURE) || defined(MATERIAL_ENABLE_ANISOTROPY)
mat3 tbn=getTBN(isFrontFacing);
#endif
#ifdef MATERIAL_HAS_NORMALTEXTURE
geometry.normal=getNormalByNormalTexture(tbn,material_NormalTexture,material_NormalIntensity,v_uv,isFrontFacing);
#else
geometry.normal=getNormal(isFrontFacing);
#endif
geometry.dotNV=saturate(dot(geometry.normal,geometry.viewDir));
#ifdef MATERIAL_ENABLE_CLEAR_COAT
#ifdef MATERIAL_HAS_CLEAR_COAT_NORMAL_TEXTURE
geometry.clearCoatNormal=getNormalByNormalTexture(tbn,material_ClearCoatNormalTexture,material_NormalIntensity,v_uv,isFrontFacing);
#else
geometry.clearCoatNormal=getNormal(isFrontFacing);
#endif
geometry.clearCoatDotNV=saturate(dot(geometry.clearCoatNormal,geometry.viewDir));
#endif
#ifdef MATERIAL_ENABLE_ANISOTROPY
float anisotropy=material_AnisotropyInfo.z;vec3 anisotropicDirection=vec3(material_AnisotropyInfo.xy,0.0);
#ifdef MATERIAL_HAS_ANISOTROPY_TEXTURE
vec3 anisotropyTextureInfo=texture2D(material_AnisotropyTexture,v_uv).rgb;anisotropy*=anisotropyTextureInfo.b;anisotropicDirection.xy*=anisotropyTextureInfo.rg*2.0-1.0;
#endif
geometry.anisotropy=anisotropy;geometry.anisotropicT=normalize(tbn*anisotropicDirection);geometry.anisotropicB=normalize(cross(geometry.normal,geometry.anisotropicT));
#endif
}void initMaterial(out Material material,inout Geometry geometry){vec4 baseColor=material_BaseColor;float metal=material_Metal;float roughness=material_Roughness;vec3 specularColor=material_PBRSpecularColor;float glossiness=material_Glossiness;float alphaCutoff=material_AlphaCutoff;float f0=pow2((material_IOR-1.0)/(material_IOR+1.0));material.f0=f0;
#ifdef MATERIAL_HAS_BASETEXTURE
vec4 baseTextureColor=texture2D(material_BaseTexture,v_uv);
#ifndef ENGINE_IS_COLORSPACE_GAMMA
baseTextureColor=gammaToLinear(baseTextureColor);
#endif
baseColor*=baseTextureColor;
#endif
#ifdef RENDERER_ENABLE_VERTEXCOLOR
baseColor*=v_color;
#endif
#ifdef MATERIAL_IS_ALPHA_CUTOFF
if(baseColor.a<alphaCutoff){discard;}
#endif
#ifdef MATERIAL_HAS_ROUGHNESS_METALLIC_TEXTURE
vec4 metalRoughMapColor=texture2D(material_RoughnessMetallicTexture,v_uv);roughness*=metalRoughMapColor.g;metal*=metalRoughMapColor.b;
#endif
#ifdef MATERIAL_HAS_SPECULAR_GLOSSINESS_TEXTURE
vec4 specularGlossinessColor=texture2D(material_SpecularGlossinessTexture,v_uv);
#ifndef ENGINE_IS_COLORSPACE_GAMMA
specularGlossinessColor=gammaToLinear(specularGlossinessColor);
#endif
specularColor*=specularGlossinessColor.rgb;glossiness*=specularGlossinessColor.a;
#endif
#ifdef IS_METALLIC_WORKFLOW
material.diffuseColor=baseColor.rgb*(1.0-metal);material.specularColor=mix(vec3(f0),baseColor.rgb,metal);material.roughness=roughness;
#else
float specularStrength=max(max(specularColor.r,specularColor.g),specularColor.b);material.diffuseColor=baseColor.rgb*(1.0-specularStrength);material.specularColor=specularColor;material.roughness=1.0-glossiness;
#endif
material.roughness=max(material.roughness,getAARoughnessFactor(geometry.normal));
#ifdef MATERIAL_ENABLE_CLEAR_COAT
material.clearCoat=material_ClearCoat;material.clearCoatRoughness=material_ClearCoatRoughness;
#ifdef MATERIAL_HAS_CLEAR_COAT_TEXTURE
material.clearCoat*=texture2D(material_ClearCoatTexture,v_uv).r;
#endif
#ifdef MATERIAL_HAS_CLEAR_COAT_ROUGHNESS_TEXTURE
material.clearCoatRoughness*=texture2D(material_ClearCoatRoughnessTexture,v_uv).g;
#endif
material.clearCoat=saturate(material.clearCoat);material.clearCoatRoughness=max(material.clearCoatRoughness,getAARoughnessFactor(geometry.clearCoatNormal));
#endif
#ifdef MATERIAL_IS_TRANSPARENT
material.opacity=baseColor.a;
#else
material.opacity=1.0;
#endif
#ifdef MATERIAL_ENABLE_ANISOTROPY
geometry.anisotropicN=getAnisotropicBentNormal(geometry,geometry.normal,material.roughness);
#endif
}
#include <brdf>
#include <direct_irradiance_frag_define>
#include <ibl_frag_define>
`,x5=`#define GLSLIFY 1
float F_Schlick(float f0,float dotLH){return f0+0.96*(pow(1.0-dotLH,5.0));}vec3 F_Schlick(vec3 specularColor,float dotLH){float fresnel=exp2((-5.55473*dotLH-6.98316)*dotLH);return(1.0-specularColor)*fresnel+specularColor;}float G_GGX_SmithCorrelated(float alpha,float dotNL,float dotNV){float a2=pow2(alpha);float gv=dotNL*sqrt(a2+(1.0-a2)*pow2(dotNV));float gl=dotNV*sqrt(a2+(1.0-a2)*pow2(dotNL));return 0.5/max(gv+gl,EPSILON);}
#ifdef MATERIAL_ENABLE_ANISOTROPY
float G_GGX_SmithCorrelated_Anisotropic(float at,float ab,float ToV,float BoV,float ToL,float BoL,float NoV,float NoL){float lambdaV=NoL*length(vec3(at*ToV,ab*BoV,NoV));float lambdaL=NoV*length(vec3(at*ToL,ab*BoL,NoL));return 0.5/max(lambdaV+lambdaL,EPSILON);}
#endif
float D_GGX(float alpha,float dotNH){float a2=pow2(alpha);float denom=pow2(dotNH)*(a2-1.0)+1.0;return RECIPROCAL_PI*a2/pow2(denom);}
#ifdef MATERIAL_ENABLE_ANISOTROPY
float D_GGX_Anisotropic(float at,float ab,float ToH,float BoH,float NoH){float a2=at*ab;highp vec3 d=vec3(ab*ToH,at*BoH,a2*NoH);highp float d2=dot(d,d);float b2=a2/d2;return a2*b2*b2*RECIPROCAL_PI;}
#endif
vec3 isotropicLobe(vec3 specularColor,float alpha,float dotNV,float dotNL,float dotNH,float dotLH){vec3 F=F_Schlick(specularColor,dotLH);float D=D_GGX(alpha,dotNH);float G=G_GGX_SmithCorrelated(alpha,dotNL,dotNV);return F*(G*D);}
#ifdef MATERIAL_ENABLE_ANISOTROPY
vec3 anisotropicLobe(vec3 h,vec3 l,Geometry geometry,vec3 specularColor,float alpha,float dotNV,float dotNL,float dotNH,float dotLH){vec3 t=geometry.anisotropicT;vec3 b=geometry.anisotropicB;vec3 v=geometry.viewDir;float dotTV=dot(t,v);float dotBV=dot(b,v);float dotTL=dot(t,l);float dotBL=dot(b,l);float dotTH=dot(t,h);float dotBH=dot(b,h);float at=max(alpha*(1.0+geometry.anisotropy),MIN_ROUGHNESS);float ab=max(alpha*(1.0-geometry.anisotropy),MIN_ROUGHNESS);vec3 F=F_Schlick(specularColor,dotLH);float D=D_GGX_Anisotropic(at,ab,dotTH,dotBH,dotNH);float G=G_GGX_SmithCorrelated_Anisotropic(at,ab,dotTV,dotBV,dotTL,dotBL,dotNV,dotNL);return F*(G*D);}
#endif
vec3 BRDF_Specular_GGX(vec3 incidentDirection,Geometry geometry,vec3 normal,vec3 specularColor,float roughness){float alpha=pow2(roughness);vec3 halfDir=normalize(incidentDirection+geometry.viewDir);float dotNL=saturate(dot(normal,incidentDirection));float dotNV=saturate(dot(normal,geometry.viewDir));float dotNH=saturate(dot(normal,halfDir));float dotLH=saturate(dot(incidentDirection,halfDir));
#ifdef MATERIAL_ENABLE_ANISOTROPY
return anisotropicLobe(halfDir,incidentDirection,geometry,specularColor,alpha,dotNV,dotNL,dotNH,dotLH);
#else
return isotropicLobe(specularColor,alpha,dotNV,dotNL,dotNH,dotLH);
#endif
}vec3 BRDF_Diffuse_Lambert(vec3 diffuseColor){return RECIPROCAL_PI*diffuseColor;}`,S5=`#define GLSLIFY 1
#include <ShadowFragmentDeclaration>
void addDirectRadiance(vec3 incidentDirection,vec3 color,Geometry geometry,Material material,inout ReflectedLight reflectedLight){float attenuation=1.0;
#ifdef MATERIAL_ENABLE_CLEAR_COAT
float clearCoatDotNL=saturate(dot(geometry.clearCoatNormal,incidentDirection));vec3 clearCoatIrradiance=clearCoatDotNL*color;reflectedLight.directSpecular+=material.clearCoat*clearCoatIrradiance*BRDF_Specular_GGX(incidentDirection,geometry,geometry.clearCoatNormal,vec3(0.04),material.clearCoatRoughness);attenuation-=material.clearCoat*F_Schlick(material.f0,geometry.clearCoatDotNV);
#endif
float dotNL=saturate(dot(geometry.normal,incidentDirection));vec3 irradiance=dotNL*color*PI;reflectedLight.directSpecular+=attenuation*irradiance*BRDF_Specular_GGX(incidentDirection,geometry,geometry.normal,material.specularColor,material.roughness);reflectedLight.directDiffuse+=attenuation*irradiance*BRDF_Diffuse_Lambert(material.diffuseColor);}
#ifdef SCENE_DIRECT_LIGHT_COUNT
void addDirectionalDirectLightRadiance(DirectLight directionalLight,Geometry geometry,Material material,inout ReflectedLight reflectedLight){vec3 color=directionalLight.color;vec3 direction=-directionalLight.direction;addDirectRadiance(direction,color,geometry,material,reflectedLight);}
#endif
#ifdef SCENE_POINT_LIGHT_COUNT
void addPointDirectLightRadiance(PointLight pointLight,Geometry geometry,Material material,inout ReflectedLight reflectedLight){vec3 lVector=pointLight.position-geometry.position;vec3 direction=normalize(lVector);float lightDistance=length(lVector);vec3 color=pointLight.color;color*=clamp(1.0-pow(lightDistance/pointLight.distance,4.0),0.0,1.0);addDirectRadiance(direction,color,geometry,material,reflectedLight);}
#endif
#ifdef SCENE_SPOT_LIGHT_COUNT
void addSpotDirectLightRadiance(SpotLight spotLight,Geometry geometry,Material material,inout ReflectedLight reflectedLight){vec3 lVector=spotLight.position-geometry.position;vec3 direction=normalize(lVector);float lightDistance=length(lVector);float angleCos=dot(direction,-spotLight.direction);float spotEffect=smoothstep(spotLight.penumbraCos,spotLight.angleCos,angleCos);float decayEffect=clamp(1.0-pow(lightDistance/spotLight.distance,4.0),0.0,1.0);vec3 color=spotLight.color;color*=spotEffect*decayEffect;addDirectRadiance(direction,color,geometry,material,reflectedLight);}
#endif
void addTotalDirectRadiance(Geometry geometry,Material material,inout ReflectedLight reflectedLight){float shadowAttenuation=1.0;
#ifdef SCENE_DIRECT_LIGHT_COUNT
shadowAttenuation=1.0;
#ifdef SCENE_IS_CALCULATE_SHADOWS
shadowAttenuation*=sampleShadowMap();
#endif
DirectLight directionalLight;for(int i=0;i<SCENE_DIRECT_LIGHT_COUNT;i++){if(!isRendererCulledByLight(renderer_Layer.xy,scene_DirectLightCullingMask[i])){directionalLight.color=scene_DirectLightColor[i];
#ifdef SCENE_IS_CALCULATE_SHADOWS
if(i==0){directionalLight.color*=shadowAttenuation;}
#endif
directionalLight.direction=scene_DirectLightDirection[i];addDirectionalDirectLightRadiance(directionalLight,geometry,material,reflectedLight);}}
#endif
#ifdef SCENE_POINT_LIGHT_COUNT
PointLight pointLight;for(int i=0;i<SCENE_POINT_LIGHT_COUNT;i++){if(!isRendererCulledByLight(renderer_Layer.xy,scene_PointLightCullingMask[i])){pointLight.color=scene_PointLightColor[i];pointLight.position=scene_PointLightPosition[i];pointLight.distance=scene_PointLightDistance[i];addPointDirectLightRadiance(pointLight,geometry,material,reflectedLight);}}
#endif
#ifdef SCENE_SPOT_LIGHT_COUNT
SpotLight spotLight;for(int i=0;i<SCENE_SPOT_LIGHT_COUNT;i++){if(!isRendererCulledByLight(renderer_Layer.xy,scene_SpotLightCullingMask[i])){spotLight.color=scene_SpotLightColor[i];spotLight.position=scene_SpotLightPosition[i];spotLight.direction=scene_SpotLightDirection[i];spotLight.distance=scene_SpotLightDistance[i];spotLight.angleCos=scene_SpotLightAngleCos[i];spotLight.penumbraCos=scene_SpotLightPenumbraCos[i];addSpotDirectLightRadiance(spotLight,geometry,material,reflectedLight);}}
#endif
}`,b5=`#define GLSLIFY 1
vec3 getLightProbeIrradiance(vec3 sh[9],vec3 normal){normal.x=-normal.x;vec3 result=sh[0]+sh[1]*(normal.y)+sh[2]*(normal.z)+sh[3]*(normal.x)+sh[4]*(normal.y*normal.x)+sh[5]*(normal.y*normal.z)+sh[6]*(3.0*normal.z*normal.z-1.0)+sh[7]*(normal.z*normal.x)+sh[8]*(normal.x*normal.x-normal.y*normal.y);return max(result,vec3(0.0));}vec3 envBRDFApprox(vec3 specularColor,float roughness,float dotNV){const vec4 c0=vec4(-1,-0.0275,-0.572,0.022);const vec4 c1=vec4(1,0.0425,1.04,-0.04);vec4 r=roughness*c0+c1;float a004=min(r.x*r.x,exp2(-9.28*dotNV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}float getSpecularMIPLevel(float roughness,int maxMIPLevel){return roughness*float(maxMIPLevel);}vec3 getReflectedVector(Geometry geometry,vec3 n){
#ifdef MATERIAL_ENABLE_ANISOTROPY
vec3 r=reflect(-geometry.viewDir,geometry.anisotropicN);
#else
vec3 r=reflect(-geometry.viewDir,n);
#endif
return r;}vec3 getLightProbeRadiance(Geometry geometry,vec3 normal,float roughness,int maxMIPLevel,float specularIntensity){
#ifndef SCENE_USE_SPECULAR_ENV
return vec3(0);
#else
vec3 reflectVec=getReflectedVector(geometry,normal);reflectVec.x=-reflectVec.x;float specularMIPLevel=getSpecularMIPLevel(roughness,maxMIPLevel);
#ifdef HAS_TEX_LOD
vec4 envMapColor=textureCubeLodEXT(scene_EnvSpecularSampler,reflectVec,specularMIPLevel);
#else
vec4 envMapColor=textureCube(scene_EnvSpecularSampler,reflectVec,specularMIPLevel);
#endif
#ifdef SCENE_IS_DECODE_ENV_RGBM
envMapColor.rgb=RGBMToLinear(envMapColor,5.0).rgb;
#ifdef ENGINE_IS_COLORSPACE_GAMMA
envMapColor=linearToGamma(envMapColor);
#endif
#else
#ifndef ENGINE_IS_COLORSPACE_GAMMA
envMapColor=gammaToLinear(envMapColor);
#endif
#endif
return envMapColor.rgb*specularIntensity;
#endif
}`,C5=`#define GLSLIFY 1
Geometry geometry;Material material;ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));initGeometry(geometry,gl_FrontFacing);initMaterial(material,geometry);addTotalDirectRadiance(geometry,material,reflectedLight);
#ifdef SCENE_USE_SH
vec3 irradiance=getLightProbeIrradiance(scene_EnvSH,geometry.normal);
#ifdef ENGINE_IS_COLORSPACE_GAMMA
irradiance=linearToGamma(vec4(irradiance,1.0)).rgb;
#endif
irradiance*=scene_EnvMapLight.diffuseIntensity;
#else
vec3 irradiance=scene_EnvMapLight.diffuse*scene_EnvMapLight.diffuseIntensity;irradiance*=PI;
#endif
reflectedLight.indirectDiffuse+=irradiance*BRDF_Diffuse_Lambert(material.diffuseColor);vec3 radiance=getLightProbeRadiance(geometry,geometry.normal,material.roughness,int(scene_EnvMapLight.mipMapLevel),scene_EnvMapLight.specularIntensity);float radianceAttenuation=1.0;
#ifdef MATERIAL_ENABLE_CLEAR_COAT
vec3 clearCoatRadiance=getLightProbeRadiance(geometry,geometry.clearCoatNormal,material.clearCoatRoughness,int(scene_EnvMapLight.mipMapLevel),scene_EnvMapLight.specularIntensity);reflectedLight.indirectSpecular+=clearCoatRadiance*material.clearCoat*envBRDFApprox(vec3(0.04),material.clearCoatRoughness,geometry.clearCoatDotNV);radianceAttenuation-=material.clearCoat*F_Schlick(material.f0,geometry.clearCoatDotNV);
#endif
reflectedLight.indirectSpecular+=radianceAttenuation*radiance*envBRDFApprox(material.specularColor,material.roughness,geometry.dotNV);
#ifdef MATERIAL_HAS_OCCLUSION_TEXTURE
vec2 aoUV=v_uv;
#ifdef RENDERER_HAS_UV1
if(material_OcclusionTextureCoord==1.0){aoUV=v_uv1;}
#endif
float ambientOcclusion=(texture2D(material_OcclusionTexture,aoUV).r-1.0)*material_OcclusionIntensity+1.0;reflectedLight.indirectDiffuse*=ambientOcclusion;
#ifdef SCENE_USE_SPECULAR_ENV
reflectedLight.indirectSpecular*=computeSpecularOcclusion(ambientOcclusion,material.roughness,geometry.dotNV);
#endif
#endif
vec3 emissiveRadiance=material_EmissiveColor;
#ifdef MATERIAL_HAS_EMISSIVETEXTURE
vec4 emissiveColor=texture2D(material_EmissiveTexture,v_uv);
#ifndef ENGINE_IS_COLORSPACE_GAMMA
emissiveColor=gammaToLinear(emissiveColor);
#endif
emissiveRadiance*=emissiveColor.rgb;
#endif
vec3 totalRadiance=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+reflectedLight.directSpecular+reflectedLight.indirectSpecular+emissiveRadiance;vec4 targetColor=vec4(totalRadiance,material.opacity);gl_FragColor=targetColor;`,E5={pbr_frag_define:m5,pbr_helper:y5,brdf:x5,direct_irradiance_frag_define:S5,ibl_frag_define:b5,pbr_frag:C5},T5=`#define GLSLIFY 1
uniform mat4 scene_ShadowMatrices[SCENE_SHADOW_CASCADED_COUNT+1];uniform vec4 scene_ShadowSplitSpheres[4];mediump int computeCascadeIndex(vec3 positionWS){vec3 fromCenter0=positionWS-scene_ShadowSplitSpheres[0].xyz;vec3 fromCenter1=positionWS-scene_ShadowSplitSpheres[1].xyz;vec3 fromCenter2=positionWS-scene_ShadowSplitSpheres[2].xyz;vec3 fromCenter3=positionWS-scene_ShadowSplitSpheres[3].xyz;mediump vec4 comparison=vec4(dot(fromCenter0,fromCenter0)<scene_ShadowSplitSpheres[0].w,dot(fromCenter1,fromCenter1)<scene_ShadowSplitSpheres[1].w,dot(fromCenter2,fromCenter2)<scene_ShadowSplitSpheres[2].w,dot(fromCenter3,fromCenter3)<scene_ShadowSplitSpheres[3].w);comparison.yzw=clamp(comparison.yzw-comparison.xyz,0.0,1.0);mediump vec4 indexCoefficient=vec4(4.0,3.0,2.0,1.0);mediump int index=4-int(dot(comparison,indexCoefficient));return index;}vec3 getShadowCoord(){
#if SCENE_SHADOW_CASCADED_COUNT == 1
mediump int cascadeIndex=0;
#else
mediump int cascadeIndex=computeCascadeIndex(v_pos);
#endif
#ifdef GRAPHICS_API_WEBGL2
mat4 shadowMatrix=scene_ShadowMatrices[cascadeIndex];
#else
mat4 shadowMatrix;
#if SCENE_SHADOW_CASCADED_COUNT == 4
if(cascadeIndex==0){shadowMatrix=scene_ShadowMatrices[0];}else if(cascadeIndex==1){shadowMatrix=scene_ShadowMatrices[1];}else if(cascadeIndex==2){shadowMatrix=scene_ShadowMatrices[2];}else if(cascadeIndex==3){shadowMatrix=scene_ShadowMatrices[3];}else{shadowMatrix=scene_ShadowMatrices[4];}
#endif
#if SCENE_SHADOW_CASCADED_COUNT == 2
if(cascadeIndex==0){shadowMatrix=scene_ShadowMatrices[0];}else if(cascadeIndex==1){shadowMatrix=scene_ShadowMatrices[1];}else{shadowMatrix=scene_ShadowMatrices[2];}
#endif
#if SCENE_SHADOW_CASCADED_COUNT == 1
if(cascadeIndex==0){shadowMatrix=scene_ShadowMatrices[0];}else{shadowMatrix=scene_ShadowMatrices[1];}
#endif
#endif
vec4 shadowCoord=shadowMatrix*vec4(v_pos,1.0);return shadowCoord.xyz;}`,R5=`#define GLSLIFY 1
#if defined(SCENE_SHADOW_TYPE) && defined(RENDERER_IS_RECEIVE_SHADOWS)
#define SCENE_IS_CALCULATE_SHADOWS
#endif
#ifdef SCENE_IS_CALCULATE_SHADOWS
#if SCENE_SHADOW_CASCADED_COUNT == 1
varying vec3 v_shadowCoord;
#else
#include <ShadowCoord>
#endif
uniform vec4 scene_ShadowInfo;uniform vec4 scene_ShadowMapSize;
#ifdef GRAPHICS_API_WEBGL2
uniform mediump sampler2DShadow scene_ShadowMap;
#define SAMPLE_TEXTURE2D_SHADOW(textureName, coord3) textureLod(textureName, coord3 , 0.0)
#define TEXTURE2D_SHADOW_PARAM(shadowMap) mediump sampler2DShadow shadowMap
#else
uniform sampler2D scene_ShadowMap;
#ifdef ENGINE_NO_DEPTH_TEXTURE
const vec4 bitShift=vec4(1.0,1.0/256.0,1.0/(256.0*256.0),1.0/(256.0*256.0*256.0));float unpack(const in vec4 rgbaDepth){return dot(rgbaDepth,bitShift);}
#define SAMPLE_TEXTURE2D_SHADOW(textureName, coord3) (unpack(texture2D(textureName, coord3.xy)) < coord3.z ? 0.0 : 1.0)
#else
#define SAMPLE_TEXTURE2D_SHADOW(textureName, coord3) (texture2D(textureName, coord3.xy).r < coord3.z ? 0.0 : 1.0)
#endif
#define TEXTURE2D_SHADOW_PARAM(shadowMap) mediump sampler2D shadowMap
#endif
#if SCENE_SHADOW_TYPE == 2
float sampleShadowMapFiltered4(TEXTURE2D_SHADOW_PARAM(shadowMap),vec3 shadowCoord,vec4 shadowMapSize){float attenuation;vec4 attenuation4;vec2 offset=shadowMapSize.xy/2.0;vec3 shadowCoord0=shadowCoord+vec3(-offset,0.0);vec3 shadowCoord1=shadowCoord+vec3(offset.x,-offset.y,0.0);vec3 shadowCoord2=shadowCoord+vec3(-offset.x,offset.y,0.0);vec3 shadowCoord3=shadowCoord+vec3(offset,0.0);attenuation4.x=SAMPLE_TEXTURE2D_SHADOW(shadowMap,shadowCoord0);attenuation4.y=SAMPLE_TEXTURE2D_SHADOW(shadowMap,shadowCoord1);attenuation4.z=SAMPLE_TEXTURE2D_SHADOW(shadowMap,shadowCoord2);attenuation4.w=SAMPLE_TEXTURE2D_SHADOW(shadowMap,shadowCoord3);attenuation=dot(attenuation4,vec4(0.25));return attenuation;}
#endif
#if SCENE_SHADOW_TYPE == 3
#include <shadow_sample_tent>
float sampleShadowMapFiltered9(TEXTURE2D_SHADOW_PARAM(shadowMap),vec3 shadowCoord,vec4 shadowmapSize){float attenuation;float fetchesWeights[9];vec2 fetchesUV[9];sampleShadowComputeSamplesTent5x5(shadowmapSize,shadowCoord.xy,fetchesWeights,fetchesUV);attenuation=fetchesWeights[0]*SAMPLE_TEXTURE2D_SHADOW(shadowMap,vec3(fetchesUV[0].xy,shadowCoord.z));attenuation+=fetchesWeights[1]*SAMPLE_TEXTURE2D_SHADOW(shadowMap,vec3(fetchesUV[1].xy,shadowCoord.z));attenuation+=fetchesWeights[2]*SAMPLE_TEXTURE2D_SHADOW(shadowMap,vec3(fetchesUV[2].xy,shadowCoord.z));attenuation+=fetchesWeights[3]*SAMPLE_TEXTURE2D_SHADOW(shadowMap,vec3(fetchesUV[3].xy,shadowCoord.z));attenuation+=fetchesWeights[4]*SAMPLE_TEXTURE2D_SHADOW(shadowMap,vec3(fetchesUV[4].xy,shadowCoord.z));attenuation+=fetchesWeights[5]*SAMPLE_TEXTURE2D_SHADOW(shadowMap,vec3(fetchesUV[5].xy,shadowCoord.z));attenuation+=fetchesWeights[6]*SAMPLE_TEXTURE2D_SHADOW(shadowMap,vec3(fetchesUV[6].xy,shadowCoord.z));attenuation+=fetchesWeights[7]*SAMPLE_TEXTURE2D_SHADOW(shadowMap,vec3(fetchesUV[7].xy,shadowCoord.z));attenuation+=fetchesWeights[8]*SAMPLE_TEXTURE2D_SHADOW(shadowMap,vec3(fetchesUV[8].xy,shadowCoord.z));return attenuation;}
#endif
float getShadowFade(vec3 positionWS){vec3 camToPixel=positionWS-camera_Position;float distanceCamToPixel2=dot(camToPixel,camToPixel);return saturate(distanceCamToPixel2*scene_ShadowInfo.z+scene_ShadowInfo.w);}float sampleShadowMap(){
#if SCENE_SHADOW_CASCADED_COUNT == 1
vec3 shadowCoord=v_shadowCoord;
#else
vec3 shadowCoord=getShadowCoord();
#endif
float attenuation=1.0;if(shadowCoord.z>0.0&&shadowCoord.z<1.0){
#if SCENE_SHADOW_TYPE == 1
attenuation=SAMPLE_TEXTURE2D_SHADOW(scene_ShadowMap,shadowCoord);
#endif
#if SCENE_SHADOW_TYPE == 2
attenuation=sampleShadowMapFiltered4(scene_ShadowMap,shadowCoord,scene_ShadowMapSize);
#endif
#if SCENE_SHADOW_TYPE == 3
attenuation=sampleShadowMapFiltered9(scene_ShadowMap,shadowCoord,scene_ShadowMapSize);
#endif
float shadowFade=getShadowFade(v_pos);attenuation=mix(1.0,mix(attenuation,1.0,shadowFade),scene_ShadowInfo.x);}return attenuation;}
#endif
`,A5=`#define GLSLIFY 1
float sampleShadowGetIRTriangleTexelArea(float triangleHeight){return triangleHeight-0.5;}void sampleShadowGetTexelAreasTent3x3(float offset,out vec4 computedArea,out vec4 computedAreaUncut){float a=offset+0.5;float offsetSquaredHalved=a*a*0.5;computedAreaUncut.x=computedArea.x=offsetSquaredHalved-offset;computedAreaUncut.w=computedArea.w=offsetSquaredHalved;computedAreaUncut.y=sampleShadowGetIRTriangleTexelArea(1.5-offset);float clampedOffsetLeft=min(offset,0.0);float areaOfSmallLeftTriangle=clampedOffsetLeft*clampedOffsetLeft;computedArea.y=computedAreaUncut.y-areaOfSmallLeftTriangle;computedAreaUncut.z=sampleShadowGetIRTriangleTexelArea(1.5+offset);float clampedOffsetRight=max(offset,0.0);float areaOfSmallRightTriangle=clampedOffsetRight*clampedOffsetRight;computedArea.z=computedAreaUncut.z-areaOfSmallRightTriangle;}void sampleShadowGetTexelWeightsTent5x5(float offset,out vec3 texelsWeightsA,out vec3 texelsWeightsB){vec4 areaFrom3texelTriangle;vec4 areaUncutFrom3texelTriangle;sampleShadowGetTexelAreasTent3x3(offset,areaFrom3texelTriangle,areaUncutFrom3texelTriangle);texelsWeightsA.x=0.16*(areaFrom3texelTriangle.x);texelsWeightsA.y=0.16*(areaUncutFrom3texelTriangle.y);texelsWeightsA.z=0.16*(areaFrom3texelTriangle.y+1.0);texelsWeightsB.x=0.16*(areaFrom3texelTriangle.z+1.0);texelsWeightsB.y=0.16*(areaUncutFrom3texelTriangle.z);texelsWeightsB.z=0.16*(areaFrom3texelTriangle.w);}void sampleShadowComputeSamplesTent5x5(vec4 shadowMapTextureTexelSize,vec2 coord,out float fetchesWeights[9],out vec2 fetchesUV[9]){vec2 tentCenterInTexelSpace=coord.xy*shadowMapTextureTexelSize.zw;vec2 centerOfFetchesInTexelSpace=floor(tentCenterInTexelSpace+0.5);vec2 offsetFromTentCenterToCenterOfFetches=tentCenterInTexelSpace-centerOfFetchesInTexelSpace;vec3 texelsWeightsUA,texelsWeightsUB;vec3 texelsWeightsVA,texelsWeightsVB;sampleShadowGetTexelWeightsTent5x5(offsetFromTentCenterToCenterOfFetches.x,texelsWeightsUA,texelsWeightsUB);sampleShadowGetTexelWeightsTent5x5(offsetFromTentCenterToCenterOfFetches.y,texelsWeightsVA,texelsWeightsVB);vec3 fetchesWeightsU=vec3(texelsWeightsUA.xz,texelsWeightsUB.y)+vec3(texelsWeightsUA.y,texelsWeightsUB.xz);vec3 fetchesWeightsV=vec3(texelsWeightsVA.xz,texelsWeightsVB.y)+vec3(texelsWeightsVA.y,texelsWeightsVB.xz);vec3 fetchesOffsetsU=vec3(texelsWeightsUA.y,texelsWeightsUB.xz)/fetchesWeightsU.xyz+vec3(-2.5,-0.5,1.5);vec3 fetchesOffsetsV=vec3(texelsWeightsVA.y,texelsWeightsVB.xz)/fetchesWeightsV.xyz+vec3(-2.5,-0.5,1.5);fetchesOffsetsU*=shadowMapTextureTexelSize.xxx;fetchesOffsetsV*=shadowMapTextureTexelSize.yyy;vec2 bilinearFetchOrigin=centerOfFetchesInTexelSpace*shadowMapTextureTexelSize.xy;fetchesUV[0]=bilinearFetchOrigin+vec2(fetchesOffsetsU.x,fetchesOffsetsV.x);fetchesUV[1]=bilinearFetchOrigin+vec2(fetchesOffsetsU.y,fetchesOffsetsV.x);fetchesUV[2]=bilinearFetchOrigin+vec2(fetchesOffsetsU.z,fetchesOffsetsV.x);fetchesUV[3]=bilinearFetchOrigin+vec2(fetchesOffsetsU.x,fetchesOffsetsV.y);fetchesUV[4]=bilinearFetchOrigin+vec2(fetchesOffsetsU.y,fetchesOffsetsV.y);fetchesUV[5]=bilinearFetchOrigin+vec2(fetchesOffsetsU.z,fetchesOffsetsV.y);fetchesUV[6]=bilinearFetchOrigin+vec2(fetchesOffsetsU.x,fetchesOffsetsV.z);fetchesUV[7]=bilinearFetchOrigin+vec2(fetchesOffsetsU.y,fetchesOffsetsV.z);fetchesUV[8]=bilinearFetchOrigin+vec2(fetchesOffsetsU.z,fetchesOffsetsV.z);fetchesWeights[0]=fetchesWeightsU.x*fetchesWeightsV.x;fetchesWeights[1]=fetchesWeightsU.y*fetchesWeightsV.x;fetchesWeights[2]=fetchesWeightsU.z*fetchesWeightsV.x;fetchesWeights[3]=fetchesWeightsU.x*fetchesWeightsV.y;fetchesWeights[4]=fetchesWeightsU.y*fetchesWeightsV.y;fetchesWeights[5]=fetchesWeightsU.z*fetchesWeightsV.y;fetchesWeights[6]=fetchesWeightsU.x*fetchesWeightsV.z;fetchesWeights[7]=fetchesWeightsU.y*fetchesWeightsV.z;fetchesWeights[8]=fetchesWeightsU.z*fetchesWeightsV.z;}`,w5=`#define GLSLIFY 1
#if defined(SCENE_SHADOW_TYPE) && defined(RENDERER_IS_RECEIVE_SHADOWS)
#define SCENE_IS_CALCULATE_SHADOWS
#endif
#ifdef SCENE_IS_CALCULATE_SHADOWS
#if SCENE_SHADOW_CASCADED_COUNT==1
#include <ShadowCoord>
varying vec3 v_shadowCoord;
#endif
#endif
`,P5=`#define GLSLIFY 1
#ifdef SCENE_IS_CALCULATE_SHADOWS
#if SCENE_SHADOW_CASCADED_COUNT == 1
v_shadowCoord=getShadowCoord();
#endif
#endif
`,M5={ShadowCoord:T5,ShadowFragmentDeclaration:R5,shadow_sample_tent:A5,ShadowVertexDeclaration:w5,ShadowVertex:P5},O5=`#define GLSLIFY 1
vec3 rotationByEuler(in vec3 vector,in vec3 rot){float halfRoll=rot.z*0.5;float halfPitch=rot.x*0.5;float halfYaw=rot.y*0.5;float sinRoll=sin(halfRoll);float cosRoll=cos(halfRoll);float sinPitch=sin(halfPitch);float cosPitch=cos(halfPitch);float sinYaw=sin(halfYaw);float cosYaw=cos(halfYaw);float quaX=(cosYaw*sinPitch*cosRoll)+(sinYaw*cosPitch*sinRoll);float quaY=(sinYaw*cosPitch*cosRoll)-(cosYaw*sinPitch*sinRoll);float quaZ=(cosYaw*cosPitch*sinRoll)-(sinYaw*sinPitch*cosRoll);float quaW=(cosYaw*cosPitch*cosRoll)+(sinYaw*sinPitch*sinRoll);float x=quaX+quaX;float y=quaY+quaY;float z=quaZ+quaZ;float wx=quaW*x;float wy=quaW*y;float wz=quaW*z;float xx=quaX*x;float xy=quaX*y;float xz=quaX*z;float yy=quaY*y;float yz=quaY*z;float zz=quaZ*z;return vec3(((vector.x*((1.0-yy)-zz))+(vector.y*(xy-wz)))+(vector.z*(xz+wy)),((vector.x*(xy+wz))+(vector.y*((1.0-xx)-zz)))+(vector.z*(yz-wx)),((vector.x*(xz-wy))+(vector.y*(yz+wx)))+(vector.z*((1.0-xx)-yy)));}vec3 rotationByAxis(in vec3 vector,in vec3 axis,in float angle){float halfAngle=angle*0.5;float sin=sin(halfAngle);float quaX=axis.x*sin;float quaY=axis.y*sin;float quaZ=axis.z*sin;float quaW=cos(halfAngle);float x=quaX+quaX;float y=quaY+quaY;float z=quaZ+quaZ;float wx=quaW*x;float wy=quaW*y;float wz=quaW*z;float xx=quaX*x;float xy=quaX*y;float xz=quaX*z;float yy=quaY*y;float yz=quaY*z;float zz=quaZ*z;return vec3(((vector.x*((1.0-yy)-zz))+(vector.y*(xy-wz)))+(vector.z*(xz+wy)),((vector.x*(xy+wz))+(vector.y*((1.0-xx)-zz)))+(vector.z*(yz-wx)),((vector.x*(xz-wy))+(vector.y*(yz+wx)))+(vector.z*((1.0-xx)-yy)));}vec3 rotationByQuaternions(in vec3 v,in vec4 q){return v+2.0*cross(q.xyz,cross(q.xyz,v)+q.w*v);}float evaluateParticleCurve(in vec2 keys[4],in float normalizedAge){float value;for(int i=1;i<4;i++){vec2 key=keys[i];float time=key.x;if(time>=normalizedAge){vec2 lastKey=keys[i-1];float lastTime=lastKey.x;float age=(normalizedAge-lastTime)/(time-lastTime);value=mix(lastKey.y,key.y,age);break;}}return value;}float evaluateParticleCurveCumulative(in vec2 keys[4],in float normalizedAge){float cumulativeValue=0.0;for(int i=1;i<4;i++){vec2 key=keys[i];float time=key.x;vec2 lastKey=keys[i-1];float lastValue=lastKey.y;if(time>=normalizedAge){float lastTime=lastKey.x;float offsetTime=normalizedAge-lastTime;float age=offsetTime/(time-lastTime);cumulativeValue+=(lastValue+mix(lastValue,key.y,age))*0.5*offsetTime;break;}else{cumulativeValue+=(lastValue+key.y)*0.5*(time-lastKey.x);}}return cumulativeValue;}`,I5=`#define GLSLIFY 1
#if defined(RENDERER_VOL_CONSTANT) || defined(RENDERER_VOL_CURVE) || defined(RENDERER_VOL_RANDOM_CONSTANT) || defined(RENDERER_VOL_RANDOM_CURVE)
uniform int renderer_VOLSpace;
#if defined(RENDERER_VOL_CONSTANT) || defined(RENDERER_VOL_RANDOM_CONSTANT)
uniform vec3 renderer_VOLMaxConst;
#ifdef RENDERER_VOL_RANDOM_CONSTANT
uniform vec3 renderer_VOLMinConst;
#endif
#endif
#if defined(RENDERER_VOL_CURVE) || defined(RENDERER_VOL_RANDOM_CURVE)
uniform vec2 renderer_VOLMaxGradientX[4];uniform vec2 renderer_VOLMaxGradientY[4];uniform vec2 renderer_VOLMaxGradientZ[4];
#ifdef RENDERER_VOL_RANDOM_CURVE
uniform vec2 renderer_VOLMinGradientX[4];uniform vec2 renderer_VOLMinGradientY[4];uniform vec2 renderer_VOLMinGradientZ[4];
#endif
#endif
#endif
#if defined(RENDERER_VOL_CONSTANT) || defined(RENDERER_VOL_CURVE) || defined(RENDERER_VOL_RANDOM_CONSTANT) || defined(RENDERER_VOL_RANDOM_CURVE)
vec3 computeParticleLifeVelocity(in float normalizedAge){vec3 velocity;
#if defined(RENDERER_VOL_CONSTANT) || defined(RENDERER_VOL_RANDOM_CONSTANT)
velocity=renderer_VOLMaxConst;
#ifdef RENDERER_VOL_RANDOM_CONSTANT
velocity=mix(renderer_VOLMinConst,velocity,vec3(a_Random1.y,a_Random1.z,a_Random1.w));
#endif
#endif
#if defined(RENDERER_VOL_CURVE) || defined(RENDERER_VOL_RANDOM_CURVE)
velocity=vec3(evaluateParticleCurve(renderer_VOLMaxGradientX,normalizedAge),evaluateParticleCurve(renderer_VOLMaxGradientY,normalizedAge),evaluateParticleCurve(renderer_VOLMaxGradientZ,normalizedAge));
#endif
#ifdef RENDERER_VOL_RANDOM_CURVE
velocity=vec3(mix(velocity.x,evaluateParticleCurve(renderer_VOLMinGradientX,normalizedAge),a_Random1.y),mix(velocity.y,evaluateParticleCurve(renderer_VOLMinGradientY,normalizedAge),a_Random1.z),mix(velocity.z,evaluateParticleCurve(renderer_VOLMinGradientZ,normalizedAge),a_Random1.w));
#endif
return velocity;}
#endif
vec3 getStartPosition(vec3 startVelocity,float age,vec3 dragData){vec3 startPosition;float lastTime=min(startVelocity.x/dragData.x,age);startPosition=lastTime*(startVelocity-0.5*dragData*lastTime);return startPosition;}vec3 computeParticlePosition(in vec3 startVelocity,in vec3 lifeVelocity,in float age,in float normalizedAge,vec3 gravityVelocity,vec4 worldRotation,vec3 dragData){vec3 startPosition=getStartPosition(startVelocity,age,dragData);vec3 lifePosition;
#if defined(RENDERER_VOL_CONSTANT) || defined(RENDERER_VOL_CURVE) || defined(RENDERER_VOL_RANDOM_CONSTANT) || defined(RENDERER_VOL_RANDOM_CURVE)
#if defined(RENDERER_VOL_CONSTANT)|| defined(RENDERER_VOL_RANDOM_CONSTANT)
lifePosition=lifeVelocity*age;
#endif
#if defined(RENDERER_VOL_CURVE) || defined(RENDERER_VOL_RANDOM_CURVE)
lifePosition=vec3(evaluateParticleCurveCumulative(renderer_VOLMaxGradientX,normalizedAge)evaluateParticleCurveCumulative(renderer_VOLMaxGradientY,normalizedAge),evaluateParticleCurveCumulative(renderer_VOLMaxGradientZ,normalizedAge));
#ifdef RENDERER_VOL_RANDOM_CURVE
lifePosition=vec3(mix(evaluateParticleCurveCumulative(renderer_VOLMinGradientX,normalizedAge),lifePosition.x,a_Random1.y),mix(evaluateParticleCurveCumulative(renderer_VOLMinGradientY,normalizedAge),lifePosition.y,a_Random1.z),mix(evaluateParticleCurveCumulative(renderer_VOLMinGradientZ,normalizedAge),lifePosition.z,a_Random1.w));
#endif
lifePosition*=vec3(a_ShapePositionStartLifeTime.w);
#endif
vec3 finalPosition;if(renderer_VOLSpace==0){finalPosition=rotationByQuaternions(a_ShapePositionStartLifeTime.xyz+startPosition+lifePosition,worldRotation);}else{finalPosition=rotationByQuaternions(a_ShapePositionStartLifeTime.xyz+startPosition,worldRotation)+lifePosition;}
#else
vec3 finalPosition=rotationByQuaternions(a_ShapePositionStartLifeTime.xyz+startPosition,worldRotation);
#endif
if(renderer_SimulationSpace==0){finalPosition=finalPosition+renderer_WorldPosition;}else if(renderer_SimulationSpace==1){finalPosition=finalPosition+a_SimulationWorldPosition;}finalPosition+=0.5*gravityVelocity*age;return finalPosition;}`,L5=`#define GLSLIFY 1
#if defined(RENDERER_ROL_CONSTANT_MODE) || defined(RENDERER_ROL_CURVE_MODE)
#ifdef RENDERER_ROL_CURVE_MODE
uniform vec2 renderer_ROLMaxCurveZ[4];
#ifdef RENDERER_ROL_IS_RANDOM_TWO
uniform vec2 renderer_ROLMinCurveZ[4];
#endif
#else
uniform vec3 renderer_ROLMaxConst;
#ifdef RENDERER_ROL_IS_RANDOM_TWO
uniform vec3 renderer_ROLMinConst;
#endif
#endif
#endif
float computeParticleRotationFloat(in float rotation,in float age,in float normalizedAge){
#if defined(RENDERER_ROL_CONSTANT_MODE) || defined(RENDERER_ROL_CURVE_MODE)
#ifdef RENDERER_ROL_CURVE_MODE
float lifeRotation=evaluateParticleCurveCumulative(renderer_ROLMaxCurveZ,normalizedAge);
#ifdef RENDERER_ROL_IS_RANDOM_TWO
lifeRotation=mix(evaluateParticleCurveCumulative(renderer_ROLMinCurveZ,normalizedAge),lifeRotation,a_Random0.w);
#endif
rotation+=lifeRotation*a_ShapePositionStartLifeTime.w;
#else
float lifeRotation=renderer_ROLMaxConst.z;
#ifdef RENDERER_ROL_IS_RANDOM_TWO
lifeRotation=mix(renderer_ROLMinConst.z,lifeRotation,a_Random0.w);
#endif
rotation+=lifeRotation*age;
#endif
#endif
return rotation;}
#if defined(RENDERER_MODE_MESH) && (defined(ROTATION_OVER_LIFETIME) || defined(ROTATION_OVER_LIFETIME_SEPARATE))
vec3 computeParticleRotationVec3(in vec3 rotation,in float age,in float normalizedAge){
#ifdef ROTATION_OVER_LIFETIME
#ifdef ROTATION_OVER_LIFETIME_CONSTANT
float ageRot=u_ROLAngularVelocityConst*age;rotation+=ageRot;
#endif
#ifdef ROTATION_OVER_LIFETIME_CURVE
rotation+=getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge);
#endif
#ifdef ROTATION_OVER_LIFETIME_RANDOM_CONSTANTS
float ageRot=mix(u_ROLAngularVelocityConst,u_ROLAngularVelocityConstMax,a_Random0.w)*age;rotation+=ageRot;
#endif
#ifdef ROTATION_OVER_LIFETIME_RANDOM_CURVES
rotation+=mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMax,normalizedAge),a_Random0.w);
#endif
#endif
#ifdef ROTATION_OVER_LIFETIME_SEPARATE
#ifdef ROTATION_OVER_LIFETIME_CONSTANT
vec3 ageRot=u_ROLAngularVelocityConstSeparate*age;rotation+=ageRot;
#endif
#ifdef ROTATION_OVER_LIFETIME_CURVE
rotation+=vec3(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge));
#endif
#ifdef ROTATION_OVER_LIFETIME_RANDOM_CONSTANTS
vec3 ageRot=mix(u_ROLAngularVelocityConstSeparate,renderer_ROLMaxConst,a_Random0.w)*age;rotation+=ageRot;
#endif
#ifdef ROTATION_OVER_LIFETIME_RANDOM_CURVES
rotation+=vec3(mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(renderer_ROLMaxCurveX,normalizedAge),a_Random0.w),mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(renderer_ROLMaxCurveY,normalizedAge),a_Random0.w),mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge),getTotalValueFromGradientFloat(renderer_ROLMaxCurveZ,normalizedAge),a_Random0.w));
#endif
#endif
return rotation;}
#endif
`,N5=`#define GLSLIFY 1
#ifdef RENDERER_SOL_CURVE_MODE
uniform vec2 renderer_SOLMaxCurveX[4];
#ifdef RENDERER_SOL_IS_SEPARATE
uniform vec2 renderer_SOLMaxCurveY[4];uniform vec2 renderer_SOLMaxCurveZ[4];
#endif
#ifdef RENDERER_SOL_IS_RANDOM_TWO
uniform vec2 renderer_SOLMinCurveX[4];
#ifdef RENDERER_SOL_IS_SEPARATE
uniform vec2 renderer_SOLMinCurveY[4];uniform vec2 renderer_SOLMinCurveZ[4];
#endif
#endif
#endif
vec2 computeParticleSizeBillboard(in vec2 size,in float normalizedAge){
#ifdef RENDERER_SOL_CURVE_MODE
float lifeSizeX=evaluateParticleCurve(renderer_SOLMaxCurveX,normalizedAge);
#ifdef RENDERER_SOL_IS_RANDOM_TWO
lifeSizeX=mix(evaluateParticleCurve(renderer_SOLMinCurveX,normalizedAge),lifeSizeX,a_Random0.z);
#endif
#ifdef RENDERER_SOL_IS_SEPARATE
float lifeSizeY=evaluateParticleCurve(renderer_SOLMaxCurveY,normalizedAge);
#ifdef RENDERER_SOL_IS_RANDOM_TWO
lifeSizeY=mix(evaluateParticleCurve(renderer_SOLMinCurveY,normalizedAge),lifeSizeY,a_Random0.z);
#endif
size*=vec2(lifeSizeX,lifeSizeY);
#else
size*=lifeSizeX;
#endif
#endif
return size;}
#ifdef RENDERER_MODE_MESH
vec3 computeParticleSizeMesh(in vec3 size,in float normalizedAge){
#ifdef RENDERER_SOL_CURVE
size*=evaluateParticleCurve(renderer_SOLMaxCurveX,normalizedAge);
#endif
#ifdef RENDERER_SOL_RANDOM_CURVES
size*=mix(evaluateParticleCurve(renderer_SOLMaxCurveX,normalizedAge),evaluateParticleCurve(u_SOLSizeGradientMax,normalizedAge),a_Random0.z);
#endif
#ifdef RENDERER_SOL_CURVE_SEPARATE
size*=vec3(evaluateParticleCurve(renderer_SOLMinCurveX,normalizedAge),evaluateParticleCurve(renderer_SOLMinCurveY,normalizedAge),evaluateParticleCurve(renderer_SOLMinCurveZ,normalizedAge));
#endif
#ifdef RENDERER_SOL_RANDOM_CURVES_SEPARATE
size*=vec3(mix(evaluateParticleCurve(renderer_SOLMinCurveX,normalizedAge),evaluateParticleCurve(renderer_SOLMaxCurveX,normalizedAge),a_Random0.z),mix(evaluateParticleCurve(renderer_SOLMinCurveY,normalizedAge),evaluateParticleCurve(renderer_SOLMaxCurveY,normalizedAge),a_Random0.z),mix(evaluateParticleCurve(renderer_SOLMinCurveZ,normalizedAge),evaluateParticleCurve(renderer_SOLMaxCurveZ,normalizedAge),a_Random0.z));
#endif
return size;}
#endif
`,F5=`#define GLSLIFY 1
#if defined(RENDERER_COL_GRADIENT) || defined(RENDERER_COL_RANDOM_GRADIENTS)
uniform vec4 renderer_COLMaxGradientColor[4];uniform vec2 renderer_COLMaxGradientAlpha[4];
#ifdef RENDERER_COL_RANDOM_GRADIENTS
uniform vec4 renderer_COLMinGradientColor[4];uniform vec2 renderer_COLMinGradientAlpha[4];
#endif
uniform vec4 renderer_COLGradientKeysMaxTime;
#endif
#if defined(RENDERER_COL_GRADIENT) || defined(RENDERER_COL_RANDOM_GRADIENTS)
vec4 evaluateParticleGradient(in vec4 colorKeys[4],in float colorKeysMaxTime,in vec2 alphaKeys[4],in float alphaKeysMaxTime,in float normalizedAge){vec4 value;float alphaAge=min(normalizedAge,alphaKeysMaxTime);for(int i=0;i<4;i++){vec2 key=alphaKeys[i];float time=key.x;if(alphaAge<=time){if(i==0){value.a=colorKeys[0].y;}else{vec2 lastKey=alphaKeys[i-1];float lastTime=lastKey.x;float age=(alphaAge-lastTime)/(time-lastTime);value.a=mix(lastKey.y,key.y,age);}break;}}float colorAge=min(normalizedAge,colorKeysMaxTime);for(int i=0;i<4;i++){vec4 key=colorKeys[i];float time=key.x;if(colorAge<=time){if(i==0){value.rgb=colorKeys[0].yzw;}else{vec4 lastKey=colorKeys[i-1];float lastTime=lastKey.x;float age=(colorAge-lastTime)/(time-lastTime);value.rgb=mix(lastKey.yzw,key.yzw,age);}break;}}return value;}
#endif
vec4 computeParticleColor(in vec4 color,in float normalizedAge){
#if defined(RENDERER_COL_GRADIENT) || defined(RENDERER_COL_RANDOM_GRADIENTS)
vec4 gradientColor=evaluateParticleGradient(renderer_COLMaxGradientColor,renderer_COLGradientKeysMaxTime.z,renderer_COLMaxGradientAlpha,renderer_COLGradientKeysMaxTime.w,normalizedAge);
#endif
#ifdef RENDERER_COL_RANDOM_GRADIENTS
gradientColor=mix(evaluateParticleGradient(renderer_COLMinGradientColor,renderer_COLGradientKeysMaxTime.x,renderer_COLMinGradientAlpha,renderer_COLGradientKeysMaxTime.y,normalizedAge),gradientColor,a_Random0.y);
#endif
#if defined(RENDERER_COL_GRADIENT) || defined(RENDERER_COL_RANDOM_GRADIENTS)
color*=gradientColor;
#endif
return color;}`,D5=`#define GLSLIFY 1
#if defined(RENDERER_TSA_FRAME_CURVE) || defined(RENDERER_TSA_FRAME_RANDOM_CURVES)
uniform float renderer_TSACycles;uniform vec3 renderer_TSATillingParams;uniform vec2 renderer_TSAFrameMaxCurve[4];
#endif
#ifdef RENDERER_TSA_FRAME_RANDOM_CURVES
uniform vec2 renderer_TSAFrameMinCurve[4];
#endif
vec2 computeParticleUV(in vec2 uv,in float normalizedAge){
#if defined(RENDERER_TSA_FRAME_CURVE) || defined(RENDERER_TSA_FRAME_RANDOM_CURVES)
float scaledNormalizedAge=normalizedAge*renderer_TSACycles;float cycleNormalizedAge=scaledNormalizedAge-floor(scaledNormalizedAge);float normalizedFrame=evaluateParticleCurve(renderer_TSAFrameMaxCurve,cycleNormalizedAge);
#ifdef RENDERER_TSA_FRAME_RANDOM_CURVES
normalizedFrame=mix(evaluateParticleCurve(renderer_TSAFrameMinCurve,cycleNormalizedAge),normalizedFrame,a_Random1.x);
#endif
float frame=floor(normalizedFrame*renderer_TSATillingParams.z);float totalULength=frame*renderer_TSATillingParams.x;float floorTotalULength=floor(totalULength);uv.x+=totalULength-floorTotalULength;uv.y+=floorTotalULength*renderer_TSATillingParams.y;
#endif
return uv;}`,B5=`#define GLSLIFY 1
#ifdef RENDERER_MODE_SPHERE_BILLBOARD
vec2 corner=a_CornerTextureCoordinate.xy+renderer_PivotOffset.xy;vec3 sideVector=normalize(cross(camera_Forward,camera_Up));vec3 upVector=normalize(cross(sideVector,camera_Forward));corner*=computeParticleSizeBillboard(a_StartSize.xy,normalizedAge);
#if defined(RENDERER_ROL_CONSTANT_MODE) || defined(RENDERER_ROL_CURVE_MODE)
if(renderer_ThreeDStartRotation){vec3 rotation=vec3(a_StartRotation0.xy,computeParticleRotationFloat(a_StartRotation0.z,age,normalizedAge));center+=renderer_SizeScale.xzy*rotationByEuler(corner.x*sideVector+corner.y*upVector,rotation);}else{float rot=computeParticleRotationFloat(a_StartRotation0.x,age,normalizedAge);float c=cos(rot);float s=sin(rot);mat2 rotation=mat2(c,-s,s,c);corner=rotation*corner;center+=renderer_SizeScale.xzy*(corner.x*sideVector+corner.y*upVector);}
#else
if(renderer_ThreeDStartRotation){center+=renderer_SizeScale.xzy*rotationByEuler(corner.x*sideVector+corner.y*upVector,a_StartRotation0);}else{float c=cos(a_StartRotation0.x);float s=sin(a_StartRotation0.x);mat2 rotation=mat2(c,-s,s,c);corner=rotation*corner;center+=renderer_SizeScale.xzy*(corner.x*sideVector+corner.y*upVector);}
#endif
#endif
`,k5=`#define GLSLIFY 1
#ifdef RENDERER_MODE_STRETCHED_BILLBOARD
vec2 corner=a_CornerTextureCoordinate.xy+renderer_PivotOffset.xy;vec3 velocity;
#if defined(RENDERER_VOL_CONSTANT) || defined(RENDERER_VOL_CURVE) || defined(RENDERER_VOL_RANDOM_CONSTANT) || defined(RENDERER_VOL_RANDOM_CURVE)
if(renderer_VOLSpace==0){velocity=rotationByQuaternions(renderer_SizeScale*(startVelocity+lifeVelocity),worldRotation)+gravityVelocity;}else{velocity=rotationByQuaternions(renderer_SizeScale*startVelocity,worldRotation)+lifeVelocity+gravityVelocity;}
#else
velocity=rotationByQuaternions(renderer_SizeScale*startVelocity,worldRotation)+gravityVelocity;
#endif
vec3 cameraUpVector=normalize(velocity);vec3 direction=normalize(center-camera_Position);vec3 sideVector=normalize(cross(direction,normalize(velocity)));sideVector=renderer_SizeScale.xzy*sideVector;cameraUpVector=length(vec3(renderer_SizeScale.x,0.0,0.0))*cameraUpVector;vec2 size=computeParticleSizeBillboard(a_StartSize.xy,normalizedAge);const mat2 rotationZHalfPI=mat2(0.0,-1.0,1.0,0.0);corner=rotationZHalfPI*corner;corner.y=corner.y-abs(corner.y);float speed=length(velocity);center+=sign(renderer_SizeScale.x)*(sign(renderer_StretchedBillboardLengthScale)*size.x*corner.x*sideVector+(speed*renderer_StretchedBillboardSpeedScale+size.y*renderer_StretchedBillboardLengthScale)*corner.y*cameraUpVector);
#endif
`,V5=`#define GLSLIFY 1
#ifdef RENDERER_MODE_VERTICAL_BILLBOARD
vec2 corner=a_CornerTextureCoordinate.xy+renderer_PivotOffset.xy;const vec3 cameraUpVector=vec3(0.0,1.0,0.0);vec3 sideVector=normalize(cross(camera_Forward,cameraUpVector));float rot=computeParticleRotationFloat(a_StartRotation0.x,age,normalizedAge);float c=cos(rot);float s=sin(rot);mat2 rotation=mat2(c,-s,s,c);corner=rotation*corner*cos(0.78539816339744830961566084581988);corner*=computeParticleSizeBillboard(a_StartSize.xy,normalizedAge);center+=renderer_SizeScale.xzy*(corner.x*sideVector+corner.y*cameraUpVector);
#endif
`,U5=`#define GLSLIFY 1
#ifdef RENDERER_MODE_HORIZONTAL_BILLBOARD
vec2 corner=a_CornerTextureCoordinate.xy+renderer_PivotOffset.xy;const vec3 cameraUpVector=vec3(0.0,0.0,1.0);const vec3 sideVector=vec3(-1.0,0.0,0.0);float rot=computeParticleRotationFloat(a_StartRotation0.x,age,normalizedAge);float c=cos(rot);float s=sin(rot);mat2 rotation=mat2(c,-s,s,c);corner=rotation*corner*cos(0.78539816339744830961566084581988);corner*=computeParticleSizeBillboard(a_StartSize.xy,normalizedAge);center+=renderer_SizeScale.xzy*(corner.x*sideVector+corner.y*cameraUpVector);
#endif
`,z5=`#define GLSLIFY 1
#ifdef RENDERER_MODE_MESH
vec3 size=computeParticleSizeMesh(a_StartSize,normalizedAge);
#if defined(RENDERER_ROL_CONSTANT_MODE) || defined(RENDERER_ROL_CURVE_MODE)
if(renderer_ThreeDStartRotation){vec3 rotation=vec3(a_StartRotation0.xy,computeParticleRotationFloat(a_StartRotation0.z,age,normalizedAge));center+=rotationByQuaternions(renderer_SizeScale*rotationByEuler(a_MeshPosition*size,rotation),worldRotation);}else{
#ifdef RENDERER_ROL_IS_SEPARATE
float angle=computeParticleRotationFloat(a_StartRotation0.x,age,normalizedAge);if(a_ShapePositionStartLifeTime.x!=0.0||a_ShapePositionStartLifeTime.y!=0.0){center+=(rotationByQuaternions(rotationByAxis(renderer_SizeScale*a_MeshPosition*size,normalize(cross(vec3(0.0,0.0,1.0),vec3(a_ShapePositionStartLifeTime.xy,0.0))),angle),worldRotation));}else{
#ifdef SHAPE
center+=renderer_SizeScale.xzy*(rotationByQuaternions(rotationByAxis(a_MeshPosition*size,vec3(0.0,-1.0,0.0),angle),worldRotation));
#else
if(renderer_SimulationSpace==1)center+=rotationByAxis(renderer_SizeScale*a_MeshPosition*size,vec3(0.0,0.0,-1.0),angle);else if(renderer_SimulationSpace==0)center+=rotationByQuaternions(renderer_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,0.0,-1.0),angle),worldRotation);
#endif
}
#endif
#ifdef ROTATION_OVER_LIFETIME_SEPARATE
vec3 angle=computeParticleRotationVec3(vec3(0.0,0.0,-a_StartRotation0.x),age,normalizedAge);center+=(rotationByQuaternions(rotationByEuler(renderer_SizeScale*a_MeshPosition*size,vec3(angle.x,angle.y,angle.z)),worldRotation));
#endif
}
#else
if(renderer_ThreeDStartRotation){center+=rotationByQuaternions(renderer_SizeScale*rotationByEuler(a_MeshPosition*size,a_StartRotation0),worldRotation);}else{if(a_ShapePositionStartLifeTime.x!=0.0||a_ShapePositionStartLifeTime.y!=0.0){if(renderer_SimulationSpace==1)center+=rotationByAxis(renderer_SizeScale*a_MeshPosition*size,normalize(cross(vec3(0.0,0.0,1.0),vec3(a_ShapePositionStartLifeTime.xy,0.0))),a_StartRotation0.x);else if(renderer_SimulationSpace==0)center+=(rotationByQuaternions(renderer_SizeScale*rotationByAxis(a_MeshPosition*size,normalize(cross(vec3(0.0,0.0,1.0),vec3(a_ShapePositionStartLifeTime.xy,0.0))),a_StartRotation0.x),worldRotation));}else{
#ifdef SHAPE
if(renderer_SimulationSpace==1)center+=renderer_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,-1.0,0.0),a_StartRotation0.x);else if(renderer_SimulationSpace==0)center+=rotationByQuaternions(renderer_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,-1.0,0.0),a_StartRotation0.x),worldRotation);
#else
if(renderer_SimulationSpace==1)center+=rotationByAxis(renderer_SizeScale*a_MeshPosition*size,vec3(0.0,0.0,-1.0),a_StartRotation0.x);else if(renderer_SimulationSpace==0)center+=rotationByQuaternions(renderer_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,0.0,-1.0),a_StartRotation0.x),worldRotation);
#endif
}}
#endif
v_MeshColor=a_MeshColor;
#endif
`,G5={particle_common:O5,velocity_over_lifetime_module:I5,rotation_over_lifetime_module:L5,size_over_lifetime_module:N5,color_over_lifetime_module:F5,texture_sheet_animation_module:D5,sphere_billboard:B5,stretched_billboard:k5,vertical_billboard:V5,horizontal_billboard:U5,particle_mesh:z5},H5=`#define GLSLIFY 1
vec3 getNormal(bool isFrontFacing){
#ifdef RENDERER_HAS_NORMAL
vec3 normal=normalize(v_normal);
#elif defined(HAS_DERIVATIVES)
vec3 pos_dx=dFdx(v_pos);vec3 pos_dy=dFdy(v_pos);vec3 normal=normalize(cross(pos_dx,pos_dy));normal*=camera_ProjectionParams.x;
#else
vec3 normal=vec3(0,0,1);
#endif
normal*=float(isFrontFacing)*2.0-1.0;return normal;}vec3 getNormalByNormalTexture(mat3 tbn,sampler2D normalTexture,float normalIntensity,vec2 uv,bool isFrontFacing){vec3 normal=texture2D(normalTexture,uv).rgb;normal=normalize(tbn*((2.0*normal-1.0)*vec3(normalIntensity,normalIntensity,1.0)));normal*=float(isFrontFacing)*2.0-1.0;return normal;}mat3 getTBN(bool isFrontFacing){
#if defined(RENDERER_HAS_NORMAL) && defined(RENDERER_HAS_TANGENT) && ( defined(MATERIAL_HAS_NORMALTEXTURE) || defined(MATERIAL_HAS_CLEAR_COAT_NORMAL_TEXTURE) || defined(MATERIAL_ENABLE_ANISOTROPY) )
mat3 tbn=v_TBN;
#else
vec3 normal=getNormal(isFrontFacing);vec3 position=v_pos;vec2 uv=isFrontFacing? v_uv:-v_uv;
#ifdef HAS_DERIVATIVES
vec3 dp1=dFdx(position);vec3 dp2=dFdy(position);vec2 duv1=dFdx(uv);vec2 duv2=dFdy(uv);vec3 dp2perp=cross(dp2,normal);vec3 dp1perp=cross(normal,dp1);vec3 tangent=dp2perp*duv1.x+dp1perp*duv2.x;vec3 bitangent=dp2perp*duv1.y+dp1perp*duv2.y;float denom=max(dot(tangent,tangent),dot(bitangent,bitangent));float invmax=(denom==0.0)? 0.0 : camera_ProjectionParams.x/sqrt(denom);mat3 tbn=mat3(tangent*invmax,bitangent*invmax,normal);
#else
mat3 tbn=mat3(vec3(0.0),vec3(0.0),normal);
#endif
#endif
return tbn;}`,Pu=n0({common:Mz,common_vert:Oz,transform_declare:Iz,camera_declare:Pz,color_share:Lz,normal_share:Dz,uv_share:Bz,worldpos_share:kz,FogVertexDeclaration:Fz,FogFragmentDeclaration:Nz,begin_normal_vert:Vz,begin_position_vert:Uz,position_vert:$z,color_vert:Hz,normal_vert:Wz,skinning_vert:Xz,blendShape_input:zz,blendShape_vert:Gz,uv_vert:Kz,worldpos_vert:Yz,FogVertex:jz,light_frag_define:qz,mobile_material_frag:Jz,FogFragment:Qz,begin_mobile_frag:Zz,begin_viewdir_frag:e5,mobile_blinnphong_frag:t5,noise_common:s5,noise_cellular_2D:r5,noise_cellular_2x2:a5,noise_cellular_2x2x2:i5,noise_cellular_3D:o5,noise_cellular:n5,noise_perlin_2D:u5,noise_perlin_3D:c5,noise_perlin_4D:f5,noise_perlin:l5,noise_psrd_2D:d5,noise_simplex_2D:v5,noise_simplex_3D_grad:_5,noise_simplex_3D:p5,noise_simplex_4D:g5,noise_simplex:h5},M5,E5,{normal_get:H5},G5),Ko=function(){function n(){}return n.parseCustomMacros=function(a){return a.map(function(e){return"#define "+e+`
`}).join("")},n.registerInclude=function(a,e){if(Pu[a])throw'The "'+a+'" shader include already exist';Pu[a]=e},n.unRegisterInclude=function(a){delete Pu[a]},n.parseIncludes=function(a,e){e===void 0&&(e=/^[ \t]*#include +<([\w\d.]+)>/gm);var t=function(o,s){var l=Pu[s];return l===void 0?(Pt.error('Shader slice "'+o.trim()+'" not founded.'),""):n.parseIncludes(l,e)};return a.replace(e,t)},n.convertTo300=function(a,e){if(a=a.replace(/\bvarying\b/g,e?"in":"out"),a=a.replace(/\btexture(2D|Cube)\b/g,"texture"),a=a.replace(/\btexture2DProj\b/g,"textureProj"),e){if(a=a.replace(/\btexture(2D|Cube)LodEXT\b/g,"textureLod"),a=a.replace(/\btexture(2D|Cube)GradEXT\b/g,"textureGrad"),a=a.replace(/\btexture2DProjLodEXT\b/g,"textureProjLod"),a=a.replace(/\btexture2DProjGradEXT\b/g,"textureProjGrad"),a=a.replace(/\bgl_FragDepthEXT\b/g,"gl_FragDepth"),!n._has300Output(a)){var t=/\bgl_FragData\[.+?\]/g.test(a);if(t){a=a.replace(/\bgl_FragColor\b/g,"gl_FragData[0]");var i=a.match(/\bgl_FragData\[.+?\]/g);a=this._replaceMRTShader(a,i)}else a=a.replace(/void\s+?main\s*\(/g,`out vec4 glFragColor;
void main(`),a=a.replace(/\bgl_FragColor\b/g,"glFragColor")}}else a=a.replace(/\battribute\b/g,"in");return a},n._has300Output=function(a){return n._has300OutInFragReg.test(a)},n._replaceMRTShader=function(a,e){for(var t="",i=new Set,o=0;o<e.length;o++){var s=e[o].match(/\bgl_FragData\[(.+?)\]/);i.add(s[1])}return i.forEach(function(l){t+="layout(location="+l+") out vec4 fragOutColor"+l+`;
`}),t+="void main(",a=a.replace(/\bgl_FragData\[(.+?)\]/g,"fragOutColor$1"),a=a.replace(/void\s+?main\s*\(/g,t),a},n}();(function(){Ko._shaderExtension=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives","GL_EXT_draw_buffers","GL_EXT_frag_depth"].map(function(n){return"#extension "+n+` : enable
`}).join("")})();(function(){Ko._has300OutInFragReg=/\bout\s+(?:\w+\s+)?(?:vec4)\s+(?:\w+)\s*;/})();var is=function(){function n(r){this.name=r,this._uniqueId=n._nameCounter++}return n.getByName=function(a){var e,t,i=n._nameMap;return(e=i)[t=a]||(e[t]=new n(a))},n}();(function(){is._nameCounter=0})();(function(){is._nameMap=Object.create(null)})();var dP=function(){function n(){this._tagsMap=Object.create(null)}var r=n.prototype;return r.setTag=function(e,t){var i=typeof e=="string"?is.getByName(e):e,o=this._tagsMap;o[i._uniqueId]!==void 0&&Pt.warn('The value of tag named "'+i.name+'" is being replaced.'),o[i._uniqueId]=t},r.deleteTag=function(e){delete this._tagsMap[(typeof e=="string"?is.getByName(e):e)._uniqueId]},r.getTagValue=function(e){return this._tagsMap[typeof e=="string"?is.getByName(e)._uniqueId:e._uniqueId]},Ie(n,[{key:"name",get:function(){return this._name}}]),n}(),Ja;(function(n){n[n.Linear=0]="Linear",n[n.Gamma=1]="Gamma"})(Ja||(Ja={}));var j5=function(){function n(a){this.textureUseCompareMode=!1;var e=a._hardwareRenderer;this._rhi=e,this._gl=e.gl,this._colorSpace=a.settings.colorSpace}var r=n.prototype;return r.upload1f=function(e,t){this.cacheValue!==t&&(this._gl.uniform1f(e.location,t),this.cacheValue=t)},r.upload1fv=function(e,t){this._gl.uniform1fv(e.location,t)},r.upload2f=function(e,t){var i=this.cacheValue;t.r!==void 0?(i.x!==t.r||i.y!==t.g)&&(this._colorSpace===Ja.Linear?this._gl.uniform2f(e.location,Me.gammaToLinearSpace(t.r),Me.gammaToLinearSpace(t.g)):this._gl.uniform2f(e.location,t.r,t.g),i.x=t.r,i.y=t.g):(i.x!==t.x||i.y!==t.y)&&(this._gl.uniform2f(e.location,t.x,t.y),i.x=t.x,i.y=t.y)},r.upload2fv=function(e,t){this._gl.uniform2fv(e.location,t)},r.upload3f=function(e,t){var i=this.cacheValue;t.r!==void 0?(i.x!==t.r||i.y!==t.g||i.z!==t.b)&&(this._colorSpace===Ja.Linear?this._gl.uniform3f(e.location,Me.gammaToLinearSpace(t.r),Me.gammaToLinearSpace(t.g),Me.gammaToLinearSpace(t.b)):this._gl.uniform3f(e.location,t.r,t.g,t.b),i.x=t.r,i.y=t.g,i.z=t.b):(i.x!==t.x||i.y!==t.y||i.z!==t.z)&&(this._gl.uniform3f(e.location,t.x,t.y,t.z),i.x=t.x,i.y=t.y,i.z=t.z)},r.upload3fv=function(e,t){this._gl.uniform3fv(e.location,t)},r.upload4f=function(e,t){var i=this.cacheValue;t.r!==void 0?(i.x!==t.r||i.y!==t.g||i.z!==t.b||i.w!==t.a)&&(this._colorSpace===Ja.Linear?this._gl.uniform4f(e.location,Me.gammaToLinearSpace(t.r),Me.gammaToLinearSpace(t.g),Me.gammaToLinearSpace(t.b),t.a):this._gl.uniform4f(e.location,t.r,t.g,t.b,t.a),i.x=t.r,i.y=t.g,i.z=t.b,i.w=t.a):(i.x!==t.x||i.y!==t.y||i.z!==t.z||i.w!==t.w)&&(this._gl.uniform4f(e.location,t.x,t.y,t.z,t.w),i.x=t.x,i.y=t.y,i.z=t.z,i.w=t.w)},r.upload4fv=function(e,t){this._gl.uniform4fv(e.location,t)},r.upload1i=function(e,t){this.cacheValue!==t&&(this._gl.uniform1i(e.location,t),this.cacheValue=t)},r.upload1iv=function(e,t){this._gl.uniform1iv(e.location,t)},r.upload2i=function(e,t){var i=this.cacheValue;t.r!==void 0?(i.x!==t.r||i.y!==t.g)&&(this._gl.uniform2i(e.location,t.r,t.g),i.x=t.r,i.y=t.g):(i.x!==t.x||i.y!==t.y)&&(this._gl.uniform2i(e.location,t.x,t.y),i.x=t.x,i.y=t.y)},r.upload2iv=function(e,t){this._gl.uniform2iv(e.location,t)},r.upload3i=function(e,t){var i=this.cacheValue;t.r!==void 0?(i.x!==t.r||i.y!==t.g||i.z!==t.b)&&(this._gl.uniform3i(e.location,t.r,t.g,t.b),i.x=t.r,i.y=t.g,i.z=t.b):(i.x!==t.x||i.y!==t.y||i.z!==t.z)&&(this._gl.uniform3i(e.location,t.x,t.y,t.z),i.x=t.x,i.y=t.y,i.z=t.z)},r.upload3iv=function(e,t){this._gl.uniform3iv(e.location,t)},r.upload4i=function(e,t){var i=this.cacheValue;t.r!==void 0?(i.x!==t.r||i.y!==t.g||i.z!==t.b||i.w!==t.a)&&(this._gl.uniform4i(e.location,t.r,t.g,t.b,t.a),i.x=t.r,i.y=t.g,i.z=t.b,i.w=t.a):(i.x!==t.x||i.y!==t.y||i.z!==t.z||i.w!==t.w)&&(this._gl.uniform4i(e.location,t.x,t.y,t.z,t.w),i.x=t.x,i.y=t.y,i.z=t.z,i.w=t.w)},r.upload4iv=function(e,t){this._gl.uniform4iv(e.location,t)},r.uploadMat4=function(e,t){this._gl.uniformMatrix4fv(e.location,!1,t.elements)},r.uploadMat4v=function(e,t){this._gl.uniformMatrix4fv(e.location,!1,t)},r.uploadTexture=function(e,t){var i=this._rhi;i.activeTexture(e.textureIndex),i.bindTexture(t._platformTexture),t._setUseDepthCompareMode(e.textureUseCompareMode)},r.uploadTextureArray=function(e,t){for(var i=this._rhi,o=e.textureIndex,s=0;s<t.length;s++){var l=t[s];i.activeTexture(o[s]),i.bindTexture(l._platformTexture),l._setUseDepthCompareMode(e.textureUseCompareMode)}},n}(),tf=function(){this.constUniforms=[],this.textureUniforms=[]},bi;(function(n){n[n.Scene=0]="Scene",n[n.Camera=1]="Camera",n[n.Renderer=2]="Renderer",n[n.Material=3]="Material"})(bi||(bi={}));var hP=function(){function n(a,e,t){this.sceneUniformBlock=new tf,this.cameraUniformBlock=new tf,this.rendererUniformBlock=new tf,this.materialUniformBlock=new tf,this.otherUniformBlock=new tf,this._uploadRenderCount=-1,this._uploadSceneId=-1,this._uploadCameraId=-1,this._uploadRendererId=-1,this._uploadMaterialId=-1,this.attributeLocation=Object.create(null),this._activeTextureUint=0,this._engine=a,this._gl=a._hardwareRenderer.gl,this._glProgram=this._createProgram(e,t),this._glProgram?(this._isValid=!0,this._recordLocation()):this._isValid=!1,this.id=n._counter++}var r=n.prototype;return r.uploadAll=function(e,t){this.uploadUniforms(e,t),this.uploadTextures(e,t)},r.uploadUniforms=function(e,t){for(var i=t._propertyValueMap,o=e.constUniforms,s=0,l=o.length;s<l;s++){var u=o[s],c=i[u.propertyId];c!=null&&u.applyFunc(u,c)}},r.uploadTextures=function(e,t){var i=t._propertyValueMap,o=e.textureUniforms;if(o)for(var s=0,l=o.length;s<l;s++){var u=o[s],c=i[u.propertyId];c&&!c.destroyed?u.applyFunc(u,c):u.applyFunc(u,u.textureDefault)}},r.uploadUnGroupTextures=function(){var e=this.otherUniformBlock.textureUniforms;if(e)for(var t=0,i=e.length;t<i;t++){var o=e[t];o.applyFunc(o,o.textureDefault)}},r.groupingOtherUniformBlock=function(){var e=this.otherUniformBlock,t=e.constUniforms,i=e.textureUniforms;t.length>0&&this._groupingSubOtherUniforms(t,!1),i.length>0&&this._groupingSubOtherUniforms(i,!0)},r.bind=function(){var e=this._engine._hardwareRenderer;return e._currentBindShaderProgram!==this?(this._gl.useProgram(this._glProgram),e._currentBindShaderProgram=this,!0):!1},r.destroy=function(){var e=this._gl;this._glProgram&&e.deleteProgram(this._glProgram)},r._groupingSubOtherUniforms=function(e,t){for(var i=e.length-1;i>=0;i--){var o=e[i],s=X._getShaderPropertyGroup(o.name);s!==void 0&&(e.splice(e.indexOf(o),1),this._groupingUniform(o,s,t))}},r._groupingUniform=function(e,t,i){switch(t){case bi.Scene:i?this.sceneUniformBlock.textureUniforms.push(e):this.sceneUniformBlock.constUniforms.push(e);break;case bi.Camera:i?this.cameraUniformBlock.textureUniforms.push(e):this.cameraUniformBlock.constUniforms.push(e);break;case bi.Renderer:i?this.rendererUniformBlock.textureUniforms.push(e):this.rendererUniformBlock.constUniforms.push(e);break;case bi.Material:i?this.materialUniformBlock.textureUniforms.push(e):this.materialUniformBlock.constUniforms.push(e);break;default:i?this.otherUniformBlock.textureUniforms.push(e):this.otherUniformBlock.constUniforms.push(e)}},r._createProgram=function(e,t){var i=this._gl,o=this._createShader(i.VERTEX_SHADER,e);if(!o)return null;var s=this._createShader(i.FRAGMENT_SHADER,t);if(!s)return null;var l=i.createProgram();return l?(i.attachShader(l,o),i.attachShader(l,s),i.linkProgram(l),i.validateProgram(l),i.deleteShader(o),i.deleteShader(s),Pt.isEnabled&&!i.getProgramParameter(l,i.LINK_STATUS)&&!i.isContextLost()?(Pt.error(`Could not link WebGL program

`+("Shader error: "+i.getError()+`

`)+("Validate status: "+i.getProgramParameter(l,i.VALIDATE_STATUS)+`

`)+("Program information log: "+i.getProgramInfoLog(l))),i.deleteProgram(l),null):l):(console.warn("Context lost while create program."),null)},r._createShader=function(e,t){var i=this._gl,o=i.createShader(e);return o?(i.shaderSource(o,t),i.compileShader(o),Pt.isEnabled&&!i.getShaderParameter(o,i.COMPILE_STATUS)&&!i.isContextLost()?(console.warn(`Could not compile WebGL shader

`+("Shader type: "+(e==i.VERTEX_SHADER?"vertex":"fragment")+`

`)+(`Shader information log:
`+i.getShaderInfoLog(o)+`
`)+(`Shader source:
`+n._addLineNum(t))),i.deleteShader(o),null):o):(console.warn("Context lost while create shader."),null)},r._recordLocation=function(){var e=this,t=this._gl,i=this._glProgram,o=this._getUniformInfos(),s=this._getAttributeInfos();o.forEach(function(l){var u=l.name,c=l.size,f=l.type,d=new j5(e._engine),h=!1,_=!1;u.indexOf("[0]")>0&&(u=u.substr(0,u.length-3),h=!0);var p=t.getUniformLocation(i,u);switch(d.name=u,d.propertyId=X.getByName(u)._uniqueId,d.location=p,f){case t.FLOAT:h?d.applyFunc=d.upload1fv:(d.applyFunc=d.upload1f,d.cacheValue=0);break;case t.FLOAT_VEC2:h?d.applyFunc=d.upload2fv:(d.applyFunc=d.upload2f,d.cacheValue=new Ze(0,0));break;case t.FLOAT_VEC3:h?d.applyFunc=d.upload3fv:(d.applyFunc=d.upload3f,d.cacheValue=new z(0,0,0));break;case t.FLOAT_VEC4:h?d.applyFunc=d.upload4fv:(d.applyFunc=d.upload4f,d.cacheValue=new pt(0,0,0,0));break;case t.BOOL:case t.INT:h?d.applyFunc=d.upload1iv:(d.applyFunc=d.upload1i,d.cacheValue=0);break;case t.BOOL_VEC2:case t.INT_VEC2:h?d.applyFunc=d.upload2iv:(d.applyFunc=d.upload2i,d.cacheValue=new Ze(0,0));break;case t.BOOL_VEC3:case t.INT_VEC3:h?d.applyFunc=d.upload3iv:(d.applyFunc=d.upload3i,d.cacheValue=new z(0,0,0));break;case t.BOOL_VEC4:case t.INT_VEC4:h?d.applyFunc=d.upload4iv:(d.applyFunc=d.upload4i,d.cacheValue=new pt(0,0,0));break;case t.FLOAT_MAT4:d.applyFunc=h?d.uploadMat4v:d.uploadMat4;break;case t.SAMPLER_2D:case t.SAMPLER_CUBE:case t.UNSIGNED_INT_SAMPLER_2D:case t.SAMPLER_2D_ARRAY:case t.SAMPLER_2D_SHADOW:var v;switch(f){case t.SAMPLER_2D:v=e._engine._magentaTexture2D;break;case t.SAMPLER_CUBE:v=e._engine._magentaTextureCube;break;case t.UNSIGNED_INT_SAMPLER_2D:v=e._engine._uintMagentaTexture2D;break;case t.SAMPLER_2D_ARRAY:v=e._engine._magentaTexture2DArray;break;case t.SAMPLER_2D_SHADOW:v=e._engine._depthTexture2D,d.textureUseCompareMode=!0;break}if(_=!0,h){for(var y=new Array(c),m=new Int32Array(c),g=new Array(c),x=0;x<c;x++)y[x]=v,m[x]=e._activeTextureUint,g[x]=t.TEXTURE0+e._activeTextureUint++;d.textureDefault=y,d.textureIndex=g,d.applyFunc=d.uploadTextureArray,e.bind(),t.uniform1iv(p,m)}else{var b=t.TEXTURE0+e._activeTextureUint;d.textureDefault=v,d.textureIndex=b,d.applyFunc=d.uploadTexture,e.bind(),t.uniform1i(p,e._activeTextureUint++)}break;default:throw new Error("Unsupported uniform type")}var S=X._getShaderPropertyGroup(u);e._groupingUniform(d,S,_)}),s.forEach(function(l){var u=l.name;e.attributeLocation[u]=t.getAttribLocation(i,u)})},r._getUniformInfos=function(){for(var e=this._gl,t=this._glProgram,i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),o=new Array(i),s=0;s<i;++s){var l=e.getActiveUniform(t,s);o[s]=l}return o},r._getAttributeInfos=function(){for(var e=this._gl,t=this._glProgram,i=new Array,o=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<o;++s){var l=e.getActiveAttrib(t,s);i[s]=l}return i},n._addLineNum=function(e){var t=e.split(`
`),i=(t.length+1).toString().length+6,o;return t.map(function(s,l){if(o="0:"+(l+1),o.length>=i)return o.substring(0,i)+s;for(var u=0;u<i-o.length;u++)o+=" ";return o+s}).join(`
`)},Ie(n,[{key:"isValid",get:function(){return this._isValid}}]),n}();(function(){hP._counter=0})();var vr=function(n){be(r,n);function r(e,t,i,o){var s;s=n.call(this)||this,s._shaderPassId=0,s._renderStateDataMap={},s._shaderProgramPools=[],s._shaderPassId=r._shaderPassCounter++,typeof i=="string"?(s._name=e,s._vertexSource=t,s._fragmentSource=i,o=o!=null?o:{pipelineStage:da.Forward}):(s._name="Default",s._vertexSource=e,s._fragmentSource=t,o=i!=null?i:{pipelineStage:da.Forward});for(var l in o)s.setTag(l,o[l]);return s}var a=r.prototype;return a._getShaderProgram=function(t,i){var o=t._getShaderProgramPool(this),s=o.get(i);if(s)return s;var l=t._hardwareRenderer.isWebGL2,u=[];_t._getNamesByMacros(i,u);var c=Ko.parseCustomMacros(u),f=l?"#version 300 es":"#version 100",d=l?"#define GRAPHICS_API_WEBGL2":"#define GRAPHICS_API_WEBGL1",h=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
      precision highp float;
      precision highp int;
    #else
      precision mediump float;
      precision mediump int;
    #endif
    `;t._hardwareRenderer.canIUse(Ue.shaderTextureLod)&&(h+=`#define HAS_TEX_LOD
`),t._hardwareRenderer.canIUse(Ue.standardDerivatives)&&(h+=`#define HAS_DERIVATIVES
`);var _=" "+f+`
        `+d+`
        `+c+`
      `+Ko.parseIncludes(this._vertexSource),p=" "+f+`
        `+d+`
        `+(l?"":Ko._shaderExtension)+`
        `+h+`
        `+c+`
      `+Ko.parseIncludes(this._fragmentSource);return l&&(_=Ko.convertTo300(_),p=Ko.convertTo300(p,!0)),s=new hP(t,_,p),o.cache(s),s},a._destroy=function(){for(var t=this._shaderProgramPools,i=0,o=t.length;i<o;i++)t[i]._destroy();t.length=0},r}(dP);(function(){vr._shaderPassCounter=0})();var nv=function(n){be(r,n);function r(a,e,t){var i;i=n.call(this)||this,i._name=a;var o=e.length;if(o<1)throw" count must large than 0.";i._passes=e.slice();for(var s in t)i.setTag(s,t[s]);return i}return Ie(r,[{key:"passes",get:function(){return this._passes}}]),r}(dP),vP=function(){this.enabled=!1,this.colorBlendOperation=Mr.Add,this.alphaBlendOperation=Mr.Add,this.sourceColorBlendFactor=jt.One,this.sourceAlphaBlendFactor=jt.One,this.destinationColorBlendFactor=jt.Zero,this.destinationAlphaBlendFactor=jt.Zero,this.colorWriteMask=Si.All},s_=function(){function n(){this.targetBlendState=new vP,this.blendColor=new Me(0,0,0,0),this.alphaToCoverage=!1}var r=n.prototype;return r._applyShaderDataValue=function(e,t){var i=this.targetBlendState,o=e[ut.BlendStateEnabled0];if(o!==void 0){var s=t.getFloat(o);i.enabled=s!==void 0?!!s:!1}var l=e[ut.BlendStateColorBlendOperation0];if(l!==void 0){var u;i.colorBlendOperation=(u=t.getFloat(l))!=null?u:Mr.Add}var c=e[ut.BlendStateAlphaBlendOperation0];if(c!==void 0){var f;i.alphaBlendOperation=(f=t.getFloat(c))!=null?f:Mr.Add}var d=e[ut.BlendStateSourceColorBlendFactor0];if(d!==void 0){var h;i.sourceColorBlendFactor=(h=t.getFloat(d))!=null?h:jt.One}var _=e[ut.BlendStateSourceAlphaBlendFactor0];if(_!==void 0){var p;i.sourceAlphaBlendFactor=(p=t.getFloat(_))!=null?p:jt.One}var v=e[ut.BlendStateDestinationColorBlendFactor0];if(v!==void 0){var y;i.destinationColorBlendFactor=(y=t.getFloat(v))!=null?y:jt.Zero}var m=e[ut.BlendStateDestinationAlphaBlendFactor0];if(m!==void 0){var g;i.destinationAlphaBlendFactor=(g=t.getFloat(m))!=null?g:jt.Zero}var x=e[ut.BlendStateColorWriteMask0];if(x!==void 0){var b;i.colorWriteMask=(b=t.getFloat(x))!=null?b:Si.All}var S=e[ut.BlendStateBlendColor];if(S!==void 0){var C=t.getColor(S);C!==void 0&&this.blendColor.copyFrom(C)}var E=e[ut.BlendStateAlphaToCoverage];if(E!==void 0){var T=t.getFloat(E);this.alphaToCoverage=T!==void 0?!!T:!1}},r._apply=function(e,t){this._platformApply(e,t.blendState)},r._platformApply=function(e,t){var i=e.gl,o=t.targetBlendState,s=this.targetBlendState,l=s.enabled,u=s.colorBlendOperation,c=s.alphaBlendOperation,f=s.sourceColorBlendFactor,d=s.destinationColorBlendFactor,h=s.sourceAlphaBlendFactor,_=s.destinationAlphaBlendFactor,p=s.colorWriteMask;if(l!==o.enabled&&(l?i.enable(i.BLEND):i.disable(i.BLEND),o.enabled=l),l){(f!==o.sourceColorBlendFactor||d!==o.destinationColorBlendFactor||h!==o.sourceAlphaBlendFactor||_!==o.destinationAlphaBlendFactor)&&(i.blendFuncSeparate(n._getGLBlendFactor(e,f),n._getGLBlendFactor(e,d),n._getGLBlendFactor(e,h),n._getGLBlendFactor(e,_)),o.sourceColorBlendFactor=f,o.destinationColorBlendFactor=d,o.sourceAlphaBlendFactor=h,o.destinationAlphaBlendFactor=_),(u!==o.colorBlendOperation||c!==o.alphaBlendOperation)&&(i.blendEquationSeparate(n._getGLBlendOperation(e,u),n._getGLBlendOperation(e,c)),o.colorBlendOperation=u,o.alphaBlendOperation=c);var v=this.blendColor;Me.equals(t.blendColor,v)||(i.blendColor(v.r,v.g,v.b,v.a),t.blendColor.copyFrom(v))}p!==o.colorWriteMask&&(i.colorMask((p&Si.Red)!==0,(p&Si.Green)!==0,(p&Si.Blue)!==0,(p&Si.Alpha)!==0),o.colorWriteMask=p);var y=this.alphaToCoverage;y!==t.alphaToCoverage&&(y?i.enable(i.SAMPLE_ALPHA_TO_COVERAGE):i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),t.alphaToCoverage=y)},n._getGLBlendFactor=function(e,t){var i=e.gl;switch(t){case jt.Zero:return i.ZERO;case jt.One:return i.ONE;case jt.SourceColor:return i.SRC_COLOR;case jt.OneMinusSourceColor:return i.ONE_MINUS_SRC_COLOR;case jt.DestinationColor:return i.DST_COLOR;case jt.OneMinusDestinationColor:return i.ONE_MINUS_DST_COLOR;case jt.SourceAlpha:return i.SRC_ALPHA;case jt.OneMinusSourceAlpha:return i.ONE_MINUS_SRC_ALPHA;case jt.DestinationAlpha:return i.DST_ALPHA;case jt.OneMinusDestinationAlpha:return i.ONE_MINUS_DST_ALPHA;case jt.SourceAlphaSaturate:return i.SRC_ALPHA_SATURATE;case jt.BlendColor:return i.CONSTANT_COLOR;case jt.OneMinusBlendColor:return i.ONE_MINUS_CONSTANT_COLOR}},n._getGLBlendOperation=function(e,t){var i=e.gl;switch(t){case Mr.Add:return i.FUNC_ADD;case Mr.Subtract:return i.FUNC_SUBTRACT;case Mr.ReverseSubtract:return i.FUNC_REVERSE_SUBTRACT;case Mr.Min:if(!e.canIUse(Ue.blendMinMax))throw new Error("BlendOperation.Min is not supported in this context");return i.MIN;case Mr.Max:if(!e.canIUse(Ue.blendMinMax))throw new Error("BlendOperation.Max is not supported in this context");return i.MAX}},n}();H([Xe],s_.prototype,"targetBlendState",void 0);H([Xe],s_.prototype,"blendColor",void 0);var pP=function(){function n(){this.enabled=!0,this.compareFunction=Xt.Less,this.writeEnabled=!0}var r=n.prototype;return r._applyShaderDataValue=function(e,t){var i=e[ut.DepthStateEnabled];if(i!==void 0){var o=t.getFloat(i);this.enabled=o!==void 0?!!o:!1}var s=e[ut.DepthStateWriteEnabled];if(s!==void 0){var l=t.getFloat(s);this.writeEnabled=l!==void 0?!!l:!1}var u=e[ut.DepthStateCompareFunction];if(u!==void 0){var c;this.compareFunction=(c=t.getFloat(u))!=null?c:Xt.Less}},r._apply=function(e,t){this._platformApply(e,t.depthState)},r._platformApply=function(e,t){var i=e.gl,o=this,s=o.enabled,l=o.compareFunction,u=o.writeEnabled;s!=t.enabled&&(s?i.enable(i.DEPTH_TEST):i.disable(i.DEPTH_TEST),t.enabled=s),s&&l!=t.compareFunction&&(i.depthFunc(n._getGLCompareFunction(e,l)),t.compareFunction=l),u!=t.writeEnabled&&(i.depthMask(u),t.writeEnabled=u)},n._getGLCompareFunction=function(e,t){var i=e.gl;switch(t){case Xt.Never:return i.NEVER;case Xt.Less:return i.LESS;case Xt.Equal:return i.EQUAL;case Xt.LessEqual:return i.LEQUAL;case Xt.Greater:return i.GREATER;case Xt.NotEqual:return i.NOTEQUAL;case Xt.GreaterEqual:return i.GEQUAL;case Xt.Always:return i.ALWAYS}},n}(),_P=function(){function n(){this.cullMode=Fr.Back,this.depthBias=0,this.slopeScaledDepthBias=0,this._cullFaceEnable=!0,this._frontFaceInvert=!1}var r=n.prototype;return r._applyShaderDataValue=function(e,t){var i=e[ut.RasterStateCullMode];if(i!==void 0){var o;this.cullMode=(o=t.getFloat(i))!=null?o:Fr.Back}var s=e[ut.RasterStateDepthBias];if(s!==void 0){var l;this.depthBias=(l=t.getFloat(s))!=null?l:0}var u=e[ut.RasterStateSlopeScaledDepthBias];if(u!==void 0){var c;this.slopeScaledDepthBias=(c=t.getFloat(u))!=null?c:0}},r._apply=function(e,t,i){this._platformApply(e,t.rasterState,i)},r._platformApply=function(e,t,i){var o=e.gl,s=this,l=s.cullMode,u=s.depthBias,c=s.slopeScaledDepthBias,f=l!==Fr.Off;f!==t._cullFaceEnable&&(f?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),t._cullFaceEnable=f),f&&l!==t.cullMode&&(l==Fr.Back?o.cullFace(o.BACK):o.cullFace(o.FRONT),t.cullMode=l),i!==t._frontFaceInvert&&(i?o.frontFace(o.CW):o.frontFace(o.CCW),t._frontFaceInvert=i),e._enableGlobalDepthBias||(u!==t.depthBias||c!==t.slopeScaledDepthBias)&&(u!==0||c!==0?(o.enable(o.POLYGON_OFFSET_FILL),o.polygonOffset(c,u)):o.disable(o.POLYGON_OFFSET_FILL),t.depthBias=u,t.slopeScaledDepthBias=c)},n}(),gP=function(){function n(){this.enabled=!1,this.referenceValue=0,this.mask=255,this.writeMask=255,this.compareFunctionFront=Xt.Always,this.compareFunctionBack=Xt.Always,this.passOperationFront=Tn.Keep,this.passOperationBack=Tn.Keep,this.failOperationFront=Tn.Keep,this.failOperationBack=Tn.Keep,this.zFailOperationFront=Tn.Keep,this.zFailOperationBack=Tn.Keep}var r=n.prototype;return r._applyShaderDataValue=function(e,t){var i=e[ut.StencilStateEnabled];if(i!==void 0){var o=t.getFloat(i);this.enabled=o!==void 0?!!o:!1}var s=e[ut.StencilStateReferenceValue];if(s!==void 0){var l;this.referenceValue=(l=t.getFloat(s))!=null?l:0}var u=e[ut.StencilStateMask];if(u!==void 0){var c;this.mask=(c=t.getFloat(u))!=null?c:255}var f=e[ut.StencilStateWriteMask];if(f!==void 0){var d;this.writeMask=(d=t.getFloat(f))!=null?d:255}var h=e[ut.StencilStateCompareFunctionFront];if(h!==void 0){var _;this.compareFunctionFront=(_=t.getFloat(h))!=null?_:Xt.Always}var p=e[ut.StencilStateCompareFunctionBack];if(p!==void 0){var v;this.compareFunctionBack=(v=t.getFloat(p))!=null?v:Xt.Always}var y=e[ut.StencilStatePassOperationFront];if(y!==void 0){var m;this.passOperationFront=(m=t.getFloat(y))!=null?m:Tn.Keep}var g=e[ut.StencilStatePassOperationBack];if(g!==void 0){var x;this.passOperationBack=(x=t.getFloat(g))!=null?x:Tn.Keep}var b=e[ut.StencilStateFailOperationFront];if(b!==void 0){var S;this.failOperationFront=(S=t.getFloat(b))!=null?S:Tn.Keep}var C=e[ut.StencilStateFailOperationBack];if(C!==void 0){var E;this.failOperationBack=(E=t.getFloat(C))!=null?E:Tn.Keep}var T=e[ut.StencilStateZFailOperationFront];if(T!==void 0){var M;this.zFailOperationFront=(M=t.getFloat(T))!=null?M:Tn.Keep}var L=e[ut.StencilStateZFailOperationBack];if(L!==void 0){var F;this.zFailOperationBack=(F=t.getFloat(L))!=null?F:Tn.Keep}},r._apply=function(e,t){this._platformApply(e,t.stencilState)},r._platformApply=function(e,t){var i=e.gl,o=this,s=o.enabled,l=o.referenceValue,u=o.mask,c=o.compareFunctionFront,f=o.compareFunctionBack,d=o.failOperationFront,h=o.zFailOperationFront,_=o.passOperationFront,p=o.failOperationBack,v=o.zFailOperationBack,y=o.passOperationBack,m=o.writeMask;if(s!=t.enabled&&(s?i.enable(i.STENCIL_TEST):i.disable(i.STENCIL_TEST),t.enabled=s),s){var g=l!==t.referenceValue||u!==t.mask;(g||c!==t.compareFunctionFront)&&(i.stencilFuncSeparate(i.FRONT,n._getGLCompareFunction(e,c),l,u),t.compareFunctionFront=c),(g||f!==t.compareFunctionBack)&&(i.stencilFuncSeparate(i.BACK,n._getGLCompareFunction(e,f),l,u),t.compareFunctionBack=this.compareFunctionBack),g&&(t.referenceValue=this.referenceValue,t.mask=this.mask),(d!==t.failOperationFront||h!==t.zFailOperationFront||_!==t.passOperationFront)&&(i.stencilOpSeparate(i.FRONT,n._getGLStencilOperation(e,d),n._getGLStencilOperation(e,h),n._getGLStencilOperation(e,_)),t.failOperationFront=d,t.zFailOperationFront=h,t.passOperationFront=_),(p!==t.failOperationBack||v!==t.zFailOperationBack||y!==t.passOperationBack)&&(i.stencilOpSeparate(i.BACK,n._getGLStencilOperation(e,p),n._getGLStencilOperation(e,v),n._getGLStencilOperation(e,y)),t.failOperationBack=p,t.zFailOperationBack=v,t.passOperationBack=y),m!==t.writeMask&&(i.stencilMask(m),t.writeMask=m)}},n._getGLCompareFunction=function(e,t){var i=e.gl;switch(t){case Xt.Never:return i.NEVER;case Xt.Less:return i.LESS;case Xt.Equal:return i.EQUAL;case Xt.LessEqual:return i.LEQUAL;case Xt.Greater:return i.GREATER;case Xt.NotEqual:return i.NOTEQUAL;case Xt.GreaterEqual:return i.GEQUAL;case Xt.Always:return i.ALWAYS}},n._getGLStencilOperation=function(e,t){var i=e.gl;switch(t){case Tn.Keep:return i.KEEP;case Tn.Zero:return i.ZERO;case Tn.Replace:return i.REPLACE;case Tn.IncrementSaturate:return i.INCR;case Tn.DecrementSaturate:return i.DECR;case Tn.Invert:return i.INVERT;case Tn.IncrementWrap:return i.INCR_WRAP;case Tn.DecrementWrap:return i.DECR_WRAP}},n}(),Ao=function(){function n(){this.blendState=new s_,this.depthState=new pP,this.stencilState=new gP,this.rasterState=new _P,this.renderQueueType=ar.Opaque}var r=n.prototype;return r._applyShaderDataValue=function(e,t){this.blendState._applyShaderDataValue(e,t),this.depthState._applyShaderDataValue(e,t),this.stencilState._applyShaderDataValue(e,t),this.rasterState._applyShaderDataValue(e,t);var i=e[ut.RenderQueueType];if(i!==void 0){var o;this.renderQueueType=(o=t.getFloat(i))!=null?o:ar.Opaque}},r._apply=function(e,t,i,o){i&&this._applyShaderDataValue(i,o);var s=e._hardwareRenderer,l=e._lastRenderState,u=e._renderContext;this.blendState._apply(s,l),this.depthState._apply(s,l),this.stencilState._apply(s,l),this.rasterState._apply(s,l,u.flipProjection?!t:t)},n}();H([Xe],Ao.prototype,"blendState",void 0);H([Xe],Ao.prototype,"depthState",void 0);H([Xe],Ao.prototype,"stencilState",void 0);H([Xe],Ao.prototype,"rasterState",void 0);var vt=function(){function n(a,e){this.name=a,this._refCount=0,this._destroyed=!1,this.name=a,this._subShaders=e}var r=n.prototype;return r.compileVariant=function(e,t){var i=n._compileMacros;i.clear();for(var o=0,s=t.length;o<s;o++)i.enable(_t.getByName(t[o]));for(var l=!1,u=this._subShaders,c=0,f=u.length;c<f;c++)for(var d=u[c].passes,h=0,_=d.length;h<_;h++){var p=d[h]._getShaderProgram(e,i);l=(h===0||l)&&p.isValid}return l},r.destroy=function(e){if(e===void 0&&(e=!1),!e&&this._refCount!==0)return!1;for(var t=this._subShaders,i=0,o=t.length;i<o;i++)for(var s=t[i].passes,l=0,u=s.length;l<u;l++)s[l]._destroy();return delete n._shaderMap[this.name],this._destroyed=!0,!0},r._getReferCount=function(){return this._refCount},r._addReferCount=function(e){this._refCount+=e},n.create=function(e,t,i){var o,s=n._shaderMap;if(t){if(s[e])throw'Shader named "'+e+'" already exists.';if(typeof t=="string"){var c=new vr(t,i);o=new n(e,[new nv("Default",[c])])}else if(t.length>0)t[0].constructor===vr?o=new n(e,[new nv("Default",t)]):o=new n(e,t.slice());else throw"SubShader or ShaderPass count must large than 0."}else{if(!n._shaderLab)throw"ShaderLab has not been set up yet.";var l=n._shaderLab.parseShader(e);if(s[l.name])throw'Shader named "'+l.name+'" already exists.';var u=l.subShaders.map(function(f){var d=f.passes.map(function(h){if(typeof h=="string"){var _,p,v=h.split("/");return(p=n.find(v[0]))==null||(_=p.subShaders.find(function(T){return T.name===v[1]}))==null?void 0:_.passes.find(function(T){return T.name===v[2]})}var y=new vr(h.name,h.vertexSource,h.fragmentSource,h.tags),m=h.renderStates,g=new Ao;y._renderState=g;var x=m[0];for(var b in x)n._applyConstRenderStates(g,parseInt(b),x[b]);var S=m[1],C={};for(var E in S)C[E]=X.getByName(S[E]);return y._renderStateDataMap=C,y});return new nv(l.name,d,f.tags)});return o=new n(l.name,u),s[l.name]=o,o}return s[e]=o,o},n.find=function(e){return n._shaderMap[e]},n._applyConstRenderStates=function(e,t,i){switch(t){case ut.BlendStateEnabled0:e.blendState.targetBlendState.enabled=i;break;case ut.BlendStateColorBlendOperation0:e.blendState.targetBlendState.colorBlendOperation=i;break;case ut.BlendStateAlphaBlendOperation0:e.blendState.targetBlendState.alphaBlendOperation=i;break;case ut.BlendStateSourceColorBlendFactor0:e.blendState.targetBlendState.sourceColorBlendFactor=i;break;case ut.BlendStateDestinationColorBlendFactor0:e.blendState.targetBlendState.destinationColorBlendFactor=i;break;case ut.BlendStateSourceAlphaBlendFactor0:e.blendState.targetBlendState.sourceAlphaBlendFactor=i;break;case ut.BlendStateDestinationAlphaBlendFactor0:e.blendState.targetBlendState.destinationAlphaBlendFactor=i;break;case ut.BlendStateColorWriteMask0:e.blendState.targetBlendState.colorWriteMask=i;break;case ut.DepthStateEnabled:e.depthState.enabled=i;break;case ut.DepthStateWriteEnabled:e.depthState.writeEnabled=i;break;case ut.DepthStateCompareFunction:e.depthState.compareFunction=i;break;case ut.StencilStateEnabled:e.stencilState.enabled=i;break;case ut.StencilStateReferenceValue:e.stencilState.referenceValue=i;break;case ut.StencilStateMask:e.stencilState.mask=i;break;case ut.StencilStateWriteMask:e.stencilState.writeMask=i;break;case ut.StencilStateCompareFunctionFront:e.stencilState.compareFunctionFront=i;break;case ut.StencilStateCompareFunctionBack:e.stencilState.compareFunctionBack=i;break;case ut.StencilStatePassOperationFront:e.stencilState.passOperationFront=i;break;case ut.StencilStatePassOperationBack:e.stencilState.passOperationBack=i;break;case ut.StencilStateFailOperationFront:e.stencilState.failOperationFront=i;break;case ut.StencilStateFailOperationBack:e.stencilState.failOperationBack=i;break;case ut.StencilStateZFailOperationFront:e.stencilState.zFailOperationFront=i;break;case ut.StencilStateZFailOperationBack:e.stencilState.zFailOperationBack=i;break;case ut.RasterStateCullMode:e.rasterState.cullMode=i;break;case ut.RasterStateDepthBias:e.rasterState.depthBias=i;break;case ut.RasterStateSlopeScaledDepthBias:e.rasterState.slopeScaledDepthBias=i;break;case ut.RenderQueueType:e.renderQueueType=i;break}},n.getMacroByName=function(e,t){return _t.getByName(e,t)},n.getPropertyByName=function(e){return X.getByName(e)},Ie(n,[{key:"subShaders",get:function(){return this._subShaders}},{key:"destroyed",get:function(){return this._destroyed}}]),n}();(function(){vt._compileMacros=new Ba})();(function(){vt._shaderMap=Object.create(null)})();var l_=function(n){be(r,n);function r(e){var t;return t=n.call(this,e)||this,t._isContentLost=!1,e.resourceManager._addGraphicResource(Et(t)),t}var a=r.prototype;return a._onDestroy=function(){n.prototype._onDestroy.call(this),this.engine.resourceManager._deleteGraphicResource(this)},Ie(r,[{key:"isContentLost",get:function(){return this._isContentLost}}]),r}(Io),Jn;(function(n){n[n.Point=0]="Point",n[n.Bilinear=1]="Bilinear",n[n.Trilinear=2]="Trilinear"})(Jn||(Jn={}));var ye;(function(n){n[n.R8G8B8=0]="R8G8B8",n[n.R8G8B8A8=1]="R8G8B8A8",n[n.R4G4B4A4=2]="R4G4B4A4",n[n.R5G5B5A1=3]="R5G5B5A1",n[n.R5G6B5=4]="R5G6B5",n[n.Alpha8=5]="Alpha8",n[n.LuminanceAlpha=6]="LuminanceAlpha",n[n.R16G16B16A16=7]="R16G16B16A16",n[n.R32G32B32A32=8]="R32G32B32A32",n[n.R32G32B32A32_UInt=9]="R32G32B32A32_UInt",n[n.BC1=10]="BC1",n[n.BC3=11]="BC3",n[n.BC7=12]="BC7",n[n.ETC1_RGB=13]="ETC1_RGB",n[n.ETC2_RGB=14]="ETC2_RGB",n[n.ETC2_RGBA5=15]="ETC2_RGBA5",n[n.ETC2_RGBA8=16]="ETC2_RGBA8",n[n.PVRTC_RGB2=17]="PVRTC_RGB2",n[n.PVRTC_RGBA2=18]="PVRTC_RGBA2",n[n.PVRTC_RGB4=19]="PVRTC_RGB4",n[n.PVRTC_RGBA4=20]="PVRTC_RGBA4",n[n.ASTC_4x4=21]="ASTC_4x4",n[n.ASTC_5x5=22]="ASTC_5x5",n[n.ASTC_6x6=23]="ASTC_6x6",n[n.ASTC_8x8=24]="ASTC_8x8",n[n.ASTC_10x10=25]="ASTC_10x10",n[n.ASTC_12x12=26]="ASTC_12x12",n[n.Depth=27]="Depth",n[n.Stencil=28]="Stencil",n[n.DepthStencil=29]="DepthStencil",n[n.Depth16=30]="Depth16",n[n.Depth24=31]="Depth24",n[n.Depth32=32]="Depth32",n[n.Depth24Stencil8=33]="Depth24Stencil8",n[n.Depth32Stencil8=34]="Depth32Stencil8",n[n.DXT1=10]="DXT1",n[n.DXT5=11]="DXT5"})(ye||(ye={}));var Eo=function(n){be(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._isDepthTexture=!1,e._anisoLevel=1,e._useDepthCompareMode=!1,e}var a=r.prototype;return a.generateMipmaps=function(){!this._mipmap||this._platformTexture.generateMipmaps()},a._setUseDepthCompareMode=function(t){this._useDepthCompareMode!==t&&(this._platformTexture.setUseDepthCompareMode(t),this._useDepthCompareMode=t)},a._rebuild=function(){var t=this._platformTexture;t.wrapModeU=this._wrapModeU,t.wrapModeV=this._wrapModeV,t.filterMode=this._filterMode,t.anisoLevel=this._anisoLevel,this._engine._hardwareRenderer._isWebGL2&&(t.depthCompareFunction=this._depthCompareFunction,t.setUseDepthCompareMode(this._useDepthCompareMode))},a._onDestroy=function(){n.prototype._onDestroy.call(this),this._platformTexture.destroy(),this._platformTexture=null},a._getMaxMiplevel=function(t){return Math.floor(Math.log2(t))},a._getMipmapCount=function(){return this._mipmap?Math.floor(Math.log2(Math.max(this._width,this._height)))+1:1},a._isIntFormat=function(){return ye.R32G32B32A32_UInt===this._format},Ie(r,[{key:"format",get:function(){return this._format}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"usage",get:function(){return this._usage}},{key:"wrapModeU",get:function(){return this._wrapModeU},set:function(t){t!==this._wrapModeU&&(this._wrapModeU=t,this._platformTexture.wrapModeU=t)}},{key:"wrapModeV",get:function(){return this._wrapModeV},set:function(t){t!==this._wrapModeV&&(this._wrapModeV=t,this._platformTexture.wrapModeV=t)}},{key:"mipmapCount",get:function(){return this._mipmapCount}},{key:"filterMode",get:function(){return this._filterMode},set:function(t){if(t!==this._filterMode){if(t!==Jn.Point&&this._isIntFormat()){t=Jn.Point,Pt.warn("Int or UInt format texture only support TextureFilterMode.Point");return}this._filterMode=t,this._platformTexture.filterMode=t}}},{key:"anisoLevel",get:function(){return this._anisoLevel},set:function(t){var i=this._engine._hardwareRenderer.capability.maxAnisoLevel;t>i&&(Pt.warn("anisoLevel:"+t+", exceeds the limit and is automatically downgraded to:"+i),t=i),t<1&&(Pt.warn("anisoLevel:"+t+", must be greater than 0, and is automatically downgraded to 1"),t=1),t!==this._anisoLevel&&(this._anisoLevel=t,this._platformTexture.anisoLevel=t)}},{key:"depthCompareFunction",get:function(){return this._depthCompareFunction},set:function(t){if(!this._engine._hardwareRenderer._isWebGL2){console.warn("depthCompareFunction only support WebGL2");return}t!==this._depthCompareFunction&&(this._depthCompareFunction=t,this._platformTexture.depthCompareFunction=t)}}]),r}(l_),io=function(){function n(a){this._propertyValueMap=Object.create(null),this._macroCollection=new Ba,this._macroMap=Object.create(null),this._refCount=0,this._group=a}var r=n.prototype;return r.getFloat=function(e){return this.getPropertyValue(e)},r.setFloat=function(e,t){this._setPropertyValue(e,la.Float,t)},r.getInt=function(e){return this.getPropertyValue(e)},r.setInt=function(e,t){this._setPropertyValue(e,la.Int,t)},r.getFloatArray=function(e){return this.getPropertyValue(e)},r.setFloatArray=function(e,t){this._setPropertyValue(e,la.FloatArray,t)},r.getIntArray=function(e){return this.getPropertyValue(e)},r.setIntArray=function(e,t){this._setPropertyValue(e,la.IntArray,t)},r.getVector2=function(e){return this.getPropertyValue(e)},r.setVector2=function(e,t){this._setPropertyValue(e,la.Vector2,t)},r.getVector3=function(e){return this.getPropertyValue(e)},r.setVector3=function(e,t){this._setPropertyValue(e,la.Vector3,t)},r.getVector4=function(e){return this.getPropertyValue(e)},r.setVector4=function(e,t){this._setPropertyValue(e,la.Vector4,t)},r.getMatrix=function(e){return this.getPropertyValue(e)},r.setMatrix=function(e,t){this._setPropertyValue(e,la.Matrix,t)},r.getColor=function(e){return this.getPropertyValue(e)},r.setColor=function(e,t){this._setPropertyValue(e,la.Color,t)},r.getTexture=function(e){return this.getPropertyValue(e)},r.setTexture=function(e,t){var i=this._refCount;if(i>0){var o=this.getPropertyValue(e);o&&o._addReferCount(-i),t&&t._addReferCount(i)}this._setPropertyValue(e,la.Texture,t)},r.getTextureArray=function(e){return this.getPropertyValue(e)},r.setTextureArray=function(e,t){var i=this._refCount;if(i>0){var o=this.getPropertyValue(e);if(o)for(var s=0,l=o.length;s<l;s++)o[s]._addReferCount(-i);if(t)for(var u=0,c=t.length;u<c;u++)t[u]._addReferCount(i)}this._setPropertyValue(e,la.TextureArray,t)},r.getPropertyValue=function(e){return typeof e=="string"&&(e=X.getByName(e)),this._propertyValueMap[e._uniqueId]},r.enableMacro=function(e,t){typeof e=="string"&&(e=_t.getByName(e,t));var i=e._nameId,o=this._macroMap[i];if(o!==e){var s=this._macroCollection;o&&s.disable(o),s.enable(e),this._macroMap[i]=e}},r.disableMacro=function(e){var t;if(typeof e=="string"){if(t=_t._macroNameIdMap[e],t===void 0)return}else t=e._nameId;var i=this._macroMap[t];i&&(this._macroCollection.disable(i),delete this._macroMap[t])},r.getMacros=function(e){if(e){var t=this._macroMap;e.length=0;for(var i in t)e.push(t[i])}else return Object.values(this._macroMap)},r.getProperties=function(e){var t;e?(e.length=0,t=e):t=[];var i=this._propertyValueMap,o=X._propertyIdMap;for(var s in i)t.push(o[s]);if(!e)return t},r.clone=function(){var e=new n(this._group);return this.cloneTo(e),e},r.cloneTo=function(e){Mi.deepCloneObject(this._macroCollection,e._macroCollection),Object.assign(e._macroMap,this._macroMap);for(var t=e._getReferCount(),i=this._propertyValueMap,o=e._propertyValueMap,s=Object.keys(i),l=0,u=s.length;l<u;l++){var c=s[l],f=i[c];if(f!=null)if(typeof f=="number")o[c]=f;else if(fr(f,Eo))o[c]=f,t>0&&f._addReferCount(t);else if(fr(f,Array)||fr(f,Float32Array)||fr(f,Int32Array))o[c]=f.slice();else{var d=o[c];d?d.copyFrom(f):o[c]=f.clone()}else o[c]=f}},r._setPropertyValue=function(e,t,i){if(typeof e=="string"&&(e=X.getByName(e)),e._group!==this._group)if(e._group===void 0)e._group=this._group;else throw"Shader property "+e.name+" has been used as "+bi[e._group]+" group.";if(e._type!==t)if(e._type===void 0)e._type=t;else throw"Shader property "+e.name+" has been used as "+la[e._type]+" type.";this._propertyValueMap[e._uniqueId]=i},r._getReferCount=function(){return this._refCount},r._addReferCount=function(e){this._refCount+=e;var t=this._propertyValueMap;for(var i in t){var o=t[i];o&&fr(o,Eo)&&o._addReferCount(e)}},n}();H([te],io.prototype,"_group",void 0);H([te],io.prototype,"_propertyValueMap",void 0);H([te],io.prototype,"_macroCollection",void 0);H([te],io.prototype,"_macroMap",void 0);H([te],io.prototype,"_refCount",void 0);var Ui,Gt=(Ui=function(n){be(r,n);function r(e){var t;t=n.call(this,e)||this,t._onUpdateIndex=-1,t._rendererIndex=-1,t._globalShaderMacro=new Ba,t._bounds=new Da,t._overrideUpdate=!1,t._materials=[],t._dirtyUpdateFlag=0,t._shaderData=new io(bi.Renderer),t._mvMatrix=new Ge,t._mvpMatrix=new Ge,t._mvInvMatrix=new Ge,t._normalMatrix=new Ge,t._materialsInstanced=[],t._priority=0,t._receiveShadows=!0,t._rendererLayer=new pt,t.castShadows=!0;var i=Gt.prototype,o=t.shaderData;return t._overrideUpdate=t.update!==i.update,t._addResourceReferCount(t.shaderData,1),t._onTransformChanged=t._onTransformChanged.bind(Et(t)),t._registerEntityTransformListener(),o.enableMacro(Gt._receiveShadowMacro),o.setVector4(Gt._rendererLayerProperty,t._rendererLayer),t}var a=r.prototype;return a.getInstanceMaterial=function(t){t===void 0&&(t=0);var i=this._materials;if(i.length>t){var o=i[t];if(o)return this._materialsInstanced[t]?o:this._createInstanceMaterial(o,t)}return null},a.getMaterial=function(t){return t===void 0&&(t=0),this._materials[t]||null},a.setMaterial=function(t,i){i===void 0&&(i=null),typeof t=="number"?this._setMaterial(t,i):this._setMaterial(0,t)},a.getInstanceMaterials=function(){for(var t=this._materials,i=this._materialsInstanced,o=0,s=t.length;o<s;o++)i[o]||this._createInstanceMaterial(this._materials[o],o);return t},a.getMaterials=function(){return this._materials},a.setMaterials=function(t){for(var i=t.length,o=this._materials,s=this._materialsInstanced,l=i,u=o.length;l<u;l++){var c=o[l];c&&this._addResourceReferCount(c,-1)}o.length!==i&&(o.length=i),s.length!==0&&(s.length=0);for(var f=0;f<i;f++){var d=o[f],h=t[f];d!==h&&(o[f]=h,d&&this._addResourceReferCount(d,-1),h&&this._addResourceReferCount(h,1))}},a.update=function(t){},a._onEnableInScene=function(){var t=this.scene._componentsManager;this._overrideUpdate&&t.addOnUpdateRenderers(this),t.addRenderer(this)},a._onDisableInScene=function(){var t=this.scene._componentsManager;this._overrideUpdate&&t.removeOnUpdateRenderers(this),t.removeRenderer(this)},a._prepareRender=function(t){var i=t.virtualCamera,o=i.position,s=this.bounds.getCenter(Gt._tempVector0);i.isOrthographic?(z.subtract(s,o,s),this._distanceForSort=z.dot(s,i.forward)):this._distanceForSort=z.distanceSquared(s,o),this._updateShaderData(t,!1),this._render(t),Ba.unionCollection(t.camera._globalShaderMacro,this.shaderData._macroCollection,this._globalShaderMacro)},a._cloneTo=function(t,i,o){for(var s=this._materials,l=0,u=s.length;l<u;l++)t._setMaterial(l,s[l])},a._onDestroy=function(){n.prototype._onDestroy.call(this),this._unRegisterEntityTransformListener(),this._addResourceReferCount(this.shaderData,-1);for(var t=this._materials,i=0,o=t.length;i<o;i++){var s=t[i];s&&this._addResourceReferCount(s,-1)}this._entity=null,this._globalShaderMacro=null,this._bounds=null,this._materials=null,this._shaderData=null,this._mvMatrix=null,this._mvpMatrix=null,this._mvInvMatrix=null,this._normalMatrix=null,this._materialsInstanced=null,this._rendererLayer=null},a._updateShaderData=function(t,i){var o=this.entity,s=o.transform.worldMatrix;if(i){this._updateMVPShaderData(t,s);return}this._updateTransformShaderData(t,s);var l=o.layer;this._rendererLayer.set(l&65535,l>>>16&65535,0,0)},a._updateTransformShaderData=function(t,i){var o=this.shaderData,s=this._mvMatrix,l=this._mvInvMatrix,u=this._normalMatrix;Ge.multiply(t.viewMatrix,i,s),Ge.invert(s,l),Ge.invert(i,u),u.transpose(),o.setMatrix(Gt._localMatrixProperty,this.entity.transform.localMatrix),o.setMatrix(Gt._worldMatrixProperty,i),o.setMatrix(Gt._mvMatrixProperty,s),o.setMatrix(Gt._mvInvMatrixProperty,l),o.setMatrix(Gt._normalMatrixProperty,u),this._updateMVPShaderData(t,i)},a._updateMVPShaderData=function(t,i){var o=this._mvpMatrix;Ge.multiply(t.viewProjectionMatrix,i,o),this.shaderData.setMatrix(Gt._mvpMatrixProperty,o)},a._registerEntityTransformListener=function(){this.entity.transform._updateFlagManager.addListener(this._onTransformChanged)},a._unRegisterEntityTransformListener=function(){this.entity.transform._updateFlagManager.removeListener(this._onTransformChanged)},a._updateBounds=function(t){},a._render=function(t){throw"not implement"},a._createInstanceMaterial=function(t,i){var o=t.clone();return o.name=o.name+"(Instance)",this._addResourceReferCount(t,-1),this._addResourceReferCount(o,1),this._materialsInstanced[i]=!0,this._materials[i]=o,o},a._setMaterial=function(t,i){var o=this._materials;t>=o.length&&(o.length=t+1);var s=o[t];if(s!==i){var l=this._materialsInstanced;t<l.length&&(l[t]=!1),s&&this._addResourceReferCount(s,-1),i&&this._addResourceReferCount(i,1),o[t]=i}},a._onTransformChanged=function(t){this._dirtyUpdateFlag|=1},Ie(r,[{key:"shaderData",get:function(){return this._shaderData}},{key:"isCulled",get:function(){return!(this._renderFrameCount===void 0||this._renderFrameCount===this._engine.time.frameCount-1)}},{key:"receiveShadows",get:function(){return this._receiveShadows},set:function(t){this._receiveShadows!==t&&(t?this.shaderData.enableMacro(Gt._receiveShadowMacro):this.shaderData.disableMacro(Gt._receiveShadowMacro),this._receiveShadows=t)}},{key:"materialCount",get:function(){return this._materials.length},set:function(t){var i=this._materials,o=this._materialsInstanced;i.length!==t&&(i.length=t),o.length>t&&(o.length=t)}},{key:"bounds",get:function(){return this._dirtyUpdateFlag&1&&(this._updateBounds(this._bounds),this._dirtyUpdateFlag&=-2),this._bounds}},{key:"priority",get:function(){return this._priority},set:function(t){this._priority=t}}]),r}(Zr),function(){Ui._tempVector0=new z}(),function(){Ui._receiveShadowMacro=_t.getByName("RENDERER_IS_RECEIVE_SHADOWS")}(),function(){Ui._localMatrixProperty=X.getByName("renderer_LocalMat")}(),function(){Ui._worldMatrixProperty=X.getByName("renderer_ModelMat")}(),function(){Ui._mvMatrixProperty=X.getByName("renderer_MVMat")}(),function(){Ui._mvpMatrixProperty=X.getByName("renderer_MVPMat")}(),function(){Ui._mvInvMatrixProperty=X.getByName("renderer_MVInvMat")}(),function(){Ui._normalMatrixProperty=X.getByName("renderer_NormalMat")}(),function(){Ui._rendererLayerProperty=X.getByName("renderer_Layer")}(),Ui);H([te],Gt.prototype,"_distanceForSort",void 0);H([te],Gt.prototype,"_onUpdateIndex",void 0);H([te],Gt.prototype,"_rendererIndex",void 0);H([te],Gt.prototype,"_globalShaderMacro",void 0);H([te],Gt.prototype,"_bounds",void 0);H([te],Gt.prototype,"_renderFrameCount",void 0);H([te],Gt.prototype,"_overrideUpdate",void 0);H([te],Gt.prototype,"_materials",void 0);H([te],Gt.prototype,"_dirtyUpdateFlag",void 0);H([Xe],Gt.prototype,"_shaderData",void 0);H([te],Gt.prototype,"_mvMatrix",void 0);H([te],Gt.prototype,"_mvpMatrix",void 0);H([te],Gt.prototype,"_mvInvMatrix",void 0);H([te],Gt.prototype,"_normalMatrix",void 0);H([te],Gt.prototype,"_materialsInstanced",void 0);H([en],Gt.prototype,"_priority",void 0);H([en],Gt.prototype,"_receiveShadows",void 0);H([te],Gt.prototype,"_rendererLayer",void 0);H([te],Gt.prototype,"_onTransformChanged",null);Gt=H([gs(Vt,no.CheckOnly)],Gt);var zn;(function(n){n[n.WorldVolume=1]="WorldVolume"})(zn||(zn={}));function ma(){return function(n){}}var xh,Zo=(xh=function(){function n(){}return n.resetData=function(a){var e=a._verticesData,t=e.positions,i=e.uvs;e.vertexCount=t.length=i.length=4;for(var o=0;o<4;o++){var s,l,u,c;(s=t)[l=o]||(s[l]=new z),(u=i)[c=o]||(u[c]=new Ze)}e.triangles=Zo._rectangleTriangles},n.updatePositions=function(a){var e=a.width,t=a.height,i=a.sprite,o=i.pivot,s=o.x,l=o.y,u=Zo._worldMatrix,c=u.elements,f=a.entity.transform.worldMatrix,d=f.elements,h=a.flipX?-e:e,_=a.flipY?-t:t;c[0]=d[0]*h,c[1]=d[1]*h,c[2]=d[2]*h,c[4]=d[4]*_,c[5]=d[5]*_,c[6]=d[6]*_,c[8]=d[8],c[9]=d[9],c[10]=d[10],c[12]=d[12]-s*c[0]-l*c[4],c[13]=d[13]-s*c[1]-l*c[5],c[14]=d[14]-s*c[2]-l*c[6];for(var p=i._getPositions(),v=a._verticesData.positions,y=0;y<4;y++){var m=p[y],g=m.x,x=m.y;v[y].set(c[0]*g+c[4]*x+c[12],c[1]*g+c[5]*x+c[13],c[2]*g+c[6]*x+c[14])}Da.transform(i._getBounds(),u,a._bounds)},n.updateUVs=function(a){var e=a.sprite._getUVs(),t=a._verticesData.uvs,i=e[0],o=i.x,s=i.y,l=e[3],u=l.x,c=l.y;t[0].set(o,s),t[1].set(u,s),t[2].set(o,c),t[3].set(u,c)},n}(),function(){xh._rectangleTriangles=[0,1,2,2,1,3]}(),function(){xh._worldMatrix=new Ge}(),xh);Zo=H([ma()],Zo);var Sh,sd=(Sh=function(){function n(){}return n.resetData=function(a){var e=a._verticesData,t=e.positions,i=e.uvs;e.vertexCount=t.length=i.length=16;for(var o=0;o<16;o++){var s,l,u,c;(s=t)[l=o]||(s[l]=new z),(u=i)[c=o]||(u[c]=new Ze)}e.triangles=sd._rectangleTriangles},n.updatePositions=function(a){var e=a.width,t=a.height,i=a.sprite,o=a._verticesData,s=o.positions,l=o.uvs,u=i.border,c=i._getUVs(),f=i._getPositions(),d=f[0],h=d.x,_=d.y,p=f[3],v=p.x,y=p.y,m=i.width,g=i.height,x=m*u.x,b=g*u.y,S=m*u.z,C=g*u.w,E,T;if(x+S>e){var M=e/(x+S);E=[m*h*M,x*M,x*M,e-m*(1-v)*M]}else E=[m*h,x,e-S,e-m*(1-v)];if(C+b>t){var L=t/(C+b);T=[g*_*L,b*L,b*L,t-g*(1-y)*L]}else T=[g*_,b,t-C,t-g*(1-y)];var F=a.sprite.pivot,N=F.x,I=F.y,O=a.width*N,P=a.height*I,R=sd._worldMatrix,A=R.elements,D=a.entity.transform.worldMatrix,B=D.elements,k=a.flipX?-1:1,V=a.flipY?-1:1;A[0]=B[0]*k,A[1]=B[1]*k,A[2]=B[2]*k,A[4]=B[4]*V,A[5]=B[5]*V,A[6]=B[6]*V,A[8]=B[8],A[9]=B[9],A[10]=B[10],A[12]=B[12]-O*A[0]-P*A[4],A[13]=B[13]-O*A[1]-P*A[5],A[14]=B[14]-O*A[2]-P*A[6];for(var U=0;U<4;U++)for(var j=E[U],G=c[U].x,$=0;$<4;$++){var W=T[$],K=U*4+$;s[K].set(A[0]*j+A[4]*W+A[12],A[1]*j+A[5]*W+A[13],A[2]*j+A[6]*W+A[14]),l[K].set(G,c[$].y)}var q=a._bounds,Y=q.min,Q=q.max;Y.set(E[0],T[0],0),Q.set(E[3],T[3],0),a._bounds.transform(R)},n.updateUVs=function(a){},n}(),function(){Sh._rectangleTriangles=[0,1,4,1,5,4,1,2,5,2,6,5,2,3,6,3,7,6,4,5,8,5,9,8,5,6,9,6,10,9,6,7,10,7,11,10,8,9,12,9,13,12,9,10,13,10,14,13,10,11,14,11,15,14]}(),function(){Sh._worldMatrix=new Ge}(),Sh);sd=H([ma()],sd);var Nn=function(){function n(a){a===void 0&&(a=0),this.length=0,this._isLooping=!1,this._blankCount=0,this._elements=new Array(a)}var r=n.prototype;return r.add=function(e){this.length===this._elements.length?this._elements.push(e):this._elements[this.length]=e,this.length++},r.delete=function(e){var t=this._elements.indexOf(e);this.deleteByIndex(t)},r.set=function(e,t){if(e>=this.length)throw"Index is out of range.";this._elements[e]=t},r.get=function(e){if(e>=this.length)throw"Index is out of range.";return this._elements[e]},r.deleteByIndex=function(e){var t=this._elements,i;if(this._isLooping)this._elements[e]=null,this._blankCount++;else{var o=this.length-1;e!==o&&(i=t[o],t[e]=i),t[o]=null,this.length--}return i},r.forEach=function(e,t){this._startLoop();for(var i=this._elements,o=0,s=this.length;o<s;o++){var l=i[o];l&&e(l)}this._endLoop(t)},r.forEachAndClean=function(e){this._startLoop();for(var t=this._elements,i=0,o=this.length;i<o;i++){var s=t[i];s&&e(s)}this._endLoopAndClear()},r.sort=function(e){Mn._quickSort(this._elements,0,this.length,e)},r.garbageCollection=function(){this._elements.length=this.length},r._startLoop=function(){this._isLooping=!0},r._endLoop=function(e){if(this._isLooping=!1,this._blankCount){var t=0,i=this.length-1,o=this._elements;e:do{for(;o[t];)if(++t>=i)break e;for(;!o[i];)if(t>=--i)break e;var s=o[i];e(s,t),o[t++]=s,o[i--]=null}while(t<i);this.length-=this._blankCount,this._blankCount=0}},r._endLoopAndClear=function(){this._isLooping=!1,this.length=0,this._blankCount=0},n}(),Dn;(function(n){n[n.Static=0]="Static",n[n.Dynamic=1]="Dynamic",n[n.Stream=2]="Stream"})(Dn||(Dn={}));var us;(function(n){n[n.None=0]="None",n[n.Discard=1]="Discard"})(us||(us={}));var ha=function(n){be(r,n);function r(e,t,i,o,s){o===void 0&&(o=Dn.Static),s===void 0&&(s=!1);var l;if(l=n.call(this,e)||this,l._dataUpdateManager=new to,l._engine=e,l._type=t,l._bufferUsage=o,l._readable=s,typeof i=="number")l._byteLength=i,l._platformBuffer=e._hardwareRenderer.createPlatformBuffer(t,i,o),s&&(l._data=new Uint8Array(i));else{var u=i,c=u.byteLength;if(l._byteLength=c,l._platformBuffer=e._hardwareRenderer.createPlatformBuffer(t,c,o,u),s){var f=u.constructor===ArrayBuffer?u.slice(0):u.buffer.slice(u.byteOffset,u.byteOffset+c);l._data=new Uint8Array(f)}}return l}var a=r.prototype;return a.bind=function(){this._platformBuffer.bind()},a.setData=function(t,i,o,s,l){if(i===void 0&&(i=0),o===void 0&&(o=0),l===void 0&&(l=us.None),this._platformBuffer.setData(this._byteLength,t,i,o,s,l),this._readable){var u=t.constructor===ArrayBuffer?t:t.buffer;if(this._data.buffer!==u){var c=t.BYTES_PER_ELEMENT||1,f=s?c*s:t.byteLength,d=t.byteOffset!==void 0,h=d?t.byteOffset+o*c:o,_=new Uint8Array(u,h,f);this._data.set(_,i)}}this._isContentLost=!1,this._dataUpdateManager.dispatch()},a.getData=function(t,i,o,s){i===void 0&&(i=0),o===void 0&&(o=0),this._platformBuffer.getData(t,i,o,s)},a.markAsUnreadable=function(){this._data=null,this._readable=!1},a._rebuild=function(){var t=this._engine._hardwareRenderer.createPlatformBuffer(this._type,this._byteLength,this._bufferUsage);this._platformBuffer=t},a._onDestroy=function(){n.prototype._onDestroy.call(this),this._platformBuffer.destroy()},Ie(r,[{key:"type",get:function(){return this._type}},{key:"byteLength",get:function(){return this._byteLength}},{key:"bufferUsage",get:function(){return this._bufferUsage}},{key:"readable",get:function(){return this._readable}},{key:"data",get:function(){if(this._readable)return this._data;throw"Buffer is not readable."}}]),r}(l_),Lr;(function(n){n[n.UInt8=0]="UInt8",n[n.UInt16=1]="UInt16",n[n.UInt32=2]="UInt32"})(Lr||(Lr={}));var rt;(function(n){n[n.Float=0]="Float",n[n.Vector2=1]="Vector2",n[n.Vector3=2]="Vector3",n[n.Vector4=3]="Vector4",n[n.Byte4=4]="Byte4",n[n.UByte4=5]="UByte4",n[n.NormalizedByte4=6]="NormalizedByte4",n[n.NormalizedUByte4=7]="NormalizedUByte4",n[n.Short2=8]="Short2",n[n.UShort2=9]="UShort2",n[n.NormalizedShort2=10]="NormalizedShort2",n[n.NormalizedUShort2=11]="NormalizedUShort2",n[n.Short4=12]="Short4",n[n.UShort4=13]="UShort4",n[n.NormalizedShort4=14]="NormalizedShort4",n[n.NormalizedUShort4=15]="NormalizedUShort4"})(rt||(rt={}));var $v=function(){function n(){}return n._getGLIndexType=function(a){switch(a){case Lr.UInt8:return Rn.UNSIGNED_BYTE;case Lr.UInt16:return Rn.UNSIGNED_SHORT;case Lr.UInt32:return Rn.UNSIGNED_INT}},n._getGLIndexByteCount=function(a){switch(a){case Lr.UInt8:return 1;case Lr.UInt16:return 2;case Lr.UInt32:return 4}},n._getElementInfo=function(a){var e,t,i=!1,o;switch(a){case rt.Float:e=1,t=Rn.FLOAT;break;case rt.Vector2:e=2,t=Rn.FLOAT;break;case rt.Vector3:e=3,t=Rn.FLOAT;break;case rt.Vector4:e=4,t=Rn.FLOAT;break;case rt.Byte4:e=4,t=Rn.BYTE;break;case rt.UByte4:e=4,t=Rn.UNSIGNED_BYTE;break;case rt.NormalizedByte4:e=4,t=Rn.BYTE,i=!0,o=1/127;break;case rt.NormalizedUByte4:e=4,t=Rn.UNSIGNED_BYTE,i=!0,o=1/255;break;case rt.Short2:e=2,t=Rn.SHORT;break;case rt.UShort2:e=2,t=Rn.UNSIGNED_SHORT;break;case rt.NormalizedShort2:e=2,t=Rn.SHORT,i=!0,o=1/32767;break;case rt.NormalizedUShort2:e=2,t=Rn.UNSIGNED_SHORT,i=!0,o=1/65535;break;case rt.Short4:e=4,t=Rn.SHORT;break;case rt.UShort4:e=4,t=Rn.UNSIGNED_SHORT;break;case rt.NormalizedShort4:e=4,t=Rn.SHORT,i=!0,o=1/32767;break;case rt.NormalizedUShort4:e=4,t=Rn.UNSIGNED_SHORT,i=!0,o=1/65535;break}return{size:e,type:t,normalized:i,normalizedScaleFactor:o}},n}(),kr;(function(n){n[n.VertexBuffer=0]="VertexBuffer",n[n.IndexBuffer=1]="IndexBuffer"})(kr||(kr={}));var ro;(function(n){n[n.Points=0]="Points",n[n.Lines=1]="Lines",n[n.LineLoop=2]="LineLoop",n[n.LineStrip=3]="LineStrip",n[n.Triangles=4]="Triangles",n[n.TriangleStrip=5]="TriangleStrip",n[n.TriangleFan=6]="TriangleFan"})(ro||(ro={}));var ld=function(){function n(r,a){this._buffer=r,this._format=a}return Ie(n,[{key:"buffer",get:function(){return this._buffer}},{key:"format",get:function(){return this._format}}]),n}(),u_=function(){function n(a,e,t){a===void 0&&(a=0),e===void 0&&(e=0),t===void 0&&(t=ro.Triangles),this.start=a,this.count=e,this.topology=t}var r=n.prototype;return r.dispose=function(){},n}(),px=function(n){be(r,n);function r(e){var t;return t=n.call(this,e)||this,t.enableVAO=!0,t.instanceCount=0,t.vertexBufferBindings=[],t._vertexElementMap={},t._bufferStructChanged=!1,t._vertexElements=[],t._platformPrimitive=e._hardwareRenderer.createPlatformPrimitive(Et(t)),t}var a=r.prototype;return a.addVertexElement=function(t){var i=this._vertexElementMap,o=this._vertexElements,s=t.attribute,l=i[s];l&&(console.warn("VertexElement "+s+" already exists."),o.splice(o.indexOf(l),1)),i[s]=t,o.push(t),this._bufferStructChanged=!0},a.removeVertexElement=function(t){var i=this._vertexElements,o=i[t];i.splice(t,1),delete this._vertexElementMap[o.attribute],this._bufferStructChanged=!0},a.clearVertexElements=function(){this._vertexElements.length=0;var t=this._vertexElementMap;for(var i in t)delete t[i];this._bufferStructChanged=!0},a.setVertexElement=function(t,i){var o=this._vertexElementMap,s=this._vertexElements,l=s[t];l&&delete o[l.attribute],o[i.attribute]=i,s[t]=i,this._bufferStructChanged=!0},a.setVertexElementsLength=function(t){for(var i=this._vertexElementMap,o=this._vertexElements,s=t,l=o.length;s<l;s++){var u=o[s];delete i[u.attribute]}o.length=t},a.setVertexBufferBinding=function(t,i){var o=this._getReferCount(),s=this.vertexBufferBindings;if(o>0){var l,u;(l=s[t])==null||l.buffer._addReferCount(-o),(u=i)==null||u.buffer._addReferCount(o)}s[t]=i,this._bufferStructChanged=!0},a.setVertexBufferBindings=function(t,i){i===void 0&&(i=0);var o=this.vertexBufferBindings,s=t.length,l=i+s;o.length<l&&(o.length=l);for(var u=0;u<s;u++)this.setVertexBufferBinding(i+u,t[u])},a.setIndexBufferBinding=function(t){var i=this.indexBufferBinding,o=this._getReferCount();if(i!==t){var s,l,u;this._indexBufferBinding=t,o>0&&((s=i)==null||s.buffer._addReferCount(-o)),t?(o>0&&t.buffer._addReferCount(o),this._glIndexType=$v._getGLIndexType(t.format),this._glIndexByteCount=$v._getGLIndexByteCount(t.format)):this._glIndexType=void 0,this._bufferStructChanged=((l=i)==null?void 0:l.buffer)!==((u=t)==null?void 0:u.buffer)}},a.draw=function(t,i){this._platformPrimitive.draw(t,i),this._bufferStructChanged=!1},a._addReferCount=function(t){var i;n.prototype._addReferCount.call(this,t);for(var o=this.vertexBufferBindings,s=0,l=o.length;s<l;s++){var u;(u=o[s])==null||u.buffer._addReferCount(t)}(i=this.indexBufferBinding)==null||i._buffer._addReferCount(t)},a._rebuild=function(){this._engine._hardwareRenderer.createPlatformPrimitive(this),this._isContentLost=!1},a._onDestroy=function(){n.prototype._onDestroy.call(this),this._platformPrimitive.destroy(),this._vertexElementMap=null},Ie(r,[{key:"vertexElements",get:function(){return this._vertexElements}},{key:"indexBufferBinding",get:function(){return this._indexBufferBinding}}]),r}(l_),_x=function(n){be(r,n);function r(e,t){var i;i=n.call(this,e)||this,i._updateFlagManager=new to,i._bounds=new Da,i._subMeshes=[],i.name=t,i._primitive=new px(e),i._onBoundsChanged=i._onBoundsChanged.bind(Et(i));var o=i._bounds;return o.min._onValueChanged=i._onBoundsChanged,o.max._onValueChanged=i._onBoundsChanged,i}var a=r.prototype;return a.addSubMesh=function(t,i,o){return o===void 0&&(o=ro.Triangles),typeof t=="number"&&(t=new u_(t,i,o)),this._subMeshes.push(t),t},a.removeSubMesh=function(t){var i=this._subMeshes,o=i.indexOf(t);o!==-1&&i.splice(o,1)},a.clearSubMesh=function(){this._subMeshes.length=0},a._clearVertexElements=function(){this._primitive.clearVertexElements(),this._updateFlagManager.dispatch(2)},a._addVertexElement=function(t){this._primitive.addVertexElement(t),this._updateFlagManager.dispatch(2)},a._removeVertexElement=function(t){this._primitive.removeVertexElement(t),this._updateFlagManager.dispatch(2)},a._setVertexElement=function(t,i){this._primitive.setVertexElement(t,i),this._updateFlagManager.dispatch(2)},a._setVertexElementsLength=function(t){this._primitive.setVertexElementsLength(t)},a._setVertexBufferBinding=function(t,i){this._primitive.setVertexBufferBinding(t,i)},a._addReferCount=function(t){n.prototype._addReferCount.call(this,t),this._primitive._addReferCount(t)},a._onDestroy=function(){n.prototype._onDestroy.call(this),this._primitive.destroy()},a._setVertexElements=function(t){this._clearVertexElements();for(var i=0,o=t.length;i<o;i++)this._addVertexElement(t[i])},a._setIndexBufferBinding=function(t){this._primitive.setIndexBufferBinding(t)},a._onBoundsChanged=function(){this._updateFlagManager.dispatch(1)},Ie(r,[{key:"bounds",get:function(){return this._bounds},set:function(t){this._bounds!==t&&this._bounds.copyFrom(t)}},{key:"subMesh",get:function(){return this._subMeshes[0]||null}},{key:"subMeshes",get:function(){return this._subMeshes}}]),r}(Io),Xv;(function(n){n[n.Bounds=1]="Bounds",n[n.VertexElements=2]="VertexElements"})(Xv||(Xv={}));var Hl=function(){function n(r,a){this._buffer=r,this._stride=a}return Ie(n,[{key:"buffer",get:function(){return this._buffer}},{key:"stride",get:function(){return this._stride}}]),n}(),Kt=function(){function n(r,a,e,t,i){i===void 0&&(i=0),this._attributeName=r,this._offset=a,this._format=e,this._bindingIndex=t,this._formatMetaInfo=$v._getElementInfo(this.format),this._instanceStepRate=Math.floor(i)}return Ie(n,[{key:"attribute",get:function(){return this._attributeName}},{key:"offset",get:function(){return this._offset},set:function(a){this._offset=a}},{key:"format",get:function(){return this._format}},{key:"bindingIndex",get:function(){return this._bindingIndex},set:function(a){this._bindingIndex=a}},{key:"instanceStepRate",get:function(){return this._instanceStepRate}},{key:"semantic",get:function(){return this.attribute}}]),n}(),mP=function(){function n(a,e,t,i){if(t===void 0&&(t=null),i===void 0&&(i=null),this._dataChangeManager=new to,this._dirty=7,t&&t.length!==e.length)throw"deltaNormals length must same with deltaPositions length.";if(i&&i.length!==e.length)throw"deltaTangents length must same with deltaPositions length.";this.weight=a,this._deltaPositions=e,this._deltaNormals=t,this._deltaTangents=i}var r=n.prototype;return r._releaseData=function(){this._deltaPositions=null,this._deltaNormals=null,this._deltaTangents=null},Ie(n,[{key:"deltaPositions",get:function(){return this._deltaPositions},set:function(e){this._deltaPositions=e,this._dirty|=1,this._dataChangeManager.dispatch(this._dirty,this)}},{key:"deltaNormals",get:function(){return this._deltaNormals},set:function(e){this._deltaNormals=e,this._dirty|=2,this._dataChangeManager.dispatch(this._dirty,this)}},{key:"deltaTangents",get:function(){return this._deltaTangents},set:function(e){this._deltaTangents=e,this._dirty|=4,this._dataChangeManager.dispatch(this._dirty,this)}}]),n}(),r0;(function(n){n[n.Position=1]="Position",n[n.Normal=2]="Normal",n[n.Tangent=4]="Tangent",n[n.All=7]="All"})(r0||(r0={}));var gx=function(){function n(a){this._useBlendShapeNormal=!0,this._useBlendShapeTangent=!0,this._layoutChangeManager=new to,this._dataChangeManager=new to,this._frames=[],this.name=a,this._frameDataChangeListener=this._frameDataChangeListener.bind(this)}var r=n.prototype;return r.addFrame=function(e,t,i,o){if(typeof e=="number"){var s=new mP(e,t,i,o);return this._addFrame(s),s}else this._addFrame(e)},r.clearFrames=function(){for(var e=this._frames,t=0,i=e.length;t<i;t++)e[t]._dataChangeManager.removeListener(this._frameDataChangeListener);e.length=0,this._updateUseNormalAndTangent(!0,!0),this._dataChangeManager.dispatch()},r._releaseData=function(){for(var e=this._frames,t=0,i=e.length;t<i;t++)e[t]._releaseData()},r._addFrame=function(e){var t=this._frames,i=t.length;if(i>0&&e.deltaPositions.length!==t[i-1].deltaPositions.length)throw"Frame's deltaPositions length must same with before frame deltaPositions length.";this._frames.push(e),this._frameDataChangeListener(r0.All,e),e._dataChangeManager.addListener(this._frameDataChangeListener)},r._updateUseNormalAndTangent=function(e,t){var i=this._useBlendShapeNormal&&e,o=this._useBlendShapeTangent&&t;(this._useBlendShapeNormal!==i||this._useBlendShapeTangent!==o)&&(this._useBlendShapeNormal=i,this._useBlendShapeTangent=o,this._layoutChangeManager.dispatch(0,this))},r._frameDataChangeListener=function(e,t){this._updateUseNormalAndTangent(!!t.deltaNormals,!!t.deltaTangents),this._dataChangeManager.dispatch()},Ie(n,[{key:"frames",get:function(){return this._frames}}]),n}(),c_=function(n){be(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.setVertexElements=function(t){this._setVertexElements(t)},a.setVertexBufferBinding=function(t,i,o){i===void 0&&(i=0),o===void 0&&(o=0);var s=t,l=s.buffer!==void 0;l||(s=new Hl(t,i));var u=this._primitive.vertexBufferBindings;u.length<=o&&(u.length=o+1),this._setVertexBufferBinding(l?i:o,s)},a.setVertexBufferBindings=function(t,i){i===void 0&&(i=0);var o=this._primitive.vertexBufferBindings,s=t.length,l=i+s;o.length<l&&(o.length=l);for(var u=0;u<s;u++)this._setVertexBufferBinding(i+u,t[u])},a.setIndexBufferBinding=function(t,i){var o=t;if(o){var s=o.buffer!==void 0;s||(o=new ld(t,i))}this._setIndexBufferBinding(o)},Ie(r,[{key:"instanceCount",get:function(){return this._primitive.instanceCount},set:function(t){this._primitive.instanceCount=t}},{key:"vertexBufferBindings",get:function(){return this._primitive.vertexBufferBindings}},{key:"indexBufferBinding",get:function(){return this._primitive.indexBufferBinding}},{key:"vertexElements",get:function(){return this._primitive.vertexElements}}]),r}(_x),yr=function(n){be(r,n);function r(e){var t;return t=n.call(this,e)||this,t._enableVertexColor=!1,t._onMeshChanged=t._onMeshChanged.bind(Et(t)),t}var a=r.prototype;return a._onDestroy=function(){var t=this._mesh;t&&(t.destroyed||this._addResourceReferCount(t,-1),t._updateFlagManager.removeListener(this._onMeshChanged),this._mesh=null),n.prototype._onDestroy.call(this)},a._cloneTo=function(t,i,o){n.prototype._cloneTo.call(this,t,i,o),t.mesh=this._mesh},a._prepareRender=function(t){if(!this._mesh){Pt.error("mesh is null.");return}if(this._mesh.destroyed){Pt.error("mesh is destroyed.");return}n.prototype._prepareRender.call(this,t)},a._updateBounds=function(t){var i=this._mesh;if(i){var o=i.bounds,s=this._entity.transform.worldMatrix;Da.transform(o,s,t)}else t.min.set(0,0,0),t.max.set(0,0,0)},a._render=function(t){var i=this._mesh;if(this._dirtyUpdateFlag&2){var o=this.shaderData,s=i._primitive.vertexElements;o.disableMacro(r._uvMacro),o.disableMacro(r._uv1Macro),o.disableMacro(r._normalMacro),o.disableMacro(r._tangentMacro),o.disableMacro(r._enableVertexColorMacro);for(var l=0,u=s.length;l<u;l++)switch(s[l].attribute){case"TEXCOORD_0":o.enableMacro(r._uvMacro);break;case"TEXCOORD_1":o.enableMacro(r._uv1Macro);break;case"NORMAL":o.enableMacro(r._normalMacro);break;case"TANGENT":o.enableMacro(r._tangentMacro);break;case"COLOR_0":this._enableVertexColor&&o.enableMacro(r._enableVertexColorMacro);break}this._dirtyUpdateFlag&=-3}for(var c=this._materials,f=i.subMeshes,d=t.camera._renderPipeline,h=this._engine._renderDataPool,_=0,p=f.length;_<p;_++){var v=c[_];if(!!v){(v.destroyed||v.shader.destroyed)&&(v=this.engine._meshMagentaMaterial);var y=h.getFromPool();y.setX(this,v,i._primitive,f[_]),d.pushRenderData(t,y)}}},a._setMesh=function(t){var i=this._mesh;i&&(this._addResourceReferCount(i,-1),i._updateFlagManager.removeListener(this._onMeshChanged)),t&&(this._addResourceReferCount(t,1),t._updateFlagManager.addListener(this._onMeshChanged),this._dirtyUpdateFlag|=3),this._mesh=t},a._onMeshChanged=function(t){t&Xv.Bounds&&(this._dirtyUpdateFlag|=zn.WorldVolume),t&Xv.VertexElements&&(this._dirtyUpdateFlag|=2)},Ie(r,[{key:"mesh",get:function(){return this._mesh},set:function(t){this._mesh!==t&&this._setMesh(t)}},{key:"enableVertexColor",get:function(){return this._enableVertexColor},set:function(t){t!==this._enableVertexColor&&(this._dirtyUpdateFlag|=2,this._enableVertexColor=t)}}]),r}(Gt);(function(){yr._uvMacro=_t.getByName("RENDERER_HAS_UV")})();(function(){yr._uv1Macro=_t.getByName("RENDERER_HAS_UV1")})();(function(){yr._normalMacro=_t.getByName("RENDERER_HAS_NORMAL")})();(function(){yr._tangentMacro=_t.getByName("RENDERER_HAS_TANGENT")})();(function(){yr._enableVertexColorMacro=_t.getByName("RENDERER_ENABLE_VERTEXCOLOR")})();H([te],yr.prototype,"_mesh",void 0);H([te],yr.prototype,"_onMeshChanged",null);var jb;(function(n){n[n.VertexElementMacro=2]="VertexElementMacro",n[n.All=3]="All"})(jb||(jb={}));var ud;(function(n){n[n.Depth=27]="Depth",n[n.Stencil=28]="Stencil",n[n.DepthStencil=29]="DepthStencil",n[n.Depth16=30]="Depth16",n[n.Depth24=31]="Depth24",n[n.Depth32=32]="Depth32",n[n.Depth24Stencil8=33]="Depth24Stencil8",n[n.Depth32Stencil8=34]="Depth32Stencil8"})(ud||(ud={}));var Oi;(function(n){n[n.PositiveX=0]="PositiveX",n[n.NegativeX=1]="NegativeX",n[n.PositiveY=2]="PositiveY",n[n.NegativeY=3]="NegativeY",n[n.PositiveZ=4]="PositiveZ",n[n.NegativeZ=5]="NegativeZ"})(Oi||(Oi={}));var pi;(function(n){n[n.Never=0]="Never",n[n.Less=1]="Less",n[n.Equal=2]="Equal",n[n.LessEqual=3]="LessEqual",n[n.Greater=4]="Greater",n[n.NotEqual=5]="NotEqual",n[n.GreaterEqual=6]="GreaterEqual",n[n.Always=7]="Always"})(pi||(pi={}));var lc;(function(n){n[n.Static=0]="Static",n[n.Dynamic=1]="Dynamic"})(lc||(lc={}));var pr;(function(n){n[n.Clamp=0]="Clamp",n[n.Repeat=1]="Repeat",n[n.Mirror=2]="Mirror"})(pr||(pr={}));var jl=function(n){be(r,n);function r(e,t,i,o,s,l){s===void 0&&(s=ye.Depth),l===void 0&&(l=1);var u;if(u=n.call(this,e)||this,u._depthFormat=null,u._autoGenerateMipmaps=!0,u._depthTexture=null,u._width=t,u._height=i,u._antiAliasing=l,u._depth=s,o){for(var c=fr(o,Array)?o.slice():[o],f=0,d=c.length;f<d;f++){var h=c[f];if(h._isDepthTexture)throw"Render texture can't use depth format.";h._addReferCount(1)}u._colorTextures=c}else u._colorTextures=[];if(fr(s,Eo)){if(!s._isDepthTexture)throw"Depth texture must use depth format.";u._depthTexture=s,u._depthTexture._addReferCount(1),u._depthFormat=s.format}else typeof s=="number"&&(u._depthFormat=s);return u._platformRenderTarget=e._hardwareRenderer.createPlatformRenderTarget(Et(u)),u}var a=r.prototype;return a.getColorTexture=function(t){t===void 0&&(t=0);var i;return(i=this._colorTextures[t])!=null?i:null},a.generateMipmaps=function(){if(this._autoGenerateMipmaps){for(var t=this._colorTextures,i=0,o=t.length;i<o;i++){var s=t[i];s.generateMipmaps()}this._depthTexture&&this._depthTexture.generateMipmaps()}},a._onDestroy=function(){var t;n.prototype._onDestroy.call(this),this._platformRenderTarget.destroy();for(var i=this,o=i._colorTextures,s=0,l=o.length;s<l;s++)o[s]._addReferCount(-1);o.length=0,(t=this._depthTexture)==null||t._addReferCount(-1),this._depthTexture=null,this._depth=null},a._blitRenderTarget=function(){this._platformRenderTarget.blitRenderTarget()},a._rebuild=function(){this._platformRenderTarget=this._engine._hardwareRenderer.createPlatformRenderTarget(this)},Ie(r,[{key:"autoGenerateMipmaps",get:function(){return this._autoGenerateMipmaps},set:function(t){this._autoGenerateMipmaps=t}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"colorTextureCount",get:function(){return this._colorTextures.length}},{key:"depthTexture",get:function(){return this._depthTexture}},{key:"antiAliasing",get:function(){return this._antiAliasing}}]),r}(l_),br=function(n){be(r,n);function r(e,t,i,o,s,l){o===void 0&&(o=ye.R8G8B8A8),s===void 0&&(s=!0),l===void 0&&(l=lc.Static);var u;return u=n.call(this,e)||this,u._mipmap=s,u._width=t,u._height=i,u._usage=l,u._format=o,u._mipmapCount=u._getMipmapCount(),u._isDepthTexture=o==ye.Depth||o==ye.DepthStencil||o==ye.Depth16||o==ye.Depth24||o==ye.Depth32||o==ye.Depth24Stencil8||o==ye.Depth32Stencil8,u._platformTexture=e._hardwareRenderer.createPlatformTexture2D(Et(u)),u.filterMode=u._isIntFormat()?Jn.Point:Jn.Bilinear,u.wrapModeU=u.wrapModeV=pr.Repeat,u}var a=r.prototype;return a.setPixelBuffer=function(t,i,o,s,l,u){i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=0),this._platformTexture.setPixelBuffer(t,i,o,s,l,u),this._isContentLost=!1},a.setImageSource=function(t,i,o,s,l,u){i===void 0&&(i=0),o===void 0&&(o=!1),s===void 0&&(s=!1),l===void 0&&(l=0),u===void 0&&(u=0),this._platformTexture.setImageSource(t,i,o,s,l,u),this._isContentLost=!1},a.getPixelBuffer=function(t,i,o,s,l,u){var c=arguments.length;c===1?this._platformTexture.getPixelBuffer(0,0,this._width,this._height,0,t):c===2?this._platformTexture.getPixelBuffer(0,0,this._width>>t,this._height>>t,t,i):c===5?this._platformTexture.getPixelBuffer(t,i,o,s,0,l):c===6&&this._platformTexture.getPixelBuffer(t,i,o,s,l,u)},a._rebuild=function(){this._platformTexture=this._engine._hardwareRenderer.createPlatformTexture2D(this),n.prototype._rebuild.call(this)},r}(Eo),mx=function(n){be(r,n);function r(e,t,i,o,s,l){s===void 0&&(s=ye.R8G8B8A8),l===void 0&&(l=!0);var u;return u=n.call(this,e)||this,u._mipmap=l,u._width=t,u._height=i,u._length=o,u._format=s,u._mipmapCount=u._getMipmapCount(),u._platformTexture=e._hardwareRenderer.createPlatformTexture2DArray(Et(u)),u.filterMode=Jn.Bilinear,u.wrapModeU=u.wrapModeV=pr.Repeat,u}var a=r.prototype;return a.setPixelBuffer=function(t,i,o,s,l,u,c,f){o===void 0&&(o=0),s===void 0&&(s=0),l===void 0&&(l=0),this._platformTexture.setPixelBuffer(t,i,o,s,l,u,c,f),this._isContentLost=!1},a.setImageSource=function(t,i,o,s,l,u,c){o===void 0&&(o=0),s===void 0&&(s=!1),l===void 0&&(l=!1),u===void 0&&(u=0),c===void 0&&(c=0),this._platformTexture.setImageSource(t,i,o,s,l,u,c),this._isContentLost=!1},a.getPixelBuffer=function(t,i,o,s,l,u,c){var f=arguments.length;f===1?this._platformTexture.getPixelBuffer(t,0,0,this._width,this._height,0,i):f===2?this._platformTexture.getPixelBuffer(t,0,0,this._width>>i,this._height>>i,i,o):f===5?this._platformTexture.getPixelBuffer(t,i,o,s,l,0,u):f===6&&this._platformTexture.getPixelBuffer(t,i,o,s,l,u,c)},a._rebuild=function(){this._platformTexture=this._engine._hardwareRenderer.createPlatformTexture2DArray(this),n.prototype._rebuild.call(this)},Ie(r,[{key:"length",get:function(){return this._length}}]),r}(Eo),Ma=function(n){be(r,n);function r(e,t,i,o){i===void 0&&(i=ye.R8G8B8A8),o===void 0&&(o=!0);var s;return s=n.call(this,e)||this,s._mipmap=o,s._width=t,s._height=t,s._format=i,s._mipmapCount=s._getMipmapCount(),s._platformTexture=e._hardwareRenderer.createPlatformTextureCube(Et(s)),s.filterMode=Jn.Bilinear,s.wrapModeU=s.wrapModeV=pr.Clamp,s}var a=r.prototype;return a.setPixelBuffer=function(t,i,o,s,l,u,c){o===void 0&&(o=0),s===void 0&&(s=0),l===void 0&&(l=0),this._platformTexture.setPixelBuffer(t,i,o,s,l,u,c),this._isContentLost=!1},a.setImageSource=function(t,i,o,s,l,u,c){o===void 0&&(o=0),s===void 0&&(s=!1),l===void 0&&(l=!1),u===void 0&&(u=0),c===void 0&&(c=0),this._platformTexture.setImageSource(t,i,o,s,l,u,c),this._isContentLost=!1},a.getPixelBuffer=function(t,i,o,s,l,u,c){var f=arguments.length;f===2?this._platformTexture.getPixelBuffer(t,0,0,this._width,this._height,0,i):f===3?this._platformTexture.getPixelBuffer(t,0,0,this._width>>i,this._height>>i,i,o):f===6?this._platformTexture.getPixelBuffer(t,i,o,s,l,0,u):f===7&&this._platformTexture.getPixelBuffer(t,i,o,s,l,u,c)},a._rebuild=function(){this._platformTexture=this._engine._hardwareRenderer.createPlatformTextureCube(this),n.prototype._rebuild.call(this)},r}(Eo),ol=function(){function n(a,e){this._blendShapeCount=0,this._blendShapes=[],this._subDataDirtyFlags=[],this._vertexBuffers=[],this._uniformOccupiesCount=0,this._bufferBindingOffset=-1,this._vertexElementOffset=0,this._useBlendNormal=!1,this._useBlendTangent=!1,this._vertexElementCount=0,this._storeInVertexBufferInfo=[],this._maxCountSingleVertexBuffer=0,this._lastHostCreatedInfo=new pt,this._canUseTextureStoreData=!0,this._dataTextureInfo=new z,this._engine=a,this._modelMesh=e,this._canUseTextureStoreData=this._engine._hardwareRenderer.capability.canUseFloatTextureBlendShape,this._updateLayoutChange=this._updateLayoutChange.bind(this)}var r=n.prototype;return r._addBlendShape=function(e){this._blendShapes.push(e),this._blendShapeCount++,e._layoutChangeManager.addListener(this._updateLayoutChange),this._updateLayoutChange(0,e),this._subDataDirtyFlags.push(e._dataChangeManager.createFlag(o_))},r._clearBlendShapes=function(){for(var e=this._blendShapes,t=0,i=e.length;t<i;t++)e[t]._layoutChangeManager.removeListener(this._updateLayoutChange);this._useBlendNormal=!1,this._useBlendTangent=!1,this._vertexElementCount=0,this._blendShapes.length=0,this._blendShapeCount=0;for(var o=this._subDataDirtyFlags,s=0,l=o.length;s<l;s++)o[s].destroy();o.length=0},r._updateShaderData=function(e,t){var i=this._blendShapeCount;if(i>0){if(e.enableMacro(n._blendShapeMacro),this._useTextureMode())e.enableMacro(n._blendShapeTextureMacro),e.setTexture(n._blendShapeTextureProperty,this._vertexTexture),e.setVector3(n._blendShapeTextureInfoProperty,this._dataTextureInfo),e.setFloatArray(n._blendShapeWeightsProperty,t.blendShapeWeights),e.enableMacro("RENDERER_BLENDSHAPE_COUNT",i.toString()),this._uniformOccupiesCount=i+1;else{var o=this._getVertexBufferModeSupportCount();if(i>o){var s=t._condensedBlendShapeWeights;s||(s=new Float32Array(o),t._condensedBlendShapeWeights=s),this._filterCondensedBlendShapeWeights(t.blendShapeWeights,s),e.setFloatArray(n._blendShapeWeightsProperty,s),this._modelMesh._primitive.enableVAO=!1,i=o}else e.setFloatArray(n._blendShapeWeightsProperty,t.blendShapeWeights),this._modelMesh._primitive.enableVAO=!0;e.disableMacro(n._blendShapeTextureMacro),e.disableMacro("RENDERER_BLENDSHAPE_COUNT"),this._uniformOccupiesCount=i}this._useBlendNormal?e.enableMacro(n._blendShapeNormalMacro):e.disableMacro(n._blendShapeNormalMacro),this._useBlendTangent?e.enableMacro(n._blendShapeTangentMacro):e.disableMacro(n._blendShapeTangentMacro)}else e.disableMacro(n._blendShapeMacro),e.disableMacro("RENDERER_BLENDSHAPE_COUNT")},r._useTextureMode=function(){return this._canUseTextureStoreData?this._blendShapeCount>this._getVertexBufferModeSupportCount():!1},r._isCreateHost=function(e){var t=this._lastHostCreatedInfo;return t.x!==this._blendShapeCount||!!t.y!==this._useBlendNormal||!!t.z!==this._useBlendTangent||t.w!==e},r._vertexElementsNeedUpdate=function(){var e=this._getVertexBufferModeSupportCount(),t=this._lastHostCreatedInfo;return Math.min(t.x,e)!==Math.min(this._blendShapeCount,e)||!!t.y!==this._useBlendNormal||!!t.z!==this._useBlendTangent},r._needUpdateData=function(){for(var e=this._subDataDirtyFlags,t=0,i=e.length;t<i;t++)if(e[t].flag)return!0;return!1},r._updateVertexBufferIndex=function(){if(this._bufferBindingOffset===-1){for(var e=this._modelMesh,t=e._internalVertexBufferIndex,i=e._primitive.vertexBufferBindings,o=0,s=Math.max(i.length,t+1);o<s&&!(!i[o]&&o!==t);o++);this._bufferBindingOffset=o}},r._addVertexElements=function(e){this._updateVertexBufferIndex();for(var t=this._vertexElementOffset,i=this._bufferBindingOffset,o=0,s=0,l=Math.min(this._blendShapeCount,this._getVertexBufferModeSupportCount());s<l;s++)e._setVertexElement(t++,new Kt("POSITION_BS"+s,o,rt.Vector3,i)),o+=12,this._useBlendNormal&&(e._setVertexElement(t++,new Kt("NORMAL_BS"+s,o,rt.Vector3,i)),o+=12),this._useBlendTangent&&(e._setVertexElement(t++,new Kt("TANGENT_BS"+s,o,rt.Vector3,i)),o+=12);return t},r._update=function(e){var t=this._modelMesh.vertexCount,i=this._useTextureMode(),o=this._isCreateHost(t);o&&(i?this._createTextureArray(t):this._createVertexBuffers(t,e),this._lastHostCreatedInfo.set(this._blendShapeCount,+this._useBlendNormal,+this._useBlendTangent,t)),this._needUpdateData()&&(i?this._updateTextureArray(t,o):this._updateVertexBuffers(t,o))},r._releaseMemoryCache=function(){for(var e=this._blendShapes,t=0,i=e.length;t<i;t++)e[t]._releaseData();this._vertices=null},r._createVertexBuffers=function(e,t){var i=this,o=i._engine,s=i._modelMesh,l=i._blendShapeCount,u=i._vertexBuffers,c=this._vertexElementCount*3,f=c*4,d=Math.floor(255/f),h=Math.ceil(l/d),_=c*e*Math.min(d,l);u.length=h,this._vertices=new Float32Array(_),this._maxCountSingleVertexBuffer=d,this._storeInVertexBufferInfo.length=l;for(var p=this._bufferBindingOffset,v=0;v<h;v++){var y=h-1,m=v===y?l-y*d:d,g=m*f,x=g*e,b=t?Dn.Static:Dn.Dynamic,S=new ha(o,kr.VertexBuffer,x,b);s._setVertexBufferBinding(p+v,new Hl(S,g)),u[v]=S}},r._createTextureArray=function(e){var t=this._engine._hardwareRenderer.capability.maxTextureSize,i=this._vertexElementCount,o=i*e,s=1;o>t&&(s=Math.ceil(o/t),o=t);var l=this._vertexTexture,u=this._blendShapes.length;l&&l.destroy(),l=new mx(this._engine,o,s,u,ye.R32G32B32A32,!1),l.filterMode=Jn.Point,this._vertices=new Float32Array(u*o*s*4),this._vertexTexture=l,this._dataTextureInfo.set(i,o,s)},r._updateVertexBuffers=function(e,t){for(var i=this,o=i._blendShapes,s=i._maxCountSingleVertexBuffer,l=this,u=l._vertices,c=l._vertexBuffers,f=l._storeInVertexBufferInfo,d=this._subDataDirtyFlags,h=this._vertexElementCount*3,_=h*4,p=this._bufferBindingOffset,v=0,y=o.length;v<y;v++){var m=d[v];if(t||m.flag){var g=o[v].frames,x=g.length,b=g[x-1];if(x>0&&b.deltaPositions.length!==e)throw"BlendShape frame deltaPositions length must same with mesh vertexCount.";var S=Math.floor(v/s),C=v%s,E=c[S],T=E.byteLength/(e*4),M=C*h,L=f[v];L||(f[v]=L=new Ze),L.set(p+S,C*_);for(var F=b.deltaPositions,N=0;N<e;N++){var I=M+T*N,O=F[N];O&&(u[I]=O.x,u[I+1]=O.y,u[I+2]=O.z)}if(M+=3,this._useBlendNormal){var P=b.deltaNormals;if(P)for(var R=0;R<e;R++){var A=M+T*R,D=P[R];D&&(u[A]=D.x,u[A+1]=D.y,u[A+2]=D.z)}M+=3}if(this._useBlendTangent){var B=b.deltaTangents;if(B)for(var k=0;k<e;k++){var V=M+T*k,U=B[k];U&&(u[V]=U.x,u[V+1]=U.y,u[V+2]=U.z)}M+=3}(C===s-1||v===y-1)&&E.setData(u,0,0,E.byteLength/4),m.flag=!1}}},r._updateTextureArray=function(e,t){for(var i=this,o=i._blendShapes,s=i._vertexTexture,l=i._vertices,u=i._subDataDirtyFlags,c=0,f=o.length;c<f;c++){var d=u[c],h=s.width*s.height*4;if(t||d.flag){var _=o[c].frames,p=_.length,v=_[p-1];if(p>0&&v.deltaPositions.length!==e)throw"BlendShape frame deltaPositions length must same with mesh vertexCount.";for(var y=v.deltaPositions,m=v.deltaNormals,g=v.deltaTangents,x=c*h,b=0;b<e;b++){var S=y[b];if(l[x]=S.x,l[x+1]=S.y,l[x+2]=S.z,x+=4,m){var C=m[b];l[x]=C.x,l[x+1]=C.y,l[x+2]=C.z,x+=4}if(g){var E=g[b];l[x]=E.x,l[x+1]=E.y,l[x+2]=E.z,x+=4}}d.flag=!1}}s.setPixelBuffer(0,l)},r._updateLayoutChange=function(e,t){var i=this._blendShapeCount>1,o=1,s=t._useBlendShapeNormal,l=t._useBlendShapeTangent;i&&(s&&(s=this._useBlendNormal),l&&(l=this._useBlendTangent)),s&&o++,l&&o++,this._useBlendNormal=s,this._useBlendTangent=l,this._vertexElementCount=o},r._attributeModeUpdateVertexElement=function(e,t,i,o){var s=this._vertexElementOffset+this._vertexElementCount*o,l=t[i],u=l.x,c=l.y,f=e[s];if(f.bindingIndex=u,f.offset=c,this._useBlendNormal){var d=e[++s];c+=12,d.bindingIndex=u,d.offset=c}if(this._useBlendTangent){var h=e[++s];c+=12,h.bindingIndex=u,h.offset=c}},r._getVertexBufferModeSupportCount=function(){return this._useBlendNormal&&this._useBlendTangent?2:this._useBlendNormal||this._useBlendTangent?4:8},r._filterCondensedBlendShapeWeights=function(e,t){for(var i=t.length,o=this._modelMesh._primitive.vertexElements,s=this._storeInVertexBufferInfo,l=Number.POSITIVE_INFINITY,u,c=0,f=Math.min(e.length,this._blendShapeCount);c<f;c++){var d=e[c];if(c<i)this._attributeModeUpdateVertexElement(o,s,c,c),t[c]=d,d<l&&(l=d,u=c);else if(d>l){this._attributeModeUpdateVertexElement(o,s,c,u),t[u]=d,l=Number.POSITIVE_INFINITY;for(var h=0;h<i;h++){var _=t[h];_<l&&(l=_,u=h)}}}},n}();(function(){ol._blendShapeMacro=_t.getByName("RENDERER_HAS_BLENDSHAPE")})();(function(){ol._blendShapeTextureMacro=_t.getByName("RENDERER_BLENDSHAPE_USE_TEXTURE")})();(function(){ol._blendShapeNormalMacro=_t.getByName("RENDERER_BLENDSHAPE_HAS_NORMAL")})();(function(){ol._blendShapeTangentMacro=_t.getByName("RENDERER_BLENDSHAPE_HAS_TANGENT")})();(function(){ol._blendShapeWeightsProperty=X.getByName("renderer_BlendShapeWeights")})();(function(){ol._blendShapeTextureProperty=X.getByName("renderer_BlendShapeTexture")})();(function(){ol._blendShapeTextureInfoProperty=X.getByName("renderer_BlendShapeTextureInfo")})();var Ae;(function(n){n.Position="POSITION",n.Normal="NORMAL",n.Color="COLOR_0",n.Tangent="TANGENT",n.BoneWeight="WEIGHTS_0",n.BoneIndex="JOINTS_0",n.UV="TEXCOORD_0",n.UV1="TEXCOORD_1",n.UV2="TEXCOORD_2",n.UV3="TEXCOORD_3",n.UV4="TEXCOORD_4",n.UV5="TEXCOORD_5",n.UV6="TEXCOORD_6",n.UV7="TEXCOORD_7"})(Ae||(Ae={}));var Kn=function(n){be(r,n);function r(e,t){var i;return i=n.call(this,e)||this,i._internalVertexBufferIndex=-1,i._vertexCount=0,i._vertexCountDirty=!1,i._dataVersionCounter=0,i._positions=null,i._normals=null,i._colors=null,i._tangents=null,i._uv=null,i._uv1=null,i._uv2=null,i._uv3=null,i._uv4=null,i._uv5=null,i._uv6=null,i._uv7=null,i._boneWeights=null,i._boneIndices=null,i._advancedElementUpdateFlag=0,i._advancedDataUpdateFlag=0,i._advancedVertexDataVersions=new Array(14),i._advancedDataSyncToBuffer=!1,i._internalVertexBufferStride=0,i._internalVertexBufferCreatedInfo=new z(0,0,-1),i._internalVertexElementsOffset=0,i._internalVertexElementsFlags=0,i._vertexBufferInfos=[],i._indices=null,i._indicesFormat=null,i._indicesChangeFlag=!1,i._accessible=!0,i.name=t,i._blendShapeManager=new ol(e,Et(i)),i}var a=r.prototype;return a.setPositions=function(t){var i;if(!(!this._positions&&!t)){this._updateAdvancedVertexDataMarks(1,0),this._positions=t;var o;this._vertexCount=(o=(i=t)==null?void 0:i.length)!=null?o:0,this._vertexCountDirty=!1}},a.getPositions=function(){var t=this._getVertexElementData(this._positions,Ae.Position,0,this._readVector3VertexData);return this._positions=t,t},a.setNormals=function(t){this._beforeSetAdvancedVertexData(t,2,1),this._normals=t},a.getNormals=function(){var t=this._getVertexElementData(this._normals,Ae.Normal,1,this._readVector3VertexData);return this._normals=t,t},a.setColors=function(t){this._beforeSetAdvancedVertexData(t,4,2),this._colors=t},a.getColors=function(){var t=this._getVertexElementData(this._colors,Ae.Color,2,this._readColorVertexData);return this._colors=t,t},a.setBoneWeights=function(t){this._beforeSetAdvancedVertexData(t,16,4),this._boneWeights=t},a.getBoneWeights=function(){var t=this._getVertexElementData(this._boneWeights,Ae.BoneWeight,4,this._readVector4VertexData);return this._boneWeights=t,t},a.setBoneIndices=function(t){this._beforeSetAdvancedVertexData(t,32,5),this._boneIndices=t},a.getBoneIndices=function(){var t=this._getVertexElementData(this._boneIndices,Ae.BoneIndex,5,this._readVector4VertexData);return this._boneIndices=t,t},a.setTangents=function(t){this._beforeSetAdvancedVertexData(t,8,3),this._tangents=t},a.getTangents=function(){var t=this._getVertexElementData(this._tangents,Ae.Tangent,3,this._readVector4VertexData);return this._tangents=t,t},a.setUVs=function(t,i){switch(i=i!=null?i:0,i){case 0:this._beforeSetAdvancedVertexData(t,64,6),this._uv=t;break;case 1:this._beforeSetAdvancedVertexData(t,128,7),this._uv1=t;break;case 2:this._beforeSetAdvancedVertexData(t,256,8),this._uv2=t;break;case 3:this._beforeSetAdvancedVertexData(t,512,9),this._uv3=t;break;case 4:this._beforeSetAdvancedVertexData(t,1024,10),this._uv4=t;break;case 5:this._beforeSetAdvancedVertexData(t,2048,11),this._uv5=t;break;case 6:this._beforeSetAdvancedVertexData(t,4096,12),this._uv6=t;break;case 7:this._beforeSetAdvancedVertexData(t,8192,13),this._uv7=t;break;default:throw"The index of channel needs to be in range [0 - 7]."}},a.getUVs=function(t){switch(t=t!=null?t:0,t){case 0:var i=this._getVertexElementData(this._uv,Ae.UV,6,this._readVector2VertexData);return this._uv=i,i;case 1:var o=this._getVertexElementData(this._uv1,Ae.UV1,7,this._readVector2VertexData);return this._uv1=o,o;case 2:var s=this._getVertexElementData(this._uv2,Ae.UV2,8,this._readVector2VertexData);return this._uv2=s,s;case 3:var l=this._getVertexElementData(this._uv3,Ae.UV3,9,this._readVector2VertexData);return this._uv3=l,l;case 4:var u=this._getVertexElementData(this._uv4,Ae.UV4,10,this._readVector2VertexData);return this._uv4=u,u;case 5:var c=this._getVertexElementData(this._uv5,Ae.UV5,11,this._readVector2VertexData);return this._uv5=c,c;case 6:var f=this._getVertexElementData(this._uv6,Ae.UV6,12,this._readVector2VertexData);return this._uv6=f,f;case 7:var d=this._getVertexElementData(this._uv7,Ae.UV7,13,this._readVector2VertexData);return this._uv7=d,d}throw"The index of channel needs to be in range [0 - 7]."},a.setIndices=function(t){this._indices!==t&&(this._indices=t,fr(t,Uint8Array)?this._indicesFormat=Lr.UInt8:fr(t,Uint16Array)?this._indicesFormat=Lr.UInt16:fr(t,Uint32Array)&&(this._indicesFormat=Lr.UInt32)),this._indicesChangeFlag=!0},a.getIndices=function(){if(!this._accessible)throw"Not allowed to access data while accessible is false.";return this._indices},a.setVertexElements=function(t){this._clearVertexElements();for(var i=t.length,o=0;o<i;o++)this._addVertexElement(t[o]);var s=this._primitive._vertexElementMap;s[Ae.Position]||this.setPositions(null),s[Ae.Normal]||this.setNormals(null),s[Ae.Color]||this.setColors(null),s[Ae.BoneWeight]||this.setBoneWeights(null),s[Ae.BoneIndex]||this.setBoneIndices(null),s[Ae.Tangent]||this.setTangents(null),s[Ae.UV]||this.setUVs(null,0),s[Ae.UV1]||this.setUVs(null,1),s[Ae.UV2]||this.setUVs(null,2),s[Ae.UV3]||this.setUVs(null,3),s[Ae.UV4]||this.setUVs(null,4),s[Ae.UV5]||this.setUVs(null,5),s[Ae.UV6]||this.setUVs(null,6),s[Ae.UV7]||this.setUVs(null,7);var l=this._internalVertexBufferCreatedInfo.z;if(l!==-1){var u;(u=this._primitive.vertexBufferBindings[l])==null||u.buffer.destroy(),this._setVertexBufferBinding(l,null),this._internalVertexBufferCreatedInfo.z=-1}this._internalVertexBufferStride=0,this._internalVertexElementsOffset=i,this._advancedElementUpdateFlag=0,this._vertexCountDirty=!0,this._blendShapeManager._bufferBindingOffset=-1,this._blendShapeManager._vertexElementOffset=i},a.setVertexBufferBinding=function(t,i,o){i===void 0&&(i=0),o===void 0&&(o=0);var s=t,l=s.buffer!==void 0;l||(s=new Hl(t,i));var u=l?i:o,c=this._primitive.vertexBufferBindings,f=this._vertexBufferInfos,d=u+1;c.length<d&&(c.length=d,f.length=d),this._setVertexBufferBinding(u,s),u===this._internalVertexBufferIndex&&(this._internalVertexBufferIndex=-1),u===this._blendShapeManager._bufferBindingOffset&&(this._blendShapeManager._bufferBindingOffset=-1),this._vertexCountDirty=!0},a.setVertexBufferBindings=function(t,i){i===void 0&&(i=0);var o=t.length,s=this._primitive.vertexBufferBindings,l=this._vertexBufferInfos,u=i+o;s.length<u&&(s.length=u,l.length=u);for(var c=0;c<o;c++){var f=i+c;this._setVertexBufferBinding(f,t[c]),f===this._internalVertexBufferIndex&&(this._internalVertexBufferIndex=-1),f===this._blendShapeManager._bufferBindingOffset&&(this._blendShapeManager._bufferBindingOffset=-1)}this._vertexCountDirty=!0},a.getVertexElement=function(t){return this._updateVertexElements(),this._primitive._vertexElementMap[t]},a.addBlendShape=function(t){this._blendShapeManager._addBlendShape(t)},a.clearBlendShapes=function(){this._blendShapeManager._clearBlendShapes()},a.getBlendShapeName=function(t){var i=this._blendShapeManager._blendShapes;return i[t].name},a.uploadData=function(t){if(this._updateVertexElements(),this._advancedDataSyncToBuffer=!0,this._updateInternalVertexBuffer(t),this._advancedDataUpdateFlag&65535){this._updateAdvancedVertices();for(var i=this._vertexBufferInfos,o=this._primitive.vertexBufferBindings,s=0,l=o.length;s<l;s++){var u,c=i[s];if((u=c)!=null&&u.uploadAdvancedData){var f,d=(f=o[s])==null?void 0:f.buffer;d.setData(d.data),c.uploadAdvancedData=!1}}}if(this._advancedDataSyncToBuffer=!1,this._indicesChangeFlag){var h,_=this,p=_._indices,v=(h=this._primitive.indexBufferBinding)==null?void 0:h._buffer;if(p)if(!v||p.byteLength!=v.byteLength){var y;(y=v)==null||y.destroy();var m=new ha(this._engine,kr.IndexBuffer,p);this._setIndexBufferBinding(new ld(m,this._indicesFormat))}else v.setData(p),this._primitive.indexBufferBinding._format!==this._indicesFormat&&this._setIndexBufferBinding(new ld(v,this._indicesFormat));else v&&(v.destroy(),this._setIndexBufferBinding(null));this._indicesChangeFlag=!1}var g=this._blendShapeManager;g._blendShapeCount>0&&g._update(t),t&&(this._accessible=!1,this._releaseCache(!1))},a.calculateTangents=function(){var t=this.getPositions(),i=this.getNormals(),o=this.getUVs();if(!i||!o)throw"Set normal and uv before calculation.";for(var s=this,l=s._indices,u=s.vertexCount,c=r._tempVec0,f=r._tempVec1,d=r._tempVec2,h=r._tempVec3,_=r._tempVec4,p=l?l.length/3:t.length/3,v=new Array(u),y=new Array(u),m=0;m<u;m++)v[m]=new pt,y[m]=new z;for(var g=0;g<p;g++){var x=3*g,b=3*g+1,S=3*g+2;l&&(x=l[x],b=l[b],S=l[S]);var C=t[x],E=t[b],T=t[S],M=o[x],L=o[b],F=o[S];z.subtract(E,C,c),z.subtract(T,C,f);var N=L.x-M.x,I=F.x-M.x,O=L.y-M.y,P=F.y-M.y,R=1/(N*P-I*O);z.scale(c,P*R,d),z.scale(f,O*R,_),z.subtract(d,_,d),z.scale(f,N*R,h),z.scale(c,I*R,_),z.subtract(h,_,h);var A=v[x];A.set(A.x+d.x,A.y+d.y,A.z+d.z,1),A=v[b],A.set(A.x+d.x,A.y+d.y,A.z+d.z,1),A=v[S],A.set(A.x+d.x,A.y+d.y,A.z+d.z,1),y[x].add(h),y[b].add(h),y[S].add(h)}for(var D=0;D<u;D++){var B=i[D],k=y[D],V=v[D];d.set(V.x,V.y,V.z),z.cross(d,k,_);var U=z.dot(_,B)>0?1:-1;z.scale(B,z.dot(d,B),_),z.subtract(d,_,d),d.normalize(),V.set(d.x,d.y,d.z,U)}this.setTangents(v)},a._setVertexBufferBinding=function(t,i){var o=this,s=this._primitive.vertexBufferBindings,l=this._vertexBufferInfos,u=function(){o._advancedDataSyncToBuffer||(l[t].dataVersion=o._dataVersionCounter++)},c=s[t];if(c&&c.buffer._dataUpdateManager.removeListener(u),n.prototype._setVertexBufferBinding.call(this,t,i),i){var f,d;i.buffer._dataUpdateManager.addListener(u),((f=l)[d=t]||(f[d]=new W5)).reset(),u()}else t+1==s.length&&s.length--},a._getVertexTypedArray=function(t,i){switch(i){case Rn.BYTE:return new Int8Array(t);case Rn.UNSIGNED_BYTE:return new Uint8Array(t);case Rn.SHORT:return new Int16Array(t);case Rn.UNSIGNED_SHORT:return new Uint16Array(t);case Rn.FLOAT:return new Float32Array(t)}},a._onDestroy=function(){n.prototype._onDestroy.call(this),this._releaseCache(!0)},a._getVertexElementData=function(t,i,o,s){var l=this._advancedVertexDataVersions,u,c=(u=l[o])!=null?u:-1,f=this._primitive._vertexElementMap[i],d=f?this._vertexBufferInfos[f.bindingIndex].dataVersion:-1;return c>=d?t:(l[o]=d,s.call(this,i))},a._beforeSetAdvancedVertexData=function(t,i,o){if(t&&t.length!==this._vertexCount)throw"The array provided needs to be the same size as vertex count.";this._updateAdvancedVertexDataMarks(i,o)},a._updateAdvancedVertexDataMarks=function(t,i){this._advancedElementUpdateFlag|=t,this._advancedDataUpdateFlag|=t,this._advancedVertexDataVersions[i]=this._dataVersionCounter++},a._updateInternalVertexBuffer=function(t){var i=this._internalVertexBufferStride,o=this.vertexCount,s=this._internalVertexBufferCreatedInfo,l=i*o;if(s.x*s.y!==l){var u=s.z;if(u!==-1){var c;(c=this._primitive.vertexBufferBindings[u])==null||c.buffer.destroy(),this._setVertexBufferBinding(u,null)}var f=this._internalVertexBufferIndex,d=i*this.vertexCount>0;if(d){this._advancedDataUpdateFlag|=this._internalVertexElementsFlags;var h=t?Dn.Static:Dn.Dynamic,_=new ha(this._engine,kr.VertexBuffer,l,h,!0);this._setVertexBufferBinding(f,new Hl(_,i))}s.set(i,o,d?f:-1)}},a._readVector2VertexData=function(t){return this._readVertexData(t,function(i,o){return new Ze(i[o],i[o+1])})},a._readVector3VertexData=function(t){return this._readVertexData(t,function(i,o){return new z(i[o],i[o+1],i[o+2])})},a._readVector4VertexData=function(t){return this._readVertexData(t,function(i,o){return new pt(i[o],i[o+1],i[o+2],i[o+3])})},a._readColorVertexData=function(t){return this._readVertexData(t,function(i,o){return new Me(i[o],i[o+1],i[o+2],i[o+3])})},a._readVertexData=function(t,i){var o,s=this._primitive,l=s._vertexElementMap[t];if(!l)return null;var u=s.vertexBufferBindings[l.bindingIndex],c=(o=u)==null?void 0:o.buffer;if(!c)return null;if(!c.readable)throw"Not allowed to access data while vertex buffer readable is false.";for(var f=this.vertexCount,d=l._formatMetaInfo,h=new Array(f),_=this._getVertexTypedArray(c.data.buffer,d.type),p=l.offset,v=u.stride,y=0;y<f;y++){var m=(y*v+p)/_.BYTES_PER_ELEMENT,g=i(_,m);d.normalized&&g.scale(d.normalizedScaleFactor),h[y]=g}return h},a._updateAdvancedVertexElement=function(t,i,o){var s=this._primitive,l=s._vertexElementMap;if(t){if(!l[i]){var u=this._getAttributeFormat(i),c=this._internalVertexBufferStride,f=this._getInternalVertexBufferIndex();this._addVertexElement(new Kt(i,c,u,f)),this._internalVertexBufferStride+=this._getAttributeByteLength(i),this._internalVertexElementsFlags|=o,this._blendShapeManager._vertexElementOffset++}}else{var d=l[i];if(d){var h=this._primitive.vertexElements.indexOf(d);h>=this._internalVertexElementsOffset?(this._internalVertexBufferStride-=this._getAttributeByteLength(i),this._internalVertexElementsFlags&=~o):this._internalVertexElementsOffset--,this._blendShapeManager._vertexElementOffset--,this._removeVertexElement(h)}}},a._updateAdvancedVertexElements=function(){var t=this._advancedElementUpdateFlag;t&1&&this._updateAdvancedVertexElement(this._positions,Ae.Position,1),t&2&&this._updateAdvancedVertexElement(this._normals,Ae.Normal,2),t&4&&this._updateAdvancedVertexElement(this._colors,Ae.Color,4),t&16&&this._updateAdvancedVertexElement(this._boneWeights,Ae.BoneWeight,16),t&32&&this._updateAdvancedVertexElement(this._boneIndices,Ae.BoneIndex,32),t&8&&this._updateAdvancedVertexElement(this._tangents,Ae.Tangent,8),t&64&&this._updateAdvancedVertexElement(this._uv,Ae.UV,64),t&128&&this._updateAdvancedVertexElement(this._uv1,Ae.UV1,128),t&256&&this._updateAdvancedVertexElement(this._uv2,Ae.UV2,256),t&512&&this._updateAdvancedVertexElement(this._uv3,Ae.UV3,512),t&1024&&this._updateAdvancedVertexElement(this._uv4,Ae.UV4,1024),t&2048&&this._updateAdvancedVertexElement(this._uv5,Ae.UV5,2048),t&4096&&this._updateAdvancedVertexElement(this._uv6,Ae.UV6,4096),t&8192&&this._updateAdvancedVertexElement(this._uv7,Ae.UV7,8192)},a._updateVertexElements=function(){var t=this._primitive.vertexElements,i=this._blendShapeManager,o=t.length,s=i._vertexElementOffset;this._advancedElementUpdateFlag&65535&&(this._updateAdvancedVertexElements(),this._advancedElementUpdateFlag=0);var l=!i._useTextureMode()&&i._vertexElementsNeedUpdate();if(s!==i._vertexElementOffset||l&&i._blendShapeCount>0){var u=i._addVertexElements(this);u<o&&this._setVertexElementsLength(u)}},a._writeVector2AdvancedVertexData=function(t,i,o){this._writeAdvancedVertexData(t,i,function(s,l,u){var c=o[u];c&&(s[l]=c.x,s[l+1]=c.y)})},a._writeVector3AdvancedVertexData=function(t,i,o){this._writeAdvancedVertexData(t,i,function(s,l,u){var c=o[u];c&&(s[l]=c.x,s[l+1]=c.y,s[l+2]=c.z)})},a._writeVector4AdvancedVertexData=function(t,i,o){this._writeAdvancedVertexData(t,i,function(s,l,u){var c=o[u];c&&(s[l]=c.x,s[l+1]=c.y,s[l+2]=c.z,s[l+3]=c.w)})},a._writeColorAdvancedVertexData=function(t,i,o){this._writeAdvancedVertexData(t,i,function(s,l,u){var c=o[u];c&&(s[l]=c.r,s[l+1]=c.g,s[l+2]=c.b,s[l+3]=c.a)})},a._writeAdvancedVertexData=function(t,i,o){var s,l=this._primitive,u=l._vertexElementMap[t],c=u.bindingIndex,f=l.vertexBufferBindings[c],d=(s=f)==null?void 0:s.buffer;if(!!d){if(!d.readable)throw"Vertex buffer is not readable, can't write vertex data.";var h,_=(h=this._advancedVertexDataVersions[i])!=null?h:-1,p=this._vertexBufferInfos[c];if(_>p.dataVersion){for(var v=u._formatMetaInfo,y=this._getVertexTypedArray(d.data.buffer,v.type),m=u.offset,g=f.stride,x=y.BYTES_PER_ELEMENT,b=v.normalized,S=v.size,C=v.normalizedScaleFactor,E=0,T=this._vertexCount;E<T;E++){var M=(E*g+m)/x;if(o(y,M,E),b)for(var L=0;L<S;L++)y[M+L]/=C}p.uploadAdvancedData=!0}}},a._updateAdvancedVertices=function(){var t=this,i=t._positions,o=t._normals,s=t._colors,l=t._advancedDataUpdateFlag,u=t._boneWeights,c=t._boneIndices,f=t._tangents,d=t._uv,h=t._uv1,_=t._uv2,p=t._uv3,v=t._uv4,y=t._uv5,m=t._uv6,g=t._uv7;l&1&&this._writeVector3AdvancedVertexData(Ae.Position,0,i),o&&l&2&&this._writeVector3AdvancedVertexData(Ae.Normal,1,o),s&&l&4&&this._writeColorAdvancedVertexData(Ae.Color,2,s),u&&l&16&&this._writeVector4AdvancedVertexData(Ae.BoneWeight,4,u),c&&l&32&&this._writeVector4AdvancedVertexData(Ae.BoneIndex,5,c),f&&l&8&&this._writeVector4AdvancedVertexData(Ae.Tangent,3,f),d&&l&64&&this._writeVector2AdvancedVertexData(Ae.UV,6,d),h&&l&128&&this._writeVector2AdvancedVertexData(Ae.UV1,7,h),_&&l&256&&this._writeVector2AdvancedVertexData(Ae.UV2,8,_),p&&l&512&&this._writeVector2AdvancedVertexData(Ae.UV3,9,p),v&&l&1024&&this._writeVector2AdvancedVertexData(Ae.UV4,10,v),y&&l&2048&&this._writeVector2AdvancedVertexData(Ae.UV5,11,y),m&&l&4096&&this._writeVector2AdvancedVertexData(Ae.UV6,12,m),g&&l&8192&&this._writeVector2AdvancedVertexData(Ae.UV7,13,g),this._advancedDataUpdateFlag=0},a._getInternalVertexBufferIndex=function(){var t=this._internalVertexBufferIndex;if(t!==-1)return t;for(var i=0,o=this._primitive.vertexBufferBindings,s=o.length;i<s&&o[i];i++);return this._internalVertexBufferIndex=i,i},a._getAttributeFormat=function(t){switch(t){case Ae.Position:case Ae.Normal:return rt.Vector3;case Ae.Color:case Ae.BoneWeight:case Ae.Tangent:return rt.Vector4;case Ae.BoneIndex:return rt.UByte4;case Ae.UV:case Ae.UV1:case Ae.UV2:case Ae.UV3:case Ae.UV4:case Ae.UV5:case Ae.UV6:case Ae.UV7:return rt.Vector2}},a._getAttributeByteLength=function(t){switch(t){case Ae.Position:case Ae.Normal:return 12;case Ae.Color:case Ae.BoneWeight:case Ae.Tangent:return 16;case Ae.BoneIndex:return 4;case Ae.UV:case Ae.UV1:case Ae.UV2:case Ae.UV3:case Ae.UV4:case Ae.UV5:case Ae.UV6:case Ae.UV7:return 8}},a._releaseCache=function(t){if(this._positions=null,this._tangents=null,this._normals=null,this._colors=null,this._boneIndices=null,this._boneWeights=null,this._uv=null,this._uv1=null,this._uv2=null,this._uv3=null,this._uv4=null,this._uv5=null,this._uv6=null,this._uv7=null,this._indices=null,this._blendShapeManager._releaseMemoryCache(),!t){var i;(i=this._primitive.vertexBufferBindings[this._internalVertexBufferIndex])==null||i.buffer.markAsUnreadable();for(var o=this._dataVersionCounter++,s=this._vertexBufferInfos,l=0,u=s.length;l<u;l++){var c=s[l];c&&(c.dataVersion=o)}}},Ie(r,[{key:"vertexCount",get:function(){if(this._vertexCountDirty){var t=0,i=this._primitive._vertexElementMap[Ae.Position];if(i){var o=this._primitive.vertexBufferBindings[i.bindingIndex];o&&(t=o.buffer.byteLength/o.stride)}this._vertexCount=t,this._vertexCountDirty=!1}return this._vertexCount}},{key:"vertexElements",get:function(){return this._updateVertexElements(),this._primitive.vertexElements}},{key:"vertexBufferBindings",get:function(){return this._primitive.vertexBufferBindings}},{key:"blendShapes",get:function(){return this._blendShapeManager._blendShapes}},{key:"blendShapeCount",get:function(){return this._blendShapeManager._blendShapeCount}},{key:"accessible",get:function(){return this._accessible}}]),r}(_x);(function(){Kn._tempVec0=new z})();(function(){Kn._tempVec1=new z})();(function(){Kn._tempVec2=new z})();(function(){Kn._tempVec3=new z})();(function(){Kn._tempVec4=new z})();var W5=function(){function n(){this.dataVersion=-1,this.uploadAdvancedData=!1}var r=n.prototype;return r.reset=function(){this.uploadAdvancedData=!1},n}(),Wb;(function(n){n[n.None=0]="None",n[n.Position=1]="Position",n[n.Normal=2]="Normal",n[n.Color=4]="Color",n[n.Tangent=8]="Tangent",n[n.BoneWeight=16]="BoneWeight",n[n.BoneIndex=32]="BoneIndex",n[n.UV=64]="UV",n[n.UV1=128]="UV1",n[n.UV2=256]="UV2",n[n.UV3=512]="UV3",n[n.UV4=1024]="UV4",n[n.UV5=2048]="UV5",n[n.UV6=4096]="UV6",n[n.UV7=8192]="UV7",n[n.All=65535]="All"})(Wb||(Wb={}));var $b;(function(n){n[n.Position=0]="Position",n[n.Normal=1]="Normal",n[n.Color=2]="Color",n[n.Tangent=3]="Tangent",n[n.BoneWeight=4]="BoneWeight",n[n.BoneIndex=5]="BoneIndex",n[n.UV=6]="UV",n[n.UV1=7]="UV1",n[n.UV2=8]="UV2",n[n.UV3=9]="UV3",n[n.UV4=10]="UV4",n[n.UV5=11]="UV5",n[n.UV6=12]="UV6",n[n.UV7=13]="UV7"})($b||($b={}));var Ya=function(r){this.resource=r},Rs=function(n){be(r,n);function r(e,t){var i;return i=n.call(this,e)||this,i.primitiveInfo=t,i}var a=r.prototype;return a.restoreContent=function(){var t=this.primitiveInfo;switch(t.type){case 0:var i=t;Gn._setSphereData(this.resource,i.radius,i.segments,i.noLongerAccessible,!0,i.vertexBuffer);break;case 7:var o=t;Gn._setSubdivisionSurfaceSphereData(this.resource,o.radius,o.step,o.noLongerAccessible,!0,o.vertexBuffer);break;case 1:var s=t;Gn._setCuboidData(this.resource,s.width,s.height,s.depth,s.noLongerAccessible,!0,s.vertexBuffer);break;case 2:var l=t;Gn._setPlaneData(this.resource,l.width,l.height,l.horizontalSegments,l.verticalSegments,l.noLongerAccessible,!0,l.vertexBuffer);break;case 3:var u=t;Gn._setCylinderData(this.resource,u.radiusTop,u.radiusBottom,u.height,u.radialSegments,u.heightSegments,u.noLongerAccessible,!0,u.vertexBuffer);break;case 4:var c=t;Gn._setTorusData(this.resource,c.radius,c.tubeRadius,c.radialSegments,c.tubularSegments,c.arc,c.noLongerAccessible,!0,c.vertexBuffer);break;case 5:var f=t;Gn._setConeData(this.resource,f.radius,f.height,f.radialSegments,f.heightSegments,f.noLongerAccessible,!0,f.vertexBuffer);break;case 6:var d=t;Gn._setCapsuleData(this.resource,d.radius,d.height,d.radialSegments,d.heightSegments,d.noLongerAccessible,!0,d.vertexBuffer);break}},r}(Ya),Xb;(function(n){n[n.Sphere=0]="Sphere",n[n.Cuboid=1]="Cuboid",n[n.Plane=2]="Plane",n[n.Cylinder=3]="Cylinder",n[n.Torus=4]="Torus",n[n.Cone=5]="Cone",n[n.Capsule=6]="Capsule",n[n.CCSphere=7]="CCSphere"})(Xb||(Xb={}));var sl=function(r,a,e){this.type=r,this.vertexBuffer=a,this.noLongerAccessible=e},$5=function(n){be(r,n);function r(a,e,t,i){var o;return o=n.call(this,0,t,i)||this,o.radius=a,o.segments=e,o}return r}(sl),X5=function(n){be(r,n);function r(a,e,t,i){var o;return o=n.call(this,7,t,i)||this,o.radius=a,o.step=e,o}return r}(sl),K5=function(n){be(r,n);function r(a,e,t,i,o){var s;return s=n.call(this,1,i,o)||this,s.width=a,s.height=e,s.depth=t,s}return r}(sl),Y5=function(n){be(r,n);function r(a,e,t,i,o,s){var l;return l=n.call(this,2,o,s)||this,l.width=a,l.height=e,l.horizontalSegments=t,l.verticalSegments=i,l}return r}(sl),Q5=function(n){be(r,n);function r(a,e,t,i,o,s,l){var u;return u=n.call(this,3,s,l)||this,u.radiusTop=a,u.radiusBottom=e,u.height=t,u.radialSegments=i,u.heightSegments=o,u}return r}(sl),q5=function(n){be(r,n);function r(a,e,t,i,o,s,l){var u;return u=n.call(this,4,s,l)||this,u.radius=a,u.tubeRadius=e,u.radialSegments=t,u.tubularSegments=i,u.arc=o,u}return r}(sl),J5=function(n){be(r,n);function r(a,e,t,i,o,s){var l;return l=n.call(this,5,o,s)||this,l.radius=a,l.height=e,l.radialSegments=t,l.heightSegments=i,l}return r}(sl),Z5=function(n){be(r,n);function r(a,e,t,i,o,s){var l;return l=n.call(this,6,o,s)||this,l.radius=a,l.height=e,l.radialSegments=t,l.heightSegments=i,l}return r}(sl),Gn=function(){function n(){}return n.createSphere=function(a,e,t,i){e===void 0&&(e=.5),t===void 0&&(t=18),i===void 0&&(i=!0);var o=new Kn(a);n._setSphereData(o,e,t,i,!1);var s=o.vertexBufferBindings[0].buffer;return a.resourceManager.addContentRestorer(new Rs(o,new $5(e,t,s,i))),o},n.createSubdivisionSurfaceSphere=function(a,e,t,i){e===void 0&&(e=.5),t===void 0&&(t=3),i===void 0&&(i=!0);var o=new Kn(a);n._setSubdivisionSurfaceSphereData(o,e,t,i,!1);var s=o.vertexBufferBindings[0].buffer;return a.resourceManager.addContentRestorer(new Rs(o,new X5(e,t,s,i))),o},n.createCuboid=function(a,e,t,i,o){e===void 0&&(e=1),t===void 0&&(t=1),i===void 0&&(i=1),o===void 0&&(o=!0);var s=new Kn(a);n._setCuboidData(s,e,t,i,o,!1);var l=s.vertexBufferBindings[0].buffer;return a.resourceManager.addContentRestorer(new Rs(s,new K5(e,t,i,l,o))),s},n.createPlane=function(a,e,t,i,o,s){e===void 0&&(e=1),t===void 0&&(t=1),i===void 0&&(i=1),o===void 0&&(o=1),s===void 0&&(s=!0);var l=new Kn(a);n._setPlaneData(l,e,t,i,o,s,!1);var u=l.vertexBufferBindings[0].buffer;return a.resourceManager.addContentRestorer(new Rs(l,new Y5(e,t,i,o,u,s))),l},n.createCylinder=function(a,e,t,i,o,s,l){e===void 0&&(e=.5),t===void 0&&(t=.5),i===void 0&&(i=2),o===void 0&&(o=20),s===void 0&&(s=1),l===void 0&&(l=!0);var u=new Kn(a);n._setCylinderData(u,e,t,i,o,s,l,!1);var c=u.vertexBufferBindings[0].buffer;return a.resourceManager.addContentRestorer(new Rs(u,new Q5(e,t,i,o,s,c,l))),u},n.createTorus=function(a,e,t,i,o,s,l){e===void 0&&(e=.5),t===void 0&&(t=.1),i===void 0&&(i=30),o===void 0&&(o=30),s===void 0&&(s=360),l===void 0&&(l=!0);var u=new Kn(a);n._setTorusData(u,e,t,i,o,s,l,!1);var c=u.vertexBufferBindings[0].buffer;return a.resourceManager.addContentRestorer(new Rs(u,new q5(e,t,i,o,s,c,l))),u},n.createCone=function(a,e,t,i,o,s){e===void 0&&(e=.5),t===void 0&&(t=2),i===void 0&&(i=20),o===void 0&&(o=1),s===void 0&&(s=!0);var l=new Kn(a);n._setConeData(l,e,t,i,o,s,!1);var u=l.vertexBufferBindings[0].buffer;return a.resourceManager.addContentRestorer(new Rs(l,new J5(e,t,i,o,u,s))),l},n.createCapsule=function(a,e,t,i,o,s){e===void 0&&(e=.5),t===void 0&&(t=2),i===void 0&&(i=6),o===void 0&&(o=1),s===void 0&&(s=!0);var l=new Kn(a);n._setCapsuleData(l,e,t,i,o,s,!1);var u=l.vertexBufferBindings[0].buffer;return a.resourceManager.addContentRestorer(new Rs(l,new Z5(e,t,i,o,u,s))),l},n._setSubdivisionSurfaceSphereData=function(a,e,t,i,o,s){t=ve.clamp(Math.floor(t),1,6);var l=new Float32Array(3*(6*Math.pow(4,t)+2)),u=new Float32Array(24*Math.pow(4,t));n._subdiveCatmullClark(t,l,u);for(var c=l.length/3,f=u.length/4,d=c+Math.pow(2,t+1)-1,h=d+16,_=new Float32Array(h*8),p=n._generateIndices(a.engine,c,f*6),v=0,y={},m=0;m<c;m++){var g=3*m,x=l[g],b=l[g+1],S=l[g+2],C=1/Math.sqrt(x*x+b*b+S*S);if(x*=C,b*=C,S*=C,g=8*m,_[g]=x*e,_[g+1]=b*e,_[g+2]=S*e,_[g+3]=x,_[g+4]=b,_[g+5]=S,_[g+6]=(Math.PI-Math.atan2(S,x))/(2*Math.PI),_[g+7]=Math.acos(b)/Math.PI,_[g+6]===0){var E=8*(c+v++);_.set(_.subarray(g,g+8),E),_[E+6]=1,y[g/8]=E/8}}var T=0;this._spherePoleIdx=0;for(var M=0;M<f;M++){var L=4*M,F=u[L],N=u[L+1],I=u[L+2],O=u[L+3],P=8*F,R=8*N,A=8*I,D=8*O;_[P+2]+_[R+2]+_[A+2]<0&&(_[P+6]===0&&(F=y[F]),_[R+6]===0&&(N=y[N]),_[A+6]===0&&(I=y[I]),_[D+6]===0&&(O=y[O])),p[T]=F,p[T+1]=N,p[T+2]=I,this._generateAndReplacePoleUV(p,_,T,d),p[T+3]=F,p[T+4]=I,p[T+5]=O,this._generateAndReplacePoleUV(p,_,T+3,d),T+=6}if(!o){var B=a.bounds;B.min.set(-e,-e,-e),B.max.set(e,e,e)}n._initialize(a,_,p,i,o,s)},n._setSphereData=function(a,e,t,i,o,s){t=Math.max(2,Math.floor(t));for(var l=t+1,u=l*l,c=t*t,f=n._generateIndices(a.engine,u,c*6),d=Math.PI,h=d*2,_=1/l,p=1/t,v=8,y=new Float32Array(u*v),m=0;m<u;++m){var g=m%l,x=m*_|0,b=g*p,S=x*p,C=b*h,E=S*d,T=Math.sin(E),M=-e*Math.cos(C)*T,L=e*Math.cos(E),F=e*Math.sin(C)*T,N=m*v;y[N++]=M,y[N++]=L,y[N++]=F,y[N++]=M,y[N++]=L,y[N++]=F,y[N++]=b,y[N++]=S}for(var I=0,O=0;O<c;++O){var P=O%t,R=O*p|0,A=R*l+P,D=A+1,B=A+l,k=B+1;f[I++]=D,f[I++]=A,f[I++]=k,f[I++]=A,f[I++]=B,f[I++]=k}if(!o){var V=a.bounds;V.min.set(-e,-e,-e),V.max.set(e,e,e)}n._initialize(a,y,f,i,o,s)},n._subdiveCatmullClark=function(a,e,t){var i=new Map,o=new Array;e.set(n._sphereSeedPositions),t.set(n._sphereSeedCells);for(var s=0;s<a;s++){var l=6*Math.pow(4,s),u=4*l+2;i.clear(),o.length=0;for(var c=0;c<l;c++){for(var f=o[c]={facePoint:new z,adjacentEdges:new Array(4)},d=0;d<4;d++){var h=3*t[4*c+d];f.facePoint.x+=.25*e[h],f.facePoint.y+=.25*e[h+1],f.facePoint.z+=.25*e[h+2]}for(var _=0;_<4;_++){var p=t[4*c+_],v=t[4*c+(_+1)%4],y=Math.min(p,v)*u+Math.max(p,v);if(!i.has(y)){var m={edgePoint:new z,edgePointIndex:void 0},g=3*p,x=3*v;m.edgePoint.set(.25*(e[g]+e[x]),.25*(e[g+1]+e[x+1]),.25*(e[g+2]+e[x+2])),i.set(y,m)}var b=i.get(y);f.adjacentEdges[_]=b;var S=b.edgePoint,C=f.facePoint;S.x+=.25*C.x,S.y+=.25*C.y,S.z+=.25*C.z}}var E=l+2,T=E+l,M=0;this._sphereEdgeIdx=0;for(var L=t.slice(0,4*l),F=0;F<l;F++){var N=o[F];N.facePoint.copyToArray(e,3*(E+F));for(var I=E+F,O=void 0,P=void 0,R=void 0,A=0;A<4;A++){var D=L[M++];switch(A){case 0:{var B=N.adjacentEdges[A%4],k=N.adjacentEdges[(A+3)%4];P=this._calculateEdgeIndex(e,B,T),O=this._calculateEdgeIndex(e,k,T),R=O;break}case 1:case 2:{var V=N.adjacentEdges[A%4];O=P,P=this._calculateEdgeIndex(e,V,T);break}case 3:{O=P,P=R;break}}var U=4*(4*F+A);t[U]=D,t[U+1]=P,t[U+2]=I,t[U+3]=O}}}},n._generateAndReplacePoleUV=function(a,e,t,i){var o=e[8*a[t]+7];if(o===0||o===1){var s=8*a[t],l=8*(i+this._spherePoleIdx);e.set(e.subarray(s,s+8),l),e[l+6]=.5*(e[s+6]+e[8*a[t+1]+6]+e[8*a[t+2]+6]-.5),a[t]=i+this._spherePoleIdx++}},n._calculateEdgeIndex=function(a,e,t){if(e.edgePointIndex!==void 0)return e.edgePointIndex;e.edgePoint.copyToArray(a,3*(t+n._sphereEdgeIdx));var i=t+n._sphereEdgeIdx++;return e.edgePointIndex=i,i},n._setCuboidData=function(a,e,t,i,o,s,l){var u=e/2,c=t/2,f=i/2,d=8,h=new Float32Array(24*d);h[0]=-u,h[1]=c,h[2]=-f,h[6]=0,h[7]=0,h[8]=u,h[9]=c,h[10]=-f,h[14]=1,h[15]=0,h[16]=u,h[17]=c,h[18]=f,h[22]=1,h[23]=1,h[24]=-u,h[25]=c,h[26]=f,h[30]=0,h[31]=1;for(var _=0;_<4;_++){var p=d*_+3;h[p++]=0,h[p++]=1,h[p++]=0}h[32]=-u,h[33]=-c,h[34]=-f,h[38]=0,h[39]=1,h[40]=u,h[41]=-c,h[42]=-f,h[46]=1,h[47]=1,h[48]=u,h[49]=-c,h[50]=f,h[54]=1,h[55]=0,h[56]=-u,h[57]=-c,h[58]=f,h[62]=0,h[63]=0;for(var v=0;v<4;v++){var y=d*v+35;h[y++]=0,h[y++]=-1,h[y++]=0}h[64]=-u,h[65]=c,h[66]=-f,h[70]=0,h[71]=0,h[72]=-u,h[73]=c,h[74]=f,h[78]=1,h[79]=0,h[80]=-u,h[81]=-c,h[82]=f,h[86]=1,h[87]=1,h[88]=-u,h[89]=-c,h[90]=-f,h[94]=0,h[95]=1;for(var m=0;m<4;m++){var g=d*m+67;h[g++]=-1,h[g++]=0,h[g++]=0}h[96]=u,h[97]=c,h[98]=-f,h[102]=1,h[103]=0,h[104]=u,h[105]=c,h[106]=f,h[110]=0,h[111]=0,h[112]=u,h[113]=-c,h[114]=f,h[118]=0,h[119]=1,h[120]=u,h[121]=-c,h[122]=-f,h[126]=1,h[127]=1;for(var x=0;x<4;x++){var b=d*x+99;h[b++]=1,h[b++]=0,h[b++]=0}h[128]=-u,h[129]=c,h[130]=f,h[134]=0,h[135]=0,h[136]=u,h[137]=c,h[138]=f,h[142]=1,h[143]=0,h[144]=u,h[145]=-c,h[146]=f,h[150]=1,h[151]=1,h[152]=-u,h[153]=-c,h[154]=f,h[158]=0,h[159]=1;for(var S=0;S<4;S++){var C=d*S+131;h[C++]=0,h[C++]=0,h[C++]=1}h[160]=-u,h[161]=c,h[162]=-f,h[166]=1,h[167]=0,h[168]=u,h[169]=c,h[170]=-f,h[174]=0,h[175]=0,h[176]=u,h[177]=-c,h[178]=-f,h[182]=0,h[183]=1,h[184]=-u,h[185]=-c,h[186]=-f,h[190]=1,h[191]=1;for(var E=0;E<4;E++){var T=d*E+163;h[T++]=0,h[T++]=0,h[T++]=-1}var M=new Uint16Array(36);if(M[0]=0,M[1]=2,M[2]=1,M[3]=2,M[4]=0,M[5]=3,M[6]=4,M[7]=6,M[8]=7,M[9]=6,M[10]=4,M[11]=5,M[12]=8,M[13]=10,M[14]=9,M[15]=10,M[16]=8,M[17]=11,M[18]=12,M[19]=14,M[20]=15,M[21]=14,M[22]=12,M[23]=13,M[24]=16,M[25]=18,M[26]=17,M[27]=18,M[28]=16,M[29]=19,M[30]=20,M[31]=22,M[32]=23,M[33]=22,M[34]=20,M[35]=21,!s){var L=a.bounds;L.min.set(-u,-c,-f),L.max.set(u,c,f)}n._initialize(a,h,M,o,s,l)},n._setPlaneData=function(a,e,t,i,o,s,l,u){i=Math.max(1,Math.floor(i)),o=Math.max(1,Math.floor(o));for(var c=i+1,f=o+1,d=e/2,h=t/2,_=e/i,p=t/o,v=c*f,y=o*i,m=n._generateIndices(a.engine,v,y*6),g=1/c,x=1/i,b=1/o,S=8,C=new Float32Array(v*S),E=0;E<v;++E){var T=E%c,M=E*g|0,L=E*S;C[L++]=T*_-d,C[L++]=0,C[L++]=M*p-h,C[L++]=0,C[L++]=1,C[L++]=0,C[L++]=T*x,C[L++]=M*b}for(var F=0,N=0;N<y;++N){var I=N%i,O=N*x|0,P=O*c+I,R=P+1,A=P+c,D=A+1;m[F++]=P,m[F++]=A,m[F++]=R,m[F++]=A,m[F++]=D,m[F++]=R}if(!l){var B=a.bounds;B.min.set(-d,0,-h),B.max.set(d,0,h)}n._initialize(a,C,m,s,l,u)},n._setCylinderData=function(a,e,t,i,o,s,l,u,c){e===void 0&&(e=.5),t===void 0&&(t=.5),i===void 0&&(i=2),o===void 0&&(o=20),s===void 0&&(s=1),o=Math.floor(o),s=Math.floor(s);for(var f=o+1,d=s+1,h=i*.5,_=i/s,p=f*d,v=o*s,y=o*2,m=p+2+y,g=n._generateIndices(a.engine,m,v*6+y*3),x=1/f,b=1/o,S=1/s,C=8,E=new Float32Array(m*C),T=0,M=Math.PI,L=Math.PI*2,F=t-e,N=F/i,I=F/s,O=0;O<p;++O){var P=O%f,R=O*x|0,A=P*b,D=R*S,B=M+A*L,k=Math.sin(B),V=Math.cos(B),U=t-R*I,j=U*k,G=R*_-h,$=U*V,W=O*C;E[W++]=j,E[W++]=G,E[W++]=$,E[W++]=k,E[W++]=N,E[W++]=V,E[W++]=A,E[W++]=1-D}for(var K=0;K<v;++K){var q=K%o,Y=K*b|0,Q=Y*f+q,re=Q+1,ue=Q+f,oe=ue+1;g[T++]=re,g[T++]=ue,g[T++]=Q,g[T++]=re,g[T++]=oe,g[T++]=ue}var ee=p*C;E[ee++]=0,E[ee++]=-h,E[ee++]=0,E[ee++]=0,E[ee++]=-1,E[ee++]=0,E[ee++]=.5,E[ee++]=.5,E[ee++]=0,E[ee++]=h,E[ee++]=0,E[ee++]=0,E[ee++]=1,E[ee++]=0,E[ee++]=.5,E[ee++]=.5,ee=(p+2)*C;for(var xe=1/(e*2),Te=1/(t*2),Ce=f*s,pe=0;pe<o;++pe){var J=pe*C,ae=E[J],ne=E[J+2];E[ee++]=ae,E[ee++]=-h,E[ee++]=ne,E[ee++]=0,E[ee++]=-1,E[ee++]=0,E[ee++]=ae*Te+.5,E[ee++]=.5-ne*Te;var ge=(pe+Ce)*C;ae=E[ge],ne=E[ge+2],E[ee++]=ae,E[ee++]=h,E[ee++]=ne,E[ee++]=0,E[ee++]=1,E[ee++]=0,E[ee++]=ae*xe+.5,E[ee++]=.5-ne*xe}for(var se=p+1,Re=p+2,de=Re+1,Pe=0;Pe<o;++Pe){var De=Pe*2,Ke=Pe===o-1?0:De+2;g[T++]=p,g[T++]=Re+Ke,g[T++]=Re+De,g[T++]=se,g[T++]=de+De,g[T++]=de+Ke}if(!u){var Be=a.bounds,He=Math.max(e,t);Be.min.set(-He,-h,-He),Be.max.set(He,h,He)}n._initialize(a,E,g,l,u,c)},n._setTorusData=function(a,e,t,i,o,s,l,u,c){i=Math.floor(i),o=Math.floor(o);var f=(i+1)*(o+1),d=i*o,h=n._generateIndices(a.engine,f,d*6),_=8,p=new Float32Array(f*_);s=s/180*Math.PI;for(var v=0,y=n._tempVec30,m=0;m<=i;m++)for(var g=0;g<=o;g++){var x=g/o*s,b=m/i*Math.PI*2,S=Math.cos(b),C=Math.sin(b),E=Math.cos(x),T=Math.sin(x),M=(e+t*S)*E,L=(e+t*S)*T,F=t*C;p[v++]=M,p[v++]=L,p[v++]=F;var N=e*E,I=e*T;y.set(M-N,L-I,F).normalize(),p[v++]=y.x,p[v++]=y.y,p[v++]=y.z,p[v++]=g/o,p[v++]=m/i}v=0;for(var O=1;O<=i;O++)for(var P=1;P<=o;P++){var R=(o+1)*O+P-1,A=(o+1)*(O-1)+P-1,D=(o+1)*(O-1)+P,B=(o+1)*O+P;h[v++]=R,h[v++]=A,h[v++]=B,h[v++]=A,h[v++]=D,h[v++]=B}if(!u){var k=a.bounds,V=e+t;k.min.set(-V,-V,-t),k.max.set(V,V,t)}n._initialize(a,p,h,l,u,c)},n._setConeData=function(a,e,t,i,o,s,l,u){i=Math.floor(i),o=Math.floor(o);for(var c=i+1,f=o+1,d=t*.5,h=t/o,_=c*f,p=i*o,v=_+1+i,y=n._generateIndices(a.engine,v,p*6+i*3),m=1/c,g=1/i,x=1/o,b=8,S=new Float32Array(v*8),C=0,E=Math.PI,T=Math.PI*2,M=e/t,L=0;L<_;++L){var F=L%c,N=L*m|0,I=F*g,O=N*x,P=E+I*T,R=Math.sin(P),A=Math.cos(P),D=e-O*e,B=D*R,k=N*h-d,V=D*A,U=L*b;S[U++]=B,S[U++]=k,S[U++]=V,S[U++]=R,S[U++]=M,S[U++]=A,S[U++]=I,S[U++]=1-O}for(var j=0;j<p;++j){var G=j%i,$=j*g|0,W=$*c+G,K=W+1,q=W+c,Y=q+1;y[C++]=K,y[C++]=q,y[C++]=W,y[C++]=K,y[C++]=Y,y[C++]=q}var Q=_*b;S[Q++]=0,S[Q++]=-d,S[Q++]=0,S[Q++]=0,S[Q++]=-1,S[Q++]=0,S[Q++]=.5,S[Q++]=.5,Q=(_+1)*b;for(var re=1/(e*2),ue=0;ue<i;++ue){var oe=S[ue*b],ee=S[ue*b+2];S[Q++]=oe,S[Q++]=-d,S[Q++]=ee,S[Q++]=0,S[Q++]=-1,S[Q++]=0,S[Q++]=oe*re+.5,S[Q++]=.5-ee*re}for(var xe=_+1,Te=0;Te<i;++Te){var Ce=Te,pe=Te===i-1?0:Ce+1;y[C++]=_,y[C++]=xe+pe,y[C++]=xe+Ce}if(!l){var J=a.bounds;J.min.set(-e,-d,-e),J.max.set(e,d,e)}n._initialize(a,S,y,s,l,u)},n._setCapsuleData=function(a,e,t,i,o,s,l,u){i=Math.max(2,Math.floor(i)),o=Math.floor(o);for(var c=i+1,f=o+1,d=t*.5,h=t/o,_=c*f,p=i*o,v=c*c,y=i*i,m=_+2*v,g=n._generateIndices(a.engine,m,(p+2*y)*6),x=1/c,b=1/i,S=1/o,C=Math.PI,E=Math.PI*2,T=8,M=new Float32Array(m*T),L=0,F=0;F<_;++F){var N=F%c,I=F*x|0,O=N*b,P=I*S,R=C+O*E,A=Math.sin(R),D=Math.cos(R),B=F*T;M[B++]=e*A,M[B++]=I*h-d,M[B++]=e*D,M[B++]=A,M[B++]=0,M[B++]=D,M[B++]=O,M[B++]=1-P}for(var k=0;k<p;++k){var V=k%i,U=k*b|0,j=U*c+V,G=j+1,$=j+c,W=$+1;g[L++]=G,g[L++]=$,g[L++]=j,g[L++]=G,g[L++]=W,g[L++]=$}if(n._createCapsuleCap(e,t,i,C,E,_,1,M,g,L),n._createCapsuleCap(e,t,i,C,-E,_+v,-1,M,g,L+6*y),!l){var K=a.bounds;K.min.set(-e,-e-d,-e),K.max.set(e,e+d,e)}n._initialize(a,M,g,s,l,u)},n._initialize=function(a,e,t,i,o,s){if(o)s.setData(e),a.setIndices(t),a.uploadData(i);else{var l=[new Kt(Ae.Position,0,rt.Vector3,0),new Kt(Ae.Normal,12,rt.Vector3,0),new Kt(Ae.UV,24,rt.Vector2,0)];a.setVertexElements(l);var u=new ha(a.engine,kr.VertexBuffer,e,Dn.Static,!0);a.setVertexBufferBinding(u,32,0),a.setIndices(t),a.calculateTangents(),a.uploadData(i),a.addSubMesh(0,t.length)}},n._generateIndices=function(a,e,t){var i=null;if(e>65535)if(a._hardwareRenderer.canIUse(Ue.elementIndexUint))i=new Uint32Array(t);else throw Error("The vertex count is over limit.");else i=new Uint16Array(t);return i},n._createCapsuleCap=function(a,e,t,i,o,s,l,u,c,f){for(var d=t+1,h=e*.5*l,_=d*d,p=t*t,v=1/d,y=1/t,m=8,g=0;g<_;++g){var x=g%d,b=g*v|0,S=x*y,C=b*y,E=i+S*o,T=C*Math.PI*.5,M=Math.sin(T),L=a*Math.sin(E)*M,F=a*Math.cos(T)*l+h,N=a*Math.cos(E)*M,I=(g+s)*m;u[I++]=L,u[I++]=F,u[I++]=N,u[I++]=L,u[I++]=F-h,u[I++]=N,u[I++]=S,u[I++]=C}for(var O=0;O<p;++O){var P=O%t,R=O*y|0,A=R*d+P+s,D=A+1,B=A+d,k=B+1;c[f++]=D,c[f++]=A,c[f++]=k,c[f++]=A,c[f++]=B,c[f++]=k}},n}();(function(){Gn._tempVec30=new z})();(function(){Gn._sphereSeedPositions=new Float32Array([-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,-1,1,1,-1,-1,-1,-1,-1,1,-1])})();(function(){Gn._sphereSeedCells=new Float32Array([0,1,2,3,3,2,4,5,5,4,6,7,7,0,3,5,7,6,1,0,6,4,2,1])})();(function(){Gn._sphereEdgeIdx=0})();(function(){Gn._spherePoleIdx=0})();var yP=function(n){be(r,n);function r(a){var e;return e=n.call(this,null)||this,e.name=a,e._bones=[],e.inverseBindMatrices=[],e.joints=[],e.skeleton="none",e}return r}(Oo),Ur=function(n){be(r,n);function r(e){var t;t=n.call(this,e)||this,t._localBounds=new Da,t._jointDataCreateCache=new Ze(-1,-1),t._skin=null;var i=t.entity.engine._hardwareRenderer,o=i.renderStates.getParameter(i.gl.MAX_VERTEX_UNIFORM_VECTORS);o=Math.min(o,i._options._maxAllowSkinUniformVectorCount),t._maxVertexUniformVectors=o,t._onLocalBoundsChanged=t._onLocalBoundsChanged.bind(Et(t));var s=t._localBounds;return s.min._onValueChanged=t._onLocalBoundsChanged,s.max._onValueChanged=t._onLocalBoundsChanged,t}var a=r.prototype;return a.update=function(){var t=this,i=t._skin,o=t._bones;if(i&&o)for(var s=this._jointMatrices,l=i.inverseBindMatrices,u,c=((u=this._rootBone)!=null?u:this.entity).getInvModelMatrix(),f=o.length-1;f>=0;f--){var d=o[f],h=f*16;d?Mn._floatMatrixMultiply(d.transform.worldMatrix,l[f].elements,0,s,h):s.set(l[f].elements,h),Mn._floatMatrixMultiply(c,s,h,s,h)}},a._updateShaderData=function(t,i){var o=this.entity,s,l=((s=this._rootBone)!=null?s:o).transform.worldMatrix;if(i){this._updateMVPShaderData(t,l);return}this._updateTransformShaderData(t,l);var u=this.shaderData,c=this.mesh,f=c._blendShapeManager;f._updateShaderData(u,this);var d=this._bones;if(d){var h=f._uniformOccupiesCount,_=d.length,p=this._jointDataCreateCache,v=_!==p.x;if(v||h!==p.y){var y=Math.ceil((this._maxVertexUniformVectors-(44+h))/4);if(_>y){var m=this.engine;if(m._hardwareRenderer.canIUseMoreJoints){if(v){var g;(g=this._jointTexture)==null||g.destroy(),this._jointTexture=new br(m,4,_,ye.R32G32B32A32,!1),this._jointTexture.filterMode=Jn.Point,this._jointTexture.isGCIgnored=!0}u.disableMacro("RENDERER_JOINTS_NUM"),u.enableMacro("RENDERER_USE_JOINT_TEXTURE"),u.setTexture(r._jointSamplerProperty,this._jointTexture)}else Pt.error("component's joints count("+_+") greater than device's MAX_VERTEX_UNIFORM_VECTORS number "+this._maxVertexUniformVectors+", and don't support jointTexture in this device. suggest joint count less than "+y+".",this)}else{var x;(x=this._jointTexture)==null||x.destroy(),u.disableMacro("RENDERER_USE_JOINT_TEXTURE"),u.enableMacro("RENDERER_JOINTS_NUM",y.toString()),u.setFloatArray(r._jointMatrixProperty,this._jointMatrices)}p.set(_,h)}this._jointTexture&&this._jointTexture.setPixelBuffer(this._jointMatrices)}var b=o.layer;this._rendererLayer.set(b&65535,b>>>16&65535,0,0)},a._onDestroy=function(){var t;n.prototype._onDestroy.call(this),this._rootBone=null,this._jointDataCreateCache=null,this._skin=null,this._blendShapeWeights=null,this._localBounds=null,this._jointMatrices=null,(t=this._jointTexture)==null||t.destroy(),this._jointTexture=null,this._bones=null},a._cloneTo=function(t,i,o){n.prototype._cloneTo.call(this,t,i,o);var s=new Array;if(this.rootBone){var l=this._getEntityHierarchyPath(i,this.rootBone,s);t.rootBone=l?this._getEntityByHierarchyPath(o,s):this.rootBone}var u=this._bones;if(u){for(var c=u.length,f=new Array(c),d=0;d<c;d++){var h=u[d],_=this._getEntityHierarchyPath(i,h,s);f[d]=_?this._getEntityByHierarchyPath(o,s):h}t.bones=f}this._blendShapeWeights&&(t._blendShapeWeights=this._blendShapeWeights.slice())},a._registerEntityTransformListener=function(){var t;((t=this._rootBone)!=null?t:this._entity).transform._updateFlagManager.addListener(this._onTransformChanged)},a._unRegisterEntityTransformListener=function(){var t;((t=this._rootBone)!=null?t:this._entity).transform._updateFlagManager.removeListener(this._onTransformChanged)},a._updateBounds=function(t){if(this._rootBone){var i=this._localBounds,o=this._rootBone.transform.worldMatrix;Da.transform(i,o,t)}else n.prototype._updateBounds.call(this,t)},a._checkBlendShapeWeightLength=function(){var t=this._mesh,i=t?t.blendShapeCount:0,o=this._blendShapeWeights;if(o){var s=o.length;if(s!==i){var l=new Float32Array(i);if(i>s)l.set(o);else for(var u=0;u<i;u++)l[u]=o[u];this._blendShapeWeights=l}}else this._blendShapeWeights=new Float32Array(i)},a._onLocalBoundsChanged=function(){this._dirtyUpdateFlag|=zn.WorldVolume},a._getEntityHierarchyPath=function(t,i,o){for(o.length=0;i!==t;){var s=i.parent;if(!s)return!1;o.push(i.siblingIndex),i=s}return!0},a._getEntityByHierarchyPath=function(t,i){for(var o=t,s=i.length-1;s>=0;s--)o=o.children[i[s]];return o},Ie(r,[{key:"blendShapeWeights",get:function(){return this._checkBlendShapeWeightLength(),this._blendShapeWeights},set:function(t){this._checkBlendShapeWeightLength();var i=this._blendShapeWeights;if(t.length<=i.length)i.set(t);else for(var o=0,s=i.length;o<s;o++)i[o]=t[o]}},{key:"localBounds",get:function(){return this._localBounds},set:function(t){this._localBounds!==t&&this._localBounds.copyFrom(t)}},{key:"rootBone",get:function(){return this._rootBone},set:function(t){this._rootBone!==t&&(this._unRegisterEntityTransformListener(),this._rootBone=t,this._registerEntityTransformListener(),this._dirtyUpdateFlag|=zn.WorldVolume)}},{key:"bones",get:function(){return this._bones},set:function(t){if(this._bones!==t){var i,o,s,l=(s=(i=this._bones)==null?void 0:i.length)!=null?s:0,u,c=(u=(o=t)==null?void 0:o.length)!=null?u:0;if(l!==c){var f=this.shaderData;c>0?(this._jointMatrices=new Float32Array(c*16),f.enableMacro("RENDERER_HAS_SKIN"),f.setInt(r._jointCountProperty,c)):(this._jointMatrices=null,f.disableMacro("RENDERER_HAS_SKIN"))}this._bones=t}}},{key:"skin",get:function(){return this._skin},set:function(t){this._skin=t}}]),r}(yr);(function(){Ur._jointCountProperty=X.getByName("renderer_JointCount")})();(function(){Ur._jointSamplerProperty=X.getByName("renderer_JointSampler")})();(function(){Ur._jointMatrixProperty=X.getByName("renderer_JointMatrix")})();H([Xe],Ur.prototype,"_localBounds",void 0);H([te],Ur.prototype,"_jointDataCreateCache",void 0);H([te],Ur.prototype,"_blendShapeWeights",void 0);H([te],Ur.prototype,"_maxVertexUniformVectors",void 0);H([te],Ur.prototype,"_rootBone",void 0);H([te],Ur.prototype,"_jointMatrices",void 0);H([te],Ur.prototype,"_jointTexture",void 0);H([te],Ur.prototype,"_bones",void 0);H([te],Ur.prototype,"_condensedBlendShapeWeights",void 0);H([te],Ur.prototype,"_onLocalBoundsChanged",null);var yl=function(){function n(a){this._elementPoolIndex=0,this._elementPool=[],this._type=a}var r=n.prototype;return r.getFromPool=function(){var e=this,t=e._elementPoolIndex,i=e._elementPool;if(this._elementPoolIndex++,i.length===t){var o=new this._type;return i.push(o),o}else return i[t]},r.resetPool=function(){this._elementPoolIndex=0},r.garbageCollection=function(){for(var e=this,t=e._elementPool,i=t.length-1;i>=0;i--)t[i].dispose&&t[i].dispose()},n}(),Yi=function(){function n(a){this._subMeshPool=new yl(u_),this._batchedQueue=[],this._meshes=[],this._meshCount=1,this._vertexBuffers=[],this._indiceBuffers=[],this._flushId=0,this._vertexCount=0,this._elementCount=0,this._engine=a,this._initMeshes(a)}var r=n.prototype;return r.drawElement=function(e,t){var i=e.data;if(i.multiRenderData)for(var o=i.charsData,s=t.engine._renderElementPool,l=0,u=o.length;l<u;++l){var c=s.getFromPool();c.set(o[l],e.shaderPasses),this._drawSubElement(c,t)}else this._drawSubElement(e,t)},r._initMeshes=function(e){var t=n.MAX_VERTEX_COUNT;this._vertices=new Float32Array(t*9),this._indices=new Uint16Array(t*3);for(var i=this,o=i._meshes,s=i._meshCount,l=0;l<s;l++)o[l]=this._createMesh(e,l)},r.flush=function(e){var t=this._batchedQueue;t.length!==0&&(this._updateData(this._engine),this.drawBatches(e),n._canUploadSameBuffer||this._flushId++,t.length=0,this._subMeshPool.resetPool(),this._vertexCount=0,this._elementCount=0)},r.clear=function(){this._flushId=0,this._vertexCount=0,this._elementCount=0,this._batchedQueue.length=0},r.destroy=function(){this._batchedQueue=null;for(var e=this,t=e._meshes,i=e._vertexBuffers,o=e._indiceBuffers,s=0,l=t.length;s<l;++s){var u=t[s];u._addReferCount(-1),u.destroy()}this._meshes=null;for(var c=0,f=i.length;c<f;++c)i[c].destroy();this._vertexBuffers=null;for(var d=0,h=o.length;d<h;++d)o[d].destroy();this._indiceBuffers=null},r._drawSubElement=function(e,t){var i=e.data.verticesData.vertexCount;this._vertexCount+i>n.MAX_VERTEX_COUNT&&this.flush(t),this._vertexCount+=i,this._batchedQueue[this._elementCount++]=e},r._createMesh=function(e,t){var i=n.MAX_VERTEX_COUNT,o=new c_(e,"BufferMesh"+t);o._addReferCount(1);var s=[],l=this.createVertexElements(s),u=this._vertexBuffers[t]=new ha(e,kr.VertexBuffer,i*l,Dn.Dynamic),c=this._indiceBuffers[t]=new ha(e,kr.IndexBuffer,i*6,Dn.Dynamic);return o.setVertexBufferBinding(u,l),o.setIndexBufferBinding(c,Lr.UInt16),o.setVertexElements(s),o},r._updateData=function(e){var t=this,i=t._meshes,o=t._flushId;!n._canUploadSameBuffer&&this._meshCount<=o&&(this._meshCount++,i[o]=this._createMesh(e,o));var s=this,l=s._batchedQueue,u=s._vertices,c=s._indices,f=i[o];f.clearSubMesh();for(var d=0,h=0,_=0,p=0,v=0,y=0,m=null,g=0,x=l.length;g<x;g++){var b=l[g],S=b.data;d=this.updateVertices(S,u,d);for(var C=S.verticesData.triangles,E=C.length,T=0;T<E;T++)c[h++]=C[T]+v;v+=S.verticesData.vertexCount,m===null||this.canBatch(m,b)?p+=E:(f.addSubMesh(this._getSubMeshFromPool(_,p)),_+=p,p=E,l[y++]=m),m=b}f.addSubMesh(this._getSubMeshFromPool(_,p)),l[y]=m,this._vertexBuffers[o].setData(u,0,0,d,us.Discard),this._indiceBuffers[o].setData(c,0,0,h,us.Discard)},r._getSubMeshFromPool=function(e,t){var i=this._subMeshPool.getFromPool();return i.start=e,i.count=t,i.topology=ro.Triangles,i},n}();(function(){Yi._disableBatchTag=is.getByName("spriteDisableBatching")})();(function(){Yi.MAX_VERTEX_COUNT=4096})();(function(){Yi._canUploadSameBuffer=!0})();var cl,Kv=(cl=function(){function n(){}return n.resetData=function(a){a._verticesData.triangles=[]},n.updatePositions=function(a){var e=a.width,t=a.height,i=a.sprite,o=a.tileMode,s=a.tiledAdaptiveThreshold,l=a._verticesData,u=l.positions,c=l.uvs,f=l.triangles,d=this,h=d._posRow,_=d._posColumn,p=d._uvRow,v=d._uvColumn;h.length=_.length=p.length=v.length=0,o===od.Adaptive?this._calculateAdaptiveDividing(i,e,t,s,h,_,p,v):this._calculateContinuousDividing(i,e,t,h,_,p,v);var y=a.sprite.pivot,m=y.x,g=y.y,x=a.width*m,b=a.height*g,S=Kv._worldMatrix,C=S.elements,E=a.entity.transform.worldMatrix,T=E.elements,M=a.flipX?-1:1,L=a.flipY?-1:1,F,N,I,O,P,R;F=C[0]=T[0]*M,N=C[1]=T[1]*M,I=C[2]=T[2]*M,O=C[4]=T[4]*L,P=C[5]=T[5]*L,R=C[6]=T[6]*L,C[8]=T[8],C[9]=T[9],C[10]=T[10];for(var A=C[12]=T[12]-x*C[0]-b*C[4],D=C[13]=T[13]-x*C[1]-b*C[5],B=C[14]=T[14]-x*C[2]-b*C[6],k=h.length-1,V=_.length-1,U=0,j=0,G=0;G<V;G++)for(var $=2*G,W=0;W<k;W++){var K=p.get(2*W),q=v.get($),Y=p.get(2*W+1),Q=v.get($+1);if(!(isNaN(K)||isNaN(K)||isNaN(Y)||isNaN(Q))){f[j++]=U,f[j++]=U+1,f[j++]=U+2,f[j++]=U+2,f[j++]=U+1,f[j++]=U+3;var re=h.get(W),ue=_.get(G),oe=h.get(W+1),ee=_.get(G+1);c[U]?c[U].set(K,q):c[U]=new Ze(K,q);var xe=u[U];xe?xe.set(F*re+O*ue+A,N*re+P*ue+D,I*re+R*ue+B):u[U]=new z(F*re+O*ue+A,N*re+P*ue+D,I*re+R*ue+B),U++,c[U]?c[U].set(Y,q):c[U]=new Ze(Y,q),xe=u[U],xe?xe.set(F*oe+O*ue+A,N*oe+P*ue+D,I*oe+R*ue+B):u[U]=new z(F*oe+O*ue+A,N*oe+P*ue+D,I*oe+R*ue+B),U++,c[U]?c[U].set(K,Q):c[U]=new Ze(K,Q),xe=u[U],xe?xe.set(F*re+O*ee+A,N*re+P*ee+D,I*re+R*ee+B):u[U]=new z(F*re+O*ee+A,N*re+P*ee+D,I*re+R*ee+B),U++,c[U]?c[U].set(Y,Q):c[U]=new Ze(Y,Q),xe=u[U],xe?xe.set(F*oe+O*ee+A,N*oe+P*ee+D,I*oe+R*ee+B):u[U]=new z(F*oe+O*ee+A,N*oe+P*ee+D,I*oe+R*ee+B),U++}}a._verticesData.vertexCount=U,f.length=j;var Te=a._bounds,Ce=Te.min,pe=Te.max;Ce.set(h.get(0),_.get(0),0),pe.set(h.get(k),_.get(V),0),a._bounds.transform(S)},n.updateUVs=function(a){},n._calculateAdaptiveDividing=function(a,e,t,i,o,s,l,u){var c=a.border,f=a._getPositions(),d=f[0],h=d.x,_=d.y,p=f[3],v=p.x,y=p.y,m=a._getUVs(),g=m[0],x=m[1],b=m[2],S=m[3],C=a.width,E=a.height,T=C*c.x,M=C*c.z,L=T+M,F=C-L,N=E*c.w,I=E*c.y,O=N+I,P=E-O,R,A,D,B,k,V,U;if(L>=e?(B=3,A=0):F>ve.zeroTolerance?(V=(e-L)/F,V=V%1>=i?Math.ceil(V):Math.floor(V),B=4+V-1,A=2):(B=4,A=1),O>=t?(k=3,D=0):P>ve.zeroTolerance?(U=(t-O)/P,U=U%1>=i?Math.ceil(U):Math.floor(U),k=4+U-1,D=2):(k=4,D=1),(B-1)*(k-1)*4>Yi.MAX_VERTEX_COUNT){o.add(e*h),o.add(e*v),s.add(t*_),s.add(t*y),l.add(g.x),l.add(S.x),u.add(g.y),u.add(S.y),Pt.warn("The number of vertices exceeds the upper limit("+Yi.MAX_VERTEX_COUNT+").");return}switch(A){case 0:R=e/L,o.add(C*h*R),o.add(T*R),o.add(e-C*(1-v)*R),l.add(g.x),l.add(x.x),l.add(b.x),l.add(S.x);break;case 1:o.add(C*h),o.add(T),o.add(e-M),o.add(e-C*(1-v)),l.add(g.x),l.add(x.x),l.add(NaN),l.add(NaN),l.add(b.x),l.add(S.x);break;case 2:R=e/(L+V*F),o.add(C*h*R),o.add(T*R),l.add(g.x),l.add(x.x),l.add(x.x);for(var j=0,G=V-1;j<G;j++)o.add(T+(j+1)*F*R),l.add(b.x),l.add(x.x);o.add(e-M*R),o.add(e-C*(1-v)*R),l.add(b.x),l.add(b.x),l.add(S.x);break}switch(D){case 0:R=t/O,s.add(E*_*R),s.add(I*R),s.add(t-E*(1-y)*R),u.add(g.y),u.add(x.y),u.add(b.y),u.add(S.y);break;case 1:s.add(E*_),s.add(I),s.add(t-N),s.add(t-E*(1-y)),u.add(g.y),u.add(x.y),u.add(NaN),u.add(NaN),u.add(b.y),u.add(S.y);break;case 2:R=t/(O+U*P),s.add(E*_*R),s.add(I*R),u.add(g.y),u.add(x.y),u.add(x.y);for(var $=0,W=U-1;$<W;$++)s.add(I+($+1)*P*R),u.add(b.y),u.add(x.y);s.add(t-N*R),s.add(t-E*(1-y)*R),u.add(b.y),u.add(b.y),u.add(S.y);break}},n._calculateContinuousDividing=function(a,e,t,i,o,s,l){var u=a.border,c=a._getPositions(),f=c[0],d=f.x,h=f.y,_=c[3],p=_.x,v=_.y,y=a._getUVs(),m=y[0],g=y[1],x=y[2],b=y[3],S=a.width,C=a.height,E=S*u.x,T=S*u.z,M=E+T,L=S-M,F=C*u.w,N=C*u.y,I=F+N,O=C-I,P,R,A,D,B,k;if(M>=e?(A=3,P=0):L>ve.zeroTolerance?(B=(e-M)/L,A=4+(B|0),P=2):(A=4,P=1),I>=t?(D=3,R=0):O>ve.zeroTolerance?(k=(t-I)/O,D=4+(k|0),R=2):(D=4,R=1),(A-1)*(D-1)*4>Yi.MAX_VERTEX_COUNT){i.add(e*d),i.add(e*p),o.add(t*h),o.add(t*v),s.add(m.x),s.add(b.x),l.add(m.y),l.add(b.y),Pt.warn("The number of vertices exceeds the upper limit("+Yi.MAX_VERTEX_COUNT+").");return}switch(P){case 0:var V=e/M;i.add(S*d*V),i.add(E*V),i.add(e-S*(1-p)*V),s.add(m.x),s.add(g.x),s.add(x.x),s.add(b.x);break;case 1:i.add(S*d),i.add(E),i.add(e-T),i.add(e-S*(1-p)),s.add(m.x),s.add(g.x),s.add(NaN),s.add(NaN),s.add(x.x),s.add(b.x);break;case 2:i.add(S*d),i.add(E),s.add(m.x),s.add(g.x),s.add(g.x);for(var U=B|0,j=0;j<U;j++)i.add(E+(j+1)*L),s.add(x.x),s.add(g.x);i.add(e-T),i.add(e-S*(1-p)),s.add((x.x-g.x)*(B-U)+g.x),s.add(x.x),s.add(b.x);break}switch(R){case 0:var G=t/I;o.add(C*h*G),o.add(N*G),o.add(t-C*(1-v)*G),l.add(m.y),l.add(g.y),l.add(x.y),l.add(b.y);break;case 1:o.add(C*h),o.add(N),o.add(t-F),o.add(t-C*(1-v)),l.add(m.y),l.add(g.y),l.add(NaN),l.add(NaN),l.add(x.y),l.add(b.y);break;case 2:o.add(C*h),o.add(N),l.add(m.y),l.add(g.y),l.add(g.y);for(var $=k|0,W=0;W<$;W++)o.add(N+(W+1)*O),l.add(x.y),l.add(g.y);o.add(t-F),o.add(t-C*(1-v)),l.add((x.y-g.y)*(k-$)+g.y),l.add(x.y),l.add(b.y);break}},n}(),function(){cl._worldMatrix=new Ge}(),function(){cl._posRow=new Nn}(),function(){cl._posColumn=new Nn}(),function(){cl._uvRow=new Nn}(),function(){cl._uvColumn=new Nn}(),cl);Kv=H([ma()],Kv);var Kb;(function(n){n[n.Compressed=0]="Compressed",n[n.WithoutTiled=1]="WithoutTiled",n[n.WithTiled=2]="WithTiled"})(Kb||(Kb={}));var yx=function(r,a,e,t,i){t===void 0&&(t=null),i===void 0&&(i=null),this.vertexCount=r,this.positions=a,this.uvs=e,this.triangles=t,this.color=i},Er=function(n){be(r,n);function r(e){var t;return t=n.call(this,e)||this,t._tileMode=od.Continuous,t._tiledAdaptiveThreshold=.5,t._color=new Me(1,1,1,1),t._sprite=null,t._automaticWidth=0,t._automaticHeight=0,t._customWidth=void 0,t._customHeight=void 0,t._flipX=!1,t._flipY=!1,t._maskLayer=oc.Layer0,t._maskInteraction=ur.None,t._verticesData=new yx(4,[],[],null,t._color),t.drawMode=vi.Simple,t.setMaterial(t._engine._spriteDefaultMaterial),t._onSpriteChange=t._onSpriteChange.bind(Et(t)),t}var a=r.prototype;return a._cloneTo=function(t,i,o){n.prototype._cloneTo.call(this,t,i,o),t._assembler.resetData(t),t.sprite=this._sprite,t.drawMode=this._drawMode},a._updateShaderData=function(t,i){if(i){this._updateMVPShaderData(t,Ge._identity);return}this._updateTransformShaderData(t,Ge._identity)},a._updateBounds=function(t){this.sprite?this._assembler.updatePositions(this):(t.min.set(0,0,0),t.max.set(0,0,0))},a._render=function(t){var i;if(!(!((i=this.sprite)!=null&&i.texture)||!this.width||!this.height)){var o=this.getMaterial();if(!!o){o.destroyed&&(o=this._engine._spriteDefaultMaterials[this._maskInteraction]),this._dirtyUpdateFlag&zn.WorldVolume&&(this._assembler.updatePositions(this),this._dirtyUpdateFlag&=~zn.WorldVolume),this._dirtyUpdateFlag&2&&(this._assembler.updateUVs(this),this._dirtyUpdateFlag&=-3);var s=this.sprite.texture,l=this._engine._spriteRenderDataPool.getFromPool();l.set(this,o,this._verticesData,s),t.camera._renderPipeline.pushRenderData(t,l)}}},a._onDestroy=function(){var t=this._sprite;t&&(this._addResourceReferCount(t,-1),t._updateFlagManager.removeListener(this._onSpriteChange)),n.prototype._onDestroy.call(this),this._entity=null,this._color=null,this._sprite=null,this._assembler=null,this._verticesData=null},a._calDefaultSize=function(){var t=this._sprite;t?(this._automaticWidth=t.width,this._automaticHeight=t.height):this._automaticWidth=this._automaticHeight=0,this._dirtyUpdateFlag&=-5},a._updateStencilState=function(t,i){var o=this.getMaterial(),s=this._engine,l=s._spriteDefaultMaterials;if(o===l[t])this.setMaterial(l[i]);else{var u=o.renderState.stencilState;i===ur.None?(u.enabled=!1,u.writeMask=255,u.referenceValue=0,u.compareFunctionFront=u.compareFunctionBack=Xt.Always):(u.enabled=!0,u.writeMask=0,u.referenceValue=1,u.compareFunctionFront=u.compareFunctionBack=i===ur.VisibleInsideMask?Xt.LessEqual:Xt.Greater)}},a._onSpriteChange=function(t){switch(t){case qt.texture:this.shaderData.setTexture(r._textureProperty,this.sprite.texture);break;case qt.size:var i=this,o=i._drawMode;this._dirtyUpdateFlag|=4,this._drawMode===vi.Sliced?this._dirtyUpdateFlag|=zn.WorldVolume:o===vi.Tiled?this._dirtyUpdateFlag|=3:(this._customWidth===void 0||this._customHeight===void 0)&&(this._dirtyUpdateFlag|=zn.WorldVolume);break;case qt.border:this._drawMode===vi.Sliced&&(this._dirtyUpdateFlag|=3);break;case qt.region:case qt.atlasRegionOffset:this._dirtyUpdateFlag|=3;break;case qt.atlasRegion:this._dirtyUpdateFlag|=2;break;case qt.pivot:this._dirtyUpdateFlag|=zn.WorldVolume;break;case qt.destroy:this.sprite=null;break}},Ie(r,[{key:"drawMode",get:function(){return this._drawMode},set:function(t){if(this._drawMode!==t){switch(this._drawMode=t,t){case vi.Simple:this._assembler=Zo;break;case vi.Sliced:this._assembler=sd;break;case vi.Tiled:this._assembler=Kv;break}this._assembler.resetData(this),this._dirtyUpdateFlag|=3}}},{key:"tileMode",get:function(){return this._tileMode},set:function(t){this._tileMode!==t&&(this._tileMode=t,this.drawMode===vi.Tiled&&(this._dirtyUpdateFlag|=3))}},{key:"tiledAdaptiveThreshold",get:function(){return this._tiledAdaptiveThreshold},set:function(t){t!==this._tiledAdaptiveThreshold&&(t=ve.clamp(t,0,1),this._tiledAdaptiveThreshold=t,this.drawMode===vi.Tiled&&(this._dirtyUpdateFlag|=3))}},{key:"sprite",get:function(){return this._sprite},set:function(t){var i=this._sprite;i!==t&&(i&&(this._addResourceReferCount(i,-1),i._updateFlagManager.removeListener(this._onSpriteChange)),this._dirtyUpdateFlag|=7,t?(this._addResourceReferCount(t,1),t._updateFlagManager.addListener(this._onSpriteChange),this.shaderData.setTexture(r._textureProperty,t.texture)):this.shaderData.setTexture(r._textureProperty,null),this._sprite=t)}},{key:"color",get:function(){return this._color},set:function(t){this._color!==t&&this._color.copyFrom(t)}},{key:"width",get:function(){return this._customWidth!==void 0?this._customWidth:(this._dirtyUpdateFlag&4&&this._calDefaultSize(),this._automaticWidth)},set:function(t){this._customWidth!==t&&(this._customWidth=t,this._dirtyUpdateFlag|=zn.WorldVolume)}},{key:"height",get:function(){return this._customHeight!==void 0?this._customHeight:(this._dirtyUpdateFlag&4&&this._calDefaultSize(),this._automaticHeight)},set:function(t){this._customHeight!==t&&(this._customHeight=t,this._dirtyUpdateFlag|=zn.WorldVolume)}},{key:"flipX",get:function(){return this._flipX},set:function(t){this._flipX!==t&&(this._flipX=t,this._dirtyUpdateFlag|=zn.WorldVolume)}},{key:"flipY",get:function(){return this._flipY},set:function(t){this._flipY!==t&&(this._flipY=t,this._dirtyUpdateFlag|=zn.WorldVolume)}},{key:"maskLayer",get:function(){return this._maskLayer},set:function(t){this._maskLayer=t}},{key:"maskInteraction",get:function(){return this._maskInteraction},set:function(t){this._maskInteraction!==t&&(this._updateStencilState(this._maskInteraction,t),this._maskInteraction=t)}}]),r}(Gt);(function(){Er._textureProperty=X.getByName("renderer_SpriteTexture")})();H([te],Er.prototype,"_verticesData",void 0);H([te],Er.prototype,"_drawMode",void 0);H([en],Er.prototype,"_assembler",void 0);H([en],Er.prototype,"_tileMode",void 0);H([en],Er.prototype,"_tiledAdaptiveThreshold",void 0);H([Xe],Er.prototype,"_color",void 0);H([te],Er.prototype,"_sprite",void 0);H([te],Er.prototype,"_automaticWidth",void 0);H([te],Er.prototype,"_automaticHeight",void 0);H([en],Er.prototype,"_customWidth",void 0);H([en],Er.prototype,"_customHeight",void 0);H([en],Er.prototype,"_flipX",void 0);H([en],Er.prototype,"_flipY",void 0);H([en],Er.prototype,"_maskLayer",void 0);H([en],Er.prototype,"_maskInteraction",void 0);H([te],Er.prototype,"_onSpriteChange",null);var Yb;(function(n){n[n.UV=2]="UV",n[n.RenderData=3]="RenderData",n[n.AutomaticSize=4]="AutomaticSize",n[n.All=7]="All"})(Yb||(Yb={}));var ea=function(n){be(r,n);function r(e){var t;return t=n.call(this,e)||this,t.influenceLayers=oc.Everything,t._sprite=null,t._automaticWidth=0,t._automaticHeight=0,t._customWidth=void 0,t._customHeight=void 0,t._flipX=!1,t._flipY=!1,t._alphaCutoff=.5,t._verticesData=new yx(4,[],[]),Zo.resetData(Et(t)),t.setMaterial(t._engine._spriteMaskDefaultMaterial),t.shaderData.setFloat(r._alphaCutoffProperty,t._alphaCutoff),t._onSpriteChange=t._onSpriteChange.bind(Et(t)),t}var a=r.prototype;return a._cloneTo=function(t,i,o){n.prototype._cloneTo.call(this,t,i,o),t.sprite=this._sprite},a._updateBounds=function(t){this.sprite?Zo.updatePositions(this):(t.min.set(0,0,0),t.max.set(0,0,0))},a._render=function(t){var i;if(!(!((i=this.sprite)!=null&&i.texture)||!this.width||!this.height)){var o=this.getMaterial();if(!!o){var s=this,l=s._engine;o.destroyed&&(o=l._spriteMaskDefaultMaterial),this._dirtyUpdateFlag&zn.WorldVolume&&(Zo.updatePositions(this),this._dirtyUpdateFlag&=~zn.WorldVolume),this._dirtyUpdateFlag&2&&(Zo.updateUVs(this),this._dirtyUpdateFlag&=-3),t.camera._renderPipeline._allSpriteMasks.add(this);var u=l._spriteMaskRenderDataPool.getFromPool();u.set(this,o,this._verticesData);var c=l._renderElementPool.getFromPool();c.set(u,o.shader.subShaders[0].passes),this._maskElement=c}}},a._onDestroy=function(){var t=this._sprite;t&&(this._addResourceReferCount(t,-1),t._updateFlagManager.removeListener(this._onSpriteChange)),n.prototype._onDestroy.call(this),this._sprite=null,this._verticesData=null},a._calDefaultSize=function(){var t=this._sprite;t?(this._automaticWidth=t.width,this._automaticHeight=t.height):this._automaticWidth=this._automaticHeight=0,this._dirtyUpdateFlag&=-5},a._onSpriteChange=function(t){switch(t){case qt.texture:this.shaderData.setTexture(r._textureProperty,this.sprite.texture);break;case qt.size:this._dirtyUpdateFlag|=4,(this._customWidth===void 0||this._customHeight===void 0)&&(this._dirtyUpdateFlag|=zn.WorldVolume);break;case qt.region:case qt.atlasRegionOffset:this._dirtyUpdateFlag|=3;break;case qt.atlasRegion:this._dirtyUpdateFlag|=2;break;case qt.pivot:this._dirtyUpdateFlag|=zn.WorldVolume;break;case qt.destroy:this.sprite=null;break}},Ie(r,[{key:"width",get:function(){return this._customWidth!==void 0?this._customWidth:(this._dirtyUpdateFlag&4&&this._calDefaultSize(),this._automaticWidth)},set:function(t){this._customWidth!==t&&(this._customWidth=t,this._dirtyUpdateFlag|=zn.WorldVolume)}},{key:"height",get:function(){return this._customHeight!==void 0?this._customHeight:(this._dirtyUpdateFlag&4&&this._calDefaultSize(),this._automaticHeight)},set:function(t){this._customHeight!==t&&(this._customHeight=t,this._dirtyUpdateFlag|=zn.WorldVolume)}},{key:"flipX",get:function(){return this._flipX},set:function(t){this._flipX!==t&&(this._flipX=t,this._dirtyUpdateFlag|=zn.WorldVolume)}},{key:"flipY",get:function(){return this._flipY},set:function(t){this._flipY!==t&&(this._flipY=t,this._dirtyUpdateFlag|=zn.WorldVolume)}},{key:"sprite",get:function(){return this._sprite},set:function(t){var i=this._sprite;i!==t&&(i&&(this._addResourceReferCount(i,-1),i._updateFlagManager.removeListener(this._onSpriteChange)),this._dirtyUpdateFlag|=7,t?(this._addResourceReferCount(t,1),t._updateFlagManager.addListener(this._onSpriteChange),this.shaderData.setTexture(r._textureProperty,t.texture)):this.shaderData.setTexture(r._textureProperty,null),this._sprite=t)}},{key:"alphaCutoff",get:function(){return this._alphaCutoff},set:function(t){this._alphaCutoff!==t&&(this._alphaCutoff=t,this.shaderData.setFloat(r._alphaCutoffProperty,t))}}]),r}(Gt);(function(){ea._textureProperty=X.getByName("renderer_MaskTexture")})();(function(){ea._alphaCutoffProperty=X.getByName("renderer_MaskAlphaCutoff")})();H([en],ea.prototype,"influenceLayers",void 0);H([te],ea.prototype,"_verticesData",void 0);H([te],ea.prototype,"_sprite",void 0);H([te],ea.prototype,"_automaticWidth",void 0);H([te],ea.prototype,"_automaticHeight",void 0);H([en],ea.prototype,"_customWidth",void 0);H([en],ea.prototype,"_customHeight",void 0);H([en],ea.prototype,"_flipX",void 0);H([en],ea.prototype,"_flipY",void 0);H([en],ea.prototype,"_alphaCutoff",void 0);H([te],ea.prototype,"_onSpriteChange",null);var Qb;(function(n){n[n.UV=2]="UV",n[n.RenderData=3]="RenderData",n[n.AutomaticSize=4]="AutomaticSize",n[n.All=7]="All"})(Qb||(Qb={}));var e8=function(n){be(r,n);function r(e){var t;return t=n.call(this,e)||this,t._charInfoMap={},t._space=1,t._curX=1,t._curY=1,t._nextY=1,t}var a=r.prototype;return a.uploadCharTexture=function(t){var i=t.w,o=t.h,s=t.data,l=this,u=l._space,c=l.texture,f=c.width,d=i+u,h=o+u;if(1+d>=f||1+h>=f)throw Error("The char fontSize is too large.");var _=this._curX+d;_>=f&&(this._curX=u,this._curY=this._nextY+u);var p=this._curY+h;if(p>this._nextY&&(this._nextY=p),p>=f)return!1;i>0&&o>0&&s&&(t.bufferOffset=new Ze(this._curX,this._curY),c.setPixelBuffer(s,0,this._curX,this._curY,i,o),c.generateMipmaps());var v=1/f,y=this._curX,m=this._curY,g=i,x=o,b=y*v,S=(y+g)*v,C=m*v,E=(m+x)*v;t.x=y,t.y=m;var T=t.uvs;return T[0].set(b,C),T[1].set(S,C),T[2].set(S,E),T[3].set(b,E),this._curX+=d+u,!0},a.addCharInfo=function(t,i){this._charInfoMap[t.charCodeAt(0)]=i},a.getCharInfo=function(t){return this._charInfoMap[t.charCodeAt(0)]},a._onDestroy=function(){n.prototype._onDestroy.call(this),this.texture.destroy(),this.texture=null,this._charInfoMap={}},r}(Io),Za=function(){function n(){}return n.textContext=function(){var a=n._textContext;if(!a){var e;try{e=new OffscreenCanvas(0,0)}catch{e=document.createElement("canvas")}var t=e.getContext("2d",{willReadFrequently:!0});a={canvas:e,context:t},n._textContext=a}return a},n.measureFont=function(a){var e=n._fontSizeInfoCache,t=e[a];return t||(t=n._measureFontOrChar(a),e[a]=t,t)},n.getNativeFontString=function(a,e,t){var i=t&Ds.Bold?"bold ":"";return t&Ds.Italic&&(i+="italic "),!/([\"\'])[^\'\"]+\1/.test(a)&&n._genericFontFamilies.indexOf(a)==-1&&(a='"'+a+'"'),i+=e+"px "+a,i},n.measureChar=function(a,e){return n._measureFontOrChar(e,a)},n.measureTextWithWrap=function(a){var e=a._subFont,t=e.nativeFontString,i=n.measureFont(t),o=a.text.split(/(?:\r\n|\r|\n)/),s=new Array,l=new Array,u=new Array,c=fs._pixelsPerUnit,f=i.size+a.lineSpacing*c,d=a.width*c,h=0;e.nativeFontString=t;for(var _=0,p=o.length;_<p;_++){var v=o[_];if(v.length===0){this._pushLine(s,l,u,"",0,0,0);continue}for(var y="",m=0,g=0,x=0,b="",S=0,C=0,E=0,T=!1,M=0,L=v.length;M<L;++M){var F=v[M],N=n._getCharInfo(F,t,e),I=F.charCodeAt(0),O=I===32;if(!(O&&T&&b.length===0&&y.length===0)){var P=O||I>=19968&&I<=40959,R=N.w,A=N.offsetY,D=N.h*.5,B=D+A,k=D-A;P?(y.length>0&&(S+m>d?(S>0&&this._pushLine(s,l,u,b,S,C,E),h=Math.max(h,S),T=!0,b=y,S=m,C=g,E=x):(b+=y,S+=m,C=Math.max(C,g),E=Math.max(E,x)),y="",m=g=x=0),S+R>d&&S>0?(this._pushLine(s,l,u,b,S,C,E),h=Math.max(h,S),T=!0,O?(b="",S=C=E=0):(b=F,S=N.xAdvance,C=B,E=k)):(b+=F,S+=N.xAdvance,C=Math.max(C,B),E=Math.max(E,k))):m+N.w>d?(S>0&&(this._pushLine(s,l,u,b,S,C,E),h=Math.max(h,S),b="",S=C=E=0),m>0&&this._pushLine(s,l,u,y,m,g,x),h=Math.max(h,m),T=!0,y=F,m=N.xAdvance,g=B,x=k):(y+=F,m+=N.xAdvance,g=Math.max(g,B),x=Math.max(x,k))}}m>0&&(S+m>d?(S>0&&this._pushLine(s,l,u,b,S,C,E),h=Math.max(h,S),S=0,m>0&&this._pushLine(s,l,u,y,m,g,x),h=Math.max(h,m)):(b+=y,S+=m,C=Math.max(C,g),E=Math.max(E,x))),S>0&&(this._pushLine(s,l,u,b,S,C,E),h=Math.max(h,S))}var V=a.height*c;return a.overflowMode===Gl.Overflow&&(V=f*s.length),{width:h,height:V,lines:s,lineWidths:l,lineHeight:f,lineMaxSizes:u}},n.measureTextWithoutWrap=function(a){var e=a._subFont,t=e.nativeFontString,i=n.measureFont(t),o=a.text.split(/(?:\r\n|\r|\n)/),s=o.length,l=new Array,u=new Array,c=new Array,f=fs._pixelsPerUnit,d=i.size+a.lineSpacing*f,h=0;e.nativeFontString=t;for(var _=0;_<s;++_){for(var p=o[_],v=0,y=0,m=0,g=0,x=p.length;g<x;++g){var b=n._getCharInfo(p[g],t,e);v+=b.xAdvance;var S=b.offsetY,C=b.h*.5,E=C+S,T=C-S;y<E&&(y=E),m<T&&(m=T)}v>0&&(this._pushLine(l,u,c,p,v,y,m),h=Math.max(h,v))}var M=a.height*f;return a.overflowMode===Gl.Overflow&&(M=d*l.length),{width:h,height:M,lines:l,lineWidths:u,lineHeight:d,lineMaxSizes:c}},n.getNativeFontHash=function(a,e,t){var i=t&Ds.Bold?"bold":"";return t&Ds.Italic&&(i+="italic"),!/([\"\'])[^\'\"]+\1/.test(a)&&n._genericFontFamilies.indexOf(a)==-1&&(a=""+a),i+=e+"px"+a,i},n._measureFontOrChar=function(a,e){e===void 0&&(e="");var t=n.textContext(),i=t.canvas,o=t.context;o.font=a;var s=e||n._measureString,l=Math.max(1,Math.round(o.measureText(s).width)),u=Math.ceil(o.measureText(n._measureBaseline).width),c=u*n._heightMultiplier;u=n._baselineMultiplier*u|0;var f=n._extendHeight;c+=f,u+=f*.5,i.width=l,i.height=c,o.font=a,o.fillStyle="#000",o.clearRect(0,0,l,c),o.textBaseline="middle",o.fillStyle="#fff",o.fillText(s,0,u);for(var d=o.getImageData(0,0,l,c).data,h=d.length,_=-1,p=-1,v,y=0,m=0,g=0,x=i.width,b=1/x,S=0;S<h;S+=4)if(d[S+3]!==0){var C=S*.25;v=~~(C*b),_===-1&&(_=v),v>p&&(p=v)}else d[S]=d[S+1]=d[S+2]=255;_!==-1&&p!==-1&&(y=u-_,m=p-u+1,g=y+m);var E={ascent:y,descent:m,size:g};if(e){var T=null;if(g>0){var M=x*4;T=new Uint8Array(d.buffer,_*M,g*M)}return{char:e,x:0,y:0,w:l,h:g,offsetX:0,offsetY:(y-m)*.5,xAdvance:l,uvs:[new Ze,new Ze,new Ze,new Ze],ascent:y,descent:m,index:0,data:T}}else return E},n._getCharInfo=function(a,e,t){var i=t._getCharInfo(a);return i||(i=n.measureChar(a,e),t._uploadCharTexture(i),t._addCharInfo(a,i)),i},n._pushLine=function(a,e,t,i,o,s,l){a.push(i),e.push(o),t.push({ascent:s,descent:l,size:s+l})},n}();(function(){Za._genericFontFamilies=["serif","sans-serif","monospace","cursive","fantasy","system-ui","math","emoji","fangsong"]})();(function(){Za._extendHeight=0})();(function(){Za._measureString="|\xC9q\xC5"})();(function(){Za._measureBaseline="M"})();(function(){Za._heightMultiplier=2})();(function(){Za._baselineMultiplier=1.4})();(function(){Za._fontSizeInfoCache={}})();(function(){Za._textContext=null})();var t8=function(){function n(a){this._fontAtlases=[],this._lastIndex=-1,this._engine=a}var r=n.prototype;return r.destroy=function(){for(var e=this._fontAtlases,t=0,i=e.length;t<i;++t)e[t].destroy(!0);e.length=0},r._uploadCharTexture=function(e){var t=this._fontAtlases,i=this._lastIndex;i===-1&&(this._createFontAtlas(),i++);var o=t[i];o.uploadCharTexture(e)||(o=this._createFontAtlas(),o.uploadCharTexture(e),i++),this._lastIndex=i,e.data=null},r._addCharInfo=function(e,t){var i=this._lastIndex;t.index=i,this._fontAtlases[i].addCharInfo(e,t)},r._getCharInfo=function(e){for(var t=this._fontAtlases,i=0,o=t.length;i<o;++i){var s=t[i],l=s.getCharInfo(e);if(l)return l}return null},r._getTextureByIndex=function(e){var t=this._fontAtlases[e];return t?t.texture:null},r._getLastIndex=function(){return this._lastIndex},r._createFontAtlas=function(){var e=this,t=e._engine,i=new e8(t),o=new br(t,256,256,ye.R8G8B8A8,!1);o.filterMode=Jn.Bilinear,i.texture=o,i.isGCIgnored=o.isGCIgnored=!0,this._fontAtlases.push(i);var s=this.nativeFontString;return t.resourceManager.addContentRestorer(new(function(l){be(u,l);function u(){return l.call(this,i)}var c=u.prototype;return c.restoreContent=function(){var d=this.resource,h=d._charInfoMap,_=d.texture;for(var p in h){var v=h[p],y=Za.measureChar(v.char,s).data;if(v.w>0&&v.h>0&&y){var m=v.bufferOffset;_.setPixelBuffer(y,0,m.x,m.y,v.w,v.h)}}_.generateMipmaps()},u}(Ya))),i},n}(),uc=function(n){be(r,n);function r(e,t){t===void 0&&(t="");var i;return i=n.call(this,e)||this,i._name="",i._subFontMap={},i._name=t,i}var a=r.prototype;return a._getSubFont=function(t,i){var o=t+"-"+i,s=this._subFontMap,l=s[o];return l||(l=new t8(this.engine),s[o]=l,l)},a._onDestroy=function(){n.prototype._onDestroy.call(this);var t=this._subFontMap;for(var i in t)t[i].destroy();this._subFontMap=null,delete this.engine._fontMap[this._name]},r.createFromOS=function(t,i){if(i){var o=t._fontMap,s=o[i];return s||(s=new r(t,i),o[i]=s,s)}return null},Ie(r,[{key:"name",get:function(){return this._name}}]),r}(Io),xP=function n(){this.localPositions=new pt;var r=[new z,new z,new z,new z];this.renderData=new yx(4,r,null,n.triangles,null)};(function(){xP.triangles=[0,2,1,2,0,3]})();var n8=function(){function n(a,e){this._elements=[],this._type=a;for(var t=this._elements,i=0;i<e;++i)t[i]=new a}var r=n.prototype;return r.get=function(){return this._elements.length>0?this._elements.pop():new this._type},r.put=function(e){this._elements.push(e)},n}(),Zn=function(n){be(r,n);function r(e){var t;return t=n.call(this,e)||this,t._subFont=null,t._charRenderDatas=[],t._dirtyFlag=15,t._color=new Me(1,1,1,1),t._text="",t._width=0,t._height=0,t._localBounds=new Da,t._font=null,t._fontSize=24,t._fontStyle=Ds.None,t._lineSpacing=0,t._horizontalAlignment=wl.Center,t._verticalAlignment=Pl.Center,t._enableWrapping=!1,t._overflowMode=Gl.Overflow,t._maskInteraction=ur.None,t._maskLayer=oc.Layer0,t._init(),t}var a=r.prototype;return a._init=function(){var t=this.engine;this._font=t._textDefaultFont,this._addResourceReferCount(this._font,1),this.setMaterial(t._spriteDefaultMaterial)},a._onDestroy=function(){this._font&&(this._addResourceReferCount(this._font,-1),this._font=null),n.prototype._onDestroy.call(this);for(var t=this._charRenderDatas,i=0,o=t.length;i<o;++i)r._charRenderDataPool.put(t[i]);t.length=0,this._subFont&&(this._subFont=null)},a._cloneTo=function(t,i,o){n.prototype._cloneTo.call(this,t,i,o),t.font=this._font,t._subFont=this._subFont},a._isContainDirtyFlag=function(t){return(this._dirtyFlag&t)!=0},a._setDirtyFlagTrue=function(t){this._dirtyFlag|=t},a._setDirtyFlagFalse=function(t){this._dirtyFlag&=~t},a._updateShaderData=function(t,i){if(i){this._updateMVPShaderData(t,Ge._identity);return}this._updateTransformShaderData(t,Ge._identity)},a._updateBounds=function(t){Da.transform(this._localBounds,this._entity.transform.worldMatrix,t)},a._render=function(t){if(!this._isTextNoVisible()){this._isContainDirtyFlag(16)&&(this._updateStencilState(),this._setDirtyFlagFalse(16)),this._isContainDirtyFlag(1)&&(this._resetSubFont(),this._setDirtyFlagFalse(1)),this._isContainDirtyFlag(2)&&(this._updateLocalData(),this._setDirtyFlagFalse(2)),this._isContainDirtyFlag(4)&&(this._updatePosition(),this._setDirtyFlagFalse(4));var i=this._engine._spriteRenderDataPool,o=this._engine._textRenderDataPool.getFromPool(),s=o.charsData,l=this.getMaterial(),u=this._charRenderDatas,c=u.length;o.component=this,o.material=l,s.length=c;for(var f=0;f<c;++f){var d=u[f],h=i.getFromPool();h.set(this,l,d.renderData,d.texture,f),s[f]=h}t.camera._renderPipeline.pushRenderData(t,o)}},a._updateStencilState=function(){var t=this.getInstanceMaterial(),i=t.renderState.stencilState,o=this._maskInteraction;if(o===ur.None)i.enabled=!1,i.writeMask=255,i.referenceValue=0,i.compareFunctionFront=i.compareFunctionBack=Xt.Always;else{i.enabled=!0,i.writeMask=0,i.referenceValue=1;var s=o===ur.VisibleInsideMask?Xt.LessEqual:Xt.Greater;i.compareFunctionFront=s,i.compareFunctionBack=s}},a._resetSubFont=function(){var t=this._font;this._subFont=t._getSubFont(this.fontSize,this.fontStyle),this._subFont.nativeFontString=Za.getNativeFontString(t.name,this.fontSize,this.fontStyle)},a._updatePosition=function(){for(var t=this.entity.transform,i=t.worldMatrix.elements,o=this._charRenderDatas,s=i[0],l=i[1],u=i[2],c=i[4],f=i[5],d=i[6],h=i[12],_=i[13],p=i[14],v=r._tempVec31.set(c,f,d),y=r._tempVec30.set(s,l,u),m=0,g=o.length;m<g;++m){var x=o[m],b=x.localPositions,S=x.renderData.positions,C=b.x,E=b.y,T=S[0];T.x=C*s+E*c+h,T.y=C*l+E*f+_,T.z=C*u+E*d+p;var M=S[1];z.scale(y,b.z-C,M),z.add(T,M,M);var L=S[2];z.scale(v,b.w-E,L),z.add(T,L,S[3]),z.add(M,L,L)}},a._updateLocalData=function(){var t=this._localBounds,i=t.min,o=t.max,s=this,l=s.color,u=s._charRenderDatas,c=s._subFont,f=this.enableWrapping?Za.measureTextWithWrap(this):Za.measureTextWithoutWrap(this),d=f.height,h=f.lines,_=f.lineWidths,p=f.lineHeight,v=f.lineMaxSizes,y=r._charRenderDataPool,m=h.length,g=0;if(m>0){var x=fs._pixelsPerUnit,b=this.horizontalAlignment,S=1/x,C=this.width*x,E=C*.5,T=this.height*x,M=p*.5,L=0,F=p*.5-v[0].ascent,N=p*.5-v[m-1].descent-1;switch(this.verticalAlignment){case Pl.Top:L=T*.5-M+F;break;case Pl.Center:L=d*.5-M-(N-F)*.5;break;case Pl.Bottom:L=d-T*.5-M-N;break}for(var I=-1,O=Number.MAX_SAFE_INTEGER,P=Number.MAX_SAFE_INTEGER,R=Number.MIN_SAFE_INTEGER,A=Number.MIN_SAFE_INTEGER,D=0;D<m;++D){var B=_[D];if(B>0){var k=h[D],V=0,U=-1;switch(I<0&&(I=D),b){case wl.Left:V=-E;break;case wl.Center:V=-B*.5;break;case wl.Right:V=E-B;break}for(var j=0,G=k.length;j<G;++j){var $=k[j],W=c._getCharInfo($);if(W.h>0){var K,q;U<0&&(U=j);var Y=(K=u)[q=g++]||(K[q]=y.get()),Q=Y.renderData,re=Y.localPositions;Y.texture=c._getTextureByIndex(W.index),Q.color=l,Q.uvs=W.uvs;var ue=W.w,oe=W.ascent,ee=W.descent,xe=V*S,Te=(V+ue)*S,Ce=(L+oe)*S,pe=(L-ee)*S;re.set(xe,Ce,Te,pe),D===I&&(A=Math.max(A,Ce)),P=Math.min(P,pe),j===U&&(O=Math.min(O,xe)),R=Math.max(R,Te)}V+=W.xAdvance}}L-=p}I<0?(i.set(0,0,0),o.set(0,0,0)):(i.set(O,P,0),o.set(R,A,0))}else i.set(0,0,0),o.set(0,0,0);var J=u.length;if(J>g){for(var ae=g;ae<J;++ae)y.put(u[ae]);u.length=g}c._getLastIndex()>0&&u.sort(function(ne,ge){return ne.texture.instanceId-ge.texture.instanceId})},a._onTransformChanged=function(t){n.prototype._onTransformChanged.call(this,t),this._setDirtyFlagTrue(12)},a._isTextNoVisible=function(){return this._text===""||this._fontSize===0||this.enableWrapping&&this.width<=0||this.overflowMode===Gl.Truncate&&this.height<=0},Ie(r,[{key:"color",get:function(){return this._color},set:function(t){this._color!==t&&this._color.copyFrom(t)}},{key:"text",get:function(){return this._text},set:function(t){t=t||"",this._text!==t&&(this._text=t,this._setDirtyFlagTrue(14))}},{key:"width",get:function(){return this._width},set:function(t){this._width!==t&&(this._width=t,this._setDirtyFlagTrue(14))}},{key:"height",get:function(){return this._height},set:function(t){this._height!==t&&(this._height=t,this._setDirtyFlagTrue(14))}},{key:"font",get:function(){return this._font},set:function(t){var i=this._font;i!==t&&(i&&this._addResourceReferCount(i,-1),t&&this._addResourceReferCount(t,1),this._font=t,this._setDirtyFlagTrue(15))}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this._setDirtyFlagTrue(15))}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this.fontStyle!==t&&(this._fontStyle=t,this._setDirtyFlagTrue(15))}},{key:"lineSpacing",get:function(){return this._lineSpacing},set:function(t){this._lineSpacing!==t&&(this._lineSpacing=t,this._setDirtyFlagTrue(14))}},{key:"horizontalAlignment",get:function(){return this._horizontalAlignment},set:function(t){this._horizontalAlignment!==t&&(this._horizontalAlignment=t,this._setDirtyFlagTrue(14))}},{key:"verticalAlignment",get:function(){return this._verticalAlignment},set:function(t){this._verticalAlignment!==t&&(this._verticalAlignment=t,this._setDirtyFlagTrue(14))}},{key:"enableWrapping",get:function(){return this._enableWrapping},set:function(t){this._enableWrapping!==t&&(this._enableWrapping=t,this._setDirtyFlagTrue(14))}},{key:"overflowMode",get:function(){return this._overflowMode},set:function(t){this._overflowMode!==t&&(this._overflowMode=t,this._setDirtyFlagTrue(14))}},{key:"maskInteraction",get:function(){return this._maskInteraction},set:function(t){this._maskInteraction!==t&&(this._maskInteraction=t,this._setDirtyFlagTrue(16))}},{key:"maskLayer",get:function(){return this._maskLayer},set:function(t){this._maskLayer=t}},{key:"bounds",get:function(){if(this._isTextNoVisible()){if(this._isContainDirtyFlag(8)){var t=this._localBounds;t.min.set(0,0,0),t.max.set(0,0,0),this._updateBounds(this._bounds),this._setDirtyFlagFalse(8)}return this._bounds}return this._isContainDirtyFlag(1)&&this._resetSubFont(),this._isContainDirtyFlag(2)&&this._updateLocalData(),this._isContainDirtyFlag(4)&&this._updatePosition(),this._isContainDirtyFlag(8)&&this._updateBounds(this._bounds),this._setDirtyFlagFalse(15),this._bounds}}]),r}(Gt);(function(){Zn._charRenderDataPool=new n8(xP,50)})();(function(){Zn._tempVec30=new z})();(function(){Zn._tempVec31=new z})();H([en],Zn.prototype,"_subFont",void 0);H([te],Zn.prototype,"_charRenderDatas",void 0);H([te],Zn.prototype,"_dirtyFlag",void 0);H([Xe],Zn.prototype,"_color",void 0);H([en],Zn.prototype,"_text",void 0);H([en],Zn.prototype,"_width",void 0);H([en],Zn.prototype,"_height",void 0);H([te],Zn.prototype,"_localBounds",void 0);H([en],Zn.prototype,"_font",void 0);H([en],Zn.prototype,"_fontSize",void 0);H([en],Zn.prototype,"_fontStyle",void 0);H([en],Zn.prototype,"_lineSpacing",void 0);H([en],Zn.prototype,"_horizontalAlignment",void 0);H([en],Zn.prototype,"_verticalAlignment",void 0);H([en],Zn.prototype,"_enableWrapping",void 0);H([en],Zn.prototype,"_overflowMode",void 0);H([en],Zn.prototype,"_maskInteraction",void 0);H([en],Zn.prototype,"_maskLayer",void 0);var qb;(function(n){n[n.SubFont=1]="SubFont",n[n.LocalPositionBounds=2]="LocalPositionBounds",n[n.WorldPosition=4]="WorldPosition",n[n.WorldBounds=8]="WorldBounds",n[n.MaskInteraction=16]="MaskInteraction",n[n.Position=14]="Position",n[n.Font=15]="Font"})(qb||(qb={}));var Ml;(function(n){n[n.Normal=0]="Normal",n[n.Additive=1]="Additive"})(Ml||(Ml={}));var es;(function(n){n[n.Front=0]="Front",n[n.Back=1]="Back",n[n.Double=2]="Double"})(es||(es={}));var Qa=function(n){be(r,n);function r(e,t){var i;return i=n.call(this,e)||this,i._renderStates=[],i._priority=0,i._shaderData=new io(bi.Material),i.shader=t,i}var a=r.prototype;return a.clone=function(){var t=new r(this._engine,this.shader);return this.cloneTo(t),t},a.cloneTo=function(t){t.shader=this.shader,this.shaderData.cloneTo(t.shaderData),Mi.deepCloneObject(this.renderStates,t.renderStates)},a._addReferCount=function(t){this._destroyed||(n.prototype._addReferCount.call(this,t),this.shaderData._addReferCount(t),this._shader._addReferCount(t))},a._onDestroy=function(){n.prototype._onDestroy.call(this),this._shader=null,this._shaderData=null,this._renderStates.length=0,this._renderStates=null},Ie(r,[{key:"shaderData",get:function(){return this._shaderData}},{key:"shader",get:function(){return this._shader},set:function(t){var i=this._getReferCount();if(i>0){var o;(o=this._shader)==null||o._addReferCount(-i),t._addReferCount(i)}this._shader=t;for(var s=this._renderStates,l=s.length,u=0,c=t.subShaders,f=0;f<c.length;f++)u=Math.max(c[f].passes.length,u);if(l<u)for(var d=l;d<u;d++)s.push(new Ao);else s.length=u}},{key:"renderState",get:function(){return this._renderStates[0]}},{key:"renderStates",get:function(){return this._renderStates}}]),r}(Io),yn=function(n){be(r,n);function r(e,t){var i;return i=n.call(this,e,t)||this,i._renderFace=es.Front,i._isTransparent=!1,i._blendMode=Ml.Normal,i.shaderData.setFloat(r._alphaCutoffProp,0),i}var a=r.prototype;return a.setIsTransparent=function(t,i){var o=this.renderStates;if(o.length<t)throw"Pass should less than pass count.";var s=o[t];i?(s.blendState.targetBlendState.enabled=!0,s.depthState.writeEnabled=!1,s.renderQueueType=ar.Transparent,this.shaderData.enableMacro(r._transparentMacro)):(s.blendState.targetBlendState.enabled=!1,s.depthState.writeEnabled=!0,s.renderQueueType=this.shaderData.getFloat(r._alphaCutoffProp)?ar.AlphaTest:ar.Opaque,this.shaderData.disableMacro(r._transparentMacro))},a.setBlendMode=function(t,i){var o=this.renderStates;if(o.length<t)throw"Pass should less than pass count.";var s=o[t].blendState,l=s.targetBlendState;switch(i){case Ml.Normal:l.sourceColorBlendFactor=jt.SourceAlpha,l.destinationColorBlendFactor=jt.OneMinusSourceAlpha,l.sourceAlphaBlendFactor=jt.One,l.destinationAlphaBlendFactor=jt.OneMinusSourceAlpha,l.colorBlendOperation=l.alphaBlendOperation=Mr.Add;break;case Ml.Additive:l.sourceColorBlendFactor=jt.SourceAlpha,l.destinationColorBlendFactor=jt.One,l.sourceAlphaBlendFactor=jt.One,l.destinationAlphaBlendFactor=jt.OneMinusSourceAlpha,l.colorBlendOperation=l.alphaBlendOperation=Mr.Add;break}},a.setRenderFace=function(t,i){var o=this.renderStates;if(o.length<t)throw"Pass should less than pass count.";switch(i){case es.Front:o[t].rasterState.cullMode=Fr.Back;break;case es.Back:o[t].rasterState.cullMode=Fr.Front;break;case es.Double:o[t].rasterState.cullMode=Fr.Off;break}},a.clone=function(){var t=new r(this._engine,this.shader);return this.cloneTo(t),t},a.cloneTo=function(t){n.prototype.cloneTo.call(this,t),t._renderFace=this._renderFace,t._isTransparent=this._isTransparent,t._blendMode=this._blendMode},Ie(r,[{key:"shader",get:function(){return this._shader},set:function(t){var i=this._getReferCount();if(i>0){var o;(o=this._shader)==null||o._addReferCount(-i),t._addReferCount(i)}this._shader=t;for(var s=this._renderStates,l=s.length,u=0,c=t.subShaders,f=0;f<c.length;f++)u=Math.max(c[f].passes.length,u);if(l<u)for(var d=l;d<u;d++)s.push(new Ao),this.setBlendMode(d,Ml.Normal);else s.length=u}},{key:"isTransparent",get:function(){return this._isTransparent},set:function(t){t!==this._isTransparent&&(this.setIsTransparent(0,t),this._isTransparent=t)}},{key:"blendMode",get:function(){return this._blendMode},set:function(t){t!==this._blendMode&&(this.setBlendMode(0,t),this._blendMode=t)}},{key:"alphaCutoff",get:function(){return this.shaderData.getFloat(r._alphaCutoffProp)},set:function(t){var i=this.shaderData;if(i.getFloat(r._alphaCutoffProp)!==t){t?i.enableMacro(r._alphaCutoffMacro):i.disableMacro(r._alphaCutoffMacro);for(var o=this.renderStates,s=0,l=o.length;s<l;s++){var u=o[s];t>0?u.renderQueueType=u.blendState.targetBlendState.enabled?ar.Transparent:ar.AlphaTest:u.renderQueueType=u.blendState.targetBlendState.enabled?ar.Transparent:ar.Opaque}i.setFloat(r._alphaCutoffProp,t)}}},{key:"renderFace",get:function(){return this._renderFace},set:function(t){t!==this._renderFace&&(this.setRenderFace(0,t),this._renderFace=t)}}]),r}(Qa);(function(){yn._baseTextureMacro=_t.getByName("MATERIAL_HAS_BASETEXTURE")})();(function(){yn._normalTextureMacro=_t.getByName("MATERIAL_HAS_NORMALTEXTURE")})();(function(){yn._emissiveTextureMacro=_t.getByName("MATERIAL_HAS_EMISSIVETEXTURE")})();(function(){yn._transparentMacro=_t.getByName("MATERIAL_IS_TRANSPARENT")})();(function(){yn._baseColorProp=X.getByName("material_BaseColor")})();(function(){yn._baseTextureProp=X.getByName("material_BaseTexture")})();(function(){yn._tilingOffsetProp=X.getByName("material_TilingOffset")})();(function(){yn._normalTextureProp=X.getByName("material_NormalTexture")})();(function(){yn._normalIntensityProp=X.getByName("material_NormalIntensity")})();(function(){yn._emissiveColorProp=X.getByName("material_EmissiveColor")})();(function(){yn._emissiveTextureProp=X.getByName("material_EmissiveTexture")})();(function(){yn._alphaCutoffProp=X.getByName("material_AlphaCutoff")})();(function(){yn._alphaCutoffMacro=_t.getByName("MATERIAL_IS_ALPHA_CUTOFF")})();var Dd=function(n){be(r,n);function r(e){var t;t=n.call(this,e,vt.find("blinn-phong"))||this;var i=t.shaderData;return i.enableMacro("MATERIAL_NEED_WORLD_POS"),i.enableMacro("MATERIAL_NEED_TILING_OFFSET"),i.setColor(r._baseColorProp,new Me(1,1,1,1)),i.setColor(r._specularColorProp,new Me(1,1,1,1)),i.setColor(r._emissiveColorProp,new Me(0,0,0,1)),i.setVector4(r._tilingOffsetProp,new pt(1,1,0,0)),i.setFloat(r._shininessProp,16),i.setFloat(r._normalIntensityProp,1),t}var a=r.prototype;return a.clone=function(){var t=new r(this._engine);return this.cloneTo(t),t},Ie(r,[{key:"baseColor",get:function(){return this.shaderData.getColor(r._baseColorProp)},set:function(t){var i=this.shaderData.getColor(r._baseColorProp);t!==i&&i.copyFrom(t)}},{key:"baseTexture",get:function(){return this.shaderData.getTexture(r._baseTextureProp)},set:function(t){this.shaderData.setTexture(r._baseTextureProp,t),t?this.shaderData.enableMacro(r._baseTextureMacro):this.shaderData.disableMacro(r._baseTextureMacro)}},{key:"specularColor",get:function(){return this.shaderData.getColor(r._specularColorProp)},set:function(t){var i=this.shaderData.getColor(r._specularColorProp);t!==i&&i.copyFrom(t)}},{key:"specularTexture",get:function(){return this.shaderData.getTexture(r._specularTextureProp)},set:function(t){this.shaderData.setTexture(r._specularTextureProp,t),t?this.shaderData.enableMacro("MATERIAL_HAS_SPECULAR_TEXTURE"):this.shaderData.disableMacro("MATERIAL_HAS_SPECULAR_TEXTURE")}},{key:"emissiveColor",get:function(){return this.shaderData.getColor(r._emissiveColorProp)},set:function(t){var i=this.shaderData.getColor(r._emissiveColorProp);t!==i&&i.copyFrom(t)}},{key:"emissiveTexture",get:function(){return this.shaderData.getTexture(r._emissiveTextureProp)},set:function(t){this.shaderData.setTexture(r._emissiveTextureProp,t),t?this.shaderData.enableMacro(r._emissiveTextureMacro):this.shaderData.disableMacro(r._emissiveTextureMacro)}},{key:"normalTexture",get:function(){return this.shaderData.getTexture(r._normalTextureProp)},set:function(t){this.shaderData.setTexture(r._normalTextureProp,t),t?this.shaderData.enableMacro(r._normalTextureMacro):this.shaderData.disableMacro(r._normalTextureMacro)}},{key:"normalIntensity",get:function(){return this.shaderData.getFloat(r._normalIntensityProp)},set:function(t){this.shaderData.setFloat(r._normalIntensityProp,t)}},{key:"shininess",get:function(){return this.shaderData.getFloat(r._shininessProp)},set:function(t){this.shaderData.setFloat(r._shininessProp,Math.max(t,1e-4))}},{key:"tilingOffset",get:function(){return this.shaderData.getVector4(r._tilingOffsetProp)},set:function(t){var i=this.shaderData.getVector4(r._tilingOffsetProp);t!==i&&i.copyFrom(t)}}]),r}(yn);(function(){Dd._specularColorProp=X.getByName("material_SpecularColor")})();(function(){Dd._shininessProp=X.getByName("material_Shininess")})();(function(){Dd._specularTextureProp=X.getByName("material_SpecularTexture")})();var Xs;(function(n){n[n.UV0=0]="UV0",n[n.UV1=1]="UV1",n[n.UV2=2]="UV2",n[n.UV3=3]="UV3",n[n.UV4=4]="UV4",n[n.UV5=5]="UV5",n[n.UV6=6]="UV6",n[n.UV7=7]="UV7"})(Xs||(Xs={}));var oo=function(n){be(r,n);function r(a,e){var t;t=n.call(this,a,e)||this;var i=t.shaderData;return i.enableMacro("MATERIAL_NEED_WORLD_POS"),i.enableMacro("MATERIAL_NEED_TILING_OFFSET"),i.setColor(r._baseColorProp,new Me(1,1,1,1)),i.setColor(r._emissiveColorProp,new Me(0,0,0,1)),i.setVector4(r._tilingOffsetProp,new pt(1,1,0,0)),i.setFloat(r._normalIntensityProp,1),i.setFloat(r._occlusionTextureIntensityProp,1),i.setFloat(r._occlusionTextureCoordProp,Xs.UV0),i.setFloat(r._clearCoatProp,0),i.setFloat(r._clearCoatRoughnessProp,0),t}return Ie(r,[{key:"baseColor",get:function(){return this.shaderData.getColor(r._baseColorProp)},set:function(e){var t=this.shaderData.getColor(r._baseColorProp);e!==t&&t.copyFrom(e)}},{key:"baseTexture",get:function(){return this.shaderData.getTexture(r._baseTextureProp)},set:function(e){this.shaderData.setTexture(r._baseTextureProp,e),e?this.shaderData.enableMacro(r._baseTextureMacro):this.shaderData.disableMacro(r._baseTextureMacro)}},{key:"normalTexture",get:function(){return this.shaderData.getTexture(r._normalTextureProp)},set:function(e){this.shaderData.setTexture(r._normalTextureProp,e),e?this.shaderData.enableMacro(r._normalTextureMacro):this.shaderData.disableMacro(r._normalTextureMacro)}},{key:"normalTextureIntensity",get:function(){return this.shaderData.getFloat(r._normalIntensityProp)},set:function(e){this.shaderData.setFloat(r._normalIntensityProp,e)}},{key:"emissiveColor",get:function(){return this.shaderData.getColor(r._emissiveColorProp)},set:function(e){var t=this.shaderData.getColor(r._emissiveColorProp);e!==t&&t.copyFrom(e)}},{key:"emissiveTexture",get:function(){return this.shaderData.getTexture(r._emissiveTextureProp)},set:function(e){this.shaderData.setTexture(r._emissiveTextureProp,e),e?this.shaderData.enableMacro(r._emissiveTextureMacro):this.shaderData.disableMacro(r._emissiveTextureMacro)}},{key:"occlusionTexture",get:function(){return this.shaderData.getTexture(r._occlusionTextureProp)},set:function(e){this.shaderData.setTexture(r._occlusionTextureProp,e),e?this.shaderData.enableMacro("MATERIAL_HAS_OCCLUSION_TEXTURE"):this.shaderData.disableMacro("MATERIAL_HAS_OCCLUSION_TEXTURE")}},{key:"occlusionTextureIntensity",get:function(){return this.shaderData.getFloat(r._occlusionTextureIntensityProp)},set:function(e){this.shaderData.setFloat(r._occlusionTextureIntensityProp,e)}},{key:"occlusionTextureCoord",get:function(){return this.shaderData.getFloat(r._occlusionTextureCoordProp)},set:function(e){e>Xs.UV1&&Pt.warn("Occlusion texture uv coordinate must be UV0 or UV1."),this.shaderData.setFloat(r._occlusionTextureCoordProp,e)}},{key:"tilingOffset",get:function(){return this.shaderData.getVector4(r._tilingOffsetProp)},set:function(e){var t=this.shaderData.getVector4(r._tilingOffsetProp);e!==t&&t.copyFrom(e)}},{key:"clearCoat",get:function(){return this.shaderData.getFloat(r._clearCoatProp)},set:function(e){!!this.shaderData.getFloat(r._clearCoatProp)!=!!e&&(e===0?this.shaderData.disableMacro("MATERIAL_ENABLE_CLEAR_COAT"):this.shaderData.enableMacro("MATERIAL_ENABLE_CLEAR_COAT")),this.shaderData.setFloat(r._clearCoatProp,e)}},{key:"clearCoatTexture",get:function(){return this.shaderData.getTexture(r._clearCoatTextureProp)},set:function(e){this.shaderData.setTexture(r._clearCoatTextureProp,e),e?this.shaderData.enableMacro("MATERIAL_HAS_CLEAR_COAT_TEXTURE"):this.shaderData.disableMacro("MATERIAL_HAS_CLEAR_COAT_TEXTURE")}},{key:"clearCoatRoughness",get:function(){return this.shaderData.getFloat(r._clearCoatRoughnessProp)},set:function(e){this.shaderData.setFloat(r._clearCoatRoughnessProp,e)}},{key:"clearCoatRoughnessTexture",get:function(){return this.shaderData.getTexture(r._clearCoatRoughnessTextureProp)},set:function(e){this.shaderData.setTexture(r._clearCoatRoughnessTextureProp,e),e?this.shaderData.enableMacro("MATERIAL_HAS_CLEAR_COAT_ROUGHNESS_TEXTURE"):this.shaderData.disableMacro("MATERIAL_HAS_CLEAR_COAT_ROUGHNESS_TEXTURE")}},{key:"clearCoatNormalTexture",get:function(){return this.shaderData.getTexture(r._clearCoatNormalTextureProp)},set:function(e){this.shaderData.setTexture(r._clearCoatNormalTextureProp,e),e?this.shaderData.enableMacro("MATERIAL_HAS_CLEAR_COAT_NORMAL_TEXTURE"):this.shaderData.disableMacro("MATERIAL_HAS_CLEAR_COAT_NORMAL_TEXTURE")}}]),r}(yn);(function(){oo._occlusionTextureIntensityProp=X.getByName("material_OcclusionIntensity")})();(function(){oo._occlusionTextureCoordProp=X.getByName("material_OcclusionTextureCoord")})();(function(){oo._occlusionTextureProp=X.getByName("material_OcclusionTexture")})();(function(){oo._clearCoatProp=X.getByName("material_ClearCoat")})();(function(){oo._clearCoatTextureProp=X.getByName("material_ClearCoatTexture")})();(function(){oo._clearCoatRoughnessProp=X.getByName("material_ClearCoatRoughness")})();(function(){oo._clearCoatRoughnessTextureProp=X.getByName("material_ClearCoatRoughnessTexture")})();(function(){oo._clearCoatNormalTextureProp=X.getByName("material_ClearCoatNormalTexture")})();var Ji=function(n){be(r,n);function r(e){var t;t=n.call(this,e,vt.find("pbr"))||this,t._anisotropyRotation=0;var i=t.shaderData;return i.setFloat(r._metallicProp,1),i.setFloat(r._roughnessProp,1),i.setFloat(r._iorProp,1.5),i.setVector3(r._anisotropyInfoProp,new z(1,0,0)),t}var a=r.prototype;return a.clone=function(){var t=new r(this._engine);return this.cloneTo(t),t},Ie(r,[{key:"ior",get:function(){return this.shaderData.getFloat(r._iorProp)},set:function(t){this.shaderData.setFloat(r._iorProp,Math.max(t,0))}},{key:"metallic",get:function(){return this.shaderData.getFloat(r._metallicProp)},set:function(t){this.shaderData.setFloat(r._metallicProp,t)}},{key:"roughness",get:function(){return this.shaderData.getFloat(r._roughnessProp)},set:function(t){this.shaderData.setFloat(r._roughnessProp,t)}},{key:"roughnessMetallicTexture",get:function(){return this.shaderData.getTexture(r._roughnessMetallicTextureProp)},set:function(t){this.shaderData.setTexture(r._roughnessMetallicTextureProp,t),t?this.shaderData.enableMacro("MATERIAL_HAS_ROUGHNESS_METALLIC_TEXTURE"):this.shaderData.disableMacro("MATERIAL_HAS_ROUGHNESS_METALLIC_TEXTURE")}},{key:"anisotropy",get:function(){return this.shaderData.getVector3(r._anisotropyInfoProp).z},set:function(t){var i=this.shaderData.getVector3(r._anisotropyInfoProp);!!i.z!=!!t&&(t===0?this.shaderData.disableMacro("MATERIAL_ENABLE_ANISOTROPY"):this.shaderData.enableMacro("MATERIAL_ENABLE_ANISOTROPY")),i.z=t}},{key:"anisotropyRotation",get:function(){return this._anisotropyRotation},set:function(t){if(this._anisotropyRotation!==t){this._anisotropyRotation=t;var i=this.shaderData.getVector3(r._anisotropyInfoProp),o=ve.degreeToRadFactor*t;i.x=Math.cos(o),i.y=Math.sin(o)}}},{key:"anisotropyTexture",get:function(){return this.shaderData.getTexture(r._anisotropyTextureProp)},set:function(t){this.shaderData.setTexture(r._anisotropyTextureProp,t),t?this.shaderData.enableMacro("MATERIAL_HAS_ANISOTROPY_TEXTURE"):this.shaderData.disableMacro("MATERIAL_HAS_ANISOTROPY_TEXTURE")}}]),r}(oo);(function(){Ji._metallicProp=X.getByName("material_Metal")})();(function(){Ji._roughnessProp=X.getByName("material_Roughness")})();(function(){Ji._roughnessMetallicTextureProp=X.getByName("material_RoughnessMetallicTexture")})();(function(){Ji._iorProp=X.getByName("material_IOR")})();(function(){Ji._anisotropyInfoProp=X.getByName("material_AnisotropyInfo")})();(function(){Ji._anisotropyTextureProp=X.getByName("material_AnisotropyTexture")})();var ql=function(n){be(r,n);function r(e){var t;return t=n.call(this,e,vt.find("pbr-specular"))||this,t.shaderData.setColor(r._specularColorProp,new Me(1,1,1,1)),t.shaderData.setFloat(r._glossinessProp,1),t}var a=r.prototype;return a.clone=function(){var t=new r(this._engine);return this.cloneTo(t),t},Ie(r,[{key:"specularColor",get:function(){return this.shaderData.getColor(r._specularColorProp)},set:function(t){var i=this.shaderData.getColor(r._specularColorProp);t!==i&&i.copyFrom(t)}},{key:"glossiness",get:function(){return this.shaderData.getFloat(r._glossinessProp)},set:function(t){this.shaderData.setFloat(r._glossinessProp,t)}},{key:"specularGlossinessTexture",get:function(){return this.shaderData.getTexture(r._specularGlossinessTextureProp)},set:function(t){this.shaderData.setTexture(r._specularGlossinessTextureProp,t),t?this.shaderData.enableMacro(r._specularGlossinessTextureMacro):this.shaderData.disableMacro(r._specularGlossinessTextureMacro)}}]),r}(oo);(function(){ql._specularColorProp=X.getByName("material_PBRSpecularColor")})();(function(){ql._glossinessProp=X.getByName("material_Glossiness")})();(function(){ql._specularGlossinessTextureProp=X.getByName("material_SpecularGlossinessTexture")})();(function(){ql._specularGlossinessTextureMacro=_t.getByName("MATERIAL_HAS_SPECULAR_GLOSSINESS_TEXTURE")})();var SP=function(n){be(r,n);function r(e){var t;t=n.call(this,e,vt.find("unlit"))||this;var i=t.shaderData;return i.enableMacro("MATERIAL_OMIT_NORMAL"),i.enableMacro("MATERIAL_NEED_TILING_OFFSET"),i.setColor(r._baseColorProp,new Me(1,1,1,1)),i.setVector4(r._tilingOffsetProp,new pt(1,1,0,0)),t}var a=r.prototype;return a.clone=function(){var t=new r(this._engine);return this.cloneTo(t),t},Ie(r,[{key:"baseColor",get:function(){return this.shaderData.getColor(r._baseColorProp)},set:function(t){var i=this.shaderData.getColor(r._baseColorProp);t!==i&&i.copyFrom(t)}},{key:"baseTexture",get:function(){return this.shaderData.getTexture(r._baseTextureProp)},set:function(t){this.shaderData.setTexture(r._baseTextureProp,t),t?this.shaderData.enableMacro(r._baseTextureMacro):this.shaderData.disableMacro(r._baseTextureMacro)}},{key:"tilingOffset",get:function(){return this.shaderData.getVector4(r._tilingOffsetProp)},set:function(t){var i=this.shaderData.getVector4(r._tilingOffsetProp);t!==i&&i.copyFrom(t)}}]),r}(yn),r8=function(){function n(a){var e=new Float32Array([-1,-1,0,1,1,-1,1,1,-1,1,0,0,1,1,1,0]),t=new Float32Array([1,-1,1,0,-1,-1,0,0,1,1,1,1,-1,1,0,1]),i=new Qa(a,vt.find("blit"));i._addReferCount(1),i.renderState.depthState.enabled=!1,i.renderState.depthState.writeEnabled=!1,this.blitMesh=this._createBlitMesh(a,e),this.flipYBlitMesh=this._createBlitMesh(a,t),this.blitMaterial=i}var r=n.prototype;return r._createBlitMesh=function(e,t){var i=new Kn(e);return i._addReferCount(1),i.setVertexElements([new Kt("POSITION_UV",0,rt.Vector4,0)]),i.setVertexBufferBinding(new ha(e,kr.VertexBuffer,t,Dn.Static),16),i.addSubMesh(0,4,ro.TriangleStrip),i},n}(),cs;(function(n){n[n.Layer0=1]="Layer0",n[n.Layer1=2]="Layer1",n[n.Layer2=4]="Layer2",n[n.Layer3=8]="Layer3",n[n.Layer4=16]="Layer4",n[n.Layer5=32]="Layer5",n[n.Layer6=64]="Layer6",n[n.Layer7=128]="Layer7",n[n.Layer8=256]="Layer8",n[n.Layer9=512]="Layer9",n[n.Layer10=1024]="Layer10",n[n.Layer11=2048]="Layer11",n[n.Layer12=4096]="Layer12",n[n.Layer13=8192]="Layer13",n[n.Layer14=16384]="Layer14",n[n.Layer15=32768]="Layer15",n[n.Layer16=65536]="Layer16",n[n.Layer17=131072]="Layer17",n[n.Layer18=262144]="Layer18",n[n.Layer19=524288]="Layer19",n[n.Layer20=1048576]="Layer20",n[n.Layer21=2097152]="Layer21",n[n.Layer22=4194304]="Layer22",n[n.Layer23=8388608]="Layer23",n[n.Layer24=16777216]="Layer24",n[n.Layer25=33554432]="Layer25",n[n.Layer26=67108864]="Layer26",n[n.Layer27=134217728]="Layer27",n[n.Layer28=268435456]="Layer28",n[n.Layer29=536870912]="Layer29",n[n.Layer30=1073741824]="Layer30",n[n.Layer31=2147483648]="Layer31",n[n.Everything=4294967295]="Everything",n[n.Nothing=0]="Nothing"})(cs||(cs={}));var a8=function(){function n(){}return n.cloneComponent=function(a,e,t,i){var o=Mi.getCloneMode(a.constructor);for(var s in a)Mi.cloneProperty(a,e,s,o[s]);a._cloneTo&&a._cloneTo(e,t,i)},n}(),yo=function(n){be(r,n);function r(e,t){var i;return i=n.call(this,e)||this,i.layer=cs.Layer0,i._isActiveInHierarchy=!1,i._isActiveInScene=!1,i._components=[],i._scripts=new Nn,i._children=[],i._isRoot=!1,i._isActive=!0,i._siblingIndex=-1,i._isTemplate=!1,i._parent=null,i._invModelMatrix=new Ge,i.name=t,i.transform=i.addComponent(Vt),i._inverseWorldMatFlag=i.transform.registerWorldChangeFlag(),i}var a=r.prototype;return a.addComponent=function(t){sc._addCheck(this,t);var i=new t(this);return this._components.push(i),i._setActive(!0,Ot.All),i},a.getComponent=function(t){for(var i=this._components,o=0,s=i.length;o<s;o++){var l=i[o];if(fr(l,t))return l}return null},a.getComponents=function(t,i){i.length=0;for(var o=this._components,s=0,l=o.length;s<l;s++){var u=o[s];fr(u,t)&&i.push(u)}return i},a.getComponentsIncludeChildren=function(t,i){return i.length=0,this._getComponentsInChildren(t,i),i},a.addChild=function(t,i){var o;if(typeof t=="number"?o=t:(o=void 0,i=t),i._isRoot){i._scene._removeFromEntityList(i),i._isRoot=!1,this._addToChildrenList(o,i),i._parent=this;var s=i._scene,l=this._scene,u=Ot.None;this._isActiveInHierarchy||i._isActiveInHierarchy&&(u|=Ot.Hierarchy),i._isActiveInScene&&(this._isActiveInScene?s!==l&&(u|=Ot.Scene):u|=Ot.Scene),u&&i._processInActive(u),i._scene!==l&&r._traverseSetOwnerScene(i,l);var c=Ot.None;i._isActive&&(this._isActiveInHierarchy&&!i._isActiveInHierarchy&&(c|=Ot.Hierarchy),this._isActiveInScene&&(!i._isActiveInScene||s!==l)&&(c|=Ot.Scene)),c&&i._processActive(c),i._setTransformDirty()}else i._setParent(this,o)},a.removeChild=function(t){t._setParent(null)},a.getChild=function(t){return this._children[t]},a.findByName=function(t){if(t===this.name)return this;for(var i=this._children,o=0,s=i.length;o<s;o++){var l=i[o].findByName(t);if(l)return l}return null},a.findByPath=function(t){for(var i=t.split("/"),o=this,s=0,l=i.length;s<l;++s){var u=i[s];if(u&&(o=r._findChildByName(o,u),!o))return null}return o},a.createChild=function(t){var i=new r(this.engine,t);return i.layer=this.layer,i.parent=this,i},a.clearChildren=function(){for(var t=this._children,i=t.length-1;i>=0;i--){var o=t[i];o._parent=null;var s=Ot.None;o._isActiveInHierarchy&&(s|=Ot.Hierarchy),o._isActiveInScene&&(s|=Ot.Scene),s&&o._processInActive(s),r._traverseSetOwnerScene(o,null)}t.length=0},a.clone=function(){var t=this._createCloneEntity(this);return this._parseCloneEntity(this,t,this,t),t},a._markAsTemplate=function(t){this._isTemplate=!0,this._templateResource=t},a._createCloneEntity=function(t){var i=new r(t._engine,t.name),o=this._templateResource;o&&(i._templateResource=o,o._addReferCount(1)),i.layer=t.layer,i._isActive=t._isActive;var s=i.transform,l=t.transform;s.position=l.position,s.rotation=l.rotation,s.scale=l.scale;for(var u=t._children,c=0,f=t._children.length;c<f;c++)i.addChild(this._createCloneEntity(u[c]));return i},a._parseCloneEntity=function(t,i,o,s){for(var l=t._children,u=i._children,c=0,f=l.length;c<f;c++)this._parseCloneEntity(l[c],u[c],o,s);for(var d=t._components,h=0,_=d.length;h<_;h++){var p=d[h];if(!fr(p,Vt)){var v=i.addComponent(p.constructor);a8.cloneComponent(p,v,o,s)}}},a.destroy=function(){if(!this._destroyed){n.prototype.destroy.call(this),this._templateResource&&(this._isTemplate||this._templateResource._addReferCount(-1),this._templateResource=null);for(var t=this._components,i=t.length-1;i>=0;i--)t[i].destroy();this._components.length=0;for(var o=this._children;o.length>0;)o[0].destroy();this._isRoot?this._scene.removeRootEntity(this):this._setParent(null),this.isActive=!1}},a._removeComponent=function(t){sc._removeCheck(this,t.constructor);var i=this._components;i.splice(i.indexOf(t),1)},a._addScript=function(t){t._entityScriptsIndex=this._scripts.length,this._scripts.add(t)},a._removeScript=function(t){var i=this._scripts.deleteByIndex(t._entityScriptsIndex);i&&(i._entityScriptsIndex=t._entityScriptsIndex),t._entityScriptsIndex=-1},a._removeFromParent=function(){var t=this._parent;if(t!=null){var i=t._children,o=this._siblingIndex;i.splice(o,1);for(var s=i.length;o<s;o++)i[o]._siblingIndex--;this._parent=null,this._siblingIndex=-1}},a._processActive=function(t){if(this._activeChangedComponents)throw"Note: can't set the 'main inActive entity' active in hierarchy, if the operation is in main inActive entity or it's children script's onDisable Event.";this._activeChangedComponents=this._scene._componentsManager.getActiveChangedTempList(),this._setActiveInHierarchy(this._activeChangedComponents,t),this._setActiveComponents(!0,t)},a._processInActive=function(t){if(this._activeChangedComponents)throw"Note: can't set the 'main active entity' inActive in hierarchy, if the operation is in main active entity or it's children script's onEnable Event.";this._activeChangedComponents=this._scene._componentsManager.getActiveChangedTempList(),this._setInActiveInHierarchy(this._activeChangedComponents,t),this._setActiveComponents(!1,t)},a._addToChildrenList=function(t,i){var o=this._children,s=o.length;if(t===void 0)i._siblingIndex=s,o.push(i);else{if(t<0||t>s)throw"The index "+t+" is out of child list bounds "+s;i._siblingIndex=t,o.splice(t,0,i);for(var l=t+1,u=s+1;l<u;l++)o[l]._siblingIndex++}},a._setParent=function(t,i){var o=this._parent;if(t!==o){if(this._removeFromParent(),this._parent=t,t){t._addToChildrenList(i,this);var s=this._scene,l=t._scene,u=Ot.None;t._isActiveInHierarchy||this._isActiveInHierarchy&&(u|=Ot.Hierarchy),t._isActiveInScene?this._isActiveInScene&&s!==l&&(u|=Ot.Scene):this._isActiveInScene&&(u|=Ot.Scene),u&&this._processInActive(u),s!==l&&r._traverseSetOwnerScene(this,l);var c=Ot.None;this._isActive&&(t._isActiveInHierarchy&&!this._isActiveInHierarchy&&(c|=Ot.Hierarchy),t._isActiveInScene&&(!this._isActiveInScene||s!==l)&&(c|=Ot.Scene)),c&&this._processActive(c)}else{var f=Ot.None;this._isActiveInHierarchy&&(f|=Ot.Hierarchy),this._isActiveInScene&&(f|=Ot.Scene),f&&this._processInActive(f),o&&r._traverseSetOwnerScene(this,null)}this._setTransformDirty()}},a._getComponentsInChildren=function(t,i){for(var o=this._components.length-1;o>=0;o--){var s=this._components[o];fr(s,t)&&i.push(s)}for(var l=this._children.length-1;l>=0;l--)this._children[l]._getComponentsInChildren(t,i)},a._setActiveComponents=function(t,i){for(var o=this._activeChangedComponents,s=0,l=o.length;s<l;++s)o[s]._setActive(t,i);this._scene._componentsManager.putActiveChangedTempList(o),this._activeChangedComponents=null},a._setActiveInHierarchy=function(t,i){i&Ot.Hierarchy&&(this._isActiveInHierarchy=!0),i&Ot.Scene&&(this._isActiveInScene=!0);for(var o=this._components,s=0,l=o.length;s<l;s++){var u=o[s];(u.enabled||!u._awoken)&&t.push(u)}for(var c=this._children,f=0,d=c.length;f<d;f++){var h=c[f];h.isActive&&h._setActiveInHierarchy(t,i)}},a._setInActiveInHierarchy=function(t,i){i&Ot.Hierarchy&&(this._isActiveInHierarchy=!1),i&Ot.Scene&&(this._isActiveInScene=!1);for(var o=this._components,s=0,l=o.length;s<l;s++){var u=o[s];u.enabled&&t.push(u)}for(var c=this._children,f=0,d=c.length;f<d;f++){var h=c[f];h.isActive&&h._setInActiveInHierarchy(t,i)}},a._setTransformDirty=function(){if(this.transform)this.transform._parentChange();else for(var t=0,i=this._children.length;t<i;t++)this._children[t]._setTransformDirty()},a._setSiblingIndex=function(t,i){if(i=Math.min(i,t.length-1),i<0)throw"Sibling index "+i+" should large than 0";if(this._siblingIndex!==i){var o=this._siblingIndex;if(i<o)for(var s=o;s>=i;s--){var l=s==i?this:t[s-1];t[s]=l,l._siblingIndex=s}else for(var u=o;u<=i;u++){var c=u==i?this:t[u+1];t[u]=c,c._siblingIndex=u}}},a.getInvModelMatrix=function(){return this._inverseWorldMatFlag.flag&&(Ge.invert(this.transform.worldMatrix,this._invModelMatrix),this._inverseWorldMatFlag.flag=!1),this._invModelMatrix},r._findChildByName=function(t,i){for(var o=t._children,s=o.length-1;s>=0;s--){var l=o[s];if(l.name===i)return l}return null},r._traverseSetOwnerScene=function(t,i){t._scene=i;for(var o=t._children,s=o.length-1;s>=0;s--)this._traverseSetOwnerScene(o[s],i)},Ie(r,[{key:"isActive",get:function(){return this._isActive},set:function(t){if(t!==this._isActive)if(this._isActive=t,t){var i=this._parent,o=Ot.None;if(this._isRoot&&this._scene._isActiveInEngine)o|=Ot.All;else{var s,l;(s=i)!=null&&s._isActiveInHierarchy&&(o|=Ot.Hierarchy),(l=i)!=null&&l._isActiveInScene&&(o|=Ot.Scene)}o&&this._processActive(o)}else{var u=Ot.None;this._isActiveInHierarchy&&(u|=Ot.Hierarchy),this._isActiveInScene&&(u|=Ot.Scene),u&&this._processInActive(u)}}},{key:"isActiveInHierarchy",get:function(){return this._isActiveInHierarchy}},{key:"parent",get:function(){return this._parent},set:function(t){this._setParent(t)}},{key:"children",get:function(){return this._children}},{key:"childCount",get:function(){return this._children.length}},{key:"scene",get:function(){return this._scene}},{key:"siblingIndex",get:function(){return this._siblingIndex},set:function(t){if(this._siblingIndex===-1)throw"The entity "+this.name+" is not in the hierarchy";this._setSiblingIndex(this._isRoot?this._scene._rootEntities:this._parent._children,t)}}]),r}(Oo),Oa=function(){function n(){this._projectionParams=new pt,this.flipProjection=!1}var r=n.prototype;return r.applyVirtualCamera=function(e,t){this.virtualCamera=e,this.flipProjection=t;var i=this.camera.shaderData,o=e.viewMatrix,s=e.projectionMatrix,l=e.viewProjectionMatrix;t&&(Ge.multiply(n._flipYMatrix,s,n._flipYProjectionMatrix),Ge.multiply(n._flipYProjectionMatrix,o,n._flipYViewProjectionMatrix),s=n._flipYProjectionMatrix,l=n._flipYViewProjectionMatrix),this.viewMatrix=o,this.projectionMatrix=s,this.viewProjectionMatrix=l,i.setMatrix(n._viewMatrixProperty,o),i.setMatrix(n._projectionMatrixProperty,s),i.setMatrix(n.vpMatrixProperty,l);var u=this._projectionParams;u.set(t?-1:1,e.nearClipPlane,e.farClipPlane,0),i.setVector4(n._cameraProjectionProperty,u)},r.garbageCollection=function(){this.camera=null},n}();(function(){Oa.vpMatrixProperty=X.getByName("camera_VPMat")})();(function(){Oa.pipelineStageKey=is.getByName("pipelineStage")})();(function(){Oa._flipYMatrix=new Ge(1,0,0,0,0,-1)})();(function(){Oa._cameraProjectionProperty=X.getByName("camera_ProjectionParams")})();(function(){Oa._viewMatrixProperty=X.getByName("camera_ViewMat")})();(function(){Oa._projectionMatrixProperty=X.getByName("camera_ProjMat")})();(function(){Oa._flipYProjectionMatrix=new Ge})();(function(){Oa._flipYViewProjectionMatrix=new Ge})();var f_=function(){function n(){}var r=n.prototype;return r.setX=function(e,t,i,o){this.component=e,this.material=t,this.primitive=i,this.subPrimitive=o},r.dispose=function(){this.component=null,this.material=null,this.primitive=null,this.subPrimitive=null},n}(),i8=function(){function n(){}var r=n.prototype;return r.set=function(e,t){this.data=e,this.shaderPasses=t},r.dispose=function(){this.data=this.shaderPasses=null},n}(),o8=function(n){be(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.createVertexElements=function(t){return t[0]=new Kt("POSITION",0,rt.Vector3,0),t[1]=new Kt("TEXCOORD_0",12,rt.Vector2,0),20},a.canBatch=function(t,i){var o=t.data,s=i.data;if(o.isAdd!==s.isAdd)return!1;var l=o.component.shaderData,u=s.component.shaderData,c=ea._textureProperty,f=ea._alphaCutoffProperty;return l.getTexture(c)===u.getTexture(c)&&l.getTexture(f)===u.getTexture(f)},a.updateVertices=function(t,i,o){for(var s=t.verticesData,l=s.positions,u=s.uvs,c=s.vertexCount,f=0;f<c;f++){var d=l[f],h=u[f];i[o++]=d.x,i[o++]=d.y,i[o++]=d.z,i[o++]=h.x,i[o++]=h.y}return o},a.drawBatches=function(t){for(var i=this,o=i._engine,s=i._batchedQueue,l=this._meshes[this._flushId],u=l.subMeshes,c=l._primitive,f=t.scene.shaderData,d=t.shaderData,h=0,_=u.length;h<_;h++){var p=u[h],v=s[h],y=v.data;if(!p||!v)return;var m=y.component,g=y.material,x=vt._compileMacros;Ba.unionCollection(m._globalShaderMacro,g.shaderData._macroCollection,x);var b=g.renderState.stencilState,S=y.isAdd?Tn.IncrementSaturate:Tn.DecrementSaturate;b.passOperationFront=S,b.passOperationBack=S;var C=g.shader.subShaders[0].passes[0],E=C._getShaderProgram(o,x);if(!E.isValid)return;E.bind(),E.groupingOtherUniformBlock(),E.uploadAll(E.sceneUniformBlock,f),E.uploadAll(E.cameraUniformBlock,d),E.uploadAll(E.rendererUniformBlock,m.shaderData),E.uploadAll(E.materialUniformBlock,g.shaderData),(C._renderState||g.renderState)._apply(o,!1,C._renderStateDataMap,g.shaderData),o._hardwareRenderer.drawPrimitive(c,p,E)}},r}(Yi),s8=function(){function n(a){this._preMaskLayer=0,this._batcher=new o8(a)}var r=n.prototype;return r.clear=function(){this._preMaskLayer=0,this._batcher.clear()},r.preRender=function(e,t){t.maskInteraction!==ur.None&&(this._batcher.clear(),this._processMasksDiff(e,t),this._batcher.flush(e))},r.postRender=function(e){e.maskInteraction!==ur.None&&(this._preMaskLayer=e.maskLayer)},r.destroy=function(){this._batcher.destroy(),this._batcher=null},r._processMasksDiff=function(e,t){var i=this._preMaskLayer,o=t.maskLayer;if(i!==o)for(var s=e._renderPipeline._allSpriteMasks,l=i&o,u=o&~i,c=i&~o,f=s._elements,d=0,h=s.length;d<h;d++){var _=f[d],p=_.influenceLayers;if(!(p&l)){if(p&u){var v=_._maskElement;v.data.isAdd=!0,this._batcher.drawElement(v,e);continue}if(p&c){var y=_._maskElement;y.data.isAdd=!1,this._batcher.drawElement(y,e)}}}},n}(),l8=function(n){be(r,n);function r(){var e;return e=n.call(this)||this,e.isAdd=!0,e.multiRenderData=!1,e}var a=r.prototype;return a.set=function(t,i,o){this.component=t,this.material=i,this.verticesData=o},a.dispose=function(){this.component=this.material=this.verticesData=null},r}(f_),u8=function(n){be(r,n);function r(){var e;return e=n.call(this)||this,e.multiRenderData=!1,e}var a=r.prototype;return a.set=function(t,i,o,s,l){l===void 0&&(l=0),this.component=t,this.material=i,this.verticesData=o,this.texture=s,this.dataIndex=l},a.dispose=function(){this.component=this.material=this.verticesData=this.texture=null},r}(f_),c8=function(n){be(r,n);function r(){var e;return e=n.call(this)||this,e.charsData=[],e.multiRenderData=!0,e}var a=r.prototype;return a.dispose=function(){this.component=this.material=null,this.charsData.length=0},r}(f_),vn;(function(n){n.Text="Text",n.JSON="JSON",n.Buffer="Buffer",n.Texture2D="Texture2D",n.TextureCube="TextureCube",n.Material="Material",n.Mesh="Mesh",n.AnimationClip="AnimationClip",n.AnimatorController="AnimatorController",n.GLTF="GLTF",n.KTX="KTX",n.KTXCube="KTXCube",n.KTX2="KTX2",n.Sprite="Sprite",n.PrimitiveMesh="PrimitiveMesh",n.SpriteAtlas="SpriteAtlas",n.Env="Environment",n.Scene="Scene",n.HDR="HDR",n.Font="Font",n.SourceFont="SourceFont",n.Project="project"})(vn||(vn={}));var f8=function(){function n(){this._array=[],this._loopArray=[],this._loopArrayDirty=!1}var r=n.prototype;return r.push=function(e){this._array.push(e),this._loopArrayDirty=!0},r.add=function(e,t){this._array.splice(e,0,t),this._loopArrayDirty=!0},r.removeByIndex=function(e){this._array.splice(e,1),this._loopArrayDirty=!0},r.indexOf=function(e){return this._array.indexOf(e)},r.getArray=function(){return this._array},r.getLoopArray=function(){var e=this._loopArray;if(this._loopArrayDirty){var t=this._array,i=t.length;e.length=i;for(var o=0;o<i;o++)e[o]=t[o];this._loopArrayDirty=!1}return e},Ie(n,[{key:"length",get:function(){return this._array.length}}]),n}(),bP=function(){function n(a){this.engine=a,this._allCreatedScenes=[],this._scenes=new f8}var r=n.prototype;return r.addScene=function(e,t){var i=this._scenes,o;if(typeof e=="number"){if(e<0||e>i.length)throw"The index is out of range.";o=e}else o=i.length,t=e;if(t.engine!==this.engine)throw"The scene is not belong to this engine.";if(t._sceneManager){var s=i.indexOf(t);s!==o&&(i.removeByIndex(s),i.add(o,t))}else t._sceneManager=this,i.add(o,t),t.isActive&&t._processActive(!0)},r.removeScene=function(e){var t=this._scenes,i=t.indexOf(e);if(i!==-1){var o=t.getArray()[i];t.removeByIndex(i),e._sceneManager=null,o.isActive&&o._processActive(!1)}},r.loadScene=function(e,t){t===void 0&&(t=!0);var i=this,o=this.engine.resourceManager.load({url:e,type:vn.Scene});return o.then(function(s){if(t)for(var l=i._scenes.getArray(),u=0,c=l.length;u<c;u++)l[u].destroy();i.addScene(s)}),o},r.mergeScenes=function(e,t){for(var i=e.rootEntities;i.length>0;)t.addRootEntity(i[0])},r._destroyAllScene=function(){for(var e=this._allCreatedScenes;e.length>0;)e[0].destroy()},Ie(n,[{key:"scenes",get:function(){return this._scenes.getArray()}},{key:"activeScene",get:function(){return this._scenes.getArray()[0]},set:function(e){var t=this.scenes[0];t&&this.removeScene(t),e&&this.addScene(0,e)}}]),n}(),sn=function(){function n(a){var e=this;this._state="pending",this._onTaskCompleteCallbacks=[],this._onTaskDetailCallbacks=[],this._promise=new Promise(function(t,i){e._reject=i;var o=function(f){e._state==="pending"&&(t(f),e._state="fulfilled",e._onTaskCompleteCallbacks=void 0,e._onTaskDetailCallbacks=void 0)},s=function(f){e._state==="pending"&&(i(f),e._state="rejected",e._onTaskCompleteCallbacks=void 0,e._onTaskDetailCallbacks=void 0)},l=function(f){e._state==="pending"&&(e._onCancelHandler=f)},u=function(f,d){if(e._state==="pending"){var h=e._taskCompleteProgress||(e._taskCompleteProgress={loaded:f,total:d});h.loaded=f,h.total=d,e._onTaskCompleteCallbacks.forEach(function(_){return _(f,d)})}},c=function(f,d,h){if(e._state==="pending"){var _,p;e._taskDetailProgress||(e._taskDetailProgress={});var v=(_=e._taskDetailProgress)[p=f]||(_[p]={loaded:d,total:h});v.loaded=d,v.total=h,e._onTaskDetailCallbacks.forEach(function(y){return y(f,d,h)})}};a(o,s,u,c,l)})}var r=n.prototype;return r.onProgress=function(e,t){var i=this._taskCompleteProgress,o=this._taskDetailProgress;if(i&&e(i.loaded,i.total),o)for(var s in o){var l=o[s],u=l.loaded,c=l.total;t(s,u,c)}return this._state==="pending"&&(e&&this._onTaskCompleteCallbacks.push(e),t&&this._onTaskDetailCallbacks.push(t)),this},r.then=function(e,t){var i=this;return new n(function(o,s){i._promise.then(e,t).then(o).catch(s)})},r.catch=function(e){var t=this;return new n(function(i,o){t._promise.catch(e).then(i).catch(o)})},r.finally=function(e){return this._promise.finally(e)},r.cancel=function(){if(this._state==="pending")return this._state="canceled",this._reject("canceled"),this._onCancelHandler&&this._onCancelHandler(),this},n.all=function(e){return new n(function(t,i,o){var s=function(_,p){f++,c[_]=p,o(f,u),f===u&&t(c)},l=function(_,p){fr(_,Promise)||fr(_,n)?_.then(function(v){s(p,v)},i):Promise.resolve().then(function(){s(p,_)})},u=e.length,c=new Array(u),f=0;if(u===0)return t(c);for(var d=0;d<u;d++)l(e[d],d)})},Ie(n,[{key:Symbol.toStringTag,get:function(){return"AssetPromise"}}]),n}(),Jb;(function(n){n.Pending="pending",n.Fulfilled="fulfilled",n.Rejected="rejected",n.Canceled="canceled"})(Jb||(Jb={}));var cc=function(){function n(a){this.engine=a,this.retryCount=1,this.retryInterval=0,this.timeout=1/0,this.baseUrl=null,this._loadingPromises={},this._assetPool=Object.create(null),this._assetUrlPool=Object.create(null),this._referResourcePool=Object.create(null),this._graphicResourcePool=Object.create(null),this._contentRestorerPool=Object.create(null),this._subAssetPromiseCallbacks={},this._objectPool=Object.create(null),this._editorResourceConfig=Object.create(null),this._virtualPathMap=Object.create(null)}var r=n.prototype;return r.load=function(e){var t=this;if(!Array.isArray(e))return this._loadSingleItem(e);var i=e.map(function(o){return t._loadSingleItem(o)});return sn.all(i)},r.getFromCache=function(e){var t;return(t=this._assetUrlPool[e])!=null?t:null},r.findResourcesByType=function(e){var t=new Array,i=this._referResourcePool;for(var o in i){var s=i[o];fr(s,e)&&t.push(s)}return t},r.getAssetPath=function(e){return this._assetPool[e]},r.cancelNotLoaded=function(e){var t=this;if(!e)Mn.objectValues(this._loadingPromises).forEach(function(o){o.cancel()});else if(typeof e=="string"){var i;(i=this._loadingPromises[e])==null||i.cancel()}else e.forEach(function(o){var s;(s=t._loadingPromises[o])==null||s.cancel()})},r.gc=function(){this._gc(!1),this.engine._pendingGC()},r.addContentRestorer=function(e){this._contentRestorerPool[e.resource.instanceId]=e},r._onSubAssetSuccess=function(e,t){var i;(i=this._subAssetPromiseCallbacks[e])==null||i.resolve(t),delete this._subAssetPromiseCallbacks[e]},r._onSubAssetFail=function(e,t){var i;(i=this._subAssetPromiseCallbacks[e])==null||i.reject(t),delete this._subAssetPromiseCallbacks[e]},r._addAsset=function(e,t){this._assetPool[t.instanceId]=e,this._assetUrlPool[e]=t},r._deleteAsset=function(e){var t=e.instanceId,i=this._assetPool[t];i&&(delete this._assetPool[t],delete this._assetUrlPool[i])},r._addReferResource=function(e){this._referResourcePool[e.instanceId]=e},r._deleteReferResource=function(e){delete this._referResourcePool[e.instanceId]},r._addGraphicResource=function(e){this._graphicResourcePool[e.instanceId]=e},r._deleteGraphicResource=function(e){delete this._graphicResourcePool[e.instanceId]},r._deleteContentRestorer=function(e){delete this._contentRestorerPool[e.instanceId]},r._restoreGraphicResources=function(){var e=this._graphicResourcePool;for(var t in e)e[t]._rebuild()},r._lostGraphicResources=function(){var e=this._graphicResourcePool;for(var t in e)e[t]._isContentLost=!0},r._restoreResourcesContent=function(){var e=this._contentRestorerPool,t=new Array;for(var i in e){var o=e[i],s=o.restoreContent();s&&t.push(s)}return Promise.all(t)},r._destroy=function(){this.cancelNotLoaded(),this._gc(!0),this._assetPool=null,this._assetUrlPool=null,this._referResourcePool=null,this._graphicResourcePool=null,this._contentRestorerPool=null,this._loadingPromises=null},r._assignDefaultOptions=function(e){var t;if(e.type=(t=e.type)!=null?t:n._getTypeByUrl(e.url),e.type===void 0)throw"asset type should be specified: "+e.url;var i;e.retryCount=(i=e.retryCount)!=null?i:this.retryCount;var o;e.timeout=(o=e.timeout)!=null?o:this.timeout;var s;e.retryInterval=(s=e.retryInterval)!=null?s:this.retryInterval;var l;return e.url=(l=e.url)!=null?l:e.urls.join(","),e},r._loadSingleItem=function(e){var t=this,i=this._assignDefaultOptions(typeof e=="string"?{url:e}:e),o=i.url,s=this._virtualPathMap[o]?this._virtualPathMap[o]:o;!Mn.isAbsoluteUrl(s)&&this.baseUrl&&(s=Mn.resolveAbsoluteUrl(this.baseUrl,s));var l=this._parseURL(s),u=l.assetBaseURL,c=l.queryPath,f=c?this._parseQueryPath(c):[],d=this._assetUrlPool[u];if(d)return new sn(function(x){x(t._getResolveResource(d,f))});var h=u;if(c){h+="?q="+f.shift();for(var _;_=f.shift();)h+="["+_+"]"}var p=this._loadingPromises,v=p[h];if(v)return new sn(function(x,b,S,C){v.onProgress(S,C).then(function(E){x(E)}).catch(function(E){b(E)})});var y=n._loaders[i.type];if(!y)throw"loader not found: "+i.type;i.url=u;var m=y.load(i,this);if(p[u]=m,m.then(function(x){y.useCache&&t._addAsset(u,x),delete p[u]},function(){return delete p[u]}),c){var g=new sn(function(x,b){t._pushSubAssetPromiseCallback(h,x,b)});return p[h]=g,g.then(function(){delete p[h]},function(){return delete p[h]}),m.catch(function(x){t._onSubAssetFail(h,x)}),g}return m},r._pushSubAssetPromiseCallback=function(e,t,i){this._subAssetPromiseCallbacks[e]={resolve:t,reject:i}},r._gc=function(e){for(var t=Mn.objectValues(this._referResourcePool),i=0,o=t.length;i<o;i++){var s=t[i];(!s.isGCIgnored||e)&&s.destroy(e,!0)}},r._getResolveResource=function(e,t){var i=e;if(t)for(var o=0,s=t.length;o<s;o++){var l=t[o];i=i[l]}return i},r._parseURL=function(e){var t=e.split("?"),i=t[0],o=t[1],s=void 0,l=i;if(o){for(var u=o.split("&"),c=0;c<u.length;c++){var f=u[c];if(f.startsWith("q=")){s=decodeURIComponent(f.split("=")[1]),u.splice(c,1);break}}l=u.length>0?i+"?"+u.join("&"):i}return{assetBaseURL:l,queryPath:s}},r._parseQueryPath=function(e){var t=[];return e.charCodeAt(0)===d8&&t.push(""),e.replace(v8,function(i,o,s,l){var u=i;s?u=l.replace(h8,"$1"):o&&(u=o.trim()),t.push(u)}),t},r.getResourceByRef=function(e){var t=e.refId,i=e.key,o=e.isClone,s=this._objectPool[t],l;if(s)l=Promise.resolve(s);else{var u,c=(u=this._editorResourceConfig[t])==null?void 0:u.path;if(!c)return Pt.warn("refId:"+t+" is not find in this._editorResourceConfig."),Promise.resolve(null);c=i?""+c+(c.indexOf("?")>-1?"&":"?")+"q="+i:c,l=this.load({url:c,type:this._editorResourceConfig[t].type})}return l.then(function(f){return o?f.clone():f})},r.initVirtualResources=function(e){var t=this;e.forEach(function(i){t._virtualPathMap[i.virtualPath]=i.path,t._editorResourceConfig[i.id]=i})},n._addLoader=function(e,t,i){this._loaders[e]=t;for(var o=0,s=i.length;o<s;o++)this._extTypeMapping[i[o].toLowerCase()]=e},n._getTypeByUrl=function(e){var t=e.split("?")[0];return this._extTypeMapping[t.substring(t.lastIndexOf(".")+1).toLowerCase()]},n}();(function(){cc._loaders={}})();(function(){cc._extTypeMapping={}})();function kn(n,r,a){return a===void 0&&(a=!0),function(e){var t=new e(a);cc._addLoader(n,t,r)}}var d8=".".charCodeAt(0),h8=/\\(\\)?/g,v8=RegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),Wa;(function(n){n[n.Down=0]="Down",n[n.Move=1]="Move",n[n.Stationary=2]="Stationary",n[n.Up=3]="Up",n[n.Leave=4]="Leave"})(Wa||(Wa={}));var CP=function(){function n(a){this.phase=Wa.Leave,this.position=new Ze,this.deltaPosition=new Ze,this._events=[],this._upMap=[],this._downMap=[],this._upList=new Nn,this._downList=new Nn,this.id=a}var r=n.prototype;return r._firePointerExitAndEnter=function(e){var t=this;this._currentEnteredEntity!==e&&(this._currentEnteredEntity&&this._currentEnteredEntity._scripts.forEach(function(i){i.onPointerExit(t)},function(i,o){i._entityScriptsIndex=o}),e&&e._scripts.forEach(function(i){i.onPointerEnter(t)},function(i,o){i._entityScriptsIndex=o}),this._currentEnteredEntity=e)},r._firePointerDown=function(e){var t=this;e&&e._scripts.forEach(function(i){i.onPointerDown(t)},function(i,o){i._entityScriptsIndex=o}),this._currentPressedEntity=e},r._firePointerDrag=function(){var e=this;this._currentPressedEntity&&this._currentPressedEntity._scripts.forEach(function(t){t.onPointerDrag(e)},function(t,i){t._entityScriptsIndex=i})},r._firePointerUpAndClick=function(e){var t=this,i=this,o=i._currentPressedEntity;if(o){var s=o===e;o._scripts.forEach(function(l){s&&l.onPointerClick(t),l.onPointerUp(t)},function(l,u){l._entityScriptsIndex=u}),this._currentPressedEntity=null}},n}(),Pa;(function(n){n[n.None=0]="None",n[n.Primary=1]="Primary",n[n.Secondary=2]="Secondary",n[n.Auxiliary=4]="Auxiliary",n[n.XButton1=8]="XButton1",n[n.XButton2=16]="XButton2",n[n.XButton3=32]="XButton3",n[n.XButton4=64]="XButton4",n[n.XButton5=128]="XButton5",n[n.XButton6=256]="XButton6",n[n.XButton7=512]="XButton7",n[n.XButton8=1024]="XButton8"})(Pa||(Pa={}));var p8=[1,4,2,8,16,32,64,128,256,512,1024],Zb={1:0,2:2,4:1,8:3,16:4,32:5,64:6,128:7,256:8,512:9,1024:10},To=function(){function n(){}return n._initialize=function(){{if(typeof navigator=="undefined")return;var a=navigator.userAgent;/iPhone/i.test(a)?n.platform=ca.IPhone:/iPad/i.test(a)?n.platform=ca.IPad:/Android/i.test(a)?n.platform=ca.Android:/Macintosh/i.test(a)&&(n.platform=ca.Mac);var e;switch(n.platform){case ca.IPhone:e=a.match(/OS (\d+)_?(\d+)?_?(\d+)?/),this.operatingSystem=e?"iPhone OS "+e[1]+"."+(e[2]||0)+"."+(e[3]||0):"iPhone OS";break;case ca.IPad:e=a.match(/OS (\d+)_?(\d+)?_?(\d+)?/),this.operatingSystem=e?"iPad OS "+e[1]+"."+(e[2]||0)+"."+(e[3]||0):"iPad OS";break;case ca.Android:e=a.match(/Android (\d+).?(\d+)?.?(\d+)?/),this.operatingSystem=e?"Android "+e[1]+"."+(e[2]||0)+"."+(e[3]||0):"Android";break;case ca.Mac:e=a.match(/Mac OS X (\d+)_?(\d+)?_?(\d+)?/),this.operatingSystem=e?"Mac OS X "+e[1]+"."+(e[2]||0)+"."+(e[3]||0):"Mac OS X";break}}},n._detectSIMDSupported=function(){return this._simdSupported===null&&(this._simdSupported=WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]))),this._simdSupported},Ie(n,null,[{key:"devicePixelRatio",get:function(){return window.devicePixelRatio}}]),n}();(function(){To.platform=ca.Unknown})();(function(){To.operatingSystem=""})();(function(){To._simdSupported=null})();To._initialize();var hn;(function(n){n[n.Backquote=0]="Backquote",n[n.Backslash=1]="Backslash",n[n.Backspace=2]="Backspace",n[n.BracketLeft=3]="BracketLeft",n[n.BracketRight=4]="BracketRight",n[n.Comma=5]="Comma",n[n.Digit0=6]="Digit0",n[n.Digit1=7]="Digit1",n[n.Digit2=8]="Digit2",n[n.Digit3=9]="Digit3",n[n.Digit4=10]="Digit4",n[n.Digit5=11]="Digit5",n[n.Digit6=12]="Digit6",n[n.Digit7=13]="Digit7",n[n.Digit8=14]="Digit8",n[n.Digit9=15]="Digit9",n[n.Equal=16]="Equal",n[n.IntlBackslash=17]="IntlBackslash",n[n.IntlRo=18]="IntlRo",n[n.IntlYen=19]="IntlYen",n[n.KeyA=20]="KeyA",n[n.KeyB=21]="KeyB",n[n.KeyC=22]="KeyC",n[n.KeyD=23]="KeyD",n[n.KeyE=24]="KeyE",n[n.KeyF=25]="KeyF",n[n.KeyG=26]="KeyG",n[n.KeyH=27]="KeyH",n[n.KeyI=28]="KeyI",n[n.KeyJ=29]="KeyJ",n[n.KeyK=30]="KeyK",n[n.KeyL=31]="KeyL",n[n.KeyM=32]="KeyM",n[n.KeyN=33]="KeyN",n[n.KeyO=34]="KeyO",n[n.KeyP=35]="KeyP",n[n.KeyQ=36]="KeyQ",n[n.KeyR=37]="KeyR",n[n.KeyS=38]="KeyS",n[n.KeyT=39]="KeyT",n[n.KeyU=40]="KeyU",n[n.KeyV=41]="KeyV",n[n.KeyW=42]="KeyW",n[n.KeyX=43]="KeyX",n[n.KeyY=44]="KeyY",n[n.KeyZ=45]="KeyZ",n[n.Minus=46]="Minus",n[n.Period=47]="Period",n[n.Quote=48]="Quote",n[n.Semicolon=49]="Semicolon",n[n.Slash=50]="Slash",n[n.AltLeft=51]="AltLeft",n[n.AltRight=52]="AltRight",n[n.CapsLock=53]="CapsLock",n[n.ContextMenu=54]="ContextMenu",n[n.ControlLeft=55]="ControlLeft",n[n.ControlRight=56]="ControlRight",n[n.Enter=57]="Enter",n[n.MetaLeft=58]="MetaLeft",n[n.MetaRight=59]="MetaRight",n[n.ShiftLeft=60]="ShiftLeft",n[n.ShiftRight=61]="ShiftRight",n[n.Space=62]="Space",n[n.Tab=63]="Tab",n[n.Convert=64]="Convert",n[n.KanaMode=65]="KanaMode",n[n.Lang1=66]="Lang1",n[n.Lang2=67]="Lang2",n[n.Lang3=68]="Lang3",n[n.Lang4=69]="Lang4",n[n.Lang5=70]="Lang5",n[n.NonConvert=71]="NonConvert",n[n.Delete=72]="Delete",n[n.End=73]="End",n[n.Help=74]="Help",n[n.Home=75]="Home",n[n.Insert=76]="Insert",n[n.PageDown=77]="PageDown",n[n.PageUp=78]="PageUp",n[n.ArrowDown=79]="ArrowDown",n[n.ArrowLeft=80]="ArrowLeft",n[n.ArrowRight=81]="ArrowRight",n[n.ArrowUp=82]="ArrowUp",n[n.NumLock=83]="NumLock",n[n.Numpad0=84]="Numpad0",n[n.Numpad1=85]="Numpad1",n[n.Numpad2=86]="Numpad2",n[n.Numpad3=87]="Numpad3",n[n.Numpad4=88]="Numpad4",n[n.Numpad5=89]="Numpad5",n[n.Numpad6=90]="Numpad6",n[n.Numpad7=91]="Numpad7",n[n.Numpad8=92]="Numpad8",n[n.Numpad9=93]="Numpad9",n[n.NumpadAdd=94]="NumpadAdd",n[n.NumpadBackspace=95]="NumpadBackspace",n[n.NumpadClear=96]="NumpadClear",n[n.NumpadClearEntry=97]="NumpadClearEntry",n[n.NumpadComma=98]="NumpadComma",n[n.NumpadDecimal=99]="NumpadDecimal",n[n.NumpadDivide=100]="NumpadDivide",n[n.NumpadEnter=101]="NumpadEnter",n[n.NumpadEqual=102]="NumpadEqual",n[n.NumpadHash=103]="NumpadHash",n[n.NumpadMemoryAdd=104]="NumpadMemoryAdd",n[n.NumpadMemoryClear=105]="NumpadMemoryClear",n[n.NumpadMemoryRecall=106]="NumpadMemoryRecall",n[n.NumpadMemoryStore=107]="NumpadMemoryStore",n[n.NumpadMemorySubtract=108]="NumpadMemorySubtract",n[n.NumpadMultiply=109]="NumpadMultiply",n[n.NumpadParenLeft=110]="NumpadParenLeft",n[n.NumpadParenRight=111]="NumpadParenRight",n[n.NumpadStar=112]="NumpadStar",n[n.NumpadSubtract=113]="NumpadSubtract",n[n.Escape=114]="Escape",n[n.F1=115]="F1",n[n.F2=116]="F2",n[n.F3=117]="F3",n[n.F4=118]="F4",n[n.F5=119]="F5",n[n.F6=120]="F6",n[n.F7=121]="F7",n[n.F8=122]="F8",n[n.F9=123]="F9",n[n.F10=124]="F10",n[n.F11=125]="F11",n[n.F12=126]="F12",n[n.F13=127]="F13",n[n.F14=128]="F14",n[n.F15=129]="F15",n[n.Fn=130]="Fn",n[n.FnLock=131]="FnLock",n[n.PrintScreen=132]="PrintScreen",n[n.ScrollLock=133]="ScrollLock",n[n.Pause=134]="Pause",n[n.BrowserBack=135]="BrowserBack",n[n.BrowserFavorites=136]="BrowserFavorites",n[n.BrowserForward=137]="BrowserForward",n[n.BrowserHome=138]="BrowserHome",n[n.BrowserRefresh=139]="BrowserRefresh",n[n.BrowserSearch=140]="BrowserSearch",n[n.BrowserStop=141]="BrowserStop",n[n.Eject=142]="Eject",n[n.LaunchApp1=143]="LaunchApp1",n[n.LaunchApp2=144]="LaunchApp2",n[n.LaunchMail=145]="LaunchMail",n[n.MediaPlayPause=146]="MediaPlayPause",n[n.MediaSelect=147]="MediaSelect",n[n.MediaStop=148]="MediaStop",n[n.MediaTrackNext=149]="MediaTrackNext",n[n.MediaTrackPrevious=150]="MediaTrackPrevious",n[n.Power=151]="Power",n[n.Sleep=152]="Sleep",n[n.AudioVolumeDown=153]="AudioVolumeDown",n[n.AudioVolumeMute=154]="AudioVolumeMute",n[n.AudioVolumeUp=155]="AudioVolumeUp",n[n.WakeUp=156]="WakeUp",n[n.Hyper=157]="Hyper",n[n.Super=158]="Super",n[n.Turbo=159]="Turbo",n[n.Abort=160]="Abort",n[n.Resume=161]="Resume",n[n.Suspend=162]="Suspend",n[n.Again=163]="Again",n[n.Copy=164]="Copy",n[n.Cut=165]="Cut",n[n.Find=166]="Find",n[n.Open=167]="Open",n[n.Paste=168]="Paste",n[n.Props=169]="Props",n[n.Select=170]="Select",n[n.Undo=171]="Undo",n[n.Hiragana=172]="Hiragana",n[n.Katakana=173]="Katakana",n[n.Unidentified=174]="Unidentified"})(hn||(hn={}));var _8=function(){function n(a,e){this._curHeldDownKeyToIndexMap=[],this._upKeyToFrameCountMap=[],this._downKeyToFrameCountMap=[],this._curFrameHeldDownList=new Nn,this._curFrameDownList=new Nn,this._curFrameUpList=new Nn,this._nativeEvents=[],this._engine=a,this._onBlur=this._onBlur.bind(this),this._onKeyEvent=this._onKeyEvent.bind(this),this._target=e,this._addEventListener()}var r=n.prototype;return r._update=function(){var e=this,t=e._nativeEvents,i=e._curFrameDownList,o=e._curFrameUpList;if(i.length=0,o.length=0,t.length>0){for(var s=this._engine.time.frameCount,l=this,u=l._curHeldDownKeyToIndexMap,c=l._curFrameHeldDownList,f=l._downKeyToFrameCountMap,d=l._upKeyToFrameCountMap,h=0,_=t.length;h<_;h++){var p=t[h],v=hn[p.code];switch(p.type){case"keydown":u[v]==null&&(i.add(v),c.add(v),u[v]=c.length-1,f[v]=s);break;case"keyup":var y=u[v];if(y!=null){u[v]=null;var m=c.deleteByIndex(y);m&&(u[m]=y)}if(o.add(v),d[v]=s,To.platform===ca.Mac&&(v===hn.MetaLeft||v===hn.MetaRight)){for(var g=0,x=c.length;g<x;g++)u[c.get(g)]=null;c.length=0}break}}t.length=0}},r._destroy=function(){this._removeEventListener(),this._curHeldDownKeyToIndexMap.length=0,this._curHeldDownKeyToIndexMap=null,this._upKeyToFrameCountMap.length=0,this._upKeyToFrameCountMap=null,this._downKeyToFrameCountMap.length=0,this._downKeyToFrameCountMap=null,this._nativeEvents.length=0,this._nativeEvents=null,this._curFrameHeldDownList.length=0,this._curFrameHeldDownList=null,this._curFrameDownList.length=0,this._curFrameDownList=null,this._curFrameUpList.length=0,this._curFrameUpList=null,this._engine=null},r._onBlur=function(){this._curHeldDownKeyToIndexMap.length=0,this._curFrameHeldDownList.length=0,this._curFrameDownList.length=0,this._curFrameUpList.length=0,this._nativeEvents.length=0},r._onKeyEvent=function(e){this._nativeEvents.push(e)},r._addEventListener=function(){var e=this,t=e._target;t.addEventListener("keydown",this._onKeyEvent),t.addEventListener("keyup",this._onKeyEvent),t.addEventListener("blur",this._onBlur)},r._removeEventListener=function(){var e=this,t=e._target;t.removeEventListener("keydown",this._onKeyEvent),t.removeEventListener("keyup",this._onKeyEvent),t.removeEventListener("blur",this._onBlur)},n}(),Qr;(function(n){n[n.None=0]="None",n[n.Color=1]="Color",n[n.Depth=2]="Depth",n[n.Stencil=4]="Stencil",n[n.ColorDepth=3]="ColorDepth",n[n.ColorStencil=5]="ColorStencil",n[n.DepthStencil=6]="DepthStencil",n[n.All=7]="All"})(Qr||(Qr={}));var ta=function(n){be(r,n);function r(e){var t;return t=n.call(this,e)||this,t._index=-1,t._shapes=[],t._updateFlag=t.entity.transform.registerWorldChangeFlag(),t}var a=r.prototype;return a.addShape=function(t){var i=t._collider;i!==this&&(i&&i.removeShape(t),this._shapes.push(t),t._collider=this,this._nativeCollider.addShape(t._nativeShape),this._phasedActiveInScene&&this.scene.physics._addColliderShape(t))},a.removeShape=function(t){var i=this._shapes.indexOf(t);i!==-1&&(this._shapes.splice(i,1),this._phasedActiveInScene&&this.scene.physics._removeColliderShape(t),t._collider=null,this._nativeCollider.removeShape(t._nativeShape))},a.clearShapes=function(){for(var t=this._shapes,i=0,o=t.length;i<o;i++){var s=t[i];this._phasedActiveInScene&&this.scene.physics._removeColliderShape(s),s._destroy(),this._nativeCollider.removeShape(s._nativeShape)}t.length=0},a._onUpdate=function(){if(this._updateFlag.flag){var t=this.entity.transform;this._nativeCollider.setWorldTransform(t.worldPosition,t.worldRotationQuaternion);for(var i=t.lossyWorldScale,o=0,s=this.shapes.length;o<s;o++)this.shapes[o]._nativeShape.setWorldScale(i);this._updateFlag.flag=!1}},a._onLateUpdate=function(){},a._onEnableInScene=function(){var t=this.scene.physics;t._addCollider(this);for(var i=this.shapes,o=0,s=i.length;o<s;o++)t._addColliderShape(i[o])},a._onDisableInScene=function(){var t=this.scene.physics;t._removeCollider(this);for(var i=this.shapes,o=0,s=i.length;o<s;o++)t._removeColliderShape(i[o])},a._cloneTo=function(t){for(var i=t._shapes,o=0,s=i.length;o<s;o++)t._addPhysicsShape(i[o])},a._onDestroy=function(){n.prototype._onDestroy.call(this),this.clearShapes(),this._nativeCollider.destroy()},a._addPhysicsShape=function(t){t._collider=this,this._nativeCollider.addShape(t._nativeShape),this._phasedActiveInScene&&this.scene.physics._addColliderShape(t)},Ie(r,[{key:"shapes",get:function(){return this._shapes}}]),r}(Zr);H([te],ta.prototype,"_index",void 0);H([te],ta.prototype,"_nativeCollider",void 0);H([te],ta.prototype,"_updateFlag",void 0);H([Xe],ta.prototype,"_shapes",void 0);ta=H([gs(Vt,no.CheckOnly)],ta);var g8=function(){},ya=function(){function n(a){var e=this;this._restTime=0,this._fixedTimeStep=1/60,this._colliders=new Nn,this._gravity=new z(0,-9.81,0),this._onContactEnter=function(i,o){var s=e._scene.engine._physicalObjectsMap,l=s[i],u=s[o];l.collider.entity._scripts.forEach(function(c){var f=n._collision;f.shape=u,c.onCollisionEnter(f)},function(c,f){c._entityScriptsIndex=f}),u.collider.entity._scripts.forEach(function(c){var f=n._collision;f.shape=l,c.onCollisionEnter(f)},function(c,f){c._entityScriptsIndex=f})},this._onContactExit=function(i,o){var s=e._scene.engine._physicalObjectsMap,l=s[i],u=s[o];l.collider.entity._scripts.forEach(function(c){var f=n._collision;f.shape=u,c.onCollisionExit(f)},function(c,f){c._entityScriptsIndex=f}),u.collider.entity._scripts.forEach(function(c){var f=n._collision;f.shape=l,c.onCollisionExit(f)},function(c,f){c._entityScriptsIndex=f})},this._onContactStay=function(i,o){var s=e._scene.engine._physicalObjectsMap,l=s[i],u=s[o];l.collider.entity._scripts.forEach(function(c){var f=n._collision;f.shape=u,c.onCollisionStay(f)},function(c,f){c._entityScriptsIndex=f}),u.collider.entity._scripts.forEach(function(c){var f=n._collision;f.shape=l,c.onCollisionStay(f)},function(c,f){c._entityScriptsIndex=f})},this._onTriggerEnter=function(i,o){var s=e._scene.engine._physicalObjectsMap,l=s[i],u=s[o];l.collider.entity._scripts.forEach(function(c){c.onTriggerEnter(u)},function(c,f){c._entityScriptsIndex=f}),u.collider.entity._scripts.forEach(function(c){c.onTriggerEnter(l)},function(c,f){c._entityScriptsIndex=f})},this._onTriggerExit=function(i,o){var s=e._scene.engine._physicalObjectsMap,l=s[i],u=s[o];l.collider.entity._scripts.forEach(function(c){c.onTriggerExit(u)},function(c,f){c._entityScriptsIndex=f}),u.collider.entity._scripts.forEach(function(c){c.onTriggerExit(l)},function(c,f){c._entityScriptsIndex=f})},this._onTriggerStay=function(i,o){var s=e._scene.engine._physicalObjectsMap,l=s[i],u=s[o];l.collider.entity._scripts.forEach(function(c){c.onTriggerStay(u)},function(c,f){c._entityScriptsIndex=f}),u.collider.entity._scripts.forEach(function(c){c.onTriggerStay(l)},function(c,f){c._entityScriptsIndex=f})},this._scene=a,this._setGravity=this._setGravity.bind(this),this._gravity._onValueChanged=this._setGravity;var t=a.engine;t._physicsInitialized&&(this._nativePhysicsScene=n._nativePhysics.createPhysicsScene(t._nativePhysicsManager,this._onContactEnter,this._onContactExit,this._onContactStay,this._onTriggerEnter,this._onTriggerExit,this._onTriggerStay))}var r=n.prototype;return r.raycast=function(e,t,i,o){var s=this,l,u=Number.MAX_VALUE;typeof t=="number"?u=t:t!=null&&(l=t);var c=cs.Everything;typeof i=="number"?c=i:i!=null&&(l=i),o&&(l=o);var f=function(h){var _=s._scene.engine._physicalObjectsMap[h];return _?_.collider.entity.layer&c&&_.isSceneQuery:!1};if(l!=null){var d=this._nativePhysicsScene.raycast(e,u,f,function(h,_,p,v){var y=s._scene.engine._physicalObjectsMap[h];l.entity=y._collider.entity,l.shape=y,l.distance=_,l.normal.copyFrom(v),l.point.copyFrom(p)});return d?!0:(l.entity=null,l.shape=null,l.distance=0,l.point.set(0,0,0),l.normal.set(0,0,0),!1)}else return this._nativePhysicsScene.raycast(e,u,f)},r._update=function(e){var t=this,i=t._fixedTimeStep,o=t._nativePhysicsScene,s=this._scene._componentsManager,l=this._restTime+e,u=Math.floor(l/i);this._restTime=l-u*i;for(var c=0;c<u;c++)s.callScriptOnPhysicsUpdate(),this._callColliderOnUpdate(),o.update(i),this._callColliderOnLateUpdate()},r._addColliderShape=function(e){this._scene.engine._physicalObjectsMap[e.id]=e,this._nativePhysicsScene.addColliderShape(e._nativeShape)},r._removeColliderShape=function(e){delete this._scene.engine._physicalObjectsMap[e.id],this._nativePhysicsScene.removeColliderShape(e._nativeShape)},r._addCollider=function(e){e._index===-1&&(e._index=this._colliders.length,this._colliders.add(e)),this._nativePhysicsScene.addCollider(e._nativeCollider)},r._addCharacterController=function(e){e._index===-1&&(e._index=this._colliders.length,this._colliders.add(e)),this._nativePhysicsScene.addCharacterController(e._nativeCollider)},r._removeCollider=function(e){var t=this._colliders.deleteByIndex(e._index);t&&(t._index=e._index),e._index=-1,this._nativePhysicsScene.removeCollider(e._nativeCollider)},r._removeCharacterController=function(e){var t=this._colliders.deleteByIndex(e._index);t&&(t._index=e._index),e._index=-1,this._nativePhysicsScene.removeCharacterController(e._nativeCollider)},r._callColliderOnUpdate=function(){for(var e=this._colliders._elements,t=this._colliders.length-1;t>=0;--t)e[t]._onUpdate()},r._callColliderOnLateUpdate=function(){for(var e=this._colliders._elements,t=this._colliders.length-1;t>=0;--t)e[t]._onLateUpdate()},r._gc=function(){this._colliders.garbageCollection()},r._setGravity=function(){this._nativePhysicsScene.setGravity(this._gravity)},Ie(n,[{key:"gravity",get:function(){return this._gravity},set:function(e){var t=this._gravity;t!==e&&t.copyFrom(e)}},{key:"fixedTimeStep",get:function(){return this._fixedTimeStep},set:function(e){this._fixedTimeStep=Math.max(e,ve.zeroTolerance)}}]),n}();(function(){ya._collision=new g8})();var Yv;(function(n){n[n.PreventClimbing=0]="PreventClimbing",n[n.PreventClimbingAndForceSliding=1]="PreventClimbingAndForceSliding"})(Yv||(Yv={}));var m8=function(n){be(r,n);function r(e){var t;return t=n.call(this,e)||this,t._stepOffset=.5,t._nonWalkableMode=Yv.PreventClimbing,t._upDirection=new z(0,1,0),t._slopeLimit=.707,t._nativeCollider=ya._nativePhysics.createCharacterController(),t._setUpDirection=t._setUpDirection.bind(Et(t)),t._upDirection._onValueChanged=t._setUpDirection,t}var a=r.prototype;return a.move=function(t,i,o){return this._nativeCollider.move(t,i,o)},a.addShape=function(t){if(this._shapes.length>0)throw"only allow single shape on controller!";n.prototype.addShape.call(this,t),this._updateFlag.flag=!0},a.clearShapes=function(){this._shapes.length>0&&n.prototype.removeShape.call(this,this._shapes[0])},a._onUpdate=function(){if(this._updateFlag.flag){var t=this.entity.transform,i=this.shapes;this._nativeCollider.setWorldPosition(t.worldPosition);for(var o=t.lossyWorldScale,s=0,l=i.length;s<l;s++)i[s]._nativeShape.setWorldScale(o);this._updateFlag.flag=!1}},a._onLateUpdate=function(){var t=this.entity.transform.worldPosition;this._nativeCollider.getWorldPosition(t),this._updateFlag.flag=!1},a._onEnableInScene=function(){var t=this.scene.physics;t._addCharacterController(this);for(var i=this.shapes,o=0,s=i.length;o<s;o++)t._addColliderShape(i[o])},a._onDisableInScene=function(){var t=this.scene.physics;t._removeCharacterController(this);for(var i=this.shapes,o=0,s=i.length;o<s;o++)t._removeColliderShape(i[o])},a._setUpDirection=function(){this._nativeCollider.setUpDirection(this._upDirection)},Ie(r,[{key:"stepOffset",get:function(){return this._stepOffset},set:function(t){this._stepOffset!==t&&(this._stepOffset=t,this._nativeCollider.setStepOffset(t))}},{key:"nonWalkableMode",get:function(){return this._nonWalkableMode},set:function(t){this._nonWalkableMode!==t&&(this._nonWalkableMode=t,this._nativeCollider.setNonWalkableMode(t))}},{key:"upDirection",get:function(){return this._upDirection},set:function(t){this._upDirection!==t&&this._upDirection.copyFrom(t)}},{key:"slopeLimit",get:function(){return this._slopeLimit},set:function(t){this._slopeLimit!==t&&(this._slopeLimit=t,this._nativeCollider.setSlopeLimit(t))}}]),r}(ta),xa=function(n){be(r,n);function r(e){var t;t=n.call(this,e)||this,t._linearDamping=0,t._angularDamping=.05,t._linearVelocity=new z,t._angularVelocity=new z,t._mass=1,t._centerOfMass=new z,t._inertiaTensor=new z(1,1,1),t._maxAngularVelocity=100,t._maxDepenetrationVelocity=1e3,t._solverIterations=4,t._isKinematic=!1,t._constraints=0,t._collisionDetectionMode=0,t._sleepThreshold=.005;var i=t.entity.transform;return t._nativeCollider=ya._nativePhysics.createDynamicCollider(i.worldPosition,i.worldRotationQuaternion),t._setLinearVelocity=t._setLinearVelocity.bind(Et(t)),t._setAngularVelocity=t._setAngularVelocity.bind(Et(t)),t._setCenterOfMass=t._setCenterOfMass.bind(Et(t)),t._setInertiaTensor=t._setInertiaTensor.bind(Et(t)),t._linearVelocity._onValueChanged=t._setLinearVelocity,t._angularVelocity._onValueChanged=t._setAngularVelocity,t._centerOfMass._onValueChanged=t._setCenterOfMass,t._inertiaTensor._onValueChanged=t._setInertiaTensor,t}var a=r.prototype;return a.applyForce=function(t){this._nativeCollider.addForce(t)},a.applyTorque=function(t){this._nativeCollider.addTorque(t)},a.move=function(t,i){this._nativeCollider.move(t,i)},a.sleep=function(){this._nativeCollider.sleep()},a.wakeUp=function(){this._nativeCollider.wakeUp()},a._onLateUpdate=function(){var t=this.entity.transform,i=t.worldPosition,o=t.worldRotationQuaternion;this._nativeCollider.getWorldTransform(i,o),this._updateFlag.flag=!1},a._cloneTo=function(t){n.prototype._cloneTo.call(this,t),t.linearDamping=this.linearDamping,t.angularDamping=this.angularDamping,t.linearVelocity=this.linearVelocity,t.angularVelocity=this.angularVelocity,t.mass=this.mass,t.centerOfMass=this.centerOfMass,t.inertiaTensor=this.inertiaTensor,t.maxAngularVelocity=this.maxAngularVelocity,t.maxDepenetrationVelocity=this.maxDepenetrationVelocity,t.sleepThreshold=this.sleepThreshold,t.solverIterations=this.solverIterations,t.isKinematic=this.isKinematic,t.constraints=this.constraints,t.collisionDetectionMode=this.collisionDetectionMode},a._setLinearVelocity=function(){this._nativeCollider.setLinearVelocity(this._linearVelocity)},a._setAngularVelocity=function(){this._nativeCollider.setAngularVelocity(this._angularVelocity)},a._setCenterOfMass=function(){this._nativeCollider.setCenterOfMass(this._centerOfMass)},a._setInertiaTensor=function(){this._nativeCollider.setInertiaTensor(this._inertiaTensor)},Ie(r,[{key:"linearDamping",get:function(){return this._linearDamping},set:function(t){this._linearDamping!==t&&(this._linearDamping=t,this._nativeCollider.setLinearDamping(t))}},{key:"angularDamping",get:function(){return this._angularDamping},set:function(t){this._angularDamping!==t&&(this._angularDamping=t,this._nativeCollider.setAngularDamping(t))}},{key:"linearVelocity",get:function(){return this._linearVelocity},set:function(t){this._linearVelocity!==t&&this._linearVelocity.copyFrom(t)}},{key:"angularVelocity",get:function(){return this._angularVelocity},set:function(t){this._angularVelocity!==t&&this._angularVelocity.copyFrom(t)}},{key:"mass",get:function(){return this._mass},set:function(t){this._mass!==t&&(this._mass=t,this._nativeCollider.setMass(t))}},{key:"centerOfMass",get:function(){return this._centerOfMass},set:function(t){this._centerOfMass!==t&&this._centerOfMass.copyFrom(t)}},{key:"inertiaTensor",get:function(){return this._inertiaTensor},set:function(t){this._inertiaTensor!==t&&this._inertiaTensor.copyFrom(t)}},{key:"maxAngularVelocity",get:function(){return this._maxAngularVelocity},set:function(t){this._maxAngularVelocity!==t&&(this._maxAngularVelocity=t,this._nativeCollider.setMaxAngularVelocity(t))}},{key:"maxDepenetrationVelocity",get:function(){return this._maxDepenetrationVelocity},set:function(t){this._maxDepenetrationVelocity!==t&&(this._maxDepenetrationVelocity=t,this._nativeCollider.setMaxDepenetrationVelocity(t))}},{key:"sleepThreshold",get:function(){return this._sleepThreshold},set:function(t){t!==this._sleepThreshold&&(this._sleepThreshold=t,this._nativeCollider.setSleepThreshold(t))}},{key:"solverIterations",get:function(){return this._solverIterations},set:function(t){this._solverIterations!==t&&(this._solverIterations=t,this._nativeCollider.setSolverIterations(t))}},{key:"isKinematic",get:function(){return this._isKinematic},set:function(t){this._isKinematic!==t&&(this._isKinematic=t,this._nativeCollider.setIsKinematic(t))}},{key:"constraints",get:function(){return this._constraints},set:function(t){this._constraints!==t&&(this._constraints=t,this._nativeCollider.setConstraints(t))}},{key:"collisionDetectionMode",get:function(){return this._collisionDetectionMode},set:function(t){this._collisionDetectionMode!==t&&(this._collisionDetectionMode=t,this._nativeCollider.setCollisionDetectionMode(t))}}]),r}(ta);H([te],xa.prototype,"_linearDamping",void 0);H([te],xa.prototype,"_angularDamping",void 0);H([te],xa.prototype,"_linearVelocity",void 0);H([te],xa.prototype,"_angularVelocity",void 0);H([te],xa.prototype,"_mass",void 0);H([te],xa.prototype,"_centerOfMass",void 0);H([te],xa.prototype,"_inertiaTensor",void 0);H([te],xa.prototype,"_maxAngularVelocity",void 0);H([te],xa.prototype,"_maxDepenetrationVelocity",void 0);H([te],xa.prototype,"_solverIterations",void 0);H([te],xa.prototype,"_isKinematic",void 0);H([te],xa.prototype,"_constraints",void 0);H([te],xa.prototype,"_collisionDetectionMode",void 0);H([te],xa.prototype,"_sleepThreshold",void 0);var a0;(function(n){n[n.Discrete=0]="Discrete",n[n.Continuous=1]="Continuous",n[n.ContinuousDynamic=2]="ContinuousDynamic",n[n.ContinuousSpeculative=3]="ContinuousSpeculative"})(a0||(a0={}));var i0;(function(n){n[n.None=0]="None",n[n.FreezePositionX=1]="FreezePositionX",n[n.FreezePositionY=2]="FreezePositionY",n[n.FreezePositionZ=4]="FreezePositionZ",n[n.FreezeRotationX=8]="FreezeRotationX",n[n.FreezeRotationY=16]="FreezeRotationY",n[n.FreezeRotationZ=32]="FreezeRotationZ"})(i0||(i0={}));var EP=function(){this.entity=null,this.distance=0,this.point=new z,this.normal=new z,this.shape=null},cd;(function(n){n[n.Average=0]="Average",n[n.Minimum=1]="Minimum",n[n.Multiply=2]="Multiply",n[n.Maximum=3]="Maximum"})(cd||(cd={}));var TP=function(){function n(){this._bounciness=.1,this._dynamicFriction=.1,this._staticFriction=.1,this._bounceCombine=cd.Average,this._frictionCombine=cd.Average,this._nativeMaterial=ya._nativePhysics.createPhysicsMaterial(this._staticFriction,this._dynamicFriction,this._bounciness,this._bounceCombine,this._frictionCombine)}var r=n.prototype;return r._destroy=function(){!this._destroyed&&this._nativeMaterial.destroy(),this._destroyed=!0},Ie(n,[{key:"bounciness",get:function(){return this._bounciness},set:function(e){this._bounciness!==e&&(this._bounciness=e,this._nativeMaterial.setBounciness(e))}},{key:"dynamicFriction",get:function(){return this._dynamicFriction},set:function(e){this._dynamicFriction!==e&&(this._dynamicFriction=e,this._nativeMaterial.setDynamicFriction(e))}},{key:"staticFriction",get:function(){return this._staticFriction},set:function(e){this._staticFriction!==e&&(this._staticFriction=e,this._nativeMaterial.setStaticFriction(e))}},{key:"bounceCombine",get:function(){return this._bounceCombine},set:function(e){this._bounceCombine!==e&&(this._bounceCombine=e,this._nativeMaterial.setBounceCombine(e))}},{key:"frictionCombine",get:function(){return this._frictionCombine},set:function(e){this._frictionCombine!==e&&(this._frictionCombine=e,this._nativeMaterial.setFrictionCombine(e))}}]),n}(),y8=function(n){be(r,n);function r(a){var e;e=n.call(this,a)||this;var t=e.entity.transform;return e._nativeCollider=ya._nativePhysics.createStaticCollider(t.worldPosition,t.worldRotationQuaternion),e}return r}(ta),Dl;(function(n){n[n.X=0]="X",n[n.Y=1]="Y",n[n.Z=2]="Z"})(Dl||(Dl={}));var o0;(function(n){n[n.Sides=1]="Sides",n[n.Up=2]="Up",n[n.Down=4]="Down"})(o0||(o0={}));var ao=function(n){be(r,n);function r(e){var t;return t=n.call(this,e)||this,t._colliderInfo=new eC,t._connectedColliderInfo=new eC,t._force=0,t._torque=0,t._connectedColliderInfo.localPosition=new z,t}var a=r.prototype;return a._cloneTo=function(t){t.connectedCollider=this.connectedCollider,t.connectedAnchor=this.connectedAnchor,t.connectedMassScale=this.connectedMassScale,t.connectedInertiaScale=this.connectedInertiaScale,t.massScale=this.massScale,t.inertiaScale=this.inertiaScale,t.breakForce=this.breakForce,t.breakTorque=this.breakTorque},Ie(r,[{key:"connectedCollider",get:function(){return this._connectedColliderInfo.collider},set:function(t){this._connectedColliderInfo.collider!==t&&(this._connectedColliderInfo.collider=t,this._nativeJoint.setConnectedCollider(t._nativeCollider))}},{key:"connectedAnchor",get:function(){return this._connectedColliderInfo.localPosition},set:function(t){var i=this._connectedColliderInfo.localPosition;t!==i&&i.copyFrom(t),this._nativeJoint.setConnectedAnchor(t)}},{key:"connectedMassScale",get:function(){return this._connectedColliderInfo.massScale},set:function(t){t!==this._connectedColliderInfo.massScale&&(this._connectedColliderInfo.massScale=t,this._nativeJoint.setConnectedMassScale(t))}},{key:"connectedInertiaScale",get:function(){return this._connectedColliderInfo.inertiaScale},set:function(t){t!==this._connectedColliderInfo.inertiaScale&&(this._connectedColliderInfo.inertiaScale=t,this._nativeJoint.setConnectedInertiaScale(t))}},{key:"massScale",get:function(){return this._colliderInfo.massScale},set:function(t){t!==this._colliderInfo.massScale&&(this._colliderInfo.massScale=t,this._nativeJoint.setMassScale(t))}},{key:"inertiaScale",get:function(){return this._colliderInfo.inertiaScale},set:function(t){t!==this._colliderInfo.inertiaScale&&(this._colliderInfo.inertiaScale=t,this._nativeJoint.setInertiaScale(t))}},{key:"breakForce",get:function(){return this._force},set:function(t){t!==this._force&&(this._force=t,this._nativeJoint.setBreakForce(t))}},{key:"breakTorque",get:function(){return this._torque},set:function(t){t!==this._torque&&(this._torque=t,this._nativeJoint.setBreakTorque(t))}}]),r}(Zr);H([te],ao.prototype,"_colliderInfo",void 0);H([te],ao.prototype,"_connectedColliderInfo",void 0);H([te],ao.prototype,"_nativeJoint",void 0);H([te],ao.prototype,"_force",void 0);H([te],ao.prototype,"_torque",void 0);ao=H([gs(ta,no.CheckOnly)],ao);var eC=function(){this.collider=null,this.massScale=0,this.inertiaScale=0},x8=function(n){be(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._onAwake=function(){var t=this._colliderInfo;t.collider=this.entity.getComponent(ta),this._nativeJoint=ya._nativePhysics.createFixedJoint(t.collider._nativeCollider)},r}(ao),Ra;(function(n){n[n.None=0]="None",n[n.LimitEnabled=1]="LimitEnabled",n[n.DriveEnabled=2]="DriveEnabled",n[n.DriveFreeSpin=4]="DriveFreeSpin"})(Ra||(Ra={}));var Lc=function(n){be(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._axis=new z(1,0,0),e._hingeFlags=Ra.None,e._useSpring=!1,e}var a=r.prototype;return a._onAwake=function(){var t=this._colliderInfo;t.localPosition=new z,t.collider=this.entity.getComponent(ta),this._nativeJoint=ya._nativePhysics.createHingeJoint(t.collider._nativeCollider)},a._cloneTo=function(t){t.axis=this.axis,t.swingOffset=this.swingOffset,t.useLimits=this.useLimits,t.useMotor=this.useMotor,t.useSpring=this.useSpring,t.motor=this.motor,t.limits=this.limits},Ie(r,[{key:"axis",get:function(){return this._axis},set:function(t){var i=this._axis;t!==i&&i.copyFrom(t),this._nativeJoint.setAxis(i)}},{key:"swingOffset",get:function(){return this._colliderInfo.localPosition},set:function(t){var i=this._colliderInfo.localPosition;t!==i&&i.copyFrom(t),this._nativeJoint.setSwingOffset(i)}},{key:"angle",get:function(){return this._nativeJoint.getAngle()}},{key:"velocity",get:function(){return this._nativeJoint.getVelocity()}},{key:"useLimits",get:function(){return(this._hingeFlags&Ra.LimitEnabled)==Ra.LimitEnabled},set:function(t){t!==this.useLimits&&(t?this._hingeFlags|=Ra.LimitEnabled:this._hingeFlags&=~Ra.LimitEnabled,this._nativeJoint.setHingeJointFlag(Ra.LimitEnabled,t))}},{key:"useMotor",get:function(){return(this._hingeFlags&Ra.DriveEnabled)==Ra.DriveEnabled},set:function(t){t!==this.useMotor&&(t?this._hingeFlags|=Ra.DriveEnabled:this._hingeFlags&=~Ra.DriveEnabled,this._nativeJoint.setHingeJointFlag(Ra.DriveEnabled,t))}},{key:"useSpring",get:function(){return this._useSpring},set:function(t){this._useSpring!==t&&(this._useSpring=t,this.limits=this._limits)}},{key:"motor",get:function(){return this._jointMonitor},set:function(t){this._jointMonitor!==t&&(this._jointMonitor=t,this._nativeJoint.setDriveVelocity(t.targetVelocity),this._nativeJoint.setDriveForceLimit(t.forceLimit),this._nativeJoint.setDriveGearRatio(t.gearRation),this._nativeJoint.setHingeJointFlag(Ra.DriveFreeSpin,t.freeSpin))}},{key:"limits",get:function(){return this._limits},set:function(t){this._limits!==t&&(this._limits=t,this.useSpring?this._nativeJoint.setSoftLimit(t.min,t.max,t.stiffness,t.damping):this._nativeJoint.setHardLimit(t.min,t.max,t.contactDistance))}}]),r}(ao);H([te],Lc.prototype,"_axis",void 0);H([te],Lc.prototype,"_hingeFlags",void 0);H([te],Lc.prototype,"_useSpring",void 0);H([te],Lc.prototype,"_jointMonitor",void 0);H([te],Lc.prototype,"_limits",void 0);var S8=function(n){be(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._minDistance=0,e._maxDistance=0,e._tolerance=.25,e._stiffness=0,e._damping=0,e}var a=r.prototype;return a._onAwake=function(){var t=this._colliderInfo;t.localPosition=new z,t.collider=this.entity.getComponent(ta),this._nativeJoint=ya._nativePhysics.createSpringJoint(t.collider._nativeCollider)},a._cloneTo=function(t){t.swingOffset=this.swingOffset,t.minDistance=this.minDistance,t.maxDistance=this.maxDistance,t.tolerance=this.tolerance,t.stiffness=this.stiffness,t.damping=this.damping},Ie(r,[{key:"swingOffset",get:function(){return this._colliderInfo.localPosition},set:function(t){var i=this._colliderInfo.localPosition;t!==i&&i.copyFrom(t),this._nativeJoint.setSwingOffset(t)}},{key:"minDistance",get:function(){return this._minDistance},set:function(t){this._minDistance!==t&&(this._minDistance=t,this._nativeJoint.setMinDistance(t))}},{key:"maxDistance",get:function(){return this._maxDistance},set:function(t){this._maxDistance!==t&&(this._maxDistance=t,this._nativeJoint.setMaxDistance(t))}},{key:"tolerance",get:function(){return this._tolerance},set:function(t){this._tolerance!==t&&(this._tolerance=t,this._nativeJoint.setTolerance(t))}},{key:"stiffness",get:function(){return this._stiffness},set:function(t){this._stiffness!==t&&(this._stiffness=t,this._nativeJoint.setStiffness(t))}},{key:"damping",get:function(){return this._damping},set:function(t){this._damping!==t&&(this._damping=t,this._nativeJoint.setDamping(t))}}]),r}(ao),b8=function(){this.max=0,this.min=0,this.contactDistance=-1,this.stiffness=0,this.damping=0},C8=function(){this.targetVelocity=0,this.forceLimit=Number.MAX_VALUE,this.gearRation=1,this.freeSpin=!1},ka=function(){function n(){this._isTrigger=!1,this._rotation=new z,this._position=new z,this._contactOffset=.02,this.isSceneQuery=!0,this._material=new TP,this._id=n._idGenerator++,this._setRotation=this._setRotation.bind(this),this._setPosition=this._setPosition.bind(this),this._rotation._onValueChanged=this._setRotation,this._position._onValueChanged=this._setPosition}var r=n.prototype;return r._cloneTo=function(e){e.contactOffset=this.contactOffset,e.rotation=this.rotation,e.position=this.position,e.isTrigger=this.isTrigger,e.material=this.material},r._destroy=function(){this._material._destroy(),this._nativeShape.destroy()},r._setPosition=function(){this._nativeShape.setPosition(this._position)},r._setRotation=function(){this._nativeShape.setRotation(this._rotation)},Ie(n,[{key:"collider",get:function(){return this._collider}},{key:"id",get:function(){return this._id}},{key:"contactOffset",get:function(){return this._contactOffset},set:function(e){this._contactOffset!==e&&(this._contactOffset=e,this._nativeShape.setContactOffset(e))}},{key:"material",get:function(){return this._material},set:function(e){this._material!==e&&(this._material=e,this._nativeShape.setMaterial(e._nativeMaterial))}},{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation!=e&&this._rotation.copyFrom(e)}},{key:"position",get:function(){return this._position},set:function(e){this._position!==e&&this._position.copyFrom(e)}},{key:"isTrigger",get:function(){return this._isTrigger},set:function(e){this._isTrigger!==e&&(this._isTrigger=e,this._nativeShape.setIsTrigger(e))}}]),n}();(function(){ka._idGenerator=0})();H([te],ka.prototype,"_collider",void 0);H([te],ka.prototype,"_nativeShape",void 0);H([te],ka.prototype,"_id",void 0);H([te],ka.prototype,"_material",void 0);H([te],ka.prototype,"_isTrigger",void 0);H([te],ka.prototype,"_rotation",void 0);H([te],ka.prototype,"_position",void 0);H([te],ka.prototype,"_contactOffset",void 0);var xx=function(n){be(r,n);function r(){var e;return e=n.call(this)||this,e._size=new z(1,1,1),e._nativeShape=ya._nativePhysics.createBoxColliderShape(e._id,e._size,e._material._nativeMaterial),e._setSize=e._setSize.bind(Et(e)),e._size._onValueChanged=e._setSize,e}var a=r.prototype;return a._cloneTo=function(t){n.prototype._cloneTo.call(this,t),t.size=this.size},a._setSize=function(){this._nativeShape.setSize(this._size)},Ie(r,[{key:"size",get:function(){return this._size},set:function(t){this._size!==t&&this._size.copyFrom(t)}}]),r}(ka);H([te],xx.prototype,"_size",void 0);var Sx=function(n){be(r,n);function r(){var e;return e=n.call(this)||this,e._radius=1,e._nativeShape=ya._nativePhysics.createSphereColliderShape(e._id,e._radius,e._material._nativeMaterial),e}var a=r.prototype;return a._cloneTo=function(t){n.prototype._cloneTo.call(this,t),t.radius=this.radius},Ie(r,[{key:"radius",get:function(){return this._radius},set:function(t){this._radius!==t&&(this._radius=t,this._nativeShape.setRadius(t))}}]),r}(ka);H([te],Sx.prototype,"_radius",void 0);var E8=function(n){be(r,n);function r(){var a;return a=n.call(this)||this,a._nativeShape=ya._nativePhysics.createPlaneColliderShape(a._id,a._material._nativeMaterial),a}return r}(ka),Bd=function(n){be(r,n);function r(){var e;return e=n.call(this)||this,e._radius=1,e._height=2,e._upAxis=Dl.Y,e._nativeShape=ya._nativePhysics.createCapsuleColliderShape(e._id,e._radius,e._height,e._material._nativeMaterial),e}var a=r.prototype;return a._cloneTo=function(t){n.prototype._cloneTo.call(this,t),t.radius=this.radius,t.height=this.height,t.upAxis=this.upAxis},Ie(r,[{key:"radius",get:function(){return this._radius},set:function(t){this._radius!==t&&(this._radius=t,this._nativeShape.setRadius(t))}},{key:"height",get:function(){return this._height},set:function(t){this._height!==t&&(this._height=t,this._nativeShape.setHeight(t))}},{key:"upAxis",get:function(){return this._upAxis},set:function(t){this._upAxis!==t&&(this._upAxis=t,this._nativeShape.setUpAxis(t))}}]),r}(ka);H([te],Bd.prototype,"_radius",void 0);H([te],Bd.prototype,"_height",void 0);H([te],Bd.prototype,"_upAxis",void 0);var d_=function(){function n(a,e){if(this._pointers=[],this._multiPointerEnabled=!0,this._buttons=Pa.None,this._upMap=[],this._downMap=[],this._upList=new Nn,this._downList=new Nn,this._nativeEvents=[],fr(e,Window))throw"Do not set window as target because window cannot listen to pointer leave event.";this._engine=a,this._target=e,this._canvas=a.canvas,this._htmlCanvas=a._canvas._webCanvas,this._pointerPool=new Array(11),this._onPointerEvent=this._onPointerEvent.bind(this),this._addEventListener()}var r=n.prototype;return r._update=function(){for(var e=this,t=e._pointers,i=e._nativeEvents,o=e._htmlCanvas,s=this._canvas,l=s.width,u=s.height,c=o.clientWidth,f=o.clientHeight,d=o.getBoundingClientRect(),h=d.left,_=d.top,p=l/c,v=u/f,y=t.length-1;y>=0;y--)t[y].phase===Wa.Leave&&t.splice(y,1);for(var m=0,g=i.length;m<g;m++){var x=i[m],b=x.pointerId,S=this._getPointerByID(b);if(S)S._events.push(x);else{var C=t.length;if(C===0||this._multiPointerEnabled){for(var E,T,M=this,L=M._pointerPool,F=0;F<C&&!(t[F].id>F);F++);S=(E=L)[T=F]||(E[T]=new CP(F)),S._uniqueID=b,S._events.push(x),S.position.set((x.clientX-h)*p,(x.clientY-_)*v),t.splice(F,0,S)}}}i.length=0,this._upList.length=this._downList.length=0,this._buttons=Pa.None;for(var N=this._engine.time.frameCount,I=0,O=t.length;I<O;I++){var P=t[I];P._upList.length=P._downList.length=0,this._updatePointerInfo(N,P,h,_,p,v),this._buttons|=P.pressedButtons}},r._firePointerScript=function(e){for(var t=this,i=t._pointers,o=t._canvas,s=0,l=i.length;s<l;s++){var u=i[s],c=u._events,f=u.position;u._firePointerDrag();var d=this._pointerRayCast(e,f.x/o.width,f.y/o.height);u._firePointerExitAndEnter(d);var h=c.length;if(h>0){for(var _=0;_<h;_++){var p=c[_];switch(p.type){case"pointerdown":u.phase=Wa.Down,u._firePointerDown(d);break;case"pointerup":u.phase=Wa.Up,u._firePointerUpAndClick(d);break;case"pointerleave":case"pointercancel":u.phase=Wa.Leave,u._firePointerExitAndEnter(null);break}}c.length=0}}},r._destroy=function(){this._removeEventListener(),this._pointerPool.length=0,this._nativeEvents.length=0,this._downMap.length=0,this._upMap.length=0},r._onPointerEvent=function(e){this._nativeEvents.push(e)},r._getPointerByID=function(e){for(var t=this,i=t._pointers,o=i.length-1;o>=0;o--)if(i[o]._uniqueID===e)return i[o];return null},r._updatePointerInfo=function(e,t,i,o,s,l){var u=t._events,c=t.position,f=u.length;if(f>0){var d=this,h=d._upList,_=d._upMap,p=d._downList,v=d._downMap,y=u[f-1],m=(y.clientX-i)*s,g=(y.clientY-o)*l;t.deltaPosition.set(m-c.x,g-c.y),c.set(m,g);for(var x=0;x<f;x++){var b=u[x],S=b.button;switch(t.button=p8[S]||Pa.None,t.pressedButtons=b.buttons,b.type){case"pointerdown":p.add(S),v[S]=e,t._downList.add(S),t._downMap[S]=e,t.phase=Wa.Down;break;case"pointerup":h.add(S),_[S]=e,t._upList.add(S),t._upMap[S]=e,t.phase=Wa.Up;break;case"pointermove":t.phase=Wa.Move;break;case"pointerleave":case"pointercancel":t.phase=Wa.Leave}}this._engine._physicsInitialized||(u.length=0)}else t.deltaPosition.set(0,0),t.phase=Wa.Stationary},r._pointerRayCast=function(e,t,i){for(var o=n._tempPoint,s=n._tempRay,l=n._tempHitResult,u=e.length-1;u>=0;u--){var c=e[u];if(!(!c.isActive||c.destroyed))for(var f=c._componentsManager,d=f._activeCameras,h=d._elements,_=d.length-1;_>=0;_--){var p=h[_];if(!p.renderTarget){var v=p.viewport,y=v.x,m=v.y,g=v.z,x=v.w;if(t>=y&&i>=m&&t-y<=g&&i-m<=x){if(o.set((t-y)/g,(i-m)/x),c.physics.raycast(p.viewportPointToRay(o,s),Number.MAX_VALUE,p.cullingMask,l))return l.entity;if(p.clearFlags&Qr.Color)return null}}}}return null},r._addEventListener=function(){var e=this,t=e._target,i=e._onPointerEvent;t.addEventListener("pointerdown",i),t.addEventListener("pointerup",i),t.addEventListener("pointerleave",i),t.addEventListener("pointermove",i),t.addEventListener("pointercancel",i)},r._removeEventListener=function(){var e=this,t=e._target,i=e._onPointerEvent;t.removeEventListener("pointerdown",i),t.removeEventListener("pointerup",i),t.removeEventListener("pointerleave",i),t.removeEventListener("pointermove",i),t.removeEventListener("pointercancel",i),this._nativeEvents.length=0,this._pointers.length=0,this._downList.length=0,this._upList.length=0},n}();(function(){d_._tempRay=new yz})();(function(){d_._tempPoint=new Ze})();(function(){d_._tempHitResult=new EP})();var T8=function(){function n(a,e){this._delta=new z,this._nativeEvents=[],this._onWheelEvent=this._onWheelEvent.bind(this),this._target=e,this._addEventListener()}var r=n.prototype;return r._update=function(){var e=this,t=e._delta;t.set(0,0,0);var i=this,o=i._nativeEvents;if(o.length>0){for(var s=o.length-1;s>=0;s--){var l=o[s];t.x+=l.deltaX,t.y+=l.deltaY,t.z+=l.deltaZ}o.length=0}},r._addEventListener=function(){this._target.addEventListener("wheel",this._onWheelEvent)},r._removeEventListener=function(){this._target.removeEventListener("wheel",this._onWheelEvent),this._nativeEvents.length=0,this._delta.set(0,0,0)},r._destroy=function(){this._removeEventListener(),this._nativeEvents=null,this._delta=null},r._onWheelEvent=function(e){this._nativeEvents.push(e)},n}(),RP=function(){function n(a,e){this._initialized=!1,this._engine=a;var t=a._canvas._webCanvas;if(typeof OffscreenCanvas=="undefined"||!fr(t,OffscreenCanvas)){var i,o,s,l;this._wheelManager=new T8(a,(l=(i=e)==null?void 0:i.wheelTarget)!=null?l:t);var u;this._pointerManager=new d_(a,(u=(o=e)==null?void 0:o.pointerTarget)!=null?u:t);var c;this._keyboardManager=new _8(a,(c=(s=e)==null?void 0:s.keyboardTarget)!=null?c:window),this._initialized=!0}}var r=n.prototype;return r.isKeyHeldDown=function(e){return this._initialized?e===void 0?this._keyboardManager._curFrameHeldDownList.length>0:this._keyboardManager._curHeldDownKeyToIndexMap[e]!=null:!1},r.isKeyDown=function(e){return this._initialized?e===void 0?this._keyboardManager._curFrameDownList.length>0:this._keyboardManager._downKeyToFrameCountMap[e]===this._engine.time.frameCount:!1},r.isKeyUp=function(e){return this._initialized?e===void 0?this._keyboardManager._curFrameUpList.length>0:this._keyboardManager._upKeyToFrameCountMap[e]===this._engine.time.frameCount:!1},r.isPointerHeldDown=function(e){return this._initialized?e===void 0?this._pointerManager._buttons!==0:(this._pointerManager._buttons&e)!==0:!1},r.isPointerDown=function(e){return this._initialized?e===void 0?this._pointerManager._downList.length>0:this._pointerManager._downMap[Zb[e]]===this._engine.time.frameCount:!1},r.isPointerUp=function(e){return this._initialized?e===void 0?this._pointerManager._upList.length>0:this._pointerManager._upMap[Zb[e]]===this._engine.time.frameCount:!1},r._update=function(){this._initialized&&(this._wheelManager._update(),this._pointerManager._update(),this._keyboardManager._update())},r._firePointerScript=function(e){this._initialized&&this._pointerManager._firePointerScript(e)},r._destroy=function(){this._initialized&&(this._wheelManager._destroy(),this._wheelManager=null,this._pointerManager._destroy(),this._pointerManager=null,this._keyboardManager._destroy(),this._keyboardManager=null)},Ie(n,[{key:"pointers",get:function(){return this._initialized?this._pointerManager._pointers:[]}},{key:"multiPointerEnabled",get:function(){return this._initialized?this._pointerManager._multiPointerEnabled:!1},set:function(e){this._initialized&&(this._pointerManager._multiPointerEnabled=e)}},{key:"wheelDelta",get:function(){return this._initialized?this._wheelManager._delta:null}}]),n}(),s0;(function(n){n.cornerTextureCoordinate="a_CornerTextureCoordinate"})(s0||(s0={}));var ja;(function(n){n.ShapePositionStartLifeTime="a_ShapePositionStartLifeTime",n.DirectionTime="a_DirectionTime",n.StartColor="a_StartColor",n.StartSize="a_StartSize",n.StartRotation0="a_StartRotation0",n.StartSpeed="a_StartSpeed",n.Random0="a_Random0",n.Random1="a_Random1",n.SimulationWorldPosition="a_SimulationWorldPosition",n.SimulationWorldRotation="a_SimulationWorldRotation",n.SimulationUV="a_SimulationUV"})(ja||(ja={}));var R8=function(r){this.billboardVertexElement=new Kt(s0.cornerTextureCoordinate,0,rt.Vector4,0),this.instanceVertexElements=[new Kt(ja.ShapePositionStartLifeTime,0,rt.Vector4,1,1),new Kt(ja.DirectionTime,16,rt.Vector4,1,1),new Kt(ja.StartColor,32,rt.Vector4,1,1),new Kt(ja.StartSize,48,rt.Vector3,1,1),new Kt(ja.StartRotation0,60,rt.Vector3,1,1),new Kt(ja.StartSpeed,72,rt.Float,1,1),new Kt(ja.Random0,76,rt.Vector4,1,1),new Kt(ja.Random1,92,rt.Vector4,1,1),new Kt(ja.SimulationWorldPosition,108,rt.Vector3,1,1),new Kt(ja.SimulationWorldRotation,120,rt.Vector4,1,1),new Kt(ja.SimulationUV,136,rt.Vector4,1,1)],this.instanceVertexStride=152,this.instanceVertexFloatStride=this.instanceVertexStride/4,this.startLifeTimeOffset=3,this.timeOffset=7,this.simulationUVOffset=34,this.billboardIndexCount=6;var a=16,e=new ha(r,kr.VertexBuffer,a*4,Dn.Static,!1);e.isGCIgnored=!0,this.billboardVertexBufferBinding=new Hl(e,a);var t=new ha(r,kr.IndexBuffer,this.billboardIndexCount,Dn.Static,!1);t.isGCIgnored=!0,this.billboardIndexBufferBinding=new ld(t,Lr.UInt8);var i=new Float32Array([-.5,-.5,0,1,.5,-.5,1,1,.5,.5,1,0,-.5,.5,0,0]),o=new Uint8Array([0,2,3,0,1,2]);e.setData(i),t.setData(o),r.resourceManager.addContentRestorer(new(function(s){be(l,s);function l(){return s.call(this,e)}var u=l.prototype;return u.restoreContent=function(){e.setData(i)},l}(Ya))),r.resourceManager.addContentRestorer(new(function(s){be(l,s);function l(){return s.call(this,t)}var u=l.prototype;return u.restoreContent=function(){},l}(Ya)))},A8=`#define GLSLIFY 1
uniform mediump sampler2D renderer_BlitTexture;
#ifdef HAS_TEX_LOD
uniform float renderer_BlitMipLevel;
#endif
varying vec2 v_uv;void main(){
#ifdef HAS_TEX_LOD
gl_FragColor=texture2DLodEXT(renderer_BlitTexture,v_uv,renderer_BlitMipLevel);
#else
gl_FragColor=texture2D(renderer_BlitTexture,v_uv);
#endif
}`,w8=`#define GLSLIFY 1
attribute vec4 POSITION_UV;varying vec2 v_uv;void main(){gl_Position=vec4(POSITION_UV.xy,0.0,1.0);v_uv=POSITION_UV.zw;}`,P8=`#define GLSLIFY 1
#include <common>
const float MIE_G=-0.990;const float MIE_G2=0.9801;const float SKY_GROUND_THRESHOLD=0.02;uniform float material_SunSize;uniform float material_SunSizeConvergence;uniform vec4 scene_SunlightColor;uniform vec3 scene_SunlightDirection;varying vec3 v_GroundColor;varying vec3 v_SkyColor;
#ifdef MATERIAL_SUN_HIGH_QUALITY
varying vec3 v_Vertex;
#elif defined(MATERIAL_SUN_SIMPLE)
varying vec3 v_RayDir;
#else
varying float v_SkyGroundFactor;
#endif
#if defined(MATERIAL_SUN_HIGH_QUALITY)||defined(MATERIAL_SUN_SIMPLE)
varying vec3 v_SunColor;
#endif
#if defined(ENGINE_IS_COLORSPACE_GAMMA)
#define LINEAR_2_OUTPUT(color) sqrt(color)
#endif
float getMiePhase(float eyeCos,float eyeCos2){float temp=1.0+MIE_G2-2.0*MIE_G*eyeCos;temp=pow(temp,pow(material_SunSize,0.65)*10.0);temp=max(temp,1.0e-4);temp=1.5*((1.0-MIE_G2)/(2.0+MIE_G2))*(1.0+eyeCos2)/temp;return temp;}float calcSunAttenuation(vec3 lightPos,vec3 ray){
#ifdef MATERIAL_SUN_HIGH_QUALITY
float focusedEyeCos=pow(clamp(dot(lightPos,ray),0.0,1.0),material_SunSizeConvergence);return getMiePhase(-focusedEyeCos,focusedEyeCos*focusedEyeCos);
#else
vec3 delta=lightPos-ray;float dist=length(delta);float spot=1.0-smoothstep(0.0,material_SunSize,dist);return spot*spot;
#endif
}void main(){vec3 col=vec3(0.0,0.0,0.0);
#ifdef MATERIAL_SUN_HIGH_QUALITY
vec3 ray=normalize(v_Vertex);float y=ray.y/SKY_GROUND_THRESHOLD;
#elif defined(MATERIAL_SUN_SIMPLE)
vec3 ray=v_RayDir;float y=ray.y/SKY_GROUND_THRESHOLD;
#else
float y=v_SkyGroundFactor;
#endif
col=mix(v_SkyColor,v_GroundColor,clamp(y,0.0,1.0));
#if defined(MATERIAL_SUN_HIGH_QUALITY)||defined(MATERIAL_SUN_SIMPLE)
if(y<0.0)col+=v_SunColor*calcSunAttenuation(-scene_SunlightDirection,-ray);
#endif
#ifdef ENGINE_IS_COLORSPACE_GAMMA
col=LINEAR_2_OUTPUT(col);
#endif
gl_FragColor=vec4(col,1.0);
#ifndef ENGINE_IS_COLORSPACE_GAMMA
gl_FragColor=linearToGamma(gl_FragColor);
#endif
}`,M8=`#define GLSLIFY 1
#define OUTER_RADIUS 1.025
#define RAYLEIGH (mix(0.0, 0.0025, pow(material_AtmosphereThickness,2.5)))
#define MIE 0.0010
#define SUN_BRIGHTNESS 20.0
#define MAX_SCATTER 50.0
const float SKY_GROUND_THRESHOLD=0.02;const float outerRadius=OUTER_RADIUS;const float outerRadius2=OUTER_RADIUS*OUTER_RADIUS;const float innerRadius=1.0;const float innerRadius2=1.0;const float cameraHeight=0.0001;const float HDSundiskIntensityFactor=15.0;const float simpleSundiskIntensityFactor=27.0;const float sunScale=400.0*SUN_BRIGHTNESS;const float kmESun=MIE*SUN_BRIGHTNESS;const float km4PI=MIE*4.0*3.14159265;const float scale=1.0/(OUTER_RADIUS-1.0);const float scaleDepth=0.25;const float scaleOverScaleDepth=(1.0/(OUTER_RADIUS-1.0))/0.25;const float samples=2.0;const vec3 c_DefaultScatteringWavelength=vec3(0.65,0.57,0.475);const vec3 c_VariableRangeForScatteringWavelength=vec3(0.15,0.15,0.15);attribute vec4 POSITION;uniform mat4 camera_VPMat;uniform vec3 material_SkyTint;uniform vec3 material_GroundTint;uniform float material_Exposure;uniform float material_AtmosphereThickness;uniform vec4 scene_SunlightColor;uniform vec3 scene_SunlightDirection;varying vec3 v_GroundColor;varying vec3 v_SkyColor;
#ifdef MATERIAL_SUN_HIGH_QUALITY
varying vec3 v_Vertex;
#elif defined(MATERIAL_SUN_SIMPLE)
varying vec3 v_RayDir;
#else
varying float v_SkyGroundFactor;
#endif
#if defined(MATERIAL_SUN_HIGH_QUALITY)||defined(MATERIAL_SUN_SIMPLE)
varying vec3 v_SunColor;
#endif
#if defined(ENGINE_IS_COLORSPACE_GAMMA)
#define COLOR_2_GAMMA(color) color
#define COLOR_2_LINEAR(color) color*color
#else
#define GAMMA 2.2
#define COLOR_2_GAMMA(color) pow(color,vec3(1.0/GAMMA))
#define COLOR_2_LINEAR(color) color
#endif
float getRayleighPhase(vec3 light,vec3 ray){float eyeCos=dot(light,ray);return 0.75+0.75*eyeCos*eyeCos;}float scaleAngle(float inCos){float x=1.0-inCos;return 0.25*exp(-0.00287+x*(0.459+x*(3.83+x*(-6.80+x*5.25))));}void main(){gl_Position=camera_VPMat*vec4(POSITION.xyz,1.0);vec3 skyTintInGammaSpace=COLOR_2_GAMMA(material_SkyTint);vec3 scatteringWavelength=mix(c_DefaultScatteringWavelength-c_VariableRangeForScatteringWavelength,c_DefaultScatteringWavelength+c_VariableRangeForScatteringWavelength,vec3(1.0)-skyTintInGammaSpace);vec3 invWavelength=1.0/pow(scatteringWavelength,vec3(4.0));float krESun=RAYLEIGH*SUN_BRIGHTNESS;float kr4PI=RAYLEIGH*4.0*3.14159265;vec3 cameraPos=vec3(0.0,innerRadius+cameraHeight,0.0);vec3 eyeRay=normalize(POSITION.xyz);float far=0.0;vec3 cIn,cOut;if(eyeRay.y>=0.0){far=sqrt(outerRadius2+innerRadius2*eyeRay.y*eyeRay.y-innerRadius2)-innerRadius*eyeRay.y;float height=innerRadius+cameraHeight;float depth=exp(scaleOverScaleDepth*-cameraHeight);float startAngle=dot(eyeRay,cameraPos)/height;float startOffset=depth*scaleAngle(startAngle);float sampleLength=far/samples;float scaledLength=sampleLength*scale;vec3 sampleRay=eyeRay*sampleLength;vec3 samplePoint=cameraPos+sampleRay*0.5;vec3 frontColor=vec3(0.0);{float height=length(samplePoint);float depth=exp(scaleOverScaleDepth*(innerRadius-height));float lightAngle=dot(-scene_SunlightDirection,samplePoint)/height;float cameraAngle=dot(eyeRay,samplePoint)/height;float scatter=(startOffset+depth*(scaleAngle(lightAngle)-scaleAngle(cameraAngle)));vec3 attenuate=exp(-clamp(scatter,0.0,MAX_SCATTER)*(invWavelength*kr4PI+km4PI));frontColor+=attenuate*(depth*scaledLength);samplePoint+=sampleRay;}{float height=length(samplePoint);float depth=exp(scaleOverScaleDepth*(innerRadius-height));float lightAngle=dot(-scene_SunlightDirection,samplePoint)/height;float cameraAngle=dot(eyeRay,samplePoint)/height;float scatter=(startOffset+depth*(scaleAngle(lightAngle)-scaleAngle(cameraAngle)));vec3 attenuate=exp(-clamp(scatter,0.0,MAX_SCATTER)*(invWavelength*kr4PI+km4PI));frontColor+=attenuate*(depth*scaledLength);samplePoint+=sampleRay;}cIn=frontColor*(invWavelength*krESun);cOut=frontColor*kmESun;}else{far=(-cameraHeight)/(min(-0.001,eyeRay.y));vec3 pos=cameraPos+far*eyeRay;float depth=exp((-cameraHeight)*(1.0/scaleDepth));float cameraAngle=dot(-eyeRay,pos);float lightAngle=dot(-scene_SunlightDirection,pos);float cameraScale=scaleAngle(cameraAngle);float lightScale=scaleAngle(lightAngle);float cameraOffset=depth*cameraScale;float temp=lightScale+cameraScale;float sampleLength=far/samples;float scaledLength=sampleLength*scale;vec3 sampleRay=eyeRay*sampleLength;vec3 samplePoint=cameraPos+sampleRay*0.5;vec3 frontColor=vec3(0.0,0.0,0.0);vec3 attenuate;{float height=length(samplePoint);float depth=exp(scaleOverScaleDepth*(innerRadius-height));float scatter=depth*temp-cameraOffset;attenuate=exp(-clamp(scatter,0.0,MAX_SCATTER)*(invWavelength*kr4PI+km4PI));frontColor+=attenuate*(depth*scaledLength);samplePoint+=sampleRay;}cIn=frontColor*(invWavelength*krESun+kmESun);cOut=clamp(attenuate,0.0,1.0);}
#ifdef MATERIAL_SUN_HIGH_QUALITY
v_Vertex=-POSITION.xyz;
#elif defined(MATERIAL_SUN_SIMPLE)
v_RayDir=-eyeRay;
#else
v_SkyGroundFactor=-eyeRay.y/SKY_GROUND_THRESHOLD;
#endif
v_GroundColor=material_Exposure*(cIn+COLOR_2_LINEAR(material_GroundTint)*cOut);v_SkyColor=material_Exposure*(cIn*getRayleighPhase(-scene_SunlightDirection,-eyeRay));float lightColorIntensity=clamp(length(scene_SunlightColor.xyz),0.25,1.0);
#ifdef MATERIAL_SUN_HIGH_QUALITY
v_SunColor=HDSundiskIntensityFactor*clamp(cOut,0.0,1.0)*scene_SunlightColor.xyz/lightColorIntensity;
#elif defined(MATERIAL_SUN_SIMPLE)
v_SunColor=simpleSundiskIntensityFactor*clamp(cOut*sunScale,0.0,1.0)*scene_SunlightColor.xyz/lightColorIntensity;
#endif
}`,O8=`#define GLSLIFY 1
uniform sampler2D material_BaseTexture;varying vec2 v_uv;void main(){gl_FragColor=texture2D(material_BaseTexture,v_uv);}`,I8=`#define GLSLIFY 1
attribute vec3 POSITION;attribute vec2 TEXCOORD_0;varying vec2 v_uv;void main(){gl_Position=vec4(POSITION,1.0);v_uv=TEXCOORD_0;}`,L8=`#define GLSLIFY 1
#include <common>
#include <camera_declare>
#include <uv_share>
#include <normal_share>
#include <color_share>
#include <worldpos_share>
#include <light_frag_define>
#include <ShadowFragmentDeclaration>
#include <mobile_material_frag>
#include <FogFragmentDeclaration>
#include <normal_get>
void main(){
#include <begin_mobile_frag>
#include <begin_viewdir_frag>
#include <mobile_blinnphong_frag>
gl_FragColor=emission+ambient+diffuse+specular;
#ifdef MATERIAL_IS_TRANSPARENT
gl_FragColor.a=diffuse.a;
#else
gl_FragColor.a=1.0;
#endif
#include <FogFragment>
#ifndef ENGINE_IS_COLORSPACE_GAMMA
gl_FragColor=linearToGamma(gl_FragColor);
#endif
}`,N8=`#define GLSLIFY 1
#include <common>
#include <common_vert>
#include <blendShape_input>
#include <uv_share>
#include <color_share>
#include <normal_share>
#include <worldpos_share>
#include <ShadowVertexDeclaration>
#include <FogVertexDeclaration>
void main(){
#include <begin_position_vert>
#include <begin_normal_vert>
#include <blendShape_vert>
#include <skinning_vert>
#include <uv_vert>
#include <color_vert>
#include <normal_vert>
#include <worldpos_vert>
#include <position_vert>
#include <ShadowVertex>
#include <FogVertex>
}`,F8=`#define GLSLIFY 1
void main(){}`,D8=`#define GLSLIFY 1
#include <common>
#include <common_vert>
#include <blendShape_input>
uniform mat4 camera_VPMat;void main(){
#include <begin_position_vert>
#include <blendShape_vert>
#include <skinning_vert>
#include <position_vert>
}`,B8=`#define GLSLIFY 1
#include <common>
varying vec4 v_Color;varying vec2 v_TextureCoordinate;uniform sampler2D material_BaseTexture;uniform vec4 material_BaseColor;
#ifdef RENDERER_MODE_MESH
varying vec4 v_MeshColor;
#endif
void main(){vec4 color=material_BaseColor*v_Color;
#ifdef RENDERER_MODE_MESH
color*=v_MeshColor;
#endif
#ifdef MATERIAL_HAS_BASETEXTURE
vec4 textureColor=texture2D(material_BaseTexture,v_TextureCoordinate);
#ifndef ENGINE_IS_COLORSPACE_GAMMA
textureColor=gammaToLinear(textureColor);
#endif
color*=textureColor;
#endif
gl_FragColor=color;
#ifndef ENGINE_IS_COLORSPACE_GAMMA
gl_FragColor=linearToGamma(gl_FragColor);
#endif
}`,k8=`#define GLSLIFY 1
#if defined(RENDERER_MODE_SPHERE_BILLBOARD) || defined(RENDERER_MODE_STRETCHED_BILLBOARD) || defined(RENDERER_MODE_HORIZONTAL_BILLBOARD) || defined(RENDERER_MODE_VERTICAL_BILLBOARD)
attribute vec4 a_CornerTextureCoordinate;
#endif
#ifdef RENDERER_MODE_MESH
attribute vec3 a_MeshPosition;attribute vec4 a_MeshColor;attribute vec2 a_MeshTextureCoordinate;varying vec4 v_MeshColor;
#endif
attribute vec4 a_ShapePositionStartLifeTime;attribute vec4 a_DirectionTime;attribute vec4 a_StartColor;attribute vec3 a_StartSize;attribute vec3 a_StartRotation0;attribute float a_StartSpeed;attribute vec4 a_Random0;
#if defined(RENDERER_TSA_FRAME_RANDOM_CURVES) || defined(RENDERER_VOL_RANDOM_CONSTANT) || defined(RENDERER_VOL_RANDOM_CURVE)
attribute vec4 a_Random1;
#endif
attribute vec3 a_SimulationWorldPosition;attribute vec4 a_SimulationWorldRotation;varying vec4 v_Color;
#ifdef MATERIAL_HAS_BASETEXTURE
attribute vec4 a_SimulationUV;varying vec2 v_TextureCoordinate;
#endif
uniform float renderer_CurrentTime;uniform vec3 renderer_Gravity;uniform vec2 u_DragConstant;uniform vec3 renderer_WorldPosition;uniform vec4 renderer_WorldRotation;uniform bool renderer_ThreeDStartRotation;uniform int renderer_ScalingMode;uniform vec3 renderer_PositionScale;uniform vec3 renderer_SizeScale;uniform vec3 renderer_PivotOffset;uniform mat4 camera_ViewMat;uniform mat4 camera_ProjMat;
#ifdef RENDERER_MODE_STRETCHED_BILLBOARD
uniform vec3 camera_Position;
#endif
uniform vec3 camera_Forward;uniform vec3 camera_Up;uniform float renderer_StretchedBillboardLengthScale;uniform float renderer_StretchedBillboardSpeedScale;uniform int renderer_SimulationSpace;
#include <particle_common>
#include <velocity_over_lifetime_module>
#include <color_over_lifetime_module>
#include <size_over_lifetime_module>
#include <rotation_over_lifetime_module>
#include <texture_sheet_animation_module>
void main(){float age=renderer_CurrentTime-a_DirectionTime.w;float normalizedAge=age/a_ShapePositionStartLifeTime.w;vec3 lifeVelocity;if(normalizedAge<1.0){vec3 startVelocity=a_DirectionTime.xyz*a_StartSpeed;
#if defined(RENDERER_VOL_CONSTANT) || defined(RENDERER_VOL_CURVE) || defined(RENDERER_VOL_RANDOM_CONSTANT) || defined(RENDERER_VOL_RANDOM_CURVE)
lifeVelocity=computeParticleLifeVelocity(normalizedAge);
#endif
vec3 gravityVelocity=renderer_Gravity*age;vec4 worldRotation;if(renderer_SimulationSpace==0){worldRotation=renderer_WorldRotation;}else{worldRotation=a_SimulationWorldRotation;}vec3 dragData=a_DirectionTime.xyz*mix(u_DragConstant.x,u_DragConstant.y,a_Random0.x);vec3 center=computeParticlePosition(startVelocity,lifeVelocity,age,normalizedAge,gravityVelocity,worldRotation,dragData);
#include <sphere_billboard>
#include <stretched_billboard>
#include <horizontal_billboard>
#include <vertical_billboard>
#include <particle_mesh>
gl_Position=camera_ProjMat*camera_ViewMat*vec4(center,1.0);v_Color=computeParticleColor(a_StartColor,normalizedAge);
#ifdef MATERIAL_HAS_BASETEXTURE
vec2 simulateUV;
#if defined(RENDERER_MODE_SPHERE_BILLBOARD) || defined(RENDERER_MODE_STRETCHED_BILLBOARD) || defined(RENDERER_MODE_HORIZONTAL_BILLBOARD) || defined(RENDERER_MODE_VERTICAL_BILLBOARD)
simulateUV=a_CornerTextureCoordinate.zw*a_SimulationUV.xy+a_SimulationUV.zw;v_TextureCoordinate=computeParticleUV(simulateUV,normalizedAge);
#endif
#ifdef RENDERER_MODE_MESH
simulateUV=a_SimulationUV.xy+a_MeshTextureCoordinate*a_SimulationUV.zw;v_TextureCoordinate=computeParticleUV(simulateUV,normalizedAge);
#endif
#endif
}else{gl_Position=vec4(2.0,2.0,2.0,1.0);}}`,V8=`#define GLSLIFY 1
#include <common>
#include <camera_declare>
#include <FogFragmentDeclaration>
#include <uv_share>
#include <normal_share>
#include <color_share>
#include <worldpos_share>
#include <light_frag_define>
#include <pbr_frag_define>
#include <pbr_helper>
void main(){
#include <pbr_frag>
#include <FogFragment>
#ifndef ENGINE_IS_COLORSPACE_GAMMA
gl_FragColor=linearToGamma(gl_FragColor);
#endif
}`,U8=`#define GLSLIFY 1
#define IS_METALLIC_WORKFLOW
#include <common>
#include <camera_declare>
#include <FogFragmentDeclaration>
#include <uv_share>
#include <normal_share>
#include <color_share>
#include <worldpos_share>
#include <light_frag_define>
#include <pbr_frag_define>
#include <pbr_helper>
void main(){
#include <pbr_frag>
#include <FogFragment>
#ifndef ENGINE_IS_COLORSPACE_GAMMA
gl_FragColor=linearToGamma(gl_FragColor);
#endif
}`,tC=`#define GLSLIFY 1
#include <common>
#include <common_vert>
#include <blendShape_input>
#include <uv_share>
#include <color_share>
#include <normal_share>
#include <worldpos_share>
#include <ShadowVertexDeclaration>
#include <FogVertexDeclaration>
void main(){
#include <begin_position_vert>
#include <begin_normal_vert>
#include <blendShape_vert>
#include <skinning_vert>
#include <uv_vert>
#include <color_vert>
#include <normal_vert>
#include <worldpos_vert>
#include <position_vert>
#include <ShadowVertex>
#include <FogVertex>
}`,z8=`#define GLSLIFY 1
#ifdef ENGINE_NO_DEPTH_TEXTURE
vec4 pack(float depth){const vec4 bitShift=vec4(1.0,256.0,256.0*256.0,256.0*256.0*256.0);const vec4 bitMask=vec4(1.0/256.0,1.0/256.0,1.0/256.0,0.0);vec4 rgbaDepth=fract(depth*bitShift);rgbaDepth-=rgbaDepth.gbaa*bitMask;return rgbaDepth;}
#endif
void main(){
#ifdef ENGINE_NO_DEPTH_TEXTURE
gl_FragColor=pack(gl_FragCoord.z);
#else
gl_FragColor=vec4(0.0,0.0,0.0,0.0);
#endif
}`,G8=`#define GLSLIFY 1
#include <common>
#include <common_vert>
#include <blendShape_input>
#include <normal_share>
uniform mat4 camera_VPMat;uniform vec2 scene_ShadowBias;uniform vec3 scene_LightDirection;vec3 applyShadowBias(vec3 positionWS){positionWS-=scene_LightDirection*scene_ShadowBias.x;return positionWS;}vec3 applyShadowNormalBias(vec3 positionWS,vec3 normalWS){float invNdotL=1.0-clamp(dot(-scene_LightDirection,normalWS),0.0,1.0);float scale=invNdotL*scene_ShadowBias.y;positionWS+=normalWS*vec3(scale);return positionWS;}void main(){
#include <begin_position_vert>
#include <begin_normal_vert>
#include <blendShape_vert>
#include <skinning_vert>
vec4 positionWS=renderer_ModelMat*position;positionWS.xyz=applyShadowBias(positionWS.xyz);
#ifndef MATERIAL_OMIT_NORMAL
#ifdef RENDERER_HAS_NORMAL
vec3 normalWS=normalize(mat3(renderer_NormalMat)*normal);positionWS.xyz=applyShadowNormalBias(positionWS.xyz,normalWS);
#endif
#endif
vec4 positionCS=camera_VPMat*positionWS;positionCS.z=max(positionCS.z,-1.0);gl_Position=positionCS;}`,H8=`#define GLSLIFY 1
#include <common>
uniform samplerCube material_CubeTexture;varying vec3 v_cubeUV;uniform float material_Exposure;uniform vec4 material_TintColor;void main(){vec4 textureColor=textureCube(material_CubeTexture,v_cubeUV);
#ifdef MATERIAL_IS_DECODE_SKY_RGBM
textureColor=RGBMToLinear(textureColor,5.0);
#elif !defined(ENGINE_IS_COLORSPACE_GAMMA)
textureColor=gammaToLinear(textureColor);
#endif
textureColor.rgb*=material_Exposure*material_TintColor.rgb;gl_FragColor=textureColor;
#if defined(MATERIAL_IS_DECODE_SKY_RGBM) || !defined(ENGINE_IS_COLORSPACE_GAMMA)
gl_FragColor=linearToGamma(gl_FragColor);
#endif
}`,j8=`#define GLSLIFY 1
#include <common_vert>
uniform mat4 camera_VPMat;varying vec3 v_cubeUV;uniform float material_Rotation;vec4 rotateY(vec4 v,float angle){const float deg2rad=3.1415926/180.0;float radian=angle*deg2rad;float sina=sin(radian);float cosa=cos(radian);mat2 m=mat2(cosa,-sina,sina,cosa);return vec4(m*v.xz,v.yw).xzyw;}void main(){v_cubeUV=vec3(-POSITION.x,POSITION.yz);gl_Position=camera_VPMat*rotateY(vec4(POSITION,1.0),material_Rotation);}`,W8=`#define GLSLIFY 1
uniform sampler2D renderer_MaskTexture;uniform float renderer_MaskAlphaCutoff;varying vec2 v_uv;void main(){vec4 color=texture2D(renderer_MaskTexture,v_uv);if(color.a<renderer_MaskAlphaCutoff){discard;}gl_FragColor=color;}`,$8=`#define GLSLIFY 1
uniform mat4 camera_VPMat;attribute vec3 POSITION;attribute vec2 TEXCOORD_0;varying vec2 v_uv;void main(){gl_Position=camera_VPMat*vec4(POSITION,1.0);v_uv=TEXCOORD_0;}`,X8=`#define GLSLIFY 1
uniform sampler2D renderer_SpriteTexture;varying vec2 v_uv;varying vec4 v_color;void main(){vec4 baseColor=texture2D(renderer_SpriteTexture,v_uv);gl_FragColor=baseColor*v_color;}`,K8=`#define GLSLIFY 1
uniform mat4 renderer_MVPMat;attribute vec3 POSITION;attribute vec2 TEXCOORD_0;attribute vec4 COLOR_0;varying vec2 v_uv;varying vec4 v_color;void main(){gl_Position=renderer_MVPMat*vec4(POSITION,1.0);v_uv=TEXCOORD_0;v_color=COLOR_0;}`,Y8=`#define GLSLIFY 1
#include <common>
#include <uv_share>
#include <FogFragmentDeclaration>
uniform vec4 material_BaseColor;uniform float material_AlphaCutoff;
#ifdef MATERIAL_HAS_BASETEXTURE
uniform sampler2D material_BaseTexture;
#endif
void main(){vec4 baseColor=material_BaseColor;
#ifdef MATERIAL_HAS_BASETEXTURE
vec4 textureColor=texture2D(material_BaseTexture,v_uv);
#ifndef ENGINE_IS_COLORSPACE_GAMMA
textureColor=gammaToLinear(textureColor);
#endif
baseColor*=textureColor;
#endif
#ifdef MATERIAL_IS_ALPHA_CUTOFF
if(baseColor.a<material_AlphaCutoff){discard;}
#endif
gl_FragColor=baseColor;
#ifndef MATERIAL_IS_TRANSPARENT
gl_FragColor.a=1.0;
#endif
#include <FogFragment>
#ifndef ENGINE_IS_COLORSPACE_GAMMA
gl_FragColor=linearToGamma(gl_FragColor);
#endif
}`,Q8=`#define GLSLIFY 1
#include <common>
#include <common_vert>
#include <blendShape_input>
#include <uv_share>
#include <FogVertexDeclaration>
void main(){
#include <begin_position_vert>
#include <blendShape_vert>
#include <skinning_vert>
#include <uv_vert>
#include <position_vert>
#include <FogVertex>
}`,q8=function(){function n(){}return n.init=function(){var a=new vr("ShadowCaster",G8,z8,{pipelineStage:da.ShadowCaster}),e=new vr("DepthOnly",D8,F8,{pipelineStage:da.DepthOnly}),t=[a,e],i={pipelineStage:da.Forward};vt.create("blinn-phong",[].concat(new vr("Forward",N8,L8,i),t)),vt.create("pbr",[].concat(new vr("Forward",tC,U8,i),t)),vt.create("pbr-specular",[].concat(new vr("Forward",tC,V8,i),t)),vt.create("unlit",[].concat(new vr("Forward",Q8,Y8,i),t)),vt.create("blit",[new vr("Forward",w8,A8,i)]),vt.create("skybox",[new vr("Forward",j8,H8,i)]),vt.create("SkyProcedural",[new vr("Forward",M8,P8,i)]),vt.create("particle-shader",[new vr("Forward",k8,B8,i)]),vt.create("SpriteMask",[new vr("Forward",$8,W8,i)]),vt.create("Sprite",[new vr("Forward",K8,X8,i)]),vt.create("background-texture",[new vr("Forward",I8,O8,i)])},n}(),J8=function(){function n(){this._cacheHierarchyDepth=1,this._cacheMap=Object.create(null)}var r=n.prototype;return r.get=function(e){var t=this._cacheMap,i=e._length,o=this._cacheHierarchyDepth;i>o&&(this._resizeCacheMapHierarchy(t,0,o,i-o),this._cacheHierarchyDepth=i);for(var s=e._mask,l=e._length-1,u=this._cacheHierarchyDepth-1,c=0;c<u;c++){var f=l<c?0:s[c],d=t[f];d||(t[f]=d=Object.create(null)),t=d}var h=l<u?0:s[u],_=t[h];return _||(this._lastQueryKey=h,this._lastQueryMap=t),_},r.cache=function(e){this._lastQueryMap[this._lastQueryKey]=e},r._destroy=function(){this._recursiveDestroy(0,this._cacheMap),this._cacheMap=Object.create(null)},r._recursiveDestroy=function(e,t){if(e===this._cacheHierarchyDepth-1){for(var i in t)t[i].destroy();return}++e;for(var o in t)this._recursiveDestroy(e,t[o])},r._resizeCacheMapHierarchy=function(e,t,i,o){if(t==i-1)for(var s in e){for(var l=e[s],u=e,c=0;c<o;c++)u[c==0?s:0]=u=Object.create(null);u[0]=l}else{t++;for(var f in e)this._resizeCacheMapHierarchy(e[f],t,i,o)}},n}(),AP=function(){function n(){}var r=n.prototype;return r._initialize=function(e,t){},r._update=function(){},r._destroy=function(){},r._getRequestAnimationFrame=function(){return null},r._getCancelAnimationFrame=function(){return null},r._getCameraClearFlagsMask=function(e){return Qr.None},n}();q8.init();var fs=function(n){be(r,n);function r(e,t,i){var o;o=n.call(this)||this,o._physicsInitialized=!1,o._physicalObjectsMap={},o._lastRenderState=new Ao,o._renderElementPool=new yl(i8),o._renderDataPool=new yl(f_),o._spriteRenderDataPool=new yl(u8),o._spriteMaskRenderDataPool=new yl(l8),o._textRenderDataPool=new yl(c8),o._spriteDefaultMaterials=[],o._renderContext=new Oa,o._renderCount=0,o._shaderProgramPools=[],o._canSpriteBatch=!0,o._fontMap={},o._macroCollection=new Ba,o._settings={},o._resourceManager=new cc(Et(o)),o._sceneManager=new bP(Et(o)),o._vSyncCount=1,o._targetFrameRate=60,o._time=new i_,o._isPaused=!0,o._vSyncCounter=1,o._targetFrameInterval=1e3/60,o._destroyed=!1,o._frameInProcess=!1,o._waitingDestroy=!1,o._isDeviceLost=!1,o._waitingGC=!1,o._animate=function(){if(o._vSyncCount){var p,v=((p=o.xrManager)==null?void 0:p._getRequestAnimationFrame())||requestAnimationFrame;o._requestId=v(o._animate),o._vSyncCounter++%o._vSyncCount===0&&(o.update(),o._vSyncCounter=1)}else o._timeoutId=window.setTimeout(o._animate,o._targetFrameInterval),o.update()},o._hardwareRenderer=t,o._hardwareRenderer.init(e,o._onDeviceLost.bind(Et(o)),o._onDeviceRestored.bind(Et(o))),o._canvas=e,o._spriteMaskManager=new s8(Et(o));var s=Et(o),l=s._spriteDefaultMaterials;o._spriteDefaultMaterial=l[ur.None]=o._createSpriteMaterial(ur.None),l[ur.VisibleInsideMask]=o._createSpriteMaterial(ur.VisibleInsideMask),l[ur.VisibleOutsideMask]=o._createSpriteMaterial(ur.VisibleOutsideMask),o._spriteMaskDefaultMaterial=o._createSpriteMaskMaterial(),o._textDefaultFont=uc.createFromOS(Et(o),"Arial"),o._textDefaultFont.isGCIgnored=!0,o.inputManager=new RP(Et(o),i.input);var u=i.xrDevice;if(u&&(o.xrManager=new AP,o.xrManager._initialize(Et(o),u)),o._initMagentaTextures(t),!t.canIUse(Ue.depthTexture))o._macroCollection.enable(r._noDepthTextureMacro);else{var c=new br(Et(o),1,1,ye.Depth16,!1);c.isGCIgnored=!0,o._depthTexture2D=c}var f=new Qa(Et(o),vt.find("unlit"));f.isGCIgnored=!0,f.shaderData.setColor("material_BaseColor",new Me(1,0,1.01,1)),o._meshMagentaMaterial=f;var d=new Qa(Et(o),vt.find("particle-shader"));d.isGCIgnored=!0,d.shaderData.setColor("material_BaseColor",new Me(1,0,1.01,1)),o._particleMagentaMaterial=d;var h=o._settings,_=i.colorSpace||Ja.Linear;return _===Ja.Gamma&&o._macroCollection.enable(r._gammaMacro),h.colorSpace=_,o._basicResources=new r8(Et(o)),o._particleBufferUtils=new R8(Et(o)),o}var a=r.prototype;return a.createEntity=function(t){return new yo(this,t)},a.pause=function(){var t;this._isPaused=!0;var i=((t=this.xrManager)==null?void 0:t._getCancelAnimationFrame())||cancelAnimationFrame;i(this._requestId),clearTimeout(this._timeoutId)},a.resume=function(){if(!!this._isPaused)if(this._isPaused=!1,this.time._reset(),this._vSyncCount){var t,i=((t=this.xrManager)==null?void 0:t._getRequestAnimationFrame())||requestAnimationFrame;this._requestId=i(this._animate)}else this._timeoutId=window.setTimeout(this._animate,this._targetFrameInterval)},a.update=function(){var t,i=this._time;i._update();var o=i.deltaTime;this._frameInProcess=!0,this._renderElementPool.resetPool(),this._renderDataPool.resetPool(),this._spriteRenderDataPool.resetPool(),this._spriteMaskRenderDataPool.resetPool(),this._textRenderDataPool.resetPool(),(t=this.xrManager)==null||t._update();var s=this,l=s.inputManager,u=s._physicsInitialized;l._update();for(var c=this._sceneManager._scenes.getLoopArray(),f=c.length,d=0;d<f;d++){var h=c[d];if(!(!h.isActive||h.destroyed)){var _=h._componentsManager;_.sortCameras(),_.callScriptOnStart()}}if(u)for(var p=0;p<f;p++){var v=c[p];!v.isActive||v.destroyed||v.physics._update(o)}u&&l._firePointerScript(c);for(var y=0;y<f;y++){var m=c[y];!m.isActive||m.destroyed||m._componentsManager.callScriptOnUpdate(o)}for(var g=0;g<f;g++){var x=c[g];!x.isActive||x.destroyed||x._componentsManager.callAnimationUpdate(o)}for(var b=0;b<f;b++){var S=c[b];!S.isActive||S.destroyed||S._componentsManager.callScriptOnLateUpdate(o)}if(this._isDeviceLost||this._render(c),this._waitingDestroy)this._destroy();else for(var C=0;C<f;C++){var E=c[C];!E.isActive||E.destroyed||E._componentsManager.handlingInvalidScripts()}this._waitingGC&&(this._gc(),this._waitingGC=!1),this._frameInProcess=!1},a.run=function(){this.resume(),this.dispatch("run",this)},a.forceLoseDevice=function(){this._hardwareRenderer.forceLoseDevice()},a.forceRestoreDevice=function(){this._hardwareRenderer.forceRestoreDevice()},a._destroy=function(){var t;this._sceneManager._destroyAllScene(),this._resourceManager._destroy(),this._textDefaultFont=null,this._fontMap=null,this.inputManager._destroy(),(t=this.xrManager)==null||t._destroy(),this.dispatch("shutdown",this),this.pause(),this._spriteMaskManager.destroy(),this._hardwareRenderer.destroy(),this.removeAllEventListeners(),this._animate=null,this._sceneManager=null,this._resourceManager=null,this._canvas=null,this._time=null,this._waitingDestroy=!1,this._destroyed=!0},a.destroy=function(){this._destroyed||(this._frameInProcess?this._waitingDestroy=!0:this._destroy())},a._getShaderProgramPool=function(t){var i=t._shaderPassId,o=this._shaderProgramPools,s=o[i];if(!s){var l=i+1;l>o.length&&(o.length=l),o[i]=s=new J8,t._shaderProgramPools.push(s)}return s},a._render=function(t){for(var i=function(h,_){var p=t[h];if(!p.isActive||p.destroyed)return"continue";var v=p._componentsManager._activeCameras;if(v.length===0)return Pt.debug("No active camera in scene."),"continue";v.forEach(function(y){var m=p._componentsManager;m.callCameraOnBeginRender(y),y.render(),m.callCameraOnEndRender(y),o._hardwareRenderer._options._forceFlush&&o._hardwareRenderer.flush()},function(y,m){y._cameraIndex=m})},o=this,s=this.time.deltaTime,l=0,u=t.length;l<u;l++){var c=t[l];!c.isActive||c.destroyed||(c._componentsManager.callRendererOnUpdate(s),c._updateShaderData())}for(var f=0,d=t.length;f<d;f++)i(f)},a._initMagentaTextures=function(t){var i=new Uint8Array([255,255,255,255]),o=new br(this,1,1,ye.R8G8B8A8,!1);o.setPixelBuffer(i),o.isGCIgnored=!0;var s=new Uint8Array([255,0,255,255]),l=new br(this,1,1,ye.R8G8B8A8,!1);l.setPixelBuffer(s),l.isGCIgnored=!0,this.resourceManager.addContentRestorer(new(function(_){be(p,_);function p(){return _.call(this,l)}var v=p.prototype;return v.restoreContent=function(){this.resource.setPixelBuffer(s)},p}(Ya)));for(var u=new Ma(this,1,ye.R8G8B8A8,!1),c=0;c<6;c++)u.setPixelBuffer(Oi.PositiveX+c,s);if(u.isGCIgnored=!0,this.resourceManager.addContentRestorer(new(function(_){be(p,_);function p(){return _.call(this,u)}var v=p.prototype;return v.restoreContent=function(){for(var m=0;m<6;m++)this.resource.setPixelBuffer(Oi.PositiveX+m,s)},p}(Ya))),this._whiteTexture2D=o,this._magentaTexture2D=l,this._magentaTextureCube=u,t.isWebGL2){var f=new Uint32Array([255,0,255,255]),d=new br(this,1,1,ye.R32G32B32A32_UInt,!1);d.setPixelBuffer(f),d.isGCIgnored=!0,this.resourceManager.addContentRestorer(new(function(_){be(p,_);function p(){return _.call(this,d)}var v=p.prototype;return v.restoreContent=function(){this.resource.setPixelBuffer(f)},p}(Ya)));var h=new mx(this,1,1,1,ye.R8G8B8A8,!1);h.setPixelBuffer(0,s),h.isGCIgnored=!0,this.resourceManager.addContentRestorer(new(function(_){be(p,_);function p(){return _.call(this,h)}var v=p.prototype;return v.restoreContent=function(){this.resource.setPixelBuffer(0,s)},p}(Ya))),this._uintMagentaTexture2D=d,this._magentaTexture2DArray=h}},a._pendingGC=function(){this._frameInProcess?this._waitingGC=!0:this._gc()},a._initialize=function(t){var i=this,o=t.shaderLab,s=t.physics;o&&(vt._shaderLab=o);var l=new Array;s&&l.push(s.initialize().then(function(){return ya._nativePhysics=s,i._nativePhysicsManager=s.createPhysicsManager(),i._physicsInitialized=!0,i}));var u=cc._loaders;for(var c in u){var f=u[c];f.initialize&&l.push(f.initialize(this,t))}return Promise.all(l).then(function(){return i})},a._createSpriteMaterial=function(t){var i=new Qa(this,vt.find("Sprite")),o=i.renderState,s=o.blendState.targetBlendState;if(s.enabled=!0,s.sourceColorBlendFactor=jt.SourceAlpha,s.destinationColorBlendFactor=jt.OneMinusSourceAlpha,s.sourceAlphaBlendFactor=jt.One,s.destinationAlphaBlendFactor=jt.OneMinusSourceAlpha,s.colorBlendOperation=s.alphaBlendOperation=Mr.Add,t!==ur.None){var l=o.stencilState;l.enabled=!0,l.writeMask=0,l.referenceValue=1;var u=t===ur.VisibleInsideMask?Xt.LessEqual:Xt.Greater;l.compareFunctionFront=u,l.compareFunctionBack=u}return o.depthState.writeEnabled=!1,o.rasterState.cullMode=Fr.Off,o.renderQueueType=ar.Transparent,i.isGCIgnored=!0,i},a._createSpriteMaskMaterial=function(){var t=new Qa(this,vt.find("SpriteMask")),i=t.renderState;return i.blendState.targetBlendState.colorWriteMask=Si.None,i.rasterState.cullMode=Fr.Off,i.stencilState.enabled=!0,i.depthState.enabled=!1,t.isGCIgnored=!0,t},a._onDeviceLost=function(){this._isDeviceLost=!0,this.resourceManager._lostGraphicResources(),console.log("Device lost."),this.dispatch("devicelost",this)},a._onDeviceRestored=function(){var t=this;this._hardwareRenderer.resetState(),this._lastRenderState=new Ao,this._shaderProgramPools.length=0;var i=this.resourceManager;i._restoreGraphicResources(),console.log("Graphic resource restored."),i._restoreResourcesContent().then(function(){console.log(`Graphic resource content restored.

Device restored.`),t.dispatch("devicerestored",t),t._isDeviceLost=!1}).catch(function(o){console.error(o)})},a._gc=function(){this._renderElementPool.garbageCollection(),this._renderDataPool.garbageCollection(),this._spriteRenderDataPool.garbageCollection(),this._spriteMaskRenderDataPool.garbageCollection(),this._textRenderDataPool.garbageCollection(),this._renderContext.garbageCollection()},Ie(r,[{key:"settings",get:function(){return this._settings}},{key:"canvas",get:function(){return this._canvas}},{key:"resourceManager",get:function(){return this._resourceManager}},{key:"sceneManager",get:function(){return this._sceneManager}},{key:"time",get:function(){return this._time}},{key:"isPaused",get:function(){return this._isPaused}},{key:"vSyncCount",get:function(){return this._vSyncCount},set:function(t){this._vSyncCount=Math.max(0,Math.floor(t))}},{key:"targetFrameRate",get:function(){return this._targetFrameRate},set:function(t){t=Math.max(1e-6,t),this._targetFrameRate=t,this._targetFrameInterval=1e3/t}},{key:"destroyed",get:function(){return this._destroyed}},{key:"physicsManager",get:function(){var t;return(t=this.sceneManager.scenes[0])==null?void 0:t.physics}}]),r}(vx);(function(){fs._gammaMacro=_t.getByName("ENGINE_IS_COLORSPACE_GAMMA")})();(function(){fs._noDepthTextureMacro=_t.getByName("ENGINE_NO_DEPTH_TEXTURE")})();(function(){fs._pixelsPerUnit=100})();var wP=function(){function n(){this._sizeUpdateFlagManager=new to}return Ie(n,[{key:"width",get:function(){return this._width},set:function(a){this._width!==a&&(this._width=a,this._onWidthChanged(a),this._sizeUpdateFlagManager.dispatch())}},{key:"height",get:function(){return this._height},set:function(a){this._height!==a&&(this._height=a,this._onHeightChange(a),this._sizeUpdateFlagManager.dispatch())}}]),n}(),Ro;(function(n){n[n.SolidColor=0]="SolidColor",n[n.Sky=1]="Sky",n[n.Texture=2]="Texture"})(Ro||(Ro={}));var Bs;(function(n){n[n.AspectFitWidth=0]="AspectFitWidth",n[n.AspectFitHeight=1]="AspectFitHeight",n[n.Fill=2]="Fill"})(Bs||(Bs={}));var fc=function(){function n(){}var r=n.prototype;return r.destroy=function(){this.mesh=null,this.material=null},r._render=function(e){var t=this,i=t.material,o=t.mesh;if(!i){Pt.warn("The material of sky is not defined.");return}if(i.destroyed){Pt.warn("The material of sky is destroyed.");return}if(!o){Pt.warn("The mesh of sky is not defined.");return}if(o.destroyed){Pt.warn("The mesh of sky is destroyed.");return}var s=e.camera,l=s.engine,u=s.scene,c=s.aspectRatio,f=s.fieldOfView,d=s.viewMatrix,h=s.shaderData,_=u.shaderData,p=n._viewProjMatrix,v=n._projectionMatrix,y=l._hardwareRenderer,m=i.shaderData,g=i.shader,x=i.renderState;p.copyFrom(d);var b=p.elements;b[12]=b[13]=b[14]=0;var S=1/Math.tan(ve.degreeToRadian(f)/2);v.elements[0]=S/c,v.elements[5]=S,Ge.multiply(v,p,p);var C=h.getMatrix(Oa.vpMatrixProperty);e.flipProjection&&Ge.multiply(Oa._flipYMatrix,p,p),h.setMatrix(Oa.vpMatrixProperty,p);var E=vt._compileMacros;Ba.unionCollection(e.camera._globalShaderMacro,m._macroCollection,E);var T=g.subShaders[0].passes[0],M=T._getShaderProgram(l,E);M.bind(),M.groupingOtherUniformBlock(),M.uploadAll(M.sceneUniformBlock,_),M.uploadAll(M.cameraUniformBlock,h),M.uploadAll(M.materialUniformBlock,m),M.uploadUnGroupTextures(),x._apply(l,!1,T._renderStateDataMap,m),y.drawPrimitive(o._primitive,o.subMesh,M),h.setMatrix(Oa.vpMatrixProperty,C)},Ie(n,[{key:"material",get:function(){return this._material},set:function(e){if(this._material!==e){var t,i;(t=e)==null||t._addReferCount(1),(i=this._material)==null||i._addReferCount(-1),this._material=e}}},{key:"mesh",get:function(){return this._mesh},set:function(e){if(this._mesh!==e){var t,i;(t=e)==null||t._addReferCount(1),(i=this._mesh)==null||i._addReferCount(-1),this._mesh=e}}}]),n}();(function(){fc._epsilon=1e-6})();(function(){fc._viewProjMatrix=new Ge})();(function(){fc._projectionMatrix=new Ge(1,0,0,0,0,1,0,0,0,0,fc._epsilon-1,-1,0,0,0,0)})();var PP=function(){function n(a){this._engine=a,this.mode=Ro.SolidColor,this.solidColor=new Me(.25,.25,.25,1),this.sky=new fc,this._textureFillMode=Bs.AspectFitHeight,this._texture=null,this._initMesh(a),this._initMaterial(a)}var r=n.prototype;return r.destroy=function(){this.texture=null,this._mesh._addReferCount(-1),this._mesh=null,this._material._addReferCount(-1),this._material=null,this.solidColor=null,this.sky.destroy()},r._resizeBackgroundTexture=function(){var e=this,t=e._texture,i=e._mesh;if(!!this._texture){var o=this._engine.canvas,s=o.width,l=o.height,u=i.getPositions();switch(this._textureFillMode){case Bs.Fill:u[0].set(-1,-1,1),u[1].set(1,-1,1),u[2].set(-1,1,1),u[3].set(1,1,1);break;case Bs.AspectFitWidth:var c=t.height*s/t.width/l;u[0].set(-1,-c,1),u[1].set(1,-c,1),u[2].set(-1,c,1),u[3].set(1,c,1);break;case Bs.AspectFitHeight:var f=t.width*l/t.height/s;u[0].set(-f,-1,1),u[1].set(f,-1,1),u[2].set(-f,1,1),u[3].set(f,1,1);break}i.setPositions(u),i.uploadData(!1)}},r._initMesh=function(e){this._mesh=this._createPlane(e),this._mesh._addReferCount(1)},r._initMaterial=function(e){var t=this._material=new Qa(e,vt.find("background-texture"));t.renderState.depthState.compareFunction=Xt.LessEqual,t._addReferCount(1)},r._createPlane=function(e){for(var t=new Kn(e),i=new Uint8Array([1,2,0,1,3,2]),o=new Array(4),s=new Array(4),l=0;l<4;++l)o[l]=new z,s[l]=new Ze(l%2,1-(l*.5|0));return t.setPositions(o),t.setUVs(s),t.setIndices(i),t.uploadData(!1),t.addSubMesh(0,i.length),t},Ie(n,[{key:"texture",get:function(){return this._texture},set:function(e){if(this._texture!==e){var t,i;(t=e)==null||t._addReferCount(1),(i=this._texture)==null||i._addReferCount(-1),this._texture=e,this._material.shaderData.setTexture("material_BaseTexture",e),this._resizeBackgroundTexture()}}},{key:"textureFillMode",get:function(){return this._textureFillMode},set:function(e){e!==this._textureFillMode&&(this._textureFillMode=e,this._resizeBackgroundTexture())}}]),n}(),Z8=function(){function n(){this._cameraNeedSorting=!1,this._activeCameras=new Nn,this._renderers=new Nn,this._onStartScripts=new Nn,this._onUpdateScripts=new Nn,this._onLateUpdateScripts=new Nn,this._onPhysicsUpdateScripts=new Nn,this._pendingDestroyScripts=[],this._disposeDestroyScripts=[],this._onUpdateAnimations=new Nn,this._onUpdateRenderers=new Nn,this._componentsContainerPool=[]}var r=n.prototype;return r.addCamera=function(e){e._cameraIndex=this._activeCameras.length,this._activeCameras.add(e),this._cameraNeedSorting=!0},r.removeCamera=function(e){var t=this._activeCameras.deleteByIndex(e._cameraIndex);t&&(t._cameraIndex=e._cameraIndex),e._cameraIndex=-1,this._cameraNeedSorting=!0},r.sortCameras=function(){if(this._cameraNeedSorting){var e=this._activeCameras;e.sort(function(o,s){return o.priority-s.priority});for(var t=0,i=e.length;t<i;t++)e.get(t)._cameraIndex=t;this._cameraNeedSorting=!1}},r.addRenderer=function(e){e._rendererIndex=this._renderers.length,this._renderers.add(e)},r.removeRenderer=function(e){var t=this._renderers.deleteByIndex(e._rendererIndex);t&&(t._rendererIndex=e._rendererIndex),e._rendererIndex=-1},r.addOnStartScript=function(e){e._onStartIndex=this._onStartScripts.length,this._onStartScripts.add(e)},r.removeOnStartScript=function(e){var t=this._onStartScripts.deleteByIndex(e._onStartIndex);t&&(t._onStartIndex=e._onStartIndex),e._onStartIndex=-1},r.addOnUpdateScript=function(e){e._onUpdateIndex=this._onUpdateScripts.length,this._onUpdateScripts.add(e)},r.removeOnUpdateScript=function(e){var t=this._onUpdateScripts.deleteByIndex(e._onUpdateIndex);t&&(t._onUpdateIndex=e._onUpdateIndex),e._onUpdateIndex=-1},r.addOnLateUpdateScript=function(e){e._onLateUpdateIndex=this._onLateUpdateScripts.length,this._onLateUpdateScripts.add(e)},r.removeOnLateUpdateScript=function(e){var t=this._onLateUpdateScripts.deleteByIndex(e._onLateUpdateIndex);t&&(t._onLateUpdateIndex=e._onLateUpdateIndex),e._onLateUpdateIndex=-1},r.addOnPhysicsUpdateScript=function(e){e._onPhysicsUpdateIndex=this._onPhysicsUpdateScripts.length,this._onPhysicsUpdateScripts.add(e)},r.removeOnPhysicsUpdateScript=function(e){var t=this._onPhysicsUpdateScripts.deleteByIndex(e._onPhysicsUpdateIndex);t&&(t._onPhysicsUpdateIndex=e._onPhysicsUpdateIndex),e._onPhysicsUpdateIndex=-1},r.addOnUpdateAnimations=function(e){e._onUpdateIndex=this._onUpdateAnimations.length,this._onUpdateAnimations.add(e)},r.removeOnUpdateAnimations=function(e){var t=this._onUpdateAnimations.deleteByIndex(e._onUpdateIndex);t&&(t._onUpdateIndex=e._onUpdateIndex),e._onUpdateIndex=-1},r.addOnUpdateRenderers=function(e){e._onUpdateIndex=this._onUpdateRenderers.length,this._onUpdateRenderers.add(e)},r.removeOnUpdateRenderers=function(e){var t=this._onUpdateRenderers.deleteByIndex(e._onUpdateIndex);t&&(t._onUpdateIndex=e._onUpdateIndex),e._onUpdateIndex=-1},r.addPendingDestroyScript=function(e){this._pendingDestroyScripts.push(e)},r.callScriptOnStart=function(){var e=this,t=this._onStartScripts;t.length>0&&t.forEachAndClean(function(i){i._started=!0,e.removeOnStartScript(i),i.onStart()})},r.callScriptOnUpdate=function(e){this._onUpdateScripts.forEach(function(t){t._started&&t.onUpdate(e)},function(t,i){t._onUpdateIndex=i})},r.callScriptOnLateUpdate=function(e){this._onLateUpdateScripts.forEach(function(t){t._started&&t.onLateUpdate(e)},function(t,i){t._onLateUpdateIndex=i})},r.callScriptOnPhysicsUpdate=function(){this._onPhysicsUpdateScripts.forEach(function(e){e._started&&e.onPhysicsUpdate()},function(e,t){e._onPhysicsUpdateIndex=t})},r.callAnimationUpdate=function(e){this._onUpdateAnimations.forEach(function(t){t.engine.time.frameCount>t._playFrameCount&&t.update(e)},function(t,i){t._onUpdateIndex=i})},r.callRendererOnUpdate=function(e){this._onUpdateRenderers.forEach(function(t){t.update(e)},function(t,i){t._onUpdateIndex=i})},r.handlingInvalidScripts=function(){var e=this,t=e._disposeDestroyScripts,i=e._pendingDestroyScripts;this._disposeDestroyScripts=i,this._pendingDestroyScripts=t;var o=i.length;if(o>0){for(var s=o-1;s>=0;s--)i[s].onDestroy();i.length=0}},r.callCameraOnBeginRender=function(e){e.entity._scripts.forEach(function(t){t.onBeginRender(e)},function(t,i){t._entityScriptsIndex=i})},r.callCameraOnEndRender=function(e){e.entity._scripts.forEach(function(t){t.onEndRender(e)},function(t,i){t._entityScriptsIndex=i})},r.getActiveChangedTempList=function(){return this._componentsContainerPool.length?this._componentsContainerPool.pop():[]},r.putActiveChangedTempList=function(e){e.length=0,this._componentsContainerPool.push(e)},r._gc=function(){this._renderers.garbageCollection(),this._onStartScripts.garbageCollection(),this._onUpdateScripts.garbageCollection(),this._onLateUpdateScripts.garbageCollection(),this._onPhysicsUpdateScripts.garbageCollection(),this._onUpdateAnimations.garbageCollection(),this._onUpdateRenderers.garbageCollection(),this._activeCameras.garbageCollection()},n}(),Qv;(function(n){n[n.None=0]="None",n[n.Linear=1]="Linear",n[n.Exponential=2]="Exponential",n[n.ExponentialSquared=3]="ExponentialSquared"})(Qv||(Qv={}));var el;(function(n){n[n.SolidColor=0]="SolidColor",n[n.SphericalHarmonics=1]="SphericalHarmonics"})(el||(el={}));var ri=function(n){be(r,n);function r(e){var t;return t=n.call(this,e)||this,t._diffuseSolidColor=new Me(.212,.227,.259),t._diffuseIntensity=1,t._specularIntensity=1,t._diffuseMode=el.SolidColor,t._shArray=new Float32Array(27),t._scenes=[],t._specularTextureDecodeRGBM=!1,t}var a=r.prototype;return a._addToScene=function(t){this._addReferCount(1),this._scenes.push(t);var i=t.shaderData;i.setColor(r._diffuseColorProperty,this._diffuseSolidColor),i.setFloat(r._diffuseIntensityProperty,this._diffuseIntensity),i.setFloat(r._specularIntensityProperty,this._specularIntensity),i.setFloatArray(r._diffuseSHProperty,this._shArray),this._setDiffuseMode(i),this._setSpecularTextureDecodeRGBM(i),this._setSpecularTexture(i)},a._removeFromScene=function(t){this._addReferCount(-1);var i=this._scenes,o=i.indexOf(t);i.splice(o,1);var s=t.shaderData;s.setTexture(r._specularTextureProperty,null),s.disableMacro(r._specularMacro)},a._setDiffuseMode=function(t){this._diffuseMode===el.SphericalHarmonics?t.enableMacro(r._shMacro):t.disableMacro(r._shMacro)},a._setSpecularTexture=function(t){this._specularTexture?(t.setTexture(r._specularTextureProperty,this._specularTexture),t.setFloat(r._mipLevelProperty,this._specularTexture.mipmapCount-1),t.enableMacro(r._specularMacro)):t.disableMacro(r._specularMacro)},a._setSpecularTextureDecodeRGBM=function(t){this._specularTextureDecodeRGBM?t.enableMacro(r._decodeRGBMMacro):t.disableMacro(r._decodeRGBMMacro)},a._preComputeSH=function(t,i){var o=t.coefficients;i[0]=o[0]*.886227,i[1]=o[1]*.886227,i[2]=o[2]*.886227,i[3]=o[3]*-1.023327,i[4]=o[4]*-1.023327,i[5]=o[5]*-1.023327,i[6]=o[6]*1.023327,i[7]=o[7]*1.023327,i[8]=o[8]*1.023327,i[9]=o[9]*-1.023327,i[10]=o[10]*-1.023327,i[11]=o[11]*-1.023327,i[12]=o[12]*.858086,i[13]=o[13]*.858086,i[14]=o[14]*.858086,i[15]=o[15]*-.858086,i[16]=o[16]*-.858086,i[17]=o[17]*-.858086,i[18]=o[18]*.247708,i[19]=o[19]*.247708,i[20]=o[20]*.247708,i[21]=o[21]*-.858086,i[22]=o[22]*-.858086,i[23]=o[23]*-.858086,i[24]=o[24]*.429042,i[25]=o[25]*.429042,i[26]=o[26]*.429042},Ie(r,[{key:"specularTextureDecodeRGBM",get:function(){return this._specularTextureDecodeRGBM},set:function(t){this._specularTextureDecodeRGBM=t;for(var i=this._scenes,o=0,s=i.length;o<s;o++)this._setSpecularTextureDecodeRGBM(i[o].shaderData)}},{key:"diffuseMode",get:function(){return this._diffuseMode},set:function(t){this._diffuseMode=t;for(var i=this._scenes,o=0,s=i.length;o<s;o++)this._setDiffuseMode(i[o].shaderData)}},{key:"diffuseSolidColor",get:function(){return this._diffuseSolidColor},set:function(t){t!==this._diffuseSolidColor&&this._diffuseSolidColor.copyFrom(t)}},{key:"diffuseSphericalHarmonics",get:function(){return this._diffuseSphericalHarmonics},set:function(t){if(this._diffuseSphericalHarmonics=t,t){this._preComputeSH(t,this._shArray);for(var i=this._scenes,o=0,s=i.length;o<s;o++)i[o].shaderData.setFloatArray(r._diffuseSHProperty,this._shArray)}}},{key:"diffuseIntensity",get:function(){return this._diffuseIntensity},set:function(t){this._diffuseIntensity=t;for(var i=this._scenes,o=0,s=i.length;o<s;o++)i[o].shaderData.setFloat(r._diffuseIntensityProperty,t)}},{key:"specularTexture",get:function(){return this._specularTexture},set:function(t){this._specularTexture=t;for(var i=this._scenes,o=0,s=i.length;o<s;o++)this._setSpecularTexture(i[o].shaderData)}},{key:"specularIntensity",get:function(){return this._specularIntensity},set:function(t){this._specularIntensity=t;for(var i=0,o=this._scenes.length;i<o;i++)this._scenes[i].shaderData.setFloat(r._specularIntensityProperty,t)}}]),r}(Io);(function(){ri._shMacro=_t.getByName("SCENE_USE_SH")})();(function(){ri._specularMacro=_t.getByName("SCENE_USE_SPECULAR_ENV")})();(function(){ri._decodeRGBMMacro=_t.getByName("SCENE_IS_DECODE_ENV_RGBM")})();(function(){ri._diffuseColorProperty=X.getByName("scene_EnvMapLight.diffuse")})();(function(){ri._diffuseSHProperty=X.getByName("scene_EnvSH")})();(function(){ri._diffuseIntensityProperty=X.getByName("scene_EnvMapLight.diffuseIntensity")})();(function(){ri._specularTextureProperty=X.getByName("scene_EnvSpecularSampler")})();(function(){ri._specularIntensityProperty=X.getByName("scene_EnvMapLight.specularIntensity")})();(function(){ri._mipLevelProperty=X.getByName("scene_EnvMapLight.mipMapLevel")})();var _i;(function(n){n[n.NoCascades=1]="NoCascades",n[n.TwoCascades=2]="TwoCascades",n[n.FourCascades=4]="FourCascades"})(_i||(_i={}));var ks;(function(n){n[n.Low=0]="Low",n[n.Medium=1]="Medium",n[n.High=2]="High",n[n.VeryHigh=3]="VeryHigh"})(ks||(ks={}));var ds;(function(n){n[n.None=0]="None",n[n.Hard=1]="Hard",n[n.SoftLow=2]="SoftLow",n[n.SoftHigh=3]="SoftHigh"})(ds||(ds={}));var kd=function(n){be(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e.intensity=1,e.cullingMask=cs.Everything,e.shadowType=ds.None,e.shadowBias=1,e.shadowNormalBias=1,e.shadowNearPlane=.1,e.shadowStrength=1,e._lightIndex=-1,e._lightColor=new Me,e._color=new Me(1,1,1,1),e}var a=r.prototype;return a._getLightIntensityColor=function(){return this._lightColor.r=this.color.r*this.intensity,this._lightColor.g=this.color.g*this.intensity,this._lightColor.b=this.color.b*this.intensity,this._lightColor.a=this.color.a*this.intensity,this._lightColor},Ie(r,[{key:"color",get:function(){return this._color},set:function(t){this._color!==t&&this._color.copyFrom(t)}},{key:"viewMatrix",get:function(){return this._viewMat||(this._viewMat=new Ge),Ge.invert(this.entity.transform.worldMatrix,this._viewMat),this._viewMat}},{key:"inverseViewMatrix",get:function(){return this._inverseViewMat||(this._inverseViewMat=new Ge),Ge.invert(this.viewMatrix,this._inverseViewMat),this._inverseViewMat}}]),r}(Zr);H([te],kd.prototype,"_lightIndex",void 0);var wo=function(n){be(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._reverseDirection=new z,e}var a=r.prototype;return a._appendData=function(t,i){var o=t*2,s=t*3,l=t*3,u=this._getLightIntensityColor(),c=this.direction,f=this.cullingMask;i.cullingMask[o]=f&65535,i.cullingMask[o+1]=f>>>16&65535,this.engine.settings.colorSpace===Ja.Linear?(i.color[s]=Me.gammaToLinearSpace(u.r),i.color[s+1]=Me.gammaToLinearSpace(u.g),i.color[s+2]=Me.gammaToLinearSpace(u.b)):(i.color[s]=u.r,i.color[s+1]=u.g,i.color[s+2]=u.b),i.direction[l]=c.x,i.direction[l+1]=c.y,i.direction[l+2]=c.z},a._onEnableInScene=function(){this.scene._lightManager._attachDirectLight(this)},a._onDisableInScene=function(){this.scene._lightManager._detachDirectLight(this)},r._updateShaderData=function(t,i){t.setIntArray(r._cullingMaskProperty,i.cullingMask),t.setFloatArray(r._colorProperty,i.color),t.setFloatArray(r._directionProperty,i.direction)},Ie(r,[{key:"direction",get:function(){return this.entity.transform.worldForward}},{key:"reverseDirection",get:function(){return z.scale(this.direction,-1,this._reverseDirection),this._reverseDirection}},{key:"_shadowProjectionMatrix",get:function(){throw"Unknown!"}}]),r}(kd);(function(){wo._cullingMaskProperty=X.getByName("scene_DirectLightCullingMask")})();(function(){wo._colorProperty=X.getByName("scene_DirectLightColor")})();(function(){wo._directionProperty=X.getByName("scene_DirectLightDirection")})();var hs=function(n){be(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e.distance=100,e}var a=r.prototype;return a._appendData=function(t,i){var o=t*2,s=t*3,l=t*3,u=t,c=this._getLightIntensityColor(),f=this.position,d=this.cullingMask;i.cullingMask[o]=d&65535,i.cullingMask[o+1]=d>>>16&65535,this.engine.settings.colorSpace===Ja.Linear?(i.color[s]=Me.gammaToLinearSpace(c.r),i.color[s+1]=Me.gammaToLinearSpace(c.g),i.color[s+2]=Me.gammaToLinearSpace(c.b)):(i.color[s]=c.r,i.color[s+1]=c.g,i.color[s+2]=c.b),i.position[l]=f.x,i.position[l+1]=f.y,i.position[l+2]=f.z,i.distance[u]=this.distance},a._onEnableInScene=function(){this.scene._lightManager._attachPointLight(this)},a._onDisableInScene=function(){this.scene._lightManager._detachPointLight(this)},r._updateShaderData=function(t,i){t.setIntArray(r._cullingMaskProperty,i.cullingMask),t.setFloatArray(r._colorProperty,i.color),t.setFloatArray(r._positionProperty,i.position),t.setFloatArray(r._distanceProperty,i.distance)},Ie(r,[{key:"position",get:function(){return this.entity.transform.worldPosition}},{key:"_shadowProjectionMatrix",get:function(){throw"Unknown!"}}]),r}(kd);(function(){hs._cullingMaskProperty=X.getByName("scene_PointLightCullingMask")})();(function(){hs._colorProperty=X.getByName("scene_PointLightColor")})();(function(){hs._positionProperty=X.getByName("scene_PointLightPosition")})();(function(){hs._distanceProperty=X.getByName("scene_PointLightDistance")})();var ti=function(n){be(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e.distance=100,e.angle=Math.PI/6,e.penumbra=Math.PI/12,e._inverseDirection=new z,e._projectMatrix=new Ge,e}var a=r.prototype;return a._appendData=function(t,i){var o=t*2,s=t*3,l=t*3,u=t*3,c=t,f=t,d=t,h=this._getLightIntensityColor(),_=this.position,p=this.direction,v=this.cullingMask;i.cullingMask[o]=v&65535,i.cullingMask[o+1]=v>>>16&65535,this.engine.settings.colorSpace===Ja.Linear?(i.color[s]=Me.gammaToLinearSpace(h.r),i.color[s+1]=Me.gammaToLinearSpace(h.g),i.color[s+2]=Me.gammaToLinearSpace(h.b)):(i.color[s]=h.r,i.color[s+1]=h.g,i.color[s+2]=h.b),i.position[l]=_.x,i.position[l+1]=_.y,i.position[l+2]=_.z,i.direction[u]=p.x,i.direction[u+1]=p.y,i.direction[u+2]=p.z,i.distance[c]=this.distance,i.angleCos[d]=Math.cos(this.angle),i.penumbraCos[f]=Math.cos(this.angle+this.penumbra)},a._onEnableInScene=function(){this.scene._lightManager._attachSpotLight(this)},a._onDisableInScene=function(){this.scene._lightManager._detachSpotLight(this)},r._updateShaderData=function(t,i){t.setIntArray(r._cullingMaskProperty,i.cullingMask),t.setFloatArray(r._colorProperty,i.color),t.setFloatArray(r._positionProperty,i.position),t.setFloatArray(r._directionProperty,i.direction),t.setFloatArray(r._distanceProperty,i.distance),t.setFloatArray(r._angleCosProperty,i.angleCos),t.setFloatArray(r._penumbraCosProperty,i.penumbraCos)},Ie(r,[{key:"position",get:function(){return this.entity.transform.worldPosition}},{key:"direction",get:function(){return this.entity.transform.worldForward}},{key:"reverseDirection",get:function(){return z.scale(this.direction,-1,this._inverseDirection),this._inverseDirection}},{key:"_shadowProjectionMatrix",get:function(){var t=this._projectMatrix,i=Math.min(Math.PI/2,this.angle*2*Math.sqrt(2));return Ge.perspective(i,1,this.shadowNearPlane,this.distance+this.shadowNearPlane,t),t}}]),r}(kd);(function(){ti._cullingMaskProperty=X.getByName("scene_SpotLightCullingMask")})();(function(){ti._colorProperty=X.getByName("scene_SpotLightColor")})();(function(){ti._positionProperty=X.getByName("scene_SpotLightPosition")})();(function(){ti._directionProperty=X.getByName("scene_SpotLightDirection")})();(function(){ti._distanceProperty=X.getByName("scene_SpotLightDistance")})();(function(){ti._angleCosProperty=X.getByName("scene_SpotLightAngleCos")})();(function(){ti._penumbraCosProperty=X.getByName("scene_SpotLightPenumbraCos")})();var Ol=function(){function n(){this._spotLights=new Nn,this._pointLights=new Nn,this._directLights=new Nn,this._directData={cullingMask:new Int32Array(n._maxLight*2),color:new Float32Array(n._maxLight*3),direction:new Float32Array(n._maxLight*3)},this._pointData={cullingMask:new Int32Array(n._maxLight*2),color:new Float32Array(n._maxLight*3),position:new Float32Array(n._maxLight*3),distance:new Float32Array(n._maxLight)},this._spotData={cullingMask:new Int32Array(n._maxLight*2),color:new Float32Array(n._maxLight*3),position:new Float32Array(n._maxLight*3),direction:new Float32Array(n._maxLight*3),distance:new Float32Array(n._maxLight),angleCos:new Float32Array(n._maxLight),penumbraCos:new Float32Array(n._maxLight)}}var r=n.prototype;return r._attachSpotLight=function(e){e._lightIndex=this._spotLights.length,this._spotLights.add(e)},r._detachSpotLight=function(e){var t=this._spotLights.deleteByIndex(e._lightIndex);t&&(t._lightIndex=e._lightIndex),e._lightIndex=-1},r._attachPointLight=function(e){e._lightIndex=this._pointLights.length,this._pointLights.add(e)},r._detachPointLight=function(e){var t=this._pointLights.deleteByIndex(e._lightIndex);t&&(t._lightIndex=e._lightIndex),e._lightIndex=-1},r._attachDirectLight=function(e){e._lightIndex=this._directLights.length,this._directLights.add(e)},r._detachDirectLight=function(e){var t=this._directLights.deleteByIndex(e._lightIndex);t&&(t._lightIndex=e._lightIndex),e._lightIndex=-1},r._updateShaderData=function(e){for(var t=this,i=t._spotLights,o=t._pointLights,s=t._directLights,l=this,u=l._spotData,c=l._pointData,f=l._directData,d=i.length,h=o.length,_=s.length,p=0;p<d;p++)i.get(p)._appendData(p,u);for(var v=0;v<h;v++)o.get(v)._appendData(v,c);for(var y=0;y<_;y++)s.get(y)._appendData(y,f);_?(wo._updateShaderData(e,f),e.enableMacro("SCENE_DIRECT_LIGHT_COUNT",_.toString())):e.disableMacro("SCENE_DIRECT_LIGHT_COUNT"),h?(hs._updateShaderData(e,c),e.enableMacro("SCENE_POINT_LIGHT_COUNT",h.toString())):e.disableMacro("SCENE_POINT_LIGHT_COUNT"),d?(ti._updateShaderData(e,u),e.enableMacro("SCENE_SPOT_LIGHT_COUNT",d.toString())):e.disableMacro("SCENE_SPOT_LIGHT_COUNT")},r._gc=function(){this._spotLights.garbageCollection(),this._pointLights.garbageCollection(),this._directLights.garbageCollection()},r._updateSunlightIndex=function(e){var t=this._directLights,i=e._lightIndex;if(i>0){var o=t.get(0),s=t.get(i);t.set(0,s),t.set(i,o),s._lightIndex=0,o._lightIndex=i}},r._getMaxBrightestSunlight=function(){for(var e=this._directLights,t=null,i=Number.NEGATIVE_INFINITY,o=!1,s=0,l=e.length;s<l;s++){var u=e.get(s);u.shadowType!==ds.None&&!o&&(i=Number.NEGATIVE_INFINITY,o=!0);var c=u.intensity*u.color.getBrightness();o?u.shadowType!==ds.None&&i<c&&(i=c,t=u):i<c&&(i=c,t=u)}return t},n}();(function(){Ol._sunlightColorProperty=X.getByName("scene_SunlightColor")})();(function(){Ol._sunlightDirectionProperty=X.getByName("scene_SunlightDirection")})();(function(){Ol._maxLight=10})();var Vd=function(n){be(r,n);function r(e,t){var i;i=n.call(this,e)||this,i.physics=new ya(Et(i)),i.castShadows=!0,i.shadowResolution=ks.Medium,i.shadowTwoCascadeSplits=1/3,i.shadowFourCascadeSplits=new z(1/15,3/15,7/15),i.shadowDistance=50,i.shadowFadeBorder=.1,i._lightManager=new Ol,i._componentsManager=new Z8,i._isActiveInEngine=!1,i._globalShaderMacro=new Ba,i._rootEntities=[],i._background=new PP(i._engine),i._shaderData=new io(bi.Scene),i._shadowCascades=_i.NoCascades,i._fogMode=Qv.None,i._fogColor=new Me(.5,.5,.5,1),i._fogStart=0,i._fogEnd=300,i._fogDensity=.01,i._fogParams=new pt,i._isActive=!0,i.name=t||"";var o=i.shaderData;return o._addReferCount(1),i.ambientLight=new ri(e),e.sceneManager._allCreatedScenes.push(Et(i)),o.enableMacro("SCENE_FOG_MODE",i._fogMode.toString()),o.enableMacro("SCENE_SHADOW_CASCADED_COUNT",i.shadowCascades.toString()),o.setColor(r._fogColorProperty,i._fogColor),o.setVector4(r._fogParamsProperty,i._fogParams),i._computeLinearFogParams(i._fogStart,i._fogEnd),i._computeExponentialFogParams(i._fogDensity),i}var a=r.prototype;return a.createRootEntity=function(t){var i=new yo(this._engine,t);return this.addRootEntity(i),i},a.addRootEntity=function(t,i){var o;typeof t=="number"?o=t:(o=void 0,i=t);var s=i._isRoot;s||(i._isRoot=!0,i._removeFromParent());var l=i._scene;l!==this?(l&&s&&l._removeFromEntityList(i),this._addToRootEntityList(o,i)):s||this._addToRootEntityList(o,i);var u=Ot.None;i._isActiveInHierarchy&&(this._isActiveInEngine||(u|=Ot.Hierarchy)),i._isActiveInScene&&l!==this&&(u|=Ot.Scene),u&&i._processInActive(u),l!==this&&yo._traverseSetOwnerScene(i,this);var c=Ot.None;i._isActive&&(this._isActiveInEngine&&!i._isActiveInHierarchy&&(c|=Ot.Hierarchy),(!i._isActiveInScene||l!==this)&&(c|=Ot.Scene)),c&&i._processActive(c)},a.removeRootEntity=function(t){if(t._isRoot&&t._scene==this){this._removeFromEntityList(t),t._isRoot=!1;var i=Ot.None;this._isActiveInEngine&&t._isActiveInHierarchy&&(i|=Ot.Hierarchy),t._isActiveInScene&&(i|=Ot.Scene),i&&t._processInActive(i),yo._traverseSetOwnerScene(t,null)}},a.getRootEntity=function(t){return t===void 0&&(t=0),this._rootEntities[t]},a.findEntityByName=function(t){for(var i=this._rootEntities,o=0,s=i.length;o<s;o++){var l=i[o].findByName(t);if(l)return l}return null},a.findEntityByPath=function(t){for(var i=t.split("/").filter(Boolean),o=0,s=this.rootEntitiesCount;o<s;o++){var l=this.getRootEntity(o);if(l.name==i[0]){for(var u=1,c=i.length;u<c&&(l=yo._findChildByName(l,i[u]),!!l);++u);return l}}return null},a._processActive=function(t){this._isActiveInEngine=t;for(var i=this._rootEntities,o=i.length-1;o>=0;o--){var s=i[o];s._isActive&&(t?s._processActive(Ot.Hierarchy):s._processInActive(Ot.Hierarchy))}},a._updateShaderData=function(){var t=this.shaderData,i=this._engine,o=this._lightManager;i.time._updateSceneShaderData(t),o._updateShaderData(this.shaderData);var s=this._lightManager._sunlight=this._getSunlight();s?(o._updateSunlightIndex(s),t.setColor(Ol._sunlightColorProperty,s._lightColor),t.setVector3(Ol._sunlightDirectionProperty,s.direction)):t.setVector3(Ol._sunlightDirectionProperty,z._zero),this.castShadows&&s&&s.shadowType!==ds.None?t.enableMacro("SCENE_SHADOW_TYPE",s.shadowType.toString()):t.disableMacro("SCENE_SHADOW_TYPE"),Ba.unionCollection(this.engine._macroCollection,t._macroCollection,this._globalShaderMacro)},a._removeFromEntityList=function(t){var i=this._rootEntities,o=t._siblingIndex;i.splice(o,1);for(var s=i.length;o<s;o++)i[o]._siblingIndex--;t._siblingIndex=-1},a._onDestroy=function(){n.prototype._onDestroy.call(this);var t=this._engine.sceneManager;for(t.removeScene(this);this.rootEntitiesCount>0;)this._rootEntities[0].destroy();this.background.destroy(),this._ambientLight&&this._ambientLight._removeFromScene(this),this.shaderData._addReferCount(-1),this._componentsManager.handlingInvalidScripts();var i=t._allCreatedScenes;i.splice(i.indexOf(this),1)},a._addToRootEntityList=function(t,i){var o=this._rootEntities,s=o.length;if(t===void 0)i._siblingIndex=s,o.push(i);else{if(t<0||t>s)throw"The index "+t+" is out of child list bounds "+s;i._siblingIndex=t,o.splice(t,0,i);for(var l=t+1,u=s+1;l<u;l++)o[l]._siblingIndex++}},a._computeLinearFogParams=function(t,i){var o=i-t,s=this._fogParams;s.x=-1/o,s.y=i/o},a._computeExponentialFogParams=function(t){this._fogParams.z=t/Math.LN2,this._fogParams.w=t/Math.sqrt(Math.LN2)},a._getSunlight=function(){var t=null;return this._sun?t=this._sun.enabled?this._sun:null:t=this._lightManager._getMaxBrightestSunlight(),t},Ie(r,[{key:"isActive",get:function(){return this._isActive},set:function(t){this._isActive!==t&&(this._isActive=t,t?this._sceneManager&&this._processActive(!0):this._sceneManager&&this._processActive(!1))}},{key:"shaderData",get:function(){return this._shaderData}},{key:"background",get:function(){return this._background}},{key:"shadowCascades",get:function(){return this._shadowCascades},set:function(t){this._shadowCascades!==t&&(this.shaderData.enableMacro("SCENE_SHADOW_CASCADED_COUNT",t.toString()),this._shadowCascades=t)}},{key:"ambientLight",get:function(){return this._ambientLight},set:function(t){if(!t){Pt.warn("The scene must have one ambient light");return}var i=this._ambientLight;i!==t&&(i&&i._removeFromScene(this),t._addToScene(this),this._ambientLight=t)}},{key:"fogMode",get:function(){return this._fogMode},set:function(t){this._fogMode!==t&&(this.shaderData.enableMacro("SCENE_FOG_MODE",t.toString()),this._fogMode=t)}},{key:"fogColor",get:function(){return this._fogColor},set:function(t){this._fogColor!==t&&this._fogColor.copyFrom(t)}},{key:"fogStart",get:function(){return this._fogStart},set:function(t){this._fogStart!==t&&(this._computeLinearFogParams(t,this._fogEnd),this._fogStart=t)}},{key:"fogEnd",get:function(){return this._fogEnd},set:function(t){this._fogEnd!==t&&(this._computeLinearFogParams(this._fogStart,t),this._fogEnd=t)}},{key:"fogDensity",get:function(){return this._fogDensity},set:function(t){this._fogDensity!==t&&(this._computeExponentialFogParams(t),this._fogDensity=t)}},{key:"rootEntitiesCount",get:function(){return this._rootEntities.length}},{key:"rootEntities",get:function(){return this._rootEntities}},{key:"sun",get:function(){return this._sun},set:function(t){this._sun=t}}]),r}(Oo);(function(){Vd._fogColorProperty=X.getByName("scene_FogColor")})();(function(){Vd._fogParamsProperty=X.getByName("scene_FogParams")})();var zr=function(n){be(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._started=!1,e._onStartIndex=-1,e._onUpdateIndex=-1,e._onLateUpdateIndex=-1,e._onPhysicsUpdateIndex=-1,e._onPreRenderIndex=-1,e._onPostRenderIndex=-1,e._entityScriptsIndex=-1,e}var a=r.prototype;return a.onAwake=function(){},a.onEnable=function(){},a.onStart=function(){},a.onUpdate=function(t){},a.onLateUpdate=function(t){},a.onBeginRender=function(t){},a.onEndRender=function(t){},a.onPhysicsUpdate=function(){},a.onTriggerEnter=function(t){},a.onTriggerExit=function(t){},a.onTriggerStay=function(t){},a.onCollisionEnter=function(t){},a.onCollisionExit=function(t){},a.onCollisionStay=function(t){},a.onPointerDown=function(t){},a.onPointerUp=function(t){},a.onPointerClick=function(t){},a.onPointerEnter=function(t){},a.onPointerExit=function(t){},a.onPointerDrag=function(t){},a.onDisable=function(){},a.onDestroy=function(){},a._onAwake=function(){this.onAwake()},a._onEnable=function(){this.onEnable()},a._onDisable=function(){this.onDisable()},a._onEnableInScene=function(){var t=this.scene,i=t._componentsManager,o=r.prototype;this._started||i.addOnStartScript(this),this.onUpdate!==o.onUpdate&&i.addOnUpdateScript(this),this.onLateUpdate!==o.onLateUpdate&&i.addOnLateUpdateScript(this),this.onPhysicsUpdate!==o.onPhysicsUpdate&&i.addOnPhysicsUpdateScript(this),this._entity._addScript(this)},a._onDisableInScene=function(){var t=this.scene._componentsManager,i=r.prototype;this._started||t.removeOnStartScript(this),this.onUpdate!==i.onUpdate&&t.removeOnUpdateScript(this),this.onLateUpdate!==i.onLateUpdate&&t.removeOnLateUpdateScript(this),this.onPhysicsUpdate!==i.onPhysicsUpdate&&t.removeOnPhysicsUpdateScript(this),this._entity._removeScript(this)},a._onDestroy=function(){n.prototype._onDestroy.call(this),this.scene?this.scene._componentsManager.addPendingDestroyScript(this):this.onDestroy()},r}(Zr);H([te],zr.prototype,"_started",void 0);H([te],zr.prototype,"_onStartIndex",void 0);H([te],zr.prototype,"_onUpdateIndex",void 0);H([te],zr.prototype,"_onLateUpdateIndex",void 0);H([te],zr.prototype,"_onPhysicsUpdateIndex",void 0);H([te],zr.prototype,"_onPreRenderIndex",void 0);H([te],zr.prototype,"_onPostRenderIndex",void 0);H([te],zr.prototype,"_entityScriptsIndex",void 0);var fd;(function(n){n[n.None=0]="None",n[n.PrePass=1]="PrePass"})(fd||(fd={}));var bx=function(r){this._engine=r},ei=function(){function n(){}return n.recreateTextureIfNeeded=function(a,e,t,i,o,s){if(e)if(e.width!==t||e.height!==i||e.format!==o||e.mipmapCount>1!==s){e.destroy(!0);var l=new br(a,t,i,o,s);return l.isGCIgnored=!0,l}else return e;else{var u=new br(a,t,i,o,s);return u.isGCIgnored=!0,u}},n.recreateRenderTargetIfNeeded=function(a,e,t,i,o,s,l,u,c){var f,d=(f=e)==null?void 0:f.getColorTexture(0),h=o?n.recreateTextureIfNeeded(a,d,t,i,o,u):null;if(l){var _,p=(_=e)==null?void 0:_.depthTexture,v=s?n.recreateTextureIfNeeded(a,p,t,i,s,u):null;if(d!==h||p!==v){var y;(y=e)==null||y.destroy(!0),e=new jl(a,t,i,h,v,c),e.isGCIgnored=!0}}else{var m,g=s;if(d!==h||((m=e)==null?void 0:m._depthFormat)!==g){var x;(x=e)==null||x.destroy(!0),e=new jl(a,t,i,h,g,c),e.isGCIgnored=!0}}return e},n.blitTexture=function(a,e,t,i,o){i===void 0&&(i=0);var s=a._basicResources,l=t?s.flipYBlitMesh:s.blitMesh,u=s.blitMaterial,c=a._hardwareRenderer,f=a._renderContext;f.flipProjection=!!t,c.activeRenderTarget(t,o!=null?o:n.defaultViewport,f.flipProjection,0);var d=n._rendererShaderData,h=u.shader.subShaders[0].passes[0],_=h._getShaderProgram(a,vt._compileMacros);d.setTexture(n._blitTextureProperty,e),d.setFloat(n._blitMipLevelProperty,i),_.bind(),_.groupingOtherUniformBlock(),_.uploadAll(_.rendererUniformBlock,d),_.uploadAll(_.materialUniformBlock,u.shaderData),_.uploadUnGroupTextures(),(h._renderState||u.renderState)._apply(a,!1,h._renderStateDataMap,u.shaderData),c.drawPrimitive(l._primitive,l.subMesh,_)},n}();(function(){ei._blitTextureProperty=X.getByName("renderer_BlitTexture")})();(function(){ei._blitMipLevelProperty=X.getByName("renderer_BlitMipLevel")})();(function(){ei._rendererShaderData=new io(bi.Renderer)})();(function(){ei.defaultViewport=new pt(0,0,1,1)})();var MP=function(n){be(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.createVertexElements=function(t){return t[0]=new Kt("POSITION",0,rt.Vector3,0),t[1]=new Kt("TEXCOORD_0",12,rt.Vector2,0),t[2]=new Kt("COLOR_0",20,rt.Vector4,0),36},a.canBatch=function(t,i){if(!this._engine._canSpriteBatch||i.shaderPasses[0].getTagValue(Yi._disableBatchTag)===!0)return!1;var o=t.data,s=i.data,l=o.component,u=s.component;return!this.checkBatchWithMask(l,u)||o.texture!==s.texture?!1:o.material===s.material},a.checkBatchWithMask=function(t,i){var o=t.maskInteraction;return o!==i.maskInteraction?!1:o===ur.None?!0:t.maskLayer===i.maskLayer},a.updateVertices=function(t,i,o){for(var s=t.verticesData,l=s.positions,u=s.uvs,c=s.color,f=s.vertexCount,d=0;d<f;d++){var h=l[d],_=u[d];i[o++]=h.x,i[o++]=h.y,i[o++]=h.z,i[o++]=_.x,i[o++]=_.y,i[o++]=c.r,i[o++]=c.g,i[o++]=c.b,i[o++]=c.a}return o},a.drawBatches=function(t){for(var i=this,o=i._engine,s=i._batchedQueue,l=this._meshes[this._flushId],u=l.subMeshes,c=l._primitive,f=o._spriteMaskManager,d=t.scene.shaderData,h=t.shaderData,_=0,p=u.length;_<p;_++){var v=u[_],y=s[_],m=y.data;if(!v||!y)return;var g=m.component,x=m.material;f.preRender(t,g);var b=vt._compileMacros;Ba.unionCollection(g._globalShaderMacro,x.shaderData._macroCollection,b);var S=y.shaderPasses[0],C=S._getShaderProgram(o,b);if(!C.isValid)return;g.shaderData.setTexture(r._textureProperty,m.texture),C.bind(),C.groupingOtherUniformBlock(),C.uploadAll(C.sceneUniformBlock,d),C.uploadAll(C.cameraUniformBlock,h),C.uploadAll(C.rendererUniformBlock,g.shaderData),C.uploadAll(C.materialUniformBlock,x.shaderData),(S._renderState||x.renderState)._apply(o,!1,S._renderStateDataMap,x.shaderData),o._hardwareRenderer.drawPrimitive(c,v,C),f.postRender(g)}},r}(Yi);(function(){MP._textureProperty=X.getByName("renderer_SpriteTexture")})();var Yo=function(){function n(a,e){this.elements=[],this._initSpriteBatcher(a),this._renderQueueType=e}var r=n.prototype;return r.pushRenderElement=function(e){this.elements.push(e)},r.render=function(e,t){var i=this.elements;if(i.length!==0){for(var o=e.engine,s=e.instanceId,l=e.shaderData,u=e.scene,c=u.shaderData,f=u.instanceId,d=o._renderCount,h=o._hardwareRenderer,_=Oa.pipelineStageKey,p=this._renderQueueType,v=0,y=i.length;v<y;v++){var m=i[v],g=m.data,x=m.shaderPasses;if(g.primitive){this._spriteBatcher.flush(e);var b=vt._compileMacros,S=g.primitive,C=g.component,E=g.material,T=C.shaderData,M=C.instanceId,L=E.shaderData,F=E.instanceId,N=E.renderStates;Ba.unionCollection(C._globalShaderMacro,L._macroCollection,b);for(var I=0,O=x.length;I<O;I++){var P=x[I];if(P.getTagValue(_)===t){var R;if(((R=P._renderState)!=null?R:N[I]).renderQueueType===p){var A=P._getShaderProgram(o,b);if(!!A.isValid){var D=A.bind(),B=d!==A._uploadRenderCount;B?(A.groupingOtherUniformBlock(),A.uploadAll(A.sceneUniformBlock,c),A.uploadAll(A.cameraUniformBlock,l),A.uploadAll(A.rendererUniformBlock,T),A.uploadAll(A.materialUniformBlock,L),A.uploadUnGroupTextures(),A._uploadSceneId=f,A._uploadCameraId=s,A._uploadRendererId=M,A._uploadMaterialId=F,A._uploadRenderCount=d):(A._uploadSceneId!==f?(A.uploadAll(A.sceneUniformBlock,c),A._uploadSceneId=f):D&&A.uploadTextures(A.sceneUniformBlock,c),A._uploadCameraId!==s?(A.uploadAll(A.cameraUniformBlock,l),A._uploadCameraId=s):D&&A.uploadTextures(A.cameraUniformBlock,l),A._uploadRendererId!==M?(A.uploadAll(A.rendererUniformBlock,T),A._uploadRendererId=M):D&&A.uploadTextures(A.rendererUniformBlock,T),A._uploadMaterialId!==F?(A.uploadAll(A.materialUniformBlock,L),A._uploadMaterialId=F):D&&A.uploadTextures(A.materialUniformBlock,L),D&&A.uploadUnGroupTextures());var k,V=(k=P._renderState)!=null?k:N[I];V._apply(o,C.entity.transform._isFrontFaceInvert(),P._renderStateDataMap,E.shaderData),h.drawPrimitive(S,g.subPrimitive,A)}}}}}else this._spriteBatcher.drawElement(m,e)}this._spriteBatcher.flush(e)}},r.clear=function(){this.elements.length=0,this._spriteBatcher.clear()},r.destroy=function(){this._spriteBatcher.destroy(),this._spriteBatcher=null},r.sort=function(e){Mn._quickSort(this.elements,0,this.elements.length,e)},r._initSpriteBatcher=function(e){this._spriteBatcher=new MP(e)},n._compareFromNearToFar=function(e,t){var i=e.data,o=t.data,s=i.component,l=o.component,u=s.priority-l.priority;if(u!==0)return u;if(s.instanceId===l.instanceId)return i.material._priority-o.material._priority;var c=s._distanceForSort-l._distanceForSort;return c===0?s.instanceId-l.instanceId:c},n._compareFromFarToNear=function(e,t){var i=e.data,o=t.data,s=i.component,l=o.component,u=s.priority-l.priority;if(u!==0)return u;if(s.instanceId===l.instanceId)return i.material._priority-o.material._priority;var c=l._distanceForSort-s._distanceForSort;return c===0?s.instanceId-l.instanceId:c},n}(),OP=function(){this.position=new z,this.isOrthographic=!1,this.viewMatrix=new Ge,this.projectionMatrix=new Ge,this.viewProjectionMatrix=new Ge,this.nearClipPlane=.1,this.farClipPlane=100,this.forward=new z},e6=function(){this.virtualCamera=new OP,this.cullPlanes=[new wn(new z),new wn(new z),new wn(new z),new wn(new z),new wn(new z),new wn(new z),new wn(new z),new wn(new z),new wn(new z),new wn(new z)],this.splitBoundSphere=new uP(new z,0)},nC;(function(n){n[n.FarBottomLeft=0]="FarBottomLeft",n[n.FarTopLeft=1]="FarTopLeft",n[n.FarTopRight=2]="FarTopRight",n[n.FarBottomRight=3]="FarBottomRight",n[n.nearBottomLeft=4]="nearBottomLeft",n[n.nearTopLeft=5]="nearTopLeft",n[n.nearTopRight=6]="nearTopRight",n[n.nearBottomRight=7]="nearBottomRight",n[n.unknown=8]="unknown"})(nC||(nC={}));var lr=function(){function n(){}return n.shadowResolution=function(a){switch(a){case ks.Low:return 512;case ks.Medium:return 1024;case ks.High:return 2048;case ks.VeryHigh:return 4096}},n.shadowDepthFormat=function(a,e){return e?ye.Depth16:ye.R8G8B8A8},n.cullingRenderBounds=function(a,e,t){for(var i=a.min,o=a.max,s=0;s<e;s++){var l=t[s],u=l.normal;if(u.x*(u.x>=0?o.x:i.x)+u.y*(u.y>=0?o.y:i.y)+u.z*(u.z>=0?o.z:i.z)<-l.distance)return!1}return!0},n.shadowCullFrustum=function(a,e,t,i){var o=t._entity.layer;a.camera.cullingMask&o&&e.cullingMask&o&&t.castShadows&&n.cullingRenderBounds(t.bounds,i.cullPlaneCount,i.cullPlanes)&&(t._renderFrameCount=t.engine.time.frameCount,t._prepareRender(a))},n.getBoundSphereByFrustum=function(a,e,t,i,o){var s=t.aspectRatio,l=t.fieldOfView,u,c,f=Math.sqrt(1+s*s)*Math.tan(ve.degreeToRadian(l)/2),d=f*f,h=e-a,_=e+a;d>h/_?(u=e,c=e*f):(u=.5*_*(1+d),c=.5*Math.sqrt(h*h+2*(e*e+a*a)*d+_*_*d*d));var p=o.splitBoundSphere.center;o.splitBoundSphere.radius=c,z.scale(i,u,p),z.add(t.entity.transform.worldPosition,p,p),o.sphereCenterZ=u},n.getDirectionLightShadowCullPlanes=function(a,e,t,i,o){var s=n._frustumCorners,l=n._backPlaneFaces,u=n._frustumPlaneNeighbors,c=n._frustumTwoPlaneCorners,f=n._edgePlanePoint2,d=o.cullPlanes,h=a.getPlane(Ht.Near),_=a.getPlane(Ht.Far),p=a.getPlane(Ht.Left),v=a.getPlane(Ht.Right),y=a.getPlane(Ht.Bottom),m=a.getPlane(Ht.Top),g=e-t,x=n._adjustNearPlane,b=n._adjustFarPlane;x.normal.copyFrom(h.normal),b.normal.copyFrom(_.normal),x.distance=h.distance-g,b.distance=Math.min(-h.distance+o.sphereCenterZ+o.splitBoundSphere.radius,_.distance),Wr.intersectionPointThreePlanes(x,y,v,s[7]),Wr.intersectionPointThreePlanes(x,m,v,s[6]),Wr.intersectionPointThreePlanes(x,m,p,s[5]),Wr.intersectionPointThreePlanes(x,y,p,s[4]),Wr.intersectionPointThreePlanes(b,y,v,s[3]),Wr.intersectionPointThreePlanes(b,m,v,s[2]),Wr.intersectionPointThreePlanes(b,m,p,s[1]),Wr.intersectionPointThreePlanes(b,y,p,s[0]);for(var S=0,C=0;C<6;C++){var E=void 0;switch(C){case Ht.Near:E=x;break;case Ht.Far:E=b;break;default:E=a.getPlane(C);break}z.dot(E.normal,i)<0&&(d[S].copyFrom(E),l[S]=C,S++)}for(var T=S,M=0;M<S;M++)for(var L=l[M],F=u[L],N=0;N<4;N++){for(var I=F[N],O=!0,P=0;P<S;P++)if(I==l[P]){O=!1;break}if(O){var R=c[L][I],A=s[R[0]],D=s[R[1]];z.add(A,i,f),wn.fromPoints(A,D,f,d[T++])}}o.cullPlaneCount=T},n.getDirectionalLightMatrices=function(a,e,t,i,o,s,l,u){var c=l.splitBoundSphere;l.resolution=s;var f=c.center,d=c.radius,h=s/2,_=d*h/(h-n.atlasBorderSize),p=_*2,v=s/p,y=p/s,m=Math.ceil(z.dot(f,a)*v)*y,g=Math.ceil(z.dot(f,e)*v)*y,x=z.dot(f,t);f.x=a.x*m+e.x*g+t.x*x,f.y=a.y*m+e.y*g+t.y*x,f.z=a.z*m+e.z*g+t.z*x;var b=l.virtualCamera,S=b.position,C=b.viewMatrix,E=b.projectionMatrix;z.scale(t,d+o,S),z.subtract(f,S,S),Ge.lookAt(S,f,a,C),Ge.ortho(-_,_,-_,_,0,d*2+o,E);var T=b.viewProjectionMatrix;Ge.multiply(E,C,T),Mn._floatMatrixMultiply(n._shadowMapCoordMatrix,T.elements,0,u,i*16)},n.getMaxTileResolutionInAtlas=function(a,e,t){for(var i=Math.min(a,e),o=Math.floor(a/i)*Math.floor(e/i);o<t;)i=Math.floor(i>>1),o=Math.floor(a/i)*Math.floor(e/i);return i},n.getShadowBias=function(a,e,t,i){var o=2/e.elements[0],s=o/t,l=-a.shadowBias*s,u=-a.shadowNormalBias*s;if(a.shadowType==ds.SoftHigh){var c=2.5;l*=c,u*=c}i.set(l,u)},n.applySliceTransform=function(a,e,t,i,o,s){var l=n._tempMatrix0,u=l.elements,c=1/e,f=1/t,d=a*c,h=a*f,_=o.x*c,p=o.y*f;u[0]=d,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=h,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=1,u[11]=0,u[12]=_,u[13]=p,u[14]=0,u[15]=1;var v=i*16;Mn._floatMatrixMultiply(l,s,v,s,v)},n.getScaleAndBiasForLinearDistanceFade=function(a,e,t){if(e<1e-4){var i=1e3;t.z=i,t.w=-a*i;return}e=1-e,e*=e;var o=e*a,s=a-o;t.z=1/s,t.w=-o/s},n}();(function(){lr._tempMatrix0=new Ge})();(function(){lr._shadowMapCoordMatrix=new Ge(.5,0,0,0,0,-.5,0,0,0,0,.5,0,.5,.5,.5,1)})();(function(){lr._frustumCorners=[new z,new z,new z,new z,new z,new z,new z,new z]})();(function(){lr._adjustNearPlane=new wn(new z)})();(function(){lr._adjustFarPlane=new wn(new z)})();(function(){lr._backPlaneFaces=new Array(5)})();(function(){lr._edgePlanePoint2=new z})();(function(){lr._frustumPlaneNeighbors=[[Ht.Left,Ht.Right,Ht.Top,Ht.Bottom],[Ht.Left,Ht.Right,Ht.Top,Ht.Bottom],[Ht.Near,Ht.Far,Ht.Top,Ht.Bottom],[Ht.Near,Ht.Far,Ht.Top,Ht.Bottom],[Ht.Near,Ht.Far,Ht.Left,Ht.Right],[Ht.Near,Ht.Far,Ht.Left,Ht.Right]]})();(function(){lr._frustumTwoPlaneCorners=[[[8,8],[8,8],[4,5],[6,7],[7,4],[5,6]],[[8,8],[8,8],[1,0],[3,2],[0,3],[2,1]],[[5,4],[0,1],[8,8],[8,8],[4,0],[1,5]],[[7,6],[2,3],[8,8],[8,8],[3,7],[6,2]],[[4,7],[3,0],[0,4],[7,3],[8,8],[8,8]],[[6,5],[1,2],[5,1],[2,6],[8,8],[8,8]]]})();(function(){lr.atlasBorderSize=4})();var va=function(n){be(r,n);function r(e){var t;return t=n.call(this,e.engine)||this,t._shadowMapSize=new pt,t._shadowBias=new Ze,t._shadowSliceData=new e6,t._lightUp=new z,t._lightSide=new z,t._splitBoundSpheres=new Float32Array(r._maxCascades*4),t._shadowMatrices=new Float32Array((r._maxCascades+1)*16),t._shadowInfos=new pt,t._viewportOffsets=[new Ze,new Ze,new Ze,new Ze],t._camera=e,t._supportDepthTexture=e.engine._hardwareRenderer.canIUse(Ue.depthTexture),t._shadowSliceData.virtualCamera.isOrthographic=!0,t}var a=r.prototype;return a.onRender=function(t){var i=this._camera.scene._lightManager._sunlight;this._updateShadowSettings(),this._renderDirectShadowMap(t,i),this._updateReceiversShaderData(i)},a._renderDirectShadowMap=function(t,i){var o=this,s=o._engine,l=o._camera,u=o._viewportOffsets,c=o._shadowSliceData,f=o._splitBoundSpheres,d=o._shadowMatrices,h=l._renderPipeline._cullingResults,_=h.opaqueQueue,p=h.alphaTestQueue,v=h.transparentQueue,y=l.scene,m=y._componentsManager,g=s._hardwareRenderer,x=y.shadowCascades,b=r._cascadesSplitDistance,S=c.splitBoundSphere,C=r._tempMatrix0,E=C.elements,T=this._lightUp,M=this._lightSide,L=c.virtualCamera.forward,F=this._shadowMapSize,N=F.z,I=F.w,O=this._shadowMapFormat,P,R;this._supportDepthTexture?(P=ei.recreateRenderTargetIfNeeded(s,this._renderTarget,N,I,null,O,!0,!1,1),R=P.depthTexture):(P=ei.recreateRenderTargetIfNeeded(s,this._renderTarget,N,I,O,null,!1,!1,1),R=P.getColorTexture(0)),R.wrapModeU=R.wrapModeV=pr.Clamp,s._hardwareRenderer._isWebGL2&&(R.depthCompareFunction=pi.Less),this._renderTarget=P,this._depthTexture=R,g.activeRenderTarget(P,r._viewport,t.flipProjection,0),this._supportDepthTexture?g.clearRenderTarget(s,Qr.Depth,null):g.clearRenderTarget(s,Qr.All,r._clearColor),Ge.rotationQuaternion(i.entity.transform.worldRotationQuaternion,C),M.set(E[0],E[1],E[2]),T.set(E[4],E[5],E[6]),L.set(-E[8],-E[9],-E[10]);var A=r._tempVector;A.copyFrom(l.entity.transform.worldForward);for(var D=this._shadowTileResolution,B=0;B<x;B++){lr.getBoundSphereByFrustum(b[B],b[B+1],l,A,c),lr.getDirectionLightShadowCullPlanes(l._frustum,b[B],l.nearClipPlane,L,c),lr.getDirectionalLightMatrices(T,M,L,B,i.shadowNearPlane,D,c,d),x>1&&lr.applySliceTransform(D,N,I,B,this._viewportOffsets[B],d),this._updateSingleShadowCasterShaderData(i,c,t);var k=S.center,V=S.radius,U=B*4;f[U]=k.x,f[U+1]=k.y,f[U+2]=k.z,f[U+3]=V*V,_.clear(),p.clear(),v.clear();for(var j=m._renderers,G=j._elements,$=j.length-1;$>=0;--$)lr.shadowCullFrustum(t,i,G[$],c);if(_.elements.length||p.elements.length){_.sort(Yo._compareFromNearToFar),p.sort(Yo._compareFromNearToFar);var W=u[B],K=W.x,q=W.y;g.setGlobalDepthBias(1,1),g.viewport(K,q,D,D),g.scissor(K+1,q+1,D-2,D-2),s._renderCount++,_.render(l,da.ShadowCaster),p.render(l,da.ShadowCaster),g.setGlobalDepthBias(0,0)}}},a._updateReceiversShaderData=function(t){var i=this._camera,o=i.scene,s=this._splitBoundSpheres,l=this._shadowMatrices,u=o.shadowCascades,c=Math.min(o.shadowDistance,i.farClipPlane);if(lr.getScaleAndBiasForLinearDistanceFade(Math.pow(c,2),o.shadowFadeBorder,this._shadowInfos),this._shadowInfos.x=t.shadowStrength,u>1)for(var f=u*4,d=s.length;f<d;f++)s[f]=0;for(var h=u*16,_=l.length;h<_;h++)l[h]=0;var p=o.shaderData;p.setFloatArray(r._shadowMatricesProperty,this._shadowMatrices),p.setVector4(r._shadowInfosProperty,this._shadowInfos),p.setTexture(r._shadowMapsProperty,this._depthTexture),p.setFloatArray(r._shadowSplitSpheresProperty,this._splitBoundSpheres),p.setVector4(r._shadowMapSize,this._shadowMapSize)},a._getCascadesSplitDistance=function(t){var i=r._cascadesSplitDistance,o=this._camera.scene,s=o.shadowTwoCascadeSplits,l=o.shadowFourCascadeSplits,u=o.shadowCascades,c=this._camera,f=c.nearClipPlane,d=c.aspectRatio,h=c.fieldOfView;i[0]=f;var _=t-f,p=Math.tan(ve.degreeToRadian(h)*.5),v=1+p*p*(d*d+1);switch(u){case _i.NoCascades:i[1]=this._getFarWithRadius(t,v);break;case _i.TwoCascades:i[1]=this._getFarWithRadius(f+_*s,v),i[2]=this._getFarWithRadius(t,v);break;case _i.FourCascades:i[1]=this._getFarWithRadius(f+_*l.x,v),i[2]=this._getFarWithRadius(f+_*l.y,v),i[3]=this._getFarWithRadius(f+_*l.z,v),i[4]=this._getFarWithRadius(t,v);break}},a._getFarWithRadius=function(t,i){return Math.sqrt(t*t/i)},a._updateShadowSettings=function(){var t=this._camera,i=t.scene,o=lr.shadowDepthFormat(i.shadowResolution,this._supportDepthTexture),s=lr.shadowResolution(i.shadowResolution),l=i.shadowCascades,u=Math.min(i.shadowDistance,t.farClipPlane);if(this._getCascadesSplitDistance(u),o!==this._shadowMapFormat||s!==this._shadowMapResolution||l!==this._shadowCascadeMode){if(this._shadowMapFormat=o,this._shadowMapResolution=s,this._shadowCascadeMode=l,l==_i.NoCascades)this._shadowTileResolution=s,this._shadowMapSize.set(1/s,1/s,s,s);else{var c=lr.getMaxTileResolutionInAtlas(s,s,l);this._shadowTileResolution=c;var f=c*2,d=l==_i.TwoCascades?c:c*2;this._shadowMapSize.set(1/f,1/d,f,d)}this._renderTarget=null;var h=this._viewportOffsets,_=this._shadowTileResolution;switch(l){case _i.NoCascades:h[0].set(0,0);break;case _i.TwoCascades:h[0].set(0,0),h[1].set(_,0);break;case _i.FourCascades:h[0].set(0,0),h[1].set(_,0),h[2].set(0,_),h[3].set(_,_)}}},a._updateSingleShadowCasterShaderData=function(t,i,o){var s=i.virtualCamera;lr.getShadowBias(t,s.projectionMatrix,this._shadowTileResolution,this._shadowBias);var l=this._camera.scene.shaderData;l.setVector2(r._lightShadowBiasProperty,this._shadowBias),l.setVector3(r._lightDirectionProperty,t.direction),o.applyVirtualCamera(s,!0)},r}(bx);(function(){va._lightShadowBiasProperty=X.getByName("scene_ShadowBias")})();(function(){va._lightDirectionProperty=X.getByName("scene_LightDirection")})();(function(){va._shadowMatricesProperty=X.getByName("scene_ShadowMatrices")})();(function(){va._shadowMapSize=X.getByName("scene_ShadowMapSize")})();(function(){va._shadowInfosProperty=X.getByName("scene_ShadowInfo")})();(function(){va._shadowMapsProperty=X.getByName("scene_ShadowMap")})();(function(){va._shadowSplitSpheresProperty=X.getByName("scene_ShadowSplitSpheres")})();(function(){va._maxCascades=4})();(function(){va._cascadesSplitDistance=new Array(va._maxCascades+1)})();(function(){va._viewport=new pt(0,0,1,1)})();(function(){va._clearColor=new Me(1,1,1,1)})();(function(){va._tempVector=new z})();(function(){va._tempMatrix0=new Ge})();var t6=function(){function n(a){this.opaqueQueue=new Yo(a,ar.Opaque),this.transparentQueue=new Yo(a,ar.Transparent),this.alphaTestQueue=new Yo(a,ar.AlphaTest)}var r=n.prototype;return r.reset=function(){this.opaqueQueue.clear(),this.transparentQueue.clear(),this.alphaTestQueue.clear()},r.sort=function(){this.opaqueQueue.sort(Yo._compareFromNearToFar),this.alphaTestQueue.sort(Yo._compareFromNearToFar),this.transparentQueue.sort(Yo._compareFromFarToNear)},r.destroy=function(){this.opaqueQueue.destroy(),this.transparentQueue.destroy(),this.alphaTestQueue.destroy()},n}(),n6=function(n){be(r,n);function r(e){var t;return t=n.call(this,e)||this,t._supportDepthTexture=e._hardwareRenderer.canIUse(Ue.depthTexture),t}var a=r.prototype;return a.onConfig=function(t){var i=this._engine,o=t.pixelViewport,s=o.width,l=o.height,u=ei.recreateRenderTargetIfNeeded(i,this._renderTarget,s,l,null,ye.Depth16,!0,!1,1),c=u.depthTexture;c.wrapModeU=c.wrapModeV=pr.Clamp,c.filterMode=Jn.Point,this._renderTarget=u},a.onRender=function(t,i){var o=this._engine,s=this._renderTarget,l=t.camera,u=o._hardwareRenderer;u.activeRenderTarget(s,l.viewport,t.flipProjection,0),u.viewport(0,0,s.width,s.height),u.scissor(0,0,s.width,s.height),u.clearRenderTarget(o,Qr.Depth,null),i.opaqueQueue.render(l,da.DepthOnly),i.alphaTestQueue.render(l,da.DepthOnly),l.shaderData.setTexture(rn._cameraDepthTextureProperty,this._renderTarget.depthTexture)},r}(bx),dc;(function(n){n[n.None=1]="None",n[n.TwoX=2]="TwoX",n[n.FourX=4]="FourX"})(dc||(dc={}));var r6=function(n){be(r,n);function r(e){return n.call(this,e)}var a=r.prototype;return a.onConfig=function(t,i){this._cameraColorTexture=i;var o=t.opaqueTextureDownsampling,s=o===dc.None,l=t.pixelViewport,u=s?1:o===dc.TwoX?.5:.25,c=ei.recreateRenderTargetIfNeeded(this._engine,this._renderTarget,l.width*u,l.height*u,ye.R8G8B8A8,null,!1,!1,1),f=c.getColorTexture(0);f.wrapModeU=f.wrapModeV=pr.Clamp,f.filterMode=s?Jn.Point:Jn.Bilinear,this._renderTarget=c},a.onRender=function(t,i){ei.blitTexture(this._engine,this._cameraColorTexture,this._renderTarget),t.camera.shaderData.setTexture(rn._cameraOpaqueTextureProperty,this._renderTarget.getColorTexture(0))},r}(bx),IP=function(){function n(a){this._allSpriteMasks=new Nn,this._lastCanvasSize=new Ze,this._internalColorTarget=null,this._camera=a;var e=a.engine;this._cullingResults=new t6(e),this._cascadedShadowCasterPass=new va(a),this._depthOnlyPass=new n6(e),this._opaqueTexturePass=new r6(e)}var r=n.prototype;return r.destroy=function(){this._cullingResults.destroy(),this._allSpriteMasks=null,this._camera=null},r.render=function(e,t,i,o){var s=this._camera,l=s.scene,u=s.engine,c=this._cullingResults,f=l._lightManager._sunlight,d=this._depthOnlyPass,h=s.depthTextureMode===fd.PrePass&&d._supportDepthTexture;s.engine._spriteMaskManager.clear(),l.castShadows&&f&&f.shadowType!==ds.None&&this._cascadedShadowCasterPass.onRender(e),c.reset(),this._allSpriteMasks.length=0,e.applyVirtualCamera(s._virtualCamera,h),this._prepareRender(e),c.sort(),h?(d.onConfig(s),d.onRender(e,c)):s.shaderData.setTexture(rn._cameraDepthTextureProperty,u._whiteTexture2D);var _=s.independentCanvasEnabled;if(_){var p=s.pixelViewport,v=ei.recreateRenderTargetIfNeeded(u,this._internalColorTarget,p.width,p.height,ye.R8G8B8A8,ye.Depth24Stencil8,!1,!1,s.msaaSamples),y=v.getColorTexture(0);y.wrapModeU=y.wrapModeV=pr.Clamp,this._internalColorTarget=v}else{var m=this._internalColorTarget;if(m){var g;(g=m.getColorTexture(0))==null||g.destroy(!0),m.destroy(!0),this._internalColorTarget=null}}this._drawRenderPass(e,s,t,i,o)},r._drawRenderPass=function(e,t,i,o,s){var l,u,c=this._cullingResults,f=c.opaqueQueue,d=c.alphaTestQueue,h=c.transparentQueue,_=t.engine,p=t.scene,v=p.background,y=this._internalColorTarget,m=_._hardwareRenderer,g,x=(g=t.renderTarget)!=null?g:y,b=y?ei.defaultViewport:t.viewport,S=t.renderTarget&&i==null||y!==null;e.flipProjection!==S&&(e.applyVirtualCamera(t._virtualCamera,S),this._updateMVPShaderData(e),_._renderCount++),m.activeRenderTarget(x,b,e.flipProjection,o,i);var C=t.clearFlags&~(s!=null?s:Qr.None),E=v.solidColor;if(C!==Qr.None&&m.clearRenderTarget(t.engine,C,E),f.render(t,da.Forward),d.render(t,da.Forward),C&Qr.Color&&(v.mode===Ro.Sky?v.sky._render(e):v.mode===Ro.Texture&&v.texture&&this._drawBackgroundTexture(_,v)),t.opaqueTextureEnabled){x._blitRenderTarget();var T=this._opaqueTexturePass;T.onConfig(t,x.getColorTexture(0)),T.onRender(e,c),m.activeRenderTarget(x,b,e.flipProjection,o,i)}else t.shaderData.setTexture(rn._cameraOpaqueTextureProperty,null);h.render(t,da.Forward),(l=x)==null||l._blitRenderTarget(),(u=x)==null||u.generateMipmaps(),y&&ei.blitTexture(_,y.getColorTexture(0),null,0,t.viewport)},r.pushRenderData=function(e,t){var i=t.material,o=i.renderStates,s=i.shader.subShaders[0],l=e.replacementShader;if(l){var u=l.subShaders,c=e.replacementTag;if(c)for(var f=0,d=u.length;f<d;f++){var h=u[f];if(h.getTagValue(c)===s.getTagValue(c)){this.pushRenderDataWithShader(e,t,h.passes,o);break}}else this.pushRenderDataWithShader(e,t,u[0].passes,o)}else this.pushRenderDataWithShader(e,t,s.passes,o)},r.pushRenderDataWithShader=function(e,t,i,o){for(var s=this._cullingResults,l=s.opaqueQueue,u=s.alphaTestQueue,c=s.transparentQueue,f=e.camera.engine._renderElementPool,d=0,h=0,_=i.length;h<_;h++){var p,v=((p=i[h]._renderState)!=null?p:o[h]).renderQueueType;if(!(d&1<<v)){var y=f.getFromPool();switch(y.set(t,i),v){case ar.Opaque:l.pushRenderElement(y),d|=1;break;case ar.AlphaTest:u.pushRenderElement(y),d|=2;break;case ar.Transparent:c.pushRenderElement(y),d|=4;break}}}},r._drawBackgroundTexture=function(e,t){var i=e._hardwareRenderer,o=e.canvas,s=t._material,l=t._mesh;(this._lastCanvasSize.x!==o.width||this._lastCanvasSize.y!==o.height)&&t._textureFillMode!==Bs.Fill&&(this._lastCanvasSize.set(o.width,o.height),t._resizeBackgroundTexture());var u=s.shader.subShaders[0].passes[0],c=u._getShaderProgram(e,vt._compileMacros);c.bind(),c.uploadAll(c.materialUniformBlock,s.shaderData),c.uploadUnGroupTextures(),(u._renderState||s.renderState)._apply(e,!1,u._renderStateDataMap,s.shaderData),i.drawPrimitive(l._primitive,l.subMesh,c)},r._prepareRender=function(e){for(var t=e.camera,i=t.engine,o=t.scene._componentsManager._renderers,s=o._elements,l=o.length-1;l>=0;--l){var u=s[l];!(t.cullingMask&u._entity.layer)||t.enableFrustumCulling&&!t._frustum.intersectsBox(u.bounds)||(u._renderFrameCount=i.time.frameCount,u._prepareRender(e))}},r._updateMVPShaderData=function(e){for(var t=e.camera,i=t.scene._componentsManager._renderers,o=i._elements,s=i.length-1;s>=0;--s){var l=o[s];l._updateShaderData(e,!0)}},n}(),rC;(function(n){n[n.None=0]="None",n[n.Opaque=1]="Opaque",n[n.AlphaTest=2]="AlphaTest",n[n.Transparent=4]="Transparent"})(rC||(rC={}));var dd;(function(n){n[n.Normal=0]="Normal",n[n.XRCenterCamera=1]="XRCenterCamera",n[n.XRLeftCamera=2]="XRLeftCamera",n[n.XRRightCamera=4]="XRRightCamera"})(dd||(dd={}));var qv;(function(n){n[n.None=1]="None",n[n.TwoX=2]="TwoX",n[n.FourX=4]="FourX",n[n.EightX=8]="EightX"})(qv||(qv={}));var zo,Il=function(){};(function(){Il.tempVec4=new pt})();(function(){Il.tempVec3=new z})();(function(){Il.tempVec2=new Ze})();var rn=(zo=function(n){be(r,n);function r(e){var t;t=n.call(this,e)||this,t.enableFrustumCulling=!0,t.clearFlags=Qr.All,t.cullingMask=cs.Everything,t.depthTextureMode=fd.None,t.opaqueTextureDownsampling=dc.TwoX,t.msaaSamples=qv.None,t._cameraType=dd.Normal,t._globalShaderMacro=new Ba,t._frustum=new cP,t._virtualCamera=new OP,t._replacementShader=null,t._replacementSubShaderTag=null,t._cameraIndex=-1,t._priority=0,t._shaderData=new io(bi.Camera),t._isCustomViewMatrix=!1,t._isCustomProjectionMatrix=!1,t._fieldOfView=45,t._orthographicSize=10,t._isProjectionDirty=!0,t._isInvProjMatDirty=!0,t._customAspectRatio=void 0,t._renderTarget=null,t._depthBufferParams=new pt,t._opaqueTextureEnabled=!1,t._viewport=new pt(0,0,1,1),t._pixelViewport=new ho(0,0,0,0),t._inverseProjectionMatrix=new Ge,t._invViewProjMat=new Ge;var i=t.entity.transform;return t._transform=i,t._isViewMatrixDirty=i.registerWorldChangeFlag(),t._isInvViewProjDirty=i.registerWorldChangeFlag(),t._frustumChangeFlag=i.registerWorldChangeFlag(),t._renderPipeline=new IP(Et(t)),t._addResourceReferCount(t.shaderData,1),t._updatePixelViewport(),t._onPixelViewportChanged=t._onPixelViewportChanged.bind(Et(t)),t._viewport._onValueChanged=t._onPixelViewportChanged,t.engine.canvas._sizeUpdateFlagManager.addListener(t._onPixelViewportChanged),t}var a=r.prototype;return a.resetViewMatrix=function(){this._isCustomViewMatrix=!1,this._viewMatrixChange()},a.resetProjectionMatrix=function(){this._isCustomProjectionMatrix=!1,this._projectionMatrixChange()},a.resetAspectRatio=function(){this._customAspectRatio=void 0,this._projectionMatrixChange()},a.worldToViewportPoint=function(t,i){var o=Il.tempVec3,s=Il.tempVec4;z.transformCoordinate(t,this.viewMatrix,o),z.transformToVec4(o,this.projectionMatrix,s);var l=s.w;return i.set((s.x/l+1)*.5,(1-s.y/l)*.5,-o.z),i},a.viewportToWorldPoint=function(t,i){var o=this,s=o.nearClipPlane,l=o.farClipPlane,u=1/(s-l),c;if(this.isOrthographic)c=-t.z*2*u,c+=(l+s)*u;else{var f=t.z;c=-f*(s+l)*u,c+=2*s*l*u,c=c/f}return this._innerViewportToWorldPoint(t.x,t.y,(c+1)/2,this._getInvViewProjMat(),i),i},a.viewportPointToRay=function(t,i){var o=this._getInvViewProjMat(),s=this._innerViewportToWorldPoint(t.x,t.y,0,o,i.origin),l=this._innerViewportToWorldPoint(t.x,t.y,1-ve.zeroTolerance,o,i.direction);return z.subtract(l,s,l),l.normalize(),i},a.screenToViewportPoint=function(t,i){var o=this.engine.canvas,s=this.viewport;return i.x=(t.x/o.width-s.x)/s.z,i.y=(t.y/o.height-s.y)/s.w,t.z!==void 0&&(i.z=t.z),i},a.viewportToScreenPoint=function(t,i){var o=this.engine.canvas,s=this.viewport;return i.x=(s.x+t.x*s.z)*o.width,i.y=(s.y+t.y*s.w)*o.height,t.z!==void 0&&(i.z=t.z),i},a.worldToScreenPoint=function(t,i){return this.worldToViewportPoint(t,i),this.viewportToScreenPoint(i,i)},a.screenToWorldPoint=function(t,i){return this.screenToViewportPoint(t,i),this.viewportToWorldPoint(i,i)},a.screenPointToRay=function(t,i){var o=Il.tempVec2;return this.screenToViewportPoint(t,o),this.viewportPointToRay(o,i)},a.render=function(t,i){i===void 0&&(i=0);var o=this.engine._renderContext,s=this._virtualCamera,l=this.entity.transform;Ge.multiply(this.projectionMatrix,this.viewMatrix,s.viewProjectionMatrix),s.position.copyFrom(l.worldPosition),s.isOrthographic&&s.forward.copyFrom(l.worldForward),o.camera=this,o.virtualCamera=s,o.replacementShader=this._replacementShader,o.replacementTag=this._replacementSubShaderTag,this.enableFrustumCulling&&this._frustumChangeFlag.flag&&(this._frustum.calculateFromMatrix(s.viewProjectionMatrix),this._frustumChangeFlag.flag=!1),this._updateShaderData(),Ba.unionCollection(this.scene._globalShaderMacro,this.shaderData._macroCollection,this._globalShaderMacro),i>0&&!this.engine._hardwareRenderer.isWebGL2&&(i=0,Pt.error("mipLevel only take effect in WebGL2.0"));var u;this._cameraType!==dd.Normal&&(u=this.engine.xrManager._getCameraClearFlagsMask(this._cameraType)),this._renderPipeline.render(o,t,i,u),this._engine._renderCount++},a.setReplacementShader=function(t,i){this._replacementShader=t,this._replacementSubShaderTag=typeof i=="string"?is.getByName(i):i},a.resetReplacementShader=function(){this._replacementShader=null,this._replacementSubShaderTag=null},a._onEnableInScene=function(){this.scene._componentsManager.addCamera(this)},a._onDisableInScene=function(){this.scene._componentsManager.removeCamera(this)},a._onDestroy=function(){var t;n.prototype._onDestroy.call(this),(t=this._renderPipeline)==null||t.destroy(),this._isInvViewProjDirty.destroy(),this._isViewMatrixDirty.destroy(),this._addResourceReferCount(this.shaderData,-1),this._viewport._onValueChanged=null,this.engine.canvas._sizeUpdateFlagManager.removeListener(this._onPixelViewportChanged),this._entity=null,this._globalShaderMacro=null,this._frustum=null,this._renderPipeline=null,this._virtualCamera=null,this._shaderData=null,this._frustumChangeFlag=null,this._transform=null,this._isViewMatrixDirty=null,this._isInvViewProjDirty=null,this._viewport=null,this._inverseProjectionMatrix=null,this._invViewProjMat=null},a._updatePixelViewport=function(){var t,i,o=this._renderTarget;if(o)t=o.width,i=o.height;else{var s=this.engine.canvas;t=s.width,i=s.height}var l=this._viewport;this._pixelViewport.set(l.x*t,l.y*i,l.z*t,l.w*i)},a._viewMatrixChange=function(){this._isViewMatrixDirty.flag=!0,this._isInvViewProjDirty.flag=!0,this._frustumChangeFlag.flag=!0},a._projectionMatrixChange=function(){this._isProjectionDirty=!0,this._isInvProjMatDirty=!0,this._isInvViewProjDirty.flag=!0,this._frustumChangeFlag.flag=!0},a._innerViewportToWorldPoint=function(t,i,o,s,l){var u=Il.tempVec3;return u.set(t*2-1,1-i*2,o*2-1),z.transformCoordinate(u,s,l),l},a._updateShaderData=function(){var t=this.shaderData,i=this._transform;t.setMatrix(rn._inverseViewMatrixProperty,i.worldMatrix),t.setVector3(rn._cameraPositionProperty,i.worldPosition),t.setVector3(rn._cameraForwardProperty,i.worldForward),t.setVector3(rn._cameraUpProperty,i.worldUp);var o=this._depthBufferParams,s=this.farClipPlane/this.nearClipPlane;o.set(1-s,s,0,0),t.setVector4(rn._cameraDepthBufferParamsProperty,o)},a._getInvViewProjMat=function(){return this._isInvViewProjDirty.flag&&(this._isInvViewProjDirty.flag=!1,Ge.multiply(this._transform.worldMatrix,this._getInverseProjectionMatrix(),this._invViewProjMat)),this._invViewProjMat},a._getInverseProjectionMatrix=function(){return this._isInvProjMatDirty&&(this._isInvProjMatDirty=!1,Ge.invert(this.projectionMatrix,this._inverseProjectionMatrix)),this._inverseProjectionMatrix},a._forceUseInternalCanvas=function(){return this.opaqueTextureEnabled},a._onPixelViewportChanged=function(){this._updatePixelViewport();var t;(t=this._customAspectRatio)!=null||this._projectionMatrixChange(),this._checkMainCanvasAntialiasWaste()},a._checkMainCanvasAntialiasWaste=function(){this.independentCanvasEnabled&&pt.equals(this._viewport,ei.defaultViewport)&&console.warn("Camera use independent canvas and viewport cover the whole screen, it is recommended to disable antialias, depth and stencil to save memory when create engine.")},Ie(r,[{key:"opaqueTextureEnabled",get:function(){return this._opaqueTextureEnabled},set:function(t){this._opaqueTextureEnabled!==t&&(this._opaqueTextureEnabled=t,this._checkMainCanvasAntialiasWaste())}},{key:"independentCanvasEnabled",get:function(){return this._renderTarget?!1:this._forceUseInternalCanvas()}},{key:"shaderData",get:function(){return this._shaderData}},{key:"nearClipPlane",get:function(){return this._virtualCamera.nearClipPlane},set:function(t){this._virtualCamera.nearClipPlane=t,this._projectionMatrixChange()}},{key:"farClipPlane",get:function(){return this._virtualCamera.farClipPlane},set:function(t){this._virtualCamera.farClipPlane=t,this._projectionMatrixChange()}},{key:"fieldOfView",get:function(){return this._fieldOfView},set:function(t){this._fieldOfView=t,this._projectionMatrixChange()}},{key:"aspectRatio",get:function(){var t=this.pixelViewport,i;return(i=this._customAspectRatio)!=null?i:t.width/t.height},set:function(t){this._customAspectRatio=t,this._projectionMatrixChange()}},{key:"viewport",get:function(){return this._viewport},set:function(t){t!==this._viewport&&this._viewport.copyFrom(t)}},{key:"pixelViewport",get:function(){return this._pixelViewport}},{key:"priority",get:function(){return this._priority},set:function(t){this._priority!==t&&(this._phasedActiveInScene&&(this.scene._componentsManager._cameraNeedSorting=!0),this._priority=t)}},{key:"isOrthographic",get:function(){return this._virtualCamera.isOrthographic},set:function(t){this._virtualCamera.isOrthographic=t,this._projectionMatrixChange(),t?this.shaderData.enableMacro("CAMERA_ORTHOGRAPHIC"):this.shaderData.disableMacro("CAMERA_ORTHOGRAPHIC")}},{key:"orthographicSize",get:function(){return this._orthographicSize},set:function(t){this._orthographicSize=t,this._projectionMatrixChange()}},{key:"viewMatrix",get:function(){var t=this._virtualCamera.viewMatrix;if(!this._isViewMatrixDirty.flag||this._isCustomViewMatrix)return t;this._isViewMatrixDirty.flag=!1;var i=this._transform;return Ge.rotationTranslation(i.worldRotationQuaternion,i.worldPosition,t),t.invert(),t},set:function(t){this._virtualCamera.viewMatrix.copyFrom(t),this._isCustomViewMatrix=!0,this._viewMatrixChange()}},{key:"projectionMatrix",get:function(){var t=this._virtualCamera,i=t.projectionMatrix;if(!this._isProjectionDirty||this._isCustomProjectionMatrix)return i;this._isProjectionDirty=!1;var o=this.aspectRatio;if(!t.isOrthographic)Ge.perspective(ve.degreeToRadian(this._fieldOfView),o,this.nearClipPlane,this.farClipPlane,i);else{var s=this._orthographicSize*o,l=this._orthographicSize;Ge.ortho(-s,s,-l,l,this.nearClipPlane,this.farClipPlane,i)}return i},set:function(t){this._virtualCamera.projectionMatrix.copyFrom(t),this._isCustomProjectionMatrix=!0,this._projectionMatrixChange()}},{key:"enableHDR",get:function(){return console.log("not implementation"),!1},set:function(t){console.log("not implementation")}},{key:"renderTarget",get:function(){return this._renderTarget},set:function(t){this._renderTarget!==t&&(this._renderTarget&&this._addResourceReferCount(this._renderTarget,-1),t&&this._addResourceReferCount(t,1),this._renderTarget=t,this._onPixelViewportChanged(),this._checkMainCanvasAntialiasWaste())}}]),r}(Zr),function(){zo._cameraDepthTextureProperty=X.getByName("camera_DepthTexture")}(),function(){zo._cameraOpaqueTextureProperty=X.getByName("camera_OpaqueTexture")}(),function(){zo._inverseViewMatrixProperty=X.getByName("camera_ViewInvMat")}(),function(){zo._cameraPositionProperty=X.getByName("camera_Position")}(),function(){zo._cameraForwardProperty=X.getByName("camera_Forward")}(),function(){zo._cameraUpProperty=X.getByName("camera_Up")}(),function(){zo._cameraDepthBufferParamsProperty=X.getByName("camera_DepthBufferParams")}(),zo);H([Xe],rn.prototype,"_frustum",void 0);H([te],rn.prototype,"_renderPipeline",void 0);H([te],rn.prototype,"_virtualCamera",void 0);H([te],rn.prototype,"_cameraIndex",void 0);H([te],rn.prototype,"_frustumChangeFlag",void 0);H([te],rn.prototype,"_transform",void 0);H([te],rn.prototype,"_isViewMatrixDirty",void 0);H([te],rn.prototype,"_isInvViewProjDirty",void 0);H([Xe],rn.prototype,"_viewport",void 0);H([Xe],rn.prototype,"_pixelViewport",void 0);H([Xe],rn.prototype,"_inverseProjectionMatrix",void 0);H([Xe],rn.prototype,"_invViewProjMat",void 0);H([te],rn.prototype,"_onPixelViewportChanged",null);rn=H([gs(Vt,no.CheckOnly)],rn);var a6={json:"json",gltf:"json",mtl:"json",prefab:"json",txt:"text",bin:"arraybuffer",png:"image",webp:"image",jpg:"image"},i6=1,o6=1/0,s6=500;function Jl(n,r){return r===void 0&&(r={}),new sn(function(a,e,t,i){var o,s=(o=r.retryCount)!=null?o:i6,l,u=(l=r.retryInterval)!=null?l:s6,c;r.timeout=(c=r.timeout)!=null?c:o6;var f;r.type=(f=r.type)!=null?f:u6(n);var d=new c6(function(){return l6(n,r).onProgress(t,i)},s,u);d.start().onError(e).onComplete(a)})}function l6(n,r){return new sn(function(a,e,t,i){var o=new XMLHttpRequest,s=r.type==="image";o.timeout=r.timeout;var l;r.method=(l=r.method)!=null?l:"get",o.onload=function(){if(o.status<200||o.status>=300){e(new Error("request failed from: "+n));return}var c,f=(c=o.response)!=null?c:o.responseText;if(s){var d=new Image;d.onload=function(){requestAnimationFrame(function(){t(1,1),a(d),d.onload=null,d.onerror=null,d.onabort=null,URL.revokeObjectURL(d.src)})},d.onerror=d.onabort=function(){e(new Error("request "+d.src+" fail")),URL.revokeObjectURL(d.src)},d.crossOrigin="anonymous",d.src=URL.createObjectURL(f)}else t(1,1),a(f)},o.onerror=function(){e(new Error("request failed from: "+n))},o.ontimeout=function(){e(new Error("request timeout from: "+n))},o.onprogress=function(c){c.lengthComputable&&i(n,c.loaded,c.total)},o.open(r.method,n,!0),o.withCredentials=r.credentials==="include",o.responseType=s?"blob":r.type;var u=r.headers;u&&Object.keys(u).forEach(function(c){o.setRequestHeader(c,u[c])}),o.send(r.body)})}function u6(n){var r=n.substring(n.lastIndexOf(".")+1);return a6[r]}var c6=function(){function n(a,e,t){this.execFunc=a,this.totalCount=e,this.interval=t,this._timeoutId=-100,this._currentCount=0,this.exec=this.exec.bind(this)}var r=n.prototype;return r.start=function(){return this.exec(),this},r.onComplete=function(e){return this._onComplete=e,this},r.onError=function(e){return this._onError=e,this},r.cancel=function(){window.clearTimeout(this._timeoutId)},r.exec=function(){var e=this;if(this._currentCount>=this.totalCount){this._onError&&this._onError(this._error);return}this._currentCount++,this.execFunc(this._currentCount).then(function(t){return e._onComplete&&e._onComplete(t)}).catch(function(t){e._error=t,e._timeoutId=window.setTimeout(e.exec,e.interval)})},n}(),ln=function(){function n(r){this.useCache=r,this.request=Jl}return n.registerClass=function(a,e){this._engineObjects[a]=e,this._classNameMap.set(e,a)},n.getClass=function(a){return this._engineObjects[a]},n.getClassName=function(a){return this._classNameMap.get(a)},n}();(function(){ln._engineObjects={}})();(function(){ln._classNameMap=new Map})();var f6=function(){function n(){}var r=n.prototype;return r.initialize=function(e){var t=e.component,i=e.property.split(".");if(e.getProperty){var o=e.getProperty.split(".");this._initializeMounted(t,o,1),this._initializeMounted(t,i,2)}else this._initializeMounted(t,i,3)},r.getTargetValue=function(){switch(this._getType){case 2:return this._getMounted[this._getArrayIndex];case 1:return this._getMounted[this._getValueName].apply(this._getMounted,this._getArgs);case 0:return this._getMounted[this._getValueName]}},r.setTargetValue=function(e){switch(this._setType){case 2:this._setMounted[this._setArrayIndex]=e;break;case 1:var t=this._setArgs;t[this._replaceValueIndex]=e,this._setMounted[this._setValueName].apply(this._setMounted,t);break;case 0:this._setMounted[this._setValueName]=e;break}},r._initializeMounted=function(e,t,i){for(var o=t.length-1,s=0;s<o;s++){var l=t[s];if(l.indexOf("[")>-1){var u=l.indexOf("[");e=e[l.slice(0,u)],e=e[parseInt(l.slice(u+1,-1))]}else if(l.endsWith(")")){var c=l.slice(0,l.indexOf("(")),f=l.match(/\w+\(([^)]*)\)/)[1].split(",").map(function(g){return g.trim().replace(/['"]+/g,"")}).filter(function(g){return g!==""});e=e[c].apply(e,f)}else e=e[l]}var d=t[o],h,_,p,v;if(d.indexOf("[")>-1){var y=d.indexOf("[");h=2,e=e[d.slice(0,y)],_=parseInt(d.slice(y+1,-1))}else if(d.endsWith(")")){if(p=d.slice(0,d.indexOf("(")),v=d.match(/\w+\(([^)]*)\)/)[1].split(",").map(function(g){return g.trim().replace(/['"]+/g,"")}).filter(function(g){return g!==""}),h=1,i&2){var m=v.indexOf("$value");this._replaceValueIndex=m>-1?m:v.length}}else h=0;i&2&&(this._setMounted=e,this._setType=h,this._setArrayIndex=_,this._setValueName=d,p&&(this._setValueName=p),this._setArgs=v),i&1&&(this._getMounted=e,this._getType=h,this._getArrayIndex=_,this._getValueName=d,p&&(this._getValueName=p),this._getArgs=v)},n}(),aC;(function(n){n[n.Property=0]="Property",n[n.Method=1]="Method",n[n.Array=2]="Array"})(aC||(aC={}));var iC;(function(n){n[n.Get=1]="Get",n[n.Set=2]="Set",n[n.Both=3]="Both"})(iC||(iC={}));var ms=function(){function n(a,e,t,i,o,s){this.baseEvaluateData={curKeyframeIndex:0,value:null},this.crossEvaluateData={curKeyframeIndex:0,value:null},this.updateMark=0,this.target=a,this.property=i,this.getProperty=o,this.component=t,this.cureType=s;var l=n.getAssemblerType(e,i);this._assembler=new l,this._assembler.initialize(this),s._isCopyMode&&(this.referenceTargetValue=this._assembler.getTargetValue())}var r=n.prototype;return r.evaluateValue=function(e,t,i){return i?e._evaluateAdditive(t,this.baseEvaluateData):e._evaluate(t,this.baseEvaluateData)},r.evaluateCrossFadeValue=function(e,t,i,o,s,l){if(!this.cureType._supportInterpolationMode)return this.evaluateValue(t,o,!1);var u=e&&e.keys.length?l?e._evaluateAdditive(i,this.baseEvaluateData):e._evaluate(i,this.baseEvaluateData):l?this.cureType._getZeroValue(this.baseEvaluateData.value):this.defaultValue,c=t&&t.keys.length?l?t._evaluateAdditive(o,this.crossEvaluateData):t._evaluate(o,this.crossEvaluateData):l?this.cureType._getZeroValue(this.crossEvaluateData.value):this.defaultValue;return this._lerpValue(u,c,s)},r.crossFadeFromPoseAndApplyValue=function(e,t,i,o){if(!this.cureType._supportInterpolationMode)return this.evaluateValue(e,t,!1);var s=o?this.cureType._subtractValue(this.fixedPoseValue,this.defaultValue,this.baseEvaluateData.value):this.fixedPoseValue,l=e&&e.keys.length?o?e._evaluateAdditive(t,this.crossEvaluateData):e._evaluate(t,this.crossEvaluateData):o?this.cureType._getZeroValue(this.crossEvaluateData.value):this.defaultValue;return this._lerpValue(s,l,i)},r.revertDefaultValue=function(){this._assembler.setTargetValue(this.defaultValue)},r.getEvaluateValue=function(e){return this.cureType._isCopyMode?(this.cureType._setValue(this.baseEvaluateData.value,e),e):this.baseEvaluateData.value},r.saveDefaultValue=function(){this.cureType._isCopyMode?this.cureType._setValue(this.referenceTargetValue,this.defaultValue):this.defaultValue=this._assembler.getTargetValue()},r.saveFixedPoseValue=function(){this.cureType._isCopyMode?this.cureType._setValue(this.referenceTargetValue,this.fixedPoseValue):this.fixedPoseValue=this._assembler.getTargetValue()},r.applyValue=function(e,t,i){var o=this.cureType;if(i){var s=this._assembler;if(o._isCopyMode)o._additiveValue(e,t,this.referenceTargetValue);else{var l=s.getTargetValue(),u=o._additiveValue(e,t,l);s.setTargetValue(u)}}else if(t===1)o._isCopyMode?o._setValue(e,this.referenceTargetValue):this._assembler.setTargetValue(e);else if(o._isCopyMode){var c=this.referenceTargetValue;o._lerpValue(c,e,t,c)}else{var f=this._assembler.getTargetValue(),d=o._lerpValue(f,e,t);this._assembler.setTargetValue(d)}},r._lerpValue=function(e,t,i){return this.cureType._isCopyMode?this.cureType._lerpValue(e,t,i,this.baseEvaluateData.value):(this.baseEvaluateData.value=this.cureType._lerpValue(e,t,i),this.baseEvaluateData.value)},n.registerAssembler=function(e,t,i){var o=n._assemblerMap.get(e);o||(o={},n._assemblerMap.set(e,o)),o[t]=i},n.getAssemblerType=function(e,t){var i=n._assemblerMap.get(e),o=i?i[t]:void 0;return o!=null?o:f6},n}();(function(){ms._components=[]})();(function(){ms._assemblerMap=new Map})();var d6=function(){function n(){}var r=n.prototype;return r.initialize=function(e){this._transform=e.target.transform},r.getTargetValue=function(){return this._transform.position},r.setTargetValue=function(e){this._transform.position=e},n}();ms.registerAssembler(Vt,"position",d6);var h6=function(){function n(){}var r=n.prototype;return r.initialize=function(e){this._transform=e.target.transform},r.getTargetValue=function(){return this._transform.rotationQuaternion},r.setTargetValue=function(e){this._transform.rotationQuaternion=e},n}();ms.registerAssembler(Vt,"rotationQuaternion",h6);var v6=function(){function n(){}var r=n.prototype;return r.initialize=function(e){this._transform=e.target.transform},r.getTargetValue=function(){return this._transform.scale},r.setTargetValue=function(e){this._transform.scale=e},n}();ms.registerAssembler(Vt,"scale",v6);var p6=function(){function n(){}var r=n.prototype;return r.initialize=function(e){this._skinnedMeshRenderer=e.component},r.getTargetValue=function(){return this._skinnedMeshRenderer.blendShapeWeights},r.setTargetValue=function(e){this._skinnedMeshRenderer.blendShapeWeights=e},n}();ms.registerAssembler(Ur,"blendShapeWeights",p6);var _6=function(){function n(){this.crossCurveMark=0,this.isActive=!0}var r=n.prototype;return r.initFinalValue=function(){var e=this.curveOwner,t=e.cureType,i=e.defaultValue;t._isCopyMode?t._setValue(i,this.finalValue):this.finalValue=i},r.saveFinalValue=function(){this.finalValue=this.curveOwner.getEvaluateValue(this.finalValue)},n}(),LP=function(){function n(){this.typeIndex=0,this._tempCurveOwner={}}var r=n.prototype;return r._createCurveOwner=function(e,t){var i=this.curve.constructor,o=new ms(e,this.type,t,this.property,this.getProperty,i);return i._initializeOwner(o),o.saveDefaultValue(),o},r._createCurveLayerOwner=function(e){var t=this.curve.constructor,i=new _6;return i.curveOwner=e,t._initializeLayerOwner(i),i.initFinalValue(),i},r._getTempCurveOwner=function(e,t){var i=e.instanceId;return this._tempCurveOwner[i]||(this._tempCurveOwner[i]=this._createCurveOwner(e,t)),this._tempCurveOwner[i]},n}(),h_=function(){},Cx=function(n){be(r,n);function r(e){var t;return t=n.call(this,null)||this,t.name=e,t._curveBindings=[],t._updateFlagManager=new to,t._length=0,t._events=[],t}var a=r.prototype;return a.addEvent=function(t,i,o){var s;if(typeof t=="string"){var l=new h_;l.functionName=t,l.time=i,l.parameter=o,s=l}else s=t;var u=this._events,c=u.length,f=s.time,d=c?u[c-1].time:0;if(f>=d)u.push(s);else{for(var h=c;--h>=0&&f<u[h].time;);u.splice(h+1,0,s)}this._updateFlagManager.dispatch()},a.clearEvents=function(){this._events.length=0,this._updateFlagManager.dispatch()},a.addCurveBinding=function(t,i,o,s,l,u){var c=new LP;c.relativePath=t,c.type=i,typeof o=="number"?(c.typeIndex=o,c.property=s,typeof l=="string"?(c.getProperty=l,c.curve=u):c.curve=l):(c.property=o,typeof s=="string"?(c.getProperty=s,c.curve=l):c.curve=s),this._length=Math.max(this._length,c.curve.length),this._curveBindings.push(c)},a.clearCurveBindings=function(){this._curveBindings.length=0,this._length=0},a._sampleAnimation=function(t,i){for(var o=this,s=o._curveBindings,l=s.length-1;l>=0;l--){var u=s[l],c=t.findByPath(u.relativePath);if(c){var f=u.typeIndex>0?c.getComponents(u.type,ms._components)[u.typeIndex]:c.getComponent(u.type);if(!f)continue;var d=u._getTempCurveOwner(c,f);if(d&&u.curve.keys.length){var h=d.evaluateValue(u.curve,i,!1);d.applyValue(h,1,!1)}}}},Ie(r,[{key:"events",get:function(){return this._events}},{key:"curveBindings",get:function(){return this._curveBindings}},{key:"length",get:function(){return this._length}}]),r}(Oo),Pr;(function(n){n[n.Linear=0]="Linear",n[n.CubicSpine=1]="CubicSpine",n[n.Step=2]="Step",n[n.Hermite=3]="Hermite"})(Pr||(Pr={}));var ai=function(){function n(){this.keys=[],this._evaluateData={curKeyframeIndex:0,value:null},this._length=0;var a=this.constructor;this._interpolation=a._supportInterpolationMode?Pr.Linear:Pr.Step,this._type=a}var r=n.prototype;return r.addKey=function(e){var t=e.time,i=this.keys;if(t>=this._length)i.push(e),this._length=t;else{for(var o=i.length;--o>=0&&t<i[o].time;);i.splice(o+1,0,e)}},r.evaluate=function(e){return this._evaluate(e,this._evaluateData)},r.removeKey=function(e){this.keys.splice(e,1);for(var t=this.keys,i=0,o=t.length-1;o>=0;o--){var s=t[o];s.time>this._length&&(i=s.time)}this._length=i},r._evaluate=function(e,t){var i=this.keys.length;if(!i){console.warn("This curve don't have any keyframes: ",this);return}var o=this,s=o.keys,l=o.interpolation,u=t.curKeyframeIndex;u!==-1&&(u>=i||e<s[u].time)&&(u=-1);for(var c=u+1;c<i&&!(e<s[c].time);)u++,c++;t.curKeyframeIndex=u;var f;if(u===-1)f=this._type._setValue(s[0].value,t.value);else if(c===i)f=this._type._setValue(s[u].value,t.value);else{var d=s[u],h=s[c],_=d.time,p=h.time-_,v=(e-_)/p;switch(l){case Pr.Linear:f=this._type._lerpValue(d.value,h.value,v,t.value);break;case Pr.Step:f=this._type._setValue(d.value,t.value);break;case Pr.CubicSpine:case Pr.Hermite:f=this._type._hermiteInterpolationValue(d,h,v,p,t.value);break}}return t.value=f,f},r._evaluateAdditive=function(e,t){var i=this._evaluate(e,t);return this._type._subtractValue(i,this.keys[0].value,t.value)},Ie(n,[{key:"interpolation",get:function(){return this._interpolation},set:function(e){!this._type._supportInterpolationMode&&e!==Pr.Step?(this._interpolation=Pr.Step,console.warn("The interpolation type must be `InterpolationType.Step`.")):this._interpolation=e}},{key:"length",get:function(){return this._length}}]),n}(),bh,Jv=(bh=function(n){be(r,n);function r(){var a;return a=n.call(this)||this,a._evaluateData.value=[],a}return r._initializeOwner=function(e){e.defaultValue=[],e.fixedPoseValue=[],e.baseEvaluateData.value=[],e.crossEvaluateData.value=[]},r._initializeLayerOwner=function(e){e.finalValue=[]},r._lerpValue=function(e,t,i,o){for(var s=0,l=o.length;s<l;++s){var u=e[s];o[s]=u+(t[s]-u)*i}return o},r._subtractValue=function(e,t,i){for(var o=0,s=e.length;o<s;o++)i[o]=e[o]-t[o];return i},r._getZeroValue=function(e){for(var t=0,i=e.length;t<i;t++)e[t]=0;return e},r._additiveValue=function(e,t,i){for(var o=0,s=i.length;o<s;++o)i[o]+=e[o]*t;return i},r._setValue=function(e,t){for(var i=0,o=t.length;i<o;++i)t[i]=e[i];return t},r._hermiteInterpolationValue=function(e,t,i,o,s){for(var l=e.outTangent,u=t.inTangent,c=e.value,f=t.value,d=i*i,h=d*i,_=2*h-3*d+1,p=h-2*d+i,v=h-d,y=-2*h+3*d,m=0,g=c.length;m<g;++m)Number.isFinite(l[m])&&Number.isFinite(u[m])?s[m]=_*c[m]+p*l[m]*o+v*u[m]*o+y*f[m]:s[m]=e.value[m];return s},r}(ai),function(){bh._isCopyMode=!0}(),function(){bh._supportInterpolationMode=!0}(),bh);Jv=H([ma()],Jv);var Ch,Zv=(Ch=function(n){be(r,n);function r(){var a;return a=n.call(this)||this,a._evaluateData.value=!1,a}return r._initializeOwner=function(e){e.defaultValue=!1,e.fixedPoseValue=!1,e.baseEvaluateData.value=!1,e.crossEvaluateData.value=!1},r._initializeLayerOwner=function(e){e.finalValue=!1},r._lerpValue=function(e,t){return e},r._subtractValue=function(e,t,i){return e},r._getZeroValue=function(){return!1},r._additiveValue=function(e,t,i){return e},r._setValue=function(e){return e},r._hermiteInterpolationValue=function(e){return e.value},r}(ai),function(){Ch._isCopyMode=!1}(),function(){Ch._supportInterpolationMode=!1}(),Ch);Zv=H([ma()],Zv);var Eh,ep=(Eh=function(n){be(r,n);function r(){var a;return a=n.call(this)||this,a._evaluateData.value=new Me,a}return r._initializeOwner=function(e){e.defaultValue=new Me,e.fixedPoseValue=new Me,e.baseEvaluateData.value=new Me,e.crossEvaluateData.value=new Me},r._initializeLayerOwner=function(e){e.finalValue=new Me},r._lerpValue=function(e,t,i,o){return Me.lerp(e,t,i,o),o},r._subtractValue=function(e,t,i){return Me.subtract(e,t,i),i},r._getZeroValue=function(e){return e.set(0,0,0,0),e},r._additiveValue=function(e,t,i){return Me.scale(e,t,e),Me.add(i,e,i),i},r._setValue=function(e,t){return t.copyFrom(e),t},r._hermiteInterpolationValue=function(e,t,i,o,s){var l=e.value,u=e.outTangent,c=t.value,f=t.inTangent,d=i*i,h=d*i,_=2*h-3*d+1,p=h-2*d+i,v=h-d,y=-2*h+3*d,m=u.x,g=f.x;return Number.isFinite(m)&&Number.isFinite(g)?s.r=_*l.r+p*m*o+v*g*o+y*c.r:s.r=l.r,m=u.y,g=f.y,Number.isFinite(m)&&Number.isFinite(g)?s.g=_*l.g+p*m*o+v*g*o+y*c.g:s.g=l.g,m=u.z,g=f.z,Number.isFinite(m)&&Number.isFinite(g)?s.b=_*l.b+p*m*o+v*g*o+y*c.b:s.b=l.b,m=u.w,g=f.w,Number.isFinite(m)&&Number.isFinite(g)?s.a=_*l.a+p*m*o+v*g*o+y*c.a:s.a=l.a,s},r}(ai),function(){Eh._isCopyMode=!0}(),function(){Eh._supportInterpolationMode=!0}(),Eh);ep=H([ma()],ep);var Th,hd=(Th=function(n){be(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.addKey=function(t){n.prototype.addKey.call(this,t);var i=this._evaluateData;if(!i.value||i.value.length!==t.value.length){var o=t.value.length;i.value=new Float32Array(o)}},r._initializeOwner=function(t){var i=t.referenceTargetValue.length;t.defaultValue=new Float32Array(i),t.fixedPoseValue=new Float32Array(i),t.baseEvaluateData.value=new Float32Array(i),t.crossEvaluateData.value=new Float32Array(i)},r._initializeLayerOwner=function(t){var i=t.curveOwner.referenceTargetValue.length;t.finalValue=new Float32Array(i)},r._lerpValue=function(t,i,o,s){for(var l=0,u=s.length;l<u;++l){var c=t[l];s[l]=c+(i[l]-c)*o}return s},r._subtractValue=function(t,i,o){for(var s=0,l=t.length;s<l;s++)o[s]=t[s]-i[s];return o},r._getZeroValue=function(t){for(var i=0,o=t.length;i<o;i++)t[i]=0;return t},r._additiveValue=function(t,i,o){for(var s=0,l=o.length;s<l;++s)o[s]+=t[s]*i;return o},r._setValue=function(t,i){for(var o=0,s=i.length;o<s;++o)i[o]=t[o];return i},r._hermiteInterpolationValue=function(t,i,o,s,l){for(var u=t.outTangent,c=i.inTangent,f=t.value,d=i.value,h=o*o,_=h*o,p=2*_-3*h+1,v=_-2*h+o,y=_-h,m=-2*_+3*h,g=0,x=f.length;g<x;++g)Number.isFinite(u[g])&&Number.isFinite(c[g])?l[g]=p*f[g]+v*u[g]*s+y*c[g]*s+m*d[g]:l[g]=t.value[g];return l},r}(ai),function(){Th._isCopyMode=!0}(),function(){Th._supportInterpolationMode=!0}(),Th);hd=H([ma()],hd);var Rh,tp=(Rh=function(n){be(r,n);function r(){var a;return a=n.call(this)||this,a._evaluateData.value=0,a}return r._initializeOwner=function(e){e.defaultValue=0,e.fixedPoseValue=0,e.baseEvaluateData.value=0,e.crossEvaluateData.value=0},r._initializeLayerOwner=function(e){e.finalValue=0},r._lerpValue=function(e,t,i){return e+(t-e)*i},r._additiveValue=function(e,t,i){return i+=e*t},r._subtractValue=function(e,t){return e-t},r._getZeroValue=function(){return 0},r._setValue=function(e){return e},r._hermiteInterpolationValue=function(e,t,i,o){var s=e.outTangent,l=t.inTangent;if(Number.isFinite(s)&&Number.isFinite(l)){var u=i*i,c=u*i,f=2*c-3*u+1,d=c-2*u+i,h=c-u,_=-2*c+3*u;return f*e.value+d*s*o+h*l*o+_*t.value}else return e.value},r}(ai),function(){Rh._isCopyMode=!1}(),function(){Rh._supportInterpolationMode=!0}(),Rh);tp=H([ma()],tp);var nf,hc=(nf=function(n){be(r,n);function r(){var a;return a=n.call(this)||this,a._evaluateData.value=new Ut,a}return r._initializeOwner=function(e){e.defaultValue=new Ut,e.fixedPoseValue=new Ut,e.baseEvaluateData.value=new Ut,e.crossEvaluateData.value=new Ut},r._initializeLayerOwner=function(e){e.finalValue=new Ut},r._lerpValue=function(e,t,i,o){return Ut.slerp(e,t,i,o),o},r._additiveValue=function(e,t,i){return e.x=e.x*t,e.y=e.y*t,e.z=e.z*t,e.normalize(),i.multiply(e),i},r._subtractValue=function(e,t,i){var o=hc._tempConjugateQuat;return Ut.conjugate(t,o),Ut.multiply(o,e,i),i},r._getZeroValue=function(e){return e.set(0,0,0,1),e},r._setValue=function(e,t){return t.copyFrom(e),t},r._hermiteInterpolationValue=function(e,t,i,o,s){var l=e.value,u=e.outTangent,c=t.value,f=t.inTangent,d=i*i,h=d*i,_=2*h-3*d+1,p=h-2*d+i,v=h-d,y=-2*h+3*d,m=u.x,g=f.x;return Number.isFinite(m)&&Number.isFinite(g)?s.x=_*l.x+p*m*o+v*g*o+y*c.x:s.x=l.x,m=u.y,g=f.y,Number.isFinite(m)&&Number.isFinite(g)?s.y=_*l.y+p*m*o+v*g*o+y*c.y:s.y=l.y,m=u.z,g=f.z,Number.isFinite(m)&&Number.isFinite(g)?s.z=_*l.z+p*m*o+v*g*o+y*c.z:s.z=l.z,m=u.w,g=f.w,Number.isFinite(m)&&Number.isFinite(g)?s.w=_*l.w+p*m*o+v*g*o+y*c.w:s.w=l.w,s},r}(ai),function(){nf._supportInterpolationMode=!0}(),function(){nf._isCopyMode=!0}(),function(){nf._tempConjugateQuat=new Ut}(),nf);hc=H([ma()],hc);var Ah,np=(Ah=function(n){be(r,n);function r(){var a;return a=n.call(this)||this,a._evaluateData.value=new Ze,a}return r._initializeOwner=function(e){e.defaultValue=new Ze,e.fixedPoseValue=new Ze,e.baseEvaluateData.value=new Ze,e.crossEvaluateData.value=new Ze},r._initializeLayerOwner=function(e){e.finalValue=new Ze},r._lerpValue=function(e,t,i,o){return Ze.lerp(e,t,i,o),o},r._additiveValue=function(e,t,i){return Ze.scale(e,t,e),Ze.add(i,e,i),i},r._subtractValue=function(e,t,i){return Ze.subtract(e,t,i),i},r._getZeroValue=function(e){return e.set(0,0),e},r._setValue=function(e,t){return t.copyFrom(e),t},r._hermiteInterpolationValue=function(e,t,i,o,s){var l=e.value,u=e.outTangent,c=t.value,f=t.inTangent,d=i*i,h=d*i,_=2*h-3*d+1,p=h-2*d+i,v=h-d,y=-2*h+3*d,m=u.x,g=f.x;return Number.isFinite(m)&&Number.isFinite(g)?s.x=_*l.x+p*m*o+v*g*o+y*c.x:s.x=l.x,m=u.y,g=f.y,Number.isFinite(m)&&Number.isFinite(g)?s.y=_*l.y+p*m*o+v*g*o+y*c.y:s.y=l.y,s},r}(ai),function(){Ah._isCopyMode=!0}(),function(){Ah._supportInterpolationMode=!0}(),Ah);np=H([ma()],np);var wh,vd=(wh=function(n){be(r,n);function r(){var a;return a=n.call(this)||this,a._evaluateData.value=new z,a}return r._initializeOwner=function(e){e.defaultValue=new z,e.fixedPoseValue=new z,e.baseEvaluateData.value=new z,e.crossEvaluateData.value=new z},r._initializeLayerOwner=function(e){e.finalValue=new z},r._lerpValue=function(e,t,i,o){return z.lerp(e,t,i,o),o},r._relativeBaseValue=function(e,t){return z.subtract(t,e,t),t},r._additiveValue=function(e,t,i){return z.scale(e,t,e),z.add(i,e,i),i},r._subtractValue=function(e,t,i){return z.subtract(e,t,i),i},r._getZeroValue=function(e){return e.set(0,0,0),e},r._setValue=function(e,t){return t.copyFrom(e),t},r._hermiteInterpolationValue=function(e,t,i,o,s){var l=e.value,u=e.outTangent,c=t.value,f=t.inTangent,d=i*i,h=d*i,_=2*h-3*d+1,p=h-2*d+i,v=h-d,y=-2*h+3*d,m=u.x,g=f.x;return Number.isFinite(m)&&Number.isFinite(g)?s.x=_*l.x+p*m*o+v*g*o+y*c.x:s.x=l.x,m=u.y,g=f.y,Number.isFinite(m)&&Number.isFinite(g)?s.y=_*l.y+p*m*o+v*g*o+y*c.y:s.y=l.y,m=u.z,g=f.z,Number.isFinite(m)&&Number.isFinite(g)?s.z=_*l.z+p*m*o+v*g*o+y*c.z:s.z=l.z,s},r}(ai),function(){wh._isCopyMode=!0}(),function(){wh._supportInterpolationMode=!0}(),wh);vd=H([ma()],vd);var Ph,rp=(Ph=function(n){be(r,n);function r(){var a;return a=n.call(this)||this,a._evaluateData.value=new pt,a}return r._initializeOwner=function(e){e.defaultValue=new pt,e.fixedPoseValue=new pt,e.baseEvaluateData.value=new pt,e.crossEvaluateData.value=new pt},r._initializeLayerOwner=function(e){e.finalValue=new pt},r._lerpValue=function(e,t,i,o){return pt.lerp(e,t,i,o),o},r._additiveValue=function(e,t,i){return pt.scale(e,t,e),pt.add(i,e,i),i},r._subtractValue=function(e,t,i){return pt.subtract(e,t,i),i},r._getZeroValue=function(e){return e.set(0,0,0,0),e},r._setValue=function(e,t){return t.copyFrom(e),t},r._hermiteInterpolationValue=function(e,t,i,o,s){var l=e.value,u=e.outTangent,c=t.value,f=t.inTangent,d=i*i,h=d*i,_=2*h-3*d+1,p=h-2*d+i,v=h-d,y=-2*h+3*d,m=u.x,g=f.x;return Number.isFinite(m)&&Number.isFinite(g)?s.x=_*l.x+p*m*o+v*g*o+y*c.x:s.x=l.x,m=u.y,g=f.y,Number.isFinite(m)&&Number.isFinite(g)?s.y=_*l.y+p*m*o+v*g*o+y*c.y:s.y=l.y,m=u.z,g=f.z,Number.isFinite(m)&&Number.isFinite(g)?s.z=_*l.z+p*m*o+v*g*o+y*c.z:s.z=l.z,m=u.w,g=f.w,Number.isFinite(m)&&Number.isFinite(g)?s.w=_*l.w+p*m*o+v*g*o+y*c.w:s.w=l.w,s},r}(ai),function(){Ph._isCopyMode=!0}(),function(){Ph._supportInterpolationMode=!0}(),Ph);rp=H([ma()],rp);var Mh,ap=(Mh=function(n){be(r,n);function r(){return n.call(this)}return r._initializeOwner=function(e){},r._initializeLayerOwner=function(e){},r._setValue=function(e){return e},r}(ai),function(){Mh._isCopyMode=!1}(),function(){Mh._supportInterpolationMode=!1}(),Mh);ap=H([ma()],ap);var Oh,l0=(Oh=function(n){be(r,n);function r(){var a;return a=n.call(this)||this,a._evaluateData.value=new ho,a}return r._initializeOwner=function(e){e.defaultValue=new ho,e.fixedPoseValue=new ho,e.baseEvaluateData.value=new ho,e.crossEvaluateData.value=new ho},r._initializeLayerOwner=function(e){e.finalValue=new ho},r._setValue=function(e,t){return t.copyFrom(e),t},r}(ai),function(){Oh._isCopyMode=!0}(),function(){Oh._supportInterpolationMode=!1}(),Oh);l0=H([ma()],l0);var Ih,ip=(Ih=function(n){be(r,n);function r(){var a;return a=n.call(this)||this,a._evaluateData.value="",a}return r._initializeOwner=function(e){e.defaultValue="",e.fixedPoseValue="",e.baseEvaluateData.value="",e.crossEvaluateData.value=""},r._initializeLayerOwner=function(e){e.finalValue=""},r._lerpValue=function(e,t){return e},r._subtractValue=function(e,t,i){return e},r._getZeroValue=function(){return""},r._additiveValue=function(e,t,i){return e},r._setValue=function(e){return e},r._hermiteInterpolationValue=function(e){return e.value},r}(ai),function(){Ih._isCopyMode=!1}(),function(){Ih._supportInterpolationMode=!1}(),Ih);ip=H([ma()],ip);var pd;(function(n){n[n.None=0]="None",n[n.Complete=1]="Complete"})(pd||(pd={}));var _d;(function(n){n[n.Override=0]="Override",n[n.Additive=1]="Additive"})(_d||(_d={}));var Sr;(function(n){n[n.UnStarted=0]="UnStarted",n[n.Playing=1]="Playing",n[n.Finished=2]="Finished"})(Sr||(Sr={}));var Un;(function(n){n[n.Standby=0]="Standby",n[n.Playing=1]="Playing",n[n.CrossFading=2]="CrossFading",n[n.FixedCrossFading=3]="FixedCrossFading",n[n.Finished=4]="Finished"})(Un||(Un={}));var g6=function(){function n(){this.handlers=[]}var r=n.prototype;return r.dispose=function(){},n}(),Ex=function(){this.duration=0,this.offset=0,this.exitTime=1},gd;(function(n){n[n.Once=0]="Once",n[n.Loop=1]="Loop"})(gd||(gd={}));var oC=function(){function n(){}var r=n.prototype;return r.reset=function(e,t,i){this.state=e,this.frameTime=i,this.stateData=t,this.playState=Sr.UnStarted,this.clipTime=e.clipStartTime*e.clip.length,this.currentEventIndex=0,this.currentTransitionIndex=0},r.update=function(e){var t=this.state,i=this.frameTime,o=t._getDuration();this.playState=Sr.Playing,t.wrapMode===gd.Loop?i=o?i%o:0:Math.abs(i)>o&&(i=i<0?-o:o,this.playState=Sr.Finished),e&&i===0?this.clipTime=t.clipEndTime*t.clip.length:(i<0&&(i+=o),this.clipTime=i+t.clipStartTime*t.clip.length)},n}(),m6=function(){function n(){this.curveOwnerPool=Object.create(null),this.animatorStateDataMap={},this.srcPlayData=new oC,this.destPlayData=new oC,this.layerState=Un.Standby,this.crossCurveMark=0,this.manuallyTransition=new Ex,this.crossLayerOwnerCollection=[]}var r=n.prototype;return r.switchPlayData=function(){var e=this.destPlayData,t=this.srcPlayData;this.srcPlayData=e,this.destPlayData=t},n}(),y6=function(){this.curveLayerOwner=[],this.eventHandlers=[]},Lo=function(n){be(r,n);function r(e){var t;return t=n.call(this,e)||this,t.cullingMode=pd.None,t.speed=1,t._playFrameCount=-1,t._onUpdateIndex=-1,t._updateMark=0,t._animatorLayersData=[],t._curveOwnerPool=Object.create(null),t._animationEventHandlerPool=new yl(g6),t._tempAnimatorStateInfo={layerIndex:-1,state:null},t._controlledRenderers=[],t}var a=r.prototype;return a.play=function(t,i,o){i===void 0&&(i=-1),o===void 0&&(o=0);var s;(s=this._controllerUpdateFlag)!=null&&s.flag&&this._reset(),this._playFrameCount=this.engine.time.frameCount;var l=this._getAnimatorStateInfo(t,i),u=l.state,c=l.layerIndex;if(!!u){if(!u.clip){Pt.warn("The state named "+t+" has no AnimationClip data.");return}var f=this._getAnimatorLayerData(c),d=this._getAnimatorStateData(t,u,f,c);this._preparePlay(f,u),f.layerState=Un.Playing,f.srcPlayData.reset(u,d,u._getDuration()*o),this.update(0)}},a.crossFade=function(t,i,o,s){o===void 0&&(o=-1),s===void 0&&(s=0);var l;(l=this._controllerUpdateFlag)!=null&&l.flag&&this._reset(),this._playFrameCount=this.engine.time.frameCount;var u=this._getAnimatorStateInfo(t,o),c=u.state,f=u.layerIndex,d=this._getAnimatorLayerData(f).manuallyTransition;d.duration=i,d.offset=s,d.destinationState=c,this._crossFadeByTransition(d,f)&&this.update(0)},a.update=function(t){var i,o;if(this.cullingMode===pd.Complete){o=!1;for(var s=this._controlledRenderers,l=0,u=s.length;l<u;l++)if(!s[l].isCulled){o=!0;break}}else o=!0;var c=this,f=c._animatorController;if(!!f){if((i=this._controllerUpdateFlag)!=null&&i.flag){this._checkAutoPlay();return}this._updateMark++;for(var d=0,h=f.layers.length;d<h;d++){var _=this._getAnimatorLayerData(d);_.layerState!==Un.Standby&&this._updateLayer(d,d===0,t,o)}}},a.getCurrentAnimatorState=function(t){var i,o;return(o=this._animatorLayersData[t])==null||(i=o.srcPlayData)==null?void 0:i.state},a.findAnimatorState=function(t,i){return i===void 0&&(i=-1),this._getAnimatorStateInfo(t,i).state},a._onEnable=function(){this.animatorController&&this._checkAutoPlay(),this._entity.getComponentsIncludeChildren(Gt,this._controlledRenderers)},a._onEnableInScene=function(){this.scene._componentsManager.addOnUpdateAnimations(this)},a._onDisableInScene=function(){this.scene._componentsManager.removeOnUpdateAnimations(this)},a._reset=function(){var t=this,i=t._curveOwnerPool;for(var o in i){var s=i[o];for(var l in s){var u=s[l];u.revertDefaultValue()}}this._animatorLayersData.length=0,this._curveOwnerPool={},this._animationEventHandlerPool.resetPool(),this._controllerUpdateFlag&&(this._controllerUpdateFlag.flag=!1)},a._getAnimatorStateInfo=function(t,i){var o=this,s=o._animatorController,l=o._tempAnimatorStateInfo,u=null;if(s){var c=s.layers;if(i===-1){for(var f=0,d=c.length;f<d;f++)if(u=c[f].stateMachine.findStateByName(t),u){i=f;break}}else u=c[i].stateMachine.findStateByName(t)}return l.layerIndex=i,l.state=u,l},a._getAnimatorStateData=function(t,i,o,s){var l=o.animatorStateDataMap,u=l[t];return u||(u=new y6,l[t]=u,this._saveAnimatorStateData(i,u,o,s),this._saveAnimatorEventHandlers(i,u)),u},a._saveAnimatorStateData=function(t,i,o,s){for(var l=this,u=l.entity,c=l._curveOwnerPool,f=this._animatorController.layers[s].mask,d=i.curveLayerOwner,h=t.clip,_=h._curveBindings,p=o.curveOwnerPool,v=_.length-1;v>=0;v--){var y=_[v],m=y.relativePath,g=y.relativePath===""?u:u.findByPath(y.relativePath);if(g){var x,b,S,C,E,T,M,L,F=""+y.typeIndex+"."+y.property,N=y.typeIndex>0?g.getComponents(y.type,ms._components)[y.typeIndex]:g.getComponent(y.type);if(!N)continue;var I=y.property,O=g.instanceId,P=(x=c)[b=O]||(x[b]=Object.create(null)),R=(S=P)[C=I]||(S[C]=y._createCurveOwner(g,N)),A=(E=p)[T=O]||(E[T]=Object.create(null)),D=(M=A)[L=F]||(M[L]=y._createCurveLayerOwner(R));if(f&&f.pathMasks.length){var B,k;D.isActive=(k=(B=f.getPathMask(m))==null?void 0:B.active)!=null?k:!0}d[v]=D}else d[v]=null,Pt.warn("The entity don't have the child entity which path is "+y.relativePath+".")}},a._saveAnimatorEventHandlers=function(t,i){var o=this,s=this._animationEventHandlerPool,l=[],u=i.eventHandlers,c=function(){o._entity.getComponents(zr,l);var f=l.length,d=t.clip.events;u.length=0;for(var h=0,_=d.length;h<_;h++){var p=d[h],v=s.getFromPool(),y=p.functionName,m=v.handlers;v.event=p,m.length=0;for(var g=f-1;g>=0;g--){var x=l[g][y];x&&m.push(x)}u.push(v)}};c(),t._updateFlagManager.addListener(c)},a._clearCrossData=function(t){t.crossCurveMark++,t.crossLayerOwnerCollection.length=0},a._addCrossOwner=function(t,i,o,s){i.crossSrcCurveIndex=o,i.crossDestCurveIndex=s,t.crossLayerOwnerCollection.push(i)},a._prepareCrossFading=function(t){this._prepareSrcCrossData(t,!1),this._prepareDestCrossData(t,!1)},a._prepareStandbyCrossFading=function(t){t.srcPlayData.state&&this._prepareSrcCrossData(t,!0),this._prepareDestCrossData(t,!0)},a._prepareFixedPoseCrossFading=function(t){for(var i=t.crossLayerOwnerCollection,o=i.length-1;o>=0;o--){var s=i[o];!s||(s.curveOwner.saveFixedPoseValue(),s.crossDestCurveIndex=-1)}this._prepareDestCrossData(t,!0)},a._prepareSrcCrossData=function(t,i){for(var o=t.srcPlayData.stateData.curveLayerOwner,s=o.length-1;s>=0;s--){var l=o[s];!l||(l.crossCurveMark=t.crossCurveMark,i&&l.curveOwner.saveFixedPoseValue(),this._addCrossOwner(t,l,s,-1))}},a._prepareDestCrossData=function(t,i){for(var o=t.destPlayData.stateData.curveLayerOwner,s=o.length-1;s>=0;s--){var l=o[s];if(!!l)if(l.crossCurveMark===t.crossCurveMark)l.crossDestCurveIndex=s;else{var u=l.curveOwner;i&&u.saveFixedPoseValue(),l.crossCurveMark=t.crossCurveMark,this._addCrossOwner(t,l,-1,s)}}},a._getAnimatorLayerData=function(t){var i=this._animatorLayersData[t];return i||(this._animatorLayersData[t]=i=new m6),i},a._updateLayer=function(t,i,o,s){var l=this._animatorController.layers[t],u=l.blendingMode,c=l.weight,f=this._animatorLayersData[t],d=f.srcPlayData,h=f.destPlayData,_=u===_d.Additive;switch(i&&(c=1),f.layerState){case Un.Playing:this._updatePlayingState(d,f,t,c,o,_,s);break;case Un.FixedCrossFading:this._updateCrossFadeFromPose(h,f,t,c,o,_,s);break;case Un.CrossFading:this._updateCrossFade(d,h,f,t,c,o,_,s);break;case Un.Finished:this._updateFinishedState(d,c,_,s);break}},a._updatePlayingState=function(t,i,o,s,l,u,c){var f=t.stateData,d=f.curveLayerOwner,h=f.eventHandlers,_=t.state,p=t.playState,v=t.clipTime,y=_.transitions,m=_.clip,g=m._curveBindings,x=_.speed*this.speed;t.frameTime+=x*l,t.update(x<0);var b=t.clipTime,S=t.playState,C=S===Sr.Finished;if(c||C)for(var E=g.length-1;E>=0;E--){var T,M=d[E],L=(T=M)==null?void 0:T.curveOwner;if(!(!L||!M.isActive)){var F=g[E].curve;if(F.keys.length){this._checkRevertOwner(L,u);var N=L.evaluateValue(F,b,u);c&&L.applyValue(N,s,u),C&&M.saveFinalValue()}}}if(S===Sr.Finished&&(i.layerState=Un.Finished),h.length&&this._fireAnimationEvents(t,h,v,b),p===Sr.UnStarted&&this._callAnimatorScriptOnEnter(_,o),S===Sr.Finished?this._callAnimatorScriptOnExit(_,o):this._callAnimatorScriptOnUpdate(_,o),y.length){var I=i.layerState;I!==Un.CrossFading&&I!==Un.FixedCrossFading&&this._checkTransition(t,y,o,v,b)}},a._updateCrossFade=function(t,i,o,s,l,u,c,f){var d=this.speed,h=o.crossLayerOwnerCollection,_=t.state.clip,p=_._curveBindings,v=t.state,y=t.stateData,m=t.playState,g=y.eventHandlers,x=i.state,b=i.stateData,S=i.playState,C=b.eventHandlers,E=x.clip,T=E._curveBindings,M=t.clipTime,L=i.clipTime,F=x._getDuration()*o.crossFadeTransition.duration,N=Math.abs(i.frameTime)/F;(N>=1||F===0)&&(N=1);var I=v.speed*d,O=x.speed*d;t.frameTime+=I*u,i.frameTime+=O*u,t.update(I<0),i.update(O<0);var P=t.clipTime,R=t.playState,A=i.clipTime,D=i.playState,B=i.playState===Sr.Finished;if(f||B)for(var k=h.length-1;k>=0;k--){var V,U=h[k],j=(V=U)==null?void 0:V.curveOwner;if(!!j){var G=U.crossSrcCurveIndex,$=U.crossDestCurveIndex;this._checkRevertOwner(j,c);var W=j.evaluateCrossFadeValue(G>=0?p[G].curve:null,$>=0?T[$].curve:null,P,A,N,c);f&&j.applyValue(W,l,c),B&&U.saveFinalValue()}}this._updateCrossFadeData(o,N),g.length&&this._fireAnimationEvents(t,g,M,P),C.length&&this._fireAnimationEvents(i,C,L,A),m===Sr.UnStarted&&this._callAnimatorScriptOnEnter(v,s),N===1||R===Sr.Finished?this._callAnimatorScriptOnExit(v,s):this._callAnimatorScriptOnUpdate(v,s),S===Sr.UnStarted&&this._callAnimatorScriptOnEnter(x,s),D===Sr.Finished?this._callAnimatorScriptOnExit(x,s):this._callAnimatorScriptOnUpdate(x,s)},a._updateCrossFadeFromPose=function(t,i,o,s,l,u,c){var f=i.crossLayerOwnerCollection,d=t.state,h=t.stateData,_=t.playState,p=h.eventHandlers,v=d.clip,y=v._curveBindings,m=t.clipTime,g=d._getDuration()*i.crossFadeTransition.duration,x=Math.abs(t.frameTime)/g;(x>=1||g===0)&&(x=1);var b=d.speed*this.speed;t.frameTime+=b*l,t.update(b<0);var S=t.clipTime,C=t.playState,E=C===Sr.Finished;if(c||E)for(var T=f.length-1;T>=0;T--){var M,L=f[T],F=(M=L)==null?void 0:M.curveOwner;if(!!F){var N=L.crossDestCurveIndex;this._checkRevertOwner(F,u);var I=L.curveOwner.crossFadeFromPoseAndApplyValue(N>=0?y[N].curve:null,S,x,u);c&&F.applyValue(I,s,u),E&&L.saveFinalValue()}}this._updateCrossFadeData(i,x),p.length&&this._fireAnimationEvents(t,p,m,S),_===Sr.UnStarted&&this._callAnimatorScriptOnEnter(d,o),C===Sr.Finished?this._callAnimatorScriptOnExit(d,o):this._callAnimatorScriptOnUpdate(d,o)},a._updateFinishedState=function(t,i,o,s){if(!!s)for(var l=t.stateData.curveLayerOwner,u=t.state.clip,c=u._curveBindings,f=c.length-1;f>=0;f--){var d,h=l[f],_=(d=h)==null?void 0:d.curveOwner;!_||(this._checkRevertOwner(_,o),_.applyValue(h.finalValue,i,o))}},a._updateCrossFadeData=function(t,i){var o=t.destPlayData;i===1&&(o.playState===Sr.Finished?t.layerState=Un.Finished:t.layerState=Un.Playing,t.switchPlayData(),t.crossFadeTransition=null)},a._preparePlay=function(t,i){if(t.layerState===Un.Playing){var o=t.srcPlayData;if(o.state!==i)for(var s=o.stateData.curveLayerOwner,l=s.length-1;l>=0;l--){var u;(u=s[l])==null||u.curveOwner.revertDefaultValue()}}else for(var c=t.crossLayerOwnerCollection,f=c.length-1;f>=0;f--)c[f].curveOwner.revertDefaultValue()},a._checkTransition=function(t,i,o,s,l){var u=t.state,c=u.clip.length;this.speed*u.speed>=0?l<s?(this._checkSubTransition(t,i,o,s,u.clipEndTime*c),t.currentTransitionIndex=0,this._checkSubTransition(t,i,o,u.clipStartTime*c,l)):this._checkSubTransition(t,i,o,s,l):l>s?(this._checkBackwardsSubTransition(t,i,o,s,u.clipStartTime*c),t.currentTransitionIndex=i.length-1,this._checkBackwardsSubTransition(t,i,o,l,u.clipEndTime*c)):this._checkBackwardsSubTransition(t,i,o,s,l)},a._checkSubTransition=function(t,i,o,s,l){for(var u=t.currentTransitionIndex,c=t.state._getDuration(),f=i.length;u<f;u++){var d=i[u],h=d.exitTime*c;if(h>l)break;h>=s&&(this._crossFadeByTransition(d,o),t.currentTransitionIndex=Math.min(u+1,f-1))}},a._checkBackwardsSubTransition=function(t,i,o,s,l){for(var u=t.currentTransitionIndex,c=t.state._getDuration();u>=0;u--){var f=i[u],d=f.exitTime*c;if(d<l)break;d<=s&&(this._crossFadeByTransition(f,o),t.currentTransitionIndex=Math.max(u-1,0))}},a._crossFadeByTransition=function(t,i){var o=t.destinationState;if(!o)return!1;if(!o.clip)return Pt.warn("The state named "+name+" has no AnimationClip data."),!1;var s=this._getAnimatorLayerData(i),l=s.layerState,u=s.destPlayData,c=this._getAnimatorStateData(o.name,o,s,i),f=o._getDuration(),d=f*t.offset;switch(u.reset(o,c,d),l){case Un.Standby:case Un.Finished:s.layerState=Un.FixedCrossFading,this._clearCrossData(s),this._prepareStandbyCrossFading(s);break;case Un.Playing:s.layerState=Un.CrossFading,this._clearCrossData(s),this._prepareCrossFading(s);break;case Un.CrossFading:s.layerState=Un.FixedCrossFading,this._prepareFixedPoseCrossFading(s);break;case Un.FixedCrossFading:this._prepareFixedPoseCrossFading(s);break}return s.crossFadeTransition=t,!0},a._fireAnimationEvents=function(t,i,o,s){var l=t.state,u=l.clip.length;this.speed*l.speed>=0?s<o?(this._fireSubAnimationEvents(t,i,o,l.clipEndTime*u),t.currentEventIndex=0,this._fireSubAnimationEvents(t,i,l.clipStartTime*u,s)):this._fireSubAnimationEvents(t,i,o,s):s>o?(this._fireBackwardSubAnimationEvents(t,i,o,l.clipStartTime*u),t.currentEventIndex=i.length-1,this._fireBackwardSubAnimationEvents(t,i,l.clipEndTime*u,s)):this._fireBackwardSubAnimationEvents(t,i,o,s)},a._fireSubAnimationEvents=function(t,i,o,s){for(var l=t.currentEventIndex,u=i.length;l<u;l++){var c=i[l],f=c.event,d=f.time,h=f.parameter;if(d>s)break;var _=c.handlers;if(d>=o){for(var p=_.length-1;p>=0;p--)_[p](h);t.currentEventIndex=Math.min(l+1,u-1)}}},a._fireBackwardSubAnimationEvents=function(t,i,o,s){for(var l=t.currentEventIndex;l>=0;l--){var u=i[l],c=u.event,f=c.time,d=c.parameter;if(f<s)break;if(f<=o){for(var h=u.handlers,_=h.length-1;_>=0;_--)h[_](d);t.currentEventIndex=Math.max(l-1,0)}}},a._callAnimatorScriptOnEnter=function(t,i){for(var o=t._onStateEnterScripts,s=0,l=o.length;s<l;s++)o[s].onStateEnter(this,t,i)},a._callAnimatorScriptOnUpdate=function(t,i){for(var o=t._onStateUpdateScripts,s=0,l=o.length;s<l;s++)o[s].onStateUpdate(this,t,i)},a._callAnimatorScriptOnExit=function(t,i){for(var o=t._onStateExitScripts,s=0,l=o.length;s<l;s++)o[s].onStateExit(this,t,i)},a._checkAutoPlay=function(){for(var t=this._animatorController.layers,i=0,o=t.length;i<o;++i){var s,l=t[i].stateMachine;(s=l)!=null&&s.defaultState&&this.play(l.defaultState.name,i)}},a._checkRevertOwner=function(t,i){i&&t.updateMark!==this._updateMark&&t.revertDefaultValue(),t.updateMark=this._updateMark},Ie(r,[{key:"animatorController",get:function(){return this._animatorController},set:function(t){t!==this._animatorController&&(this._reset(),this._controllerUpdateFlag&&this._controllerUpdateFlag.destroy(),this._controllerUpdateFlag=t&&t._registerChangeFlag(),this._animatorController=t)}}]),r}(Zr);H([en],Lo.prototype,"speed",void 0);H([te],Lo.prototype,"_controllerUpdateFlag",void 0);H([te],Lo.prototype,"_updateMark",void 0);H([te],Lo.prototype,"_animatorLayersData",void 0);H([te],Lo.prototype,"_curveOwnerPool",void 0);H([te],Lo.prototype,"_animationEventHandlerPool",void 0);H([te],Lo.prototype,"_tempAnimatorStateInfo",void 0);H([te],Lo.prototype,"_controlledRenderers",void 0);var Tx=function(){function n(){this._updateFlagManager=new to,this._layers=[],this._layersMap={}}var r=n.prototype;return r.findLayerByName=function(e){return this._layersMap[e]},r.addLayer=function(e){this._layers.push(e),this._layersMap[e.name]=e,this._updateFlagManager.dispatch()},r.removeLayer=function(e){var t=this.layers[e];this._layers.splice(e,1),delete this._layersMap[t.name],this._updateFlagManager.dispatch()},r.clearLayers=function(){this._layers.length=0;for(var e in this._layersMap)delete this._layersMap[e];this._updateFlagManager.dispatch()},r._registerChangeFlag=function(){return this._updateFlagManager.createFlag(o_)},Ie(n,[{key:"layers",get:function(){return this._layers}}]),n}(),Rx=function(r){this.name=r,this.weight=1,this.blendingMode=_d.Override},u0=function(){function n(){this._destroyed=!1}var r=n.prototype;return r.onStateEnter=function(e,t,i){},r.onStateUpdate=function(e,t,i){},r.onStateExit=function(e,t,i){},r.destroy=function(){this._destroyed||(this._state._removeStateMachineScript(this),this._destroyed=!0)},n}(),NP=function(){function n(a){this.name=a,this.speed=1,this.wrapMode=gd.Loop,this._onStateEnterScripts=[],this._onStateUpdateScripts=[],this._onStateExitScripts=[],this._updateFlagManager=new to,this._clipStartTime=0,this._clipEndTime=1,this._transitions=[],this._onClipChanged=this._onClipChanged.bind(this)}var r=n.prototype;return r.addTransition=function(e){var t=this._transitions,i=t.length,o=e.exitTime,s=i?t[i-1].exitTime:0;if(o>=s)t.push(e);else{for(var l=i;--l>=0&&o<t[l].exitTime;);t.splice(l+1,0,e)}},r.removeTransition=function(e){var t=this._transitions.indexOf(e);t!==-1&&this._transitions.splice(t,1)},r.addStateMachineScript=function(e){var t=new e;t._state=this;var i=u0.prototype;return t.onStateEnter!==i.onStateEnter&&this._onStateEnterScripts.push(t),t.onStateUpdate!==i.onStateUpdate&&this._onStateUpdateScripts.push(t),t.onStateExit!==i.onStateExit&&this._onStateExitScripts.push(t),t},r.clearTransitions=function(){this._transitions.length=0},r._getDuration=function(){return this.clip?(this._clipEndTime-this._clipStartTime)*this.clip.length:null},r._removeStateMachineScript=function(e){var t=u0.prototype;if(e.onStateEnter!==t.onStateEnter){var i=this._onStateEnterScripts.indexOf(e);i!==-1&&this._onStateEnterScripts.splice(i,1)}if(e.onStateUpdate!==t.onStateUpdate){var o=this._onStateUpdateScripts.indexOf(e);o!==-1&&this._onStateUpdateScripts.splice(o,1)}if(e.onStateExit!==t.onStateExit){var s=this._onStateExitScripts.indexOf(e);s!==-1&&this._onStateExitScripts.splice(s,1)}},r._onClipChanged=function(){this._updateFlagManager.dispatch()},Ie(n,[{key:"transitions",get:function(){return this._transitions}},{key:"clip",get:function(){return this._clip},set:function(e){var t=this._clip;t!==e&&(t&&t._updateFlagManager.removeListener(this._onClipChanged),this._clip=e,this._clipEndTime=Math.min(this._clipEndTime,1),this._onClipChanged(),e&&e._updateFlagManager.addListener(this._onClipChanged))}},{key:"clipStartTime",get:function(){return this._clipStartTime},set:function(e){this._clipStartTime=Math.max(e,0)}},{key:"clipEndTime",get:function(){return this._clipEndTime},set:function(e){this._clipEndTime=Math.min(e,1)}}]),n}(),Ax=function(){function n(){this.states=[],this._statesMap={}}var r=n.prototype;return r.addState=function(e){var t=this.findStateByName(e);return t?console.warn("The state named "+e+" has existed."):(t=new NP(e),this.states.push(t),this._statesMap[e]=t),t},r.removeState=function(e){var t=e.name,i=this.states.indexOf(e);i>-1&&this.states.splice(i,1),delete this._statesMap[t]},r.findStateByName=function(e){return this._statesMap[e]},r.makeUniqueStateName=function(e){for(var t=this._statesMap,i=e,o=0;t[e];)e=i+" "+o,o++;return e},n}(),c0;(function(n){n[n.If=0]="If",n[n.IfNot=1]="IfNot",n[n.Greater=2]="Greater",n[n.Less=3]="Less",n[n.Equals=4]="Equals",n[n.NotEquals=5]="NotEquals"})(c0||(c0={}));var ua=function(){},x6=function(){},S6=function(){function n(){this._pathMasks=[],this._pathMaskMap={}}var r=n.prototype;return r.addPathMask=function(e){var t=this._pathMaskMap[e];if(t)return t;var i=new x6;return i.path=e,i.active=!0,this._pathMasks.push(i),this._pathMaskMap[e]=i,i},r.removePathMask=function(e){for(var t=this,i=t._pathMasks,o=0,s=this._pathMasks.length;o<s;++o)if(i[o].path===e){i.splice(o,1),delete this._pathMaskMap[e];break}},r.getPathMask=function(e){return this._pathMaskMap[e]},r.setPathMaskActive=function(e,t,i){i===void 0&&(i=!1);var o=this._pathMaskMap[e];if(o&&(o.active=t),i)for(var s in this._pathMaskMap)s.startsWith(e)&&(this._pathMaskMap[s].active=t)},n.createByEntity=function(e){var t=new n;return t.addPathMask(""),n._addPathMaskWithChildren(t,e,""),t},n._addPathMaskWithChildren=function(e,t,i){for(var o=t.children,s=0,l=o.length;s<l;++s){var u=o[s],c=i?i+"/"+u.name:u.name;e.addPathMask(c),n._addPathMaskWithChildren(e,u,c)}},Ie(n,[{key:"pathMasks",get:function(){return this._pathMasks}}]),n}(),Nc=function(n){be(r,n);function r(e){var t;return t=n.call(this,e,vt.find("skybox"))||this,t._textureDecodeRGBM=!1,t._tintColor=new Me(1,1,1,1),t.renderState.rasterState.cullMode=Fr.Off,t.renderState.depthState.compareFunction=Xt.LessEqual,t.shaderData.setFloat(r._rotationProp,0),t.shaderData.setFloat(r._exposureProp,1),t.shaderData.setColor(r._tintColorProp,t._tintColor),t}var a=r.prototype;return a.clone=function(){var t=new r(this._engine);return this.cloneTo(t),t},Ie(r,[{key:"textureDecodeRGBM",get:function(){return this._textureDecodeRGBM},set:function(t){this._textureDecodeRGBM=t,t?this.shaderData.enableMacro(r._decodeSkyRGBMMacro):this.shaderData.disableMacro(r._decodeSkyRGBMMacro)}},{key:"texture",get:function(){return this.shaderData.getTexture(r._textureCubeProp)},set:function(t){this.shaderData.setTexture(r._textureCubeProp,t)}},{key:"rotation",get:function(){return this.shaderData.getFloat(r._rotationProp)},set:function(t){this.shaderData.setFloat(r._rotationProp,t)}},{key:"exposure",get:function(){return this.shaderData.getFloat(r._exposureProp)},set:function(t){this.shaderData.setFloat(r._exposureProp,t)}},{key:"tintColor",get:function(){return this._tintColor},set:function(t){this._tintColor!=t&&this._tintColor.copyFrom(t)}}]),r}(Qa);(function(){Nc._tintColorProp=X.getByName("material_TintColor")})();(function(){Nc._textureCubeProp=X.getByName("material_CubeTexture")})();(function(){Nc._rotationProp=X.getByName("material_Rotation")})();(function(){Nc._exposureProp=X.getByName("material_Exposure")})();(function(){Nc._decodeSkyRGBMMacro=_t.getByName("MATERIAL_IS_DECODE_SKY_RGBM")})();var f0;(function(n){n[n.None=0]="None",n[n.Simple=1]="Simple",n[n.HighQuality=2]="HighQuality"})(f0||(f0={}));var ys=function(n){be(r,n);function r(e){var t;return t=n.call(this,e,vt.find("SkyProcedural"))||this,t.sunMode=2,t.sunSize=.04,t.sunSizeConvergence=5,t.atmosphereThickness=1,t.skyTint=new Me(.5,.5,.5,1),t.groundTint=new Me(.369,.349,.341,1),t.exposure=1.3,t.renderState.rasterState.cullMode=Fr.Off,t.renderState.depthState.compareFunction=Xt.LessEqual,t}var a=r.prototype;return a.clone=function(){var t=new r(this._engine);return this.cloneTo(t),t},Ie(r,[{key:"sunMode",get:function(){return this._sunDisk},set:function(t){var i=this.shaderData;switch(t){case 2:i.disableMacro(r._sunSimpleMacro),i.enableMacro(r._sunHighQualityMacro);break;case 1:i.disableMacro(r._sunHighQualityMacro),i.enableMacro(r._sunSimpleMacro);break;case 0:i.disableMacro(r._sunHighQualityMacro),i.disableMacro(r._sunSimpleMacro);break;default:throw"SkyBoxProceduralMaterial: unknown sun value."}this._sunDisk=t}},{key:"sunSize",get:function(){return this.shaderData.getFloat(r._sunSizeProp)},set:function(t){this.shaderData.setFloat(r._sunSizeProp,Math.min(Math.max(0,t),1))}},{key:"sunSizeConvergence",get:function(){return this.shaderData.getFloat(r._sunSizeConvergenceProp)},set:function(t){this.shaderData.setFloat(r._sunSizeConvergenceProp,Math.min(Math.max(0,t),20))}},{key:"atmosphereThickness",get:function(){return this.shaderData.getFloat(r._atmosphereThicknessProp)},set:function(t){this.shaderData.setFloat(r._atmosphereThicknessProp,Math.min(Math.max(0,t),5))}},{key:"skyTint",get:function(){return this.shaderData.getColor(r._skyTintProp)},set:function(t){this.shaderData.setColor(r._skyTintProp,t)}},{key:"groundTint",get:function(){return this.shaderData.getColor(r._groundTintProp)},set:function(t){this.shaderData.setColor(r._groundTintProp,t)}},{key:"exposure",get:function(){return this.shaderData.getFloat(r._exposureProp)},set:function(t){this.shaderData.setFloat(r._exposureProp,Math.min(Math.max(0,t),8))}}]),r}(Qa);(function(){ys._sunSizeProp=X.getByName("material_SunSize")})();(function(){ys._sunSizeConvergenceProp=X.getByName("material_SunSizeConvergence")})();(function(){ys._atmosphereThicknessProp=X.getByName("material_AtmosphereThickness")})();(function(){ys._skyTintProp=X.getByName("material_SkyTint")})();(function(){ys._groundTintProp=X.getByName("material_GroundTint")})();(function(){ys._exposureProp=X.getByName("material_Exposure")})();(function(){ys._sunHighQualityMacro=_t.getByName("MATERIAL_SUN_HIGH_QUALITY")})();(function(){ys._sunSimpleMacro=_t.getByName("MATERIAL_SUN_SIMPLE")})();var b6=function(){},gi;(function(n){n[n.Billboard=0]="Billboard",n[n.StretchBillboard=1]="StretchBillboard",n[n.HorizontalBillboard=2]="HorizontalBillboard",n[n.VerticalBillboard=3]="VerticalBillboard",n[n.Mesh=4]="Mesh",n[n.None=5]="None"})(gi||(gi={}));var vc;(function(n){n[n.StopEmittingAndClear=0]="StopEmittingAndClear",n[n.StopEmitting=1]="StopEmitting"})(vc||(vc={}));var na=function(n){be(r,n);function r(e){var t;return t=n.call(this,e)||this,t.generator=new bn(Et(t)),t.velocityScale=0,t.lengthScale=2,t.pivot=new z,t._currentRenderModeMacro=r._billboardModeMacro,t.shaderData.enableMacro(r._billboardModeMacro),t._supportInstancedArrays=t.engine._hardwareRenderer.canIUse(Ue.instancedArrays),t._dirtyUpdateFlag|=zn.WorldVolume,t}var a=r.prototype;return a._onEnable=function(){this.generator.main.playOnEnabled&&this.generator.play(!1)},a._onDisable=function(){this.generator.stop(!1,vc.StopEmittingAndClear)},a._prepareRender=function(t){if(!!this._supportInstancedArrays){var i=this.generator;i._update(this.engine.time.deltaTime),i._firstActiveElement!==i._firstFreeElement&&n.prototype._prepareRender.call(this,t)}},a._updateBounds=function(t){t.min.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),t.max.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)},a._updateShaderData=function(t,i){var o=this.shaderData;o.setFloat(r._lengthScale,this.lengthScale),o.setFloat(r._speedScale,this.velocityScale),o.setFloat(r._currentTime,this.generator._playTime),o.setVector3(r._pivotOffsetProperty,this.pivot),this.generator._updateShaderData(o)},a._render=function(t){var i=this.generator;i._primitive.instanceCount=i._getAliveParticleCount();var o=this.getMaterial();if(!!o){(o.destroyed||o.shader.destroyed)&&(o=this.engine._particleMagentaMaterial);var s=this._engine._renderDataPool.getFromPool();s.setX(this,o,i._primitive,i._subPrimitive),t.camera._renderPipeline.pushRenderData(t,s)}},a._onDestroy=function(){n.prototype._onDestroy.call(this);var t=this._mesh;t&&(t.destroyed||this._addResourceReferCount(t,-1)),this.generator._destroy()},Ie(r,[{key:"renderMode",get:function(){return this._renderMode},set:function(t){if(this._renderMode!==t){var i=this._renderMode;this._renderMode=t;var o=null,s=this.shaderData;switch(t){case gi.Billboard:o=r._billboardModeMacro;break;case gi.StretchBillboard:o=r._stretchedBillboardModeMacro;break;case gi.HorizontalBillboard:throw"Not implemented";case gi.VerticalBillboard:throw"Not implemented";case gi.Mesh:throw"Not implemented"}this._currentRenderModeMacro!==o&&(this._currentRenderModeMacro&&s.disableMacro(this._currentRenderModeMacro),o&&s.enableMacro(o),this._currentRenderModeMacro=o),i!==gi.Mesh!=(t===gi.Mesh)&&this.generator._reorganizeGeometryBuffers()}}},{key:"mesh",get:function(){return this._mesh},set:function(t){var i=this._mesh;i!==t&&(this._mesh=t,i&&this._addResourceReferCount(i,-1),t&&this._addResourceReferCount(t,1),this.renderMode===gi.Mesh&&this.generator._reorganizeGeometryBuffers())}}]),r}(Gt);(function(){na._billboardModeMacro=_t.getByName("RENDERER_MODE_SPHERE_BILLBOARD")})();(function(){na._stretchedBillboardModeMacro=_t.getByName("RENDERER_MODE_STRETCHED_BILLBOARD")})();(function(){na._horizontalBillboardModeMacro=_t.getByName("RENDERER_MODE_HORIZONTAL_BILLBOARD")})();(function(){na._verticalBillboardModeMacro=_t.getByName("RENDERER_MODE_VERTICAL_BILLBOARD")})();(function(){na._renderModeMeshMacro=_t.getByName("RENDERER_MODE_MESH")})();(function(){na._pivotOffsetProperty=X.getByName("renderer_PivotOffset")})();(function(){na._lengthScale=X.getByName("renderer_StretchedBillboardLengthScale")})();(function(){na._speedScale=X.getByName("renderer_StretchedBillboardSpeedScale")})();(function(){na._currentTime=X.getByName("renderer_CurrentTime")})();H([Xe],na.prototype,"generator",void 0);H([hx],na.prototype,"pivot",void 0);var It;(function(n){n[n.Constant=0]="Constant",n[n.TwoConstants=1]="TwoConstants",n[n.Curve=2]="Curve",n[n.TwoCurves=3]="TwoCurves"})(It||(It={}));var wa;(function(n){n[n.Constant=0]="Constant",n[n.TwoConstants=1]="TwoConstants",n[n.Gradient=2]="Gradient",n[n.TwoGradients=3]="TwoGradients"})(wa||(wa={}));var os;(function(n){n[n.Local=0]="Local",n[n.World=1]="World"})(os||(os={}));var Ln;(function(n){n[n.Burst=592910910]="Burst",n[n.StartDelay=322376503]="StartDelay",n[n.StartColor=306581307]="StartColor",n[n.StartSize=1793934638]="StartSize",n[n.StartRotation=3737431713]="StartRotation",n[n.randomizeRotationDirection=2527743459]="randomizeRotationDirection",n[n.StartLifetime=2368504881]="StartLifetime",n[n.StartSpeed=4085612399]="StartSpeed",n[n.VelocityOverLifetime=3774601268]="VelocityOverLifetime",n[n.ColorOverLifetime=326370691]="ColorOverLifetime",n[n.SizeOverLifetime=1494990940]="SizeOverLifetime",n[n.RotationOverLifetime=1089181156]="RotationOverLifetime",n[n.TextureSheetAnimation=197469413]="TextureSheetAnimation",n[n.Shape=2941263940]="Shape",n[n.GravityModifier=2759560269]="GravityModifier"})(Ln||(Ln={}));var tl=function(){function n(a,e){if(a===void 0&&(a=null),e===void 0&&(e=null),this._colorKeys=[],this._alphaKeys=[],this._colorTypeArrayDirty=!1,this._alphaTypeArrayDirty=!1,a)for(var t=0,i=a.length;t<i;t++){var o=a[t];this.addColorKey(o)}if(e)for(var s=0,l=e.length;s<l;s++){var u=e[s];this.addAlphaKey(u)}}var r=n.prototype;return r.addColorKey=function(e,t){var i=this._colorKeys;if(i.length===4)throw new Error("Gradient can only have 4 color keys");var o=typeof e=="number"?new op(e,t):e;o._onValueChanged=this._setColorTypeArrayDirty.bind(this),this._addKey(i,o),this._colorTypeArrayDirty=!0},r.addAlphaKey=function(e,t){var i=this._alphaKeys;if(i.length===4)throw new Error("Gradient can only have 4 alpha keys");var o=typeof e=="number"?new sp(e,t):e;o._onValueChanged=this._setAlphaTypeArrayDirty.bind(this),this._addKey(i,o),this._alphaTypeArrayDirty=!0},r.removeColorKey=function(e){this._colorKeys[e]._onValueChanged=null,this._removeKey(this._colorKeys,e),this._colorTypeArrayDirty=!0},r.removeAlphaKey=function(e){this._alphaKeys[e]._onValueChanged=null,this._removeKey(this._alphaKeys,e),this._alphaTypeArrayDirty=!0},r.setKeys=function(e,t){for(var i=this._colorKeys,o=this._alphaKeys,s=0,l=i.length;s<l;s++)i[s]._onValueChanged=null;for(var u=0,c=o.length;u<c;u++)o[u]._onValueChanged=null;i.length=0,o.length=0;for(var f=0,d=e.length;f<d;f++)this._addKey(i,e[f]);for(var h=0,_=t.length;h<_;h++)this._addKey(o,t[h]);this._alphaTypeArrayDirty=!0,this._colorTypeArrayDirty=!0},r._getColorTypeArray=function(e){var t=this._colorTypeArray||(this._colorTypeArray=new Float32Array(16));if(this._colorTypeArrayDirty){for(var i=this._colorKeys,o=0,s=Math.min(i.length,4);o<s;o++){var l=o*4,u=i[o];t[l]=u.time;var c=u.color;e===Ja.Linear?(t[l+1]=Me.gammaToLinearSpace(c.r),t[l+2]=Me.gammaToLinearSpace(c.g),t[l+3]=Me.gammaToLinearSpace(c.b)):(t[l+1]=c.r,t[l+2]=c.g,t[l+3]=c.b)}this._colorTypeArrayDirty=!1}return t},r._getAlphaTypeArray=function(){var e=this._alphaTypeArray||(this._alphaTypeArray=new Float32Array(8));if(this._alphaTypeArrayDirty){for(var t=this._alphaKeys,i=0,o=Math.min(t.length,4);i<o;i++){var s=i*2,l=t[i];e[s]=l.time,e[s+1]=l.alpha}this._alphaTypeArrayDirty=!1}return e},r._addKey=function(e,t){var i=t.time,o=e.length,s=o?e[o-1].time:0;if(i>=s)e.push(t);else{for(var l=o;--l>=0&&i<e[l].time;);e.splice(l+1,0,t)}},r._removeKey=function(e,t){e.splice(t,1)},r._setColorTypeArrayDirty=function(){this._colorTypeArrayDirty=!0},r._setAlphaTypeArrayDirty=function(){this._alphaTypeArrayDirty=!0},Ie(n,[{key:"colorKeys",get:function(){return this._colorKeys}},{key:"alphaKeys",get:function(){return this._alphaKeys}}]),n}();H([Xe],tl.prototype,"_colorKeys",void 0);H([Xe],tl.prototype,"_alphaKeys",void 0);H([te],tl.prototype,"_colorTypeArray",void 0);H([te],tl.prototype,"_alphaTypeArray",void 0);var op=function(){function n(r,a){this._onValueChanged=null,this._color=new Me,this._time=r,a&&this._color.copyFrom(a),this._color._onValueChanged=this._onValueChanged}return Ie(n,[{key:"time",get:function(){return this._time},set:function(a){this._time=a,this._onValueChanged&&this._onValueChanged()}},{key:"color",get:function(){return this._color},set:function(a){this._color!==a&&this._color.copyFrom(a)}}]),n}(),sp=function(){function n(r,a){this._onValueChanged=null,this._time=r,this._alpha=a}return Ie(n,[{key:"time",get:function(){return this._time},set:function(a){this._time=a,this._onValueChanged&&this._onValueChanged()}},{key:"alpha",get:function(){return this._alpha},set:function(a){this._alpha=a,this._onValueChanged&&this._onValueChanged()}}]),n}(),Zl=function(){function n(a,e){this.mode=wa.Constant,this.constantMin=new Me,this.constantMax=new Me,this.gradientMin=new tl,this.gradientMax=new tl,a.constructor===Me?e?(this.constantMin.copyFrom(a),this.constantMax.copyFrom(e),this.mode=wa.TwoConstants):(this.constant.copyFrom(a),this.mode=wa.Constant):e?(this.gradientMin=a,this.gradientMax=e,this.mode=wa.TwoGradients):(this.gradient=a,this.mode=wa.Gradient)}var r=n.prototype;return r.evaluate=function(e,t,i){switch(this.mode){case wa.Constant:i.copyFrom(this.constant);break;case wa.TwoConstants:Me.lerp(this.constantMin,this.constantMax,t,i);break}},Ie(n,[{key:"constant",get:function(){return this.constantMax},set:function(e){this.constantMax=e}},{key:"gradient",get:function(){return this.gradientMax},set:function(e){this.gradientMax=e}}]),n}();H([Xe],Zl.prototype,"constantMin",void 0);H([Xe],Zl.prototype,"constantMax",void 0);H([Xe],Zl.prototype,"gradientMin",void 0);H([Xe],Zl.prototype,"gradientMax",void 0);var eu=function(){function n(a){this.enabled=!1,this._generator=a}var r=n.prototype;return r._enableMacro=function(e,t,i){return t!==i&&(t&&e.disableMacro(t),i&&e.enableMacro(i)),i},n}();H([te],eu.prototype,"_generator",void 0);var ii=function(n){be(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e.color=new Zl(new tl([new op(0,new Me(1,1,1)),new op(1,new Me(1,1,1))],[new sp(0,1),new sp(1,1)])),e._colorGradientRand=new mi(0,Ln.ColorOverLifetime),e._gradientKeysCount=new pt(0,0,0,0),e}var a=r.prototype;return a._updateShaderData=function(t){var i=null;if(this.enabled){var o=this.color.mode;if(o!==wa.Gradient&&o!==wa.TwoGradients)throw new Error("Invalid color mode, only gradient and two gradients are supported in color over lifetime.");var s=this.color,l=this._generator._renderer.engine.settings.colorSpace;t.setFloatArray(r._maxGradientColor,s.gradientMax._getColorTypeArray(l)),t.setFloatArray(r._maxGradientAlpha,s.gradientMax._getAlphaTypeArray()),o===wa.Gradient?i=r._gradientMacro:(t.setFloatArray(r._minGradientColor,s.gradientMin._getColorTypeArray(l)),t.setFloatArray(r._minGradientAlpha,s.gradientMin._getAlphaTypeArray()),i=r._randomGradientsMacro);var u=s.gradientMin.colorKeys,c=s.gradientMin.alphaKeys,f=s.gradientMax.colorKeys,d=s.gradientMax.alphaKeys;this._gradientKeysCount.set(u.length?u[u.length-1].time:0,c.length?c[c.length-1].time:0,f.length?f[f.length-1].time:0,d.length?d[d.length-1].time:0),t.setVector4(r._gradientKeysCount,this._gradientKeysCount)}this._colorMacro=this._enableMacro(t,this._colorMacro,i)},a._resetRandomSeed=function(t){this._colorGradientRand.reset(t,Ln.ColorOverLifetime)},r}(eu);(function(){ii._gradientMacro=_t.getByName("RENDERER_COL_GRADIENT")})();(function(){ii._randomGradientsMacro=_t.getByName("RENDERER_COL_RANDOM_GRADIENTS")})();(function(){ii._minGradientColor=X.getByName("renderer_COLMinGradientColor")})();(function(){ii._minGradientAlpha=X.getByName("renderer_COLMinGradientAlpha")})();(function(){ii._maxGradientColor=X.getByName("renderer_COLMaxGradientColor")})();(function(){ii._maxGradientAlpha=X.getByName("renderer_COLMaxGradientAlpha")})();(function(){ii._gradientKeysCount=X.getByName("renderer_COLGradientKeysMaxTime")})();H([Xe],ii.prototype,"color",void 0);H([te],ii.prototype,"_colorGradientRand",void 0);H([te],ii.prototype,"_gradientKeysCount",void 0);H([te],ii.prototype,"_colorMacro",void 0);var Pn=function(){function n(a,e){this.mode=It.Constant,this.constantMin=0,this.constantMax=0,typeof a=="number"?e?(this.constantMin=a,this.constantMax=e,this.mode=It.TwoConstants):(this.constant=a,this.mode=It.Constant):e?(this.curveMin=a,this.curveMax=e,this.mode=It.TwoCurves):(this.curve=a,this.mode=It.Curve)}var r=n.prototype;return r.evaluate=function(e,t){switch(this.mode){case It.Constant:return this.constant;case It.TwoConstants:return this.constantMin+(this.constantMax-this.constantMin)*t}},Ie(n,[{key:"constant",get:function(){return this.constantMax},set:function(e){this.constantMax=e}},{key:"curve",get:function(){return this.curveMax},set:function(e){this.curveMax=e}}]),n}();H([Xe],Pn.prototype,"curveMin",void 0);H([Xe],Pn.prototype,"curveMax",void 0);var ll=function(n){be(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e.rateOverTime=new Pn(10),e.rateOverDistance=new Pn(0),e._shapeRand=new mi(0,Ln.Shape),e._frameRateTime=0,e._bursts=[],e._currentBurstIndex=0,e._burstRand=new mi(0,Ln.Burst),e}var a=r.prototype;return a.addBurst=function(t){for(var i=this._bursts,o=i.length;--o>=0&&t.time<i[o].time;);i.splice(o+1,0,t)},a.removeBurst=function(t){var i=this._bursts.indexOf(t);i!==-1&&this._bursts.splice(i,1)},a.removeBurstByIndex=function(t){this._bursts.splice(t,1)},a.clearBurst=function(){this._bursts.length=0},a._emit=function(t,i){this._emitByRateOverTime(i),this._emitByBurst(t,i)},a._resetRandomSeed=function(t){this._burstRand.reset(t,Ln.Burst),this._shapeRand.reset(t,Ln.Shape)},a._reset=function(){this._frameRateTime=0,this._currentBurstIndex=0},a._emitByRateOverTime=function(t){var i=this.rateOverTime.evaluate(void 0,void 0);if(i>0)for(var o=this._generator,s=1/i,l=t-this._frameRateTime;l>=s;)l-=s,this._frameRateTime+=s,o._emit(this._frameRateTime,1)},a._emitByBurst=function(t,i){var o=this._generator.main,s=o.duration,l=Math.floor((i-t)/s);if(o.isLoop&&(l>0||i%s<t%s)){var u=Math.ceil(t/s)*s;this._emitBySubBurst(t,u,s),this._currentBurstIndex=0;for(var c=0;c<l;c++){var f=u;u+=s,this._emitBySubBurst(f,u,s),this._currentBurstIndex=0}this._emitBySubBurst(u,i,s)}else this._emitBySubBurst(t,i,s)},a._emitBySubBurst=function(t,i,o){for(var s=this._generator,l=this._burstRand,u=this.bursts,c=Math.floor(t/o)*o,f=t%o,d=f+(i-t),h=this._currentBurstIndex,_=u.length;h<_;h++){var p=u[h],v=p.time;if(v>d)break;if(v>=f){var y=p.count.evaluate(void 0,l.random());s._emit(c+v,y)}}this._currentBurstIndex=h},Ie(r,[{key:"bursts",get:function(){return this._bursts}}]),r}(eu);H([Xe],ll.prototype,"rateOverTime",void 0);H([Xe],ll.prototype,"rateOverDistance",void 0);H([Xe],ll.prototype,"shape",void 0);H([te],ll.prototype,"_shapeRand",void 0);H([Xe],ll.prototype,"_bursts",void 0);H([te],ll.prototype,"_burstRand",void 0);var fo;(function(n){n[n.Hierarchy=0]="Hierarchy",n[n.Local=1]="Local",n[n.World=2]="World"})(fo||(fo={}));var un=function(){function n(a){this.duration=5,this.isLoop=!0,this.startDelay=new Pn(0),this.startLifetime=new Pn(5),this.startSpeed=new Pn(5),this.startSize3D=!1,this.startSizeX=new Pn(1),this.startSizeY=new Pn(1),this.startSizeZ=new Pn(1),this.startRotation3D=!1,this.startRotationX=new Pn(0),this.startRotationY=new Pn(0),this.startRotationZ=new Pn(0),this.flipRotation=0,this.startColor=new Zl(new Me(1,1,1,1)),this.gravityModifier=new Pn(0),this.simulationSpace=os.Local,this.simulationSpeed=1,this.scalingMode=fo.Local,this.playOnEnabled=!0,this._maxParticleBuffer=1e3,this._startSpeedRand=new mi(0,Ln.StartSpeed),this._startLifeTimeRand=new mi(0,Ln.StartLifetime),this._startColorRand=new mi(0,Ln.StartColor),this._startSizeRand=new mi(0,Ln.StartSize),this._startRotationRand=new mi(0,Ln.StartRotation),this._gravityModifierRand=new mi(0,Ln.GravityModifier),this._gravity=new z,this._generator=a}var r=n.prototype;return r._resetRandomSeed=function(e){this._startSpeedRand.reset(e,Ln.StartSpeed),this._startLifeTimeRand.reset(e,Ln.StartLifetime),this._startColorRand.reset(e,Ln.StartColor),this._startSizeRand.reset(e,Ln.StartSize),this._startRotationRand.reset(e,Ln.StartRotation)},r._getPositionScale=function(){var e=this._generator._renderer.entity.transform;switch(this.scalingMode){case fo.Hierarchy:case fo.World:return e.lossyWorldScale;case fo.Local:return e.scale}},r._updateShaderData=function(e){var t=this._generator._renderer,i=t.entity.transform;switch(this.simulationSpace){case os.Local:e.setVector3(n._worldPosition,i.worldPosition);var o=i.worldRotationQuaternion,s=n._tempVector40;s.copyFrom(o),e.setVector4(n._worldRotation,s);break;case os.World:break;default:throw new Error("ParticleRenderer: SimulationSpace value is invalid.")}switch(this.scalingMode){case fo.Hierarchy:var l=i.lossyWorldScale;e.setVector3(n._positionScale,l),e.setVector3(n._sizeScale,l);break;case fo.Local:var l=i.scale;e.setVector3(n._positionScale,l),e.setVector3(n._sizeScale,l);break;case fo.World:e.setVector3(n._positionScale,i.lossyWorldScale),e.setVector3(n._sizeScale,n._vector3One);break}var u=this._gravity,c=this.gravityModifier.evaluate(void 0,this._gravityModifierRand.random());z.scale(t.scene.physics.gravity,c,u),e.setVector3(n._gravity,u),e.setInt(n._simulationSpace,this.simulationSpace),e.setFloat(n._startRotation3D,+this.startRotation3D),e.setInt(n._scaleMode,this.scalingMode)},r._cloneTo=function(e){e.maxParticles=this.maxParticles},Ie(n,[{key:"maxParticles",get:function(){return this._maxParticleBuffer-1},set:function(e){this._maxParticleBuffer=e+1}},{key:"startSize",get:function(){return this.startSizeX},set:function(e){this.startSizeX=e}}]),n}();(function(){un._tempVector40=new pt})();(function(){un._vector3One=new z(1,1,1)})();(function(){un._positionScale=X.getByName("renderer_PositionScale")})();(function(){un._sizeScale=X.getByName("renderer_SizeScale")})();(function(){un._worldPosition=X.getByName("renderer_WorldPosition")})();(function(){un._worldRotation=X.getByName("renderer_WorldRotation")})();(function(){un._gravity=X.getByName("renderer_Gravity")})();(function(){un._simulationSpace=X.getByName("renderer_SimulationSpace")})();(function(){un._startRotation3D=X.getByName("renderer_ThreeDStartRotation")})();(function(){un._scaleMode=X.getByName("renderer_ScalingMode")})();H([Xe],un.prototype,"startDelay",void 0);H([Xe],un.prototype,"startLifetime",void 0);H([Xe],un.prototype,"startSpeed",void 0);H([Xe],un.prototype,"startSizeX",void 0);H([Xe],un.prototype,"startSizeY",void 0);H([Xe],un.prototype,"startSizeZ",void 0);H([Xe],un.prototype,"startRotationX",void 0);H([Xe],un.prototype,"startRotationY",void 0);H([Xe],un.prototype,"startRotationZ",void 0);H([Xe],un.prototype,"startColor",void 0);H([Xe],un.prototype,"gravityModifier",void 0);H([te],un.prototype,"_maxParticleBuffer",void 0);H([te],un.prototype,"_startSpeedRand",void 0);H([te],un.prototype,"_startLifeTimeRand",void 0);H([te],un.prototype,"_startColorRand",void 0);H([te],un.prototype,"_startSizeRand",void 0);H([te],un.prototype,"_startRotationRand",void 0);H([te],un.prototype,"_gravityModifierRand",void 0);H([te],un.prototype,"_generator",void 0);H([te],un.prototype,"_gravity",void 0);var jn=function(n){be(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e.separateAxes=!1,e.rotationX=new Pn(0),e.rotationY=new Pn(0),e.rotationZ=new Pn(45),e._rotationRand=new mi(0,Ln.RotationOverLifetime),e._rotationMinConstant=new z,e._rotationMaxConstant=new z,e}var a=r.prototype;return a._updateShaderData=function(t){var i=null,o=null,s=null;if(this.enabled){var l=this.rotationX,u=this.rotationY,c=this.rotationZ,f=this.separateAxes,d=f?l.mode===It.TwoCurves&&u.mode===It.TwoCurves&&c.mode===It.TwoCurves:c.mode===It.TwoCurves,h=d||f?l.mode===It.Curve&&u.mode===It.Curve&&c.mode===It.Curve:c.mode===It.Curve;if(h)t.setFloatArray(r._maxCurveZProperty,c.curveMax._getTypeArray()),f&&(t.setFloatArray(r._maxCurveXProperty,l.curveMax._getTypeArray()),t.setFloatArray(r._maxCurveYProperty,u.curveMax._getTypeArray())),d&&(t.setFloatArray(r._minCurveZProperty,c.curveMin._getTypeArray()),f&&(t.setFloatArray(r._minCurveXProperty,l.curveMin._getTypeArray()),t.setFloatArray(r._minCurveYProperty,u.curveMin._getTypeArray())),s=r._isRandomTwoMacro),o=r._curveModeMacro;else{var _=this._rotationMaxConstant;if(_.set(ve.degreeToRadian(l.constantMax),ve.degreeToRadian(u.constantMax),ve.degreeToRadian(c.constantMax)),t.setVector3(r._maxConstantProperty,_),f?l.mode===It.TwoConstants&&u.mode===It.TwoConstants&&c.mode===It.TwoConstants:c.mode===It.TwoConstants){var p=this._rotationMinConstant;p.set(ve.degreeToRadian(l.constantMin),ve.degreeToRadian(u.constantMin),ve.degreeToRadian(c.constantMin)),t.setVector3(r._minConstantProperty,p),s=r._isRandomTwoMacro}o=r._constantModeMacro}f&&(i=r._isSeparateMacro)}this._enableSeparateMacro=this._enableMacro(t,this._enableSeparateMacro,i),this._isCurveMacro=this._enableMacro(t,this._isCurveMacro,o),this._isRandomTwoMacro=this._enableMacro(t,this._isRandomTwoMacro,s)},a._resetRandomSeed=function(t){this._rotationRand.reset(t,Ln.RotationOverLifetime)},r}(eu);(function(){jn._constantModeMacro=_t.getByName("RENDERER_ROL_CONSTANT_MODE")})();(function(){jn._curveModeMacro=_t.getByName("RENDERER_ROL_CURVE_MODE")})();(function(){jn._isSeparateMacro=_t.getByName("RENDERER_ROL_IS_SEPARATE")})();(function(){jn._isRandomTwoMacro=_t.getByName("RENDERER_ROL_IS_RANDOM_TWO")})();(function(){jn._minConstantProperty=X.getByName("renderer_ROLMinConst")})();(function(){jn._minCurveXProperty=X.getByName("renderer_ROLMinCurveX")})();(function(){jn._minCurveYProperty=X.getByName("renderer_ROLMinCurveY")})();(function(){jn._minCurveZProperty=X.getByName("renderer_ROLMinCurveZ")})();(function(){jn._maxConstantProperty=X.getByName("renderer_ROLMaxConst")})();(function(){jn._maxCurveXProperty=X.getByName("renderer_ROLMaxCurveX")})();(function(){jn._maxCurveYProperty=X.getByName("renderer_ROLMaxCurveY")})();(function(){jn._maxCurveZProperty=X.getByName("renderer_ROLMaxCurveZ")})();H([Xe],jn.prototype,"rotationX",void 0);H([Xe],jn.prototype,"rotationY",void 0);H([Xe],jn.prototype,"rotationZ",void 0);H([te],jn.prototype,"_rotationRand",void 0);H([te],jn.prototype,"_rotationMinConstant",void 0);H([te],jn.prototype,"_rotationMaxConstant",void 0);H([te],jn.prototype,"_enableSeparateMacro",void 0);H([te],jn.prototype,"_isCurveMacro",void 0);H([te],jn.prototype,"_isRandomTwoMacro",void 0);var Bl=function(){function n(){for(var a=arguments.length,e=new Array(a),t=0;t<a;t++)e[t]=arguments[t];this._keys=[],this._typeArrayDirty=!1;for(var i=0,o=e.length;i<o;i++){var s=e[i];this.addKey(s)}}var r=n.prototype;return r.addKey=function(e,t){var i=this._keys;if(i.length===4)throw new Error("Curve can only have 4 keys");var o=typeof e=="number"?new vo(e,t):e;this._addKey(i,o),this._typeArrayDirty=!0},r.removeKey=function(e){this._keys.splice(e,1),this._typeArrayDirty=!0},r.setKeys=function(e){this._keys.length=0;for(var t=0,i=e.length;t<i;t++)this.addKey(e[t]);this._typeArrayDirty=!0},r._getTypeArray=function(){var e=this._typeArray||(this._typeArray=new Float32Array(8));if(this._typeArrayDirty){for(var t=this._keys,i=0,o=Math.min(t.length,4);i<o;i++){var s=i*2,l=t[i];e[s]=l.time,e[s+1]=l.value}this._typeArrayDirty=!1}return e},r._addKey=function(e,t){var i=e.length,o=t.time,s=i?e[i-1].time:0;if(o>=s)e.push(t);else{for(var l=i;--l>=0&&o<e[l].time;);e.splice(l+1,0,t)}},Ie(n,[{key:"keys",get:function(){return this._keys}}]),n}();H([Xe],Bl.prototype,"_keys",void 0);H([te],Bl.prototype,"_typeArray",void 0);var vo=function(r,a){this.time=r,this.value=a},Gr=function(n){be(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e.separateAxes=!1,e.sizeX=new Pn(new Bl(new vo(0,0),new vo(1,1))),e.sizeY=new Pn(new Bl(new vo(0,0),new vo(1,1))),e.sizeZ=new Pn(new Bl(new vo(0,0),new vo(1,1))),e}var a=r.prototype;return a._updateShaderData=function(t){var i=null,o=null,s=null;if(this.enabled){var l=this.sizeX,u=this.sizeY,c=this.sizeZ,f=this.separateAxes,d=f?l.mode===It.TwoCurves&&u.mode===It.TwoCurves&&c.mode===It.TwoCurves:l.mode===It.TwoCurves,h=d||f?l.mode===It.Curve&&u.mode===It.Curve&&c.mode===It.Curve:l.mode===It.Curve;h&&(t.setFloatArray(r._maxCurveXProperty,l.curveMax._getTypeArray()),f&&(t.setFloatArray(r._maxCurveYProperty,u.curveMax._getTypeArray()),t.setFloatArray(r._maxCurveZProperty,c.curveMax._getTypeArray())),d&&(t.setFloatArray(r._minCurveXProperty,l.curveMin._getTypeArray()),f&&(t.setFloatArray(r._minCurveYProperty,u.curveMin._getTypeArray()),t.setFloatArray(r._minCurveZProperty,c.curveMin._getTypeArray())),s=r._isRandomTwoMacro),o=r._curveModeMacro),f&&(i=r._isSeparateMacro)}this._enableSeparateMacro=this._enableMacro(t,this._enableSeparateMacro,i),this._isCurveMacro=this._enableMacro(t,this._isCurveMacro,o),this._isRandomTwoMacro=this._enableMacro(t,this._isRandomTwoMacro,s)},Ie(r,[{key:"size",get:function(){return this.sizeX},set:function(t){this.sizeX=t}}]),r}(eu);(function(){Gr._curveModeMacro=_t.getByName("RENDERER_SOL_CURVE_MODE")})();(function(){Gr._isSeparateMacro=_t.getByName("RENDERER_SOL_IS_SEPARATE")})();(function(){Gr._isRandomTwoMacro=_t.getByName("RENDERER_SOL_IS_RANDOM_TWO")})();(function(){Gr._minCurveXProperty=X.getByName("renderer_SOLMinCurveX")})();(function(){Gr._minCurveYProperty=X.getByName("renderer_SOLMinCurveY")})();(function(){Gr._minCurveZProperty=X.getByName("renderer_SOLMinCurveZ")})();(function(){Gr._maxCurveXProperty=X.getByName("renderer_SOLMaxCurveX")})();(function(){Gr._maxCurveYProperty=X.getByName("renderer_SOLMaxCurveY")})();(function(){Gr._maxCurveZProperty=X.getByName("renderer_SOLMaxCurveZ")})();H([Xe],Gr.prototype,"sizeX",void 0);H([Xe],Gr.prototype,"sizeY",void 0);H([Xe],Gr.prototype,"sizeZ",void 0);H([te],Gr.prototype,"_enableSeparateMacro",void 0);H([te],Gr.prototype,"_isCurveMacro",void 0);H([te],Gr.prototype,"_isRandomTwoMacro",void 0);var Va=function(n){be(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e.startFrame=new Pn(0),e.frameOverTime=new Pn(new Bl(new vo(0,0),new vo(1,1))),e.type=0,e.cycleCount=1,e._tillingInfo=new z(1,1,1),e._frameOverTimeRand=new mi(0,Ln.TextureSheetAnimation),e._tiling=new Ze(1,1),e}var a=r.prototype;return a._updateShaderData=function(t){var i=null;if(this.enabled){var o=this.frameOverTime.mode;if(o===It.Curve||o===It.TwoCurves){var s=this.frameOverTime;t.setFloatArray(r._frameMaxCurveProperty,s.curveMax._getTypeArray()),o===It.Curve?i=r._frameCurveMacro:(t.setFloatArray(r._frameMinCurveProperty,s.curveMin._getTypeArray()),i=r._frameRandomCurvesMacro),t.setFloat(r._cycleCountProperty,this.cycleCount),t.setVector3(r._tillingParamsProperty,this._tillingInfo)}}this._textureSheetMacro=this._enableMacro(t,this._textureSheetMacro,i)},a._resetRandomSeed=function(t){this._frameOverTimeRand.reset(t,Ln.TextureSheetAnimation)},Ie(r,[{key:"tiling",get:function(){return this._tiling},set:function(t){this._tiling=t,this._tillingInfo.set(1/t.x,1/t.y,t.x*t.y)}}]),r}(eu);(function(){Va._frameCurveMacro=_t.getByName("RENDERER_TSA_FRAME_CURVE")})();(function(){Va._frameRandomCurvesMacro=_t.getByName("RENDERER_TSA_FRAME_RANDOM_CURVES")})();(function(){Va._cycleCountProperty=X.getByName("renderer_TSACycles")})();(function(){Va._tillingParamsProperty=X.getByName("renderer_TSATillingParams")})();(function(){Va._frameMinCurveProperty=X.getByName("renderer_TSAFrameMinCurve")})();(function(){Va._frameMaxCurveProperty=X.getByName("renderer_TSAFrameMaxCurve")})();H([Xe],Va.prototype,"startFrame",void 0);H([Xe],Va.prototype,"frameOverTime",void 0);H([hx],Va.prototype,"_tillingInfo",void 0);H([te],Va.prototype,"_frameOverTimeRand",void 0);H([Xe],Va.prototype,"_tiling",void 0);H([te],Va.prototype,"_textureSheetMacro",void 0);var sC;(function(n){n[n.WholeSheet=0]="WholeSheet",n[n.SingleRow=1]="SingleRow"})(sC||(sC={}));var er=function(n){be(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e.velocityX=new Pn(0),e.velocityY=new Pn(0),e.velocityZ=new Pn(0),e.space=os.Local,e._velocityRand=new mi(0,Ln.VelocityOverLifetime),e._velocityMinConstant=new z,e._velocityMaxConstant=new z,e}var a=r.prototype;return a._updateShaderData=function(t){var i=null;if(this.enabled){var o=this.velocityX,s=this.velocityY,l=this.velocityZ,u=o.mode===It.TwoCurves&&s.mode===It.TwoCurves&&l.mode===It.TwoCurves;if(u||o.mode===It.Curve&&s.mode===It.Curve&&l.mode===It.Curve)t.setFloatArray(r._maxGradientXProperty,o.curveMax._getTypeArray()),t.setFloatArray(r._maxGradientYProperty,s.curveMax._getTypeArray()),t.setFloatArray(r._maxGradientZProperty,l.curveMax._getTypeArray()),u?(t.setFloatArray(r._minGradientXProperty,o.curveMin._getTypeArray()),t.setFloatArray(r._minGradientYProperty,s.curveMin._getTypeArray()),t.setFloatArray(r._minGradientZProperty,l.curveMin._getTypeArray()),i=r._randomCurveMacro):i=r._curveMacro;else{var c=this._velocityMaxConstant;if(c.set(o.constantMax,s.constantMax,l.constantMax),t.setVector3(r._maxConstantProperty,c),o.mode===It.TwoConstants&&s.mode===It.TwoConstants&&l.mode===It.TwoConstants){var f=this._velocityMinConstant;f.set(o.constantMin,s.constantMin,l.constantMin),t.setVector3(r._minConstantProperty,f),i=r._randomConstantMacro}else i=r._constantMacro}t.setInt(r._spaceProperty,this.space)}this._velocityMacro=this._enableMacro(t,this._velocityMacro,i)},a._resetRandomSeed=function(t){this._velocityRand.reset(t,Ln.VelocityOverLifetime)},r}(eu);(function(){er._constantMacro=_t.getByName("RENDERER_VOL_CONSTANT")})();(function(){er._curveMacro=_t.getByName("RENDERER_VOL_CURVE")})();(function(){er._randomConstantMacro=_t.getByName("RENDERER_VOL_RANDOM_CONSTANT")})();(function(){er._randomCurveMacro=_t.getByName("RENDERER_VOL_RANDOM_CURVE")})();(function(){er._minConstantProperty=X.getByName("renderer_VOLMinConst")})();(function(){er._maxConstantProperty=X.getByName("renderer_VOLMaxConst")})();(function(){er._minGradientXProperty=X.getByName("renderer_VOLMinGradientX")})();(function(){er._minGradientYProperty=X.getByName("renderer_VOLMinGradientY")})();(function(){er._minGradientZProperty=X.getByName("renderer_VOLMinGradientZ")})();(function(){er._maxGradientXProperty=X.getByName("renderer_VOLMaxGradientX")})();(function(){er._maxGradientYProperty=X.getByName("renderer_VOLMaxGradientY")})();(function(){er._maxGradientZProperty=X.getByName("renderer_VOLMaxGradientZ")})();(function(){er._spaceProperty=X.getByName("renderer_VOLSpace")})();H([Xe],er.prototype,"velocityX",void 0);H([Xe],er.prototype,"velocityY",void 0);H([Xe],er.prototype,"velocityZ",void 0);H([te],er.prototype,"_velocityRand",void 0);H([te],er.prototype,"_velocityMinConstant",void 0);H([te],er.prototype,"_velocityMaxConstant",void 0);H([te],er.prototype,"_velocityMacro",void 0);var bn=function(){function n(a){this.useAutoRandomSeed=!0,this.main=new un(this),this.emission=new ll(this),this.velocityOverLifetime=new er(this),this.sizeOverLifetime=new Gr(this),this.rotationOverLifetime=new jn(this),this.colorOverLifetime=new ii(this),this.textureSheetAnimation=new Va(this),this._currentParticleCount=0,this._playTime=0,this._firstNewElement=0,this._firstActiveElement=0,this._firstFreeElement=0,this._firstRetiredElement=0,this._vertexBufferBindings=new Array,this._subPrimitive=new u_(0,0,ro.Triangles),this._isPlaying=!1,this._instanceBufferResized=!1,this._waitProcessRetiredElementCount=0,this._randomSeed=0,this._renderer=a;var e=new b6;e.start=0,this._primitive=new px(a.engine),this._reorganizeGeometryBuffers(),this._resizeInstanceBuffer(!0,n._particleIncreaseCount),this.emission.enabled=!0}var r=n.prototype;return r.play=function(e){if(e===void 0&&(e=!0),e)for(var t=this._renderer.entity.getComponentsIncludeChildren(na,n._tempParticleRenderers),i=0,o=t.length;i<o;i++){var s=t[i];s.generator.play(!1)}else this._isPlaying=!0,this.useAutoRandomSeed&&this._resetGlobalRandSeed(Math.floor(Math.random()*4294967295))},r.stop=function(e,t){if(e===void 0&&(e=!0),t===void 0&&(t=vc.StopEmitting),e)for(var i=this._renderer.entity.getComponentsIncludeChildren(na,n._tempParticleRenderers),o=0,s=i.length;o<s;o++){var l=i[o];l.generator.stop(!1,t)}else if(this._isPlaying=!1,t===vc.StopEmittingAndClear){var u=this._firstFreeElement;this._firstRetiredElement=u,this._firstActiveElement=u,this._firstNewElement=u,this._playTime=0,this.emission._reset()}},r.emit=function(e){this._emit(this._playTime,e)},r._emit=function(e,t){if(this.emission.enabled){if(this.main._maxParticleBuffer<this._currentParticleCount)return;for(var i=n._tempVector30,o=n._tempVector31,s=this._renderer.entity.transform,l=this.emission.shape,u=0;u<t;u++){var c;if((c=l)!=null&&c.enabled){l._generatePositionAndDirection(this.emission._shapeRand,e,i,o);var f=this.main._getPositionScale();i.multiply(f),o.normalize().multiply(f)}else i.set(0,0,0),o.set(0,0,-1);this._addNewParticle(i,o,s,e)}}},r._update=function(e){var t=this,i=t.main,o=t.emission,s=i.duration,l=this._playTime;if(this._playTime+=e*i.simulationSpeed,this._retireActiveParticles(),this._freeRetiredParticles(),o.enabled&&this._isPlaying){if(this._currentParticleCount>i._maxParticleBuffer){var u=this._getNotRetiredParticleCount();u<i._maxParticleBuffer&&this._resizeInstanceBuffer(!1)}o._emit(l,this._playTime),!i.isLoop&&this._playTime>s&&(this._isPlaying=!1)}if(!this.isAlive){var c=Math.min(o._frameRateTime,Math.floor(this._playTime/s)*s);this._playTime-=c,o._frameRateTime-=c}(this._firstNewElement!=this._firstFreeElement||this._waitProcessRetiredElementCount>0||this._instanceBufferResized||this._instanceVertexBufferBinding._buffer.isContentLost)&&this._addActiveParticlesToVertexBuffer()},r._reorganizeGeometryBuffers=function(){var e=this._renderer,t=e.engine._particleBufferUtils,i=this._primitive,o=this._vertexBufferBindings;if(i.clearVertexElements(),o.length=0,e.renderMode===gi.Mesh){var s=e.mesh;if(!s)return;var l=s.getVertexElement(Ae.Position),u=s.getVertexElement(Ae.Color),c=s.getVertexElement(Ae.UV),f=l?s.vertexBufferBindings[l.bindingIndex]:null,d=u?s.vertexBufferBindings[u.bindingIndex]:null,h=c?s.vertexBufferBindings[c.bindingIndex]:null;if(f){var _=this._addVertexBufferBindingsFilterDuplicate(f,o);i.addVertexElement(new Kt(Ae.Position,l.offset,l.format,_))}if(d){var p=this._addVertexBufferBindingsFilterDuplicate(d,o);i.addVertexElement(new Kt(Ae.Color,u.offset,u.format,p))}if(h){var v=this._addVertexBufferBindingsFilterDuplicate(h,o);i.addVertexElement(new Kt(Ae.UV,c.offset,c.format,v))}var y=s._primitive.indexBufferBinding;i.setIndexBufferBinding(y),this._subPrimitive.count=y.buffer.byteLength/i._glIndexByteCount}else i.addVertexElement(t.billboardVertexElement),o.push(t.billboardVertexBufferBinding),i.setIndexBufferBinding(t.billboardIndexBufferBinding),this._subPrimitive.count=t.billboardIndexCount;i.setVertexBufferBindings(o);for(var m=t.instanceVertexElements,g=o.length,x=0,b=m.length;x<b;x++){var S=m[x];i.addVertexElement(new Kt(S.attribute,S.offset,S.format,g,S.instanceStepRate))}},r._resizeInstanceBuffer=function(e,t){var i;(i=this._instanceVertexBufferBinding)==null||i.buffer.destroy();var o=this._renderer.engine._particleBufferUtils,s=o.instanceVertexStride,l=e?this._currentParticleCount+t:this.main._maxParticleBuffer,u=s*l,c=this._renderer.engine,f=new ha(c,kr.VertexBuffer,u,Dn.Dynamic,!1);f.isGCIgnored=!0;var d=this._primitive.vertexBufferBindings,h=new Hl(f,s),_=new Float32Array(u/4),p=this._instanceVertices;if(p){var v=o.instanceVertexFloatStride,y=this._firstFreeElement,m=this._firstRetiredElement;if(e){var g=this._firstFreeElement*v;_.set(new Float32Array(p.buffer,0,g));var x=(this._firstFreeElement+t)*v;_.set(new Float32Array(p.buffer,g*4),x),this._firstNewElement>y&&(this._firstNewElement+=t),this._firstActiveElement>y&&(this._firstActiveElement+=t),m>y&&(this._firstRetiredElement+=t)}else{var b,S;m<=y?(b=y-m,S=0,this._firstFreeElement-=m,this._firstNewElement-=m,this._firstActiveElement-=m,this._firstRetiredElement=0):(b=this._currentParticleCount-m,S=y,this._firstNewElement>y&&(this._firstNewElement-=y),this._firstActiveElement>y&&(this._firstActiveElement-=y),m>y&&(this._firstRetiredElement-=y)),_.set(new Float32Array(p.buffer,m*v*4,b*v),S*v)}this._instanceBufferResized=!0}this._primitive.setVertexBufferBinding(p?d.length-1:d.length,h),this._instanceVertices=_,this._instanceVertexBufferBinding=h,this._currentParticleCount=l},r._updateShaderData=function(e){this.main._updateShaderData(e),this.velocityOverLifetime._updateShaderData(e),this.textureSheetAnimation._updateShaderData(e),this.sizeOverLifetime._updateShaderData(e),this.rotationOverLifetime._updateShaderData(e),this.colorOverLifetime._updateShaderData(e)},r._resetGlobalRandSeed=function(e){this._randomSeed=e,this.main._resetRandomSeed(e),this.emission._resetRandomSeed(e),this.textureSheetAnimation._resetRandomSeed(e),this.velocityOverLifetime._resetRandomSeed(e),this.rotationOverLifetime._resetRandomSeed(e),this.colorOverLifetime._resetRandomSeed(e)},r._getAliveParticleCount=function(){if(this._firstActiveElement<=this._firstFreeElement)return this._firstFreeElement-this._firstActiveElement;var e=this._currentParticleCount-this._firstActiveElement;return this._firstFreeElement>0&&(e+=this._firstFreeElement),e},r._getNotRetiredParticleCount=function(){if(this._firstRetiredElement<=this._firstFreeElement)return this._firstFreeElement-this._firstRetiredElement;var e=this._currentParticleCount-this._firstRetiredElement;return this._firstFreeElement>0&&(e+=this._firstFreeElement),e},r._destroy=function(){this._instanceVertexBufferBinding.buffer.destroy(),this._primitive.destroy()},r._addNewParticle=function(e,t,i,o){var s=this._firstFreeElement,l=s+1;l>=this._currentParticleCount&&(l=0);var u=this.main;if(l===this._firstRetiredElement){var c=Math.min(n._particleIncreaseCount,u._maxParticleBuffer-this._currentParticleCount);if(c===0)return;this._resizeInstanceBuffer(!0,c),l=s+1}var f,d;u.simulationSpace===os.World&&(f=i.worldPosition,d=i.worldRotationQuaternion);var h=this._renderer.engine._particleBufferUtils,_=u.startSpeed.evaluate(void 0,u._startSpeedRand.random()),p=this._instanceVertices,v=s*h.instanceVertexFloatStride;p[v]=e.x,p[v+1]=e.y,p[v+2]=e.z,p[v+h.startLifeTimeOffset]=u.startLifetime.evaluate(void 0,u._startLifeTimeRand.random()),p[v+4]=t.x,p[v+5]=t.y,p[v+6]=t.z,p[v+h.timeOffset]=o;var y=n._tempColor0;u.startColor.evaluate(void 0,u._startColorRand.random(),y),this._renderer.engine.settings.colorSpace===Ja.Linear&&y.toLinear(y),p[v+8]=y.r,p[v+9]=y.g,p[v+10]=y.b,p[v+11]=y.a;var m=u._startSizeRand;if(u.startSize3D)p[v+12]=u.startSizeX.evaluate(void 0,m.random()),p[v+13]=u.startSizeY.evaluate(void 0,m.random()),p[v+14]=u.startSizeZ.evaluate(void 0,m.random());else{var g=u.startSize.evaluate(void 0,m.random());p[v+12]=g,p[v+13]=g,p[v+14]=g}var x=u._startRotationRand;u.startRotation3D?(p[v+15]=ve.degreeToRadian(u.startRotationX.evaluate(void 0,x.random())),p[v+16]=ve.degreeToRadian(u.startRotationY.evaluate(void 0,x.random())),p[v+17]=ve.degreeToRadian(u.startRotationZ.evaluate(void 0,x.random()))):p[v+15]=ve.degreeToRadian(u.startRotationZ.evaluate(void 0,x.random())),p[v+18]=_;var b=this.colorOverLifetime;b.enabled&&b.color.mode===wa.TwoGradients&&(p[v+20]=b._colorGradientRand.random());var S=this.rotationOverLifetime;S.enabled&&S.rotationZ.mode===It.TwoConstants&&(p[v+22]=S._rotationRand.random());var C=this.textureSheetAnimation;C.enabled&&C.frameOverTime.mode===It.TwoCurves&&(p[v+23]=C._frameOverTimeRand.random());var E=this.velocityOverLifetime;if(E.enabled&&E.velocityX.mode===It.TwoConstants&&E.velocityY.mode===It.TwoConstants&&E.velocityZ.mode===It.TwoConstants){var T=E._velocityRand;p[v+24]=T.random(),p[v+25]=T.random(),p[v+26]=T.random()}if(this.main.simulationSpace===os.World&&(p[v+27]=f.x,p[v+28]=f.y,p[v+29]=f.z,p[v+30]=d.x,p[v+31]=d.y,p[v+32]=d.z,p[v+33]=d.w),this.textureSheetAnimation.enabled){var M=this.textureSheetAnimation._tillingInfo;p[v+h.simulationUVOffset]=M.x,p[v+35]=M.y,p[v+36]=0,p[v+37]=0}else p[v+h.simulationUVOffset]=1,p[v+35]=1,p[v+36]=0,p[v+37]=0;this._firstFreeElement=l},r._retireActiveParticles=function(){for(var e=this._renderer.engine,t=e._particleBufferUtils,i=e.time.frameCount,o=this._instanceVertices;this._firstActiveElement!==this._firstNewElement;){var s=this._firstActiveElement*t.instanceVertexFloatStride,l=s+t.timeOffset,u=this._playTime-o[l];if(Math.fround(u)<o[s+t.startLifeTimeOffset])break;o[l]=i,++this._firstActiveElement>=this._currentParticleCount&&(this._firstActiveElement=0),this._waitProcessRetiredElementCount++}},r._freeRetiredParticles=function(){for(var e=this._renderer.engine._particleBufferUtils,t=this._renderer.engine.time.frameCount;this._firstRetiredElement!==this._firstActiveElement;){var i=this._firstRetiredElement*e.instanceVertexFloatStride+e.startLifeTimeOffset,o=t-this._instanceVertices[i];if(o<0)break;++this._firstRetiredElement>=this._currentParticleCount&&(this._firstRetiredElement=0)}},r._addActiveParticlesToVertexBuffer=function(){var e=this._firstActiveElement,t=this._firstFreeElement;if(e!==t){var i=this._renderer.engine._particleBufferUtils.instanceVertexStride,o=e*i,s=this._instanceVertexBufferBinding.buffer,l=this._instanceVertices.buffer;if(e<t)s.setData(l,0,o,(t-e)*i,us.Discard);else{var u=(this._currentParticleCount-e)*i;s.setData(l,0,o,u,us.Discard),t>0&&s.setData(l,u,0,t*i)}this._firstNewElement=t,this._waitProcessRetiredElementCount=0,this._instanceBufferResized=!1}},r._addVertexBufferBindingsFilterDuplicate=function(e,t){for(var i=0,o=t.length;i<o;i++)if(t[i]===e)return i;return t.push(e),i},Ie(n,[{key:"isAlive",get:function(){return this._isPlaying?!0:this._firstActiveElement!==this._firstFreeElement}},{key:"randomSeed",get:function(){return this._randomSeed},set:function(e){this._resetGlobalRandSeed(e),this.useAutoRandomSeed=!1}}]),n}();(function(){bn._tempVector30=new z})();(function(){bn._tempVector31=new z})();(function(){bn._tempColor0=new Me})();(function(){bn._tempParticleRenderers=new Array})();(function(){bn._particleIncreaseCount=128})();H([Xe],bn.prototype,"main",void 0);H([Xe],bn.prototype,"emission",void 0);H([Xe],bn.prototype,"velocityOverLifetime",void 0);H([Xe],bn.prototype,"sizeOverLifetime",void 0);H([Xe],bn.prototype,"rotationOverLifetime",void 0);H([Xe],bn.prototype,"colorOverLifetime",void 0);H([Xe],bn.prototype,"textureSheetAnimation",void 0);H([te],bn.prototype,"_playTime",void 0);H([te],bn.prototype,"_firstNewElement",void 0);H([te],bn.prototype,"_firstActiveElement",void 0);H([te],bn.prototype,"_firstFreeElement",void 0);H([te],bn.prototype,"_firstRetiredElement",void 0);H([te],bn.prototype,"_primitive",void 0);H([te],bn.prototype,"_vertexBufferBindings",void 0);H([te],bn.prototype,"_subPrimitive",void 0);H([te],bn.prototype,"_renderer",void 0);H([te],bn.prototype,"_isPlaying",void 0);H([te],bn.prototype,"_instanceBufferResized",void 0);H([te],bn.prototype,"_waitProcessRetiredElementCount",void 0);H([te],bn.prototype,"_instanceVertexBufferBinding",void 0);H([te],bn.prototype,"_instanceVertices",void 0);var C6=function(n){be(r,n);function r(e){var t;t=n.call(this,e,vt.find("particle-shader"))||this;var i=t.shaderData;return i.setColor(yn._baseColorProp,new Me(1,1,1,1)),t.isTransparent=!0,t}var a=r.prototype;return a.clone=function(){var t=new r(this._engine);return this.cloneTo(t),t},Ie(r,[{key:"baseColor",get:function(){return this.shaderData.getColor(yn._baseColorProp)},set:function(t){var i=this.shaderData.getColor(yn._baseColorProp);t!==i&&i.copyFrom(t)}},{key:"baseTexture",get:function(){return this.shaderData.getTexture(yn._baseTextureProp)},set:function(t){this.shaderData.setTexture(yn._baseTextureProp,t),t?this.shaderData.enableMacro(yn._baseTextureMacro):this.shaderData.disableMacro(yn._baseTextureMacro)}}]),r}(yn),FP=function(r,a){this.time=r,this.count=a};H([Xe],FP.prototype,"count",void 0);var Ud=function(){function n(){this.enabled=!0,this.randomDirectionAmount=0}var r=n.prototype;return r._generatePositionAndDirection=function(e,t,i,o){throw new Error("BaseShape: must override it.")},n}(),Ci=function(){function n(){}return n.randomPointUnitArcCircle=function(a,e,t){var i=t.random()*a;e.x=Math.cos(i),e.y=Math.sin(i)},n.randomPointInsideUnitArcCircle=function(a,e,t){n.randomPointUnitArcCircle(a,e,t);var i=Math.sqrt(t.random());e.x=e.x*i,e.y=e.y*i},n.randomPointUnitCircle=function(a,e){var t=e.random()*Math.PI*2;a.x=Math.cos(t),a.y=Math.sin(t)},n.randomPointInsideUnitCircle=function(a,e){n.randomPointUnitCircle(a,e);var t=Math.sqrt(e.random());a.x=a.x*t,a.y=a.y*t},n._randomPointUnitSphere=function(a,e){var t=e.random()*2-1,i=e.random()*Math.PI*2,o=Math.sqrt(1-t*t);a.x=o*Math.cos(i),a.y=o*Math.sin(i),a.z=t},n._randomPointInsideUnitSphere=function(a,e){n._randomPointUnitSphere(a,e);var t=Math.pow(e.random(),1/3);a.x=a.x*t,a.y=a.y*t,a.z=a.z*t},n._randomPointInsideHalfUnitBox=function(a,e){e===void 0&&(e=null),a.x=e.random()-.5,a.y=e.random()-.5,a.z=e.random()-.5},n}(),nl;(function(n){n[n.Box=0]="Box",n[n.Circle=1]="Circle",n[n.Cone=2]="Cone",n[n.Hemisphere=3]="Hemisphere",n[n.Sphere=4]="Sphere"})(nl||(nl={}));var wx=function(n){be(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e.shapeType=nl.Box,e.size=new z(1,1,1),e}var a=r.prototype;return a._generatePositionAndDirection=function(t,i,o,s){Ci._randomPointInsideHalfUnitBox(o,t),o.multiply(this.size);var l=r._tempVector30;l.set(0,0,-1),Ci._randomPointUnitSphere(s,t),z.lerp(l,s,this.randomDirectionAmount,s)},r}(Ud);(function(){wx._tempVector30=new z})();H([Xe],wx.prototype,"size",void 0);var Hu;(function(n){n[n.Random=0]="Random",n[n.Loop=1]="Loop"})(Hu||(Hu={}));var DP=function(n){be(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e.shapeType=nl.Circle,e.radius=1,e.arc=360,e.arcMode=Hu.Random,e.arcSpeed=1,e}var a=r.prototype;return a._generatePositionAndDirection=function(t,i,o,s){var l=r._tempPositionPoint;switch(this.arcMode){case Hu.Loop:var u=i*this.arcSpeed*(360/this.arc)%1,c=ve.degreeToRadian(this.arc*u);l.set(Math.cos(c),Math.sin(c)),l.scale(t.random());break;case Hu.Random:Ci.randomPointInsideUnitArcCircle(ve.degreeToRadian(this.arc),l,t);break}o.set(l.x,l.y,0),o.scale(this.radius),Ci._randomPointUnitSphere(s,t),z.lerp(o,s,this.randomDirectionAmount,s)},r}(Ud);(function(){DP._tempPositionPoint=new Ze})();var zd=function(n){be(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e.shapeType=nl.Cone,e.angle=25,e.radius=1,e.length=5,e.emitType=0,e}var a=r.prototype;return a._generatePositionAndDirection=function(t,i,o,s){var l=r._tempVector20,u=ve.degreeToRadian(this.angle),c=Math.sin(u),f=Math.cos(u);switch(this.emitType){case 0:Ci.randomPointInsideUnitCircle(l,t),o.set(l.x*this.radius,l.y*this.radius,0);var d=r._tempVector21;Ci.randomPointInsideUnitCircle(d,t),Ze.lerp(l,d,this.randomDirectionAmount,d),s.set(d.x*c,d.y*c,-f);break;case 1:Ci.randomPointInsideUnitCircle(l,t),o.set(l.x*this.radius,l.y*this.radius,0),s.set(l.x*c,l.y*c,-f),s.normalize();var h=r._tempVector30;z.scale(s,this.length*t.random(),h),o.add(h);var _=r._tempVector31;Ci._randomPointUnitSphere(_,t),z.lerp(s,_,this.randomDirectionAmount,s);break}},r}(Ud);(function(){zd._tempVector20=new Ze})();(function(){zd._tempVector21=new Ze})();(function(){zd._tempVector30=new z})();(function(){zd._tempVector31=new z})();var d0;(function(n){n[n.Base=0]="Base",n[n.Volume=1]="Volume"})(d0||(d0={}));var E6=function(n){be(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e.shapeType=nl.Hemisphere,e.radius=1,e}var a=r.prototype;return a._generatePositionAndDirection=function(t,i,o,s){Ci._randomPointInsideUnitSphere(o,t),o.scale(this.radius);var l=o.z;l>0&&(o.z=-l),Ci._randomPointUnitSphere(s,t),z.lerp(o,s,this.randomDirectionAmount,s)},r}(Ud),T6=function(n){be(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e.shapeType=nl.Sphere,e.radius=1,e}var a=r.prototype;return a._generatePositionAndDirection=function(t,i,o,s){Ci._randomPointInsideUnitSphere(o,t),o.scale(this.radius),Ci._randomPointUnitSphere(s,t),z.lerp(o,s,this.randomDirectionAmount,s)},r}(Ud),R6=`#define GLSLIFY 1
varying vec2 v_uv;uniform sampler2D u_texture;void main(void){gl_FragColor=texture2D(u_texture,v_uv);}`,A6=`#define GLSLIFY 1
attribute vec3 POSITION;attribute vec2 TEXCOORD_0;varying vec2 v_uv;uniform mat4 camera_ProjMat;uniform mat4 camera_ViewMat;void main(){gl_Position=camera_ProjMat*camera_ViewMat*vec4(POSITION,1.0);v_uv=TEXCOORD_0;}`;vt.create("trail",A6,R6);var BP=function(n){be(r,n);function r(a){var e;e=n.call(this,a,vt.find("trail"))||this;var t=e.renderState.blendState.targetBlendState;return t.enabled=!0,t.sourceColorBlendFactor=t.sourceAlphaBlendFactor=jt.SourceAlpha,t.destinationColorBlendFactor=t.destinationAlphaBlendFactor=jt.One,e.renderState.depthState.writeEnabled=!1,e}return r}(Qa),lC=new z,w6=function(n){be(r,n);function r(e,t){var i;i=n.call(this,e)||this,i._stroke=t.stroke||.2,i._minSeg=t.minSeg||.02,i._lifetime=t.lifetime||1e3,i._maxPointNum=i._lifetime/1e3*e.engine.targetFrameRate,i._points=[],i._pointStates=[],i._strapPoints=[];for(var o=0;o<i._maxPointNum;o++)i._points.push(new z),i._pointStates.push(i._lifetime),i._strapPoints.push(new z),i._strapPoints.push(new z);i._curPointNum=0;var s=t.material||new BP(i.engine);return i.setMaterial(s),i.setTexture(t.texture),i._initGeometry(),i}var a=r.prototype;return a.update=function(t){for(var i=0,o=0,s=0;s<this._curPointNum;s++)this._pointStates[s]-=t,this._pointStates[s]<0?i++:i>0&&(o=s-i,this._pointStates[o]=this._pointStates[s],this._points[o].copyFrom(this._points[s]));this._curPointNum-=i;var l=!0;if(this._curPointNum===this._maxPointNum)l=!1;else if(this._curPointNum>0){var u=this._points[this._points.length-1];z.distance(this.entity.transform.worldPosition,u)<this._minSeg&&(l=!1)}l&&(this._pointStates[this._curPointNum]=this._lifetime,this._points[this._curPointNum].copyFrom(this.entity.transform.worldPosition),this._curPointNum++)},a.setTexture=function(t){t&&this.getMaterial().shaderData.setTexture("u_texture",t)},a._render=function(t){this._updateStrapVertices(t.camera,this._points),this._updateStrapCoords(),this._vertexBuffer.setData(this._vertices),n.prototype._render.call(this,t)},a._initGeometry=function(){var t=new c_(this._entity.engine),i=20,o=this._maxPointNum*2,s=o*i,l=new Float32Array(s),u=[new Kt("POSITION",0,rt.Vector3,0),new Kt("TEXCOORD_0",12,rt.Vector2,0)],c=new ha(this.engine,s*4,Dn.Dynamic);t.setVertexBufferBinding(c,i),t.setVertexElements(u),t.addSubMesh(0,o,ro.TriangleStrip),this._vertexBuffer=c,this._vertexStride=i,this._vertices=l,this.mesh=t},a._updateStrapVertices=function(t,i){var o=t.viewMatrix,s=o.elements,l=new z(s[0],s[4],s[8]),u=new z(s[1],s[5],s[9]),c=new z(s[2],s[6],s[10]),f=this._stroke;u.scale(f);var d=new z,h=new z,_=new Ut;z.transformByQuat(l,_,l),z.transformByQuat(u,_,u);var p=new z,v=new z,y=new z;l.normalize();for(var m=this._vertices,g=0;g<this._maxPointNum;g++){if(g<this._curPointNum){var x=i[g];g===this._curPointNum-1&&g!==0?z.subtract(x,i[g-1],y):z.subtract(i[g+1],x,y),this._projectOnPlane(y,c,y),y.normalize();var b=Math.acos(z.dot(l,y));z.cross(l,y,v),z.dot(v,c)<=0&&(b=Math.PI*2-b),Ut.rotationAxisAngle(c,b,_),z.transformByQuat(u,_,p),z.add(x,p,d),z.subtract(x,p,h)}var S=g*2*this._vertexStride/4,C=(g*2+1)*this._vertexStride/4;m[S]=d.x,m[S+1]=d.y,m[S+2]=d.z,m[C]=h.x,m[C+1]=h.y,m[C+2]=h.z}},a._updateStrapCoords=function(){if(this._prePointsNum!==this._curPointNum){this._prePointsNum=this._curPointNum;for(var t=this._curPointNum,i=1/t,o=this._vertices,s=0;s<t;s++){var l=1-s*i,u=s*2*this._vertexStride/4,c=(s*2+1)*this._vertexStride/4;o[u]=0,o[u+1]=l,o[c]=1,o[c+1]=l}}},a._projectOnVector=function(t,i,o){var s=i.clone();z.normalize(s,s);var l=z.dot(t,s);o.x=s.x*l,o.y=s.y*l,o.z=s.z*l},a._projectOnPlane=function(t,i,o){this._projectOnVector(t,i,lC),z.subtract(t,lC,o)},r}(yr),kP=function(n){be(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e.probeLayer=cs.Everything,e.width=1024,e.height=1024,e.antiAliasing=1,e._isCube=!1,e}var a=r.prototype;return a.onTextureChange=function(t){},a.onBeginRender=function(t){!this.enabled||(this._camera=t,this._oriCameraCullingMask=t.cullingMask,t.cullingMask=this.probeLayer,(!this._activeRenderTarget||this._activeRenderTarget.width!==this.width||this._activeRenderTarget.height!==this.height||this._activeRenderTarget.antiAliasing!==this.antiAliasing)&&(this._renderTarget=new jl(this.engine,this.width,this.height,this._isCube?new Ma(this.engine,this.width):new br(this.engine,this.width,this.height),ud.Depth,this.antiAliasing),this._renderTargetSwap=new jl(this.engine,this.width,this.height,this._isCube?new Ma(this.engine,this.width):new br(this.engine,this.width,this.height),ud.Depth,this.antiAliasing),this._activeRenderTarget=this._renderTarget),this._oriCameraRenderTarget=t.renderTarget,t.renderTarget=this._activeRenderTarget)},a.onEndRender=function(t){!this.enabled||(this.onTextureChange&&this.onTextureChange(this._texture),this._activeRenderTarget=this._activeRenderTarget===this._renderTarget?this._renderTargetSwap:this._renderTarget)},a._reset=function(){!this.enabled||(this._camera.renderTarget=this._oriCameraRenderTarget,this._camera.cullingMask=this._oriCameraCullingMask)},Ie(r,[{key:"_texture",get:function(){var t;return(t=this._activeRenderTarget)==null?void 0:t.getColorTexture()}}]),r}(zr),uC=new z,fl=new z,dl=new z,P6=function(n){be(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e.position=new z(0,0,0),e._isCube=!0,e.oriViewMatrix=new Ge,e}var a=r.prototype;return a.onBeginRender=function(t){if(!!this.enabled){n.prototype.onBeginRender.call(this,t),this._storeCamera(t);for(var i=0;i<6;i++)this._setCamera(i,t),t.render(Oi.PositiveX+i);this._restoreCamera(t),n.prototype._reset.call(this)}},a._storeCamera=function(t){this.oriViewMatrix.copyFrom(t.viewMatrix),this._oriFieldOfView=t.fieldOfView},a._restoreCamera=function(t){t.viewMatrix.copyFrom(this.oriViewMatrix),t.fieldOfView=this._oriFieldOfView},a._setCamera=function(t,i){switch(t){case 0:fl.set(0,-1,0),dl.set(1,0,0);break;case 1:fl.set(0,-1,0),dl.set(-1,0,0);break;case 2:fl.set(0,0,1),dl.set(0,1,0);break;case 3:fl.set(0,0,-1),dl.set(0,-1,0);break;case 4:fl.set(0,-1,0),dl.set(0,0,1);break;case 5:fl.set(0,-1,0),dl.set(0,0,-1);break}z.add(this.position,dl,uC),Ge.lookAt(this.position,uC,fl,i.viewMatrix),i.fieldOfView=90},r}(kP),cC=Object.freeze(Object.defineProperty({__proto__:null,AmbientLight:ri,get AnimationArrayCurve(){return Jv},get AnimationBoolCurve(){return Zv},AnimationClip:Cx,AnimationClipCurveBinding:LP,get AnimationColorCurve(){return ep},AnimationCurve:ai,AnimationEvent:h_,get AnimationFloatArrayCurve(){return hd},get AnimationFloatCurve(){return tp},get AnimationQuaternionCurve(){return hc},get AnimationRectCurve(){return l0},get AnimationRefCurve(){return ap},get AnimationStringCurve(){return ip},get AnimationVector2Curve(){return np},get AnimationVector3Curve(){return vd},get AnimationVector4Curve(){return rp},Animator:Lo,get AnimatorConditionMode(){return c0},AnimatorController:Tx,AnimatorControllerLayer:Rx,get AnimatorCullingMode(){return pd},get AnimatorLayerBlendingMode(){return _d},AnimatorLayerMask:S6,AnimatorState:NP,AnimatorStateMachine:Ax,AnimatorStateTransition:Ex,AssetPromise:sn,get AssetType(){return vn},Background:PP,get BackgroundMode(){return Ro},get BackgroundTextureFillMode(){return Bs},BaseMaterial:yn,Basic2DBatcher:Yi,BasicRenderPipeline:IP,get BlendFactor(){return jt},get BlendMode(){return Ml},get BlendOperation(){return Mr},BlendShape:gx,BlendShapeFrame:mP,BlendState:s_,BlinnPhongMaterial:Dd,BoolUpdateFlag:o_,BoxColliderShape:xx,BoxShape:wx,Buffer:ha,get BufferBindFlag(){return kr},BufferMesh:c_,get BufferUsage(){return Dn},BufferUtil:$v,Burst:FP,get Camera(){return rn},get CameraClearFlags(){return Qr},get CameraType(){return dd},Canvas:wP,CapsuleColliderShape:Bd,CharacterController:m8,CircleShape:DP,CloneManager:Mi,get Collider(){return ta},ColliderShape:ka,get ColliderShapeUpAxis(){return Dl},get CollisionDetectionMode(){return a0},ColorOverLifetimeModule:ii,get ColorSpace(){return Ja},get ColorWriteMask(){return Si},get CompareFunction(){return Xt},Component:Zr,get ConeEmitType(){return d0},ConeShape:zd,ContentRestorer:Ya,get ControllerCollisionFlag(){return o0},get ControllerNonWalkableMode(){return Yv},CubeProbe:P6,get CullMode(){return Fr},CurveKey:vo,get DataType(){return Rn},get DependentMode(){return no},DepthState:pP,get DepthTextureMode(){return fd},get DiffuseMode(){return el},DirectLight:wo,get Downsampling(){return dc},DynamicCollider:xa,get DynamicColliderConstraints(){return i0},EmissionModule:ll,Engine:fs,EngineObject:Oo,Entity:yo,EventDispatcher:vx,FixedJoint:x8,get FogMode(){return Qv},Font:uc,get FontStyle(){return Ds},get GLCapabilityType(){return Ue},GradientAlphaKey:sp,GradientColorKey:op,HemisphereShape:E6,HingeJoint:Lc,HitResult:EP,IndexBufferBinding:ld,get IndexFormat(){return Lr},InputManager:RP,get InterpolationType(){return Pr},get Joint(){return ao},JointLimits:b8,JointMotor:C8,Keyframe:ua,get Keys(){return hn},get Layer(){return cs},Light:kd,Loader:ln,Logger:Pt,get MSAASamples(){return qv},MainModule:un,Material:Qa,Mesh:_x,MeshRenderer:yr,get MeshTopology(){return ro},ModelMesh:Kn,get OverflowMode(){return Gl},PBRBaseMaterial:oo,PBRMaterial:Ji,PBRSpecularMaterial:ql,ParticleCompositeCurve:Pn,ParticleCompositeGradient:Zl,ParticleCurve:Bl,get ParticleCurveMode(){return It},ParticleGenerator:bn,ParticleGradient:tl,get ParticleGradientMode(){return wa},ParticleMaterial:C6,get ParticleRenderMode(){return gi},ParticleRenderer:na,get ParticleScaleMode(){return fo},get ParticleShapeArcMode(){return Hu},get ParticleShapeType(){return nl},get ParticleSimulationSpace(){return os},get ParticleStopMode(){return vc},PhysicsMaterial:TP,get PhysicsMaterialCombineMode(){return cd},PhysicsScene:ya,get PipelineStage(){return da},PlaneColliderShape:E8,get Platform(){return ca},PointLight:hs,Pointer:CP,get PointerButton(){return Pa},get PointerPhase(){return Wa},Primitive:px,PrimitiveMesh:Gn,Probe:kP,RasterState:_P,ReferResource:Io,get RenderBufferDepthFormat(){return ud},get RenderFace(){return es},RenderQueue:Yo,get RenderQueueType(){return ar},RenderState:Ao,get RenderStateDataKey(){return ut},RenderTarget:jl,RenderTargetBlendState:vP,get Renderer(){return Gt},ResourceManager:cc,RotationOverLifetimeModule:jn,Scene:Vd,SceneManager:bP,Script:zr,get SetDataOptions(){return us},Shader:vt,ShaderData:io,ShaderFactory:Ko,ShaderLib:Pu,ShaderMacro:_t,ShaderMacroCollection:Ba,ShaderPass:vr,ShaderProperty:X,get ShaderPropertyType(){return la},ShaderTagKey:is,get ShadowCascadesMode(){return _i},get ShadowResolution(){return ks},get ShadowType(){return ds},SizeOverLifetimeModule:Gr,Skin:yP,SkinnedMeshRenderer:Ur,Sky:fc,SkyBoxMaterial:Nc,SkyProceduralMaterial:ys,SphereColliderShape:Sx,SphereShape:T6,SpotLight:ti,SpringJoint:S8,Sprite:Wv,SpriteAtlas:fP,get SpriteDrawMode(){return vi},SpriteMask:ea,get SpriteMaskInteraction(){return ur},get SpriteMaskLayer(){return oc},SpriteRenderer:Er,get SpriteTileMode(){return od},StateMachineScript:u0,StaticCollider:y8,get StencilOperation(){return Tn},StencilState:gP,SubMesh:u_,SubShader:nv,get SunMode(){return f0},SystemInfo:To,get TextHorizontalAlignment(){return wl},TextRenderer:Zn,TextUtils:Za,get TextVerticalAlignment(){return Pl},Texture:Eo,Texture2D:br,Texture2DArray:mx,get TextureCoordinate(){return Xs},TextureCube:Ma,get TextureCubeFace(){return Oi},get TextureDepthCompareFunction(){return pi},get TextureFilterMode(){return Jn},get TextureFormat(){return ye},TextureSheetAnimationModule:Va,get TextureUsage(){return lc},get TextureWrapMode(){return pr},Time:i_,TrailMaterial:BP,TrailRenderer:w6,Transform:Vt,UnlitMaterial:SP,Utils:Mn,VelocityOverLifetimeModule:er,get VertexAttribute(){return Ae},VertexBufferBinding:Hl,VertexElement:Kt,get VertexElementFormat(){return rt},get WrapMode(){return gd},XRManager:AP,assignmentClone:en,deepClone:Xe,dependentComponents:gs,ignoreClone:te,request:Jl,resourceLoader:kn,shallowClone:hx},Symbol.toStringTag,{value:"Module"})),Ct;(function(n){n[n.RGBA_ASTC_4X4_KHR=37808]="RGBA_ASTC_4X4_KHR",n[n.RGBA_ASTC_5X4_KHR=37809]="RGBA_ASTC_5X4_KHR",n[n.RGBA_ASTC_5X5_KHR=37810]="RGBA_ASTC_5X5_KHR",n[n.RGBA_ASTC_6X5_KHR=37811]="RGBA_ASTC_6X5_KHR",n[n.RGBA_ASTC_6X6_KHR=37812]="RGBA_ASTC_6X6_KHR",n[n.RGBA_ASTC_8X5_KHR=37813]="RGBA_ASTC_8X5_KHR",n[n.RGBA_ASTC_8X6_KHR=37814]="RGBA_ASTC_8X6_KHR",n[n.RGBA_ASTC_8X8_KHR=37815]="RGBA_ASTC_8X8_KHR",n[n.RGBA_ASTC_10X5_KHR=37816]="RGBA_ASTC_10X5_KHR",n[n.RGBA_ASTC_10X6_KHR=37817]="RGBA_ASTC_10X6_KHR",n[n.RGBA_ASTC_10X8_KHR=37818]="RGBA_ASTC_10X8_KHR",n[n.RGBA_ASTC_10X10_KHR=37819]="RGBA_ASTC_10X10_KHR",n[n.RGBA_ASTC_12X10_KHR=37820]="RGBA_ASTC_12X10_KHR",n[n.RGBA_ASTC_12X12_KHR=37821]="RGBA_ASTC_12X12_KHR",n[n.SRGB8_ALPHA8_ASTC_4X4_KHR=37840]="SRGB8_ALPHA8_ASTC_4X4_KHR",n[n.SRGB8_ALPHA8_ASTC_5X4_KHR=37841]="SRGB8_ALPHA8_ASTC_5X4_KHR",n[n.SRGB8_ALPHA8_ASTC_5X5_KHR=37842]="SRGB8_ALPHA8_ASTC_5X5_KHR",n[n.SRGB8_ALPHA8_ASTC_6X5_KHR=37843]="SRGB8_ALPHA8_ASTC_6X5_KHR",n[n.SRGB8_ALPHA8_ASTC_6X6_KHR=37844]="SRGB8_ALPHA8_ASTC_6X6_KHR",n[n.SRGB8_ALPHA8_ASTC_8X5_KHR=37845]="SRGB8_ALPHA8_ASTC_8X5_KHR",n[n.SRGB8_ALPHA8_ASTC_8X6_KHR=37846]="SRGB8_ALPHA8_ASTC_8X6_KHR",n[n.SRGB8_ALPHA8_ASTC_8X8_KHR=37847]="SRGB8_ALPHA8_ASTC_8X8_KHR",n[n.SRGB8_ALPHA8_ASTC_10X5_KHR=37848]="SRGB8_ALPHA8_ASTC_10X5_KHR",n[n.SRGB8_ALPHA8_ASTC_10X6_KHR=37849]="SRGB8_ALPHA8_ASTC_10X6_KHR",n[n.SRGB8_ALPHA8_ASTC_10X8_KHR=37850]="SRGB8_ALPHA8_ASTC_10X8_KHR",n[n.SRGB8_ALPHA8_ASTC_10X10_KHR=37851]="SRGB8_ALPHA8_ASTC_10X10_KHR",n[n.SRGB8_ALPHA8_ASTC_12X10_KHR=37852]="SRGB8_ALPHA8_ASTC_12X10_KHR",n[n.SRGB8_ALPHA8_ASTC_12X12_KHR=37853]="SRGB8_ALPHA8_ASTC_12X12_KHR",n[n.RGB_ETC1_WEBGL=36196]="RGB_ETC1_WEBGL",n[n.R11_EAC=37488]="R11_EAC",n[n.SIGNED_R11_EAC=37489]="SIGNED_R11_EAC",n[n.RG11_EAC=37490]="RG11_EAC",n[n.SIGNED_RG11_EAC=37491]="SIGNED_RG11_EAC",n[n.RGB8_ETC2=37492]="RGB8_ETC2",n[n.SRGB8_ETC2=37493]="SRGB8_ETC2",n[n.RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="RGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.RGBA8_ETC2_EAC=37496]="RGBA8_ETC2_EAC",n[n.SRGB8_ALPHA8_ETC2_EAC=37497]="SRGB8_ALPHA8_ETC2_EAC",n[n.RGB_PVRTC_4BPPV1_IMG=35840]="RGB_PVRTC_4BPPV1_IMG",n[n.RGB_PVRTC_2BPPV1_IMG=35841]="RGB_PVRTC_2BPPV1_IMG",n[n.RGBA_PVRTC_4BPPV1_IMG=35842]="RGBA_PVRTC_4BPPV1_IMG",n[n.RGBA_PVRTC_2BPPV1_IMG=35843]="RGBA_PVRTC_2BPPV1_IMG",n[n.RGB_S3TC_DXT1_EXT=33776]="RGB_S3TC_DXT1_EXT",n[n.RGBA_S3TC_DXT1_EXT=33777]="RGBA_S3TC_DXT1_EXT",n[n.RGBA_S3TC_DXT3_EXT=33778]="RGBA_S3TC_DXT3_EXT",n[n.RGBA_S3TC_DXT5_EXT=33779]="RGBA_S3TC_DXT5_EXT",n[n.RGBA_BPTC_UNORM_EXT=36492]="RGBA_BPTC_UNORM_EXT",n[n.SRGB_ALPHA_BPTC_UNORM_EXT=36493]="SRGB_ALPHA_BPTC_UNORM_EXT",n[n.RGB_BPTC_SIGNED_FLOAT_EXT=36494]="RGB_BPTC_SIGNED_FLOAT_EXT",n[n.RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="RGB_BPTC_UNSIGNED_FLOAT_EXT"})(Ct||(Ct={}));function fC(n,r){for(var a=0;a<r.length;a++){var e=r[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function Gd(n,r,a){return r&&fC(n.prototype,r),a&&fC(n,a),n}function h0(n,r){return h0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h0(n,r)}function Hd(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&h0(n,r)}function $a(n,r){return r!=null&&typeof Symbol!="undefined"&&r[Symbol.hasInstance]?!!r[Symbol.hasInstance](n):n instanceof r}var M6=function(n){Hd(r,n);function r(e){var t;t=n.call(this)||this,t._scale=new Ze;var i=e.width,o=e.height;return t._webCanvas=e,t.width=i,t.height=o,t}var a=r.prototype;return a.resizeByClientSize=function(t){t===void 0&&(t=window.devicePixelRatio);var i=this._webCanvas;if(typeof OffscreenCanvas=="undefined"||!$a(i,OffscreenCanvas)){var o=i.clientWidth*t,s=i.clientHeight*t;this.width=o,this.height=s}},a.setScale=function(t,i){this._scale.set(t,i),this.scale=this._scale},a._onWidthChanged=function(t){this._webCanvas.width=t},a._onHeightChange=function(t){this._webCanvas.height=t},Gd(r,[{key:"scale",get:function(){var t=this._webCanvas;return(typeof OffscreenCanvas=="undefined"||!$a(t,OffscreenCanvas))&&this._scale.set(t.clientWidth*devicePixelRatio/t.width,t.clientHeight*devicePixelRatio/t.height),this._scale},set:function(t){var i=this._webCanvas;(typeof OffscreenCanvas=="undefined"||!$a(i,OffscreenCanvas))&&(i.style.transformOrigin="left top",i.style.transform="scale("+t.x+", "+t.y+")")}}]),r}(wP),O6=function(n){Hd(r,n);function r(){return n.apply(this,arguments)}return r.create=function(e){var t=e.canvas,i=new M6(typeof t=="string"?document.getElementById(t):t),o=new z6(e.graphicDeviceOptions),s=new r(i,o,e),l=s._initialize(e);return l.then(function(){return s.sceneManager.addScene(new Vd(s,"DefaultScene")),s})},Gd(r,[{key:"canvas",get:function(){return this._canvas}}]),r}(fs);function lp(){return lp=Object.assign||function(r){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}return r},lp.apply(this,arguments)}var I6=function(){function n(a,e,t,i,o){i===void 0&&(i=Dn.Static);var s=a.gl,l=s.createBuffer(),u=this._getGLBufferUsage(s,i),c=e===kr.VertexBuffer?s.ARRAY_BUFFER:s.ELEMENT_ARRAY_BUFFER;this._gl=s,this._glBuffer=l,this._glBufferUsage=u,this._glBindTarget=c,this._isWebGL2=a.isWebGL2,this.bind(),o?s.bufferData(c,o,u):s.bufferData(c,t,u),s.bindBuffer(c,null)}var r=n.prototype;return r.bind=function(){this._gl.bindBuffer(this._glBindTarget,this._glBuffer)},r.setData=function(e,t,i,o,s,l){var u=this._gl,c=this._glBindTarget;this.bind(),l===us.Discard&&u.bufferData(c,e,this._glBufferUsage);var f=t.BYTES_PER_ELEMENT||1,d=s?f*s:t.byteLength;if(o!==0||d<t.byteLength){var h=t.byteOffset!==void 0;if(this._isWebGL2&&h)u.bufferSubData(c,i,t,o,d/f);else{var _=new Uint8Array(h?t.buffer:t,o*f,d);u.bufferSubData(c,i,_)}}else u.bufferSubData(c,i,t);u.bindBuffer(c,null)},r.getData=function(e,t,i,o){if(this._isWebGL2){var s=this._gl;this.bind(),s.getBufferSubData(this._glBindTarget,t,e,i,o)}else throw"Buffer is write-only on WebGL1.0 platforms."},r.destroy=function(){this._gl.deleteBuffer(this._glBuffer),this._gl=null,this._glBuffer=null},r._getGLBufferUsage=function(e,t){switch(t){case Dn.Static:return e.STATIC_DRAW;case Dn.Dynamic:return e.DYNAMIC_DRAW;case Dn.Stream:return e.STREAM_DRAW}},n}(),L6=function(){function n(a){this._rhi=a,this.capabilityList=new Map,this._init(),this._compatibleAllInterface()}var r=n.prototype;return r.canIUse=function(e){return this.capabilityList.get(e)},r.canIUseCompressedTextureInternalFormat=function(e){var t=Ct.RGBA_ASTC_4X4_KHR,i=Ct.RGBA_ASTC_12X12_KHR,o=Ct.SRGB8_ALPHA8_ASTC_4X4_KHR,s=Ct.SRGB8_ALPHA8_ASTC_12X12_KHR,l=Ct.RGB_ETC1_WEBGL,u=Ct.R11_EAC,c=Ct.SRGB8_ALPHA8_ETC2_EAC,f=Ct.RGB_PVRTC_4BPPV1_IMG,d=Ct.RGBA_PVRTC_2BPPV1_IMG,h=Ct.RGB_S3TC_DXT1_EXT,_=Ct.RGBA_S3TC_DXT5_EXT,p=Ct.RGBA_BPTC_UNORM_EXT,v=Ct.RGB_BPTC_UNSIGNED_FLOAT_EXT;return e>=t&&i<=i||e>=o&&e<=s?this.canIUse(Ue.astc):e===l?this.canIUse(Ue.etc1):e>=u&&e<=c?this.canIUse(Ue.etc):e>=f&&e<=d?this.canIUse(Ue.pvrtc):e>=h&&e<=_?this.canIUse(Ue.s3tc):e>=p&&e<=v?this.canIUse(Ue.bptc):!1},r._init=function(){var e=this.capabilityList,t=this.rhi.isWebGL2,i=this.rhi.requireExtension.bind(this.rhi),o=Ue.shaderVertexID,s=Ue.standardDerivatives,l=Ue.shaderTextureLod,u=Ue.elementIndexUint,c=Ue.depthTexture,f=Ue.vertexArrayObject,d=Ue.instancedArrays,h=Ue.multipleSample,_=Ue.drawBuffers,p=Ue.blendMinMax,v=Ue.astc,y=Ue.astc_webkit,m=Ue.etc,g=Ue.etc_webkit,x=Ue.etc1,b=Ue.etc1_webkit,S=Ue.pvrtc,C=Ue.pvrtc_webkit,E=Ue.s3tc,T=Ue.s3tc_webkit,M=Ue.bptc,L=Ue.textureFloat,F=Ue.textureHalfFloat,N=Ue.textureFloatLinear,I=Ue.textureHalfFloatLinear,O=Ue.WEBGL_colorBufferFloat,P=Ue.colorBufferFloat,R=Ue.colorBufferHalfFloat,A=Ue.textureFilterAnisotropic,D=Ue.fragDepth;e.set(o,t),e.set(s,t||!!i(s)),e.set(l,t||!!i(l)),e.set(u,t||!!i(u)),e.set(c,t||!!i(c)),e.set(f,t||!!i(f)),e.set(d,t||!!i(d)),e.set(h,t),e.set(_,t||!!i(_)),e.set(p,t||!!i(p)),e.set(L,t||!!i(L)),e.set(F,t||!!i(F)),e.set(N,!!i(N)),e.set(I,t||!!i(I)),e.set(P,t&&!!i(P)||!!i(O)),e.set(R,t&&!!i(P)||!!i(R)),e.set(A,!!i(A)),e.set(D,t||!!i(D)),e.set(v,!!(i(v)||i(y))),e.set(m,!!(i(m)||i(g))),e.set(x,!!(i(x)||i(b))),e.set(S,!!(i(S)||i(C))),e.set(E,!!(i(E)||i(T))),e.set(M,!!i(M))},r._compatibleInterface=function(e,t){var i=this.rhi,o=i.gl,s=null;if(s=i.requireExtension(e))for(var l in t){var u,c=t[l],f=s[c];(u=f)!=null&&u.bind?o[l]=f.bind(s):o[l]=f}},r._compatibleAllInterface=function(){var e=Ue.depthTexture,t=Ue.vertexArrayObject,i=Ue.instancedArrays,o=Ue.drawBuffers,s=Ue.textureFilterAnisotropic,l=Ue.textureHalfFloat,u=Ue.colorBufferHalfFloat,c=Ue.WEBGL_colorBufferFloat,f=Ue.blendMinMax,d=this.rhi.isWebGL2;if(!d){this._compatibleInterface(f,{MIN:"MIN_EXT",MAX:"MAX_EXT"}),this._compatibleInterface(e,{UNSIGNED_INT_24_8:"UNSIGNED_INT_24_8_WEBGL"}),this._compatibleInterface(t,{createVertexArray:"createVertexArrayOES",deleteVertexArray:"deleteVertexArrayOES",isVertexArray:"isVertexArrayOES",bindVertexArray:"bindVertexArrayOES"}),this._compatibleInterface(i,{drawArraysInstanced:"drawArraysInstancedANGLE",drawElementsInstanced:"drawElementsInstancedANGLE",vertexAttribDivisor:"vertexAttribDivisorANGLE"}),this._compatibleInterface(o,{MAX_DRAW_BUFFERS:"MAX_DRAW_BUFFERS_WEBGL"});var h={};if(this.canIUse(Ue.drawBuffers)){for(var _=this.maxDrawBuffers,p=0;p<_;p++)p!=0&&(h["COLOR_ATTACHMENT"+p]="COLOR_ATTACHMENT"+p+"_WEBGL"),h["DRAW_BUFFER"+p]="DRAW_BUFFER"+p+"_WEBGL";this._compatibleInterface(o,lp({drawBuffers:"drawBuffersWEBGL"},h))}this._compatibleInterface(l,{HALF_FLOAT:"HALF_FLOAT_OES"}),this._compatibleInterface(u,{RGBA16F:"RBGA16F_EXT"}),this._compatibleInterface(c,{RGBA32F:"RBGA32F_EXT"})}this._compatibleInterface(s,{TEXTURE_MAX_ANISOTROPY_EXT:"TEXTURE_MAX_ANISOTROPY_EXT"})},Gd(n,[{key:"maxTextureSize",get:function(){return this.rhi.renderStates.getParameter(this.rhi.gl.MAX_TEXTURE_SIZE)}},{key:"canUseFloatTextureBlendShape",get:function(){return this.canIUse(Ue.shaderVertexID)&&this.canIUse(Ue.textureFloat)&&this.rhi.renderStates.getParameter(this.rhi.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0}},{key:"canIUseMoreJoints",get:function(){return this.canIUse(Ue.textureFloat)&&this.rhi.renderStates.getParameter(this.rhi.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0}},{key:"maxDrawBuffers",get:function(){return this._maxDrawBuffers||(this.canIUse(Ue.drawBuffers)?this._maxDrawBuffers=this._rhi.gl.getParameter(this._rhi.gl.MAX_DRAW_BUFFERS):this._maxDrawBuffers=1),this._maxDrawBuffers}},{key:"maxAnisoLevel",get:function(){if(!this._maxAnisoLevel){var e=this._rhi.requireExtension(Ue.textureFilterAnisotropic);this._maxAnisoLevel=e?this._rhi.gl.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1}return this._maxAnisoLevel}},{key:"maxAntiAliasing",get:function(){if(!this._maxAntiAliasing){var e=this._rhi.gl,t=this.canIUse(Ue.multipleSample);this._maxAntiAliasing=t?e.getParameter(e.MAX_SAMPLES):1}return this._maxAntiAliasing}},{key:"rhi",get:function(){return this._rhi}}]),n}(),N6=function(){function n(a){this.rhi=a,this._requireResult={}}var r=n.prototype;return r.requireExtension=function(e){return this._requireResult[e]!==void 0?this._requireResult[e]:(this._requireResult[e]=this.rhi.gl.getExtension(e),this._requireResult[e])},n}(),F6=function(){function n(a,e){this._attribLocArray=[],this._vaoMap=new Map,this._primitive=e,this._canUseInstancedArrays=a.canIUse(Ue.instancedArrays),this._isSupportVAO=a.canIUse(Ue.vertexArrayObject),this._gl=a.gl}var r=n.prototype;return r.draw=function(e,t){var i=this._gl,o=this._primitive,s=this._isSupportVAO&&o.enableVAO;if(s){o._bufferStructChanged&&this._clearVAO(),this._vaoMap.has(e.id)||this._registerVAO(e);var l=this._vaoMap.get(e.id);i.bindVertexArray(l)}else this._bindBufferAndAttrib(e);var u=o.indexBufferBinding,c=o.instanceCount,f=o._glIndexType,d=o._glIndexByteCount,h=t.topology,_=t.start,p=t.count;if(c)if(this._canUseInstancedArrays)if(u)if(s)i.drawElementsInstanced(h,p,f,_*d,c);else{var y=u.buffer._platformBuffer._glBuffer;i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,y),i.drawElementsInstanced(h,p,f,_*d,c),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null)}else i.drawArraysInstanced(h,_,p,c);else Pt.error("ANGLE_instanced_arrays extension is not supported");else if(u)if(s)i.drawElements(h,p,f,_*d);else{var v=u.buffer._platformBuffer._glBuffer;i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,v),i.drawElements(h,p,f,_*d),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null)}else i.drawArrays(h,_,p);s?i.bindVertexArray(null):this._disableAttrib()},r.destroy=function(){this._isSupportVAO&&this._clearVAO()},r._bindBufferAndAttrib=function(e){var t=this._gl,i=this._primitive,o=i.vertexBufferBindings;this._attribLocArray.length=0;var s=e.attributeLocation,l=i._vertexElementMap,u,c;for(var f in s){var d=s[f];if(d!==-1){var h=l[f];if(h){var _=o[h.bindingIndex],p=_.buffer,v=_.stride;u=p._platformBuffer._glBuffer,c!==u&&(c=u,t.bindBuffer(t.ARRAY_BUFFER,u)),t.enableVertexAttribArray(d);var y=h._formatMetaInfo;t.vertexAttribPointer(d,y.size,y.type,y.normalized,v,h.offset),this._canUseInstancedArrays&&t.vertexAttribDivisor(d,h.instanceStepRate),this._attribLocArray.push(d)}else Pt.warn("vertex attribute not found: "+f)}}t.bindBuffer(t.ARRAY_BUFFER,null)},r._disableAttrib=function(){for(var e=this._gl,t=0,i=this._attribLocArray.length;t<i;t++)e.disableVertexAttribArray(this._attribLocArray[t])},r._registerVAO=function(e){var t=this._gl,i=t.createVertexArray();t.bindVertexArray(i);var o=this._primitive.indexBufferBinding;o&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o.buffer._platformBuffer._glBuffer),this._bindBufferAndAttrib(e),t.bindVertexArray(null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),this._disableAttrib(),this._vaoMap.set(e.id,i)},r._clearVAO=function(){var e=this._gl;this._vaoMap.forEach(function(t){e.deleteVertexArray(t)}),this._vaoMap.clear()},n}(),D6=function(){function n(a){this._parameters={},this._gl=a,this._parameters={},this._parameters[a.MAX_COMBINED_TEXTURE_IMAGE_UNITS]=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this._parameters[a.MAX_VERTEX_UNIFORM_VECTORS]=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),this._parameters[a.MAX_VERTEX_ATTRIBS]=a.getParameter(a.MAX_VERTEX_ATTRIBS),this._parameters[a.MAX_VERTEX_TEXTURE_IMAGE_UNITS]=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this._parameters[a.MAX_TEXTURE_SIZE]=a.getParameter(a.MAX_TEXTURE_SIZE),a.blendFuncSeparate(a.ONE,a.ZERO,a.ONE,a.ZERO),a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.colorMask(!0,!0,!0,!0),a.blendColor(0,0,0,0),a.disable(a.SAMPLE_ALPHA_TO_COVERAGE),a.enable(a.DEPTH_TEST),a.depthFunc(a.LESS),a.depthMask(!0),a.disable(a.STENCIL_TEST),a.stencilFuncSeparate(a.FRONT,a.ALWAYS,0,255),a.stencilFuncSeparate(a.BACK,a.ALWAYS,0,255),a.stencilOpSeparate(a.FRONT,a.KEEP,a.KEEP,a.KEEP),a.stencilOpSeparate(a.BACK,a.KEEP,a.KEEP,a.KEEP),a.stencilMask(255),a.enable(a.CULL_FACE),a.cullFace(a.BACK),a.disable(a.POLYGON_OFFSET_FILL),a.polygonOffset(0,0)}var r=n.prototype;return r.getParameter=function(e){return this._parameters[e]},n}(),Nr=function(){function n(a,e,t){this._texture=e,this._rhi=a,this._gl=a.gl,this._isWebGL2=a.isWebGL2,this._target=t,this._glTexture=this._gl.createTexture()}var r=n.prototype;return r.destroy=function(){this._gl.deleteTexture(this._glTexture),this._texture=null,this._glTexture=null,this._formatDetail=null},r.setUseDepthCompareMode=function(e){var t=this._gl;t.texParameteri(this._target,t.TEXTURE_COMPARE_MODE,e?t.COMPARE_REF_TO_TEXTURE:t.NONE)},r.generateMipmaps=function(){(this._texture.width!==1||this._texture.height!==1)&&(this._bind(),this._gl.generateMipmap(this._target))},r._bind=function(){this._rhi.bindTexture(this)},r._init=function(e){var t=this._gl,i=this._isWebGL2,o=this._formatDetail,s=o.internalFormat,l=o.baseFormat,u=o.dataType,c=this._texture,f=c.mipmapCount,d=c.width,h=c.height,_=c.usage,p=c._isDepthTexture;if(this._bind(),i&&!(l===t.LUMINANCE_ALPHA||l===t.ALPHA)&&_!==lc.Dynamic)t.texStorage2D(this._target,f,s,d,h);else if(e)for(var g=0;g<f;g++)for(var x=Math.max(1,d>>g),b=0;b<6;b++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+b,g,s,x,x,0,l,u,null);else if(p)t.texImage2D(this._target,0,s,d,h,0,l,u,null);else for(var v=0;v<f;v++){var y=Math.max(1,d>>v),m=Math.max(1,h>>v);t.texImage2D(this._target,v,s,y,m,0,l,u,null)}},r._getPixelBuffer=function(e,t,i,o,s,l,u){var c=this._gl,f=this._formatDetail,d=f.baseFormat,h=f.dataType;c.bindFramebuffer(c.FRAMEBUFFER,this._getReadFrameBuffer()),l>0&&!this._isWebGL2&&(l=0,Pt.error("mipLevel only take effect in WebGL2.0")),e!=null?c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_CUBE_MAP_POSITIVE_X+e,this._glTexture,l):c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,this._glTexture,l),c.readPixels(t,i,o,s,d,h,u),c.bindFramebuffer(c.FRAMEBUFFER,null)},r._setWrapMode=function(e,t){var i=this._gl,o=this._isWebGL2,s=this._target,l=this._texture,u=l.width,c=l.height;switch(!o&&e!==pr.Clamp&&(!n._isPowerOf2(u)||!n._isPowerOf2(c))&&(Pt.warn("non-power-2 texture is not supported for REPEAT or MIRRORED_REPEAT in WebGL1,and has automatically downgraded to CLAMP_TO_EDGE"),e=pr.Clamp),e){case pr.Clamp:i.texParameteri(s,t,i.CLAMP_TO_EDGE);break;case pr.Repeat:i.texParameteri(s,t,i.REPEAT);break;case pr.Mirror:i.texParameteri(s,t,i.MIRRORED_REPEAT);break}},r._getReadFrameBuffer=function(){var e=this._rhi._readFrameBuffer;return e||(this._rhi._readFrameBuffer=e=this._gl.createFramebuffer()),e},n._isPowerOf2=function(e){return(e&e-1)===0},n._getFormatDetail=function(e,t,i){switch(e){case ye.R8G8B8:return{internalFormat:i?t.RGB8:t.RGB,baseFormat:t.RGB,dataType:t.UNSIGNED_BYTE,isCompressed:!1};case ye.R8G8B8A8:return{internalFormat:i?t.RGBA8:t.RGBA,baseFormat:t.RGBA,dataType:t.UNSIGNED_BYTE,isCompressed:!1};case ye.R4G4B4A4:return{internalFormat:i?t.RGBA4:t.RGBA,baseFormat:t.RGBA,dataType:t.UNSIGNED_SHORT_4_4_4_4,isCompressed:!1};case ye.R5G5B5A1:return{internalFormat:i?t.RGB5_A1:t.RGBA,baseFormat:t.RGBA,dataType:t.UNSIGNED_SHORT_5_5_5_1,isCompressed:!1};case ye.R5G6B5:return{internalFormat:i?t.RGB565:t.RGB,baseFormat:t.RGB,dataType:t.UNSIGNED_SHORT_5_6_5,isCompressed:!1};case ye.Alpha8:return{internalFormat:t.ALPHA,baseFormat:t.ALPHA,dataType:t.UNSIGNED_BYTE,isCompressed:!1};case ye.LuminanceAlpha:return{internalFormat:t.LUMINANCE_ALPHA,baseFormat:t.LUMINANCE_ALPHA,dataType:t.UNSIGNED_BYTE,isCompressed:!1};case ye.R16G16B16A16:return{internalFormat:i?t.RGBA16F:t.RGBA,baseFormat:t.RGBA,dataType:t.HALF_FLOAT,isCompressed:!1};case ye.R32G32B32A32:return{internalFormat:i?t.RGBA32F:t.RGBA,baseFormat:t.RGBA,dataType:t.FLOAT,isCompressed:!1};case ye.R32G32B32A32_UInt:return{internalFormat:i?t.RGBA32UI:t.NONE,baseFormat:t.RGBA_INTEGER,dataType:t.UNSIGNED_INT,isCompressed:!1};case ye.BC1:return{internalFormat:Ct.RGB_S3TC_DXT1_EXT,isCompressed:!0};case ye.BC3:return{internalFormat:Ct.RGBA_S3TC_DXT5_EXT,isCompressed:!0};case ye.BC7:return{internalFormat:Ct.RGBA_BPTC_UNORM_EXT,isCompressed:!0};case ye.ETC1_RGB:return{internalFormat:Ct.RGB_ETC1_WEBGL,isCompressed:!0};case ye.ETC2_RGB:return{internalFormat:Ct.RGB8_ETC2,isCompressed:!0};case ye.ETC2_RGBA5:return{internalFormat:Ct.RGB8_PUNCHTHROUGH_ALPHA1_ETC2,isCompressed:!0};case ye.ETC2_RGBA8:return{internalFormat:Ct.RGBA8_ETC2_EAC,isCompressed:!0};case ye.PVRTC_RGB2:return{internalFormat:Ct.RGB_PVRTC_2BPPV1_IMG,isCompressed:!0};case ye.PVRTC_RGBA2:return{internalFormat:Ct.RGBA_PVRTC_2BPPV1_IMG,isCompressed:!0};case ye.PVRTC_RGB4:return{internalFormat:Ct.RGB_PVRTC_4BPPV1_IMG,isCompressed:!0};case ye.PVRTC_RGBA4:return{internalFormat:Ct.RGBA_PVRTC_4BPPV1_IMG,isCompressed:!0};case ye.ASTC_4x4:return{internalFormat:Ct.RGBA_ASTC_4X4_KHR,isCompressed:!0};case ye.ASTC_5x5:return{internalFormat:Ct.RGBA_ASTC_5X5_KHR,isCompressed:!0};case ye.ASTC_6x6:return{internalFormat:Ct.RGBA_ASTC_6X6_KHR,isCompressed:!0};case ye.ASTC_8x8:return{internalFormat:Ct.RGBA_ASTC_8X8_KHR,isCompressed:!0};case ye.ASTC_10x10:return{internalFormat:Ct.RGBA_ASTC_10X10_KHR,isCompressed:!0};case ye.ASTC_12x12:return{internalFormat:Ct.RGBA_ASTC_12X12_KHR,isCompressed:!0};case ye.Depth:return{internalFormat:i?t.DEPTH_COMPONENT32F:t.DEPTH_COMPONENT,baseFormat:t.DEPTH_COMPONENT,dataType:i?t.FLOAT:t.UNSIGNED_SHORT,isCompressed:!1,attachment:t.DEPTH_ATTACHMENT};case ye.DepthStencil:return{internalFormat:i?t.DEPTH32F_STENCIL8:t.DEPTH_STENCIL,baseFormat:t.DEPTH_STENCIL,dataType:i?t.FLOAT_32_UNSIGNED_INT_24_8_REV:t.UNSIGNED_INT_24_8,isCompressed:!1,attachment:t.DEPTH_STENCIL_ATTACHMENT};case ye.Depth16:return{internalFormat:i?t.DEPTH_COMPONENT16:t.DEPTH_COMPONENT,baseFormat:t.DEPTH_COMPONENT,dataType:t.UNSIGNED_SHORT,isCompressed:!1,attachment:t.DEPTH_ATTACHMENT};case ye.Depth24Stencil8:return{internalFormat:i?t.DEPTH24_STENCIL8:t.DEPTH_STENCIL,baseFormat:t.DEPTH_STENCIL,dataType:t.UNSIGNED_INT_24_8,isCompressed:!1,attachment:t.DEPTH_STENCIL_ATTACHMENT};case ye.Depth24:return{internalFormat:t.DEPTH_COMPONENT24,baseFormat:t.DEPTH_COMPONENT,dataType:t.UNSIGNED_INT,isCompressed:!1,attachment:t.DEPTH_ATTACHMENT};case ye.Depth32:return{internalFormat:t.DEPTH_COMPONENT32F,baseFormat:t.DEPTH_COMPONENT,dataType:t.FLOAT,isCompressed:!1,attachment:t.DEPTH_ATTACHMENT};case ye.Depth32Stencil8:return{internalFormat:t.DEPTH32F_STENCIL8,baseFormat:t.DEPTH_STENCIL,dataType:t.FLOAT_32_UNSIGNED_INT_24_8_REV,isCompressed:!1,attachment:t.DEPTH_STENCIL_ATTACHMENT};default:throw new Error("this TextureFormat is not supported in Galacean Engine: "+e)}},n._getRenderBufferDepthFormatDetail=function(e,t,i){switch(e){case ye.Depth:return{internalFormat:i?t.DEPTH_COMPONENT32F:t.DEPTH_COMPONENT16,baseFormat:t.DEPTH_COMPONENT,dataType:i?t.FLOAT:t.UNSIGNED_SHORT,isCompressed:!1,attachment:t.DEPTH_ATTACHMENT};case ye.DepthStencil:return{internalFormat:i?t.DEPTH32F_STENCIL8:t.DEPTH_STENCIL,baseFormat:t.DEPTH_STENCIL,dataType:i?t.FLOAT_32_UNSIGNED_INT_24_8_REV:t.UNSIGNED_INT_24_8,isCompressed:!1,attachment:t.DEPTH_STENCIL_ATTACHMENT};case ye.Stencil:return{internalFormat:t.STENCIL_INDEX8,baseFormat:t.STENCIL_ATTACHMENT,dataType:t.UNSIGNED_BYTE,isCompressed:!1,attachment:t.STENCIL_ATTACHMENT};case ye.Depth16:return{internalFormat:t.DEPTH_COMPONENT16,baseFormat:t.DEPTH_COMPONENT,dataType:t.UNSIGNED_SHORT,isCompressed:!1,attachment:t.DEPTH_ATTACHMENT};case ye.Depth24Stencil8:return{internalFormat:i?t.DEPTH24_STENCIL8:t.DEPTH_STENCIL,baseFormat:t.DEPTH_STENCIL,dataType:t.UNSIGNED_INT_24_8,isCompressed:!1,attachment:t.DEPTH_STENCIL_ATTACHMENT};case ye.Depth24:return{internalFormat:t.DEPTH_COMPONENT24,baseFormat:t.DEPTH_COMPONENT,dataType:t.UNSIGNED_INT,isCompressed:!1,attachment:t.DEPTH_ATTACHMENT};case ye.Depth32:return{internalFormat:t.DEPTH_COMPONENT32F,baseFormat:t.DEPTH_COMPONENT,dataType:t.FLOAT,isCompressed:!1,attachment:t.DEPTH_ATTACHMENT};case ye.Depth32Stencil8:return{internalFormat:t.DEPTH32F_STENCIL8,baseFormat:t.DEPTH_STENCIL,dataType:t.FLOAT_32_UNSIGNED_INT_24_8_REV,isCompressed:!1,attachment:t.DEPTH_STENCIL_ATTACHMENT};default:throw new Error("this TextureFormat is not supported in Galacean Engine: "+e)}},n._supportTextureFormat=function(e,t){switch(e){case ye.R16G16B16A16:if(!t.canIUse(Ue.textureHalfFloat))return!1;break;case ye.R32G32B32A32:if(!t.canIUse(Ue.textureFloat))return!1;break;case ye.Depth16:case ye.Depth24Stencil8:case ye.Depth:case ye.DepthStencil:if(!t.canIUse(Ue.depthTexture))return!1;break;case ye.R32G32B32A32_UInt:case ye.Depth24:case ye.Depth32:case ye.Depth32Stencil8:return t.isWebGL2}return!0},n._supportRenderBufferColorFormat=function(e,t){var i=!0;switch(e){case ye.R16G16B16A16:(!t.canIUse(Ue.colorBufferHalfFloat)||!t.canIUse(Ue.textureHalfFloat))&&(i=!1);break;case ye.R32G32B32A32:(!t.canIUse(Ue.colorBufferFloat)||!t.canIUse(Ue.textureFloat))&&(i=!1);break}return i},n._supportRenderBufferDepthFormat=function(e,t){if(!t.isWebGL2)switch(e){case ye.Depth24:case ye.Depth32:case ye.Depth32Stencil8:return!1}return!0},Gd(n,[{key:"wrapModeU",set:function(e){this._bind(),this._setWrapMode(e,this._gl.TEXTURE_WRAP_S)}},{key:"wrapModeV",set:function(e){this._bind(),this._setWrapMode(e,this._gl.TEXTURE_WRAP_T)}},{key:"filterMode",set:function(e){var t=this._gl,i=this._target,o=this._texture._mipmap;switch(this._bind(),e){case Jn.Point:t.texParameteri(i,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(i,t.TEXTURE_MIN_FILTER,o?t.NEAREST_MIPMAP_NEAREST:t.NEAREST);break;case Jn.Bilinear:t.texParameteri(i,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(i,t.TEXTURE_MIN_FILTER,o?t.LINEAR_MIPMAP_NEAREST:t.LINEAR);break;case Jn.Trilinear:t.texParameteri(i,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(i,t.TEXTURE_MIN_FILTER,o?t.LINEAR_MIPMAP_LINEAR:t.LINEAR);break}}},{key:"anisoLevel",set:function(e){var t=this._gl;this._bind(),t.texParameterf(this._target,t.TEXTURE_MAX_ANISOTROPY_EXT,e)}},{key:"depthCompareFunction",set:function(e){this._bind();var t=this._gl;switch(e){case pi.Never:t.texParameteri(this._target,t.TEXTURE_COMPARE_FUNC,t.NEVER);break;case pi.Less:t.texParameteri(this._target,t.TEXTURE_COMPARE_FUNC,t.LESS);break;case pi.Equal:t.texParameteri(this._target,t.TEXTURE_COMPARE_FUNC,t.EQUAL);break;case pi.LessEqual:t.texParameteri(this._target,t.TEXTURE_COMPARE_FUNC,t.LEQUAL);break;case pi.Greater:t.texParameteri(this._target,t.TEXTURE_COMPARE_FUNC,t.GREATER);break;case pi.NotEqual:t.texParameteri(this._target,t.TEXTURE_COMPARE_FUNC,t.NOTEQUAL);break;case pi.GreaterEqual:t.texParameteri(this._target,t.TEXTURE_COMPARE_FUNC,t.GEQUAL);break;case pi.Always:t.texParameteri(this._target,t.TEXTURE_COMPARE_FUNC,t.ALWAYS);break}}}]),n}(),B6=function(){function n(a,e){this._MSAAColorRenderBuffers=[],this._curMipLevel=0,this._curFaceIndex=void 0,this._gl=a.gl,this._isWebGL2=a.isWebGL2,this._target=e;for(var t=e._colorTextures,i=e._depth,o=e.width,s=e.height,l=$a(i,Eo),u=0,c=t.length;u<c;u++){var f=t[u]._format;if(!Nr._supportRenderBufferColorFormat(f,a))throw new Error("TextureFormat is not supported:"+ye[f]+" in RenderTarget")}if(!l&&!Nr._supportRenderBufferDepthFormat(i,a))throw new Error("TextureFormat is not supported:"+ye[i]+" in RenderTarget");if(t.length>1&&!a.canIUse(Ue.drawBuffers))throw new Error("MRT is not supported");if(t.some(function(h){return h.width!==o||h.height!==s}))throw new Error("ColorTexture's size must as same as RenderTarget");if(l&&(i.width!==o||i.height!==s))throw new Error("DepthTexture's size must as same as RenderTarget");if(t.length>1&&t.some(function(h){return $a(h,Ma)}))throw new Error("MRT+Cube+[,MSAA] is not supported");var d=a.capability.maxAntiAliasing;e.antiAliasing>d&&(Pt.warn("MSAA antiAliasing exceeds the limit and is automatically downgraded to:"+d),e._antiAliasing=d),this._frameBuffer=this._gl.createFramebuffer(),this._bindMainFBO(),e.antiAliasing>1&&(this._MSAAFrameBuffer=this._gl.createFramebuffer(),this._bindMSAAFBO())}var r=n.prototype;return r.activeRenderTarget=function(e,t){var i=this,o=i._gl,s=i._target;o.bindFramebuffer(o.FRAMEBUFFER,this._frameBuffer);var l=e!==this._curMipLevel,u=t!==this._curFaceIndex,c=s.getColorTexture(0);if(c){var f=$a(c,Ma);(l||f&&u)&&o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,f?o.TEXTURE_CUBE_MAP_POSITIVE_X+t:o.TEXTURE_2D,c._platformTexture._glTexture,e)}var d=s.depthTexture;if(d){var h=$a(d,Ma);if(l||h){var _=d._platformTexture;o.framebufferTexture2D(o.FRAMEBUFFER,_._formatDetail.attachment,h?o.TEXTURE_CUBE_MAP_POSITIVE_X+t:o.TEXTURE_2D,_._glTexture,e)}}else if(l){var p=Nr._getRenderBufferDepthFormatDetail(s._depth,o,this._isWebGL2).internalFormat;o.bindRenderbuffer(o.RENDERBUFFER,this._depthRenderBuffer),o.renderbufferStorage(o.RENDERBUFFER,p,s.width>>e,s.height>>e)}this._curMipLevel=e,this._curFaceIndex=t,this._MSAAFrameBuffer&&o.bindFramebuffer(o.FRAMEBUFFER,this._MSAAFrameBuffer)},r.blitRenderTarget=function(){if(!!this._MSAAFrameBuffer){var e=this._gl,t=e.COLOR_BUFFER_BIT|(this._target.depthTexture?e.DEPTH_BUFFER_BIT:0),i=this._target,o=i.colorTextureCount,s=i.width,l=i.height;e.bindFramebuffer(e.READ_FRAMEBUFFER,this._MSAAFrameBuffer),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,this._frameBuffer);for(var u=0;u<o;u++){var c=e.COLOR_ATTACHMENT0+u;this._blitDrawBuffers[u]=c,e.readBuffer(c),e.drawBuffers(this._blitDrawBuffers),e.blitFramebuffer(0,0,s,l,0,0,s,l,t,e.NEAREST),this._blitDrawBuffers[u]=e.NONE}e.bindFramebuffer(e.FRAMEBUFFER,null)}},r.destroy=function(){var e=this._gl;this._frameBuffer&&e.deleteFramebuffer(this._frameBuffer),this._depthRenderBuffer&&e.deleteRenderbuffer(this._depthRenderBuffer),this._MSAAFrameBuffer&&e.deleteFramebuffer(this._MSAAFrameBuffer),this._MSAADepthRenderBuffer&&e.deleteRenderbuffer(this._MSAADepthRenderBuffer);for(var t=0;t<this._MSAAColorRenderBuffers.length;t++)e.deleteRenderbuffer(this._MSAAColorRenderBuffers[t]);this._frameBuffer=null,this._depthRenderBuffer=null,this._MSAAFrameBuffer=null,this._MSAAColorRenderBuffers.length=0,this._MSAADepthRenderBuffer=null},r._bindMainFBO=function(){var e=this._gl,t=this._isWebGL2,i=this._target,o=i._depth,s=i.colorTextureCount,l=i.width,u=i.height,c=new Array(s);e.bindFramebuffer(e.FRAMEBUFFER,this._frameBuffer);for(var f=0;f<s;f++){var d=this._target.getColorTexture(f),h=e.COLOR_ATTACHMENT0+f;c[f]=h,$a(d,Ma)||e.framebufferTexture2D(e.FRAMEBUFFER,h,e.TEXTURE_2D,d._platformTexture._glTexture,0)}if(s>1&&e.drawBuffers(c),this._oriDrawBuffers=c,o!==null){if($a(o,Eo)&&!$a(o,Ma)){var _=o._platformTexture;e.framebufferTexture2D(e.FRAMEBUFFER,_._formatDetail.attachment,e.TEXTURE_2D,_._glTexture,0)}else if(this._target.antiAliasing<=1){var p=Nr._getRenderBufferDepthFormatDetail(o,e,t),v=p.internalFormat,y=p.attachment,m=e.createRenderbuffer();this._depthRenderBuffer=m,e.bindRenderbuffer(e.RENDERBUFFER,m),e.renderbufferStorage(e.RENDERBUFFER,v,l,u),e.framebufferRenderbuffer(e.FRAMEBUFFER,y,e.RENDERBUFFER,m)}}e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null)},r._bindMSAAFBO=function(){var e=this._gl,t=this._isWebGL2,i=e.createRenderbuffer(),o=this._target,s=o._depth,l=o.colorTextureCount,u=o.antiAliasing,c=o.width,f=o.height;this._blitDrawBuffers=new Array(l),this._MSAADepthRenderBuffer=i,e.bindFramebuffer(e.FRAMEBUFFER,this._MSAAFrameBuffer);for(var d=0;d<l;d++){var h=e.createRenderbuffer();this._MSAAColorRenderBuffers[d]=h,this._blitDrawBuffers[d]=e.NONE,e.bindRenderbuffer(e.RENDERBUFFER,h),e.renderbufferStorageMultisample(e.RENDERBUFFER,u,this._target.getColorTexture(d)._platformTexture._formatDetail.internalFormat,c,f),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+d,e.RENDERBUFFER,h)}if(e.drawBuffers(this._oriDrawBuffers),s!==null){var _=$a(s,Eo)?s._platformTexture._formatDetail:Nr._getRenderBufferDepthFormatDetail(s,e,t),p=_.internalFormat,v=_.attachment;e.bindRenderbuffer(e.RENDERBUFFER,i),e.renderbufferStorageMultisample(e.RENDERBUFFER,u,p,c,f),e.framebufferRenderbuffer(e.FRAMEBUFFER,v,e.RENDERBUFFER,i)}this._checkFrameBuffer(),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null)},r._checkFrameBuffer=function(){var e=this._gl,t=this._isWebGL2,i=e.checkFramebufferStatus(e.FRAMEBUFFER);switch(i){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:throw new Error("The attachment types are mismatched or not all framebuffer attachment points are framebuffer attachment complete");case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:throw new Error("There is no attachment");case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:throw new Error(" Height and width of the attachment are not the same.");case e.FRAMEBUFFER_UNSUPPORTED:throw new Error("The format of the attachment is not supported or if depth and stencil attachments are not the same renderbuffer")}if(t&&i===e.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE)throw new Error("The values of gl.RENDERBUFFER_SAMPLES are different among attached renderbuffers, or are non-zero if the attached images are a mix of renderbuffers and textures.")},n}(),k6=function(n){Hd(r,n);function r(e,t){var i;i=n.call(this,e,t,e.gl.TEXTURE_2D)||this,i._compressedMipFilled=0;var o=t.format,s=t._mipmap,l=t.width,u=t.height,c=i._isWebGL2;if(!Nr._supportTextureFormat(o,e))throw new Error("Texture format is not supported:"+ye[o]);return s&&!c&&(!Nr._isPowerOf2(l)||!Nr._isPowerOf2(u))&&(Pt.warn("non-power-2 texture is not supported for mipmap in WebGL1,and has automatically downgraded to non-mipmap"),t._mipmap=!1,t._mipmapCount=t._getMipmapCount()),i._formatDetail=Nr._getFormatDetail(o,i._gl,c),i._formatDetail.isCompressed&&!c||i._init(!1),i}var a=r.prototype;return a.setPixelBuffer=function(t,i,o,s,l,u){i===void 0&&(i=0);var c=this._gl,f=this._isWebGL2,d=this._formatDetail,h=d.internalFormat,_=d.baseFormat,p=d.dataType,v=d.isCompressed,y=Math.max(1,this._texture.width>>i),m=Math.max(1,this._texture.height>>i);if(l=l||y-o,u=u||m-s,this._bind(),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,0),c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),v){var g=1<<i;f||this._compressedMipFilled&g?c.compressedTexSubImage2D(this._target,i,o,s,l,u,h,t):(c.compressedTexImage2D(this._target,i,h,l,u,0,t),this._compressedMipFilled|=g)}else c.texSubImage2D(this._target,i,o,s,l,u,_,p,t)},a.setImageSource=function(t,i,o,s,l,u){var c=this._gl,f=this._formatDetail,d=f.internalFormat,h=f.baseFormat,_=f.dataType;this._bind(),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,+o),c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,+s),this._texture.usage===lc.Dynamic?c.texImage2D(this._target,i,d,h,_,t):c.texSubImage2D(this._target,i,l||0,u||0,h,_,t)},a.getPixelBuffer=function(t,i,o,s,l,u){if(this._formatDetail.isCompressed)throw new Error("Unable to read compressed texture");n.prototype._getPixelBuffer.call(this,null,t,i,o,s,l,u)},r}(Nr),V6=function(n){Hd(r,n);function r(e,t){var i;i=n.call(this,e,t,e.gl.TEXTURE_2D_ARRAY)||this;var o=t.format,s=t.width,l=t.height,u=t.length,c=t.mipmapCount;if(!i._isWebGL2)throw new Error("Texture2D Array is not supported in WebGL1.0");if(!Nr._supportTextureFormat(o,e))throw new Error("Texture format is not supported:"+ye[o]);return i._bind(),i._formatDetail=Nr._getFormatDetail(o,i._gl,!0),i._gl.texStorage3D(i._target,c,i._formatDetail.internalFormat,s,l,u),i}var a=r.prototype;return a.setPixelBuffer=function(t,i,o,s,l,u,c,f){var d=this,h=d._target,_=d._gl,p=this._formatDetail,v=p.internalFormat,y=p.baseFormat,m=p.dataType,g=p.isCompressed;u=u||Math.max(1,this._texture.width>>o)-s,c=c||Math.max(1,this._texture.height>>o)-l,f=f||this._texture.length,this._bind(),_.pixelStorei(_.UNPACK_FLIP_Y_WEBGL,0),_.pixelStorei(_.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),g?_.compressedTexSubImage3D(h,o,s,l,t,u,c,f,v,i):_.texSubImage3D(h,o,s,l,t,u,c,f,y,m,i)},a.setImageSource=function(t,i,o,s,l,u,c){var f=this._gl,d=this._formatDetail,h=d.baseFormat,_=d.dataType;this._bind(),f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,+s),f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,+l);var p,v;f.texSubImage3D(this._target,o,u,c,t,(p=i.width)!=null?p:i.codedWidth,(v=i.height)!=null?v:i.codedHeight,1,h,_,i)},a.getPixelBuffer=function(t,i,o,s,l,u,c){var f=this,d=f._gl,h=f._formatDetail;if(h.isCompressed)throw new Error("Unable to read compressed texture");d.bindFramebuffer(d.FRAMEBUFFER,this._getReadFrameBuffer()),d.framebufferTextureLayer(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,this._glTexture,u,t),d.readPixels(i,o,s,l,h.baseFormat,h.dataType,c),d.bindFramebuffer(d.FRAMEBUFFER,null)},r}(Nr),U6=function(n){Hd(r,n);function r(e,t){var i;i=n.call(this,e,t,e.gl.TEXTURE_CUBE_MAP)||this,i._compressedFaceFilled=[0,0,0,0,0,0];var o=t.format,s=t._mipmap,l=t.width,u=i._isWebGL2;if(!Nr._supportTextureFormat(o,e))throw new Error("Texture format is not supported:"+ye[o]);return s&&!u&&!Nr._isPowerOf2(l)&&(Pt.warn("non-power-2 texture is not supported for mipmap in WebGL1,and has automatically downgraded to non-mipmap"),t._mipmap=!1,t._mipmapCount=t._getMipmapCount()),i._formatDetail=Nr._getFormatDetail(o,i._gl,u),i._formatDetail.isCompressed&&!u||i._init(!0),i}var a=r.prototype;return a.setPixelBuffer=function(t,i,o,s,l,u,c){var f=this._gl,d=this._isWebGL2,h=this._formatDetail,_=h.internalFormat,p=h.baseFormat,v=h.dataType,y=h.isCompressed,m=Math.max(1,this._texture.width>>o);if(u=u||m-s,c=c||m-l,this._bind(),f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,0),f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),y){var g=1<<o;d||this._compressedFaceFilled[t]&g?f.compressedTexSubImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X+t,o,s,l,u,c,_,i):(f.compressedTexImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X+t,o,_,u,c,0,i),this._compressedFaceFilled[t]|=g)}else f.texSubImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X+t,o,s,l,u,c,p,v,i)},a.setImageSource=function(t,i,o,s,l,u,c){var f=this._gl,d=this._formatDetail,h=d.baseFormat,_=d.dataType;this._bind(),f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,+s),f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,+l),f.texSubImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X+t,o,u||0,c||0,h,_,i)},a.getPixelBuffer=function(t,i,o,s,l,u,c){if(this._formatDetail.isCompressed)throw new Error("Unable to read compressed texture");n.prototype._getPixelBuffer.call(this,t,i,o,s,l,u,c)},r}(Nr),dC;(function(n){n[n.Auto=0]="Auto",n[n.WebGL2=1]="WebGL2",n[n.WebGL1=2]="WebGL1"})(dC||(dC={}));var z6=function(){function n(a){a===void 0&&(a={}),this._readFrameBuffer=null,this._mainFrameBuffer=null,this._mainFrameWidth=0,this._mainFrameHeight=0,this._enableGlobalDepthBias=!1,this._activeTextures=new Array(32),this._lastViewport=new pt(null,null,null,null),this._lastScissor=new pt(null,null,null,null),this._lastClearColor=new Me(null,null,null,null),this._scissorEnable=!1;var e=lp({webGLMode:0,stencil:!0,_forceFlush:!1,_maxAllowSkinUniformVectorCount:256},a);if(To.platform===ca.IPhone||To.platform===ca.IPad){var t=To.operatingSystem.match(/(\d+).?(\d+)?.?(\d+)?/);if(t){var i=parseInt(t[1]),o=parseInt(t[2]);i===15&&o>=0&&o<=4&&(e._forceFlush=!0)}}this._options=e,this._onWebGLContextLost=this._onWebGLContextLost.bind(this),this._onWebGLContextRestored=this._onWebGLContextRestored.bind(this)}var r=n.prototype;return r.init=function(e,t,i){var o=this._options,s=e._webCanvas,l=o.webGLMode;this._onDeviceLost=t,this._onDeviceRestored=i,s.addEventListener("webglcontextlost",this._onWebGLContextLost,!1),s.addEventListener("webglcontextrestored",this._onWebGLContextRestored,!1),s.addEventListener("webglcontextcreationerror",this._onContextCreationError,!1),this._webCanvas=s;var u;if((l==0||l==1)&&(u=s.getContext("webgl2",o),!u&&(typeof OffscreenCanvas=="undefined"||!$a(s,OffscreenCanvas))&&(u=s.getContext("experimental-webgl2",o)),this._isWebGL2=!0,u&&!u.deleteQuery&&(this._isWebGL2=!1)),u||(l==0||l==2)&&(u=s.getContext("webgl",o),!u&&(typeof OffscreenCanvas=="undefined"||!$a(s,OffscreenCanvas))&&(u=s.getContext("experimental-webgl",o)),this._isWebGL2=!1),!u)throw new Error("Get GL Context FAILED.");this._gl=u,this._initGLState(u)},r.createPlatformPrimitive=function(e){return new F6(this,e)},r.createPlatformTexture2D=function(e){return new k6(this,e)},r.createPlatformTexture2DArray=function(e){return new V6(this,e)},r.createPlatformTextureCube=function(e){return new U6(this,e)},r.createPlatformRenderTarget=function(e){return new B6(this,e)},r.createPlatformBuffer=function(e,t,i,o){return i===void 0&&(i=Dn.Static),new I6(this,e,t,i,o)},r.requireExtension=function(e){return this._extensions.requireExtension(e)},r.canIUse=function(e){return this.capability.canIUse(e)},r.canIUseCompressedTextureInternalFormat=function(e){return this.capability.canIUseCompressedTextureInternalFormat(e)},r.viewport=function(e,t,i,o){var s=this,l=s._gl,u=s._lastViewport;(e!==u.x||t!==u.y||i!==u.z||o!==u.w)&&(l.viewport(e,t,i,o),u.set(e,t,i,o))},r.scissor=function(e,t,i,o){var s=this,l=s._gl,u=s._lastScissor;if(e!==u.x||t!==u.y||i!==u.z||o!==u.w){var c=this,f=c._webCanvas;e===0&&t===0&&i===f.width&&o===f.height?this._scissorEnable&&(l.disable(l.SCISSOR_TEST),this._scissorEnable=!1):(this._scissorEnable||(l.enable(l.SCISSOR_TEST),this._scissorEnable=!0),l.scissor(e,t,i,o)),u.set(e,t,i,o)}},r.colorMask=function(e,t,i,o){this._gl.colorMask(e,t,i,o)},r.clearRenderTarget=function(e,t,i){var o=this._gl,s=e._lastRenderState,l=s.blendState.targetBlendState,u=s.depthState,c=s.stencilState,f=0;if(t&Qr.Color){f|=o.COLOR_BUFFER_BIT;var d=this._lastClearColor,h=i.r,_=i.g,p=i.b,v=i.a;i&&(h!==d.r||_!==d.g||p!==d.b||v!==d.a)&&(o.clearColor(h,_,p,v),d.set(h,_,p,v)),l.colorWriteMask!==Si.All&&(o.colorMask(!0,!0,!0,!0),l.colorWriteMask=Si.All)}t&Qr.Depth&&(f|=o.DEPTH_BUFFER_BIT,u.writeEnabled!==!0&&(o.depthMask(!0),u.writeEnabled=!0)),t&Qr.Stencil&&(f|=o.STENCIL_BUFFER_BIT,c.writeMask!==255&&(o.stencilMask(255),c.writeMask=255)),o.clear(f)},r.drawPrimitive=function(e,t,i){e?e.draw(i,t):Pt.error("draw primitive failed.")},r.getMainFrameBufferWidth=function(){return this._mainFrameWidth||this._gl.drawingBufferWidth},r.getMainFrameBufferHeight=function(){return this._mainFrameHeight||this._gl.drawingBufferHeight},r.activeRenderTarget=function(e,t,i,o,s){var l,u;if(e){e._isContentLost=!1;var c=e._platformRenderTarget;c.activeRenderTarget(o,s),l=e.width>>o,u=e.height>>o}else{var f=this._gl;f.bindFramebuffer(f.FRAMEBUFFER,this._mainFrameBuffer),l=this.getMainFrameBufferWidth(),u=this.getMainFrameBufferHeight()}var d=l*t.z,h=u*t.w,_=t.x*l,p=i?t.y*u:u-t.y*u-h;this.viewport(_,p,d,h),this.scissor(_,p,d,h)},r.activeTexture=function(e){this._activeTextureID!==e&&(this._gl.activeTexture(e),this._activeTextureID=e)},r.bindTexture=function(e){var t=this._activeTextureID-this._gl.TEXTURE0;this._activeTextures[t]!==e&&(this._gl.bindTexture(e._target,e._glTexture),this._activeTextures[t]=e)},r.setGlobalDepthBias=function(e,t){var i=this._gl,o=e!==0||t!==0;o?(i.enable(i.POLYGON_OFFSET_FILL),i.polygonOffset(t,e)):i.disable(i.POLYGON_OFFSET_FILL),this._enableGlobalDepthBias=o},r.flush=function(){this._gl.flush()},r.forceLoseDevice=function(){var e=this.requireExtension(Ue.WEBGL_lose_context);e.loseContext()},r.forceRestoreDevice=function(){var e=this.requireExtension(Ue.WEBGL_lose_context);e.restoreContext()},r.resetState=function(){this._readFrameBuffer=null,this._enableGlobalDepthBias=!1,this._currentBindShaderProgram=null;for(var e=this._activeTextures,t=0,i=e.length;t<i;t++)e[t]=null;this._lastViewport.set(null,null,null,null),this._lastScissor.set(null,null,null,null),this._lastClearColor.set(null,null,null,null),this._scissorEnable=!1,this._initGLState(this._gl)},r._initGLState=function(e){this._activeTextureID=e.TEXTURE0,this._renderStates=new D6(e),this._extensions=new N6(this),this._capability=new L6(this),e.activeTexture(e.TEXTURE0);var t=e.getExtension("WEBGL_debug_renderer_info");t!=null&&(this._renderer=e.getParameter(t.UNMASKED_RENDERER_WEBGL))},r.destroy=function(){var e=this._webCanvas;e.removeEventListener("webglcontextcreationerror",this._onContextCreationError,!1),e.removeEventListener("webglcontextlost",this._onWebGLContextLost,!1),e.removeEventListener("webglcontextrestored",this._onWebGLContextRestored,!1)},r._onContextCreationError=function(e){console.error("WebGLRenderer: WebGL context could not be created. Reason: ",e.statusMessage)},r._onWebGLContextLost=function(e){e.preventDefault(),this._onDeviceLost()},r._onWebGLContextRestored=function(e){this._onDeviceRestored()},Gd(n,[{key:"isWebGL2",get:function(){return this._isWebGL2}},{key:"renderer",get:function(){return this._renderer}},{key:"gl",get:function(){return this._gl}},{key:"renderStates",get:function(){return this._renderStates}},{key:"capability",get:function(){return this._capability}},{key:"canIUseMoreJoints",get:function(){return this.capability.canIUseMoreJoints}}]),n}();function ra(){return ra=Object.assign||function(r){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}return r},ra.apply(this,arguments)}function up(n,r){return up=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},up(n,r)}function gt(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&up(n,r)}function Tt(n,r,a,e){var t=arguments.length,i=t<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,a):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,r,a,e);else for(var s=n.length-1;s>=0;s--)(o=n[s])&&(i=(t<3?o(i):t>3?o(r,a,i):o(r,a))||i);return t>3&&i&&Object.defineProperty(r,a,i),i}function v_(n,r){var a={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,t,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(e)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(e=1,t&&(i=u[0]&2?t.return:u[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,u[1])).done)return i;switch(t=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,t=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){a=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){a.label=u[1];break}if(u[0]===6&&a.label<i[1]){a.label=i[1],i=u;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(u);break}i[2]&&a.ops.pop(),a.trys.pop();continue}u=r.call(n,a)}catch(c){u=[6,c],t=0}finally{e=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function hC(n,r){for(var a=0;a<r.length;a++){var e=r[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function p_(n,r,a){return r&&hC(n.prototype,r),a&&hC(n,a),n}var gu=function(){function n(a,e,t,i){e===void 0&&(e=0),i===void 0&&(i=!0),this.data=a,this._dataView=new DataView(a.buffer,a.byteOffset+e,t!=null?t:a.byteLength-e),this._littleEndian=i,this._position=0,this._baseOffset=e}var r=n.prototype;return r.nextUint8=function(){var e=this._dataView.getUint8(this._position);return this._position+=1,e},r.nextUint16=function(){var e=this._dataView.getUint16(this._position,this._littleEndian);return this._position+=2,e},r.nextUint32=function(){var e=this._dataView.getUint32(this._position,this._littleEndian);return this._position+=4,e},r.nextInt32=function(){var e=this._dataView.getInt32(this._position,this._littleEndian);return this._position+=4,e},r.nextInt32Array=function(e){var t=new Int32Array(this.data.buffer,this._position+this._dataView.byteOffset,e);return this._position+=4*e,t},r.nextFloat32=function(){var e=this._dataView.getFloat32(this._position,this._littleEndian);return this._position+=4,e},r.nextFloat32Array=function(e){var t=new Float32Array(this.data.buffer,this._position+this._dataView.byteOffset,e);return this._position+=4*e,t},r.nextUint32Array=function(e){var t=new Uint32Array(this.data.buffer,this._position+this._dataView.byteOffset,e);return this._position+=4*e,t},r.nextUint8Array=function(e){var t=new Uint8Array(this.data.buffer,this._position+this._dataView.byteOffset,e);return this._position+=e,t},r.nextUint64=function(){var e=this._dataView.getUint32(this._position,this._littleEndian),t=this._dataView.getUint32(this._position+4,this._littleEndian),i=e+Math.pow(2,32)*t;return this._position+=8,i},r.nextStr=function(){var e=this.nextUint16(),t=new Uint8Array(this.data.buffer,this._position+this._dataView.byteOffset,e);return this._position+=e,Mn.decodeText(t)},r.nextImageData=function(e){return new Uint8Array(this.data.buffer,this.data.byteOffset+this._position)},r.nextImagesData=function(e){for(var t=new Array(e),i=0;i<e;i++){var o=this._dataView.getUint32(this._position,this._littleEndian);t[i]=o,this._position+=4}for(var s=[],l=0;l<e;l++){var u=t[l],c=new Uint8Array(this.data.buffer,this._dataView.byteOffset+this._position,u);this._position+=u,s.push(c)}return s},r.skip=function(e){return this._position+=e,this},r.scan=function(e,t){t===void 0&&(t=0);for(var i=this._position,o=0;this._dataView.getUint8(this._position)!==t&&o<e;)o++,this._position++;return o<e&&this._position++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+i,o)},p_(n,[{key:"position",get:function(){return this._position}},{key:"offset",get:function(){return this._position+this._baseOffset}}]),n}(),VP={};function Px(n){return function(r){VP[n]=r}}var G6=function(){function n(){this.totalLength=0,this.version=0,this.type="",this.name="",this.headerLength=0}return n.decode=function(a){var e=new DataView(a),t=e.getUint32(0,!0),i=e.getUint8(4),o=e.getUint16(5,!0),s=new Uint8Array(a,7,o),l=e.getUint16(7+o,!0),u=new Uint8Array(a,9+o,l),c=Mn.decodeText(u),f=Mn.decodeText(s),d=new n;return d.totalLength=t,d.name=c,d.type=f,d.version=i,d.headerLength=u.byteLength+s.byteLength+9,d},p_(n,[{key:"dataLength",get:function(){return this.totalLength-this.headerLength}}]),n}(),vC=function(){function n(){}return n.decode=function(a,e){return new Promise(function(t){var i=new Kn(a),o=e.nextStr(),s=JSON.parse(o);s.bounds&&i.bounds.copyFrom(s.bounds);var l=Math.ceil(e.offset/4)*4+e.data.byteOffset,u=e.data.buffer,c=new Float32Array(u,s.positions.start+l,(s.positions.end-s.positions.start)/4),f=c.length/3,d=Lh(c,f);if(i.setPositions(d),s.normals){var h=new Float32Array(u,s.normals.start+l,(s.normals.end-s.normals.start)/4),_=Lh(h,f);i.setNormals(_)}if(s.uvs){var p=new Float32Array(u,s.uvs.start+l,(s.uvs.end-s.uvs.start)/4);i.setUVs(As(p,f))}if(s.uv1){var v=new Float32Array(u,s.uv1.start+l,(s.uv1.end-s.uv1.start)/4);i.setUVs(As(v,f),1)}if(s.uv2){var y=new Float32Array(u,s.uv2.start+l,(s.uv2.end-s.uv2.start)/4);i.setUVs(As(y,f),2)}if(s.uv3){var m=new Float32Array(u,s.uv3.start+l,(s.uv3.end-s.uv3.start)/4);i.setUVs(As(m,f),3)}if(s.uv4){var g=new Float32Array(u,s.uv4.start+l,(s.uv4.end-s.uv4.start)/4);i.setUVs(As(g,f),4)}if(s.uv5){var x=new Float32Array(u,s.uv5.start+l,(s.uv5.end-s.uv5.start)/4);i.setUVs(As(x,f),5)}if(s.uv6){var b=new Float32Array(u,s.uv6.start+l,(s.uv6.end-s.uv6.start)/4);i.setUVs(As(b,f),6)}if(s.uv7){var S=new Float32Array(u,s.uv7.start+l,(s.uv7.end-s.uv7.start)/4);i.setUVs(As(S,f),7)}if(s.colors){var C=new Float32Array(u,s.colors.start+l,(s.colors.end-s.colors.start)/4);i.setColors(H6(C,f))}if(s.boneWeights){var E=new Float32Array(u,s.boneWeights.start+l,(s.boneWeights.end-s.boneWeights.start)/4);i.setBoneWeights(vg(E,f))}if(s.boneIndices){var T=new Float32Array(u,s.boneIndices.start+l,(s.boneIndices.end-s.boneIndices.start)/4);i.setBoneIndices(vg(T,f))}if(s.blendShapes&&s.blendShapes.forEach(function(L){var F=new gx(L.name);L.frames.forEach(function(N){var I=new Float32Array(u,N.deltaPosition.start+l,(N.deltaPosition.end-N.deltaPosition.start)/4),O=I.length/3,P=Lh(I,O);if(N.deltaNormals){var R=new Float32Array(u,N.deltaNormals.start+l,(N.deltaNormals.end-N.deltaNormals.start)/4);Lh(R,O)}if(N.deltaTangents){var A=new Float32Array(u,N.deltaTangents.start+l,(N.deltaTangents.end-N.deltaTangents.start)/4);vg(A,O)}F.addFrame(N.weight,P)}),i.addBlendShape(F)}),s.indices){var M=null;s.indices.type===0?M=new Uint16Array(u,s.indices.start+l,(s.indices.end-s.indices.start)/2):M=new Uint32Array(u,s.indices.start+l,(s.indices.end-s.indices.start)/4),i.setIndices(M)}s.subMeshes.forEach(function(L){return i.addSubMesh(L)}),i.uploadData(!1),t(i)})},n}();vC=Tt([Px("Mesh")],vC);function H6(n,r){for(var a=new Array(r),e=0;e<r;e++)a[e]=new Me(n[e*4],n[e*4+1],n[e*4+2],n[e*4+3]);return a}function vg(n,r){for(var a=new Array(r),e=0;e<r;e++)a[e]=new pt(n[e*4],n[e*4+1],n[e*4+2],n[e*4+3]);return a}function Lh(n,r){for(var a=new Array(r),e=0;e<r;e++)a[e]=new z(n[e*3],n[e*3+1],n[e*3+2]);return a}function As(n,r){for(var a=new Array(r),e=0;e<r;e++)a[e]=new Ze(n[e*2],n[e*2+1]);return a}var pC=function(){function n(){}return n.decode=function(a,e){return new Promise(function(t,i){var o=e.nextStr(),s=!!e.nextUint8(),l=e.nextUint8(),u=e.nextUint8(),c=e.nextUint8(),f=e.nextUint8(),d=e.nextUint8(),h=e.nextUint16(),_=e.nextUint16(),p=e.nextUint8(),v=e.nextUint8(),y=e.nextImagesData(v),m=new br(a,h,_,d,s);if(m.filterMode=l,m.anisoLevel=u,m.wrapModeU=c,m.wrapModeV=f,p){var g=y[0];if(m.setPixelBuffer(g),s){m.generateMipmaps();for(var x=1;x<v;x++){var b=y[x];m.setPixelBuffer(b,x)}}a.resourceManager._objectPool[o]=m,t(m)}else{var S=new window.Blob([y[0]]),C=new Image;C.onload=function(){m.setImageSource(C);var E=0,T=function(){E++,E>=v&&t(m)};if(T(),s){var M=function(F){var N=new window.Blob([y[F]]),I=new Image;I.onload=function(){m.setImageSource(I,F),T()},I.src=URL.createObjectURL(N)};m.generateMipmaps();for(var L=1;L<v;L++)M(L)}},C.src=URL.createObjectURL(S)}})},n}();pC=Tt([Px("Texture2D")],pC);function j6(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function rv(n,r,a){return j6()?rv=Reflect.construct:rv=function(t,i,o){var s=[null];s.push.apply(s,i);var l=Function.bind.apply(t,s),u=new l;return o&&up(u,o.prototype),u},rv.apply(null,arguments)}var Mx=function(){function n(a){this._context=a}var r=n.prototype;return r.parseEntity=function(e){return this._getEntityByConfig(e).then(function(t){var i;t.isActive=(i=e.isActive)!=null?i:!0;var o=e.position,s=e.rotation,l=e.scale;o&&t.transform.position.copyFrom(o),s&&t.transform.rotation.copyFrom(s),l&&t.transform.scale.copyFrom(l);var u;return t.layer=(u=e.layer)!=null?u:t.layer,t})},r.parseClassObject=function(e){var t=this,i=ln.getClass(e.class),o,s=(o=e.constructParams)!=null?o:[];return Promise.all(s.map(function(l){return t.parseBasicType(l)})).then(function(l){return rv(i,[].concat(l))}).then(function(l){return t.parsePropsAndMethods(l,e)})},r.parsePropsAndMethods=function(e,t){var i=[];if(t.methods)for(var o in t.methods)for(var s=t.methods[o],l=0,u=s.length;l<u;l++)i.push(this.parseMethod(e,o,s[l]));if(t.props){var c=this,f=function(h){var _=t.props[h],p=c.parseBasicType(_,e[h]).then(function(v){return e[h]=v});i.push(p)};for(var d in t.props)f(d)}return Promise.all(i).then(function(){var h=n.customParseComponentHandles[e.constructor.name];return h?h(e,t):e})},r.parseMethod=function(e,t,i){var o=this;return Promise.all(i.map(function(s){return o.parseBasicType(s)})).then(function(s){var l;return(l=e)[t].apply(l,[].concat(s))})},r.parseBasicType=function(e,t){var i=this;if(Array.isArray(e))return Promise.all(e.map(function(c){return i.parseBasicType(c)}));if(typeof e=="object"&&e!=null){if(n._isClass(e))return this.parseClassObject(e);if(n._isAssetRef(e))return this._context.resourceManager.getResourceByRef(e);if(n._isEntityRef(e))return Promise.resolve(this._context.entityMap.get(e.entityId));if(t){var o=this,s=function(c){if(c==="methods"){var f=e[c];for(var d in f)for(var h=f[d],_=0,p=h.length;_<p;_++){var v=h[_],y=o.parseMethod(t,d,v);l.push(y)}}else l.push(o.parseBasicType(e[c],t[c]).then(function(m){return t[c]=m}))},l=[];for(var u in e)s(u);return Promise.all(l).then(function(){return t})}}return Promise.resolve(e)},r._getEntityByConfig=function(e){var t=e.assetRefId,i=this._context.engine;if(t)return i.resourceManager.getResourceByRef({refId:t,key:e.key,isClone:e.isClone}).then(function(s){return s.name=e.name,s});var o=new yo(i,e.name);return Promise.resolve(o)},n.registerCustomParseComponent=function(e,t){this.customParseComponentHandles[e]=t},n._isClass=function(e){return e.class!=null},n._isAssetRef=function(e){return e.refId!=null},n._isEntityRef=function(e){return e.entityId!=null},n}();(function(){Mx.customParseComponentHandles=new Map})();var UP=function(){function n(a,e,t){this.originalData=a,this.engine=e,this.target=t,this.entityMap=new Map,this.components=new Map,this.assets=new Map,this.entityConfigMap=new Map,this.rootIds=[],this.strippedIds=[],this.resourceManager=e.resourceManager}var r=n.prototype;return r.destroy=function(){this.entityMap.clear(),this.components.clear(),this.assets.clear(),this.entityConfigMap.clear(),this.rootIds.length=0},n}();function _C(n,r){(r==null||r>n.length)&&(r=n.length);for(var a=0,e=new Array(r);a<r;a++)e[a]=n[a];return e}function W6(n,r){if(!!n){if(typeof n=="string")return _C(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(a);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _C(n,r)}}function ju(n,r){var a=typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a)return(a=a.call(n)).next.bind(a);if(Array.isArray(n)||(a=W6(n))||r&&n&&typeof n.length=="number"){a&&(n=a);var e=0;return function(){return e>=n.length?{done:!0}:{done:!1,value:n[e++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var $6=function(){function n(a){var e=this;this.context=a,this.prefabContextMap=new WeakMap,this.prefabPromiseMap=new Map,this._engine=this.context.engine,this._organizeEntities=this._organizeEntities.bind(this),this._parseComponents=this._parseComponents.bind(this),this._parsePrefabModification=this._parsePrefabModification.bind(this),this._parsePrefabRemovedEntities=this._parsePrefabRemovedEntities.bind(this),this._parsePrefabRemovedComponents=this._parsePrefabRemovedComponents.bind(this),this._clearAndResolve=this._clearAndResolve.bind(this),this.promise=new Promise(function(t,i){e._reject=i,e._resolve=t}),this._reflectionParser=new Mx(a)}var r=n.prototype;return r.start=function(){this._parseEntities().then(this._organizeEntities).then(this._parseComponents).then(this._parsePrefabModification).then(this._parsePrefabRemovedEntities).then(this._parsePrefabRemovedComponents).then(this._clearAndResolve).then(this._resolve).catch(this._reject)},r._parseEntities=function(){var e=this,t=this.context.originalData.entities,i=this.context.entityConfigMap,o=this.context.entityMap,s=this._engine,l=t.map(function(u){var c,f=(c=u.strippedId)!=null?c:u.id;return u.id=f,i.set(f,u),e._getEntityByConfig(u,s)});return Promise.all(l).then(function(u){for(var c=0,f=u.length;c<f;c++)o.set(t[c].id,u[c]);return u})},r._parseComponents=function(){for(var e=this.context.originalData.entities,t=this.context.entityMap,i=this.context.components,o=[],s=0,l=e.length;s<l;s++)for(var u=e[s],c=t.get(u.id),f=0;f<u.components.length;f++){var d=u.components[f],h=d.refId?d.refId:d.class,_=c.addComponent(ln.getClass(h));i.set(d.id,_);var p=this._reflectionParser.parsePropsAndMethods(_,d);o.push(p)}return Promise.all(o)},r._parsePrefabModification=function(){for(var e=function(c,f){var d,h=i[c],_=h.id,p=h.modifications;if((d=p)!=null&&d.length){var v,y=o.get(_);(v=s).push.apply(v,[].concat(p.map(function(m){var g=m.target,x=m.props,b=m.methods,S=g.entityId,C=g.componentId,E=t.prefabContextMap.get(y),T=E.entityMap.get(S),M=E.components.get(C);if(M)return t._reflectionParser.parsePropsAndMethods(M,{props:x,methods:b});if(T)return Promise.resolve(t._applyEntityData(T,x))})))}},t=this,i=this.context.originalData.entities,o=this.context.entityMap,s=[],l=0,u=i.length;l<u;l++)e(l);return Promise.all(s)},r._parsePrefabRemovedEntities=function(){for(var e=function(c,f){var d,h=i[c],_=h.id,p=h.removedEntities;if((d=p)!=null&&d.length){var v,y=o.get(_);(v=s).push.apply(v,[].concat(p.map(function(m){var g=m.entityId,x=t.prefabContextMap.get(y),b=x.entityMap.get(g);b&&b.destroy()})))}},t=this,i=this.context.originalData.entities,o=this.context.entityMap,s=[],l=0,u=i.length;l<u;l++)e(l);return Promise.all(s)},r._parsePrefabRemovedComponents=function(){for(var e=function(c,f){var d,h=i[c],_=h.id,p=h.removedComponents;if((d=p)!=null&&d.length){var v,y=o.get(_);(v=s).concat.apply(v,[].concat(p.map(function(m){var g=m.componentId,x=t.prefabContextMap.get(y),b=x.components.get(g);b&&b.destroy()})))}},t=this,i=this.context.originalData.entities,o=this.context.entityMap,s=[],l=0,u=i.length;l<u;l++)e(l);return Promise.all(s)},r._clearAndResolve=function(){var e=this.context.target;return e},r._organizeEntities=function(){for(var e=this.context,t=e.rootIds,i=e.strippedIds,o=t.concat(i),s=ju(o),l;!(l=s()).done;){var u=l.value;this._parseChildren(u)}for(var c=0;c<t.length;c++)this.handleRootEntity(t[c])},r._getEntityByConfig=function(e,t){var i=this,o;return e.assetRefId?o=this._parseGLTF(e,t):e.strippedId?o=this._parseStrippedEntity(e):o=this._parseEntity(e,t),o.then(function(s){return i._applyEntityData(s,e)})},r._parseEntity=function(e,t){var i=new yo(t,e.name);return e.parent||this.context.rootIds.push(e.id),Promise.resolve(i)},r._parseGLTF=function(e,t){var i=this,o=e.assetRefId,s=new UP(null,t);return t.resourceManager.getResourceByRef({refId:o}).then(function(l){var u=l.instantiateSceneRoot();e.parent||i.context.rootIds.push(e.id),i._traverseAddEntityToMap(u,s,""),i.prefabContextMap.set(u,s);var c=i.prefabPromiseMap.get(e.id);return c&&c.forEach(function(f){f.resolve(s)}),u})},r._parseStrippedEntity=function(e){var t=this;return this.context.strippedIds.push(e.id),new Promise(function(i,o){var s,l=(s=t.prefabPromiseMap.get(e.prefabInstanceId))!=null?s:[];l.push({resolve:i,reject:o}),t.prefabPromiseMap.set(e.prefabInstanceId,l)}).then(function(i){var o=e.prefabSource.entityId;return i.entityMap.get(o)})},r._parseChildren=function(e){var t=this.context,i=t.entityConfigMap,o=t.entityMap,s=i.get(e).children;if(s&&s.length>0)for(var l=o.get(e),u=0;u<s.length;u++){var c=s[u],f=o.get(c);l.addChild(f),this._parseChildren(c)}},r._applyEntityData=function(e,t){t===void 0&&(t={});var i;e.isActive=(i=t.isActive)!=null?i:e.isActive;var o;e.name=(o=t.name)!=null?o:e.name;var s=t.position,l=t.rotation,u=t.scale,c=t.layer;return s&&e.transform.position.copyFrom(s),l&&e.transform.rotation.copyFrom(l),u&&e.transform.scale.copyFrom(u),c&&(e.layer=c),e},r._traverseAddEntityToMap=function(e,t,i){var o=t.entityMap,s=t.components,l={},u={};o.set(i,e),e._components.forEach(function(_){var p=ln.getClassName(_.constructor);l[p]||(l[p]=e.getComponents(_.constructor,[]),u[p]=0),s.set(i+":"+p+"/"+u[p]++,_)});for(var c=0,f=e.children.length;c<f;c++){var d=e.children[c],h=i?i+"/"+c:""+c;this._traverseAddEntityToMap(d,t,h)}},n}(),gC;(function(n){n[n.Float=0]="Float",n[n.FloatArray=1]="FloatArray",n[n.Vector2=2]="Vector2",n[n.Vector3=3]="Vector3",n[n.Vector4=4]="Vector4",n[n.Quaternion=5]="Quaternion",n[n.Color=6]="Color",n[n.Array=7]="Array",n[n.Boolean=8]="Boolean",n[n.Rect=9]="Rect",n[n.ReferResource=10]="ReferResource"})(gC||(gC={}));var mC=function(){function n(){}return n.decode=function(a,e){return new Promise(function(t){for(var i=e.nextStr(),o=new Cx(i),s=e.nextUint16(),l=0;l<s;++l){var u=new h_;u.time=e.nextFloat32(),u.functionName=e.nextStr(),u.parameter=JSON.parse(e.nextStr()).val,o.addEvent(u)}for(var c=e.nextUint16(),f=0;f<c;++f){var d=e.nextStr(),h=e.nextStr(),_=ln.getClass(h),p=e.nextStr(),v=e.nextStr(),y=void 0,m=e.nextUint8(),g=e.nextUint16(),x=e.nextStr();switch(x){case"AnimationFloatCurve":{y=new tp,y.interpolation=m;for(var b=0;b<g;++b){var S=new ua;S.time=e.nextFloat32(),S.value=e.nextFloat32(),S.inTangent=e.nextFloat32(),S.outTangent=e.nextFloat32(),y.addKey(S)}break}case"AnimationArrayCurve":{y=new Jv,y.interpolation=m;for(var C=0;C<g;++C){var E=new ua;E.time=e.nextFloat32();var T=e.nextUint16();E.value=Array.from(e.nextFloat32Array(T)),E.inTangent=Array.from(e.nextFloat32Array(T)),E.outTangent=Array.from(e.nextFloat32Array(T)),y.addKey(E)}break}case"AnimationFloatArrayCurve":{y=new hd,y.interpolation=m;for(var M=0;M<g;++M){var L=new ua;L.time=e.nextFloat32();var F=e.nextUint16();L.value=e.nextFloat32Array(F),L.inTangent=Array.from(e.nextFloat32Array(F)),L.outTangent=Array.from(e.nextFloat32Array(F)),y.addKey(L)}break}case"AnimationVector2Curve":{y=new np,y.interpolation=m;for(var N=0;N<g;++N){var I=new ua;I.time=e.nextFloat32(),I.value=new Ze(e.nextFloat32(),e.nextFloat32()),I.inTangent=new Ze(e.nextFloat32(),e.nextFloat32()),I.outTangent=new Ze(e.nextFloat32(),e.nextFloat32()),y.addKey(I)}break}case"AnimationVector3Curve":{y=new vd,y.interpolation=m;for(var O=0;O<g;++O){var P=new ua;P.time=e.nextFloat32(),P.value=new z(e.nextFloat32(),e.nextFloat32(),e.nextFloat32()),P.inTangent=new z(e.nextFloat32(),e.nextFloat32(),e.nextFloat32()),P.outTangent=new z(e.nextFloat32(),e.nextFloat32(),e.nextFloat32()),y.addKey(P)}break}case"AnimationVector4Curve":{y=new rp,y.interpolation=m;var R=new ua;R.time=e.nextFloat32(),R.value=new pt(e.nextFloat32(),e.nextFloat32(),e.nextFloat32(),e.nextFloat32()),R.inTangent=new pt(e.nextFloat32(),e.nextFloat32(),e.nextFloat32(),e.nextFloat32()),R.outTangent=new pt(e.nextFloat32(),e.nextFloat32(),e.nextFloat32(),e.nextFloat32()),y.addKey(R);break}case"AnimationColorCurve":{y=new ep,y.interpolation=m;for(var A=0;A<g;++A){var D=new ua;D.time=e.nextFloat32(),D.value=new Me(e.nextFloat32(),e.nextFloat32(),e.nextFloat32(),e.nextFloat32()),D.inTangent=new pt(e.nextFloat32(),e.nextFloat32(),e.nextFloat32(),e.nextFloat32()),D.outTangent=new pt(e.nextFloat32(),e.nextFloat32(),e.nextFloat32(),e.nextFloat32()),y.addKey(D)}break}case"AnimationQuaternionCurve":{y=new hc,y.interpolation=m;for(var B=0;B<g;++B){var k=new ua;k.time=e.nextFloat32(),k.value=new Ut(e.nextFloat32(),e.nextFloat32(),e.nextFloat32(),e.nextFloat32()),k.inTangent=new pt(e.nextFloat32(),e.nextFloat32(),e.nextFloat32(),e.nextFloat32()),k.outTangent=new pt(e.nextFloat32(),e.nextFloat32(),e.nextFloat32(),e.nextFloat32()),y.addKey(k)}break}case"AnimationRefCurve":{y=new ap,y.interpolation=m;for(var V=0;V<g;++V){var U=new ua;U.time=e.nextFloat32();var j=e.nextStr();j?U.value=JSON.parse(j):U.value=null,y.addKey(U)}break}case"AnimationBoolCurve":{y=new Zv,y.interpolation=m;for(var G=0;G<g;++G){var $=new ua;$.time=e.nextFloat32(),$.value=e.nextUint8()===1,y.addKey($)}break}case"AnimationStringCurve":{y=new ip,y.interpolation=m;for(var W=0;W<g;++W){var K=new ua;K.time=e.nextFloat32(),K.value=e.nextStr(),y.addKey(K)}break}}o.addCurveBinding(d,_,p,v,y)}t(o)})},n}();mC=Tt([Px("AnimationClip")],mC);var v0;(function(n){n.Sky="Sky",n.Custom="Custom"})(v0||(v0={}));var X6=function(n){gt(r,n);function r(a,e,t){var i;return i=n.call(this,a,e,t)||this,i.originalData=a,i.engine=e,i.scene=t,i}return r}(UP),K6=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.handleRootEntity=function(t){var i=this.context,o=i.target,s=i.entityMap;o.addRootEntity(s.get(t))},r.parse=function(t,i){var o=new Vd(t),s=new X6(i,t,o),l=new r(s);return l.start(),l.promise},r}($6),yC=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.load=function(t,i){var o=this;return new sn(function(s,l){o.request(t.url,{type:"arraybuffer"}).then(function(u){__(u,i.engine).then(function(c){s(c)})}).catch(l)})},r}(ln);yC=Tt([kn("Mesh",["prefab"],!0)],yC);var xC=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.load=function(t,i){var o=this;return new sn(function(s,l){o.request(t.url,{type:"arraybuffer"}).then(function(u){__(u,i.engine).then(function(c){s(c)})}).catch(l)})},r}(ln);xC=Tt([kn("EditorTexture2D",["prefab"],!0)],xC);function __(n,r){var a=G6.decode(n),e=new gu(new Uint8Array(n),a.headerLength,a.dataLength);return VP[a.type].decode(r,e).then(function(t){return t.name=a.name,t})}var SC=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.load=function(t,i){var o=this;return new sn(function(s,l){o.request(t.url,ra({},t,{type:"arraybuffer"})).then(function(u){return __(u,i.engine).then(function(c){var f=c.curveBindings.map(function(d){var h=d.curve,_=h.keys.map(function(p){return o._parseKeyframeValue(p,i).then(function(v){p.value=v})});return Promise.all(_)});return Promise.all(f).then(function(){s(c)})}).catch(l)}).catch(l)})},a._parseKeyframeValue=function(t,i){var o,s=t.value;return typeof s=="object"&&((o=s)==null?void 0:o.refId)?new Promise(function(l){i.getResourceByRef(s).then(function(u){t.value=u,l(t.value)})}):Promise.resolve(t.value)},r}(ln);SC=Tt([kn(vn.AnimationClip,["ani"])],SC);var bC=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.load=function(t,i){var o=this;return new sn(function(s,l){o.request(t.url,ra({},t,{type:"json"})).then(function(u){var c=new Tx,f=u.layers,d=[];f.forEach(function(h,_){var p=h.name,v=h.blendingMode,y=h.weight,m=h.stateMachine,g=new Rx(p);if(g.blendingMode=v,g.weight=y,m){var x=m.states,b=g.stateMachine=new Ax;x.forEach(function(S,C){var E,T=S.name,M=S.speed,L=S.wrapMode,F=S.clipStartNormalizedTime,N=S.clipEndNormalizedTime,I=S.isDefaultState,O=S.clip,P=S.scripts,R=b.addState(T);I&&(b.defaultState=R),R.speed=M,R.wrapMode=L,R.clipStartTime=F,R.clipEndTime=N;var A=JSON.parse(P);(E=A)==null||E.forEach(function(D){R.addStateMachineScript(ln.getClass(D))}),O&&d.push(new Promise(function(D){i.getResourceByRef(O).then(function(B){D({layerIndex:_,stateIndex:C,clip:B})})}))}),x.forEach(function(S){var C=S.name,E=S.transitions;E.forEach(function(T){var M=T.targetStateName,L=T.duration,F=T.offset,N=T.exitTime,I=b.findStateByName(C),O=b.findStateByName(M),P=new Ex;P.destinationState=O,P.duration=L,P.exitTime=N,P.offset=F,I.addTransition(P)})})}c.addLayer(g)}),Promise.all(d).then(function(h){h.forEach(function(_){var p=_.layerIndex,v=_.stateIndex,y=_.clip;c.layers[p].stateMachine.states[v].clip=y}),s(c)})}).catch(l)})},r}(ln);bC=Tt([kn(vn.AnimatorController,["json"],!1)],bC);function Y6(n){return/^data:(.+?);base64,/.test(n)}var CC=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.load=function(t){var i=t.url;return Y6(i)?new sn(function(o){var s=i.slice(13+RegExp.$1.length),l=Uint8Array.from(atob(s),function(u){return u.charCodeAt(0)});o(l.buffer)}):this.request(i,ra({},t,{type:"arraybuffer"}))},r}(ln);CC=Tt([kn(vn.Buffer,["bin","r3bin"],!1)],CC);var EC=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.load=function(t,i){var o=this;return new sn(function(s,l){o.request(t.url,{type:"arraybuffer"}).then(function(u){var c,f=new Float32Array(u,0,27),d=27*4,h=(c=new Uint16Array(u,d,1))==null?void 0:c[0],_=i.engine,p=new Ma(_,h);p.filterMode=Jn.Trilinear;for(var v=p.mipmapCount,y=d+2,m=0;m<v;m++)for(var g=h>>m,x=0;x<6;x++){var b=g*g*4,S=new Uint8Array(u,y,b);y+=b,p.setPixelBuffer(Oi.PositiveX+x,S,m)}var C=new ri(_),E=new xz;C.diffuseMode=el.SphericalHarmonics,E.copyFromArray(f),C.diffuseSphericalHarmonics=E,C.specularTexture=p,C.specularTextureDecodeRGBM=!0,s(C)}).catch(function(u){l(u)})})},r}(ln);EC=Tt([kn(vn.Env,["env"])],EC);function TC(n,r,a,e,t,i,o){try{var s=n[i](o),l=s.value}catch(u){a(u);return}s.done?r(l):Promise.resolve(l).then(e,t)}function g_(n){return function(){var r=this,a=arguments;return new Promise(function(e,t){var i=n.apply(r,a);function o(l){TC(i,e,t,o,s,"next",l)}function s(l){TC(i,e,t,o,s,"throw",l)}o(void 0)})}}var RC=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.load=function(t,i){var o=this;return new sn(function(s,l){o.request(t.url,{type:"json"}).then(function(u){var c=u.fontName,f=u.fontUrl;if(f)o._registerFont(c,f).then(function(){var h=new uc(i.engine,c);s(h)}).catch(function(h){l("load font "+f+" fail")});else{var d=new uc(i.engine,c);s(d)}}).catch(function(u){l(u)})})},a._registerFont=function(t,i){return g_(function(){var o;return v_(this,function(s){switch(s.label){case 0:return o=new FontFace(t,"url("+i+")"),[4,o.load()];case 1:return s.sent(),document.fonts.add(o),[2]}})})()},r}(ln);RC=Tt([kn(vn.Font,["font"],!1)],RC);var Q6=function(n){gt(r,n);function r(e,t){var i;return i=n.call(this,e)||this,i.url=t,i}var a=r.prototype;return a.instantiateSceneRoot=function(t){var i=t===void 0?this._defaultSceneRoot:this._sceneRoots[t];return i.clone()},a._onDestroy=function(){n.prototype._onDestroy.call(this);var t=this,i=t.textures,o=t.materials,s=t.meshes;if(i&&this._disassociationSuperResource(i),o&&this._disassociationSuperResource(o),s)for(var l=0,u=s.length;l<u;l++)this._disassociationSuperResource(s[l])},a._disassociationSuperResource=function(t){for(var i=0,o=t.length;i<o;i++)t[i]._disassociationSuperResource(this)},p_(r,[{key:"extensionsData",get:function(){return this._extensionsData}},{key:"sceneRoots",get:function(){return this._sceneRoots}},{key:"defaultSceneRoot",get:function(){return this._defaultSceneRoot}}]),r}(Io),sr;(function(n){n[n.BYTE=5120]="BYTE",n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.SHORT=5122]="SHORT",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.FLOAT=5126]="FLOAT"})(sr||(sr={}));var Ho;(function(n){n.SCALAR="SCALAR",n.VEC2="VEC2",n.VEC3="VEC3",n.VEC4="VEC4",n.MAT2="MAT2",n.MAT3="MAT3",n.MAT4="MAT4"})(Ho||(Ho={}));var Hi;(function(n){n.TRANSLATION="translation",n.ROTATION="rotation",n.SCALE="scale",n.WEIGHTS="weights"})(Hi||(Hi={}));var Mu;(function(n){n.Linear="LINEAR",n.Step="STEP",n.CubicSpine="CUBICSPLINE"})(Mu||(Mu={}));var cp;(function(n){n.PERSPECTIVE="perspective",n.ORTHOGRAPHIC="orthographic"})(cp||(cp={}));var AC;(function(n){n.JPEG="image/jpeg",n.PNG="image/png"})(AC||(AC={}));var If;(function(n){n.OPAQUE="OPAQUE",n.MASK="MASK",n.BLEND="BLEND"})(If||(If={}));var p0;(function(n){n[n.NEAREST=9728]="NEAREST",n[n.LINEAR=9729]="LINEAR"})(p0||(p0={}));var fp;(function(n){n[n.NEAREST=9728]="NEAREST",n[n.LINEAR=9729]="LINEAR",n[n.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",n[n.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",n[n.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",n[n.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"})(fp||(fp={}));var Lf;(function(n){n[n.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",n[n.REPEAT=10497]="REPEAT"})(Lf||(Lf={}));var Ox=function(){function n(a,e,t){var i=this;this.glTFResource=a,this.resourceManager=e,this.params=t,this.accessorBufferCache={},this._resourceCache=new Map,this._progress={taskDetail:{},taskComplete:{loaded:0,total:0}},this._onTaskDetail=function(o,s,l){var u,c,f=(u=i._progress.taskDetail)[c=o]||(u[c]={});f.loaded=s,f.total=l,i._setTaskDetailProgress(o,s,l)},this.contentRestorer=new i9(a)}var r=n.prototype;return r.get=function(e,t){var i=this,o=n._parsers[e];if(!o)return Promise.resolve(null);var s=this._resourceCache,l=e===0||e===1,u=l||t===void 0?""+e:e+":"+t,c=s.get(u);if(c)return c;if(l)c=o.parse(this);else{var f=this.glTF[q6[e]];f&&(t===void 0||f[t])?t===void 0?c=e===8?f.map(function(d,h){return i.get(e,h)}):Promise.all(f.map(function(d,h){return i.get(e,h)})):(c=o.parse(this,t),this._handleSubAsset(c,e,t)):c=Promise.resolve(null)}return s.set(u,c),c},r.parse=function(){var e=this,t=this.get(0).then(function(i){return e.glTF=i,Promise.all([e.get(1),e.get(5),e.get(6),e.get(7),e.get(9),e.get(10),e.get(2)]).then(function(){var o=e.glTFResource;return(o.skins||o.animations)&&e._createAnimator(e,o.animations),e.resourceManager.addContentRestorer(e.contentRestorer),o})});return this._addTaskCompletePromise(t),t},r._addTaskCompletePromise=function(e){var t=this,i=this._progress.taskComplete;i.total+=1,e.then(function(){t._setTaskCompleteProgress(++i.loaded,i.total)})},r._createAnimator=function(e,t){var i=e.glTFResource.defaultSceneRoot,o=i.addComponent(Lo),s=new Tx,l=new Rx("layer"),u=new Ax;if(s.addLayer(l),o.animatorController=s,l.stateMachine=u,t)for(var c=0;c<t.length;c++){var f=t[c],d=f.name,h=u.makeUniqueStateName(d);h!==d&&console.warn("AnimatorState name is existed, name: "+d+" reset to "+h);var _=u.addState(h);_.clip=f}},r._handleSubAsset=function(e,t,i){var o=this,s=J6[t];if(!!s)if(t===8){var l,u;((l=this.glTFResource)[u=s]||(l[u]=[]))[i]=e}else{var c=this.glTFResource.url;e.then(function(f){var d,h;if(((d=o.glTFResource)[h=s]||(d[h]=[]))[i]=f,t===7)for(var _=0,p=f.length;_<p;_++){var v=f[_];o.resourceManager._onSubAssetSuccess(c+"?q="+s+"["+i+"]["+_+"]",v)}else{o.resourceManager._onSubAssetSuccess(c+"?q="+s+"["+i+"]",f);var y;t===2&&((y=o.glTF.scene)!=null?y:0)===i&&o.resourceManager._onSubAssetSuccess(""+c+"?q=defaultSceneRoot",f)}})}},n.addParser=function(e,t){this._parsers[e]=t},n}();(function(){Ox._parsers={}})();var pg=function(r,a,e){this.data=r,this.interleaved=a,this.stride=e,this.vertexBindingInfos={}},zt;(function(n){n[n.Schema=0]="Schema",n[n.Validator=1]="Validator",n[n.Scene=2]="Scene",n[n.Buffer=3]="Buffer",n[n.BufferView=4]="BufferView",n[n.Texture=5]="Texture",n[n.Material=6]="Material",n[n.Mesh=7]="Mesh",n[n.Entity=8]="Entity",n[n.Skin=9]="Skin",n[n.Animation=10]="Animation"})(zt||(zt={}));var zi,q6=(zi={},zi[2]="scenes",zi[3]="buffers",zi[5]="textures",zi[6]="materials",zi[7]="meshes",zi[8]="nodes",zi[9]="skins",zi[10]="animations",zi[4]="bufferViews",zi),Go,J6=(Go={},Go[2]="_sceneRoots",Go[5]="textures",Go[6]="materials",Go[7]="meshes",Go[8]="entities",Go[9]="skins",Go[10]="animations",Go);function so(n){return function(r){var a=new r;Ox.addParser(n,a)}}var Hn=function(){function n(){}return n.floatBufferToVector2Array=function(a){for(var e=a.length,t=new Array(e/2),i=0;i<e;i+=2)t[i/2]=new Ze(a[i],a[i+1]);return t},n.floatBufferToVector3Array=function(a){for(var e=a.length,t=new Array(e/3),i=0;i<e;i+=3)t[i/3]=new z(a[i],a[i+1],a[i+2]);return t},n.floatBufferToVector4Array=function(a){for(var e=a.length,t=new Array(e/4),i=0;i<e;i+=4)t[i/4]=new pt(a[i],a[i+1],a[i+2],a[i+3]);return t},n.floatBufferToColorArray=function(a,e){var t=a.length,i=new Array(t/(e?3:4));if(e)for(var o=0;o<t;o+=3)i[o/3]=new Me(a[o],a[o+1],a[o+2],1);else for(var s=0;s<t;s+=4)i[s/4]=new Me(a[s],a[s+1],a[s+2],a[s+3]);return i},n.getAccessorTypeSize=function(a){switch(a){case Ho.SCALAR:return 1;case Ho.VEC2:return 2;case Ho.VEC3:return 3;case Ho.VEC4:return 4;case Ho.MAT2:return 4;case Ho.MAT3:return 9;case Ho.MAT4:return 16}},n.getComponentType=function(a){switch(a){case sr.BYTE:return Int8Array;case sr.UNSIGNED_BYTE:return Uint8Array;case sr.SHORT:return Int16Array;case sr.UNSIGNED_SHORT:return Uint16Array;case sr.UNSIGNED_INT:return Uint32Array;case sr.FLOAT:return Float32Array}},n.getNormalizedComponentScale=function(a){switch(a){case sr.BYTE:return 1/127;case sr.UNSIGNED_BYTE:return 1/255;case sr.SHORT:return 1/32767;case sr.UNSIGNED_SHORT:return 1/65535;default:throw new Error("Galacean.GLTFLoader: Unsupported normalized accessor component type.")}},n.getAccessorBuffer=function(a,e,t){var i=t.componentType,o=n.getComponentType(i),s=n.getAccessorTypeSize(t.type),l=o.BYTES_PER_ELEMENT,u=s*l,c=t.count,f;if(t.bufferView!==void 0){var d=t.bufferView,h=e[d];f=a.get(zt.BufferView,t.bufferView).then(function(y){var m=h.buffer,g,x=(g=y.byteOffset)!=null?g:0,b,S=(b=t.byteOffset)!=null?b:0,C=h.byteStride,E;if(C!==void 0&&C!==u){var T=Math.floor(S/C),M=d+":"+i+":"+T+":"+c,L=a.accessorBufferCache;if(E=L[M],!E){var F=x+T*C,N=c*(C/l),I=new o(y.buffer,F,N);L[M]=E=new pg(I,!0,C),E.restoreInfo=new _g(new af(m,o,F,N))}}else{var O=x+S,P=c*s,R=new o(y.buffer,O,P);E=new pg(R,!1,u),E.restoreInfo=new _g(new af(m,o,O,P))}return E})}else{var _=c*s,p=new o(_),v=new pg(p,!1,u);v.restoreInfo=new _g(new af(void 0,o,void 0,_)),f=Promise.resolve(v)}return t.sparse?f.then(function(y){return n.processingSparseData(a,t,y).then(function(){return y})}):f},n.bufferToVector3Array=function(a,e,t,i,o){for(var s=e/a.BYTES_PER_ELEMENT,l=a.length/t,u=new Array(t),c=i?n.getNormalizedComponentScale(o):1,f=0;f<t;f++){var d=s+f*l;u[f]=new z(a[d]*c,a[d+1]*c,a[d+2]*c)}return u},n.getBufferViewData=function(a,e){var t=a.byteOffset,i=t===void 0?0:t,o=e[a.buffer];return o.slice(i,i+a.byteLength)},n.processingSparseData=function(a,e,t){var i=t.restoreInfo,o=a.glTF.bufferViews,s=n.getAccessorTypeSize(e.type),l=n.getComponentType(e.componentType),u=t.data.slice(),c=e.sparse,f=c.count,d=c.indices,h=c.values,_=o[d.bufferView],p=o[h.bufferView];return Promise.all([a.get(zt.BufferView,d.bufferView),a.get(zt.BufferView,h.bufferView)]).then(function(v){var y=v[0],m=v[1],g,x,b=((g=d.byteOffset)!=null?g:0)+((x=y.byteOffset)!=null?x:0),S=y.byteLength,C,E,T=((C=h.byteOffset)!=null?C:0)+((E=m.byteOffset)!=null?E:0),M=m.byteLength;i.typeSize=s,i.sparseCount=f;var L=n.getComponentType(d.componentType),F=S/L.BYTES_PER_ELEMENT,N=new L(y.buffer,b,F);i.sparseIndices=new af(_.buffer,L,b,F);var I=M/l.BYTES_PER_ELEMENT,O=new l(m.buffer,T,I);i.sparseValues=new af(p.buffer,l,T,I);for(var P=0;P<f;P++)for(var R=N[P],A=0;A<s;A++)u[R*s+A]=O[P*s+A];t.data=u})},n.getIndexFormat=function(a){switch(a){case sr.UNSIGNED_BYTE:return Lr.UInt8;case sr.UNSIGNED_SHORT:return Lr.UInt16;case sr.UNSIGNED_INT:return Lr.UInt32}},n.getElementFormat=function(a,e,t){if(t===void 0&&(t=!1),a==sr.FLOAT)switch(e){case 1:return rt.Float;case 2:return rt.Vector2;case 3:return rt.Vector3;case 4:return rt.Vector4}if(a==sr.SHORT)switch(e){case 2:return t?rt.NormalizedShort2:rt.Short2;case 3:case 4:return t?rt.NormalizedShort4:rt.Short4}if(a==sr.UNSIGNED_SHORT)switch(e){case 2:return t?rt.NormalizedUShort2:rt.UShort2;case 3:case 4:return t?rt.NormalizedUShort4:rt.UShort4}if(a==sr.BYTE)switch(e){case 2:case 3:case 4:return t?rt.NormalizedByte4:rt.Byte4}if(a==sr.UNSIGNED_BYTE)switch(e){case 2:case 3:case 4:return t?rt.NormalizedUByte4:rt.UByte4}},n.loadImageBuffer=function(a,e){return new Promise(function(t,i){var o=new window.Blob([a],{type:e}),s=new Image;s.onerror=function(){i(new Error("Failed to load image buffer"))},s.onload=function(){requestAnimationFrame(function(){t(s),s.onload=null,s.onerror=null,s.onabort=null})},s.crossOrigin="anonymous",s.src=URL.createObjectURL(o)})},n.parseGLB=function(a,e){var t=4,i=1179937895,o=12,s={JSON:1313821514,BIN:5130562},l=new DataView(e),u={magic:l.getUint32(0,!0),version:l.getUint32(t,!0),length:l.getUint32(2*t,!0)};if(u.magic!==i)return{originBuffer:e};var c=l.getUint32(o,!0),f=l.getUint32(o+t,!0);if(f!==s.JSON)return console.error("Invalid glb chunk type. Expected 0x4E4F534A, found 0x"+f.toString(16)),null;for(var d=new Uint8Array(e,o+2*t,c),h=JSON.parse(Mn.decodeText(d)),_=[],p=o+2*t+c,v=a.contentRestorer.glbBufferSlices;p<u.length;){if(c=l.getUint32(p,!0),f=l.getUint32(p+t,!0),f!==s.BIN)return console.error("Invalid glb chunk type. Expected 0x004E4942, found 0x"+f.toString(16)),null;var y=p+2*t,m=e.slice(y,y+c);_.push(m),v.push(new Ze(y,c)),p+=c+2*t}return{glTF:h,buffers:_}},n.parseSampler=function(a,e){var t=e.filterMode,i=e.wrapModeU,o=e.wrapModeV;t!==void 0&&(a.filterMode=t),i!==void 0&&(a.wrapModeU=i),o!==void 0&&(a.wrapModeV=o)},n.getSamplerInfo=function(a){var e=a.minFilter,t=a.magFilter,i=a.wrapS,o=a.wrapT,s={};return(e||t)&&(s.mipmap=e>=fp.NEAREST_MIPMAP_NEAREST,t===p0.NEAREST?s.filterMode=Jn.Point:e<=fp.LINEAR_MIPMAP_NEAREST?s.filterMode=Jn.Bilinear:s.filterMode=Jn.Trilinear),i&&(s.wrapModeU=dp._wrapMap[i]),o&&(s.wrapModeV=dp._wrapMap[o]),s},n}(),wC;(function(n){n[n.linear=1]="linear",n[n.sRGB=2]="sRGB"})(wC||(wC={}));var PC;(function(n){n[n.ETC1S=163]="ETC1S",n[n.UASTC=166]="UASTC"})(PC||(PC={}));var _0;(function(n){n[n.None=0]="None",n[n.BasisLZ=1]="BasisLZ",n[n.Zstd=2]="Zstd",n[n.ZLib=3]="ZLib"})(_0||(_0={}));var Z6=function(){function n(a){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.keyValue={},this.globalData=null,this.parse(a)}var r=n.prototype;return r.parse=function(e){var t=e.buffer,i=e.byteOffset,o=new gu(e,12);this.vkFormat=o.nextUint32(),this.typeSize=o.nextUint32(),this.pixelWidth=o.nextUint32(),this.pixelHeight=o.nextUint32(),this.pixelDepth=o.nextUint32(),this.layerCount=o.nextUint32(),this.faceCount=o.nextUint32();var s=Math.max(1,o.nextUint32());this.supercompressionScheme=o.nextUint32();var l=o.nextUint32(),u=o.nextUint32(),c=o.nextUint32(),f=o.nextUint32(),d=o.nextUint64(),h=o.nextUint64(),_=new Array(s),p=s*3*8,v=new gu(e,o.offset,p);this.levels=_;for(var y=0;y<s;y++)_[y]={levelData:new Uint8Array(t,i+v.nextUint64(),v.nextUint64()),uncompressedByteLength:v.nextUint64()};var m=new gu(e,l,u),g={vendorId:m.skip(4).nextUint16(),descriptorType:m.nextUint16(),versionNumber:m.nextUint16(),descriptorBlockSize:m.nextUint16(),colorModel:m.nextUint8(),colorPrimaries:m.nextUint8(),transferFunction:m.nextUint8(),flags:m.nextUint8(),texelBlockDimension:[m.nextUint8(),m.nextUint8(),m.nextUint8(),m.nextUint8()],bytesPlane:[m.nextUint8(),m.nextUint8(),m.nextUint8(),m.nextUint8(),m.nextUint8(),m.nextUint8(),m.nextUint8(),m.nextUint8()],samples:[]};this.dataFormatDescriptor=g;for(var x=6,b=4,S=(g.descriptorBlockSize/4-x)/b,C=0;C<S;C++){var E={bitOffset:m.nextUint16(),bitLength:m.nextUint8(),channelType:m.nextUint8(),samplePosition:[m.nextUint8(),m.nextUint8(),m.nextUint8(),m.nextUint8()],sampleLower:-1/0,sampleUpper:1/0};E.channelType&64?(E.sampleLower=m.nextInt32(),E.sampleUpper=m.nextInt32()):(E.sampleLower=m.nextUint32(),E.sampleUpper=m.nextUint32()),g.samples[C]=E}for(var T=new gu(e,c,f,!0);T.position<f;){var M=T.nextUint32(),L=T.scan(M),F=Mn.decodeText(L),N=T.nextUint8Array(M-L.byteLength-1);this.keyValue[F]=F.match(/^ktx/i)?Mn.decodeText(N).replace(/^(.*)\x00$/,"$1"):N;var I=M%4?4-M%4:0;T.skip(I)}if(h<=0)return this;for(var O=new gu(e,d,h,!0),P=O.nextUint16(),R=O.nextUint16(),A=O.nextUint32(),D=O.nextUint32(),B=O.nextUint32(),k=O.nextUint32(),V=new Array(s),U=0;U<s;U++)V[U]={imageFlags:O.nextUint32(),rgbSliceByteOffset:O.nextUint32(),rgbSliceByteLength:O.nextUint32(),alphaSliceByteOffset:O.nextUint32(),alphaSliceByteLength:O.nextUint32()};var j=d+O.position,G=j+A,$=G+D,W=$+B,K=new Uint8Array(t,i+j,A),q=new Uint8Array(t,i+G,D),Y=new Uint8Array(t,i+$,B),Q=new Uint8Array(t,i+W,k);this.globalData={endpointCount:P,selectorCount:R,imageDescs:V,endpointsData:K,selectorsData:q,tablesData:Y,extendedData:Q}},p_(n,[{key:"isSRGB",get:function(){return this.dataFormatDescriptor.transferFunction===2}},{key:"isUASTC",get:function(){return this.dataFormatDescriptor.colorModel===166}}]),n}(),fn;(function(n){n[n.ASTC=0]="ASTC",n[n.BC7=1]="BC7",n[n.BC1_BC3=2]="BC1_BC3",n[n.PVRTC=3]="PVRTC",n[n.ETC=4]="ETC",n[n.R8=5]="R8",n[n.R8G8=6]="R8G8",n[n.R8G8B8A8=7]="R8G8B8A8"})(fn||(fn={}));var e9=function(){function n(a,e){a===void 0&&(a=4),this.limitedCount=a,this._workerCreator=e,this._taskQueue=[],this._workerStatus=0,this._workerItems=new Array(a)}var r=n.prototype;return r.prepareWorker=function(){for(var e=this.limitedCount,t=new Array(e),i=0;i<e;i++)t.push(this._initWorker(i));return Promise.all(t)},r.postMessage=function(e){var t=this;return new Promise(function(i,o){var s=t._getIdleWorkerId();if(s!==-1){t._workerStatus|=1<<s;var l=t._workerItems,u;Promise.resolve((u=l[s])!=null?u:t._initWorker(s)).then(function(){var c=l[s];c.resolve=i,c.reject=o,c.worker.postMessage(e)}).catch(o)}else t._taskQueue.push({resolve:i,reject:o,message:e})})},r.destroy=function(){for(var e=this._workerItems,t=0,i=e.length;t<i;t++){var o=e[t];o.worker.terminate(),o.reject=null,o.resolve=null}e.length=0,this._taskQueue.length=0,this._workerStatus=0},r._initWorker=function(e){var t=this;return Promise.resolve(this._workerCreator()).then(function(i){return i.addEventListener("message",t._onMessage.bind(t,e)),t._workerItems[e]={worker:i,resolve:null,reject:null},i})},r._getIdleWorkerId=function(){for(var e=0,t=this.limitedCount;e<t;e++)if(!(this._workerStatus&1<<e))return e;return-1},r._onMessage=function(e,t){var i=t.data.error;i?this._workerItems[e].reject(i):this._workerItems[e].resolve(t.data),this._nextTask(e)},r._nextTask=function(e){if(this._taskQueue.length){var t=this._taskQueue.shift(),i=this._workerItems[e];i.resolve=t.resolve,i.reject=t.reject,i.worker.postMessage(t.message)}else this._workerStatus^=1<<e},n}(),zP=function(){function n(a){this.workerLimitCount=a}var r=n.prototype;return r.init=function(){return this._initPromise||(this._initPromise=this._initTranscodeWorkerPool()),this._initPromise},r.destroy=function(){this._transcodeWorkerPool.destroy()},r._createTranscodePool=function(e,t){return this._transcodeWorkerPool=new e9(this.workerLimitCount,function(){return new Promise(function(i,o){var s=function(f){f.data.error?o(f.data.error):i(l)},l=new Worker(e),u={type:"init",transcoderWasm:t};l.addEventListener("message",s),l.postMessage(u)})}),this._transcodeWorkerPool.prepareWorker()},n}();function t9(){var n,r=function(e){return n||(n=new Promise(function(t,i){var o={wasmBinary:e,onRuntimeInitialized:function(){return t(o)},onAbort:i};self.BASIS(o)}).then(function(t){return t.initializeBasis(),t.KTX2File})),n};self.onmessage=function(e){var t=e.data;switch(t.type){case"init":r(t.transcoderWasm).then(function(){self.postMessage("init-completed")}).catch(function(i){return self.postMessage({error:i})});break;case"transcode":r().then(function(i){var o=g0(t.buffer,t.format,i);o.type="transcoded",self.postMessage(o)}).catch(function(i){return self.postMessage({error:i})});break}}}var n9=function(){var r;return function(e){return r||(r=new Promise(function(t,i){var o={wasmBinary:e,onRuntimeInitialized:function(){return t(o)},onAbort:i};self.BASIS(o)}).then(function(t){return t.initializeBasis(),t.KTX2File})),r}},MC=n9();function g0(n,r,a){var e=function(N,I){switch(N){case 2:return I?3:2;case 4:return I?1:0;case 3:return I?9:8;case 7:return 13;case 0:return 10;case 1:return 7}},t=function(N){if(N.length===1)return N[0];for(var I=0,O=0;O<N.length;O++)I+=N[O].byteLength;for(var P=new Uint8Array(I),R=0,A=0;A<N.length;A++)P.set(N[A],R),R+=N[A].byteLength;return P},i=function(){l.close(),l.delete()},o;(function(F){F[F.ETC1=0]="ETC1",F[F.ETC2=1]="ETC2",F[F.BC1=2]="BC1",F[F.BC3=3]="BC3",F[F.BC4=4]="BC4",F[F.BC5=5]="BC5",F[F.BC7=7]="BC7",F[F.PVRTC1_4_RGB=8]="PVRTC1_4_RGB",F[F.PVRTC1_4_RGBA=9]="PVRTC1_4_RGBA",F[F.ASTC_4x4=10]="ASTC_4x4",F[F.RGBA8=13]="RGBA8"})(o||(o={}));var s;(function(F){F[F.ASTC=0]="ASTC",F[F.BC7=1]="BC7",F[F.BC1_BC3=2]="BC1_BC3",F[F.PVRTC=3]="PVRTC",F[F.ETC=4]="ETC",F[F.R8=5]="R8",F[F.RG8=6]="RG8",F[F.RGBA8=7]="RGBA8"})(s||(s={}));var l=new a(new Uint8Array(n));if(!l.isValid())throw i(),new Error("Invalid or unsupported .ktx2 file");if(!l.startTranscoding())throw i(),new Error("KTX2 startTranscoding failed");for(var u=l.getWidth(),c=l.getHeight(),f=l.getLayers()||1,d=l.getLevels(),h=l.getHasAlpha(),_=l.getFaces(),p=e(r,h),v=new Array(_),y=p===2||p===3||p===7,m=0;m<_;m++){for(var g=new Array(d),x=0;x<d;x++){for(var b=new Array(f),S=void 0,C=void 0,E=0;E<f;E++){var T=l.getImageLevelInfo(x,E,m);y&&x===0&&(u!==T.width||c!==T.height)?(u=S=T.width,c=C=T.height,console.warn("KTX2 transcode to BC will resize to width: "+u+", height: "+c+". You'd better use an image whose size if multiple of 4.")):(S=T.origWidth,C=T.origHeight);var M=new Uint8Array(l.getImageTranscodedSizeInBytes(x,E,0,p)),L=l.transcodeImage(M,x,E,m,p,0,-1,-1);if(!L)throw i(),new Error("transcodeImage failed.");b[E]=M}g[x]={data:t(b),width:S,height:C}}v[m]=g}return i(),{faces:v,width:u,height:c,hasAlpha:h,faceCount:_,format:p}}var r9=function(n){gt(r,n);function r(e){return n.call(this,e)}var a=r.prototype;return a._initTranscodeWorkerPool=function(){var t=this;return Promise.all([fetch("https://mdn.alipayobjects.com/rms/afts/file/A*nG8SR6vCgXgAAAAAAAAAAAAAARQnAQ/basis_transcoder.js").then(function(i){return i.text()}),fetch("https://mdn.alipayobjects.com/rms/afts/file/A*qEUfQ7317KsAAAAAAAAAAAAAARQnAQ/basis_transcoder.wasm").then(function(i){return i.arrayBuffer()})]).then(function(i){var o=i[0],s=i[1];if(t.workerLimitCount===0)return new Promise(function(d,h){var _=document.createElement("script");_.src=URL.createObjectURL(new Blob([o],{type:"application/javascript"})),document.body.appendChild(_),_.onload=function(){MC(s).then(function(){d(null)})},_.onerror=function(){h()}});var l=t9.toString(),u=l.substring(l.indexOf("{"),l.lastIndexOf("}")+1),c=`
        `+o+`
        `+g0.toString()+`
        `+u+`
        `,f=URL.createObjectURL(new Blob([c],{type:"application/javascript"}));return t._createTranscodePool(f,s)})},a.transcode=function(t,i){return this.workerLimitCount===0?MC().then(function(o){return g0(t,i,o)}):this._transcodeWorkerPool.postMessage({buffer:t,format:i,type:"transcode"})},r}(zP);function a9(){var n=function(s,l,u,c){var f=(u+3>>2)*(c+3>>2),d=f*16+65535>>16,h=s.memory,_=d+1-(h.buffer.byteLength>>16);_>0&&h.grow(_);var p=new Uint8Array(h.buffer,65536,f*16);return p.set(l),s.transcode(f)===0?p:null},r=function(s){return e=WebAssembly.instantiate(s,{env:{memory:new WebAssembly.Memory({initial:16})}}).then(function(l){return l.instance.exports}),e},a=function(s,l,u){var c=s.length,f=new Array(c),d=Promise.resolve();return l&&(i.init(),d=i._initPromise),d.then(function(){for(var h=0;h<c;h++){for(var _=s[h].length,p=new Array(_),v=0;v<_;v++){var y=s[h][v],m=y.buffer,g=y.levelHeight,x=y.levelWidth,b=y.uncompressedByteLength;l&&(m=i.decode(m.slice(),b));var S=m.byteLength/c,C=m.byteOffset,E=n(u,new Uint8Array(m.buffer,C+h*S,S),x,g);if(E)p[v]={data:E.slice(),width:x,height:g};else throw"buffer decoded error"}f[h]=p}return f})},e,t=function(){function o(){}var s=o.prototype;return s.init=function(){return this._initPromise||(this._initPromise=fetch(o.WasmModuleURL).then(function(u){if(u.ok)return u.arrayBuffer();throw new Error("Could not fetch the wasm component for the Zstandard decompression lib: "+u.status+" - "+u.statusText)}).then(function(u){return WebAssembly.instantiate(u,o.IMPORT_OBJECT)}).then(this._init)),this._initPromise},s._init=function(u){o.instance=u.instance,o.IMPORT_OBJECT.env.emscripten_notify_memory_growth()},s.decode=function(u,c){if(c===void 0&&(c=0),!o.instance)throw new Error("ZSTDDecoder: Await .init() before decoding.");var f=o.instance.exports,d=u.byteLength,h=f.malloc(d);o.heap.set(u,h),c=c||Number(f.ZSTD_findDecompressedSize(h,d));var _=f.malloc(c),p=f.ZSTD_decompress(_,c,h,d),v=o.heap.slice(_,_+p);return f.free(h),f.free(_),v},o}();(function(){t.IMPORT_OBJECT={env:{emscripten_notify_memory_growth:function(){t.heap=new Uint8Array(t.instance.exports.memory.buffer)}}}})(),function(){t.WasmModuleURL="https://mdn.alipayobjects.com/rms/afts/file/A*awNJR7KqIAEAAAAAAAAAAAAAARQnAQ/zstddec.wasm"}();var i=new t;self.onmessage=function(s){var l=s.data;switch(l.type){case"init":r(l.transcoderWasm).then(function(){self.postMessage("init-completed")}).catch(function(u){self.postMessage({error:u})});break;case"transcode":e.then(function(u){a(l.data,l.needZstd,u).then(function(c){self.postMessage(c)}).catch(function(c){return self.postMessage({error:c})})});break}}}var m0=function(n){gt(r,n);function r(e,t){var i;return i=n.call(this,e)||this,i.type=t,i}var a=r.prototype;return a._initTranscodeWorkerPool=function(){var t=this;return fetch(r.transcoderMap[this.type]).then(function(i){return i.arrayBuffer()}).then(function(i){var o=a9.toString(),s=URL.createObjectURL(new Blob([o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))],{type:"application/javascript"}));return t._createTranscodePool(s,i)})},a.transcode=function(t){for(var i=t.supercompressionScheme===_0.Zstd,o=t.levels.length,s=t.faceCount,l={width:t.pixelWidth,height:t.pixelHeight,mipmaps:null},u={type:"transcode",format:0,needZstd:i,data:new Array(s)},c=u.data,f=0;f<s;f++){for(var d=new Array(o),h=0;h<o;h++){var _=t.levels[h],p=Math.floor(t.pixelWidth/(1<<h))||1,v=Math.floor(t.pixelHeight/(1<<h))||1,y=_.levelData.buffer,m=_.levelData.byteOffset,g=_.levelData.byteLength;d[h]={buffer:new Uint8Array(y,m,g),levelWidth:p,levelHeight:v,uncompressedByteLength:_.uncompressedByteLength}}c[f]=d}return this._transcodeWorkerPool.postMessage(u).then(function(x){return l.faces=x,l.hasAlpha=!0,l})},r}(zP);(function(){var n;m0.transcoderMap=(n={},n[fn.ASTC]="https://mdn.alipayobjects.com/rms/afts/file/A*0jiKRK6D1-kAAAAAAAAAAAAAARQnAQ/uastc_astc.wasm",n)})();var rf,Ar=(rf=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.initialize=function(t,i){if(i.ktx2Loader){var o=i.ktx2Loader;return o.priorityFormats&&(Ar._priorityFormats.etc1s=o.priorityFormats,Ar._priorityFormats.uastc=o.priorityFormats),o.transcoder===1?Ar._getKhronosTranscoder(o.workerCount).init():Ar._getBinomialLLCTranscoder(o.workerCount).init()}},a.load=function(t,i){var o=this;return new sn(function(s,l,u,c){o.request(t.url,{type:"arraybuffer"}).onProgress(u,c).then(function(f){return Ar._parseBuffer(new Uint8Array(f),i.engine,t.params).then(function(d){var h=d.engine,_=d.result,p=d.targetFormat,v=d.params;return Ar._createTextureByBuffer(h,_,p,v)})}).then(s).catch(l)})},r.release=function(){this._binomialLLCTranscoder&&this._binomialLLCTranscoder.destroy(),this._khronosTranscoder&&this._khronosTranscoder.destroy(),this._binomialLLCTranscoder=null,this._khronosTranscoder=null,this._isBinomialInit=!1},r._parseBuffer=function(t,i,o){var s,l=new Z6(t),u,c=(u=(s=o)==null?void 0:s.priorityFormats)!=null?u:Ar._priorityFormats[l.isUASTC?"uastc":"etc1s"],f=Ar._decideTargetFormat(i,l,c),d;if(Ar._isBinomialInit||!m0.transcoderMap[f]||!l.isUASTC){var h=Ar._getBinomialLLCTranscoder();d=h.init().then(function(){return h.transcode(t,f)})}else{var _=Ar._getKhronosTranscoder();d=_.init().then(function(){return _.transcode(l)})}return d.then(function(p){return{engine:i,result:p,targetFormat:f,params:l.keyValue.GalaceanTextureParams}})},r._createTextureByBuffer=function(t,i,o,s){var l=i.width,u=i.height,c=i.faces,f=c.length,d=c[0],h=d.length>1,_=this._getEngineTextureFormat(o,i),p;if(f!==6){p=new br(t,l,u,_,h);for(var v=0;v<d.length;v++){var y=d[v].data;p.setPixelBuffer(y,v)}}else{p=new Ma(t,u,_,h);for(var m=0;m<c.length;m++)for(var g=c[m],x=0;x<d.length;x++)p.setPixelBuffer(Oi.PositiveX+m,g[x].data,x)}return s&&(p.wrapModeU=s[0],p.wrapModeV=s[1],p.filterMode=s[2],p.anisoLevel=s[3]),p},r._decideTargetFormat=function(t,i,o){var s=t._hardwareRenderer,l=this._detectSupportedFormat(s,o);return l===fn.PVRTC&&(!ve.isPowerOf2(i.pixelWidth)||!ve.isPowerOf2(i.pixelHeight)||i.pixelWidth!==i.pixelHeight)?(Pt.warn("PVRTC image need power of 2 and width===height, downgrade to RGBA8"),fn.R8G8B8A8):l===null?(Pt.warn("Can't support any compressed texture, downgrade to RGBA8"),fn.R8G8B8A8):l},r._detectSupportedFormat=function(t,i){for(var o=0;o<i.length;o++){var s=i[o],l=this._supportedMap[s];if(l){for(var u=0;u<l.length;u++)if(t.canIUse(l[u]))return s}else switch(i[o]){case fn.R8G8B8A8:return s;case fn.R8:case fn.R8G8:if(t.isWebGL2)return s}}return null},r._getBinomialLLCTranscoder=function(t){t===void 0&&(t=4),Ar._isBinomialInit=!0;var i;return(i=this._binomialLLCTranscoder)!=null?i:this._binomialLLCTranscoder=new r9(t)},r._getKhronosTranscoder=function(t){t===void 0&&(t=4);var i;return(i=this._khronosTranscoder)!=null?i:this._khronosTranscoder=new m0(t,fn.ASTC)},r._getEngineTextureFormat=function(t,i){var o=i.hasAlpha;switch(t){case fn.ASTC:return ye.ASTC_4x4;case fn.ETC:return o?ye.ETC2_RGBA8:ye.ETC2_RGB;case fn.BC7:return ye.BC7;case fn.BC1_BC3:return o?ye.BC3:ye.BC1;case fn.PVRTC:return o?ye.PVRTC_RGBA4:ye.PVRTC_RGB4;case fn.R8G8B8A8:return ye.R8G8B8A8}},r}(ln),function(){rf._isBinomialInit=!1}(),function(){rf._priorityFormats={etc1s:[fn.ETC,fn.BC7,fn.ASTC,fn.BC1_BC3,fn.PVRTC],uastc:[fn.ASTC,fn.BC7,fn.ETC,fn.BC1_BC3,fn.PVRTC]}}(),function(){var n;rf._supportedMap=(n={},n[fn.ASTC]=[Ue.astc],n[fn.ETC]=[Ue.etc],n[fn.BC7]=[Ue.bptc],n[fn.BC1_BC3]=[Ue.s3tc],n[fn.PVRTC]=[Ue.pvrtc,Ue.pvrtc_webkit],n)}(),rf);Ar=Tt([kn(vn.KTX2,["ktx2"])],Ar);var OC;(function(n){n[n.BinomialLLC=0]="BinomialLLC",n[n.Khronos=1]="Khronos"})(OC||(OC={}));var i9=function(n){gt(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e.bufferRequests=[],e.glbBufferSlices=[],e.bufferTextures=[],e.meshes=[],e}var a=r.prototype;return a.restoreContent=function(){var t=this;return new sn(function(i,o){Promise.all(t.bufferRequests.map(function(s){return Jl(s.url,s.config)})).then(function(s){if(t.isGLB){var l=t.glbBufferSlices,u=s[0],c=l.length;s.length=c;for(var f=0;f<c;f++){var d=l[f];s[f]=u.slice(d.x,d.x+d.y)}}sn.all(t.bufferTextures.map(function(h){var _=h.bufferView,p=s[_.buffer],v,y=new Uint8Array(p,(v=_.byteOffset)!=null?v:0,_.byteLength),m=h.texture;return h.mimeType==="image/ktx2"?Ar._parseBuffer(y,m.engine).then(function(g){for(var x=g.result,b=x.faces,S=b[0],C=0;C<S.length;C++)m.setPixelBuffer(S[C].data,C)}):Hn.loadImageBuffer(y,h.mimeType).then(function(g){m.setImageSource(g),m.generateMipmaps()})})).then(function(){for(var h=ju(t.meshes),_;!(_=h()).done;){for(var p=_.value,v=p.mesh,y=ju(p.vertexBuffers),m;!(m=y()).done;){var g=m.value,x=t._getBufferData(s,g.data);g.buffer.setData(x)}if(p.indexBuffer){var b=t._getBufferData(s,p.indexBuffer);v.setIndices(b)}for(var S=ju(p.blendShapes),C;!(C=S()).done;){var E=C.value,T=E.blendShape.frames[0],M=E.position,L=t._getBufferData(s,M.buffer);if(T.deltaPositions=Hn.bufferToVector3Array(L,M.byteOffset,M.count,M.normalized,M.componentType),E.normal){var F=E.normal,N=t._getBufferData(s,F.buffer);T.deltaNormals=Hn.bufferToVector3Array(N,F.byteOffset,F.count,F.normalized,F.componentType)}if(E.tangent){var I=E.tangent,O=t._getBufferData(s,I.buffer);T.deltaTangents=Hn.bufferToVector3Array(O,I.byteOffset,I.count,I.normalized,I.componentType)}}v.uploadData(!0)}i(t.resource)}).catch(o)}).catch(o)})},a._getBufferData=function(t,i){var o=i.main,s;if(o){var l=t[o.bufferIndex];s=new o.TypedArray(l,o.byteOffset,o.length)}else s=new o.TypedArray(o.length);var u=i.sparseCount;if(u)for(var c=i.sparseIndices,f=t[c.bufferIndex],d=new c.TypedArray(f,c.byteOffset,c.length),h=i.sparseValues,_=t[h.bufferIndex],p=new h.TypedArray(_,h.byteOffset,h.length),v=i.typeSize,y=0;y<u;y++)for(var m=d[y],g=0;g<v;g++)s[m*v+g]=p[y*v+g];return s},r}(Ya),GP=function(r,a){this.url=r,this.config=a},HP=function(r,a,e){this.texture=r,this.bufferView=a,this.mimeType=e},o9=function(){this.vertexBuffers=[],this.blendShapes=[]},IC=function(r,a){this.buffer=r,this.data=a},_g=function(r,a,e,t,i){this.main=r,this.typeSize=a,this.sparseCount=e,this.sparseIndices=t,this.sparseValues=i},af=function(r,a,e,t){this.bufferIndex=r,this.TypedArray=a,this.byteOffset=e,this.length=t},s9=function(r,a,e,t){this.blendShape=r,this.position=a,this.normal=e,this.tangent=t},l9=function(r,a,e,t,i){this.buffer=r,this.byteOffset=a,this.count=e,this.normalized=t,this.componentType=i},oi=function(){function n(){}var r=n.prototype;return r.createAndParse=function(e,t,i){for(var o=arguments.length,s=new Array(o>3?o-3:0),l=3;l<o;l++)s[l-3]=arguments[l];throw"Not implemented."},r.additiveParse=function(e,t,i,o){for(var s=arguments.length,l=new Array(s>4?s-4:0),u=4;u<s;u++)l[u-4]=arguments[u];throw"Not implemented."},n}(),Vr;(function(n){n[n.CreateAndParse=0]="CreateAndParse",n[n.AdditiveParse=1]="AdditiveParse"})(Vr||(Vr={}));var xn=function(){function n(){}return n.executeExtensionsCreateAndParse=function(a,e,t){a===void 0&&(a={});for(var i=arguments.length,o=new Array(i>3?i-3:0),s=3;s<i;s++)o[s-3]=arguments[s];for(var l=null,u=Object.keys(a),c=u.length-1;c>=0;--c){var f,d=u[c],h=a[d];if(l=(f=n)._createAndParse.apply(f,[].concat(d,e,h,t,o)),l)return l}},n.executeExtensionsAdditiveAndParse=function(a,e,t,i){for(var o=arguments.length,s=new Array(o>4?o-4:0),l=4;l<o;l++)s[l-4]=arguments[l];for(var u in a){var c,f=a[u];(c=n)._additiveParse.apply(c,[].concat(u,e,t,f,i,s))}},n.hasExtensionParser=function(a){var e;return!!((e=n._extensionParsers[a])!=null&&e.length)},n.getExtensionParser=function(a,e){var t,i=n._extensionParsers[a],o=(t=i)==null?void 0:t.length;if(o)for(var s=o-1;s>=0;--s){var l=i[s];if(l._mode===e)return l}},n._addExtensionParser=function(a,e){n._extensionParsers[a]||(n._extensionParsers[a]=[]),n._extensionParsers[a].push(e)},n._createAndParse=function(a,e,t,i){for(var o=arguments.length,s=new Array(o>4?o-4:0),l=4;l<o;l++)s[l-4]=arguments[l];var u=n.getExtensionParser(a,Vr.CreateAndParse);if(u){var c;return(c=u).createAndParse.apply(c,[].concat(e,t,i,s))}},n._additiveParse=function(a,e,t,i,o){for(var s=arguments.length,l=new Array(s>5?s-5:0),u=5;u<s;u++)l[u-5]=arguments[u];var c=n.getExtensionParser(a,Vr.AdditiveParse);if(c){var f;(f=c).additiveParse.apply(f,[].concat(e,t,i,o,l))}},n}();(function(){xn._extensionParsers={}})();function si(n,r){return function(a){var e=new a;e._mode=r,xn._addExtensionParser(n,e)}}var LC=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.parse=function(t){var i=t.glTFResource,o=t.contentRestorer,s=i.url,l=o.bufferRequests,u={type:"arraybuffer"};return Jl(s,u).onProgress(void 0,t._onTaskDetail).then(function(c){return l.push(new GP(s,u)),Hn.parseGLB(t,c)}).then(function(c){var f;return(f=c)!=null&&f.glTF?(o.isGLB=!0,t.buffers=c.buffers,c.glTF):(o.isGLB=!1,JSON.parse(Mn.decodeText(new Uint8Array(c.originBuffer))))})},r}(xn);LC=Tt([so(zt.Schema)],LC);var y0=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.parse=function(t,i){var o=t.glTF.animations[i],s=o.name,l=s===void 0?"AnimationClip"+i:s,u=xn.executeExtensionsCreateAndParse(o.extensions,t,o)||y0._parseStandardProperty(t,new Cx(l),o);return Promise.resolve(u).then(function(c){return xn.executeExtensionsAdditiveAndParse(o.extensions,t,c,o),c})},r._parseStandardProperty=function(t,i,o){for(var s=function(x,b){var S=h[x],C=c[S.input],E=c[S.output],T=Promise.all([Hn.getAccessorBuffer(t,f,C),Hn.getAccessorBuffer(t,f,E)]).then(function(M){var L=M[0].data,F=M[1].data;if(E.normalized){for(var N=Hn.getNormalizedComponentScale(E.componentType),I=new Float32Array(F.length),O=0,P=F.length;O<P;O++)I[O]=F[O]*N;F=I}var R=F.length/L.length,A,D=(A=S.interpolation)!=null?A:Mu.Linear,B;switch(D){case Mu.CubicSpine:B=Pr.CubicSpine;break;case Mu.Step:B=Pr.Step;break;case Mu.Linear:B=Pr.Linear;break}L[L.length-1],p[x]={type:E.type,interpolation:B,input:L,output:F,outputSize:R}});y.push(T)},l=this,u=t.glTF,c=u.accessors,f=u.bufferViews,d=o.channels,h=o.samplers,_=h.length,p=new Array(_),v=t.get(zt.Entity),y=new Array,m=0,g=_;m<g;m++)s(m);return y.push(t.get(zt.Scene)),Promise.all(y).then(function(){for(var x=0,b=d.length;x<b;x++){for(var S=d[x],C=S.target,E=v[C.node],T="",M=E;M.parent;)T=T===""?""+M.name:M.name+"/"+T,M=M.parent;if(t.glTFResource.sceneRoots.indexOf(M)!==-1){var L=void 0,F=void 0;switch(C.path){case Hi.TRANSLATION:L=Vt,F="position";break;case Hi.ROTATION:L=Vt,F="rotationQuaternion";break;case Hi.SCALE:L=Vt,F="scale";break;case Hi.WEIGHTS:L=Ur,F="blendShapeWeights";break}var N=l._addCurve(C.path,S,p);if(C.path===Hi.WEIGHTS)for(var I=u.nodes[C.node].mesh,O=0,P=u.meshes[I].primitives.length;O<P;O++)i.addCurveBinding(T,L,O,F,N);else i.addCurveBinding(T,L,F,N)}}return i})},r._addCurve=function(t,i,o){var s=o[i.sampler],l=s.input,u=s.output,c=s.outputSize;switch(t){case Hi.TRANSLATION:case Hi.SCALE:{for(var f=new vd,d=f.interpolation=s.interpolation,h=0,_=0,p=l.length;_<p;_++){var v=new ua;v.time=l[_],d===Pr.CubicSpine?(v.inTangent=new z(u[h++],u[h++],u[h++]),v.value=new z(u[h++],u[h++],u[h++]),v.outTangent=new z(u[h++],u[h++],u[h++])):v.value=new z(u[h++],u[h++],u[h++]),f.addKey(v)}return f}case Hi.ROTATION:{for(var y=new hc,m=y.interpolation=s.interpolation,g=0,x=0,b=l.length;x<b;x++){var S=new ua;S.time=l[x],m===Pr.CubicSpine?(S.inTangent=new pt(u[g++],u[g++],u[g++],u[g++]),S.value=new Ut(u[g++],u[g++],u[g++],u[g++]),S.outTangent=new pt(u[g++],u[g++],u[g++],u[g++])):S.value=new Ut(u[g++],u[g++],u[g++],u[g++]),y.addKey(S)}return y}case Hi.WEIGHTS:{var C=new hd;C.interpolation=s.interpolation;for(var E=0,T=0,M=l.length;T<M;T++){var L=new ua;L.time=l[T],C.interpolation===Pr.CubicSpine?(L.inTangent=Array.from(u.subarray(E,E+c)),E+=c,L.value=u.slice(E,E+c),E+=c,L.outTangent=Array.from(u.subarray(E,E+c)),E+=c):(L.value=u.slice(E,E+c),E+=c),C.addKey(L)}return C}}},r}(xn);y0=Tt([so(zt.Animation)],y0);var NC=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.parse=function(t,i){var o=t.glTF.buffers;return t.buffers?Promise.resolve(t.buffers[i]):this._parseSingleBuffer(t,o[i])},a._parseSingleBuffer=function(t,i){var o=t.glTFResource,s=t.contentRestorer,l=o.url,u=s.bufferRequests,c={type:"arraybuffer"},f=Mn.resolveAbsoluteUrl(l,i.uri);u.push(new GP(f,c));var d=Jl(f,c).onProgress(void 0,t._onTaskDetail);return t._addTaskCompletePromise(d),d},r}(xn);NC=Tt([so(zt.Buffer)],NC);var FC=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.parse=function(t,i){var o=t.glTFResource,s=t.glTF.nodes[i],l=o.engine,u=s.matrix,c=s.translation,f=s.rotation,d=s.scale,h=s.extensions,_=new yo(l,s.name||"_GLTF_ENTITY_"+i);_._markAsTemplate(o);var p=_.transform;if(u){var v=p.localMatrix;v.copyFromArray(u),p.localMatrix=v}else c&&p.setPosition(c[0],c[1],c[2]),f&&p.setRotationQuaternion(f[0],f[1],f[2],f[3]),d&&p.setScale(d[0],d[1],d[2]);var y=s.children;if(y)for(var m=0;m<y.length;m++){var g=y[m],x=t.get(zt.Entity,g);_.addChild(x)}return xn.executeExtensionsAdditiveAndParse(h,t,_,s),_},r}(xn);FC=Tt([so(zt.Entity)],FC);var Or=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.parse=function(t,i){var o=t.glTF.materials[i],s=t.glTFResource,l=s.engine,u=xn.executeExtensionsCreateAndParse(o.extensions,t,o);return u||(u=new Ji(l),u.name=o.name,Or._parseStandardProperty(t,u,o)),Promise.resolve(u).then(function(c){return c||(c=Or._getDefaultMaterial(l)),xn.executeExtensionsAdditiveAndParse(o.extensions,t,c,o),c._associationSuperResource(s),c})},r._getDefaultMaterial=function(t){var i;return(i=Or)._defaultMaterial||(i._defaultMaterial=new Dd(t))},r._checkOtherTextureTransform=function(t,i){var o;(o=t.extensions)!=null&&o.KHR_texture_transform&&Pt.warn(""+i+" texture always use the KHR_texture_transform of the base texture.")},r._parseStandardProperty=function(t,i,o){var s=o.pbrMetallicRoughness,l=o.normalTexture,u=o.occlusionTexture,c=o.emissiveTexture,f=o.emissiveFactor,d=o.alphaMode,h=o.alphaCutoff,_=o.doubleSided;if(s){var p=s.baseColorFactor,v=s.baseColorTexture,y=s.metallicFactor,m=s.roughnessFactor,g=s.metallicRoughnessTexture;p&&(i.baseColor=new Me(Me.linearToGammaSpace(p[0]),Me.linearToGammaSpace(p[1]),Me.linearToGammaSpace(p[2]),p[3])),v&&t.get(zt.Texture,v.index).then(function(T){i.baseTexture=T,xn.executeExtensionsAdditiveAndParse(v.extensions,t,i,v)}),i.constructor===Ji&&(i.metallic=y!=null?y:1,i.roughness=m!=null?m:1,g&&(Or._checkOtherTextureTransform(g,"Roughness metallic"),t.get(zt.Texture,g.index).then(function(T){i.roughnessMetallicTexture=T})))}if(i.constructor===Ji||i.constructor===ql){if(c&&(Or._checkOtherTextureTransform(c,"Emissive"),t.get(zt.Texture,c.index).then(function(T){i.emissiveTexture=T})),f&&(i.emissiveColor=new Me(Me.linearToGammaSpace(f[0]),Me.linearToGammaSpace(f[1]),Me.linearToGammaSpace(f[2]))),l){var x=l.index,b=l.scale;Or._checkOtherTextureTransform(l,"Normal"),t.get(zt.Texture,x).then(function(T){i.normalTexture=T}),b!==void 0&&(i.normalTextureIntensity=b)}if(u){var S=u.index,C=u.strength,E=u.texCoord;Or._checkOtherTextureTransform(u,"Occlusion"),t.get(zt.Texture,S).then(function(T){i.occlusionTexture=T}),C!==void 0&&(i.occlusionTextureIntensity=C),E===Xs.UV1?i.occlusionTextureCoord=Xs.UV1:E>Xs.UV1&&Pt.warn("Occlusion texture uv coordinate must be UV0 or UV1.")}}switch(_?i.renderFace=es.Double:i.renderFace=es.Front,d){case If.OPAQUE:i.isTransparent=!1;break;case If.BLEND:i.isTransparent=!0;break;case If.MASK:i.alphaCutoff=h!=null?h:.5;break}},r}(xn);Or=Tt([so(zt.Material)],Or);function x0(n,r){return r!=null&&typeof Symbol!="undefined"&&r[Symbol.hasInstance]?!!r[Symbol.hasInstance](n):n instanceof r}var gg,Nf=(gg=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.parse=function(t,i){for(var o=function(_,p){var v=s.primitives[_];f[_]=new Promise(function(y){var m=xn.executeExtensionsCreateAndParse(v.extensions,t,v,s);if(m)x0(m,Kn)?(m._associationSuperResource(u),y(m)):m.then(function(b){b._associationSuperResource(u),y(b)});else{var g=new Kn(c,s.name||_+"");g._associationSuperResource(u);var x=new o9;x.mesh=g,t.contentRestorer.meshes.push(x),Nf._parseMeshFromGLTFPrimitive(t,g,x,s,v,l,t.params.keepMeshData).then(y)}})},s=t.glTF.meshes[i],l=t.glTF,u=t.glTFResource,c=u.engine,f=new Array,d=0,h=s.primitives.length;d<h;d++)o(d);return Promise.all(f)},r._parseMeshFromGLTFPrimitive=function(t,i,o,s,l,u,c){var f=function(C){var E=d[h[C]],T=Hn.getAccessorBuffer(t,u.bufferViews,E).then(function(M){var L=Hn.getAccessorTypeSize(E.type),F=E.count,N=M.data,I,O=i.instanceId,P=M.vertexBindingInfos,R=E.normalized,A=Hn.getElementFormat(E.componentType,L,R),D;R&&(D=Hn.getNormalizedComponentScale(E.componentType));var B;if(M.interleaved){var k=E.byteOffset||0,V=M.stride;if(B=k%V,P[O]===void 0){I=new Kt(C,B,A,x);var U=M.vertexBuffer;U||(U=new ha(y,kr.VertexBuffer,N,Dn.Static,c),M.vertexBuffer=U,o.vertexBuffers.push(new IC(U,M.restoreInfo))),i.setVertexBufferBinding(U,V,x),P[O]=x++}else I=new Kt(C,B,A,P[O])}else{B=0,I=new Kt(C,B,A,x);var j=M.vertexBuffer;j||(j=new ha(y,kr.VertexBuffer,N,Dn.Static,c),o.vertexBuffers.push(new IC(j,M.restoreInfo))),i.setVertexBufferBinding(j,M.stride,x),P[O]=x++}if(m.push(I),C==="POSITION"){g=F;var G=i.bounds,$=G.min,W=G.max;if(E.min&&E.max)$.copyFromArray(E.min),W.copyFromArray(E.max);else{var K=Nf._tempVector3;$.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),W.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(var q=B/N.BYTES_PER_ELEMENT,Y=N.length/F,Q=0;Q<F;Q++){var re=q+Q*Y;K.copyFromArray(N,re),z.min($,K,$),z.max(W,K,W)}}R&&($.scale(D),W.scale(D))}});b.push(T)},d=u.accessors,h=l.attributes,_=l.targets,p=l.indices,v=l.mode,y=i.engine,m=new Array,g,x=0,b=new Array;for(var S in h)f(S);return Promise.all(b).then(function(){if(i.setVertexElements(m),p!==void 0){var C=u.accessors[p],E=Hn.getAccessorBuffer(t,u.bufferViews,C).then(function(T){i.setIndices(T.data),i.addSubMesh(0,C.count,v),o.indexBuffer=T.restoreInfo});b.push(E)}else i.addSubMesh(0,g,v);return _&&b.push(Nf._createBlendShape(t,i,o,s,l,_)),Promise.all(b).then(function(){return i.uploadData(!c),i})})},r._getBlendShapeData=function(t,i,o){return Hn.getAccessorBuffer(t,i.bufferViews,o).then(function(s){var l=s.data,u,c=s.interleaved?((u=o.byteOffset)!=null?u:0)%s.stride:0,f=o.count,d=o.normalized,h=o.componentType,_=Hn.bufferToVector3Array(l,c,f,d,h),p=new l9(s.restoreInfo,c,f,d,h);return{vertices:_,restoreInfo:p}})},r._createBlendShape=function(t,i,o,s,l,u){for(var c=this,f=function(g){var x={};y[g]=x;var b=_?_[g]:"blendShape"+g,S=l.targets[g],C=S.NORMAL,E=S.TANGENT,T=C!==void 0,M=E!==void 0,L=Promise.all([c._getBlendShapeData(t,d,h[S.POSITION]),T?c._getBlendShapeData(t,d,h[C]):null,M?c._getBlendShapeData(t,d,h[E]):null]).then(function(F){var N,I=F[0],O=F[1],P=F[2],R=new gx(b);R.addFrame(1,I.vertices,T?O.vertices:null,M?P.vertices:null),x.blendShape=R,x.restoreInfo=new s9(R,I.restoreInfo,T?O.restoreInfo:null,M?(N=P)==null?void 0:N.restoreInfo:null)});p.push(L)},d=t.glTF,h=d.accessors,_=s.extras?s.extras.targetNames:null,p=new Array,v=u.length,y=new Array(v),m=0;m<v;m++)f(m);return Promise.all(p).then(function(){for(var g=ju(y),x;!(x=g()).done;){var b=x.value;i.addBlendShape(b.blendShape),o.blendShapes.push(b.restoreInfo)}})},r}(xn),function(){gg._tempVector3=new z}(),gg);Nf=Tt([so(zt.Mesh)],Nf);var DC=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.parse=function(t,i){var o=t.glTF,s=o.scenes,l=o.scene,u=l===void 0?0:l,c=t.glTFResource,f=s[i],d=f.extensions,h=c.engine,_=u===i,p=f.nodes,v;if(p.length===1)v=t.get(zt.Entity,p[0]);else{v=new yo(h,"GLTF_ROOT");for(var y=0;y<p.length;y++){var m=t.get(zt.Entity,p[y]);v.addChild(m)}}_&&(c._defaultSceneRoot=v);for(var g=new Array,x=0;x<p.length;x++)g.push(this._parseEntityComponent(t,p[x]));return Promise.all(g).then(function(){return xn.executeExtensionsAdditiveAndParse(d,t,v,f),v})},a._parseEntityComponent=function(t,i){var o=this,s=t.glTF,l=t.glTFResource,u=s.nodes[i],c=u.camera,f=u.mesh,d=t.get(zt.Entity,i),h;return c!==void 0&&this._createCamera(l,s.cameras[c],d),f!==void 0&&(h=this._createRenderer(t,u,d)),Promise.resolve(h).then(function(){var _=[],p=u.children;if(p)for(var v=0;v<p.length;v++)_.push(o._parseEntityComponent(t,p[v]));return Promise.all(_)})},a._createCamera=function(t,i,o){var s,l=i.orthographic,u=i.perspective,c=i.type,f=o.addComponent(rn);if(c===cp.ORTHOGRAPHIC){var d=l.xmag,h=l.ymag,_=l.zfar,p=l.znear;f.isOrthographic=!0,p!==void 0&&(f.nearClipPlane=p),_!==void 0&&(f.farClipPlane=_),f.orthographicSize=Math.max(h!=null?h:0,d!=null?d:0)/2}else if(c===cp.PERSPECTIVE){var v=u.aspectRatio,y=u.yfov,m=u.zfar,g=u.znear;v!==void 0&&(f.aspectRatio=v),y!==void 0&&(f.fieldOfView=y*180/Math.PI),m!==void 0&&(f.farClipPlane=m),g!==void 0&&(f.nearClipPlane=g)}(s=t).cameras||(s.cameras=[]),t.cameras.push(f),f.enabled=!1},a._createRenderer=function(t,i,o){for(var s=function(y){var m=h[y],g=m.material;p.push(Promise.all([t.get(zt.Mesh,c),f!==void 0&&t.get(zt.Skin,f),g!==void 0&&t.get(zt.Material,g)]).then(function(x){var b=x[0],S=x[1],C=x[2],E=b[y],T;if(C||(C=Or._getDefaultMaterial(t.glTFResource.engine)),S||_){var M=o.addComponent(Ur);M.mesh=E,S&&(M.rootBone=S._rootBone,M.bones=S._bones,l._computeLocalBounds(M,E,S._bones,S._rootBone,S.inverseBindMatrices),M.skin=S),_&&(M.blendShapeWeights=new Float32Array(_)),T=M}else T=o.addComponent(yr),T.mesh=E;T.setMaterial(C),E.vertexElements.forEach(function(L){L.semantic==="COLOR_0"&&(T.enableVertexColor=!0)}),xn.executeExtensionsAdditiveAndParse(m.extensions,t,T,m)}))},l=this,u=t.glTF.meshes,c=i.mesh,f=i.skin,d=u[c],h=d.primitives,_=i.weights||d.weights,p=new Array,v=0;v<h.length;v++)s(v);return Promise.all(p)},a._computeLocalBounds=function(t,i,o,s,l){var u=o.indexOf(s);if(u!==-1)Da.transform(i.bounds,l[u],t.localBounds);else{var c=new Ge(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),f=this._computeApproximateBindMatrix(o,l,s,c);f!==0?(Ge.multiplyScalar(c,1/f,c),Da.transform(i.bounds,c,t.localBounds)):t.localBounds.copyFrom(i.bounds)}},a._computeApproximateBindMatrix=function(t,i,o,s){for(var l=0,u=o.children,c=0,f=u.length;c<f;c++){var d=u[c],h=t.indexOf(d);h!==-1?(Ge.add(s,i[h],s),l++):l+=this._computeApproximateBindMatrix(t,i,d,s)}return l},r}(xn);DC=Tt([so(zt.Scene)],DC);var BC=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.parse=function(t,i){var o=this,s=t.glTF,l=s.skins[i],u=l.inverseBindMatrices,c=l.skeleton,f=l.joints,d=l.name,h=d===void 0?"SKIN_"+i:d,_=f.length,p=new yP(h);p.inverseBindMatrices.length=_,p._bones.length=_;var v=s.accessors[u],y=Hn.getAccessorBuffer(t,s.bufferViews,v).then(function(m){for(var g=t.get(zt.Entity),x=m.data,b=0;b<_;b++){var S=new Ge;S.copyFromArray(x,b*16),p.inverseBindMatrices[b]=S;var C=g[f[b]];if(p._bones[b]=C,p.joints[b]=C.name,c!==void 0){var E=g[c];p._rootBone=E,p.skeleton=E.name}else{var T=o._findSkeletonRootBone(f,g);if(T)p._rootBone=T,p.skeleton=T.name;else throw"Failed to find skeleton root bone."}}return p});return Promise.resolve(y)},a._findSkeletonRootBone=function(t,i){for(var o={},s=ju(t),l;!(l=s()).done;){for(var u=l.value,c=new Array,f=i[u];f;)c.unshift(f),f=f.parent;o[u]=c}for(var d=null,h=0;;h++){var _=o[t[0]];if(h>=_.length)return d;for(var p=_[h],v=1,y=t.length;v<y;v++)if(_=o[t[v]],h>=_.length||p!==_[h])return d;d=p}},r}(xn);BC=Tt([so(zt.Skin)],BC);var mg,dp=(mg=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.parse=function(t,i){var o=t.glTF.textures[i],s=t.glTFResource,l=t.glTF,u=s.engine,c=s.url,f=o.sampler,d=o.source,h=d===void 0?0:d,_=o.name,p=o.extensions,v=l.images[h],y=v.uri,m=v.bufferView,g=v.mimeType,x=v.name,b=xn.executeExtensionsCreateAndParse(p,t,o);if(!b){var S=f!==void 0,C=f!==void 0&&Hn.getSamplerInfo(l.samplers[f]);if(y){var E,T=y.lastIndexOf("."),M=y.substring(T+1),L=M.startsWith("ktx")?vn.KTX:vn.Texture2D;b=u.resourceManager.load({url:Mn.resolveAbsoluteUrl(c,y),type:L,params:{mipmap:(E=C)==null?void 0:E.mipmap}}).onProgress(void 0,t._onTaskDetail).then(function(N){return N.name=_||x||N.name||"texture_"+i,S&&Hn.parseSampler(N,C),N}),t._addTaskCompletePromise(b)}else{var F=l.bufferViews[m];b=t.get(zt.Buffer).then(function(N){var I=N[F.buffer],O=new Uint8Array(I,F.byteOffset,F.byteLength);return Hn.loadImageBuffer(O,g).then(function(P){var R,A=new br(u,P.width,P.height,void 0,(R=C)==null?void 0:R.mipmap);A.setImageSource(P),A.generateMipmaps(),A.name=_||x||"texture_"+i,S&&Hn.parseSampler(A,C);var D=new HP(A,F,g);return t.contentRestorer.bufferTextures.push(D),A})})}}return Promise.resolve(b).then(function(N){return xn.executeExtensionsAdditiveAndParse(p,t,N,o),N._associationSuperResource(s),N})},r}(xn),function(){var n;mg._wrapMap=(n={},n[Lf.CLAMP_TO_EDGE]=pr.Clamp,n[Lf.MIRRORED_REPEAT]=pr.Mirror,n[Lf.REPEAT]=pr.Repeat,n)}(),mg);dp=Tt([so(zt.Texture)],dp);var kC=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.parse=function(t){var i=t.glTF,o=i.asset.version,s=i.extensionsUsed,l=i.extensionsRequired,u=Number(o);if(!(u>=2&&u<3))throw"Only support glTF 2.x.";if(s){Pt.info("extensionsUsed: ",s);for(var c=0;c<s.length;c++){var f=s[c];xn.hasExtensionParser(f)||Pt.warn("Extension "+f+" is not implemented, you can customize this extension in gltf.")}}if(l){Pt.info("extensionsRequired: "+l);for(var d=0;d<l.length;d++){var h=l[d];xn.hasExtensionParser(h)||Pt.error("GLTF parser has not supported required extension "+h+".")}}return Promise.resolve(null)},r}(xn);kC=Tt([so(zt.Validator)],kC);var VC=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.parse=function(t,i){var o=t.glTF.bufferViews[i],s=o.extensions,l=o.byteOffset,u=l===void 0?0:l,c=o.byteLength,f=o.buffer;return s?xn.executeExtensionsCreateAndParse(s,t,o):t.get(zt.Buffer,f).then(function(d){return new Uint8Array(d,u,c)})},r}(xn);VC=Tt([so(zt.BufferView)],VC);var av=function(){var n=function(v){for(var y=new Uint8Array(v.length),m=0;m<v.length;++m){var g=v.charCodeAt(m);y[m]=g>96?g-97:g>64?g-39:g+4}for(var x=0,b=0;b<v.length;++b)y[x++]=y[b]<60?s[y[b]]:(y[b]-60)*64+y[++b];return y.buffer.slice(0,x)},r=function(v,y,m,g,x,b){var S=u.exports.sbrk,C=m+3&-4,E=S(C*g),T=S(x.length),M=new Uint8Array(u.exports.memory.buffer);M.set(x,T);var L=v(E,m,g,T,x.length);if(L==0&&b&&b(E,C,g),y.set(M.subarray(E,E+m*g)),S(E-S(0)),L!=0)throw new Error("Malformed buffer data: "+L)},a=function(v){var y={object:new Worker(v),pending:0,requests:{}};return y.object.onmessage=function(m){var g=m.data;y.pending-=g.count,y.requests[g.id][g.action](g.value),delete y.requests[g.id]},y},e=function(v){for(var y="var instance; var ready = WebAssembly.instantiate(new Uint8Array(["+new Uint8Array(n(l))+`]), {}).then(function(result) {instance = result.instance; instance.exports.__wasm_call_ctors();});
self.onmessage = workerProcess;
function decode(fun, target, count, size, source, filter) {
        const sbrk = instance.exports.sbrk;
        const count4 = (count + 3) & ~3;
        const tp = sbrk(count4 * size);
        const sp = sbrk(source.length);
        const heap = new Uint8Array(instance.exports.memory.buffer);
        heap.set(source, sp);
        const res = fun(tp, count, size, sp, source.length);
        if (res == 0 && filter) {
          filter(tp, count4, size);
        }
        target.set(heap.subarray(tp, tp + count * size));
        sbrk(tp - sbrk(0));
        if (res != 0) {
          throw new Error("Malformed buffer data: " + res);
        }
      }
function workerProcess(event) {
        ready.then(function () {
          const data = event.data;
          try {
            const target = new Uint8Array(data.count * data.size);
            decode(instance.exports[data.mode], target, data.count, data.size, data.source, instance.exports[data.filter]);
            self.postMessage({ id: data.id, count: data.count, action: "resolve", value: target }, [target.buffer]);
          } catch (error) {
            self.postMessage({
              id: data.id,
              count: data.count,
              action: "reject",
              value: error
            });
          }
        });
      }`,m=new Blob([y],{type:"text/javascript"}),g=URL.createObjectURL(m),x=0;x<v;++x)h[x]=a(g);URL.revokeObjectURL(g)},t=function(v,y,m,g,x){for(var b=h[0],S=1;S<h.length;++S)h[S].pending<b.pending&&(b=h[S]);return new Promise(function(C,E){var T=new Uint8Array(m),M=_++;b.pending+=v,b.requests[M]={resolve:C,reject:E},b.object.postMessage({id:M,count:v,size:y,source:T,mode:g,filter:x},[T.buffer])})},i="b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuikqbeeedddillviebeoweuec:q;iekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbol79IV9Rbrq:P8Yqdbk;3sezu8Jjjjjbcj;eb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Radz1jjjbhwcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhDcbhqinaqae9pmeaDaeaq9RaqaDfae6Egkcsfgocl4cifcd4hxdndndndnaoc9WGgmTmbcbhPcehsawcjdfhzalhHinaraH9Rax6midnaraHaxfgl9RcK6mbczhoinawcj;cbfaogifgoc9WfhOdndndndndnaHaic9WfgAco4fRbbaAci4coG4ciGPlbedibkaO9cb83ibaOcwf9cb83ibxikaOalRblalRbbgAco4gCaCciSgCE86bbaocGfalclfaCfgORbbaAcl4ciGgCaCciSgCE86bbaocVfaOaCfgORbbaAcd4ciGgCaCciSgCE86bbaoc7faOaCfgORbbaAciGgAaAciSgAE86bbaoctfaOaAfgARbbalRbegOco4gCaCciSgCE86bbaoc91faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc4faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc93faAaCfgARbbaOciGgOaOciSgOE86bbaoc94faAaOfgARbbalRbdgOco4gCaCciSgCE86bbaoc95faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc96faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc97faAaCfgARbbaOciGgOaOciSgOE86bbaoc98faAaOfgORbbalRbiglco4gAaAciSgAE86bbaoc99faOaAfgORbbalcl4ciGgAaAciSgAE86bbaoc9:faOaAfgORbbalcd4ciGgAaAciSgAE86bbaocufaOaAfgoRbbalciGglalciSglE86bbaoalfhlxdkaOalRbwalRbbgAcl4gCaCcsSgCE86bbaocGfalcwfaCfgORbbaAcsGgAaAcsSgAE86bbaocVfaOaAfgORbbalRbegAcl4gCaCcsSgCE86bbaoc7faOaCfgORbbaAcsGgAaAcsSgAE86bbaoctfaOaAfgORbbalRbdgAcl4gCaCcsSgCE86bbaoc91faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc4faOaAfgORbbalRbigAcl4gCaCcsSgCE86bbaoc93faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc94faOaAfgORbbalRblgAcl4gCaCcsSgCE86bbaoc95faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc96faOaAfgORbbalRbvgAcl4gCaCcsSgCE86bbaoc97faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc98faOaAfgORbbalRbogAcl4gCaCcsSgCE86bbaoc99faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc9:faOaAfgORbbalRbrglcl4gAaAcsSgAE86bbaocufaOaAfgoRbbalcsGglalcsSglE86bbaoalfhlxekaOal8Pbb83bbaOcwfalcwf8Pbb83bbalczfhlkdnaiam9pmbaiczfhoaral9RcL0mekkaiam6mialTmidnakTmbawaPfRbbhOcbhoazhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkkazcefhzaPcefgPad6hsalhHaPad9hmexvkkcbhlasceGmdxikalaxad2fhCdnakTmbcbhHcehsawcjdfhminaral9Rax6mialTmdalaxfhlawaHfRbbhOcbhoamhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkamcefhmaHcefgHad6hsaHad9hmbkaChlxikcbhocehsinaral9Rax6mdalTmealaxfhlaocefgoad6hsadao9hmbkaChlxdkcbhlasceGTmekc9:hoxikabaqad2fawcjdfakad2z1jjjb8Aawawcjdfakcufad2fadz1jjjb8Aakaqfhqalmbkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;ebf8Kjjjjbaok;yzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecjez:jjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;siliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabavcefciGaiVcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:Ohkxekcjjjj94hkkabavcdfciGaiVcetfak87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:Ohqxekcjjjj94hqkabavcufciGaiVcetfaq87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohqxekcjjjj94hqkabavciGaiVcetfaq87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2geTmbinababydbgdcwtcw91:Yadce91cjjj;8ifcjjj98G::NUdbabclfhbaecufgembkkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaiczfhiaeczfheadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkkkebcjwklz9Kbb",o="b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuikqbbebeedddilve9Weeeviebeoweuec:q;Aekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbwl79IV9RbDq;t9tqlbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk;h8JlHud97euo978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Rad;8qbbcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhwcbhDinaDae9pmeawaeaD9RaDawfae6Egqcsfgoc9WGgkci2hxakcethmaocl4cifcd4hPabaDad2fhscbhzdnincehHalhOcbhAdninaraO9RaP6miavcj;cbfaAak2fhCaOaPfhlcbhidnakc;ab6mbaral9Rc;Gb6mbcbhoinaCaofhidndndndndnaOaoco4fRbbgXciGPlbedibkaipxbbbbbbbbbbbbbbbbpklbxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklbalczfhlkdndndndndnaXcd4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklzxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklzalczfhlkdndndndndnaXcl4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklaxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklaalczfhlkdndndndndnaXco4Plbedibkaipxbbbbbbbbbbbbbbbbpkl8WxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalclfaYpQbfaXc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalcwfaYpQbfaXc:q:yjjbfRbbfhlxekaialpbbbpkl8Walczfhlkaoc;abfhiaocjefak0meaihoaral9Rc;Fb0mbkkdndnaiak9pmbaici4hoinaral9RcK6mdaCaifhXdndndndndnaOaico4fRbbaocoG4ciGPlbedibkaXpxbbbbbbbbbbbbbbbbpklbxikaXalpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaXalpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaXalpbbbpklbalczfhlkaocdfhoaiczfgiak6mbkkalTmbaAci6hHalhOaAcefgohAaoclSmdxekkcbhlaHceGmdkdnakTmbavcjdfazfhiavazfpbdbhYcbhXinaiavcj;cbfaXfgopblbgLcep9TaLpxeeeeeeeeeeeeeeeegQp9op9Hp9rgLaoakfpblbg8Acep9Ta8AaQp9op9Hp9rg8ApmbzeHdOiAlCvXoQrLgEaoamfpblbg3cep9Ta3aQp9op9Hp9rg3aoaxfpblbg5cep9Ta5aQp9op9Hp9rg5pmbzeHdOiAlCvXoQrLg8EpmbezHdiOAlvCXorQLgQaQpmbedibedibedibediaYp9UgYp9AdbbaiadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaEa8EpmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwKDYq8AkEx3m5P8Es8FgLa3a5pmwKDYq8AkEx3m5P8Es8Fg8ApmbezHdiOAlvCXorQLgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfhiaXczfgXak6mbkkazclfgzad6mbkasavcjdfaqad2;8qbbavavcjdfaqcufad2fad;8qbbaqaDfhDc9:hoalmexikkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;kbf8Kjjjjbaokwbz:bjjjbk;uzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:EPliuo97eue978Jjjjjbca9Rhidndnadcl9hmbdnaec98GglTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalae9pmeaiaeciGgvcdtgdVcbczad9R;8kbaiabalcdtfglad;8qbbdnavTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkalaiad;8qbbskdnaec98GgxTmbcbhvabhdinadczfglalpbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oawaopmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgvax6mbkkaxae9pmbaiaeciGgvcitgdfcbcaad9R;8kbaiabaxcitfglad;8qbbdnavTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oawaopmbezHdiOAlvCXorQLp9qpklbkalaiad;8qbbkk;4wllue97euv978Jjjjjbc8W9Rhidnaec98GglTmbcbhvabhoinaiaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklbaopxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblbpEb:T:j83ibaocwfarp5eaipblbpEe:T:j83ibawaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblbpEd:T:j83ibaocKfakp5eaipblbpEi:T:j83ibaocafhoavclfgval6mbkkdnalae9pmbaiaeciGgvcitgofcbcaao9R;8kbaiabalcitfgwao;8qbbdnavTmbaiaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklaaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblapEb:T:j83ibaiarp5eaipblapEe:T:j83iwaiaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblapEd:T:j83izaiakp5eaipblapEi:T:j83iKkawaiao;8qbbkk:Pddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbhdabheinaeaepbbbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepkbbaeczfheadclfgdav6mbkkdnaval9pmbaialciGgdcdtgeVcbc;abae9R;8kbaiabavcdtfgvae;8qbbdnadTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepklbkavaiae;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz9Tbb",s=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]),l=To._detectSIMDSupported()?o:i,u,c=WebAssembly.instantiate(n(l),{}).then(function(p){u=p.instance,u.exports.__wasm_call_ctors()}),f={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},d={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"},h=[],_=0;return{workerCount:4,ready:c,useWorkers:function(){e(this.workerCount)},decodeGltfBuffer:function(v,y,m,g,x){return this.workerCount>0&&h.length===0&&this.useWorkers(),h.length>0?t(v,y,m,d[g],f[x]):c.then(function(){var b=new Uint8Array(v*y);return r(u.exports[d[g]],b,v,y,m,u.exports[f[x]]),b})},release:function(){for(var v=0;v<h.length;v++)h[v].object.terminate()}}}(),UC=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.initialize=function(t,i){var o,s=(o=i.glTF)==null?void 0:o.meshOpt;return s&&(av.workerCount=s.workerCount,av.useWorkers()),Promise.resolve()},a.load=function(t,i){var o=t.url,s=t.params,l=new Q6(i.engine,o),u=new Ox(l,i,ra({keepMeshData:!1},s));return new sn(function(c,f,d,h){u._setTaskCompleteProgress=d,u._setTaskDetailProgress=h,u.parse().then(c).catch(f)})},r.release=function(){av.release()},r}(ln);UC=Tt([kn(vn.GLTF,["gltf","glb"])],UC);var Dt,hu=Math.PI,Ff=(Dt=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.load=function(t,i){var o=this;return new sn(function(s,l){var u=i.engine;o.request(t.url,{type:"arraybuffer"}).then(function(c){for(var f=new Uint8Array(c),d=Ff._parseHeader(f),h=d.width,_=d.height,p=d.dataPosition,v=Ff._readPixels(f.subarray(p),h,_),y=_>>1,m=Ff._convertToCubemap(v,h,_,y),g=new Ma(u,y),x=0;x<6;x++)g.setPixelBuffer(Oi.PositiveX+x,m[x],0);g.generateMipmaps(),s(g)}).catch(l)})},r._convertToCubemap=function(t,i,o,s){if(!t)throw"ConvertPanoramaToCubemap: input cannot be null";if(t.length!=i*o*4)throw"ConvertPanoramaToCubemap: input size is wrong";var l=this._createCubemapData(s,this._faceRight,t,i,o),u=this._createCubemapData(s,this._faceLeft,t,i,o),c=this._createCubemapData(s,this._faceUp,t,i,o),f=this._createCubemapData(s,this._faceBottom,t,i,o),d=this._createCubemapData(s,this._faceFront,t,i,o),h=this._createCubemapData(s,this._faceBack,t,i,o);return[l,u,c,f,d,h]},r._createCubemapData=function(t,i,o,s,l){for(var u=new Uint8ClampedArray(t*t*4),c=this._tempVector3.set(0,0,0).add(i[1]).subtract(i[0]).scale(1/t),f=this._temp2Vector3.set(0,0,0).add(i[3]).subtract(i[2]).scale(1/t),d=1/t,h=0,_=0;_<t;_++){for(var p=this._temp3Vector3.set(0,0,0).add(i[0]),v=this._temp4Vector3.set(0,0,0).add(i[2]),y=0;y<t;y++){var m=this._temp5Vector3.set(0,0,0).add(v).subtract(p).scale(h).add(p);m.normalize();var g=this._calcProjectionSpherical(m,o,s,l);this._RGBEToLinear(g),this._linearToRGBM(g,5);var x=_*t*4+y*4;u[x]=g.r,u[x+1]=g.g,u[x+2]=g.b,u[x+3]=g.a,p.add(c),v.add(f)}h+=d}return u},r._calcProjectionSpherical=function(t,i,o,s){for(var l=Math.atan2(t.z,t.x),u=Math.acos(t.y);l<-hu;)l+=2*hu;for(;l>hu;)l-=2*hu;var c=l/hu,f=u/hu;c=c*.5+.5;var d=Math.round(c*o);d<0?d=0:d>=o&&(d=o-1);var h=Math.round(f*s);h<0?h=0:h>=s&&(h=s-1);var _=s-h-1,p=_*o*4+d*4,v=i[p],y=i[p+1],m=i[p+2],g=i[p+3];return new Me(v,y,m,g)},r._readStringLine=function(t,i){for(var o="",s="",l=i;l<t.length-i&&(s=String.fromCharCode(t[l]),s!=`
`);l++)o+=s;return o},r._parseHeader=function(t){var i=0,o=0,s=this._readStringLine(t,0);if(s[0]!="#"||s[1]!="?")throw"Bad HDR Format.";var l=!1,u=!1,c=0;do c+=s.length+1,s=this._readStringLine(t,c),s=="FORMAT=32-bit_rle_rgbe"?u=!0:s.length==0&&(l=!0);while(!l);if(!u)throw"HDR Bad header format, unsupported FORMAT";c+=s.length+1,s=this._readStringLine(t,c);var f=/^\-Y (.*) \+X (.*)$/g,d=f.exec(s);if(!d||d.length<3)throw"HDR Bad header format, no size";if(o=parseInt(d[2]),i=parseInt(d[1]),o<8||o>32767)throw"HDR Bad header format, unsupported size";return c+=s.length+1,{height:i,width:o,dataPosition:c}},r._readPixels=function(t,i,o){for(var s=i,l=t.byteLength,u=new Uint8Array(4*i*o),c=0,f=0,d=4*s,h=new Uint8Array(4),_=new Uint8Array(d),p=o;p>0&&f<l;){if(h[0]=t[f++],h[1]=t[f++],h[2]=t[f++],h[3]=t[f++],h[0]!=2||h[1]!=2||(h[2]<<8|h[3])!=s)throw"HDR Bad header format, wrong scan line width";for(var v=0,y=void 0;v<d&&f<l;){y=t[f++];var m=y>128;if(m&&(y-=128),y===0||v+y>d)throw"HDR Bad Format, bad scanline data (run)";if(m)for(var g=t[f++],x=0;x<y;x++)_[v++]=g;else _.set(t.subarray(f,f+y),v),v+=y,f+=y}for(var b=s,S=0;S<b;S++){var C=0;u[c]=_[S+C],C+=s,u[c+1]=_[S+C],C+=s,u[c+2]=_[S+C],C+=s,u[c+3]=_[S+C],c+=4}p--}return u},r._RGBEToLinear=function(t){var i=Math.pow(2,t.a-128)/255;t.r*=i,t.g*=i,t.b*=i,t.a=1},r._linearToRGBM=function(t,i){var o=Math.max(t.r,Math.max(t.g,t.b)),s=Math.min(o/i,1);s=Math.ceil(s*255);var l=65025/(s*i);t.r*=l,t.g*=l,t.b*=l,t.a*=s},r}(ln),function(){Dt._rightBottomBack=new z(1,-1,-1)}(),function(){Dt._rightBottomFront=new z(1,-1,1)}(),function(){Dt._rightUpBack=new z(1,1,-1)}(),function(){Dt._rightUpFront=new z(1,1,1)}(),function(){Dt._leftBottomBack=new z(-1,-1,-1)}(),function(){Dt._leftBottomFront=new z(-1,-1,1)}(),function(){Dt._leftUpBack=new z(-1,1,-1)}(),function(){Dt._leftUpFront=new z(-1,1,1)}(),function(){Dt._faceRight=[Dt._rightBottomBack,Dt._rightBottomFront,Dt._rightUpBack,Dt._rightUpFront]}(),function(){Dt._faceLeft=[Dt._leftBottomFront,Dt._leftBottomBack,Dt._leftUpFront,Dt._leftUpBack]}(),function(){Dt._faceUp=[Dt._leftBottomFront,Dt._rightBottomFront,Dt._leftBottomBack,Dt._rightBottomBack]}(),function(){Dt._faceBottom=[Dt._leftUpBack,Dt._rightUpBack,Dt._leftUpFront,Dt._rightUpFront]}(),function(){Dt._faceFront=[Dt._leftBottomBack,Dt._rightBottomBack,Dt._leftUpBack,Dt._rightUpBack]}(),function(){Dt._faceBack=[Dt._rightBottomFront,Dt._leftBottomFront,Dt._rightUpFront,Dt._leftUpFront]}(),function(){Dt._tempVector3=new z}(),function(){Dt._temp2Vector3=new z}(),function(){Dt._temp3Vector3=new z}(),function(){Dt._temp4Vector3=new z}(),function(){Dt._temp5Vector3=new z}(),Dt);Ff=Tt([kn(vn.HDR,["hdr"])],Ff);var zC=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.load=function(t){return this.request(t.url,ra({},t,{type:"json"}))},r}(ln);zC=Tt([kn(vn.JSON,["json"],!1)],zC);var u9=12+13*4,c9=0;function f9(n,r){for(var a=[],e=u9+n.bytesOfKeyValueData,t=n.pixelWidth,i=n.pixelHeight,o=r?n.numberOfMipmapLevels:1,s=0;s<o;s++){var l=new Int32Array(n.buffer,e,1)[0];e+=4;for(var u=0;u<n.numberOfFaces;u++){var c=new Uint8Array(n.buffer,e,l);a.push({data:c,width:t,height:i}),e+=l,e+=3-(l+3)%4}t=Math.max(1,t*.5),i=Math.max(1,i*.5)}return a}function d9(n){if(n.byteLength>=12){var r=new Uint8Array(n,0,12);if(r[0]===171&&r[1]===75&&r[2]===84&&r[3]===88&&r[4]===32&&r[5]===49&&r[6]===49&&r[7]===187&&r[8]===13&&r[9]===10&&r[10]===26&&r[11]===10)return!0}return!1}function h9(n){switch(n){case Ct.RGB_S3TC_DXT1_EXT:return ye.BC1;case Ct.RGBA_S3TC_DXT5_EXT:return ye.BC3;case Ct.RGBA_BPTC_UNORM_EXT:return ye.BC7;case Ct.RGB_ETC1_WEBGL:return ye.ETC1_RGB;case Ct.RGB8_ETC2:return ye.ETC2_RGB;case Ct.RGB8_PUNCHTHROUGH_ALPHA1_ETC2:return ye.ETC2_RGBA5;case Ct.RGBA8_ETC2_EAC:return ye.ETC2_RGBA8;case Ct.RGB_PVRTC_2BPPV1_IMG:return ye.PVRTC_RGB2;case Ct.RGBA_PVRTC_2BPPV1_IMG:return ye.PVRTC_RGBA2;case Ct.RGB_PVRTC_4BPPV1_IMG:return ye.PVRTC_RGB4;case Ct.RGBA_PVRTC_4BPPV1_IMG:return ye.PVRTC_RGBA4;case Ct.RGBA_ASTC_4X4_KHR:return ye.ASTC_4x4;case Ct.RGBA_ASTC_5X5_KHR:return ye.ASTC_5x5;case Ct.RGBA_ASTC_6X6_KHR:return ye.ASTC_6x6;case Ct.RGBA_ASTC_8X8_KHR:return ye.ASTC_8x8;case Ct.RGBA_ASTC_10X10_KHR:return ye.ASTC_10x10;case Ct.RGBA_ASTC_12X12_KHR:return ye.ASTC_12x12;default:var r=Ct[n];throw new Error("this format is not supported in Galacean Engine: "+r)}}var jP={parse:function(r,a,e,t){if(t===void 0&&(t=!1),!d9(r))throw new Error("khronosTextureContainerParser: invalid KTX file, texture missing KTX identifier");var i=Uint32Array.BYTES_PER_ELEMENT,o=new DataView(r,12,13*i),s=o.getUint32(0,!0),l=s===67305985,u={buffer:r,glType:o.getUint32(1*i,l),glTypeSize:o.getUint32(2*i,l),glFormat:o.getUint32(3*i,l),glInternalFormat:o.getUint32(4*i,l),glBaseInternalFormat:o.getUint32(5*i,l),pixelWidth:o.getUint32(6*i,l),pixelHeight:o.getUint32(7*i,l),pixelDepth:o.getUint32(8*i,l),numberOfArrayElements:o.getUint32(9*i,l),numberOfFaces:o.getUint32(10*i,l),numberOfMipmapLevels:o.getUint32(11*i,l),bytesOfKeyValueData:o.getUint32(12*i,l),loadType:c9};if(u.glType!==0)throw new Error("only compressed formats currently supported");if(u.numberOfMipmapLevels=Math.max(1,u.numberOfMipmapLevels),u.pixelHeight===0||u.pixelDepth!==0)throw new Error("only 2D textures currently supported");if(u.numberOfArrayElements!==0)throw new Error("texture arrays not currently supported");if(u.numberOfFaces!==a)throw new Error("number of faces expected"+a+", but found "+u.numberOfFaces);return e&&(u.mipmaps=f9(u,!0)),t&&(u.engineFormat=h9(u.glInternalFormat)),u}};function v9(n){var r=jP.parse(n,1,!0,!0);return{mipmaps:r.mipmaps,engineFormat:r.engineFormat,internalFormat:r.glInternalFormat,width:r.pixelWidth,height:r.pixelHeight}}function p9(n){for(var r=[],a,e,t,i,o=0;o<n.length;o++){var s=jP.parse(n[o],1,!0,!0);r.push(s.mipmaps),o===0&&(t=s.pixelWidth,i=s.pixelHeight,a=s.glInternalFormat,e=s.engineFormat)}return{mipmapsFaces:r,engineFormat:e,internalFormat:a,width:t,height:i}}var GC=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.load=function(t,i){var o=this;return new sn(function(s,l){Promise.all(t.urls.map(function(u){return o.request(u,ra({},t,{type:"arraybuffer"}))})).then(function(u){for(var c=p9(u),f=c.width,d=c.mipmapsFaces,h=c.engineFormat,_=d[0].length>1,p=new Ma(i.engine,f,h,_),v=0;v<6;v++)for(var y=d[v].length,m=0;m<y;m++){var g=d[v][m],x=g.data,b=g.width,S=g.height;p.setPixelBuffer(Oi.PositiveX+v,x,m,0,0,b,S)}s(p)}).catch(function(u){l(u)})})},r}(ln);GC=Tt([kn(vn.KTXCube,[])],GC);var HC=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.load=function(t,i){var o=this;return new sn(function(s,l){o.request(t.url,ra({},t,{type:"arraybuffer"})).then(function(u){for(var c=v9(u),f=c.width,d=c.height,h=c.mipmaps,_=c.engineFormat,p=h.length>1,v=new br(i.engine,f,d,_,p),y=0;y<h.length;y++){var m=h[y],g=m.width,x=m.height,b=m.data;v.setPixelBuffer(b,y,0,0,g,x)}s(v)}).catch(function(u){l(u)})})},r}(ln);HC=Tt([kn(vn.KTX,["ktx"])],HC);function WP(n,r,a){if(typeof a=="object")for(var e in a)WP(n[r],e,a[e]);else n[r]=a}var jC=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.load=function(t,i){var o=this;return new sn(function(s,l){o.request(t.url,ra({},t,{type:"json"})).then(function(u){var c=function(M){var L=_[M],F=L.type,N=L.value;switch(F){case"Vector2":g.setVector2(M,new Ze(N.x,N.y));break;case"Vector3":g.setVector3(M,new z(N.x,N.y,N.z));break;case"Vector4":g.setVector4(M,new pt(N.x,N.y,N.z,N.w));break;case"Color":g.setColor(M,new Me(N.r,N.g,N.b,N.a));break;case"Float":g.setFloat(M,N);break;case"Texture":m.push(i.getResourceByRef(N).then(function(I){g.setTexture(M,I)}));break;case"Boolean":g.setInt(M,N?1:0);break;case"Integer":g.setInt(M,Number(N));break}},f=i.engine,d=u.name,h=u.shader,_=u.shaderData,p=u.macros,v=u.renderState,y=new Qa(f,vt.find(h));y.name=d;var m=new Array,g=y.shaderData;for(var x in _)c(x);for(var b=0,S=p.length;b<S;b++){var C=p[b],E=C.name,T=C.value;T==null?g.enableMacro(E):g.enableMacro(E,T)}return WP(y,"renderState",v),Promise.all(m).then(function(){s(y)})}).catch(l)})},r}(ln);jC=Tt([kn(vn.Material,["json"])],jC);var WC=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.load=function(t,i){var o=this;return new sn(function(s,l){o.request(t.url,ra({},t,{type:"arraybuffer"})).then(function(u){return __(u,i.engine)}).then(function(u){s(u)}).catch(l)})},r}(ln);WC=Tt([kn(vn.Mesh,["mesh"])],WC);var $C=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.load=function(t,i){var o=i.engine;return this.request(t.url,ra({},t,{type:"json"})).then(function(s){switch(s.type){case"sphere":return Gn.createSubdivisionSurfaceSphere(o,s.sphereRadius,s.sphereStep);case"capsule":return Gn.createCapsule(o,s.capsuleRadius,s.capsuleHeight,s.capsuleRadialSegments,s.capsuleHeightSegments);case"cone":return Gn.createCone(o,s.coneRadius,s.coneHeight,s.coneRadialSegment,s.coneHeightSegment);case"cuboid":return Gn.createCuboid(o,s.cuboidWidth,s.cuboidHeight,s.cuboidDepth);case"cylinder":return Gn.createCylinder(o,s.cylinderRadiusTop,s.cylinderRadiusBottom,s.cylinderHeight,s.cylinderRadialSegment,s.cylinderHeightSegment);case"plane":return Gn.createPlane(o,s.planeWidth,s.planeHeight,s.planeHorizontalSegments,s.planeVerticalSegments);case"torus":return Gn.createTorus(o,s.torusRadius,s.torusTubeRadius,s.torusRadialSegments,s.torusTubularSegments,s.torusArc)}})},r}(ln);$C=Tt([kn(vn.PrimitiveMesh,["mesh"],!1)],$C);var XC;(function(n){n.Sphere="sphere",n.Cuboid="cuboid",n.Plane="plane",n.Cylinder="cylinder",n.Torus="torus",n.Cone="cone",n.Capsule="capsule"})(XC||(XC={}));var KC=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.load=function(t,i){var o=this,s=i.engine;return new sn(function(l,u){o.request(t.url,{type:"json"}).then(function(c){return s.resourceManager.initVirtualResources(c.files),i.load({type:vn.Scene,url:c.scene}).then(function(f){s.sceneManager.activeScene=f,l()})}).catch(u)})},r}(ln);KC=Tt([kn(vn.Project,["proj"],!1)],KC);var YC=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.load=function(t,i){var o=this;return new sn(function(s,l){var u=t.url;o._registerFont(u,u).then(function(){var c=new uc(i.engine,u);s(c)}).catch(function(c){l("load font "+u+" fail")})})},a._registerFont=function(t,i){return g_(function(){var o;return v_(this,function(s){switch(s.label){case 0:return o=new FontFace(t,"url("+i+")"),[4,o.load()];case 1:return s.sent(),document.fonts.add(o),[2]}})})()},r}(ln);YC=Tt([kn(vn.SourceFont,["ttf","otf","woff"],!1)],YC);var QC=function(n){gt(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._tempRect=new ho,e._tempVec2=new Ze,e._tempVec4=new pt,e}var a=r.prototype;return a.load=function(t,i){var o=this;return new sn(function(s,l,u,c,f){var d=[];f(function(){for(var _=0;_<d.length;_++)d[_].cancel()});var h=o.request(t.url,ra({},t,{type:"json"}));d.push(h),h.then(function(_){var p=function(L){var F=v[L];if(F.img){var N;d.push(i.load({url:Mn.resolveAbsoluteUrl(t.url,F.img),type:(N=F.type)!=null?N:vn.Texture2D,params:{format:S,mipmap:y}}).then(function(O){m&&(O.anisoLevel=m),g!==void 0&&(O.filterMode=g),x!==void 0&&(O.wrapModeU=x),b!==void 0&&(O.wrapModeV=b);for(var P=0;P<F.sprites.length;P++)T._addSprite(o._makeSprite(E,F.sprites[P],O))}).catch(l))}else for(var I=0;I<F.sprites.length;I++)T._addSprite(o._makeSprite(E,F.sprites[I]))},v=_.atlasItems,y=_.mipmap,m=_.anisoLevel,g=_.filterMode,x=_.wrapModeU,b=_.wrapModeV,S=_.format,C=v?v.length:0,E=i.engine,T=new fP(E);if(C<0){s(T);return}d.length=0;for(var M=0;M<v.length;M++)p(M);sn.all(d).then(function(){s(T)}).catch(l)}).catch(l)})},a._makeSprite=function(t,i,o){var s=i.region,l=i.atlasRegionOffset,u=i.atlasRegion,c=i.pivot,f=i.border,d=i.width,h=i.height,_=new Wv(t,o,s?this._tempRect.set(s.x,s.y,s.w,s.h):void 0,c?this._tempVec2.set(c.x,c.y):void 0,f?this._tempVec4.set(f.x,f.y,f.z,f.w):void 0,i.name);if(o){var p=1/o.width,v=1/o.height;if(_.atlasRegion.set(u.x*p,u.y*v,u.w*p,u.h*v),l){var y=l.x,m=l.y,g=l.z,x=l.w;_.atlasRegionOffset.set(y*p,m*v,g*p,x*v)}i.atlasRotated&&(_.atlasRotated=!0)}return isNaN(d)||(_.width=d),isNaN(h)||(_.height=h),_},r}(ln);QC=Tt([kn(vn.SpriteAtlas,["atlas"],!1)],QC);var qC=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.load=function(t,i){var o=this;return this.request(t.url,ra({},t,{type:"json"})).then(function(s){return s.belongToAtlas?o._loadFromAtlas(i,s):o._loadFromTexture(i,s)})},a._loadFromAtlas=function(t,i){var o=this;return t.getResourceByRef(i.belongToAtlas).then(function(s){return s.getSprite(i.fullPath)||o._loadFromTexture(t,i)})},a._loadFromTexture=function(t,i){return i.texture?t.getResourceByRef(i.texture).then(function(o){var s=new Wv(t.engine,o,i.region,i.pivot,i.border),l=i.width,u=i.height;return isNaN(l)||(s.width=l),isNaN(u)||(s.height=u),s}):new sn(function(o){var s=new Wv(t.engine,null,i.region,i.pivot,i.border),l=i.width,u=i.height;isNaN(l)||(s.width=l),isNaN(u)||(s.height=u),o(s)})},r}(ln);qC=Tt([kn(vn.Sprite,["sprite"],!1)],qC);var _9=function(n){gt(r,n);function r(e,t,i){var o;return o=n.call(this,e)||this,o.url=t,o.requestConfig=i,o}var a=r.prototype;return a.restoreContent=function(){var t=this;return Jl(this.url,this.requestConfig).then(function(i){var o=t.resource;return o.setImageSource(i),o.generateMipmaps(),o})},r}(Ya),JC=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.load=function(t,i){var o=this;return new sn(function(s,l,u,c){var f=t.url,d=ra({},t,{type:"image"});o.request(f,d).onProgress(u,c).then(function(h){var _,p=(_=t.params)!=null?_:{},v=p.format,y=p.mipmap,m=p.anisoLevel,g=p.wrapModeU,x=p.wrapModeV,b=p.filterMode,S=new br(i.engine,h.width,h.height,v,y);if(S.anisoLevel=m!=null?m:S.anisoLevel,S.filterMode=b!=null?b:S.filterMode,S.wrapModeU=g!=null?g:S.wrapModeU,S.wrapModeV=x!=null?x:S.wrapModeV,S.setImageSource(h),S.generateMipmaps(),f.indexOf("data:")!==0){var C=f.lastIndexOf("/");S.name=f.substring(C+1)}i.addContentRestorer(new _9(S,f,d)),s(S)}).catch(function(h){l(h)})})},r}(ln);JC=Tt([kn(vn.Texture2D,["png","jpg","webp","jpeg"])],JC);var g9=function(n){gt(r,n);function r(e,t,i){var o;return o=n.call(this,e)||this,o.urls=t,o.requestConfig=i,o}var a=r.prototype;return a.restoreContent=function(){var t=this;return new sn(function(i,o){Promise.all(t.urls.map(function(s){return Jl(s,t.requestConfig)})).then(function(s){for(var l=t.resource,u=0;u<6;u++)l.setImageSource(Oi.PositiveX+u,s[u],0);l.generateMipmaps(),i(l)}).catch(function(s){o(s)})})},r}(Ya),ZC=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.load=function(t,i){var o=this;return new sn(function(s,l){var u=t.urls,c=ra({},t,{type:"image"});Promise.all(u.map(function(f){return o.request(f,c)})).then(function(f){var d=f[0],h=d.width,_=d.height;if(h!==_){console.error("The cube texture must have the same width and height");return}for(var p=new Ma(i.engine,h),v=0;v<6;v++)p.setImageSource(Oi.PositiveX+v,f[v],0);p.generateMipmaps(),i.addContentRestorer(new g9(p,u,c)),s(p)}).catch(function(f){l(f)})})},r}(ln);ZC=Tt([kn(vn.TextureCube,[""])],ZC);var eE=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.load=function(t,i){var o=this,s=i.engine;return new sn(function(l,u){o.request(t.url,{type:"json"}).then(function(c){return K6.parse(s,c).then(function(f){var d=[],h=c.scene.ambient;if(h){var _=h.specularMode===v0.Custom,p=h.diffuseMode===el.SphericalHarmonics;f.ambientLight.diffuseIntensity=h.diffuseIntensity,f.ambientLight.specularIntensity=h.specularIntensity,f.ambientLight.diffuseMode=h.diffuseMode,f.ambientLight.diffuseSolidColor.copyFrom(h.diffuseSolidColor),f.ambientLight.specularTextureDecodeRGBM=!0,_&&h.customAmbientLight&&d.push(i.getResourceByRef(h.customAmbientLight).then(function(E){var T;f.ambientLight.specularTexture=(T=E)==null?void 0:T.specularTexture})),h.ambientLight&&(!_||p)&&d.push(i.getResourceByRef(h.ambientLight).then(function(E){if(!_){var T;f.ambientLight.specularTexture=(T=E)==null?void 0:T.specularTexture}if(p){var M;f.ambientLight.diffuseSphericalHarmonics=(M=E)==null?void 0:M.diffuseSphericalHarmonics}}))}var v=c.scene.background;switch(f.background.mode=v.mode,f.background.mode){case Ro.SolidColor:f.background.solidColor.copyFrom(v.color);break;case Ro.Sky:if(v.skyMesh&&v.skyMaterial){var y=i.getResourceByRef(v.skyMesh).then(function(E){f.background.sky.mesh=E}),m=i.getResourceByRef(v.skyMaterial).then(function(E){f.background.sky.material=E});d.push(y,m)}else Pt.warn("Sky background mode requires skyMesh and skyMaterial");break;case Ro.Texture:if(v.texture){var g=i.getResourceByRef(v.texture).then(function(E){f.background.texture=E});d.push(g)}break}var x=c.scene.shadow;if(x){x.castShadows!=null&&(f.castShadows=x.castShadows),x.shadowResolution!=null&&(f.shadowResolution=x.shadowResolution),x.shadowDistance!=null&&(f.shadowDistance=x.shadowDistance),x.shadowCascades!=null&&(f.shadowCascades=x.shadowCascades);var b;f.shadowTwoCascadeSplits=(b=x.shadowTwoCascadeSplits)!=null?b:f.shadowTwoCascadeSplits,x.shadowFourCascadeSplits&&f.shadowFourCascadeSplits.copyFrom(x.shadowFourCascadeSplits);var S;f.shadowFadeBorder=(S=x.shadowFadeBorder)!=null?S:f.shadowFadeBorder}var C=c.scene.fog;return C&&(C.fogMode!=null&&(f.fogMode=C.fogMode),C.fogStart!=null&&(f.fogStart=C.fogStart),C.fogEnd!=null&&(f.fogEnd=C.fogEnd),C.fogDensity!=null&&(f.fogDensity=C.fogDensity),C.fogColor!=null&&f.fogColor.copyFrom(C.fogColor)),Promise.all(d).then(function(){l(f)})})}).catch(u)})},r}(ln);eE=Tt([kn(vn.Scene,["scene"],!0)],eE);Mx.registerCustomParseComponent("TextRenderer",g_(function(n,r){var a;return v_(this,function(e){return a=r.props,a.font||(n.font=uc.createFromOS(n.engine,a.fontFamily||"Arial")),[2,n]})}));var tE=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.additiveParse=function(t,i,o){var s,l=t.glTF.extensions.KHR_lights_punctual.lights,u=l[o.light],c=u.color,f=u.intensity,d=f===void 0?1:f,h=u.type,_=u.range,p=u.spot,v=t.glTFResource,y;if(h==="directional"?y=i.addComponent(wo):h==="point"?y=i.addComponent(hs):h==="spot"&&(y=i.addComponent(ti)),c&&y.color.set(c[0],c[1],c[2],1),y.intensity=d,_&&!x0(y,wo)&&(y.distance=_),p&&x0(y,ti)){var m=p.innerConeAngle,g=m===void 0?0:m,x=p.outerConeAngle,b=x===void 0?Math.PI/4:x;y.angle=g,y.penumbra=b-g}(s=v).lights||(s.lights=[]),v.lights.push(y)},r}(oi);tE=Tt([si("KHR_lights_punctual",Vr.AdditiveParse)],tE);var nE=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.additiveParse=function(t,i,o){var s=o.clearcoatFactor,l=s===void 0?0:s,u=o.clearcoatTexture,c=o.clearcoatRoughnessFactor,f=c===void 0?0:c,d=o.clearcoatRoughnessTexture,h=o.clearcoatNormalTexture;i.clearCoat=l,i.clearCoatRoughness=f,u&&(Or._checkOtherTextureTransform(u,"Clear coat"),t.get(zt.Texture,u.index).then(function(_){i.clearCoatTexture=_})),d&&(Or._checkOtherTextureTransform(d,"Clear coat roughness"),t.get(zt.Texture,d.index).then(function(_){i.clearCoatRoughnessTexture=_})),h&&(Or._checkOtherTextureTransform(h,"Clear coat normal"),t.get(zt.Texture,h.index).then(function(_){i.clearCoatNormalTexture=_}))},r}(oi);nE=Tt([si("KHR_materials_clearcoat",Vr.AdditiveParse)],nE);var rE=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.additiveParse=function(t,i,o){var s=o.ior,l=s===void 0?1.5:s;i.ior=l},r}(oi);rE=Tt([si("KHR_materials_ior",Vr.AdditiveParse)],rE);var aE=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.createAndParse=function(t,i,o){var s=t.glTFResource.engine,l=new ql(s),u=i.diffuseFactor,c=i.diffuseTexture,f=i.specularFactor,d=i.glossinessFactor,h=i.specularGlossinessTexture;return u&&(l.baseColor=new Me(Me.linearToGammaSpace(u[0]),Me.linearToGammaSpace(u[1]),Me.linearToGammaSpace(u[2]),u[3])),c&&t.get(zt.Texture,c.index).then(function(_){l.baseTexture=_,xn.executeExtensionsAdditiveAndParse(c.extensions,t,l,c)}),f&&(l.specularColor=new Me(Me.linearToGammaSpace(f[0]),Me.linearToGammaSpace(f[1]),Me.linearToGammaSpace(f[2]))),d!==void 0&&(l.glossiness=d),h&&(Or._checkOtherTextureTransform(h,"Specular glossiness"),t.get(zt.Texture,h.index).then(function(_){l.specularGlossinessTexture=_})),l.name=o.name,Or._parseStandardProperty(t,l,o),l},r}(oi);aE=Tt([si("KHR_materials_pbrSpecularGlossiness",Vr.CreateAndParse)],aE);var iE=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.createAndParse=function(t,i,o){var s=t.glTFResource.engine,l=new SP(s);return l.name=o.name,Or._parseStandardProperty(t,l,o),l},r}(oi);iE=Tt([si("KHR_materials_unlit",Vr.CreateAndParse)],iE);var oE=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.additiveParse=function(t,i,o){var s=function(y){var m=_[y],g=m.material,x=m.variants;t.get(zt.Material,g).then(function(b){p.push({renderer:i,material:b,variants:x.map(function(S){return d[S].name})})})},l,u=t.glTF,c=u.extensions,f=c.KHR_materials_variants,d=f.variants,h=t.glTFResource,_=o.mappings;(l=h)._extensionsData||(l._extensionsData={});var p=[];h.extensionsData.variants=p;for(var v=0;v<_.length;v++)s(v)},r}(oi);oE=Tt([si("KHR_materials_variants",Vr.AdditiveParse)],oE);var sE=function(n){gt(r,n);function r(){return n.apply(this,arguments)}return r}(oi);sE=Tt([si("KHR_mesh_quantization",Vr.AdditiveParse)],sE);var lE=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.createAndParse=function(t,i,o){return g_(function(){var s,l,u,c,f,d,h,_,p,v,y,m,g,x,b,S;return v_(this,function(C){return s=t.glTF,l=t.glTFResource,u=l.engine,c=l.url,f=o.sampler,d=o.name,h=i.source,_=s.images[h],p=_.uri,v=_.bufferView,y=_.mimeType,m=_.name,g=f!==void 0&&Hn.getSamplerInfo(s.samplers[f]),p?(x=p.lastIndexOf("."),b=u.resourceManager.load({url:Mn.resolveAbsoluteUrl(c,p),type:vn.KTX2}).onProgress(void 0,t._onTaskDetail).then(function(E){return E.name||(E.name=d||m||"texture_"+x),f!==void 0&&Hn.parseSampler(E,g),E}),t._addTaskCompletePromise(b),[2,b]):(S=s.bufferViews[v],[2,t.get(zt.Buffer,S.buffer).then(function(E){var T=new Uint8Array(E,S.byteOffset,S.byteLength);return Ar._parseBuffer(T,u).then(function(M){var L=M.engine,F=M.result,N=M.targetFormat,I=M.params;return Ar._createTextureByBuffer(L,F,N,I)}).then(function(M){M.name=d||m||"texture_"+v,f!==void 0&&Hn.parseSampler(M,g);var L=new HP(M,S,y);return t.contentRestorer.bufferTextures.push(L),M})})])})})()},r}(oi);lE=Tt([si("KHR_texture_basisu",Vr.CreateAndParse)],lE);var uE=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.additiveParse=function(t,i,o){var s=o.offset,l=o.rotation,u=o.scale,c=o.texCoord;s&&(i.tilingOffset.z=s[0],i.tilingOffset.w=s[1]),u&&(i.tilingOffset.x=u[0],i.tilingOffset.y=u[1]),l&&Pt.warn("rotation in KHR_texture_transform is not supported now"),c&&Pt.warn("texCoord in KHR_texture_transform is not supported now")},r}(oi);uE=Tt([si("KHR_texture_transform",Vr.AdditiveParse)],uE);var cE=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.createAndParse=function(t,i){var o=t.glTFResource.engine,s=o.resourceManager.getResourceByRef(i);return t._addTaskCompletePromise(s),s},r}(oi);cE=Tt([si("GALACEAN_materials_remap",Vr.CreateAndParse)],cE);var fE=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.additiveParse=function(t,i,o){t.glTFResource.engine;var s=o.events;s.map(function(l){var u=new h_;u.functionName=l.functionName,u.time=l.time,u.parameter=l.parameter,i.addEvent(u)})},r}(oi);fE=Tt([si("GALACEAN_animation_event",Vr.AdditiveParse)],fE);var dE=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.createAndParse=function(t,i){return t.get(zt.Buffer,i.buffer).then(function(o){return av.decodeGltfBuffer(i.count,i.byteStride,new Uint8Array(o,i.byteOffset,i.byteLength),i.mode,i.filter)})},r}(oi);dE=Tt([si("EXT_meshopt_compression",Vr.CreateAndParse)],dE);var hE=function(n){gt(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.additiveParse=function(t,i,o){var s=o.anisotropyStrength,l=s===void 0?0:s,u=o.anisotropyRotation,c=u===void 0?0:u,f=o.anisotropyTexture;i.anisotropy=l,i.anisotropyRotation=c,f&&(Or._checkOtherTextureTransform(f,"Anisotropy texture"),t.get(zt.Texture,f.index).then(function(d){i.anisotropyTexture=d}))},r}(oi);hE=Tt([si("KHR_materials_anisotropy",Vr.AdditiveParse)],hE);var m9="1.2.0-beta.2";console.log("Galacean engine version: "+m9);for(var vE in cC)ln.registerClass(vE,cC[vE]);X.getByName("u_width");X.getByName("u_min");X.getByName("u_max");X.getByName("u_boxColor");X.getByName("u_borderColor");vt.create("box",`
#include <common>
#include <common_vert>

void main() {
  gl_Position = vec4(POSITION, 1.0);
}`,`
uniform vec2 u_min;
uniform vec2 u_max;
uniform vec4 u_boxColor;
uniform vec4 u_borderColor;
uniform float u_width;

void main() {
  float vColor = step(u_min.x + u_width, gl_FragCoord.x) * step(gl_FragCoord.x, u_max.x - u_width) * step(u_min.y + u_width, gl_FragCoord.y) * step(gl_FragCoord.y, u_max.y - u_width);
  float vBorder = step(u_min.x, gl_FragCoord.x) * step(gl_FragCoord.x, u_max.x) * step(u_min.y, gl_FragCoord.y) * step(gl_FragCoord.y, u_max.y);
  gl_FragColor = u_boxColor * vColor + (1. - vColor) * vBorder * u_borderColor;
}
`);new cP;new z;new Ze;new z;new z;new z;new z;new z;new z;new z;new z;new z;new z;new z;new z;new Ge;var kt;(function(n){n[n.None=0]="None",n[n.ROTATE=1]="ROTATE",n[n.ZOOM=2]="ZOOM",n[n.PAN=4]="PAN",n[n.All=7]="All"})(kt||(kt={}));function jd(){return function(n){}}function Wd(n,r,a,e){var t=arguments.length,i=t<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,a):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,r,a,e);else for(var s=n.length-1;s>=0;s--)(o=n[s])&&(i=(t<3?o(i):t>3?o(r,a,i):o(r,a))||i);return t>3&&i&&Object.defineProperty(r,a,i),i}var pE=function(){function n(){}return n.onUpdateHandler=function(a){return a.isKeyHeldDown(hn.ArrowLeft)||a.isKeyHeldDown(hn.KeyA)||a.isKeyHeldDown(hn.ArrowUp)||a.isKeyHeldDown(hn.KeyW)||a.isKeyHeldDown(hn.ArrowDown)||a.isKeyHeldDown(hn.KeyS)||a.isKeyHeldDown(hn.ArrowRight)||a.isKeyHeldDown(hn.KeyD)?kt.PAN:kt.None},n.onUpdateDelta=function(a,e){var t=a.movementSpeed,i=a.input;e.x=e.y=e.z=0,(i.isKeyHeldDown(hn.ArrowLeft)||i.isKeyHeldDown(hn.KeyA))&&(e.x-=t),(i.isKeyHeldDown(hn.ArrowRight)||i.isKeyHeldDown(hn.KeyD))&&(e.x+=t),(i.isKeyHeldDown(hn.ArrowUp)||i.isKeyHeldDown(hn.KeyW))&&(e.z-=t),(i.isKeyHeldDown(hn.ArrowDown)||i.isKeyHeldDown(hn.KeyS))&&(e.z+=t)},n}();pE=Wd([jd()],pE);var _E;(function(n){n[n.Moving=0]="Moving",n[n.Distance=1]="Distance",n[n.None=2]="None"})(_E||(_E={}));var pc=function(){function n(){}return n.onUpdateHandler=function(a){if(++this._frameIndex,a.pointers.length===1)if(a.isPointerHeldDown(Pa.Primary))this._updateType(kt.ROTATE,0);else{var e=a.pointers[0].deltaPosition;(e.x!==0||e.y!==0)&&a.isPointerUp(Pa.Primary)?this._updateType(kt.ROTATE,0):this._updateType(kt.None,2)}else this._updateType(kt.None,2);return this._handlerType},n.onUpdateDelta=function(a,e){var t=this,i=t._frameIndex;switch(this._deltaType){case 0:if(this._lastUsefulFrameIndex===i-1){var o=a.input.pointers[0].deltaPosition;e.x=o.x,e.y=o.y}else e.x=0,e.y=0;break}this._lastUsefulFrameIndex=i},n._updateType=function(a,e){(this._handlerType!==a||this._deltaType!==e)&&(this._handlerType=a,this._deltaType=e,this._lastUsefulFrameIndex=-1)},n}();pc._deltaType=0;pc._handlerType=kt.None;pc._frameIndex=0;pc._lastUsefulFrameIndex=-1;pc=Wd([jd()],pc);var gE=ve.zeroTolerance,Wu=function(){function n(a,e,t){this.radius=a,this.phi=e,this.theta=t,this._matrix=new Ge,this._matrixInv=new Ge,this.radius=a!==void 0?a:1,this.phi=e!==void 0?e:0,this.theta=t!==void 0?t:0}var r=n.prototype;return r.makeSafe=function(){var e=Math.floor(this.phi/Math.PI);return this.phi=ve.clamp(this.phi,e*Math.PI+gE,(e+1)*Math.PI-gE),this},r.set=function(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this},r.setYAxis=function(e){var t=n._xAxis,i=n._yAxis,o=n._zAxis;z.equals(t.set(1,0,0),i.copyFrom(e).normalize())&&t.set(0,1,0),z.cross(t,i,o),o.normalize(),z.cross(i,o,t);var s=this._matrix,l=s.elements;l[0]=t.x,l[1]=t.y,l[2]=t.z,l[4]=i.x,l[5]=i.y,l[6]=i.z,l[8]=o.x,l[9]=o.y,l[10]=o.z;var u=this._matrixInv,c=u.elements;c[0]=t.x,c[4]=t.y,c[8]=t.z,c[1]=i.x,c[5]=i.y,c[9]=i.z,c[2]=o.x,c[6]=o.y,c[10]=o.z},r.setFromVec3=function(e,t){return t===void 0&&(t=!1),e.transformNormal(this._matrixInv),this.radius=e.length(),this.radius===0?(this.theta=0,this.phi=0):t?(this.phi=2*Math.PI-Math.acos(ve.clamp(e.y/this.radius,-1,1)),this.theta=Math.atan2(-e.x,-e.z)):(this.phi=Math.acos(ve.clamp(e.y/this.radius,-1,1)),this.theta=Math.atan2(e.x,e.z)),this},r.setToVec3=function(e){var t=this,i=t.radius,o=t.phi,s=t.theta,l=Math.sin(o)*i;return this.phi-=Math.floor(this.phi/Math.PI/2)*Math.PI*2,e.set(l*Math.sin(s),i*Math.cos(o),l*Math.cos(s)),e.transformNormal(this._matrix),this.phi>Math.PI},n}();Wu._xAxis=new z;Wu._yAxis=new z;Wu._zAxis=new z;var Df=function(){function n(){}return n.onUpdateHandler=function(a){return a.isKeyHeldDown(hn.ArrowLeft)||a.isKeyHeldDown(hn.ArrowRight)||a.isKeyHeldDown(hn.ArrowUp)||a.isKeyHeldDown(hn.ArrowDown)?kt.PAN:kt.None},n.onUpdateDelta=function(a,e){var t=a.keyPanSpeed,i=a.input;e.x=e.y=0,i.isKeyHeldDown(hn.ArrowLeft)&&(e.x+=t),i.isKeyHeldDown(hn.ArrowRight)&&(e.x-=t),i.isKeyHeldDown(hn.ArrowUp)&&(e.y+=t),i.isKeyHeldDown(hn.ArrowDown)&&(e.y-=t)},n}();Df=Wd([jd()],Df);var mE;(function(n){n[n.Moving=0]="Moving",n[n.Distance=1]="Distance",n[n.None=2]="None"})(mE||(mE={}));var rl=function(){function n(){}return n.onUpdateHandler=function(a){++this._frameIndex;var e=a.pointers;switch(e.length){case 1:if(a.isPointerHeldDown(Pa.Secondary))this._updateType(kt.PAN,0);else if(a.isPointerHeldDown(Pa.Auxiliary))this._updateType(kt.ZOOM,0);else if(a.isPointerHeldDown(Pa.Primary))this._updateType(kt.ROTATE,0);else{var t=a.pointers[0].deltaPosition;t.x!==0&&t.y!==0?a.isPointerUp(Pa.Secondary)?this._updateType(kt.PAN,0):a.isPointerUp(Pa.Auxiliary)?this._updateType(kt.ZOOM,0):a.isPointerUp(Pa.Primary)?this._updateType(kt.ROTATE,0):this._updateType(kt.None,2):this._updateType(kt.None,2)}break;case 2:this._updateType(kt.ZOOM,1);break;case 3:this._updateType(kt.PAN,0);break;default:this._updateType(kt.None,2);break}return this._handlerType},n.onUpdateDelta=function(a,e){var t=this,i=t._frameIndex;switch(this._deltaType){case 0:if(e.x=0,e.y=0,this._lastUsefulFrameIndex===i-1){for(var o=a.input.pointers,s=o.length,l=s-1;l>=0;l--){var u=o[l].deltaPosition;e.x+=u.x,e.y+=u.y}e.x/=s,e.y/=s}break;case 1:var c=a.input.pointers,f=c[0],d=c[1],h=Ze.distance(f.position,d.position);this._lastUsefulFrameIndex===i-1?e.set(0,this._distanceOfPointers-h,0):e.set(0,0,0),this._distanceOfPointers=h;break}this._lastUsefulFrameIndex=i},n._updateType=function(a,e){(this._handlerType!==a||this._deltaType!==e)&&(this._handlerType=a,this._deltaType=e,this._lastUsefulFrameIndex=-1)},n}();rl._deltaType=2;rl._handlerType=kt.None;rl._frameIndex=0;rl._lastUsefulFrameIndex=-1;rl._distanceOfPointers=0;rl=Wd([jd()],rl);var S0=function(){function n(){}return n.onUpdateHandler=function(a){var e=a.wheelDelta;return e.x===0&&e.y===0&&e.z===0?kt.None:kt.ZOOM},n.onUpdateDelta=function(a,e){e.copyFrom(a.input.wheelDelta)},n}();S0=Wd([jd()],S0);var y9=function(n){mz(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e.inputDevices=[Df,rl,S0],e.autoRotate=!1,e.autoRotateSpeed=Math.PI,e.enableDamping=!0,e.rotateSpeed=1,e.zoomSpeed=1,e.keyPanSpeed=7,e.dampingFactor=.1,e.zoomFactor=.2,e.minDistance=.1,e.maxDistance=1/0,e.minZoom=0,e.maxZoom=1/0,e.minPolarAngle=1/180*Math.PI,e.maxPolarAngle=179/180*Math.PI,e.minAzimuthAngle=-1/0,e.maxAzimuthAngle=1/0,e._enableKeys=!0,e._up=new z(0,1,0),e._target=new z,e._atTheBack=!1,e._spherical=new Wu,e._sphericalDelta=new Wu,e._sphericalDump=new Wu,e._zoomFrag=0,e._scale=1,e._panOffset=new z,e._tempVec3=new z,e._enableHandler=kt.All,e}var a=r.prototype;return a.onAwake=function(){var t=this,i=t.engine,o=t.entity;this.canvas=i.canvas,this.input=i.inputManager,this.camera=o.getComponent(rn),this.cameraTransform=o.transform,this._spherical.setYAxis(this._up),this._atTheBack=!1},a.onLateUpdate=function(t){this._updateInputDelta(t),this._updateTransform()},a._updateInputDelta=function(t){for(var i=kt.None,o=this,s=o._tempVec3,l=o._enableHandler,u=this,c=u.inputDevices,f=u.input,d=c.length-1;d>=0;d--){var h=c[d],_=h.onUpdateHandler(f);if(_&l)switch(i|=_,h.onUpdateDelta(this,s),_){case kt.ROTATE:this._rotate(s);break;case kt.ZOOM:this._zoom(s);break;case kt.PAN:this._pan(s);break}}var p=this,v=p._sphericalDump,y=p._sphericalDelta;if(this.enableDamping&&(l&kt.ZOOM&&i^kt.ZOOM&&(this._zoomFrag*=1-this.zoomFactor),l&kt.ROTATE&&i^kt.ROTATE&&(y.theta=v.theta*=1-this.dampingFactor,y.phi=v.phi*=1-this.dampingFactor)),i===kt.None&&this.autoRotate){var m=this.autoRotateSpeed*t;y.theta-=m}},a._rotate=function(t){var i=2*Math.PI*t.x/this.canvas.width*this.rotateSpeed;this._sphericalDelta.theta-=i;var o=2*Math.PI*t.y/this.canvas.height*this.rotateSpeed;this._sphericalDelta.phi-=o,this.enableDamping&&(this._sphericalDump.theta=-i,this._sphericalDump.phi=-o)},a._zoom=function(t){t.y>0?this._scale/=Math.pow(.95,this.zoomSpeed):t.y<0&&(this._scale*=Math.pow(.95,this.zoomSpeed))},a._pan=function(t){var i=this.cameraTransform,o=i.worldMatrix.elements,s=this.canvas.height,l=z.distance(i.position,this.target)*(this.camera.fieldOfView/2)*(Math.PI/180),u=-2*t.x*(l/s),c=2*t.y*(l/s);this._panOffset.x+=o[0]*u+o[4]*c,this._panOffset.y+=o[1]*u+o[5]*c,this._panOffset.z+=o[2]*u+o[6]*c},a._updateTransform=function(){var t=this,i=t.cameraTransform,o=t.target,s=t._tempVec3,l=t._spherical,u=t._sphericalDelta,c=t._panOffset;s.copyFrom(i.worldUp),this._atTheBack=s.y<=0,z.subtract(i.position,o,s),l.setFromVec3(s,this._atTheBack),l.theta+=u.theta,l.phi+=u.phi,l.theta=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,l.theta)),l.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,l.phi)),l.makeSafe(),this._scale!==1&&(this._zoomFrag=l.radius*(this._scale-1)),l.radius+=this._zoomFrag,l.radius=Math.max(this.minDistance,Math.min(this.maxDistance,l.radius)),this._atTheBack=l.setToVec3(s),z.add(o.add(c),s,i.worldPosition),i.lookAt(o,s.copyFrom(this.up).scale(this._atTheBack?-1:1)),this._zoomFrag=0,this._scale=1,u.set(0,0,0),c.set(0,0,0)},gz(r,[{key:"enableKeys",get:function(){return this._enableKeys},set:function(t){if(this._enableKeys!==t){this._enableKeys=t;var i=this.inputDevices;if(t)i.push(Df);else for(var o=i.length-1;o>=0;o--)if(i[o]===Df){i.splice(o,1);break}}}},{key:"up",get:function(){return this._up},set:function(t){this._up.copyFrom(t),this._spherical.setYAxis(t),this._atTheBack=!1}},{key:"target",get:function(){return this._target},set:function(t){this._target.copyFrom(t),this._atTheBack=!1}},{key:"enableRotate",get:function(){return(this._enableHandler&kt.ROTATE)!==0},set:function(t){t?this._enableHandler|=kt.ROTATE:this._enableHandler&=~kt.ROTATE}},{key:"enableZoom",get:function(){return(this._enableHandler&kt.ZOOM)!==0},set:function(t){t?this._enableHandler|=kt.ZOOM:this._enableHandler&=~kt.ZOOM}},{key:"enablePan",get:function(){return(this._enableHandler&kt.PAN)!==0},set:function(t){t?this._enableHandler|=kt.PAN:this._enableHandler&=~kt.PAN}}]),r}(zr);function yE(n,r){for(var a=0;a<r.length;a++){var e=r[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function x9(n,r,a){return r&&yE(n.prototype,r),a&&yE(n,a),n}function b0(n,r){return b0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b0(n,r)}function S9(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&b0(n,r)}function b9(n,r,a,e){var t=arguments.length,i=t<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,a):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,r,a,e);else for(var s=n.length-1;s>=0;s--)(o=n[s])&&(i=(t<3?o(i):t>3?o(r,a,i):o(r,a))||i);return t>3&&i&&Object.defineProperty(r,a,i),i}var C9=`#define GLSLIFY 1
#include <common>
uniform vec3 u_pickColor;void main(){gl_FragColor=vec4(u_pickColor,1.0);}`,E9=`#define GLSLIFY 1
#include <common>
#include <common_vert>
#include <blendShape_input>
void main(){
#include <begin_position_vert>
#include <begin_normal_vert>
#include <blendShape_vert>
#include <skinning_vert>
#include <position_vert>
}`,T9=vt.create("framebuffer-picker-color",E9,C9),_c=function(n){S9(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._renderersMap=[],e._frameBufferSize=new Ze(1024,1024),e}var a=r.prototype;return a.onAwake=function(){this._camera=this.entity.getComponent(rn)},a.pick=function(t,i){var o=this;return new Promise(function(s,l){o._setupRenderTarget();var u=o._readPixelFromRenderTarget(t,i),c=o._getRendererByPixel(u);s(c)})},a.regionPick=function(t,i,o,s){var l=this;return new Promise(function(u,c){l._setupRenderTarget();var f=l._readPixelFromRenderTarget(t,i,o,s),d=l._getRenderersByPixel(f);u(d)})},a._checkFrameBufferSize=function(){var t=this._pickRenderTarget,i=this.engine,o=this._frameBufferSize;(!t||o.x!=t.width||o.y!=t.height)&&(t&&t.destroy(),this._pickRenderTarget=new jl(i,o.x,o.y,new br(i,o.x,o.y,ye.R8G8B8A8,!1)))},a._updateRenderersPickColor=function(t){for(var i=0,o=this._renderersMap,s=r._rootEntityRenderers,l=t.rootEntities,u=r._pickColorProperty,c=0,f=l.length;c<f;c++){l[c].getComponentsIncludeChildren(Gt,s);for(var d=0,h=s.length;d<h;d++){var _=s[d],p=_.shaderData,v=p.getVector3(u);v||(v=new z,p.setVector3(u,v)),this._uniqueId2Color(++i,v),o[i]=_}}},a._setupRenderTarget=function(){this._checkFrameBufferSize();var t=this._camera;this._updateRenderersPickColor(t.scene);var i=t.renderTarget,o=t.aspectRatio;t.renderTarget=this._pickRenderTarget,t.setReplacementShader(T9),t.aspectRatio=o,t.render(),t.resetReplacementShader(),t.renderTarget=i,t.resetAspectRatio()},a._readPixelFromRenderTarget=function(t,i,o,s){var l,u,c,f=this._getCoordOnRenderTarget(t,i),d=arguments.length;if(d===2)l=r._pickPixel,u=c=1;else if(d===4){var h=this._getCoordOnRenderTarget(o,s);u=Math.abs(f.x-h.x),c=Math.abs(f.y-h.y),f.x=f.x<h.x?f.x:h.x,f.y=f.y<h.y?f.y:h.y,l=new Uint8Array(u*c*4)}return this._pickRenderTarget.getColorTexture().getPixelBuffer(f.x,f.y,u,c,0,l),l},a._getCoordOnRenderTarget=function(t,i){var o=this._pickRenderTarget,s=this.engine.canvas,l=this._camera.viewport,u=(l.z-l.x)*s.width,c=(l.w-l.y)*s.height;return{x:Math.floor((t-l.x)/u*(o.width-1)),y:Math.floor((i-l.y)/c*(o.height-1))}},a._getRendererByPixel=function(t){return this._renderersMap[this._color2UniqueId(t)]},a._getRenderersByPixel=function(t){var i=this,o=[],s=this._color2UniqueIds(t);return s.forEach(function(l){i._renderersMap[l]&&o.push(i._renderersMap[l])}),o},a._uniqueId2Color=function(t,i){t>=16777215&&(Pt.warn("Framebuffer Picker encounter primitive's id greater than "+16777215),i.set(0,0,0)),i.set((t&255)/255,((t&65280)>>8)/255,((t&16711680)>>16)/255)},a._color2UniqueId=function(t){return t[0]|t[1]<<8|t[2]<<16},a._color2UniqueIds=function(t){r._pickIds.clear();for(var i=0;i<t.length;i+=4){var o=t[i]|t[i+1]<<8|t[i+2]<<16;r._pickIds.add(o)}return r._pickIds},x9(r,[{key:"frameBufferSize",get:function(){return this._frameBufferSize},set:function(t){this._frameBufferSize=t}}]),r}(zr);_c._rootEntityRenderers=[];_c._pickPixel=new Uint8Array(4);_c._pickIds=new Set;_c._pickColorProperty=X.getByName("u_pickColor");_c=b9([gs(rn,no.CheckOnly)],_c);function xE(n,r){for(var a=0;a<r.length;a++){var e=r[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function Ix(n,r,a){return r&&xE(n.prototype,r),a&&xE(n,a),n}var xt=function(){function n(){}return n.createCuboidWireframe=function(a,e,t,i,o,s,l){var u=a/2,c=e/2,f=t/2,d=o;i[d++].set(-u,c,-f),i[d++].set(u,c,-f),i[d++].set(u,c,f),i[d++].set(-u,c,f),i[d++].set(-u,-c,-f),i[d++].set(u,-c,-f),i[d++].set(u,-c,f),i[d++].set(-u,-c,f),i[d++].set(-u,c,-f),i[d++].set(-u,c,f),i[d++].set(-u,-c,f),i[d++].set(-u,-c,-f),i[d++].set(u,c,-f),i[d++].set(u,c,f),i[d++].set(u,-c,f),i[d++].set(u,-c,-f),i[d++].set(-u,c,f),i[d++].set(u,c,f),i[d++].set(u,-c,f),i[d++].set(-u,-c,f),i[d++].set(-u,c,-f),i[d++].set(u,c,-f),i[d++].set(u,-c,-f),i[d++].set(-u,-c,-f),s[l++]=o,s[l++]=o+1,s[l++]=o+1,s[l++]=o+2,s[l++]=o+2,s[l++]=o+3,s[l++]=o+3,s[l++]=o,s[l++]=o+4,s[l++]=o+5,s[l++]=o+5,s[l++]=o+6,s[l++]=o+6,s[l++]=o+7,s[l++]=o+7,s[l++]=o+4,s[l++]=o+8,s[l++]=o+9,s[l++]=o+9,s[l++]=o+10,s[l++]=o+10,s[l++]=o+11,s[l++]=o+11,s[l++]=o+8,s[l++]=o+12,s[l++]=o+13,s[l++]=o+13,s[l++]=o+14,s[l++]=o+14,s[l++]=o+15,s[l++]=o+15,s[l++]=o+12,s[l++]=o+16,s[l++]=o+17,s[l++]=o+17,s[l++]=o+18,s[l++]=o+18,s[l++]=o+19,s[l++]=o+19,s[l++]=o+16,s[l++]=o+20,s[l++]=o+21,s[l++]=o+21,s[l++]=o+22,s[l++]=o+22,s[l++]=o+23,s[l++]=o+23,s[l++]=o+20},n.createSphereWireframe=function(a,e,t,i,o){n._shift.set(0,0,0),n.createCircleWireframe(a,0,n._shift,e,t,i,o),n.createCircleWireframe(a,1,n._shift,e,t+n.circleVertexCount,i,o+n.circleIndexCount),n.createCircleWireframe(a,2,n._shift,e,t+n.circleVertexCount*2,i,o+n.circleIndexCount*2)},n.createConeWireframe=function(a,e,t,i,o,s){n._shift.set(0,-e,0),n.createCircleWireframe(a,1,n._shift,t,i,o,s);var l=i+n.circleVertexCount,u=l;t[u++].set(0,0,0),t[u++].set(-a,-e,0),t[u++].set(a,-e,0),t[u++].set(0,-e,a),t[u++].set(0,-e,-a),s+=n.circleIndexCount,o[s++]=l,o[s++]=l+1,o[s++]=l,o[s++]=l+2,o[s++]=l,o[s++]=l+3,o[s++]=l,o[s++]=l+4},n.createUnboundCylinderWireframe=function(a,e,t,i,o){var s=5;n._shift.set(0,0,0),n.createCircleWireframe(a,1,n._shift,e,t,i,o);var l=t+n.circleVertexCount,u=l;o+=n.circleIndexCount;for(var c=0;c<8;c++){var f=ve.degreeToRadian(45*c);e[u++].set(a*Math.cos(f),0,a*Math.sin(f)),e[u++].set(a*Math.cos(f),-s,a*Math.sin(f)),i[o+c*2]=l+2*c,i[o+c*2+1]=l+2*c+1}},n.createCapsuleWireframe=function(a,e,t,i,o,s){var l=n.circleIndexCount,u=n.circleVertexCount,c=e/2;n._shift.set(0,c,0),n.createCircleWireframe(a,1,n._shift,t,i,o,s),n._shift.set(0,-c,0),n.createCircleWireframe(a,1,n._shift,t,i+u,o,s+l),n.createEllipticWireframe(a,c,2,t,i+u*2,o,s+l*2),n.createEllipticWireframe(a,c,0,t,i+u*3,o,s+l*2+n.ellipticIndexCount)},n.createCircleWireframe=function(a,e,t,i,o,s,l){for(var u=n.circleVertexCount,c=Math.PI*2,f=1/u,d=o,h=0;h<u;++h){var _=h*f,p=_*c;switch(e){case 0:i[d++].set(t.x,a*Math.cos(p)+t.y,a*Math.sin(p)+t.z);break;case 1:i[d++].set(a*Math.cos(p)+t.x,t.y,a*Math.sin(p)+t.z);break;case 2:i[d++].set(a*Math.cos(p)+t.x,a*Math.sin(p)+t.y,t.z);break}var v=h+o;h<u-1?(s[l+2*h]=v,s[l+2*h+1]=v+1):(s[l+2*h]=v,s[l+2*h+1]=o)}},n.createEllipticWireframe=function(a,e,t,i,o,s,l){for(var u=n.circleVertexCount,c=Math.PI*2,f=1/u,d=o,h=0;h<u;++h){var _=h*f,p=_*c;switch(t){case 0:i[d++].set(0,a*Math.sin(p)+e,a*Math.cos(p));break;case 1:i[d++].set(a*Math.cos(p),e,a*Math.sin(p));break;case 2:i[d++].set(a*Math.cos(p),a*Math.sin(p)+e,0);break}h==u/2&&(e=-e);var v=h+o;h<u-1?(s[l+2*h]=v,s[l+2*h+1]=v+1):(s[l+2*h]=v,s[l+2*h+1]=o)}},n.createFrustumWireframe=function(a,e,t,i,o,s,l){n._shift.set(0,0,0),n.createCircleWireframe(a,2,n._shift,i,o,s,l),n._shift.set(0,0,-e);var u=ve.degreeToRadian(t),c=Math.tan(u),f=a+c*e;n.createCircleWireframe(f,2,n._shift,i,o+n.circleVertexCount,s,l+n.circleIndexCount);var d=o+2*n.circleVertexCount,h=d;i[h++].set(0,0,0),i[h++].set(0,0,-e),i[h++].set(a,0,0),i[h++].set(f,0,-e),i[h++].set(-a,0,0),i[h++].set(-f,0,-e),i[h++].set(0,a,0),i[h++].set(0,f,-e),i[h++].set(0,-a,0),i[h++].set(0,-f,-e),l+=2*n.circleIndexCount,s[l++]=d,s[l++]=d+1,s[l++]=d+2,s[l++]=d+3,s[l++]=d+4,s[l++]=d+5,s[l++]=d+6,s[l++]=d+7,s[l++]=d+8,s[l++]=d+9},n.createHemisphereWireframe=function(a,e,t,i,o,s){for(var l=n.circleVertexCount/2,u=Math.PI,c=1/l,f=i,d=0;d<l+1;d++){var h=d*c,_=h*u;switch(e){case 0:t[f++].set(a*Math.sin(_),0,a*Math.cos(_));break;case 1:t[f++].set(0,a*Math.sin(_),a*Math.cos(_));break;case 2:t[f++].set(-a*Math.cos(_),0,-a*Math.sin(_));break}var p=d+i;d<l&&(o[s+2*d]=p,o[s+2*d+1]=p+1)}s+=n.circleVertexCount;for(var v=0;v<l+1;v++){var y=v*c,m=y*u;switch(e){case 0:t[f++].set(a*Math.sin(m),a*Math.cos(m),0);break;case 1:t[f++].set(a*Math.cos(m),a*Math.sin(m),0);break;case 2:t[f++].set(0,-a*Math.cos(m),-a*Math.sin(m));break}var g=v+i+l+1;v<l&&(o[s+2*v]=g,o[s+2*v+1]=g+1)}n._shift.set(0,0,0),n.createCircleWireframe(a,e,n._shift,t,i+n.circleVertexCount+2,o,s+n.circleVertexCount)},Ix(n,null,[{key:"cuboidIndexCount",get:function(){return 48}},{key:"cuboidPositionCount",get:function(){return 24}},{key:"sphereIndexCount",get:function(){return n.circleIndexCount*3}},{key:"spherePositionCount",get:function(){return n.circlePositionCount*3}},{key:"coneIndexCount",get:function(){return n.circleIndexCount+8}},{key:"conePositionCount",get:function(){return n.circlePositionCount+5}},{key:"unboundCylinderIndexCount",get:function(){return n.circleIndexCount+16}},{key:"unboundCylinderPositionCount",get:function(){return n.circlePositionCount+16}},{key:"capsuleIndexCount",get:function(){return(n.circleIndexCount+n.ellipticIndexCount)*2}},{key:"capsulePositionCount",get:function(){return(n.circlePositionCount+n.ellipticPositionCount)*2}},{key:"circleIndexCount",get:function(){return n.circleVertexCount*2}},{key:"circlePositionCount",get:function(){return n.circleVertexCount}},{key:"ellipticIndexCount",get:function(){return n.circleVertexCount*2}},{key:"ellipticPositionCount",get:function(){return n.circleVertexCount}},{key:"frustumIndexCount",get:function(){return n.circleIndexCount*2+10}},{key:"frustumPositionCount",get:function(){return n.circleVertexCount*2+10}},{key:"hemisphereIndexCount",get:function(){return n.circleVertexCount*2+n.circleIndexCount}},{key:"hemispherePositionCount",get:function(){return n.circleVertexCount+2+n.circlePositionCount}}]),n}();xt._shift=new z;xt.circleVertexCount=40;function C0(n,r){return C0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},C0(n,r)}function $P(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&C0(n,r)}function XP(n,r,a,e){var t=arguments.length,i=t<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,a):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,r,a,e);else for(var s=n.length-1;s>=0;s--)(o=n[s])&&(i=(t<3?o(i):t>3?o(r,a,i):o(r,a))||i);return t>3&&i&&Object.defineProperty(r,a,i),i}X.getByName("u_lightDir");X.getByName("u_planarHeight");X.getByName("u_planarShadowColor");X.getByName("u_planarShadowFalloff");var R9=new vr(`
    attribute vec4 POSITION;
    varying vec4 color;

    uniform vec3 u_lightDir;
    uniform float u_planarHeight;
    uniform vec4 u_planarShadowColor;
    uniform float u_planarShadowFalloff;

    uniform mat4 renderer_ModelMat;
    uniform mat4 camera_VPMat;

    #ifdef RENDERER_HAS_SKIN
      attribute vec4 JOINTS_0;
      attribute vec4 WEIGHTS_0;

      #ifdef RENDERER_USE_JOINT_TEXTURE
        uniform sampler2D renderer_JointSampler;
        uniform float renderer_JointCount;
        mat4 getJointMatrix(sampler2D smp, float index) {
            float base = index / renderer_JointCount;
            float hf = 0.5 / renderer_JointCount;
            float v = base + hf;

            vec4 m0 = texture2D(smp, vec2(0.125, v ));
            vec4 m1 = texture2D(smp, vec2(0.375, v ));
            vec4 m2 = texture2D(smp, vec2(0.625, v ));
            vec4 m3 = texture2D(smp, vec2(0.875, v ));

            return mat4(m0, m1, m2, m3);
        }
      #else
          uniform mat4 renderer_JointMatrix[ RENDERER_JOINTS_NUM ];
      #endif
    #endif

    vec3 ShadowProjectPos(vec4 vertPos) {
      vec3 shadowPos;

      // get the world space coordinates of the vertex
      vec3 worldPos = (renderer_ModelMat * vertPos).xyz;
      
      // world space coordinates of the shadow (the part below the ground is unchanged)
      shadowPos.y = min(worldPos.y , u_planarHeight);
      shadowPos.xz = worldPos.xz - u_lightDir.xz * max(0.0, worldPos.y - u_planarHeight) / u_lightDir.y;

      return shadowPos;
    }

    void main() {
     vec4 position = vec4(POSITION.xyz, 1.0 );
      #ifdef RENDERER_HAS_SKIN
          #ifdef RENDERER_USE_JOINT_TEXTURE
              mat4 skinMatrix =
                  WEIGHTS_0.x * getJointMatrix(renderer_JointSampler, JOINTS_0.x ) +
                  WEIGHTS_0.y * getJointMatrix(renderer_JointSampler, JOINTS_0.y ) +
                  WEIGHTS_0.z * getJointMatrix(renderer_JointSampler, JOINTS_0.z ) +
                  WEIGHTS_0.w * getJointMatrix(renderer_JointSampler, JOINTS_0.w );
          #else
              mat4 skinMatrix =
                  WEIGHTS_0.x * renderer_JointMatrix[ int( JOINTS_0.x ) ] +
                  WEIGHTS_0.y * renderer_JointMatrix[ int( JOINTS_0.y ) ] +
                  WEIGHTS_0.z * renderer_JointMatrix[ int( JOINTS_0.z ) ] +
                  WEIGHTS_0.w * renderer_JointMatrix[ int( JOINTS_0.w ) ];
          #endif
          position = skinMatrix * position;
      #endif

      // get the shadow's world space coordinates
      vec3 shadowPos = ShadowProjectPos(position);

      // convert to clip space
      gl_Position = camera_VPMat * vec4(shadowPos, 1.0);

      // get the world coordinates of the center point
      vec3 center = vec3(renderer_ModelMat[3].x, u_planarHeight, renderer_ModelMat[3].z);
      // calculate shadow falloff
      float falloff = 0.5 - clamp(distance(shadowPos , center) * u_planarShadowFalloff, 0.0, 1.0);

      // shadow color
      color = u_planarShadowColor;
      color.a *= falloff;
    }
    `,`
    varying vec4 color;
    void main() {
       gl_FragColor = color;
    }
    `);vt.create("planarShadowShader",[vt.find("pbr").subShaders[0].passes[0],R9]);function SE(n,r){for(var a=0;a<r.length;a++){var e=r[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function Lx(n,r,a){return r&&SE(n.prototype,r),a&&SE(n,a),n}function E0(n,r){return E0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E0(n,r)}function m_(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&E0(n,r)}var xs=function(n){m_(r,n);function r(a){var e;e=n.call(this,a,vt.find("grid"))||this,e.isTransparent=!0;var t=e.shaderData;return t.setFloat(r._nearClipProperty,.1),t.setFloat(r._farClipProperty,100),t.setFloat(r._primaryScaleProperty,10),t.setFloat(r._secondaryScaleProperty,1),t.setFloat(r._gridIntensityProperty,.2),t.setFloat(r._axisIntensityProperty,.1),t.setFloat(r._flipProgressProperty,0),t.setFloat(r._fadeProperty,0),e}return Lx(r,[{key:"nearClipPlane",get:function(){return this.shaderData.getFloat(r._nearClipProperty)},set:function(e){this.shaderData.setFloat(r._nearClipProperty,e)}},{key:"farClipPlane",get:function(){return this.shaderData.getFloat(r._farClipProperty)},set:function(e){this.shaderData.setFloat(r._farClipProperty,e)}},{key:"primaryScale",get:function(){return this.shaderData.getFloat(r._primaryScaleProperty)},set:function(e){this.shaderData.setFloat(r._primaryScaleProperty,e)}},{key:"secondaryScale",get:function(){return this.shaderData.getFloat(r._secondaryScaleProperty)},set:function(e){this.shaderData.setFloat(r._secondaryScaleProperty,e)}},{key:"gridIntensity",get:function(){return this.shaderData.getFloat(r._gridIntensityProperty)},set:function(e){this.shaderData.setFloat(r._gridIntensityProperty,e)}},{key:"axisIntensity",get:function(){return this.shaderData.getFloat(r._axisIntensityProperty)},set:function(e){this.shaderData.setFloat(r._axisIntensityProperty,e)}},{key:"flipProgress",get:function(){return this.shaderData.getFloat(r._flipProgressProperty)},set:function(e){this.shaderData.setFloat(r._flipProgressProperty,ve.clamp(e,0,1))}},{key:"fade",get:function(){return this.shaderData.getFloat(r._fadeProperty)},set:function(e){this.shaderData.setFloat(r._fadeProperty,ve.clamp(e,0,1))}}]),r}(yn);xs._farClipProperty=X.getByName("u_far");xs._nearClipProperty=X.getByName("u_near");xs._primaryScaleProperty=X.getByName("u_primaryScale");xs._secondaryScaleProperty=X.getByName("u_secondaryScale");xs._gridIntensityProperty=X.getByName("u_gridIntensity");xs._axisIntensityProperty=X.getByName("u_axisIntensity");xs._flipProgressProperty=X.getByName("u_flipProgress");xs._fadeProperty=X.getByName("u_fade");vt.create("grid",`
#include <common>
#include <common_vert>
uniform mat4 camera_ViewInvMat;

varying vec3 nearPoint;
varying vec3 farPoint;

vec3 UnprojectPoint(float x, float y, float z, mat4 viewInvMat, mat4 projInvMat) {
    vec4 unprojectedPoint =  viewInvMat * projInvMat * vec4(x, y, z, 1.0);
    return unprojectedPoint.xyz / unprojectedPoint.w;
}

void main() {
    float tol = 0.0001;
    mat4 viewInvMat = camera_ViewInvMat;
    if (abs(viewInvMat[3][1]) < tol) {
        viewInvMat[3][1] = tol;
    }
    mat4 projInvMat = INVERSE_MAT(camera_ProjMat);

    nearPoint = UnprojectPoint(POSITION.x, POSITION.y, -1.0, viewInvMat, projInvMat);// unprojecting on the near plane
    farPoint = UnprojectPoint(POSITION.x, POSITION.y, 1.0, viewInvMat, projInvMat);// unprojecting on the far plane
    gl_Position = vec4(POSITION, 1.0);// using directly the clipped coordinates
}`,`
#include <transform_declare>

uniform float u_far;
uniform float u_near;
uniform float u_primaryScale;
uniform float u_secondaryScale;
uniform float u_gridIntensity;
uniform float u_axisIntensity;
uniform float u_flipProgress;
uniform float u_fade;

varying vec3 nearPoint;
varying vec3 farPoint;
  
vec4 grid(vec3 fragPos3D, float scale, float fade) {
    vec2 coord = mix(fragPos3D.xz, fragPos3D.xy, u_flipProgress) * scale;
    vec2 derivative = fwidth(coord);
    vec2 grid = abs(fract(coord - 0.5) - 0.5) / derivative;
    float line = min(grid.x, grid.y);
    float minimumz = min(derivative.y, 1.0);
    float minimumx = min(derivative.x, 1.0);
    vec4 color = vec4(u_gridIntensity, u_gridIntensity, u_gridIntensity, fade * (1.0 - min(line, 1.0)));
    // z-axis
    if (fragPos3D.x > -u_axisIntensity * minimumx && fragPos3D.x < u_axisIntensity * minimumx)
        color.z = 1.0;
    // x-axis or y-axis
    float xy = mix(fragPos3D.z, fragPos3D.y, u_flipProgress);
    if (xy > -u_axisIntensity * minimumz && xy < u_axisIntensity * minimumz)
        color.x = 1.0;
    return color;
}

float computeDepth(vec3 pos) {
    vec4 clip_space_pos = camera_ProjMat * camera_ViewMat * vec4(pos.xyz, 1.0);
    // map to 0-1
    return (clip_space_pos.z / clip_space_pos.w) * 0.5 + 0.5;
}

float computeLinearDepth(vec3 pos) {
    vec4 clip_space_pos = camera_ProjMat * camera_ViewMat * vec4(pos.xyz, 1.0);
    float clip_space_depth = clip_space_pos.z / clip_space_pos.w;
    float linearDepth = (2.0 * u_near * u_far) / (u_far + u_near - clip_space_depth * (u_far - u_near));
    return linearDepth / u_far;// normalize
}

void main() {
    float ty = -nearPoint.y / (farPoint.y - nearPoint.y);
    float tz = -nearPoint.z / (farPoint.z - nearPoint.z);
    float t = mix(ty, tz, u_flipProgress);
    vec3 fragPos3D = nearPoint + t * (farPoint - nearPoint);

    gl_FragDepth = computeDepth(fragPos3D);

    float linearDepth = computeLinearDepth(fragPos3D);
    float fading = max(0.0, (0.5 - linearDepth));

    // adding multiple resolution for the grid
    gl_FragColor = (grid(fragPos3D, u_primaryScale, u_fade) + grid(fragPos3D, u_secondaryScale, 1.0 - u_fade));
    gl_FragColor.a *= fading;
}
`);var KP=function(){function n(){}return n.createGridPlane=function(a){var e=new Kn(a);return n._updateGridData(e),a.resourceManager.addContentRestorer(new A9(e)),e},n._updateGridData=function(a){var e=new Array(6);e[0]=new z(1,1,0),e[1]=new z(-1,-1,0),e[2]=new z(-1,1,0),e[3]=new z(-1,-1,0),e[4]=new z(1,1,0),e[5]=new z(1,-1,0);var t=new Uint8Array(6);t[0]=2,t[1]=1,t[2]=0,t[3]=5,t[4]=4,t[5]=3,a.setPositions(e),a.setIndices(t),a.uploadData(!0),a.addSubMesh(0,6);var i=a.bounds;return i.min.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),i.max.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),a},n}(),A9=function(n){m_(r,n);function r(e){return n.call(this,e)}var a=r.prototype;return a.restoreContent=function(){KP._updateGridData(this.resource)},r}(Ya),w9=function(n){m_(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._progress=0,e._is2DGrid=!1,e._flipGrid=!1,e.speed=10,e.camera=null,e.distance=8,e}var a=r.prototype;return a.onAwake=function(){var t=this,i=t.engine,o=t.entity,s=o.addComponent(yr);s.receiveShadows=!1,s.castShadows=!1,s.mesh=KP.createGridPlane(i),this._material=new xs(i),s.setMaterial(this._material)},a.onUpdate=function(t){var i=this,o=i._material,s=i.camera;if(s!==null){o.nearClipPlane=s.nearClipPlane,o.farClipPlane=s.farClipPlane;var l=Math.log2(this.distance),u=Math.pow(2,Math.floor(l)+1),c=Math.pow(2,Math.floor(l));o.fade=(this.distance-c)/(u-c);var f=-Math.floor(l);if(o.primaryScale=Math.pow(2,f),o.secondaryScale=Math.pow(2,f+1),o.axisIntensity=.3/o.primaryScale,this._flipGrid){this._progress+=t;var d=ve.clamp(this._progress*this.speed,0,1);d>=1&&(this._flipGrid=!1),this._is2DGrid||(d=1-d),o.flipProgress=d}}},Lx(r,[{key:"material",get:function(){return this._material}},{key:"is2DGrid",get:function(){return this._is2DGrid},set:function(t){this._is2DGrid=t,this._progress=0,this._flipGrid=!0}}]),r}(zr),P9=`
  attribute vec3 POSITION;
  attribute vec2 TEXCOORD_0;
  attribute vec4 COLOR_0;
  uniform mat4 renderer_MVPMat;
  
  uniform float u_time;
  uniform vec2 u_foam_speed; 
  uniform vec2 u_distorsion_speed; 
  varying vec2 waterTexCoords;
  varying vec2 normalTexCoords;
  varying vec4 v_color;
      
  void main() {
    gl_Position = renderer_MVPMat * vec4(POSITION, 1.0);
    waterTexCoords = TEXCOORD_0 + vec2(u_foam_speed.x * u_time, u_foam_speed.y * u_time);
    normalTexCoords = TEXCOORD_0 + vec2(u_distorsion_speed.x * cos(u_time), u_distorsion_speed.y * sin(u_time));
    v_color = COLOR_0; 
  }
  `,M9=`
  #include <common>
  varying vec4 v_color;
  varying vec2 waterTexCoords;
  varying vec2 normalTexCoords;
  uniform sampler2D material_NormalTexture;
  uniform sampler2D u_foamTex;
  uniform vec3 u_foamColor;
  uniform vec2 u_foam_param;
  uniform float u_distorsion_amount;
  void main() {  
    vec4 normalTex = texture2D(material_NormalTexture, normalTexCoords) * 2.0 - 1.0;
    vec4 waterTex = texture2D(u_foamTex, waterTexCoords + (normalTex.rg * u_distorsion_amount));
    float alphaComp = v_color.r * waterTex.r * u_foam_param.x;
    float alpha = pow(alphaComp,2.0);
    alpha = smoothstep(0.5 - u_foam_param.y, 0.5+ u_foam_param.y, alpha);
    alpha = saturate(alpha);
    
    gl_FragColor = vec4(u_foamColor.rgb, alpha);
  }
  `;vt.create("water-ripple",P9,M9);X.getByName("u_foamColor");X.getByName("u_foam_speed");X.getByName("u_foam_param");X.getByName("u_distorsion_speed");X.getByName("u_distorsion_amount");X.getByName("u_foamTex");var O9=`
    attribute vec3 POSITION;
    attribute vec2 TEXCOORD_0;
    attribute vec4 COLOR_0;

    uniform mat4 renderer_MVPMat;
    
    uniform float u_time;
    uniform vec2 u_water_speed; 
    uniform vec2 u_distorsion_speed; 
    
    varying vec4 v_color;
    varying vec2 waterTexCoords;
    varying vec2 normalTexCoords;
  
    void main() {
      gl_Position = renderer_MVPMat * vec4(POSITION, 1.0);
  
      waterTexCoords = TEXCOORD_0 + vec2(u_water_speed.x * sin(u_time), u_water_speed.y * cos(u_time));
      normalTexCoords = TEXCOORD_0 + vec2(u_distorsion_speed.x * cos(u_time), u_distorsion_speed.y * sin(u_time));     
      
      v_color = COLOR_0;
    }
    `,I9=`
    #include <common>
    varying vec4 v_color;
    varying vec2 waterTexCoords;
    varying vec2 normalTexCoords;
  
    uniform sampler2D material_NormalTexture;
    uniform sampler2D u_waterTex;
    uniform sampler2D u_edgeTex;
  
    uniform vec4 u_edgeColor;
    uniform vec2 u_edgeParam;
    uniform float u_distorsion_amount;
  
    void main() {
      vec4 normalTex = texture2D(material_NormalTexture, normalTexCoords) * 2.0 - 1.0;
      vec4 waterTex = texture2D(u_waterTex, waterTexCoords + (normalTex.rg * u_distorsion_amount));
      vec4 edgeTex = texture2D(u_edgeTex, waterTexCoords + (normalTex.rg * u_distorsion_amount));
  
      float edge = pow((v_color.r + edgeTex.r) * v_color.r, 2.0);
      edge = saturate(1.0 - smoothstep(u_edgeParam.x - u_edgeParam.y, u_edgeParam.x + u_edgeParam.y, edge));
      vec4 finalCol = mix(waterTex, u_edgeColor, edge);
  
      gl_FragColor = finalCol;
    }
    `;vt.create("water",O9,I9);X.getByName("u_water_speed");X.getByName("u_edgeColor");X.getByName("u_edgeParam");X.getByName("u_distorsion_amount");X.getByName("u_distorsion_speed");X.getByName("u_waterTex");X.getByName("u_edgeTex");var L9=`
    attribute vec3 POSITION;
    attribute vec2 TEXCOORD_0;
    attribute vec4 COLOR_0;
  
    uniform mat4 renderer_MVPMat;
    
    uniform float u_time;
    uniform vec2 u_water_speed; 
    uniform vec2 u_waterfall_speed; 
    uniform vec2 u_distorsion_speed; 
  
    varying vec2 waterTexCoords;
    varying vec2 waterfallTexCoords;
    varying vec2 normalTexCoords;
    varying vec4 v_color;

    void main() {
      gl_Position = renderer_MVPMat * vec4(POSITION, 1.0);
  
      waterTexCoords = TEXCOORD_0 + vec2(u_water_speed.x * u_time, u_water_speed.y * u_time);
      waterfallTexCoords = TEXCOORD_0 + vec2(u_waterfall_speed.x * u_time, u_waterfall_speed.y * u_time);
      normalTexCoords = TEXCOORD_0 + vec2(u_distorsion_speed.x * cos(u_time), u_distorsion_speed.y * sin(u_time));    
      
      v_color = COLOR_0; 
    }
    `,N9=`
    #include <common>
    varying vec4 v_color;
    varying vec2 waterTexCoords;
    varying vec2 waterfallTexCoords;
    varying vec2 normalTexCoords;
  
    uniform sampler2D material_NormalTexture;
    uniform sampler2D u_waterTex;
    uniform sampler2D u_waterfallTex;
    uniform sampler2D u_edgeNoiseTex;
  
    uniform vec4 u_edgeColor;
    uniform vec2 u_edgeParam;
    uniform float u_distorsion_amount;
  
    void main() {      
      vec4 normalTex = texture2D(material_NormalTexture, normalTexCoords) * 2.0 - 1.0;
      
      vec4 waterTex = texture2D(u_waterTex, waterTexCoords + (normalTex.rg * u_distorsion_amount));
      vec4 waterfallTex = texture2D(u_waterfallTex, waterfallTexCoords + (normalTex.rg * u_distorsion_amount));
  
      vec4 streamEdge = texture2D(u_edgeNoiseTex, waterTexCoords);
      vec4 fallEdge = texture2D(u_edgeNoiseTex, waterfallTexCoords);
  
      float edgeShape = mix(fallEdge.r, streamEdge.r, v_color.r);
      edgeShape = saturate(edgeShape * v_color.g);
      edgeShape = saturate(smoothstep(u_edgeParam.x - u_edgeParam.y, u_edgeParam.x + u_edgeParam.y, edgeShape));
  
      vec4 waterAll = mix(waterfallTex, waterTex, v_color.r);
      vec4 finalCol = mix(waterAll, u_edgeColor, edgeShape);
  
      gl_FragColor = finalCol;
    }
    `;vt.create("water-fall",L9,N9);X.getByName("u_water_speed");X.getByName("u_waterfall_speed");X.getByName("u_distorsion_speed");X.getByName("u_edgeColor");X.getByName("u_edgeParam");X.getByName("u_distorsion_amount");X.getByName("u_waterTex");X.getByName("u_waterfallTex");X.getByName("u_edgeNoiseTex");var F9=`
#define IS_METALLIC_WORKFLOW
#include <common>
#include <camera_declare>

#include <FogFragmentDeclaration>

#include <uv_share>
#include <normal_share>
#include <color_share>
#include <worldpos_share>

#include <light_frag_define>
#include <pbr_frag_define>
#include <pbr_helper>

#ifdef LIGHTMAP_TEXTURE
    uniform sampler2D u_lightMapTexture;
    uniform float u_lightMapIntensity;
#endif


void main() {
    Geometry geometry;
    Material material;
    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
    
    initGeometry(geometry, gl_FrontFacing);
    initMaterial(material, geometry);
    
    addTotalDirectRadiance(geometry, material, reflectedLight);
    
    
    // IBL diffuse
    #ifdef LIGHTMAP_TEXTURE
        vec2 lightMapUV = v_uv;
        #ifdef RENDERER_HAS_UV1
            lightMapUV = v_uv1;
        #endif
        reflectedLight.indirectDiffuse += texture2D(u_lightMapTexture, lightMapUV).rgb * u_lightMapIntensity * BRDF_Diffuse_Lambert( material.diffuseColor );
    #endif
    
    // IBL specular
    vec3 radiance = getLightProbeRadiance(geometry, geometry.normal, material.roughness, int(scene_EnvMapLight.mipMapLevel), scene_EnvMapLight.specularIntensity);
    float radianceAttenuation = 1.0;
    
    #ifdef MATERIAL_CLEARCOAT
        vec3 clearCoatRadiance = getLightProbeRadiance( geometry, geometry.clearCoatNormal, material.clearCoatRoughness, int(scene_EnvMapLight.mipMapLevel), scene_EnvMapLight.specularIntensity );
    
        reflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * envBRDFApprox(vec3( 0.04 ), material.clearCoatRoughness, geometry.clearCoatDotNV);
        radianceAttenuation -= material.clearCoat * F_Schlick(geometry.clearCoatDotNV);
    #endif
    
    reflectedLight.indirectSpecular += radianceAttenuation * radiance * envBRDFApprox(material.specularColor, material.roughness, geometry.dotNV );
    
    
    // Occlusion
    #ifdef MATERIAL_OCCLUSIONTEXTURE
        vec2 aoUV = v_uv;
        #ifdef RENDERER_HAS_UV1
            if(material_OcclusionTextureCoord == 1.0){
                aoUV = v_uv1;
            }
        #endif
        float ambientOcclusion = (texture2D(material_OcclusionTexture, aoUV).r - 1.0) * material_OcclusionIntensity + 1.0;
        reflectedLight.indirectDiffuse *= ambientOcclusion;
        #ifdef SCENE_USE_SPECULAR_ENV
            reflectedLight.indirectSpecular *= computeSpecularOcclusion(ambientOcclusion, material.roughness, geometry.dotNV);
        #endif
    #endif
        
        
    // Emissive
    vec3 emissiveRadiance = material_EmissiveColor;
    #ifdef MATERIAL_HAS_EMISSIVETEXTURE
        vec4 emissiveColor = texture2D(material_EmissiveTexture, v_uv);
        #ifndef ENGINE_IS_COLORSPACE_GAMMA
            emissiveColor = gammaToLinear(emissiveColor);
        #endif
        emissiveRadiance *= emissiveColor.rgb;
    #endif
        
    // Total
    vec3 totalRadiance =    reflectedLight.directDiffuse + 
                            reflectedLight.indirectDiffuse + 
                            reflectedLight.directSpecular + 
                            reflectedLight.indirectSpecular + 
                            emissiveRadiance;
                            
        
    gl_FragColor = vec4(totalRadiance, material.opacity);
        
    #include <FogFragment>
        
    #ifndef ENGINE_IS_COLORSPACE_GAMMA
        gl_FragColor = linearToGamma(gl_FragColor);
    #endif

}
`,D9=`
#include <common>
#include <common_vert>
#include <blendShape_input>
#include <uv_share>
#include <color_share>
#include <normal_share>
#include <worldpos_share>

#include <ShadowVertexDeclaration>
#include <FogVertexDeclaration>

void main() {

    #include <begin_position_vert>
    #include <begin_normal_vert>
    #include <blendShape_vert>
    #include <skinning_vert>
    #include <uv_vert>
    #include <color_vert>
    #include <normal_vert>
    #include <worldpos_vert>
    #include <position_vert>

    #include <ShadowVertex>
    #include <FogVertex>
}
`;vt.create("bake-pbr",D9,F9);X.getByName("u_lightMapTexture");X.getByName("u_lightMapIntensity");var YP=function(n){m_(r,n);function r(e){var t;t=n.call(this,e,vt.find("plain-color"))||this;var i=t.shaderData;return i.enableMacro("MATERIAL_OMIT_NORMAL"),i.setColor(r._baseColorProp,new Me(1,1,1,1)),t.renderState.rasterState.cullMode=Fr.Off,t}var a=r.prototype;return a.clone=function(){var t=new r(this._engine);return this.cloneTo(t),t},Lx(r,[{key:"baseColor",get:function(){return this.shaderData.getColor(r._baseColorProp)},set:function(t){var i=this.shaderData.getColor(r._baseColorProp);t!==i&&i.copyFrom(t)}}]),r}(yn);vt.create("plain-color",`
#include <common>
#include <common_vert>
#include <blendShape_input>

void main() {
    #include <begin_position_vert>
    #include <blendShape_vert>
    #include <skinning_vert>
    #include <position_vert>
}
`,`
#include <common>

uniform vec4 material_BaseColor;

void main() {
     vec4 baseColor = material_BaseColor;

    #ifdef MATERIAL_IS_ALPHA_CUTOFF
        if( baseColor.a < material_AlphaCutoff ) {
            discard;
        }
    #endif

    gl_FragColor = baseColor;

     #ifndef ENGINE_IS_COLORSPACE_GAMMA
        gl_FragColor = linearToGamma(gl_FragColor);
    #endif
}
`);function yg(n,r){return r!=null&&typeof Symbol!="undefined"&&r[Symbol.hasInstance]?!!r[Symbol.hasInstance](n):n instanceof r}var vs=function(n){$P(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._cameraPositions=[new z,new z,new z,new z,new z,new z,new z,new z],e._localPositions=[],e._globalPositions=[],e._indices=null,e._indicesCount=0,e._boundsIndicesCount=0,e._wireframeRenderers=[],e._wireframeElements=[],e}var a=r.prototype;return a.clear=function(){this._wireframeRenderers.length=0,this._wireframeElements.length=0,this._localPositions.length=0,this._globalPositions.length=0,this._indicesCount=0,this._mesh.subMesh.count=0},a.addEntityWireframe=function(t,i){if(i===void 0&&(i=!0),i){var o=new Array;t.getComponentsIncludeChildren(rn,o);for(var s=0,l=o.length;s<l;s++)this.addCameraWireframe(o[s]);var u=o.length;t.getComponentsIncludeChildren(ti,o);for(var c=u,f=o.length;c<f;c++)this.addSpotLightWireframe(o[c]);u=o.length,t.getComponentsIncludeChildren(wo,o);for(var d=u,h=o.length;d<h;d++)this.addDirectLightWireframe(o[d]);u=o.length,t.getComponentsIncludeChildren(hs,o);for(var _=u,p=o.length;_<p;_++)this.addPointLightWireframe(o[_]);u=o.length,t.getComponentsIncludeChildren(ta,o);for(var v=u,y=o.length;v<y;v++)this.addCollideWireframe(o[v]);u=o.length,t.getComponentsIncludeChildren(na,o);for(var m=u,g=o.length;m<g;m++)this.addParticleRendererEmissionShapeWireframe(o[m])}else{var x=t.getComponent(rn);x&&this.addCameraWireframe(x);var b=t.getComponent(ti);b&&this.addSpotLightWireframe(b);var S=t.getComponent(wo);S&&this.addDirectLightWireframe(S);var C=t.getComponent(hs);C&&this.addPointLightWireframe(C);var E=t.getComponent(ta);E&&this.addCollideWireframe(E);var T=t.getComponent(na);T&&this.addParticleRendererEmissionShapeWireframe(T)}},a.addCameraWireframe=function(t){var i=t.entity.transform,o=t.projectionMatrix.clone();o.invert();var s=this._localPositions,l=s.length;this._wireframeElements.push(new fi(i,l));for(var u=r._ndcPosition,c=0;c<4;c++){var f=this._cameraPositions[c];f.copyFrom(u[c]),f.transformCoordinate(o),s.push(f)}for(var d=0;d<4;d++){var h=this._cameraPositions[d+4];h.copyFrom(u[d]),h.z=1,h.transformCoordinate(o),s.push(h)}this._growthIndexMemory(24);var _=this._indices;_[this._indicesCount++]=l,_[this._indicesCount++]=l+1,_[this._indicesCount++]=l+1,_[this._indicesCount++]=l+2,_[this._indicesCount++]=l+2,_[this._indicesCount++]=l+3,_[this._indicesCount++]=l+3,_[this._indicesCount++]=l,_[this._indicesCount++]=l,_[this._indicesCount++]=l+4,_[this._indicesCount++]=l+1,_[this._indicesCount++]=l+5,_[this._indicesCount++]=l+2,_[this._indicesCount++]=l+6,_[this._indicesCount++]=l+3,_[this._indicesCount++]=l+7,_[this._indicesCount++]=l+4,_[this._indicesCount++]=l+5,_[this._indicesCount++]=l+5,_[this._indicesCount++]=l+6,_[this._indicesCount++]=l+6,_[this._indicesCount++]=l+7,_[this._indicesCount++]=l+7,_[this._indicesCount++]=l+4},a.addSpotLightWireframe=function(t){var i=t.distance,o=Math.tan(t.angle/2)*i,s=this._localPositions.length,l=xt.coneIndexCount;this._growthIndexMemory(l),this._growthPosition(xt.conePositionCount);var u=this,c=u._indices,f=u._localPositions;xt.createConeWireframe(o,i,f,s,c,this._indicesCount),this._indicesCount+=l,this._rotateAroundX(s),this._wireframeElements.push(new fi(t.entity.transform,s))},a.addPointLightWireframe=function(t){var i=this._localPositions.length,o=xt.sphereIndexCount;this._growthIndexMemory(o),this._growthPosition(xt.spherePositionCount);var s=this,l=s._indices,u=s._localPositions;xt.createSphereWireframe(t.distance,u,i,l,this._indicesCount),this._indicesCount+=o,this._wireframeElements.push(new fi(t.entity.transform,i))},a.addDirectLightWireframe=function(t){var i=this._localPositions.length,o=xt.unboundCylinderIndexCount;this._growthIndexMemory(o),this._growthPosition(xt.unboundCylinderPositionCount);var s=this,l=s._indices,u=s._localPositions;xt.createUnboundCylinderWireframe(1,u,i,l,this._indicesCount),this._indicesCount+=o,this._rotateAroundX(i),this._wireframeElements.push(new fi(t.entity.transform,i))},a.addRendererWireframe=function(t){this._boundsIndicesCount+=xt.cuboidIndexCount,this._wireframeRenderers.push(t)},a.addCollideWireframe=function(t){for(var i=t.shapes,o=0,s=i.length;o<s;o++){var l=i[o];yg(l,xx)?this.addBoxColliderShapeWireframe(l):yg(l,Sx)?this.addSphereColliderShapeWireframe(l):yg(l,Bd)&&this.addCapsuleColliderShapeWireframe(l)}},a.addBoxColliderShapeWireframe=function(t){var i=t.collider.entity.transform,o=i.lossyWorldScale,s=t.position,l=t.rotation,u=t.size,c=r._tempVector,f=r._tempRotation,d=this._localPositions.length,h=xt.cuboidIndexCount;this._growthIndexMemory(h),this._growthPosition(xt.cuboidPositionCount);var _=this,p=_._indices,v=_._localPositions;xt.createCuboidWireframe(o.x*u.x,o.y*u.y,o.z*u.z,v,d,p,this._indicesCount),Ut.rotationYawPitchRoll(l.x,l.y,l.z,f),this._localRotation(d,f),z.multiply(s,o,c),this._localTranslate(d,c),this._indicesCount+=h,this._wireframeElements.push(new fi(i,d))},a.addSphereColliderShapeWireframe=function(t){var i=t.collider.entity.transform,o=i.lossyWorldScale,s=t.position,l=t.rotation,u=t.radius,c=r._tempVector,f=r._tempRotation,d=this._localPositions.length,h=xt.sphereIndexCount;this._growthIndexMemory(h),this._growthPosition(xt.spherePositionCount);var _=this,p=_._indices,v=_._localPositions;xt.createSphereWireframe(Math.max(o.x,o.y,o.z)*u,v,d,p,this._indicesCount),Ut.rotationYawPitchRoll(l.x,l.y,l.z,f),this._localRotation(d,f),z.multiply(s,o,c),this._localTranslate(d,c),this._indicesCount+=h,this._wireframeElements.push(new fi(i,d))},a.addCapsuleColliderShapeWireframe=function(t){var i=t.collider.entity.transform,o=i.lossyWorldScale,s=Math.max(o.x,o.y,o.z),l=t.radius,u=t.height,c=t.upAxis,f=t.position,d=t.rotation,h=r._tempVector,_=r._tempRotation,p=r._tempAxis,v=r._halfSqrt,y=this._localPositions.length,m=xt.capsuleIndexCount;this._growthIndexMemory(m),this._growthPosition(xt.capsulePositionCount);var g=this,x=g._indices,b=g._localPositions;switch(xt.createCapsuleWireframe(s*l,s*u,b,y,x,this._indicesCount),c){case Dl.X:p.set(0,0,v,v);break;case Dl.Y:p.set(0,0,0,1);break;case Dl.Z:p.set(v,0,0,v)}Ut.rotationYawPitchRoll(d.x,d.y,d.z,_),Ut.multiply(_,p,_),this._localRotation(y,_),z.multiply(f,o,h),this._localTranslate(y,h),this._indicesCount+=m,this._wireframeElements.push(new fi(i,y))},a.addParticleRendererEmissionShapeWireframe=function(t){if(t.generator.emission.enabled){var i=t.generator.emission.shape,o=t.entity.transform;switch(i==null?void 0:i.shapeType){case 0:this.addBoxParticleShapeWireframe(i,o);break;case 1:this.addCircleParticleShapeWireframe(i,o);break;case 2:this.addConeParticleShapeWireframe(i,o);break;case 3:this.addHemisphereParticleShapeWireframe(i,o);break;case 4:this.addSphereParticleShapeWireframe(i,o);break}}},a.addBoxParticleShapeWireframe=function(t,i){var o=t.size,s=this._localPositions.length,l=xt.cuboidIndexCount;this._growthIndexMemory(l),this._growthPosition(xt.cuboidPositionCount);var u=this,c=u._indices,f=u._localPositions;xt.createCuboidWireframe(o.x,o.y,o.z,f,s,c,this._indicesCount),this._indicesCount+=l,this._wireframeElements.push(new fi(i,s,!1))},a.addCircleParticleShapeWireframe=function(t,i){var o=t.radius,s=this._localPositions.length,l=xt.circleIndexCount;this._growthIndexMemory(l),this._growthPosition(xt.circlePositionCount);var u=this,c=u._indices,f=u._localPositions;xt.createCircleWireframe(o,0,new z,f,s,c,this._indicesCount),this._indicesCount+=l,this._wireframeElements.push(new fi(i,s,!1))},a.addConeParticleShapeWireframe=function(t,i){var o=t.radius,s=t.length,l=t.angle,u=this._localPositions.length,c=xt.frustumIndexCount;this._growthIndexMemory(c),this._growthPosition(xt.frustumPositionCount);var f=this,d=f._indices,h=f._localPositions;xt.createFrustumWireframe(o,s,l,h,u,d,this._indicesCount),this._indicesCount+=c,this._wireframeElements.push(new fi(i,u,!1))},a.addHemisphereParticleShapeWireframe=function(t,i){var o=t.radius,s=this._localPositions.length,l=xt.hemisphereIndexCount;this._growthIndexMemory(l),this._growthPosition(xt.hemispherePositionCount);var u=this,c=u._indices,f=u._localPositions;xt.createHemisphereWireframe(o,2,f,s,c,this._indicesCount),this._indicesCount+=l,this._wireframeElements.push(new fi(i,s,!1))},a.addSphereParticleShapeWireframe=function(t,i){var o=t.radius,s=this._localPositions.length,l=xt.sphereIndexCount;this._growthIndexMemory(l),this._growthPosition(xt.spherePositionCount);var u=this,c=u._indices,f=u._localPositions;xt.createSphereWireframe(o,f,s,c,this._indicesCount),this._indicesCount+=l,this._wireframeElements.push(new fi(i,s,!1))},a.onAwake=function(){var t=this.engine,i=new Kn(t),o=new YP(t),s=this.entity.getComponent(yr);s.castShadows=!1,s.receiveShadows=!1;var l=t._hardwareRenderer.canIUse(Ue.elementIndexUint);i.addSubMesh(0,this._indicesCount,ro.Lines),s.mesh=i,s.setMaterial(o);var u=i.bounds;u.min.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),u.max.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._mesh=i,this._material=o,this._renderer=s,this._indices=l?new Uint32Array(128):new Uint16Array(128),this._supportUint32Array=l},a.onEnable=function(){this._renderer.enabled=!0},a.onDisable=function(){this._renderer.enabled=!1},a.onLateUpdate=function(t){var i=this,o=i._mesh,s=i._localPositions,l=i._globalPositions,u=i._wireframeElements,c=i._wireframeRenderers,f=i._indices,d=s.length;l.length=d;for(var h=0,_=!1,p=0,v=u.length;p<v;p++){var y=u[p],m=y.transformRanges,g=p<v-1?u[p+1].transformRanges:d;if(y.updateFlag.flag){var x=y.transform,b=r._tempMatrix;y.isScaleIgnored?Ge.rotationTranslation(x.worldRotationQuaternion,x.worldPosition,b):b.copyFrom(x.worldMatrix);for(var S=m;S<g;S++){var C=s[h],E=r._getPositionFromPool(h);z.transformCoordinate(C,b,E),l[h]=E,h++}y.updateFlag.flag=!1,_=!0}else h+=g-m}this._growthIndexMemory(this._boundsIndicesCount);for(var T=this._indicesCount,M=0;M<c.length;M++){var L=c[M],F=L.bounds,N=r._tempVector;F.getExtent(N);var I=l.length;xt.createCuboidWireframe(N.x*2,N.y*2,N.z*2,l,I,f,T),F.getCenter(N);for(var O=I;O<l.length;O++){var P=l[O];P.add(N)}T+=xt.cuboidIndexCount}(c.length>0||_)&&(o.setPositions(l),o.setIndices(this._indices),o.uploadData(!1),o.subMesh.count=T),T===0?this._renderer.setMaterial(null):this._renderer.setMaterial(this._material)},a._growthIndexMemory=function(t){var i=this._indices,o=this._indicesCount+t;if(o>i.length){var s=this._supportUint32Array?4294967295:65535;if(o>s)throw Error("The vertex count is over limit.");var l=this._supportUint32Array?new Uint32Array(o):new Uint16Array(o);l.set(i),this._indices=l}},a._growthPosition=function(t){for(var i=this._localPositions,o=0;o<t;o++)i.push(new z)},a._localTranslate=function(t,i){for(var o=this._localPositions,s=t;s<o.length;s++){var l=o[s];l.add(i)}},a._localRotation=function(t,i){for(var o=this._localPositions,s=t;s<o.length;s++){var l=o[s];z.transformByQuat(l,i,l)}},a._rotateAroundX=function(t){for(var i=this._localPositions,o=t;o<i.length;o++){var s=i[o],l=s.y,u=s.z;s.z=l,s.y=-u}},r._getPositionFromPool=function(t){var i,o=r._positionPool;return t<o.length?i=o[t]:(i=new z,r._positionPool.push(i)),i},Ix(r,[{key:"baseColor",get:function(){return this._material.baseColor},set:function(t){this._material.baseColor=t}}]),r}(zr);vs._positionPool=[];vs._ndcPosition=[new z(-1,1,-1),new z(1,1,-1),new z(1,-1,-1),new z(-1,-1,-1)];vs._tempMatrix=new Ge;vs._tempVector=new z;vs._tempRotation=new Ut;vs._tempAxis=new Ut;vs._halfSqrt=.70710678118655;vs=XP([gs(yr,no.CheckOnly)],vs);var fi=function(r,a,e){e===void 0&&(e=!0),this.transform=r,this.transformRanges=a,this.isScaleIgnored=e,this.updateFlag=r.registerWorldChangeFlag()},gc=function(n){$P(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.onAwake=function(){var t=this.engine,i=new Kn(t),o=new YP(t),s=this.entity.getComponent(yr);s.castShadows=!1,s.receiveShadows=!1;var l=t._hardwareRenderer.canIUse(Ue.elementIndexUint);i._enableVAO=!1,i.addSubMesh(0,r._indicesCount,ro.Lines),s.mesh=i,s.setMaterial(o);var u=i.bounds;u.min.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),u.max.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._mesh=i,this._material=o,this._renderer=s,r._indices=l?new Uint32Array(128):new Uint16Array(128),r._supportUint32Array=l},a.onLateUpdate=function(t){var i=this,o=i._mesh;r._positionCount>0?(o.setPositions(r._positions),o.setIndices(r._indices),o.uploadData(!1),o.subMesh.count=r._indicesCount,this._renderer.setMaterial(this._material)):this._renderer.setMaterial(null),r.flush()},r.drawLine=function(t,i){r._growthPosition(2),r._growthIndexMemory(2),r._indices[r._indicesCount++]=r._positionCount,r._indices[r._indicesCount++]=r._positionCount+1,r.matrix==null?(r._positions[r._positionCount++].copyFrom(t),r._positions[r._positionCount++].copyFrom(i)):(z.transformCoordinate(t,r.matrix,r._positions[r._positionCount++]),z.transformCoordinate(i,r.matrix,r._positions[r._positionCount++]))},r.drawRect=function(t,i,o,s){r._growthPosition(4),r._growthIndexMemory(8),r._indices[r._indicesCount++]=r._positionCount,r._indices[r._indicesCount++]=r._positionCount+1,r._indices[r._indicesCount++]=r._positionCount+2,r._indices[r._indicesCount++]=r._positionCount+1,r._indices[r._indicesCount++]=r._positionCount+2,r._indices[r._indicesCount++]=r._positionCount+3,r._indices[r._indicesCount++]=r._positionCount,r._indices[r._indicesCount++]=r._positionCount+3,r.matrix==null?(r._positions[r._positionCount++].copyFrom(t),r._positions[r._positionCount++].copyFrom(i),r._positions[r._positionCount++].copyFrom(o),r._positions[r._positionCount++].copyFrom(s)):(z.transformCoordinate(t,r.matrix,r._positions[r._positionCount++]),z.transformCoordinate(i,r.matrix,r._positions[r._positionCount++]),z.transformCoordinate(o,r.matrix,r._positions[r._positionCount++]),z.transformCoordinate(s,r.matrix,r._positions[r._positionCount++]))},r.drawSphere=function(t,i){var o=xt.spherePositionCount,s=xt.sphereIndexCount,l=r._positions;r._growthPosition(o),r._growthIndexMemory(s),xt.createSphereWireframe(t,l,r._positionCount,r._indices,r._indicesCount);for(var u=0;u<o;u++){var c=l[r._positionCount+u];c.add(i),r.matrix!=null&&z.transformCoordinate(c,r.matrix,c)}r._positionCount+=o,r._indicesCount+=s},r.drawCuboid=function(t,i,o,s){var l=xt.cuboidPositionCount,u=xt.cuboidIndexCount,c=r._positions;r._growthPosition(l),r._growthIndexMemory(u),xt.createCuboidWireframe(t,i,o,c,r._positionCount,r._indices,r._indicesCount);for(var f=0;f<l;f++){var d=c[r._positionCount+f];d.add(s),r.matrix!=null&&z.transformCoordinate(d,r.matrix,d)}r._positionCount+=l,r._indicesCount+=u},r.drawCapsule=function(t,i,o){var s=xt.capsulePositionCount,l=xt.capsuleIndexCount,u=r._positions;r._growthPosition(s),r._growthIndexMemory(l),xt.createCapsuleWireframe(t,i,u,r._positionCount,r._indices,r._indicesCount);for(var c=0;c<s;c++){var f=u[r._positionCount+c];f.add(o),r.matrix!=null&&z.transformCoordinate(f,r.matrix,f)}r._positionCount+=s,r._indicesCount+=l},r.drawCircle=function(t,i,o){xt._shift.set(0,0,0);var s=xt.circlePositionCount,l=xt.circleIndexCount,u=r._positions;r._growthPosition(s),r._growthIndexMemory(l),xt.createCircleWireframe(t,i,xt._shift,u,r._positionCount,r._indices,r._indicesCount);for(var c=0;c<s;c++){var f=u[r._positionCount+c];f.add(o),r.matrix!=null&&z.transformCoordinate(f,r.matrix,f)}r._positionCount+=s,r._indicesCount+=l},r.flush=function(){r._positionCount=0,r._indicesCount=0},r._growthIndexMemory=function(t){var i=r._indices,o=r._indicesCount+t;if(o>i.length){var s=r._supportUint32Array?4294967295:65535;if(o>s)throw Error("The vertex count is over limit.");var l=r._supportUint32Array?new Uint32Array(o):new Uint16Array(o);l.set(i),r._indices=l}},r._growthPosition=function(t){var i=r._positions,o=r._positionCount+t;if(o>i.length)for(var s=0,l=o-i.length;s<l;s++)i.push(new z)},Ix(r,[{key:"color",set:function(t){this._material.baseColor.copyFrom(t)}}]),r}(zr);gc._positions=[];gc._positionCount=0;gc._indicesCount=0;gc.matrix=null;gc=XP([gs(yr,no.CheckOnly)],gc);var bE;(function(n){n[n.X=0]="X",n[n.Y=1]="Y",n[n.Z=2]="Z"})(bE||(bE={}));vt.create("skeleton-viewer",`
  attribute vec3 POSITION;
  attribute vec3 NORMAL;

  uniform mat4 renderer_MVPMat;
  uniform mat4 renderer_NormalMat;

  varying vec3 v_normal;

  void main(){
      gl_Position = renderer_MVPMat * vec4( POSITION , 1.0 );;
      v_normal = normalize( mat3(renderer_NormalMat) * NORMAL );
  }`,`
      uniform vec3 u_colorMin;
      uniform vec3 u_colorMax;
      varying vec3 v_normal;

      void main(){
        float ndl = dot(v_normal, vec3(0, 1, 0)) * 0.5 + 0.5;
        vec3 diffuse = mix(u_colorMin, u_colorMax, ndl);
        gl_FragColor = vec4(diffuse, 1.0);
      }
      `);var CE;(function(n){n[n.Round=0]="Round",n[n.Butt=1]="Butt",n[n.Square=2]="Square"})(CE||(CE={}));var EE;(function(n){n[n.Miter=0]="Miter",n[n.Round=1]="Round",n[n.Bevel=2]="Bevel"})(EE||(EE={}));function QP(n){this.message=n}QP.prototype=new Error;QP.prototype.name="InvalidCharacterError";var B9=`
attribute vec2 a_pos;
attribute vec2 a_normal;
attribute vec2 a_data;

uniform mat4 renderer_MVPMat;
uniform float u_width;

varying vec2 v_origin;
varying vec2 v_position;
varying float v_direction;
varying float v_part;

void main() {
    v_direction = a_data.x;
    v_part = a_data.y;
    float layer_index = 1.0;

    v_origin = a_pos;
    vec2 position = a_pos + a_normal * u_width;
    v_position = position;
    gl_Position = renderer_MVPMat * vec4(position, 0.0, 1);
}
  `,k9=`
precision highp float;

uniform vec4 u_color;
uniform int u_join;
uniform int u_cap;
uniform float u_width;

varying vec2 v_origin;
varying vec2 v_position;
varying float v_direction;
varying float v_part;

float IS_CAP = 0.0;

void main() {
    vec4 finalColor;
    if (u_cap == 0 && v_part == IS_CAP) {
      if (distance(v_position, v_origin) > u_width) {
        discard;
      }
    }
    if (u_join == 1 && v_part > 1.0) {
      if (distance(v_position, v_origin) > u_width) {
        discard;
      }
    }

    gl_FragColor = u_color;
}

  `;vt.create("line",B9,k9);var V9=`
attribute vec2 a_pos;
attribute vec2 a_normal;
attribute vec2 a_data;
attribute float a_lengthsofar;

uniform mat4 renderer_MVPMat;
uniform float u_width;
uniform vec2 u_dash;

varying vec2 v_origin;
varying vec2 v_position;
varying float v_direction;
varying float v_part;
varying vec2 v_tex;

void main() {
    v_direction = a_data.x;
    v_part = a_data.y;
    float layer_index = 1.0;


    v_origin = a_pos;

    float texcoord_y = 0.0;

    texcoord_y = a_lengthsofar / (u_dash.x + u_dash.y);
    if (v_direction == 1.0) {
        v_tex = vec2(1.0, texcoord_y);
    } else {
        v_tex = vec2(0.0, texcoord_y);
    }
    vec2 position = a_pos + a_normal * u_width;
    v_position = position;
    gl_Position = renderer_MVPMat * vec4(position, 0.0, 1);
}
  `,U9=`
precision highp float;

uniform vec4 u_color;
uniform int u_join;
uniform int u_cap;
uniform float u_width;
uniform sampler2D u_texture;

varying vec2 v_origin;
varying vec2 v_position;
varying float v_direction;
varying float v_part;
varying vec2 v_tex;

float IS_CAP = 0.0;

void main() {
    vec4 finalColor;
    if (u_cap == 0 && v_part == IS_CAP) {
      if (distance(v_position, v_origin) > u_width) {
        discard;
      }
    }
    if (u_join == 1 && v_part > 1.5) {
      if (distance(v_position, v_origin) > u_width) {
        discard;
      }
    }
    vec4 textureColor = texture2D(u_texture, v_tex);
    if (textureColor.a <= 0.5) {
      gl_FragColor = vec4(u_color.rgb, 0.0);
    } else {
      gl_FragColor = u_color;
    }
}
`;vt.create("dash",V9,U9);var TE;(function(n){n[n.Pivot=0]="Pivot",n[n.Center=1]="Center"})(TE||(TE={}));var RE;(function(n){n[n.Local=0]="Local",n[n.Global=1]="Global"})(RE||(RE={}));var AE;(function(n){n[n.None=0]="None",n[n.AnchorDirty=1]="AnchorDirty",n[n.CoordinateDirty=2]="CoordinateDirty",n[n.All=3]="All"})(AE||(AE={}));new z;new Ge;new Ge;new Da;var wE;(function(n){n[n.translate=1]="translate",n[n.rotate=2]="rotate",n[n.scale=4]="scale",n[n.all=15]="all"})(wE||(wE={}));var PE;(function(n){n[n.Circle=0]="Circle",n[n.Line=1]="Line",n[n.CircleTube=2]="CircleTube"})(PE||(PE={}));new Ut;new z;var ME;(function(n){n[n.x=0]="x",n[n.y=1]="y",n[n.z=2]="z",n[n.xyz=3]="xyz",n[n.xy=4]="xy",n[n.yz=5]="yz",n[n.xz=6]="xz"})(ME||(ME={}));new z(1,0,0),new z(0,1,0),new z(0,0,1),new z(1,1,1),new z(1,1,0),new z(0,1,1),new z(1,0,1);new wn(new z(1,0,0),0),new wn(new z(0,1,0),0),new wn(new z(0,0,1),0),new wn(new z(0,0,0),0),new wn(new z(0,0,1),0),new wn(new z(1,0,0),0),new wn(new z(0,1,0),0);function OE(n,r){for(var a=0;a<r.length;a++){var e=r[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function z9(n,r,a){return r&&OE(n.prototype,r),a&&OE(n,a),n}function T0(n,r){return T0=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},T0(n,r)}function G9(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&T0(n,r)}function H9(n,r,a,e){var t=arguments.length,i=t<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,a):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,r,a,e);else for(var s=n.length-1;s>=0;s--)(o=n[s])&&(i=(t<3?o(i):t>3?o(r,a,i):o(r,a))||i);return t>3&&i&&Object.defineProperty(r,a,i),i}var j9=`#define GLSLIFY 1
uniform vec3 material_OutlineColor;uniform sampler2D material_OutlineTexture;uniform vec2 material_TexSize;varying vec2 v_uv;float luminance(vec4 color){return 0.2125*color.r+0.7154*color.g+0.0721*color.b;}float sobel(){float Gx[9];Gx[0]=-1.0;Gx[1]=0.0;Gx[2]=1.0;Gx[3]=-2.0;Gx[4]=0.0;Gx[5]=2.0;Gx[6]=-1.0;Gx[7]=0.0;Gx[8]=1.0;float Gy[9];Gy[0]=-1.0;Gy[1]=-2.0;Gy[2]=-1.0;Gy[3]=0.0;Gy[4]=0.0;Gy[5]=0.0;Gy[6]=1.0;Gy[7]=2.0;Gy[8]=1.0;float texColor;float edgeX=0.0;float edgeY=0.0;vec2 uv[9];uv[0]=v_uv+material_TexSize.xy*vec2(-1,-1);uv[1]=v_uv+material_TexSize.xy*vec2(0,-1);uv[2]=v_uv+material_TexSize.xy*vec2(1,-1);uv[3]=v_uv+material_TexSize.xy*vec2(-1,0);uv[4]=v_uv+material_TexSize.xy*vec2(0,0);uv[5]=v_uv+material_TexSize.xy*vec2(1,0);uv[6]=v_uv+material_TexSize.xy*vec2(-1,1);uv[7]=v_uv+material_TexSize.xy*vec2(0,1);uv[8]=v_uv+material_TexSize.xy*vec2(1,1);for(int i=0;i<9;i++){texColor=luminance(texture2D(material_OutlineTexture,uv[i]));edgeX+=texColor*Gx[i];edgeY+=texColor*Gy[i];}return abs(edgeX)+abs(edgeY);}vec4 linearToGamma(vec4 linearIn){return vec4(pow(linearIn.rgb,vec3(1.0/2.2)),linearIn.a);}void main(){float sobelFactor=step(1.0,sobel());gl_FragColor=mix(vec4(0),vec4(material_OutlineColor,1.0),sobelFactor);
#ifndef ENGINE_IS_COLORSPACE_GAMMA
gl_FragColor=linearToGamma(gl_FragColor);
#endif
}`,W9=`#define GLSLIFY 1
attribute vec3 POSITION;attribute vec2 TEXCOORD_0;varying vec2 v_uv;void main(){gl_Position=vec4(POSITION.xzy,1.0);gl_Position.y*=-1.0;v_uv=TEXCOORD_0;}`,$9=`#define GLSLIFY 1
uniform vec4 camera_OutlineReplaceColor;void main(){gl_FragColor=camera_OutlineReplaceColor;}`,X9=`#define GLSLIFY 1
#include <common>
#include <common_vert>
#include <blendShape_input>
void main(){
#include <begin_position_vert>
#include <begin_normal_vert>
#include <blendShape_vert>
#include <skinning_vert>
#include <position_vert>
}`,mc=function(n){G9(r,n);function r(e){var t;t=n.call(this,e)||this,t.isChildrenIncluded=!1,t._size=1,t._clearColor=new Me(1,1,1,1),t._replaceColor=new Me(1,0,0,1),t._outlineMainColor=new Me(.95,.35,.14,1),t._outlineSubColor=new Me(.16,.67,.89,1),t._layer=cs.Layer29,t._outlineEntities=[],t._subLineEntities=[],t._renderers=[],t._layerMap=[],t._cameraViewport=new pt,t._outLineViewport=new pt(0,0,1,1);var i=t.engine,o=new yn(i,vt.find("outline-postprocess-shader")),s=vt.find("outline-replace-shader"),l=t.entity.createChild("screen"),u=l.addComponent(yr);return u.receiveShadows=!1,u.castShadows=!1,l.layer=t._layer,l.isActive=!1,u.mesh=Gn.createPlane(i,2,2),u.setMaterial(o),o.isTransparent=!0,t._outlineMaterial=o,t._replaceShader=s,t._screenEntity=l,t.size=t._size,t}var a=r.prototype;return a.clear=function(){this._outlineEntities.length=0},a.addEntity=function(t){this._outlineEntities.indexOf(t)===-1&&(this._outlineEntities.push(t),this.isChildrenIncluded&&this._calSublineEntites())},a.removeEntity=function(t){var i=this._outlineEntities.indexOf(t),o=this._outlineEntities.length;i>-1&&(i<o-1&&(this._outlineEntities[i]=this._outlineEntities[o-1]),this._outlineEntities.length--,this.isChildrenIncluded&&this._calSublineEntites())},a.onEndRender=function(t){var i=this._outlineEntities;!i.length||(this._renderEntity(t,this.subColor,this._subLineEntities),this._renderEntity(t,this.mainColor,i))},a.onDestroy=function(){this._renderTarget.getColorTexture().destroy(!0),this._renderTarget.destroy(),this._screenEntity.destroy(),this._outlineEntities=null,this._renderers=null,this._layerMap=null},a._renderEntity=function(t,i,o){var s=t.scene,l=t.clearFlags,u=t.cullingMask,c=t.enableFrustumCulling,f=s.background.solidColor,d=s.background.mode,h=this._renderers,_=this._layerMap;_.length=0;for(var p=o.length-1;p>=0;p--){var v=o[p];h.length=0,v.getComponents(yr,h),h.length&&(_.push({entity:v,layer:v.layer}),v.layer=this._layer)}this._screenEntity.isActive=!1,t.renderTarget=this._renderTarget,s.background.solidColor=this._clearColor,s.background.mode=Ro.SolidColor,t.cullingMask=this._layer,t.setReplacementShader(this._replaceShader),t.shaderData.setColor(r._replaceColorProp,this._replaceColor),t.render(),this._cameraViewport.copyFrom(t.viewport),this._screenEntity.isActive=!0,t.renderTarget=null,t.viewport=this._outLineViewport,t.clearFlags=Qr.None,t.enableFrustumCulling=!1,t.resetReplacementShader();for(var y=_.length-1;y>=0;y--){var m=_[y],g=m.entity,x=m.layer;g.layer=x}this._outlineMaterial.shaderData.setColor(r._outlineColorProp,i),t.render(),this._screenEntity.isActive=!1,t.clearFlags=l,t.enableFrustumCulling=c,t.cullingMask=u,t.viewport=this._cameraViewport,s.background.solidColor=f,s.background.mode=d},a._calSublineEntites=function(){var t=this;this._subLineEntities.length=0;for(var i=0;i<this._outlineEntities.length;i++)r._traverseEntity(this._outlineEntities[i],function(o){t._subLineEntities.push(o)})},r._traverseEntity=function(t,i){i(t);for(var o=t.children.length-1;o>=0;o--)this._traverseEntity(t.children[o],i)},z9(r,[{key:"layer",get:function(){return this.layer},set:function(t){this._layer=t}},{key:"mainColor",get:function(){return this._outlineMainColor},set:function(t){var i=this._outlineMainColor;t!==i&&i.copyFrom(t)}},{key:"subColor",get:function(){return this._outlineSubColor},set:function(t){var i=this._outlineSubColor;t!==i&&i.copyFrom(t)}},{key:"size",get:function(){return this._size},set:function(t){t=Math.max(1,Math.min(t,6)),this._size=t,this._renderTarget&&(this._renderTarget.getColorTexture().destroy(!0),this._renderTarget.destroy());var i=this.engine.canvas,o=i.width,s=i.height,l=o/t,u=s/t,c=new br(this.engine,l,u),f=new jl(this.engine,l,u,c);this._outlineMaterial.shaderData.setTexture(r._outlineTextureProp,c),this._outlineMaterial.shaderData.setVector2(r._texSizeProp,new Ze(1/l,1/u)),c.wrapModeU=c.wrapModeV=pr.Clamp,this._renderTarget=f}}]),r}(zr);mc._outlineColorProp=X.getByName("material_OutlineColor");mc._outlineTextureProp=X.getByName("material_OutlineTexture");mc._texSizeProp=X.getByName("material_TexSize");mc._replaceColorProp=X.getByName("camera_OutlineReplaceColor");mc=H9([gs(rn,no.CheckOnly)],mc);vt.create("outline-postprocess-shader",W9,j9);vt.create("outline-replace-shader",X9,$9);new z;new Ut;new Ze;new z;new z;new Ge;new z;var IE;(function(n){n[n.Wireframe=0]="Wireframe",n[n.Normal=1]="Normal",n[n.Tangent=2]="Tangent",n[n.BiTangent=3]="BiTangent"})(IE||(IE={}));var qP=`
   uniform sampler2D u_verticesSampler;
   uniform float u_verticesTextureWidth;
   uniform float u_verticesTextureHeight;
   
   uniform sampler2D u_indicesSampler;
   uniform float u_indicesTextureWidth;
   uniform float u_indicesTextureHeight;
   
   vec4 getVertexElement(float row, float col) {
        return texture2D(u_verticesSampler, vec2((col + 0.5) / u_verticesTextureWidth, (row + 0.5) / u_verticesTextureHeight));
   }
   
   vec3 getIndicesElement(float row, float col) {
        return texture2D(u_indicesSampler, vec2((col + 0.5) / u_indicesTextureWidth, (row + 0.5) / u_indicesTextureHeight )).xyz;
   }
   
   vec2 getVec2(inout vec4[ELEMENT_COUNT] rows, inout int row_index, inout int value_index) {
        row_index += (value_index+1)/4;
        value_index = (value_index+1)%4;
        float x = rows[row_index][value_index];
        
        row_index += (value_index+1)/4;
        value_index = (value_index+1)%4;
        float y = rows[row_index][value_index];
        
        return vec2(x, y);
   }
   
   vec3 getVec3(inout vec4[ELEMENT_COUNT] rows, inout int row_index, inout int value_index) {
        row_index += (value_index+1)/4;
        value_index = (value_index+1)%4;
        float x = rows[row_index][value_index];
        
        row_index += (value_index+1)/4;
        value_index = (value_index+1)%4;
        float y = rows[row_index][value_index];
        
        row_index += (value_index+1)/4;
        value_index = (value_index+1)%4;
        float z = rows[row_index][value_index];
        return vec3(x, y, z);
   }
   
   vec4 getVec4(inout vec4[ELEMENT_COUNT] rows, inout int row_index, inout int value_index) {
        row_index += (value_index+1)/4;
        value_index = (value_index+1)%4;
        float x = rows[row_index][value_index];
        
        row_index += (value_index+1)/4;
        value_index = (value_index+1)%4;
        float y = rows[row_index][value_index];
        
        row_index += (value_index+1)/4;
        value_index = (value_index+1)%4;
        float z = rows[row_index][value_index];
        
        row_index += (value_index+1)/4;
        value_index = (value_index+1)%4;
        float w = rows[row_index][value_index];
        return vec4(x, y, z, w);
   }
`,JP=`
        int row = pointIndex * ELEMENT_COUNT / int(u_verticesTextureWidth);
        int col = pointIndex * ELEMENT_COUNT % int(u_verticesTextureWidth);
        
        vec4 rows[ELEMENT_COUNT];
        for( int i = 0; i < ELEMENT_COUNT; i++ ) {
            rows[i] = getVertexElement(float(row), float(col + i));
        }
        
        vec3 POSITION = vec3(rows[0].x, rows[0].y, rows[0].z);        
        int row_index = 0;
        int value_index = 2;
#ifdef RENDERER_HAS_NORMAL 
        vec3 NORMAL = getVec3(rows, row_index, value_index);
#endif

#ifdef RENDERER_HAS_VERTEXCOLOR
        vec4 COLOR_0 = getVec4(rows, row_index, value_index);
#endif

#ifdef RENDERER_HAS_WEIGHT
        vec4 WEIGHTS_0 = getVec4(rows, row_index, value_index);
#endif

#ifdef RENDERER_HAS_JOINT
        vec4 JOINTS_0 = getVec4(rows, row_index, value_index);
#endif

#ifdef RENDERER_HAS_TANGENT
        vec4 TANGENT = getVec4(rows, row_index, value_index);
#endif

#ifdef RENDERER_HAS_UV
        vec2 TEXCOORD_0 = getVec2(rows, row_index, value_index);
#endif
`;vt.create("tbnShader",`
#include <common>
   uniform float u_lineScale;
   uniform mat4 camera_VPMat;
   uniform mat4 u_worldMatrix;
   uniform mat4 u_worldNormal;

#ifdef RENDERER_HAS_SKIN
#ifdef RENDERER_USE_JOINT_TEXTURE
    uniform sampler2D renderer_JointSampler;
    uniform float renderer_JointCount;

    mat4 getJointMatrix(sampler2D smp, float index) {
        float base = index / renderer_JointCount;
        float hf = 0.5 / renderer_JointCount;
        float v = base + hf;

        vec4 m0 = texture2D(smp, vec2(0.125, v ));
        vec4 m1 = texture2D(smp, vec2(0.375, v ));
        vec4 m2 = texture2D(smp, vec2(0.625, v ));
        vec4 m3 = texture2D(smp, vec2(0.875, v ));

        return mat4(m0, m1, m2, m3);
    }
#else
    uniform mat4 renderer_JointMatrix[ RENDERER_JOINTS_NUM ];
#endif
#endif

`+qP+`

void main() {
    int pointIndex = gl_VertexID / 2;
    `+JP+`

    #include <begin_position_vert>
    #include <begin_normal_vert>
    #include <skinning_vert>

    gl_Position = u_worldMatrix * position; 
    
#if defined(SHOW_NORMAL) && defined(RENDERER_HAS_NORMAL)
    if (gl_VertexID % 2 == 1) {
        vec3 normalW = normalize( mat3(u_worldNormal) * normal.xyz );
        gl_Position.xyz += normalize(normalW) * u_lineScale;
    }
#endif

#if defined(SHOW_TANGENT) && defined(RENDERER_HAS_TANGENT)
    if (gl_VertexID % 2 == 1) {
        vec3 tangentW = normalize( mat3(u_worldNormal) * tangent.xyz );
        gl_Position.xyz += normalize(tangentW) * u_lineScale;
    }
#endif

#if defined(SHOW_BITANGENT) && defined(RENDERER_HAS_TANGENT) && defined(RENDERER_HAS_NORMAL)
    if (gl_VertexID % 2 == 1) {
        vec3 normalW = normalize( mat3(u_worldNormal) * normal.xyz );
        vec3 tangentW = normalize( mat3(u_worldNormal) * tangent.xyz );
        vec3 bitangentW = cross( normalW, tangentW ) * tangent.w;
        gl_Position.xyz += normalize(bitangentW) * u_lineScale;
    }
#endif
    
    gl_Position = camera_VPMat * gl_Position; 
}
`,`
uniform vec4 material_BaseColor;
void main() {
    gl_FragColor = material_BaseColor;
}
`);vt.create("wireframeShader",`
#include <common>
   uniform float u_lineScale;
   uniform mat4 camera_VPMat;
   uniform mat4 u_worldMatrix;
   uniform mat4 u_worldNormal;

#ifdef RENDERER_HAS_SKIN
#ifdef RENDERER_USE_JOINT_TEXTURE
    uniform sampler2D renderer_JointSampler;
    uniform float renderer_JointCount;

    mat4 getJointMatrix(sampler2D smp, float index) {
        float base = index / renderer_JointCount;
        float hf = 0.5 / renderer_JointCount;
        float v = base + hf;

        vec4 m0 = texture2D(smp, vec2(0.125, v ));
        vec4 m1 = texture2D(smp, vec2(0.375, v ));
        vec4 m2 = texture2D(smp, vec2(0.625, v ));
        vec4 m3 = texture2D(smp, vec2(0.875, v ));

        return mat4(m0, m1, m2, m3);
    }
#else
    uniform mat4 renderer_JointMatrix[ RENDERER_JOINTS_NUM ];
#endif
#endif

`+qP+`

varying vec3 v_baryCenter;

void main() {
    int indicesIndex = gl_VertexID / 3;
    int indicesRow = indicesIndex / int(u_indicesTextureWidth);
    int indicesCol = indicesIndex % int(u_indicesTextureWidth);
    vec3 triangleIndices = getIndicesElement(float(indicesRow), float(indicesCol));
    int subIndex = gl_VertexID % 3;
    v_baryCenter = vec3(0.0);
    v_baryCenter[subIndex] = 1.0;
    
    int pointIndex = int(triangleIndices[subIndex]);
    `+JP+`

    #include <begin_position_vert>
    #include <begin_normal_vert>
    #include <skinning_vert>
    
    gl_Position = u_worldMatrix * position; 
    gl_Position = camera_VPMat * gl_Position; 
}
`,`
varying vec3 v_baryCenter;

float edgeFactor(){
    vec3 d = fwidth(v_baryCenter);
    vec3 a3 = smoothstep(vec3(0.0), d * 1.5, v_baryCenter);
    return min(min(a3.x, a3.y), a3.z);
}

uniform vec4 material_BaseColor;
void main() {
    if (gl_FrontFacing) {
        gl_FragColor = vec4(material_BaseColor.xyz, 1.0 - edgeFactor());
    } else {
        // fade back face
        gl_FragColor = vec4(material_BaseColor.xyz, (1.0 - edgeFactor()) * 0.3);
    }
}
`);_t.getByName("RENDERER_HAS_WEIGHT");_t.getByName("RENDERER_HAS_JOINT");X.getByName("u_verticesSampler");X.getByName("u_verticesTextureHeight");X.getByName("u_verticesTextureWidth");X.getByName("u_indicesSampler");X.getByName("u_indicesTextureHeight");X.getByName("u_indicesTextureWidth");X.getByName("u_lineScale");X.getByName("u_worldMatrix");X.getByName("u_worldNormal");var K9="1.2.0-beta.3";console.log("galacean engine toolkit version: "+K9);function LE(n,r){for(var a=0;a<r.length;a++){var e=r[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function tu(n,r,a){return r&&LE(n.prototype,r),a&&LE(n,a),n}function NE(n,r){(r==null||r>n.length)&&(r=n.length);for(var a=0,e=new Array(r);a<r;a++)e[a]=n[a];return e}function Y9(n,r){if(!!n){if(typeof n=="string")return NE(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(a);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return NE(n,r)}}function $r(n,r){var a=typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a)return(a=a.call(n)).next.bind(a);if(Array.isArray(n)||(a=Y9(n))||r&&n&&typeof n.length=="number"){a&&(n=a);var e=0;return function(){return e>=n.length?{done:!0}:{done:!1,value:n[e++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hp(n,r){return hp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},hp(n,r)}function Je(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&hp(n,r)}var Q9=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function q9(n){var r={exports:{}};return n(r,r.exports),r.exports}/*! /Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js - v10.5.0 */var nt=q9(function(n,r){(function(e,t){n.exports=t()})(typeof self!="undefined"?self:Q9,()=>(()=>{var a={4466:(o,s,l)=>{var u=l(5234),c=l(3250),f=u(c,"DataView");o.exports=f},5208:(o,s,l)=>{var u=l(4440),c=l(4108),f=l(1085),d=l(7706),h=l(8636);function _(p){var v=-1,y=p==null?0:p.length;for(this.clear();++v<y;){var m=p[v];this.set(m[0],m[1])}}_.prototype.clear=u,_.prototype.delete=c,_.prototype.get=f,_.prototype.has=d,_.prototype.set=h,o.exports=_},1998:(o,s,l)=>{var u=l(266),c=l(2875),f=l(5828),d=l(4115),h=l(7690);function _(p){var v=-1,y=p==null?0:p.length;for(this.clear();++v<y;){var m=p[v];this.set(m[0],m[1])}}_.prototype.clear=u,_.prototype.delete=c,_.prototype.get=f,_.prototype.has=d,_.prototype.set=h,o.exports=_},2887:(o,s,l)=>{var u=l(5234),c=l(3250),f=u(c,"Map");o.exports=f},5678:(o,s,l)=>{var u=l(9016),c=l(2363),f=l(4348),d=l(3062),h=l(262);function _(p){var v=-1,y=p==null?0:p.length;for(this.clear();++v<y;){var m=p[v];this.set(m[0],m[1])}}_.prototype.clear=u,_.prototype.delete=c,_.prototype.get=f,_.prototype.has=d,_.prototype.set=h,o.exports=_},5747:(o,s,l)=>{var u=l(5234),c=l(3250),f=u(c,"Promise");o.exports=f},6616:(o,s,l)=>{var u=l(5234),c=l(3250),f=u(c,"Set");o.exports=f},4546:(o,s,l)=>{var u=l(5678),c=l(3937),f=l(5009);function d(h){var _=-1,p=h==null?0:h.length;for(this.__data__=new u;++_<p;)this.add(h[_])}d.prototype.add=d.prototype.push=c,d.prototype.has=f,o.exports=d},9549:(o,s,l)=>{var u=l(1998),c=l(3210),f=l(8603),d=l(8947),h=l(885),_=l(8938);function p(v){var y=this.__data__=new u(v);this.size=y.size}p.prototype.clear=c,p.prototype.delete=f,p.prototype.get=d,p.prototype.has=h,p.prototype.set=_,o.exports=p},861:(o,s,l)=>{var u=l(3250),c=u.Symbol;o.exports=c},3526:(o,s,l)=>{var u=l(3250),c=u.Uint8Array;o.exports=c},8001:(o,s,l)=>{var u=l(5234),c=l(3250),f=u(c,"WeakMap");o.exports=f},2274:o=>{function s(l,u,c){switch(c.length){case 0:return l.call(u);case 1:return l.call(u,c[0]);case 2:return l.call(u,c[0],c[1]);case 3:return l.call(u,c[0],c[1],c[2])}return l.apply(u,c)}o.exports=s},8660:o=>{function s(l,u,c,f){for(var d=-1,h=l==null?0:l.length;++d<h;){var _=l[d];u(f,_,c(_),l)}return f}o.exports=s},4004:o=>{function s(l,u){for(var c=-1,f=l==null?0:l.length;++c<f&&u(l[c],c,l)!==!1;);return l}o.exports=s},9865:o=>{function s(l,u){for(var c=-1,f=l==null?0:l.length;++c<f;)if(!u(l[c],c,l))return!1;return!0}o.exports=s},2493:o=>{function s(l,u){for(var c=-1,f=l==null?0:l.length,d=0,h=[];++c<f;){var _=l[c];u(_,c,l)&&(h[d++]=_)}return h}o.exports=s},5436:(o,s,l)=>{var u=l(4365);function c(f,d){var h=f==null?0:f.length;return!!h&&u(f,d,0)>-1}o.exports=c},9105:o=>{function s(l,u,c){for(var f=-1,d=l==null?0:l.length;++f<d;)if(c(u,l[f]))return!0;return!1}o.exports=s},5825:(o,s,l)=>{var u=l(8509),c=l(9312),f=l(5589),d=l(5778),h=l(5023),_=l(922),p=Object.prototype,v=p.hasOwnProperty;function y(m,g){var x=f(m),b=!x&&c(m),S=!x&&!b&&d(m),C=!x&&!b&&!S&&_(m),E=x||b||S||C,T=E?u(m.length,String):[],M=T.length;for(var L in m)(g||v.call(m,L))&&!(E&&(L=="length"||S&&(L=="offset"||L=="parent")||C&&(L=="buffer"||L=="byteLength"||L=="byteOffset")||h(L,M)))&&T.push(L);return T}o.exports=y},9233:o=>{function s(l,u){for(var c=-1,f=l==null?0:l.length,d=Array(f);++c<f;)d[c]=u(l[c],c,l);return d}o.exports=s},111:o=>{function s(l,u){for(var c=-1,f=u.length,d=l.length;++c<f;)l[d+c]=u[c];return l}o.exports=s},5115:o=>{function s(l,u,c,f){var d=-1,h=l==null?0:l.length;for(f&&h&&(c=l[++d]);++d<h;)c=u(c,l[d],d,l);return c}o.exports=s},1831:o=>{function s(l,u){for(var c=-1,f=l==null?0:l.length;++c<f;)if(u(l[c],c,l))return!0;return!1}o.exports=s},9512:o=>{function s(l){return l.split("")}o.exports=s},3192:(o,s,l)=>{var u=l(7500),c=l(8260),f=Object.prototype,d=f.hasOwnProperty;function h(_,p,v){var y=_[p];(!(d.call(_,p)&&c(y,v))||v===void 0&&!(p in _))&&u(_,p,v)}o.exports=h},8498:(o,s,l)=>{var u=l(8260);function c(f,d){for(var h=f.length;h--;)if(u(f[h][0],d))return h;return-1}o.exports=c},3792:(o,s,l)=>{var u=l(1701);function c(f,d,h,_){return u(f,function(p,v,y){d(_,p,h(p),y)}),_}o.exports=c},4265:(o,s,l)=>{var u=l(8618),c=l(2096);function f(d,h){return d&&u(h,c(h),d)}o.exports=f},1629:(o,s,l)=>{var u=l(8618),c=l(9882);function f(d,h){return d&&u(h,c(h),d)}o.exports=f},7500:(o,s,l)=>{var u=l(5595);function c(f,d,h){d=="__proto__"&&u?u(f,d,{configurable:!0,enumerable:!0,value:h,writable:!0}):f[d]=h}o.exports=c},8361:(o,s,l)=>{var u=l(9549),c=l(4004),f=l(3192),d=l(4265),h=l(1629),_=l(6502),p=l(2166),v=l(7272),y=l(2066),m=l(4357),g=l(5713),x=l(7493),b=l(2865),S=l(1908),C=l(4046),E=l(5589),T=l(5778),M=l(7613),L=l(3702),F=l(693),N=l(2096),I=l(9882),O=1,P=2,R=4,A="[object Arguments]",D="[object Array]",B="[object Boolean]",k="[object Date]",V="[object Error]",U="[object Function]",j="[object GeneratorFunction]",G="[object Map]",$="[object Number]",W="[object Object]",K="[object RegExp]",q="[object Set]",Y="[object String]",Q="[object Symbol]",re="[object WeakMap]",ue="[object ArrayBuffer]",oe="[object DataView]",ee="[object Float32Array]",xe="[object Float64Array]",Te="[object Int8Array]",Ce="[object Int16Array]",pe="[object Int32Array]",J="[object Uint8Array]",ae="[object Uint8ClampedArray]",ne="[object Uint16Array]",ge="[object Uint32Array]",se={};se[A]=se[D]=se[ue]=se[oe]=se[B]=se[k]=se[ee]=se[xe]=se[Te]=se[Ce]=se[pe]=se[G]=se[$]=se[W]=se[K]=se[q]=se[Y]=se[Q]=se[J]=se[ae]=se[ne]=se[ge]=!0,se[V]=se[U]=se[re]=!1;function Re(de,Pe,De,Ke,Be,He){var We,yt=Pe&O,bt=Pe&P,Mt=Pe&R;if(De&&(We=Be?De(de,Ke,Be,He):De(de)),We!==void 0)return We;if(!L(de))return de;var ce=E(de);if(ce){if(We=b(de),!yt)return p(de,We)}else{var le=x(de),he=le==U||le==j;if(T(de))return _(de,yt);if(le==W||le==A||he&&!Be){if(We=bt||he?{}:C(de),!yt)return bt?y(de,h(We,de)):v(de,d(We,de))}else{if(!se[le])return Be?de:{};We=S(de,le,yt)}}He||(He=new u);var Se=He.get(de);if(Se)return Se;He.set(de,We),F(de)?de.forEach(function(Qe){We.add(Re(Qe,Pe,De,Qe,de,He))}):M(de)&&de.forEach(function(Qe,at){We.set(at,Re(Qe,Pe,De,at,de,He))});var me=Mt?bt?g:m:bt?I:N,Le=ce?void 0:me(de);return c(Le||de,function(Qe,at){Le&&(at=Qe,Qe=de[at]),f(We,at,Re(Qe,Pe,De,at,de,He))}),We}o.exports=Re},7890:(o,s,l)=>{var u=l(3702),c=Object.create,f=function(){function d(){}return function(h){if(!u(h))return{};if(c)return c(h);d.prototype=h;var _=new d;return d.prototype=void 0,_}}();o.exports=f},3700:(o,s,l)=>{var u=l(4546),c=l(5436),f=l(9105),d=l(9233),h=l(1525),_=l(7026),p=200;function v(y,m,g,x){var b=-1,S=c,C=!0,E=y.length,T=[],M=m.length;if(!E)return T;g&&(m=d(m,h(g))),x?(S=f,C=!1):m.length>=p&&(S=_,C=!1,m=new u(m));e:for(;++b<E;){var L=y[b],F=g==null?L:g(L);if(L=x||L!==0?L:0,C&&F===F){for(var N=M;N--;)if(m[N]===F)continue e;T.push(L)}else S(m,F,x)||T.push(L)}return T}o.exports=v},1701:(o,s,l)=>{var u=l(4003),c=l(6313),f=c(u);o.exports=f},5869:(o,s,l)=>{var u=l(1701);function c(f,d){var h=!0;return u(f,function(_,p,v){return h=!!d(_,p,v),h}),h}o.exports=c},8146:(o,s,l)=>{var u=l(1701);function c(f,d){var h=[];return u(f,function(_,p,v){d(_,p,v)&&h.push(_)}),h}o.exports=c},4770:o=>{function s(l,u,c,f){for(var d=l.length,h=c+(f?1:-1);f?h--:++h<d;)if(u(l[h],h,l))return h;return-1}o.exports=s},6640:(o,s,l)=>{var u=l(111),c=l(7123);function f(d,h,_,p,v){var y=-1,m=d.length;for(_||(_=c),v||(v=[]);++y<m;){var g=d[y];h>0&&_(g)?h>1?f(g,h-1,_,p,v):u(v,g):p||(v[v.length]=g)}return v}o.exports=f},9943:(o,s,l)=>{var u=l(2545),c=u();o.exports=c},4003:(o,s,l)=>{var u=l(9943),c=l(2096);function f(d,h){return d&&u(d,h,c)}o.exports=f},548:(o,s,l)=>{var u=l(4007),c=l(6040);function f(d,h){h=u(h,d);for(var _=0,p=h.length;d!=null&&_<p;)d=d[c(h[_++])];return _&&_==p?d:void 0}o.exports=f},4468:(o,s,l)=>{var u=l(111),c=l(5589);function f(d,h,_){var p=h(d);return c(d)?p:u(p,_(d))}o.exports=f},9823:(o,s,l)=>{var u=l(861),c=l(1339),f=l(5151),d="[object Null]",h="[object Undefined]",_=u?u.toStringTag:void 0;function p(v){return v==null?v===void 0?h:d:_&&_ in Object(v)?c(v):f(v)}o.exports=p},2586:o=>{var s=Object.prototype,l=s.hasOwnProperty;function u(c,f){return c!=null&&l.call(c,f)}o.exports=u},2902:o=>{function s(l,u){return l!=null&&u in Object(l)}o.exports=s},4365:(o,s,l)=>{var u=l(4770),c=l(6963),f=l(5898);function d(h,_,p){return _===_?f(h,_,p):u(h,c,p)}o.exports=d},3016:(o,s,l)=>{var u=l(9823),c=l(440),f="[object Arguments]";function d(h){return c(h)&&u(h)==f}o.exports=d},4662:(o,s,l)=>{var u=l(8968),c=l(440);function f(d,h,_,p,v){return d===h?!0:d==null||h==null||!c(d)&&!c(h)?d!==d&&h!==h:u(d,h,_,p,f,v)}o.exports=f},8968:(o,s,l)=>{var u=l(9549),c=l(4952),f=l(1080),d=l(6524),h=l(7493),_=l(5589),p=l(5778),v=l(922),y=1,m="[object Arguments]",g="[object Array]",x="[object Object]",b=Object.prototype,S=b.hasOwnProperty;function C(E,T,M,L,F,N){var I=_(E),O=_(T),P=I?g:h(E),R=O?g:h(T);P=P==m?x:P,R=R==m?x:R;var A=P==x,D=R==x,B=P==R;if(B&&p(E)){if(!p(T))return!1;I=!0,A=!1}if(B&&!A)return N||(N=new u),I||v(E)?c(E,T,M,L,F,N):f(E,T,P,M,L,F,N);if(!(M&y)){var k=A&&S.call(E,"__wrapped__"),V=D&&S.call(T,"__wrapped__");if(k||V){var U=k?E.value():E,j=V?T.value():T;return N||(N=new u),F(U,j,M,L,N)}}return B?(N||(N=new u),d(E,T,M,L,F,N)):!1}o.exports=C},2275:(o,s,l)=>{var u=l(7493),c=l(440),f="[object Map]";function d(h){return c(h)&&u(h)==f}o.exports=d},2972:(o,s,l)=>{var u=l(9549),c=l(4662),f=1,d=2;function h(_,p,v,y){var m=v.length,g=m,x=!y;if(_==null)return!g;for(_=Object(_);m--;){var b=v[m];if(x&&b[2]?b[1]!==_[b[0]]:!(b[0]in _))return!1}for(;++m<g;){b=v[m];var S=b[0],C=_[S],E=b[1];if(x&&b[2]){if(C===void 0&&!(S in _))return!1}else{var T=new u;if(y)var M=y(C,E,S,_,p,T);if(!(M===void 0?c(E,C,f|d,y,T):M))return!1}}return!0}o.exports=h},6963:o=>{function s(l){return l!==l}o.exports=s},9817:(o,s,l)=>{var u=l(5563),c=l(8597),f=l(3702),d=l(5784),h=/[\\^$.*+?()[\]{}|]/g,_=/^\[object .+?Constructor\]$/,p=Function.prototype,v=Object.prototype,y=p.toString,m=v.hasOwnProperty,g=RegExp("^"+y.call(m).replace(h,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function x(b){if(!f(b)||c(b))return!1;var S=u(b)?g:_;return S.test(d(b))}o.exports=x},8261:(o,s,l)=>{var u=l(9823),c=l(440),f="[object RegExp]";function d(h){return c(h)&&u(h)==f}o.exports=d},7170:(o,s,l)=>{var u=l(7493),c=l(440),f="[object Set]";function d(h){return c(h)&&u(h)==f}o.exports=d},2448:(o,s,l)=>{var u=l(9823),c=l(6052),f=l(440),d="[object Arguments]",h="[object Array]",_="[object Boolean]",p="[object Date]",v="[object Error]",y="[object Function]",m="[object Map]",g="[object Number]",x="[object Object]",b="[object RegExp]",S="[object Set]",C="[object String]",E="[object WeakMap]",T="[object ArrayBuffer]",M="[object DataView]",L="[object Float32Array]",F="[object Float64Array]",N="[object Int8Array]",I="[object Int16Array]",O="[object Int32Array]",P="[object Uint8Array]",R="[object Uint8ClampedArray]",A="[object Uint16Array]",D="[object Uint32Array]",B={};B[L]=B[F]=B[N]=B[I]=B[O]=B[P]=B[R]=B[A]=B[D]=!0,B[d]=B[h]=B[T]=B[_]=B[M]=B[p]=B[v]=B[y]=B[m]=B[g]=B[x]=B[b]=B[S]=B[C]=B[E]=!1;function k(V){return f(V)&&c(V.length)&&!!B[u(V)]}o.exports=k},5833:(o,s,l)=>{var u=l(5640),c=l(9906),f=l(229),d=l(5589),h=l(4437);function _(p){return typeof p=="function"?p:p==null?f:typeof p=="object"?d(p)?c(p[0],p[1]):u(p):h(p)}o.exports=_},1351:(o,s,l)=>{var u=l(2840),c=l(2825),f=Object.prototype,d=f.hasOwnProperty;function h(_){if(!u(_))return c(_);var p=[];for(var v in Object(_))d.call(_,v)&&v!="constructor"&&p.push(v);return p}o.exports=h},1309:(o,s,l)=>{var u=l(3702),c=l(2840),f=l(4866),d=Object.prototype,h=d.hasOwnProperty;function _(p){if(!u(p))return f(p);var v=c(p),y=[];for(var m in p)m=="constructor"&&(v||!h.call(p,m))||y.push(m);return y}o.exports=_},8068:(o,s,l)=>{var u=l(1701),c=l(568);function f(d,h){var _=-1,p=c(d)?Array(d.length):[];return u(d,function(v,y,m){p[++_]=h(v,y,m)}),p}o.exports=f},5640:(o,s,l)=>{var u=l(2972),c=l(2198),f=l(4656);function d(h){var _=c(h);return _.length==1&&_[0][2]?f(_[0][0],_[0][1]):function(p){return p===h||u(p,h,_)}}o.exports=d},9906:(o,s,l)=>{var u=l(4662),c=l(3546),f=l(6708),d=l(5130),h=l(8802),_=l(4656),p=l(6040),v=1,y=2;function m(g,x){return d(g)&&h(x)?_(p(g),x):function(b){var S=c(b,g);return S===void 0&&S===x?f(b,g):u(x,S,v|y)}}o.exports=m},7121:(o,s,l)=>{var u=l(548),c=l(2619),f=l(4007);function d(h,_,p){for(var v=-1,y=_.length,m={};++v<y;){var g=_[v],x=u(h,g);p(x,g)&&c(m,f(g,h),x)}return m}o.exports=d},6174:o=>{function s(l){return function(u){return u==null?void 0:u[l]}}o.exports=s},3293:(o,s,l)=>{var u=l(548);function c(f){return function(d){return u(d,f)}}o.exports=c},4306:o=>{function s(l,u,c,f,d){return d(l,function(h,_,p){c=f?(f=!1,h):u(c,h,_,p)}),c}o.exports=s},9735:(o,s,l)=>{var u=l(229),c=l(340),f=l(4173);function d(h,_){return f(c(h,_,u),h+"")}o.exports=d},2619:(o,s,l)=>{var u=l(3192),c=l(4007),f=l(5023),d=l(3702),h=l(6040);function _(p,v,y,m){if(!d(p))return p;v=c(v,p);for(var g=-1,x=v.length,b=x-1,S=p;S!=null&&++g<x;){var C=h(v[g]),E=y;if(C==="__proto__"||C==="constructor"||C==="prototype")return p;if(g!=b){var T=S[C];E=m?m(T,C,S):void 0,E===void 0&&(E=d(T)?T:f(v[g+1])?[]:{})}u(S,C,E),S=S[C]}return p}o.exports=_},6739:(o,s,l)=>{var u=l(9203),c=l(5595),f=l(229),d=c?function(h,_){return c(h,"toString",{configurable:!0,enumerable:!1,value:u(_),writable:!0})}:f;o.exports=d},7379:o=>{function s(l,u,c){var f=-1,d=l.length;u<0&&(u=-u>d?0:d+u),c=c>d?d:c,c<0&&(c+=d),d=u>c?0:c-u>>>0,u>>>=0;for(var h=Array(d);++f<d;)h[f]=l[f+u];return h}o.exports=s},854:(o,s,l)=>{var u=l(1701);function c(f,d){var h;return u(f,function(_,p,v){return h=d(_,p,v),!h}),!!h}o.exports=c},8509:o=>{function s(l,u){for(var c=-1,f=Array(l);++c<l;)f[c]=u(c);return f}o.exports=s},6245:(o,s,l)=>{var u=l(861),c=l(9233),f=l(5589),d=l(2624),h=1/0,_=u?u.prototype:void 0,p=_?_.toString:void 0;function v(y){if(typeof y=="string")return y;if(f(y))return c(y,v)+"";if(d(y))return p?p.call(y):"";var m=y+"";return m=="0"&&1/y==-h?"-0":m}o.exports=v},1656:(o,s,l)=>{var u=l(2438),c=/^\s+/;function f(d){return d&&d.slice(0,u(d)+1).replace(c,"")}o.exports=f},1525:o=>{function s(l){return function(u){return l(u)}}o.exports=s},135:(o,s,l)=>{var u=l(4546),c=l(5436),f=l(9105),d=l(7026),h=l(6262),_=l(7969),p=200;function v(y,m,g){var x=-1,b=c,S=y.length,C=!0,E=[],T=E;if(g)C=!1,b=f;else if(S>=p){var M=m?null:h(y);if(M)return _(M);C=!1,b=d,T=new u}else T=m?[]:E;e:for(;++x<S;){var L=y[x],F=m?m(L):L;if(L=g||L!==0?L:0,C&&F===F){for(var N=T.length;N--;)if(T[N]===F)continue e;m&&T.push(F),E.push(L)}else b(T,F,g)||(T!==E&&T.push(F),E.push(L))}return E}o.exports=v},71:(o,s,l)=>{var u=l(9233);function c(f,d){return u(d,function(h){return f[h]})}o.exports=c},7026:o=>{function s(l,u){return l.has(u)}o.exports=s},4781:(o,s,l)=>{var u=l(229);function c(f){return typeof f=="function"?f:u}o.exports=c},4007:(o,s,l)=>{var u=l(5589),c=l(5130),f=l(4041),d=l(9835);function h(_,p){return u(_)?_:c(_,p)?[_]:f(d(_))}o.exports=h},3237:(o,s,l)=>{var u=l(7379);function c(f,d,h){var _=f.length;return h=h===void 0?_:h,!d&&h>=_?f:u(f,d,h)}o.exports=c},2962:(o,s,l)=>{var u=l(3526);function c(f){var d=new f.constructor(f.byteLength);return new u(d).set(new u(f)),d}o.exports=c},6502:(o,s,l)=>{o=l.nmd(o);var u=l(3250),c=s&&!s.nodeType&&s,f=c&&!0&&o&&!o.nodeType&&o,d=f&&f.exports===c,h=d?u.Buffer:void 0,_=h?h.allocUnsafe:void 0;function p(v,y){if(y)return v.slice();var m=v.length,g=_?_(m):new v.constructor(m);return v.copy(g),g}o.exports=p},7037:(o,s,l)=>{var u=l(2962);function c(f,d){var h=d?u(f.buffer):f.buffer;return new f.constructor(h,f.byteOffset,f.byteLength)}o.exports=c},3429:o=>{var s=/\w*$/;function l(u){var c=new u.constructor(u.source,s.exec(u));return c.lastIndex=u.lastIndex,c}o.exports=l},9349:(o,s,l)=>{var u=l(861),c=u?u.prototype:void 0,f=c?c.valueOf:void 0;function d(h){return f?Object(f.call(h)):{}}o.exports=d},1327:(o,s,l)=>{var u=l(2962);function c(f,d){var h=d?u(f.buffer):f.buffer;return new f.constructor(h,f.byteOffset,f.length)}o.exports=c},2166:o=>{function s(l,u){var c=-1,f=l.length;for(u||(u=Array(f));++c<f;)u[c]=l[c];return u}o.exports=s},8618:(o,s,l)=>{var u=l(3192),c=l(7500);function f(d,h,_,p){var v=!_;_||(_={});for(var y=-1,m=h.length;++y<m;){var g=h[y],x=p?p(_[g],d[g],g,_,d):void 0;x===void 0&&(x=d[g]),v?c(_,g,x):u(_,g,x)}return _}o.exports=f},7272:(o,s,l)=>{var u=l(8618),c=l(4450);function f(d,h){return u(d,c(d),h)}o.exports=f},2066:(o,s,l)=>{var u=l(8618),c=l(4969);function f(d,h){return u(d,c(d),h)}o.exports=f},1622:(o,s,l)=>{var u=l(3250),c=u["__core-js_shared__"];o.exports=c},7325:(o,s,l)=>{var u=l(8660),c=l(3792),f=l(5833),d=l(5589);function h(_,p){return function(v,y){var m=d(v)?u:c,g=p?p():{};return m(v,_,f(y,2),g)}}o.exports=h},6948:(o,s,l)=>{var u=l(9735),c=l(8132);function f(d){return u(function(h,_){var p=-1,v=_.length,y=v>1?_[v-1]:void 0,m=v>2?_[2]:void 0;for(y=d.length>3&&typeof y=="function"?(v--,y):void 0,m&&c(_[0],_[1],m)&&(y=v<3?void 0:y,v=1),h=Object(h);++p<v;){var g=_[p];g&&d(h,g,p,y)}return h})}o.exports=f},6313:(o,s,l)=>{var u=l(568);function c(f,d){return function(h,_){if(h==null)return h;if(!u(h))return f(h,_);for(var p=h.length,v=d?p:-1,y=Object(h);(d?v--:++v<p)&&_(y[v],v,y)!==!1;);return h}}o.exports=c},2545:o=>{function s(l){return function(u,c,f){for(var d=-1,h=Object(u),_=f(u),p=_.length;p--;){var v=_[l?p:++d];if(c(h[v],v,h)===!1)break}return u}}o.exports=s},1254:(o,s,l)=>{var u=l(3237),c=l(3932),f=l(5233),d=l(9835);function h(_){return function(p){p=d(p);var v=c(p)?f(p):void 0,y=v?v[0]:p.charAt(0),m=v?u(v,1).join(""):p.slice(1);return y[_]()+m}}o.exports=h},9301:(o,s,l)=>{var u=l(5833),c=l(568),f=l(2096);function d(h){return function(_,p,v){var y=Object(_);if(!c(_)){var m=u(p,3);_=f(_),p=function(x){return m(y[x],x,y)}}var g=h(_,p,v);return g>-1?y[m?_[g]:g]:void 0}}o.exports=d},6262:(o,s,l)=>{var u=l(6616),c=l(1607),f=l(7969),d=1/0,h=u&&1/f(new u([,-0]))[1]==d?function(_){return new u(_)}:c;o.exports=h},5595:(o,s,l)=>{var u=l(5234),c=function(){try{var f=u(Object,"defineProperty");return f({},"",{}),f}catch{}}();o.exports=c},4952:(o,s,l)=>{var u=l(4546),c=l(1831),f=l(7026),d=1,h=2;function _(p,v,y,m,g,x){var b=y&d,S=p.length,C=v.length;if(S!=C&&!(b&&C>S))return!1;var E=x.get(p),T=x.get(v);if(E&&T)return E==v&&T==p;var M=-1,L=!0,F=y&h?new u:void 0;for(x.set(p,v),x.set(v,p);++M<S;){var N=p[M],I=v[M];if(m)var O=b?m(I,N,M,v,p,x):m(N,I,M,p,v,x);if(O!==void 0){if(O)continue;L=!1;break}if(F){if(!c(v,function(P,R){if(!f(F,R)&&(N===P||g(N,P,y,m,x)))return F.push(R)})){L=!1;break}}else if(!(N===I||g(N,I,y,m,x))){L=!1;break}}return x.delete(p),x.delete(v),L}o.exports=_},1080:(o,s,l)=>{var u=l(861),c=l(3526),f=l(8260),d=l(4952),h=l(1140),_=l(7969),p=1,v=2,y="[object Boolean]",m="[object Date]",g="[object Error]",x="[object Map]",b="[object Number]",S="[object RegExp]",C="[object Set]",E="[object String]",T="[object Symbol]",M="[object ArrayBuffer]",L="[object DataView]",F=u?u.prototype:void 0,N=F?F.valueOf:void 0;function I(O,P,R,A,D,B,k){switch(R){case L:if(O.byteLength!=P.byteLength||O.byteOffset!=P.byteOffset)return!1;O=O.buffer,P=P.buffer;case M:return!(O.byteLength!=P.byteLength||!B(new c(O),new c(P)));case y:case m:case b:return f(+O,+P);case g:return O.name==P.name&&O.message==P.message;case S:case E:return O==P+"";case x:var V=h;case C:var U=A&p;if(V||(V=_),O.size!=P.size&&!U)return!1;var j=k.get(O);if(j)return j==P;A|=v,k.set(O,P);var G=d(V(O),V(P),A,D,B,k);return k.delete(O),G;case T:if(N)return N.call(O)==N.call(P)}return!1}o.exports=I},6524:(o,s,l)=>{var u=l(4357),c=1,f=Object.prototype,d=f.hasOwnProperty;function h(_,p,v,y,m,g){var x=v&c,b=u(_),S=b.length,C=u(p),E=C.length;if(S!=E&&!x)return!1;for(var T=S;T--;){var M=b[T];if(!(x?M in p:d.call(p,M)))return!1}var L=g.get(_),F=g.get(p);if(L&&F)return L==p&&F==_;var N=!0;g.set(_,p),g.set(p,_);for(var I=x;++T<S;){M=b[T];var O=_[M],P=p[M];if(y)var R=x?y(P,O,M,p,_,g):y(O,P,M,_,p,g);if(!(R===void 0?O===P||m(O,P,v,y,g):R)){N=!1;break}I||(I=M=="constructor")}if(N&&!I){var A=_.constructor,D=p.constructor;A!=D&&"constructor"in _&&"constructor"in p&&!(typeof A=="function"&&A instanceof A&&typeof D=="function"&&D instanceof D)&&(N=!1)}return g.delete(_),g.delete(p),N}o.exports=h},302:(o,s,l)=>{var u=typeof l.g=="object"&&l.g&&l.g.Object===Object&&l.g;o.exports=u},4357:(o,s,l)=>{var u=l(4468),c=l(4450),f=l(2096);function d(h){return u(h,f,c)}o.exports=d},5713:(o,s,l)=>{var u=l(4468),c=l(4969),f=l(9882);function d(h){return u(h,f,c)}o.exports=d},7570:(o,s,l)=>{var u=l(8949);function c(f,d){var h=f.__data__;return u(d)?h[typeof d=="string"?"string":"hash"]:h.map}o.exports=c},2198:(o,s,l)=>{var u=l(8802),c=l(2096);function f(d){for(var h=c(d),_=h.length;_--;){var p=h[_],v=d[p];h[_]=[p,v,u(v)]}return h}o.exports=f},5234:(o,s,l)=>{var u=l(9817),c=l(7736);function f(d,h){var _=c(d,h);return u(_)?_:void 0}o.exports=f},8490:(o,s,l)=>{var u=l(3540),c=u(Object.getPrototypeOf,Object);o.exports=c},1339:(o,s,l)=>{var u=l(861),c=Object.prototype,f=c.hasOwnProperty,d=c.toString,h=u?u.toStringTag:void 0;function _(p){var v=f.call(p,h),y=p[h];try{p[h]=void 0;var m=!0}catch{}var g=d.call(p);return m&&(v?p[h]=y:delete p[h]),g}o.exports=_},4450:(o,s,l)=>{var u=l(2493),c=l(4506),f=Object.prototype,d=f.propertyIsEnumerable,h=Object.getOwnPropertySymbols,_=h?function(p){return p==null?[]:(p=Object(p),u(h(p),function(v){return d.call(p,v)}))}:c;o.exports=_},4969:(o,s,l)=>{var u=l(111),c=l(8490),f=l(4450),d=l(4506),h=Object.getOwnPropertySymbols,_=h?function(p){for(var v=[];p;)u(v,f(p)),p=c(p);return v}:d;o.exports=_},7493:(o,s,l)=>{var u=l(4466),c=l(2887),f=l(5747),d=l(6616),h=l(8001),_=l(9823),p=l(5784),v="[object Map]",y="[object Object]",m="[object Promise]",g="[object Set]",x="[object WeakMap]",b="[object DataView]",S=p(u),C=p(c),E=p(f),T=p(d),M=p(h),L=_;(u&&L(new u(new ArrayBuffer(1)))!=b||c&&L(new c)!=v||f&&L(f.resolve())!=m||d&&L(new d)!=g||h&&L(new h)!=x)&&(L=function(F){var N=_(F),I=N==y?F.constructor:void 0,O=I?p(I):"";if(O)switch(O){case S:return b;case C:return v;case E:return m;case T:return g;case M:return x}return N}),o.exports=L},7736:o=>{function s(l,u){return l==null?void 0:l[u]}o.exports=s},3544:(o,s,l)=>{var u=l(4007),c=l(9312),f=l(5589),d=l(5023),h=l(6052),_=l(6040);function p(v,y,m){y=u(y,v);for(var g=-1,x=y.length,b=!1;++g<x;){var S=_(y[g]);if(!(b=v!=null&&m(v,S)))break;v=v[S]}return b||++g!=x?b:(x=v==null?0:v.length,!!x&&h(x)&&d(S,x)&&(f(v)||c(v)))}o.exports=p},3932:o=>{var s="\\ud800-\\udfff",l="\\u0300-\\u036f",u="\\ufe20-\\ufe2f",c="\\u20d0-\\u20ff",f=l+u+c,d="\\ufe0e\\ufe0f",h="\\u200d",_=RegExp("["+h+s+f+d+"]");function p(v){return _.test(v)}o.exports=p},4440:(o,s,l)=>{var u=l(4545);function c(){this.__data__=u?u(null):{},this.size=0}o.exports=c},4108:o=>{function s(l){var u=this.has(l)&&delete this.__data__[l];return this.size-=u?1:0,u}o.exports=s},1085:(o,s,l)=>{var u=l(4545),c="__lodash_hash_undefined__",f=Object.prototype,d=f.hasOwnProperty;function h(_){var p=this.__data__;if(u){var v=p[_];return v===c?void 0:v}return d.call(p,_)?p[_]:void 0}o.exports=h},7706:(o,s,l)=>{var u=l(4545),c=Object.prototype,f=c.hasOwnProperty;function d(h){var _=this.__data__;return u?_[h]!==void 0:f.call(_,h)}o.exports=d},8636:(o,s,l)=>{var u=l(4545),c="__lodash_hash_undefined__";function f(d,h){var _=this.__data__;return this.size+=this.has(d)?0:1,_[d]=u&&h===void 0?c:h,this}o.exports=f},2865:o=>{var s=Object.prototype,l=s.hasOwnProperty;function u(c){var f=c.length,d=new c.constructor(f);return f&&typeof c[0]=="string"&&l.call(c,"index")&&(d.index=c.index,d.input=c.input),d}o.exports=u},1908:(o,s,l)=>{var u=l(2962),c=l(7037),f=l(3429),d=l(9349),h=l(1327),_="[object Boolean]",p="[object Date]",v="[object Map]",y="[object Number]",m="[object RegExp]",g="[object Set]",x="[object String]",b="[object Symbol]",S="[object ArrayBuffer]",C="[object DataView]",E="[object Float32Array]",T="[object Float64Array]",M="[object Int8Array]",L="[object Int16Array]",F="[object Int32Array]",N="[object Uint8Array]",I="[object Uint8ClampedArray]",O="[object Uint16Array]",P="[object Uint32Array]";function R(A,D,B){var k=A.constructor;switch(D){case S:return u(A);case _:case p:return new k(+A);case C:return c(A,B);case E:case T:case M:case L:case F:case N:case I:case O:case P:return h(A,B);case v:return new k;case y:case x:return new k(A);case m:return f(A);case g:return new k;case b:return d(A)}}o.exports=R},4046:(o,s,l)=>{var u=l(7890),c=l(8490),f=l(2840);function d(h){return typeof h.constructor=="function"&&!f(h)?u(c(h)):{}}o.exports=d},7123:(o,s,l)=>{var u=l(861),c=l(9312),f=l(5589),d=u?u.isConcatSpreadable:void 0;function h(_){return f(_)||c(_)||!!(d&&_&&_[d])}o.exports=h},5023:o=>{var s=9007199254740991,l=/^(?:0|[1-9]\d*)$/;function u(c,f){var d=typeof c;return f=f==null?s:f,!!f&&(d=="number"||d!="symbol"&&l.test(c))&&c>-1&&c%1==0&&c<f}o.exports=u},8132:(o,s,l)=>{var u=l(8260),c=l(568),f=l(5023),d=l(3702);function h(_,p,v){if(!d(v))return!1;var y=typeof p;return(y=="number"?c(v)&&f(p,v.length):y=="string"&&p in v)?u(v[p],_):!1}o.exports=h},5130:(o,s,l)=>{var u=l(5589),c=l(2624),f=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/;function h(_,p){if(u(_))return!1;var v=typeof _;return v=="number"||v=="symbol"||v=="boolean"||_==null||c(_)?!0:d.test(_)||!f.test(_)||p!=null&&_ in Object(p)}o.exports=h},8949:o=>{function s(l){var u=typeof l;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?l!=="__proto__":l===null}o.exports=s},8597:(o,s,l)=>{var u=l(1622),c=function(){var d=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}();function f(d){return!!c&&c in d}o.exports=f},2840:o=>{var s=Object.prototype;function l(u){var c=u&&u.constructor,f=typeof c=="function"&&c.prototype||s;return u===f}o.exports=l},8802:(o,s,l)=>{var u=l(3702);function c(f){return f===f&&!u(f)}o.exports=c},266:o=>{function s(){this.__data__=[],this.size=0}o.exports=s},2875:(o,s,l)=>{var u=l(8498),c=Array.prototype,f=c.splice;function d(h){var _=this.__data__,p=u(_,h);if(p<0)return!1;var v=_.length-1;return p==v?_.pop():f.call(_,p,1),--this.size,!0}o.exports=d},5828:(o,s,l)=>{var u=l(8498);function c(f){var d=this.__data__,h=u(d,f);return h<0?void 0:d[h][1]}o.exports=c},4115:(o,s,l)=>{var u=l(8498);function c(f){return u(this.__data__,f)>-1}o.exports=c},7690:(o,s,l)=>{var u=l(8498);function c(f,d){var h=this.__data__,_=u(h,f);return _<0?(++this.size,h.push([f,d])):h[_][1]=d,this}o.exports=c},9016:(o,s,l)=>{var u=l(5208),c=l(1998),f=l(2887);function d(){this.size=0,this.__data__={hash:new u,map:new(f||c),string:new u}}o.exports=d},2363:(o,s,l)=>{var u=l(7570);function c(f){var d=u(this,f).delete(f);return this.size-=d?1:0,d}o.exports=c},4348:(o,s,l)=>{var u=l(7570);function c(f){return u(this,f).get(f)}o.exports=c},3062:(o,s,l)=>{var u=l(7570);function c(f){return u(this,f).has(f)}o.exports=c},262:(o,s,l)=>{var u=l(7570);function c(f,d){var h=u(this,f),_=h.size;return h.set(f,d),this.size+=h.size==_?0:1,this}o.exports=c},1140:o=>{function s(l){var u=-1,c=Array(l.size);return l.forEach(function(f,d){c[++u]=[d,f]}),c}o.exports=s},4656:o=>{function s(l,u){return function(c){return c==null?!1:c[l]===u&&(u!==void 0||l in Object(c))}}o.exports=s},2924:(o,s,l)=>{var u=l(7997),c=500;function f(d){var h=u(d,function(p){return _.size===c&&_.clear(),p}),_=h.cache;return h}o.exports=f},4545:(o,s,l)=>{var u=l(5234),c=u(Object,"create");o.exports=c},2825:(o,s,l)=>{var u=l(3540),c=u(Object.keys,Object);o.exports=c},4866:o=>{function s(l){var u=[];if(l!=null)for(var c in Object(l))u.push(c);return u}o.exports=s},8690:(o,s,l)=>{o=l.nmd(o);var u=l(302),c=s&&!s.nodeType&&s,f=c&&!0&&o&&!o.nodeType&&o,d=f&&f.exports===c,h=d&&u.process,_=function(){try{var p=f&&f.require&&f.require("util").types;return p||h&&h.binding&&h.binding("util")}catch{}}();o.exports=_},5151:o=>{var s=Object.prototype,l=s.toString;function u(c){return l.call(c)}o.exports=u},3540:o=>{function s(l,u){return function(c){return l(u(c))}}o.exports=s},340:(o,s,l)=>{var u=l(2274),c=Math.max;function f(d,h,_){return h=c(h===void 0?d.length-1:h,0),function(){for(var p=arguments,v=-1,y=c(p.length-h,0),m=Array(y);++v<y;)m[v]=p[h+v];v=-1;for(var g=Array(h+1);++v<h;)g[v]=p[v];return g[h]=_(m),u(d,this,g)}}o.exports=f},3250:(o,s,l)=>{var u=l(302),c=typeof self=="object"&&self&&self.Object===Object&&self,f=u||c||Function("return this")();o.exports=f},3937:o=>{var s="__lodash_hash_undefined__";function l(u){return this.__data__.set(u,s),this}o.exports=l},5009:o=>{function s(l){return this.__data__.has(l)}o.exports=s},7969:o=>{function s(l){var u=-1,c=Array(l.size);return l.forEach(function(f){c[++u]=f}),c}o.exports=s},4173:(o,s,l)=>{var u=l(6739),c=l(7357),f=c(u);o.exports=f},7357:o=>{var s=800,l=16,u=Date.now;function c(f){var d=0,h=0;return function(){var _=u(),p=l-(_-h);if(h=_,p>0){if(++d>=s)return arguments[0]}else d=0;return f.apply(void 0,arguments)}}o.exports=c},3210:(o,s,l)=>{var u=l(1998);function c(){this.__data__=new u,this.size=0}o.exports=c},8603:o=>{function s(l){var u=this.__data__,c=u.delete(l);return this.size=u.size,c}o.exports=s},8947:o=>{function s(l){return this.__data__.get(l)}o.exports=s},885:o=>{function s(l){return this.__data__.has(l)}o.exports=s},8938:(o,s,l)=>{var u=l(1998),c=l(2887),f=l(5678),d=200;function h(_,p){var v=this.__data__;if(v instanceof u){var y=v.__data__;if(!c||y.length<d-1)return y.push([_,p]),this.size=++v.size,this;v=this.__data__=new f(y)}return v.set(_,p),this.size=v.size,this}o.exports=h},5898:o=>{function s(l,u,c){for(var f=c-1,d=l.length;++f<d;)if(l[f]===u)return f;return-1}o.exports=s},5233:(o,s,l)=>{var u=l(9512),c=l(3932),f=l(2205);function d(h){return c(h)?f(h):u(h)}o.exports=d},4041:(o,s,l)=>{var u=l(2924),c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,d=u(function(h){var _=[];return h.charCodeAt(0)===46&&_.push(""),h.replace(c,function(p,v,y,m){_.push(y?m.replace(f,"$1"):v||p)}),_});o.exports=d},6040:(o,s,l)=>{var u=l(2624),c=1/0;function f(d){if(typeof d=="string"||u(d))return d;var h=d+"";return h=="0"&&1/d==-c?"-0":h}o.exports=f},5784:o=>{var s=Function.prototype,l=s.toString;function u(c){if(c!=null){try{return l.call(c)}catch{}try{return c+""}catch{}}return""}o.exports=u},2438:o=>{var s=/\s/;function l(u){for(var c=u.length;c--&&s.test(u.charAt(c)););return c}o.exports=l},2205:o=>{var s="\\ud800-\\udfff",l="\\u0300-\\u036f",u="\\ufe20-\\ufe2f",c="\\u20d0-\\u20ff",f=l+u+c,d="\\ufe0e\\ufe0f",h="["+s+"]",_="["+f+"]",p="\\ud83c[\\udffb-\\udfff]",v="(?:"+_+"|"+p+")",y="[^"+s+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",b=v+"?",S="["+d+"]?",C="(?:"+x+"(?:"+[y,m,g].join("|")+")"+S+b+")*",E=S+b+C,T="(?:"+[y+_+"?",_,m,g,h].join("|")+")",M=RegExp(p+"(?="+p+")|"+T+E,"g");function L(F){return F.match(M)||[]}o.exports=L},311:(o,s,l)=>{var u=l(3192),c=l(8618),f=l(6948),d=l(568),h=l(2840),_=l(2096),p=Object.prototype,v=p.hasOwnProperty,y=f(function(m,g){if(h(g)||d(g)){c(g,_(g),m);return}for(var x in g)v.call(g,x)&&u(m,x,g[x])});o.exports=y},7953:(o,s,l)=>{var u=l(8361),c=4;function f(d){return u(d,c)}o.exports=f},6494:o=>{function s(l){for(var u=-1,c=l==null?0:l.length,f=0,d=[];++u<c;){var h=l[u];h&&(d[f++]=h)}return d}o.exports=s},9203:o=>{function s(l){return function(){return l}}o.exports=s},3821:(o,s,l)=>{var u=l(9735),c=l(8260),f=l(8132),d=l(9882),h=Object.prototype,_=h.hasOwnProperty,p=u(function(v,y){v=Object(v);var m=-1,g=y.length,x=g>2?y[2]:void 0;for(x&&f(y[0],y[1],x)&&(g=1);++m<g;)for(var b=y[m],S=d(b),C=-1,E=S.length;++C<E;){var T=S[C],M=v[T];(M===void 0||c(M,h[T])&&!_.call(v,T))&&(v[T]=b[T])}return v});o.exports=p},5271:(o,s,l)=>{var u=l(3700),c=l(6640),f=l(9735),d=l(8268),h=f(function(_,p){return d(_)?u(_,c(p,1,d,!0)):[]});o.exports=h},9239:(o,s,l)=>{var u=l(7379),c=l(6843);function f(d,h,_){var p=d==null?0:d.length;return p?(h=_||h===void 0?1:c(h),u(d,h<0?0:h,p)):[]}o.exports=f},682:(o,s,l)=>{var u=l(7379),c=l(6843);function f(d,h,_){var p=d==null?0:d.length;return p?(h=_||h===void 0?1:c(h),h=p-h,u(d,0,h<0?0:h)):[]}o.exports=f},8260:o=>{function s(l,u){return l===u||l!==l&&u!==u}o.exports=s},1198:(o,s,l)=>{var u=l(9865),c=l(5869),f=l(5833),d=l(5589),h=l(8132);function _(p,v,y){var m=d(p)?u:c;return y&&h(p,v,y)&&(v=void 0),m(p,f(v,3))}o.exports=_},4663:(o,s,l)=>{var u=l(2493),c=l(8146),f=l(5833),d=l(5589);function h(_,p){var v=d(_)?u:c;return v(_,f(p,3))}o.exports=h},6969:(o,s,l)=>{var u=l(9301),c=l(564),f=u(c);o.exports=f},564:(o,s,l)=>{var u=l(4770),c=l(5833),f=l(6843),d=Math.max;function h(_,p,v){var y=_==null?0:_.length;if(!y)return-1;var m=v==null?0:f(v);return m<0&&(m=d(y+m,0)),u(_,c(p,3),m)}o.exports=h},8936:(o,s,l)=>{o.exports=l(5718)},9875:(o,s,l)=>{var u=l(6640),c=l(9107);function f(d,h){return u(c(d,h),1)}o.exports=f},2923:(o,s,l)=>{var u=l(6640);function c(f){var d=f==null?0:f.length;return d?u(f,1):[]}o.exports=c},7734:(o,s,l)=>{var u=l(4004),c=l(1701),f=l(4781),d=l(5589);function h(_,p){var v=d(_)?u:c;return v(_,f(p))}o.exports=h},3546:(o,s,l)=>{var u=l(548);function c(f,d,h){var _=f==null?void 0:u(f,d);return _===void 0?h:_}o.exports=c},9907:(o,s,l)=>{var u=l(7500),c=l(7325),f=Object.prototype,d=f.hasOwnProperty,h=c(function(_,p,v){d.call(_,v)?_[v].push(p):u(_,v,[p])});o.exports=h},5346:(o,s,l)=>{var u=l(2586),c=l(3544);function f(d,h){return d!=null&&c(d,h,u)}o.exports=f},6708:(o,s,l)=>{var u=l(2902),c=l(3544);function f(d,h){return d!=null&&c(d,h,u)}o.exports=f},5718:o=>{function s(l){return l&&l.length?l[0]:void 0}o.exports=s},229:o=>{function s(l){return l}o.exports=s},2876:(o,s,l)=>{var u=l(4365),c=l(568),f=l(6705),d=l(6843),h=l(1682),_=Math.max;function p(v,y,m,g){v=c(v)?v:h(v),m=m&&!g?d(m):0;var x=v.length;return m<0&&(m=_(x+m,0)),f(v)?m<=x&&v.indexOf(y,m)>-1:!!x&&u(v,y,m)>-1}o.exports=p},7318:(o,s,l)=>{var u=l(4365),c=l(6843),f=Math.max;function d(h,_,p){var v=h==null?0:h.length;if(!v)return-1;var y=p==null?0:c(p);return y<0&&(y=f(v+y,0)),u(h,_,y)}o.exports=d},9312:(o,s,l)=>{var u=l(3016),c=l(440),f=Object.prototype,d=f.hasOwnProperty,h=f.propertyIsEnumerable,_=u(function(){return arguments}())?u:function(p){return c(p)&&d.call(p,"callee")&&!h.call(p,"callee")};o.exports=_},5589:o=>{var s=Array.isArray;o.exports=s},568:(o,s,l)=>{var u=l(5563),c=l(6052);function f(d){return d!=null&&c(d.length)&&!u(d)}o.exports=f},8268:(o,s,l)=>{var u=l(568),c=l(440);function f(d){return c(d)&&u(d)}o.exports=f},5778:(o,s,l)=>{o=l.nmd(o);var u=l(3250),c=l(7999),f=s&&!s.nodeType&&s,d=f&&!0&&o&&!o.nodeType&&o,h=d&&d.exports===f,_=h?u.Buffer:void 0,p=_?_.isBuffer:void 0,v=p||c;o.exports=v},9787:(o,s,l)=>{var u=l(1351),c=l(7493),f=l(9312),d=l(5589),h=l(568),_=l(5778),p=l(2840),v=l(922),y="[object Map]",m="[object Set]",g=Object.prototype,x=g.hasOwnProperty;function b(S){if(S==null)return!0;if(h(S)&&(d(S)||typeof S=="string"||typeof S.splice=="function"||_(S)||v(S)||f(S)))return!S.length;var C=c(S);if(C==y||C==m)return!S.size;if(p(S))return!u(S).length;for(var E in S)if(x.call(S,E))return!1;return!0}o.exports=b},5563:(o,s,l)=>{var u=l(9823),c=l(3702),f="[object AsyncFunction]",d="[object Function]",h="[object GeneratorFunction]",_="[object Proxy]";function p(v){if(!c(v))return!1;var y=u(v);return y==d||y==h||y==f||y==_}o.exports=p},6052:o=>{var s=9007199254740991;function l(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=s}o.exports=l},7613:(o,s,l)=>{var u=l(2275),c=l(1525),f=l(8690),d=f&&f.isMap,h=d?c(d):u;o.exports=h},3702:o=>{function s(l){var u=typeof l;return l!=null&&(u=="object"||u=="function")}o.exports=s},440:o=>{function s(l){return l!=null&&typeof l=="object"}o.exports=s},8290:(o,s,l)=>{var u=l(8261),c=l(1525),f=l(8690),d=f&&f.isRegExp,h=d?c(d):u;o.exports=h},693:(o,s,l)=>{var u=l(7170),c=l(1525),f=l(8690),d=f&&f.isSet,h=d?c(d):u;o.exports=h},6705:(o,s,l)=>{var u=l(9823),c=l(5589),f=l(440),d="[object String]";function h(_){return typeof _=="string"||!c(_)&&f(_)&&u(_)==d}o.exports=h},2624:(o,s,l)=>{var u=l(9823),c=l(440),f="[object Symbol]";function d(h){return typeof h=="symbol"||c(h)&&u(h)==f}o.exports=d},922:(o,s,l)=>{var u=l(2448),c=l(1525),f=l(8690),d=f&&f.isTypedArray,h=d?c(d):u;o.exports=h},6474:o=>{function s(l){return l===void 0}o.exports=s},2096:(o,s,l)=>{var u=l(5825),c=l(1351),f=l(568);function d(h){return f(h)?u(h):c(h)}o.exports=d},9882:(o,s,l)=>{var u=l(5825),c=l(1309),f=l(568);function d(h){return f(h)?u(h,!0):c(h)}o.exports=d},7875:o=>{function s(l){var u=l==null?0:l.length;return u?l[u-1]:void 0}o.exports=s},9107:(o,s,l)=>{var u=l(9233),c=l(5833),f=l(8068),d=l(5589);function h(_,p){var v=d(_)?u:f;return v(_,c(p,3))}o.exports=h},7997:(o,s,l)=>{var u=l(5678),c="Expected a function";function f(d,h){if(typeof d!="function"||h!=null&&typeof h!="function")throw new TypeError(c);var _=function(){var p=arguments,v=h?h.apply(this,p):p[0],y=_.cache;if(y.has(v))return y.get(v);var m=d.apply(this,p);return _.cache=y.set(v,m)||y,m};return _.cache=new(f.Cache||u),_}f.Cache=u,o.exports=f},606:o=>{var s="Expected a function";function l(u){if(typeof u!="function")throw new TypeError(s);return function(){var c=arguments;switch(c.length){case 0:return!u.call(this);case 1:return!u.call(this,c[0]);case 2:return!u.call(this,c[0],c[1]);case 3:return!u.call(this,c[0],c[1],c[2])}return!u.apply(this,c)}}o.exports=l},1607:o=>{function s(){}o.exports=s},7383:(o,s,l)=>{var u=l(9233),c=l(5833),f=l(7121),d=l(5713);function h(_,p){if(_==null)return{};var v=u(d(_),function(y){return[y]});return p=c(p),f(_,v,function(y,m){return p(y,m[0])})}o.exports=h},4437:(o,s,l)=>{var u=l(6174),c=l(3293),f=l(5130),d=l(6040);function h(_){return f(_)?u(d(_)):c(_)}o.exports=h},7682:(o,s,l)=>{var u=l(5115),c=l(1701),f=l(5833),d=l(4306),h=l(5589);function _(p,v,y){var m=h(p)?u:d,g=arguments.length<3;return m(p,f(v,4),y,g,c)}o.exports=_},4171:(o,s,l)=>{var u=l(2493),c=l(8146),f=l(5833),d=l(5589),h=l(606);function _(p,v){var y=d(p)?u:c;return y(p,h(f(v,3)))}o.exports=_},9040:(o,s,l)=>{var u=l(1831),c=l(5833),f=l(854),d=l(5589),h=l(8132);function _(p,v,y){var m=d(p)?u:f;return y&&h(p,v,y)&&(v=void 0),m(p,c(v,3))}o.exports=_},4506:o=>{function s(){return[]}o.exports=s},7999:o=>{function s(){return!1}o.exports=s},9558:(o,s,l)=>{var u=l(9153),c=1/0,f=17976931348623157e292;function d(h){if(!h)return h===0?h:0;if(h=u(h),h===c||h===-c){var _=h<0?-1:1;return _*f}return h===h?h:0}o.exports=d},6843:(o,s,l)=>{var u=l(9558);function c(f){var d=u(f),h=d%1;return d===d?h?d-h:d:0}o.exports=c},9153:(o,s,l)=>{var u=l(1656),c=l(3702),f=l(2624),d=0/0,h=/^[-+]0x[0-9a-f]+$/i,_=/^0b[01]+$/i,p=/^0o[0-7]+$/i,v=parseInt;function y(m){if(typeof m=="number")return m;if(f(m))return d;if(c(m)){var g=typeof m.valueOf=="function"?m.valueOf():m;m=c(g)?g+"":g}if(typeof m!="string")return m===0?m:+m;m=u(m);var x=_.test(m);return x||p.test(m)?v(m.slice(2),x?2:8):h.test(m)?d:+m}o.exports=y},9835:(o,s,l)=>{var u=l(6245);function c(f){return f==null?"":u(f)}o.exports=c},292:(o,s,l)=>{var u=l(135);function c(f){return f&&f.length?u(f):[]}o.exports=c},7584:(o,s,l)=>{var u=l(1254),c=u("toUpperCase");o.exports=c},1682:(o,s,l)=>{var u=l(71),c=l(2096);function f(d){return d==null?[]:u(d,c(d))}o.exports=f},7968:function(o,s){var l,u,c;(function(f,d){u=[],l=d,c=typeof l=="function"?l.apply(s,u):l,c!==void 0&&(o.exports=c)})(typeof self!="undefined"?self:this,function(){function f(){}f.prototype.saveState=function(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}},f.prototype.restoreState=function(T){this.idx=T.idx,this.input=T.input,this.groupIdx=T.groupIdx},f.prototype.pattern=function(T){this.idx=0,this.input=T,this.groupIdx=0,this.consumeChar("/");var M=this.disjunction();this.consumeChar("/");for(var L={type:"Flags",loc:{begin:this.idx,end:T.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};this.isRegExpFlag();)switch(this.popChar()){case"g":y(L,"global");break;case"i":y(L,"ignoreCase");break;case"m":y(L,"multiLine");break;case"u":y(L,"unicode");break;case"y":y(L,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:L,value:M,loc:this.loc(0)}},f.prototype.disjunction=function(){var T=[],M=this.idx;for(T.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),T.push(this.alternative());return{type:"Disjunction",value:T,loc:this.loc(M)}},f.prototype.alternative=function(){for(var T=[],M=this.idx;this.isTerm();)T.push(this.term());return{type:"Alternative",value:T,loc:this.loc(M)}},f.prototype.term=function(){return this.isAssertion()?this.assertion():this.atom()},f.prototype.assertion=function(){var T=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(T)};case"$":return{type:"EndAnchor",loc:this.loc(T)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(T)};case"B":return{type:"NonWordBoundary",loc:this.loc(T)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");var M;switch(this.popChar()){case"=":M="Lookahead";break;case"!":M="NegativeLookahead";break}m(M);var L=this.disjunction();return this.consumeChar(")"),{type:M,value:L,loc:this.loc(T)}}g()},f.prototype.quantifier=function(T){var M,L=this.idx;switch(this.popChar()){case"*":M={atLeast:0,atMost:1/0};break;case"+":M={atLeast:1,atMost:1/0};break;case"?":M={atLeast:0,atMost:1};break;case"{":var F=this.integerIncludingZero();switch(this.popChar()){case"}":M={atLeast:F,atMost:F};break;case",":var N;this.isDigit()?(N=this.integerIncludingZero(),M={atLeast:F,atMost:N}):M={atLeast:F,atMost:1/0},this.consumeChar("}");break}if(T===!0&&M===void 0)return;m(M);break}if(!(T===!0&&M===void 0))return m(M),this.peekChar(0)==="?"?(this.consumeChar("?"),M.greedy=!1):M.greedy=!0,M.type="Quantifier",M.loc=this.loc(L),M},f.prototype.atom=function(){var T,M=this.idx;switch(this.peekChar()){case".":T=this.dotAll();break;case"\\":T=this.atomEscape();break;case"[":T=this.characterClass();break;case"(":T=this.group();break}return T===void 0&&this.isPatternCharacter()&&(T=this.patternCharacter()),m(T),T.loc=this.loc(M),this.isQuantifier()&&(T.quantifier=this.quantifier()),T},f.prototype.dotAll=function(){return this.consumeChar("."),{type:"Set",complement:!0,value:[p(`
`),p("\r"),p("\u2028"),p("\u2029")]}},f.prototype.atomEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},f.prototype.decimalEscapeAtom=function(){var T=this.positiveInteger();return{type:"GroupBackReference",value:T}},f.prototype.characterClassEscape=function(){var T,M=!1;switch(this.popChar()){case"d":T=b;break;case"D":T=b,M=!0;break;case"s":T=C;break;case"S":T=C,M=!0;break;case"w":T=S;break;case"W":T=S,M=!0;break}return m(T),{type:"Set",value:T,complement:M}},f.prototype.controlEscapeAtom=function(){var T;switch(this.popChar()){case"f":T=p("\f");break;case"n":T=p(`
`);break;case"r":T=p("\r");break;case"t":T=p("	");break;case"v":T=p("\v");break}return m(T),{type:"Character",value:T}},f.prototype.controlLetterEscapeAtom=function(){this.consumeChar("c");var T=this.popChar();if(/[a-zA-Z]/.test(T)===!1)throw Error("Invalid ");var M=T.toUpperCase().charCodeAt(0)-64;return{type:"Character",value:M}},f.prototype.nulCharacterAtom=function(){return this.consumeChar("0"),{type:"Character",value:p("\0")}},f.prototype.hexEscapeSequenceAtom=function(){return this.consumeChar("x"),this.parseHexDigits(2)},f.prototype.regExpUnicodeEscapeSequenceAtom=function(){return this.consumeChar("u"),this.parseHexDigits(4)},f.prototype.identityEscapeAtom=function(){var T=this.popChar();return{type:"Character",value:p(T)}},f.prototype.classPatternCharacterAtom=function(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:var T=this.popChar();return{type:"Character",value:p(T)}}},f.prototype.characterClass=function(){var T=[],M=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),M=!0);this.isClassAtom();){var L=this.classAtom(),F=L.type==="Character";if(F&&this.isRangeDash()){this.consumeChar("-");var N=this.classAtom(),I=N.type==="Character";if(I){if(N.value<L.value)throw Error("Range out of order in character class");T.push({from:L.value,to:N.value})}else v(L.value,T),T.push(p("-")),v(N.value,T)}else v(L.value,T)}return this.consumeChar("]"),{type:"Set",complement:M,value:T}},f.prototype.classAtom=function(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}},f.prototype.classEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:p("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},f.prototype.group=function(){var T=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),T=!1;break;default:this.groupIdx++;break}var M=this.disjunction();this.consumeChar(")");var L={type:"Group",capturing:T,value:M};return T&&(L.idx=this.groupIdx),L},f.prototype.positiveInteger=function(){var T=this.popChar();if(_.test(T)===!1)throw Error("Expecting a positive integer");for(;h.test(this.peekChar(0));)T+=this.popChar();return parseInt(T,10)},f.prototype.integerIncludingZero=function(){var T=this.popChar();if(h.test(T)===!1)throw Error("Expecting an integer");for(;h.test(this.peekChar(0));)T+=this.popChar();return parseInt(T,10)},f.prototype.patternCharacter=function(){var T=this.popChar();switch(T){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:p(T)}}},f.prototype.isRegExpFlag=function(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}},f.prototype.isRangeDash=function(){return this.peekChar()==="-"&&this.isClassAtom(1)},f.prototype.isDigit=function(){return h.test(this.peekChar(0))},f.prototype.isClassAtom=function(T){switch(T===void 0&&(T=0),this.peekChar(T)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},f.prototype.isTerm=function(){return this.isAtom()||this.isAssertion()},f.prototype.isAtom=function(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}},f.prototype.isAssertion=function(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}},f.prototype.isQuantifier=function(){var T=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(T)}},f.prototype.isPatternCharacter=function(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},f.prototype.parseHexDigits=function(T){for(var M="",L=0;L<T;L++){var F=this.popChar();if(d.test(F)===!1)throw Error("Expecting a HexDecimal digits");M+=F}var N=parseInt(M,16);return{type:"Character",value:N}},f.prototype.peekChar=function(T){return T===void 0&&(T=0),this.input[this.idx+T]},f.prototype.popChar=function(){var T=this.peekChar(0);return this.consumeChar(),T},f.prototype.consumeChar=function(T){if(T!==void 0&&this.input[this.idx]!==T)throw Error("Expected: '"+T+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++},f.prototype.loc=function(T){return{begin:T,end:this.idx}};var d=/[0-9a-fA-F]/,h=/[0-9]/,_=/[1-9]/;function p(T){return T.charCodeAt(0)}function v(T,M){T.length!==void 0?T.forEach(function(L){M.push(L)}):M.push(T)}function y(T,M){if(T[M]===!0)throw"duplicate flag "+M;T[M]=!0}function m(T){if(T===void 0)throw Error("Internal Error - Should never get here!")}function g(){throw Error("Internal Error - Should never get here!")}var x,b=[];for(x=p("0");x<=p("9");x++)b.push(x);var S=[p("_")].concat(b);for(x=p("a");x<=p("z");x++)S.push(x);for(x=p("A");x<=p("Z");x++)S.push(x);var C=[p(" "),p("\f"),p(`
`),p("\r"),p("	"),p("\v"),p("	"),p("\xA0"),p("\u1680"),p("\u2000"),p("\u2001"),p("\u2002"),p("\u2003"),p("\u2004"),p("\u2005"),p("\u2006"),p("\u2007"),p("\u2008"),p("\u2009"),p("\u200A"),p("\u2028"),p("\u2029"),p("\u202F"),p("\u205F"),p("\u3000"),p("\uFEFF")];function E(){}return E.prototype.visitChildren=function(T){for(var M in T){var L=T[M];T.hasOwnProperty(M)&&(L.type!==void 0?this.visit(L):Array.isArray(L)&&L.forEach(function(F){this.visit(F)},this))}},E.prototype.visit=function(T){switch(T.type){case"Pattern":this.visitPattern(T);break;case"Flags":this.visitFlags(T);break;case"Disjunction":this.visitDisjunction(T);break;case"Alternative":this.visitAlternative(T);break;case"StartAnchor":this.visitStartAnchor(T);break;case"EndAnchor":this.visitEndAnchor(T);break;case"WordBoundary":this.visitWordBoundary(T);break;case"NonWordBoundary":this.visitNonWordBoundary(T);break;case"Lookahead":this.visitLookahead(T);break;case"NegativeLookahead":this.visitNegativeLookahead(T);break;case"Character":this.visitCharacter(T);break;case"Set":this.visitSet(T);break;case"Group":this.visitGroup(T);break;case"GroupBackReference":this.visitGroupBackReference(T);break;case"Quantifier":this.visitQuantifier(T);break}this.visitChildren(T)},E.prototype.visitPattern=function(T){},E.prototype.visitFlags=function(T){},E.prototype.visitDisjunction=function(T){},E.prototype.visitAlternative=function(T){},E.prototype.visitStartAnchor=function(T){},E.prototype.visitEndAnchor=function(T){},E.prototype.visitWordBoundary=function(T){},E.prototype.visitNonWordBoundary=function(T){},E.prototype.visitLookahead=function(T){},E.prototype.visitNegativeLookahead=function(T){},E.prototype.visitCharacter=function(T){},E.prototype.visitSet=function(T){},E.prototype.visitGroup=function(T){},E.prototype.visitGroupBackReference=function(T){},E.prototype.visitQuantifier=function(T){},{RegExpParser:f,BaseRegExpVisitor:E,VERSION:"0.5.0"}})},5781:(o,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createSyntaxDiagramsCode=void 0;var u=l(7979);function c(f,d){var h=d===void 0?{}:d,_=h.resourceBase,p=_===void 0?"https://unpkg.com//Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js@".concat(u.VERSION,"/diagrams/"):_,v=h.css,y=v===void 0?"https://unpkg.com//Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js@".concat(u.VERSION,"/diagrams/diagrams.css"):v,m=`
<!-- This is a generated file -->
<!DOCTYPE html>
<meta charset="utf-8">
<style>
  body {
    background-color: hsl(30, 20%, 95%)
  }
</style>

`,g=`
<link rel='stylesheet' href='`.concat(y,`'>
`),x=`
<script src='`.concat(p,`vendor/railroad-diagrams.js'><\/script>
<script src='`).concat(p,`src/diagrams_builder.js'><\/script>
<script src='`).concat(p,`src/diagrams_behavior.js'><\/script>
<script src='`).concat(p,`src/main.js'><\/script>
`),b=`
<div id="diagrams" align="center"></div>    
`,S=`
<script>
    window.serializedGrammar = `.concat(JSON.stringify(f,null,"  "),`;
<\/script>
`),C=`
<script>
    var diagramsDiv = document.getElementById("diagrams");
    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);
<\/script>
`;return m+g+x+b+S+C}s.createSyntaxDiagramsCode=c},4105:(o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.defineNameProp=void 0;var l="name";function u(c,f){Object.defineProperty(c,l,{enumerable:!1,configurable:!0,writable:!1,value:f})}s.defineNameProp=u},3710:(o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IN=void 0,s.IN="_~IN~_"},7485:(o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addNoneTerminalToCst=s.addTerminalToCst=s.setNodeLocationFull=s.setNodeLocationOnlyOffset=void 0;function l(d,h){isNaN(d.startOffset)===!0?(d.startOffset=h.startOffset,d.endOffset=h.endOffset):d.endOffset<h.endOffset&&(d.endOffset=h.endOffset)}s.setNodeLocationOnlyOffset=l;function u(d,h){isNaN(d.startOffset)===!0?(d.startOffset=h.startOffset,d.startColumn=h.startColumn,d.startLine=h.startLine,d.endOffset=h.endOffset,d.endColumn=h.endColumn,d.endLine=h.endLine):d.endOffset<h.endOffset&&(d.endOffset=h.endOffset,d.endColumn=h.endColumn,d.endLine=h.endLine)}s.setNodeLocationFull=u;function c(d,h,_){d.children[_]===void 0?d.children[_]=[h]:d.children[_].push(h)}s.addTerminalToCst=c;function f(d,h,_){d.children[h]===void 0?d.children[h]=[_]:d.children[h].push(_)}s.addNoneTerminalToCst=f},8169:function(o,s,l){var u=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(s,"__esModule",{value:!0}),s.validateMissingCstMethods=s.validateVisitor=s.CstVisitorDefinitionError=s.createBaseVisitorConstructorWithDefaults=s.createBaseSemanticVisitorConstructor=s.defaultVisit=void 0;var c=u(l(9787)),f=u(l(6494)),d=u(l(5589)),h=u(l(9107)),_=u(l(7734)),p=u(l(4663)),v=u(l(2096)),y=u(l(5563)),m=u(l(6474)),g=l(4105);function x(M,L){for(var F=(0,v.default)(M),N=F.length,I=0;I<N;I++)for(var O=F[I],P=M[O],R=P.length,A=0;A<R;A++){var D=P[A];D.tokenTypeIdx===void 0&&this[D.name](D.children,L)}}s.defaultVisit=x;function b(M,L){var F=function(){};(0,g.defineNameProp)(F,M+"BaseSemantics");var N={visit:function(I,O){if((0,d.default)(I)&&(I=I[0]),!(0,m.default)(I))return this[I.name](I.children,O)},validateVisitor:function(){var I=E(this,L);if(!(0,c.default)(I)){var O=(0,h.default)(I,function(P){return P.msg});throw Error("Errors Detected in CST Visitor <".concat(this.constructor.name,`>:
	`)+"".concat(O.join(`

`).replace(/\n/g,`
	`)))}}};return F.prototype=N,F.prototype.constructor=F,F._RULE_NAMES=L,F}s.createBaseSemanticVisitorConstructor=b;function S(M,L,F){var N=function(){};(0,g.defineNameProp)(N,M+"BaseSemanticsWithDefaults");var I=Object.create(F.prototype);return(0,_.default)(L,function(O){I[O]=x}),N.prototype=I,N.prototype.constructor=N,N}s.createBaseVisitorConstructorWithDefaults=S;var C;(function(M){M[M.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",M[M.MISSING_METHOD=1]="MISSING_METHOD"})(C=s.CstVisitorDefinitionError||(s.CstVisitorDefinitionError={}));function E(M,L){var F=T(M,L);return F}s.validateVisitor=E;function T(M,L){var F=(0,p.default)(L,function(I){return(0,y.default)(M[I])===!1}),N=(0,h.default)(F,function(I){return{msg:"Missing visitor method: <".concat(I,"> on ").concat(M.constructor.name," CST Visitor."),type:C.MISSING_METHOD,methodName:I}});return(0,f.default)(N)}s.validateMissingCstMethods=T},1007:function(o,s,l){var u=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(s,"__esModule",{value:!0}),s.defaultGrammarValidatorErrorProvider=s.defaultGrammarResolverErrorProvider=s.defaultParserErrorProvider=void 0;var c=l(6736),f=u(l(8936)),d=u(l(9107)),h=u(l(7682)),_=l(7729),p=l(7729);s.defaultParserErrorProvider={buildMismatchTokenMessage:function(v){var y=v.expected,m=v.actual;v.previous,v.ruleName;var g=(0,c.hasTokenLabel)(y),x=g?"--> ".concat((0,c.tokenLabel)(y)," <--"):"token of type --> ".concat(y.name," <--"),b="Expecting ".concat(x," but found --> '").concat(m.image,"' <--");return b},buildNotAllInputParsedMessage:function(v){var y=v.firstRedundant;return v.ruleName,"Redundant input, expecting EOF but found: "+y.image},buildNoViableAltMessage:function(v){var y=v.expectedPathsPerAlt,m=v.actual;v.previous;var g=v.customUserDescription;v.ruleName;var x="Expecting: ",b=(0,f.default)(m).image,S=`
but found: '`+b+"'";if(g)return x+g+S;var C=(0,h.default)(y,function(L,F){return L.concat(F)},[]),E=(0,d.default)(C,function(L){return"[".concat((0,d.default)(L,function(F){return(0,c.tokenLabel)(F)}).join(", "),"]")}),T=(0,d.default)(E,function(L,F){return"  ".concat(F+1,". ").concat(L)}),M=`one of these possible Token sequences:
`.concat(T.join(`
`));return x+M+S},buildEarlyExitMessage:function(v){var y=v.expectedIterationPaths,m=v.actual,g=v.customUserDescription;v.ruleName;var x="Expecting: ",b=(0,f.default)(m).image,S=`
but found: '`+b+"'";if(g)return x+g+S;var C=(0,d.default)(y,function(T){return"[".concat((0,d.default)(T,function(M){return(0,c.tokenLabel)(M)}).join(","),"]")}),E=`expecting at least one iteration which starts with one of these possible Token sequences::
  `+"<".concat(C.join(" ,"),">");return x+E+S}},Object.freeze(s.defaultParserErrorProvider),s.defaultGrammarResolverErrorProvider={buildRuleNotFoundError:function(v,y){var m="Invalid grammar, reference to a rule which is not defined: ->"+y.nonTerminalName+`<-
inside top level rule: ->`+v.name+"<-";return m}},s.defaultGrammarValidatorErrorProvider={buildDuplicateFoundError:function(v,y){function m(M){return M instanceof _.Terminal?M.terminalType.name:M instanceof _.NonTerminal?M.nonTerminalName:""}var g=v.name,x=(0,f.default)(y),b=x.idx,S=(0,p.getProductionDslName)(x),C=m(x),E=b>0,T="->".concat(S).concat(E?b:"","<- ").concat(C?"with argument: ->".concat(C,"<-"):"",`
                  appears more than once (`).concat(y.length," times) in the top level rule: ->").concat(g,`<-.                  
                  For further details see: https:///Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `);return T=T.replace(/[ \t]+/g," "),T=T.replace(/\s\s+/g,`
`),T},buildNamespaceConflictError:function(v){var y=`Namespace conflict found in grammar.
`+"The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <".concat(v.name,`>.
`)+`To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`;return y},buildAlternationPrefixAmbiguityError:function(v){var y=(0,d.default)(v.prefixPath,function(x){return(0,c.tokenLabel)(x)}).join(", "),m=v.alternation.idx===0?"":v.alternation.idx,g="Ambiguous alternatives: <".concat(v.ambiguityIndices.join(" ,"),`> due to common lookahead prefix
`)+"in <OR".concat(m,"> inside <").concat(v.topLevelRule.name,`> Rule,
`)+"<".concat(y,`> may appears as a prefix path in all these alternatives.
`)+`See: https:///Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`;return g},buildAlternationAmbiguityError:function(v){var y=(0,d.default)(v.prefixPath,function(x){return(0,c.tokenLabel)(x)}).join(", "),m=v.alternation.idx===0?"":v.alternation.idx,g="Ambiguous Alternatives Detected: <".concat(v.ambiguityIndices.join(" ,"),"> in <OR").concat(m,">")+" inside <".concat(v.topLevelRule.name,`> Rule,
`)+"<".concat(y,`> may appears as a prefix path in all these alternatives.
`);return g=g+`See: https:///Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,g},buildEmptyRepetitionError:function(v){var y=(0,p.getProductionDslName)(v.repetition);v.repetition.idx!==0&&(y+=v.repetition.idx);var m="The repetition <".concat(y,"> within Rule <").concat(v.topLevelRule.name,`> can never consume any tokens.
`)+"This could lead to an infinite loop.";return m},buildTokenNameError:function(v){return"deprecated"},buildEmptyAlternationError:function(v){var y="Ambiguous empty alternative: <".concat(v.emptyChoiceIdx+1,">")+" in <OR".concat(v.alternation.idx,"> inside <").concat(v.topLevelRule.name,`> Rule.
`)+"Only the last alternative may be an empty alternative.";return y},buildTooManyAlternativesError:function(v){var y=`An Alternation cannot have more than 256 alternatives:
`+"<OR".concat(v.alternation.idx,"> inside <").concat(v.topLevelRule.name,`> Rule.
 has `).concat(v.alternation.definition.length+1," alternatives.");return y},buildLeftRecursionError:function(v){var y=v.topLevelRule.name,m=(0,d.default)(v.leftRecursionPath,function(b){return b.name}),g="".concat(y," --> ").concat(m.concat([y]).join(" --> ")),x=`Left Recursion found in grammar.
`+"rule: <".concat(y,`> can be invoked from itself (directly or indirectly)
`)+`without consuming any Tokens. The grammar path that causes this is: 
 `.concat(g,`
`)+` To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`;return x},buildInvalidRuleNameError:function(v){return"deprecated"},buildDuplicateRuleNameError:function(v){var y;v.topLevelRule instanceof _.Rule?y=v.topLevelRule.name:y=v.topLevelRule;var m="Duplicate definition, rule: ->".concat(y,"<- is already defined in the grammar: ->").concat(v.grammarName,"<-");return m}}},643:function(o,s,l){var u=this&&this.__extends||function(){var C=function(E,T){return C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,L){M.__proto__=L}||function(M,L){for(var F in L)Object.prototype.hasOwnProperty.call(L,F)&&(M[F]=L[F])},C(E,T)};return function(E,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");C(E,T);function M(){this.constructor=E}E.prototype=T===null?Object.create(T):(M.prototype=T.prototype,new M)}}(),c=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(s,"__esModule",{value:!0}),s.EarlyExitException=s.NotAllInputParsedException=s.NoViableAltException=s.MismatchedTokenException=s.isRecognitionException=void 0;var f=c(l(2876)),d="MismatchedTokenException",h="NoViableAltException",_="EarlyExitException",p="NotAllInputParsedException",v=[d,h,_,p];Object.freeze(v);function y(C){return(0,f.default)(v,C.name)}s.isRecognitionException=y;var m=function(C){u(E,C);function E(T,M){var L=this.constructor,F=C.call(this,T)||this;return F.token=M,F.resyncedTokens=[],Object.setPrototypeOf(F,L.prototype),Error.captureStackTrace&&Error.captureStackTrace(F,F.constructor),F}return E}(Error),g=function(C){u(E,C);function E(T,M,L){var F=C.call(this,T,M)||this;return F.previousToken=L,F.name=d,F}return E}(m);s.MismatchedTokenException=g;var x=function(C){u(E,C);function E(T,M,L){var F=C.call(this,T,M)||this;return F.previousToken=L,F.name=h,F}return E}(m);s.NoViableAltException=x;var b=function(C){u(E,C);function E(T,M){var L=C.call(this,T,M)||this;return L.name=p,L}return E}(m);s.NotAllInputParsedException=b;var S=function(C){u(E,C);function E(T,M,L){var F=C.call(this,T,M)||this;return F.previousToken=L,F.name=_,F}return E}(m);s.EarlyExitException=S},3870:function(o,s,l){var u=this&&this.__extends||function(){var J=function(ae,ne){return J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ge,se){ge.__proto__=se}||function(ge,se){for(var Re in se)Object.prototype.hasOwnProperty.call(se,Re)&&(ge[Re]=se[Re])},J(ae,ne)};return function(ae,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Class extends value "+String(ne)+" is not a constructor or null");J(ae,ne);function ge(){this.constructor=ae}ae.prototype=ne===null?Object.create(ne):(ge.prototype=ne.prototype,new ge)}}(),c=this&&this.__assign||function(){return c=Object.assign||function(J){for(var ae,ne=1,ge=arguments.length;ne<ge;ne++){ae=arguments[ne];for(var se in ae)Object.prototype.hasOwnProperty.call(ae,se)&&(J[se]=ae[se])}return J},c.apply(this,arguments)},f=this&&this.__importDefault||function(J){return J&&J.__esModule?J:{default:J}};Object.defineProperty(s,"__esModule",{value:!0}),s.checkPrefixAlternativesAmbiguities=s.validateSomeNonEmptyLookaheadPath=s.validateTooManyAlts=s.RepetitionCollector=s.validateAmbiguousAlternationAlternatives=s.validateEmptyOrAlternative=s.getFirstNoneTerminal=s.validateNoLeftRecursion=s.validateRuleIsOverridden=s.validateRuleDoesNotAlreadyExist=s.OccurrenceValidationCollector=s.identifyProductionForDuplicates=s.validateGrammar=s.validateLookahead=void 0;var d=f(l(8936)),h=f(l(9787)),_=f(l(9239)),p=f(l(2923)),v=f(l(4663)),y=f(l(4171)),m=f(l(5271)),g=f(l(9107)),x=f(l(7734)),b=f(l(9907)),S=f(l(7682)),C=f(l(7383)),E=f(l(1682)),T=f(l(2876)),M=f(l(9875)),L=f(l(7953)),F=l(2941),N=l(7729),I=l(4677),O=l(9985),P=l(7729),R=l(7729),A=f(l(682)),D=f(l(6494)),B=l(1201);function k(J){var ae=J.lookaheadStrategy.validate({rules:J.rules,tokenTypes:J.tokenTypes,grammarName:J.grammarName});return(0,g.default)(ae,function(ne){return c({type:F.ParserDefinitionErrorType.CUSTOM_LOOKAHEAD_VALIDATION},ne)})}s.validateLookahead=k;function V(J,ae,ne,ge){var se=(0,M.default)(J,function(De){return U(De,ne)}),Re=pe(J,ae,ne),de=(0,M.default)(J,function(De){return ee(De,ne)}),Pe=(0,M.default)(J,function(De){return W(De,J,ge,ne)});return se.concat(Re,de,Pe)}s.validateGrammar=V;function U(J,ae){var ne=new $;J.accept(ne);var ge=ne.allProductions,se=(0,b.default)(ge,j),Re=(0,C.default)(se,function(Pe){return Pe.length>1}),de=(0,g.default)((0,E.default)(Re),function(Pe){var De=(0,d.default)(Pe),Ke=ae.buildDuplicateFoundError(J,Pe),Be=(0,N.getProductionDslName)(De),He={message:Ke,type:F.ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS,ruleName:J.name,dslName:Be,occurrence:De.idx},We=G(De);return We&&(He.parameter=We),He});return de}function j(J){return"".concat((0,N.getProductionDslName)(J),"_#_").concat(J.idx,"_#_").concat(G(J))}s.identifyProductionForDuplicates=j;function G(J){return J instanceof P.Terminal?J.terminalType.name:J instanceof P.NonTerminal?J.nonTerminalName:""}var $=function(J){u(ae,J);function ae(){var ne=J!==null&&J.apply(this,arguments)||this;return ne.allProductions=[],ne}return ae.prototype.visitNonTerminal=function(ne){this.allProductions.push(ne)},ae.prototype.visitOption=function(ne){this.allProductions.push(ne)},ae.prototype.visitRepetitionWithSeparator=function(ne){this.allProductions.push(ne)},ae.prototype.visitRepetitionMandatory=function(ne){this.allProductions.push(ne)},ae.prototype.visitRepetitionMandatoryWithSeparator=function(ne){this.allProductions.push(ne)},ae.prototype.visitRepetition=function(ne){this.allProductions.push(ne)},ae.prototype.visitAlternation=function(ne){this.allProductions.push(ne)},ae.prototype.visitTerminal=function(ne){this.allProductions.push(ne)},ae}(R.GAstVisitor);s.OccurrenceValidationCollector=$;function W(J,ae,ne,ge){var se=[],Re=(0,S.default)(ae,function(Pe,De){return De.name===J.name?Pe+1:Pe},0);if(Re>1){var de=ge.buildDuplicateRuleNameError({topLevelRule:J,grammarName:ne});se.push({message:de,type:F.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:J.name})}return se}s.validateRuleDoesNotAlreadyExist=W;function K(J,ae,ne){var ge=[],se;return(0,T.default)(ae,J)||(se="Invalid rule override, rule: ->".concat(J,"<- cannot be overridden in the grammar: ->").concat(ne,"<-")+"as it is not defined in any of the super grammars ",ge.push({message:se,type:F.ParserDefinitionErrorType.INVALID_RULE_OVERRIDE,ruleName:J})),ge}s.validateRuleIsOverridden=K;function q(J,ae,ne,ge){ge===void 0&&(ge=[]);var se=[],Re=Y(ae.definition);if((0,h.default)(Re))return[];var de=J.name,Pe=(0,T.default)(Re,J);Pe&&se.push({message:ne.buildLeftRecursionError({topLevelRule:J,leftRecursionPath:ge}),type:F.ParserDefinitionErrorType.LEFT_RECURSION,ruleName:de});var De=(0,m.default)(Re,ge.concat([J])),Ke=(0,M.default)(De,function(Be){var He=(0,L.default)(ge);return He.push(Be),q(J,Be,ne,He)});return se.concat(Ke)}s.validateNoLeftRecursion=q;function Y(J){var ae=[];if((0,h.default)(J))return ae;var ne=(0,d.default)(J);if(ne instanceof P.NonTerminal)ae.push(ne.referencedRule);else if(ne instanceof P.Alternative||ne instanceof P.Option||ne instanceof P.RepetitionMandatory||ne instanceof P.RepetitionMandatoryWithSeparator||ne instanceof P.RepetitionWithSeparator||ne instanceof P.Repetition)ae=ae.concat(Y(ne.definition));else if(ne instanceof P.Alternation)ae=(0,p.default)((0,g.default)(ne.definition,function(de){return Y(de.definition)}));else if(!(ne instanceof P.Terminal))throw Error("non exhaustive match");var ge=(0,N.isOptionalProd)(ne),se=J.length>1;if(ge&&se){var Re=(0,_.default)(J);return ae.concat(Y(Re))}else return ae}s.getFirstNoneTerminal=Y;var Q=function(J){u(ae,J);function ae(){var ne=J!==null&&J.apply(this,arguments)||this;return ne.alternations=[],ne}return ae.prototype.visitAlternation=function(ne){this.alternations.push(ne)},ae}(R.GAstVisitor);function re(J,ae){var ne=new Q;J.accept(ne);var ge=ne.alternations,se=(0,M.default)(ge,function(Re){var de=(0,A.default)(Re.definition);return(0,M.default)(de,function(Pe,De){var Ke=(0,O.nextPossibleTokensAfter)([Pe],[],B.tokenStructuredMatcher,1);return(0,h.default)(Ke)?[{message:ae.buildEmptyAlternationError({topLevelRule:J,alternation:Re,emptyChoiceIdx:De}),type:F.ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT,ruleName:J.name,occurrence:Re.idx,alternative:De+1}]:[]})});return se}s.validateEmptyOrAlternative=re;function ue(J,ae,ne){var ge=new Q;J.accept(ge);var se=ge.alternations;se=(0,y.default)(se,function(de){return de.ignoreAmbiguities===!0});var Re=(0,M.default)(se,function(de){var Pe=de.idx,De=de.maxLookahead||ae,Ke=(0,I.getLookaheadPathsForOr)(Pe,J,De,de),Be=Te(Ke,de,J,ne),He=Ce(Ke,de,J,ne);return Be.concat(He)});return Re}s.validateAmbiguousAlternationAlternatives=ue;var oe=function(J){u(ae,J);function ae(){var ne=J!==null&&J.apply(this,arguments)||this;return ne.allProductions=[],ne}return ae.prototype.visitRepetitionWithSeparator=function(ne){this.allProductions.push(ne)},ae.prototype.visitRepetitionMandatory=function(ne){this.allProductions.push(ne)},ae.prototype.visitRepetitionMandatoryWithSeparator=function(ne){this.allProductions.push(ne)},ae.prototype.visitRepetition=function(ne){this.allProductions.push(ne)},ae}(R.GAstVisitor);s.RepetitionCollector=oe;function ee(J,ae){var ne=new Q;J.accept(ne);var ge=ne.alternations,se=(0,M.default)(ge,function(Re){return Re.definition.length>255?[{message:ae.buildTooManyAlternativesError({topLevelRule:J,alternation:Re}),type:F.ParserDefinitionErrorType.TOO_MANY_ALTS,ruleName:J.name,occurrence:Re.idx}]:[]});return se}s.validateTooManyAlts=ee;function xe(J,ae,ne){var ge=[];return(0,x.default)(J,function(se){var Re=new oe;se.accept(Re);var de=Re.allProductions;(0,x.default)(de,function(Pe){var De=(0,I.getProdType)(Pe),Ke=Pe.maxLookahead||ae,Be=Pe.idx,He=(0,I.getLookaheadPathsForOptionalProd)(Be,se,De,Ke),We=He[0];if((0,h.default)((0,p.default)(We))){var yt=ne.buildEmptyRepetitionError({topLevelRule:se,repetition:Pe});ge.push({message:yt,type:F.ParserDefinitionErrorType.NO_NON_EMPTY_LOOKAHEAD,ruleName:se.name})}})}),ge}s.validateSomeNonEmptyLookaheadPath=xe;function Te(J,ae,ne,ge){var se=[],Re=(0,S.default)(J,function(Pe,De,Ke){return ae.definition[Ke].ignoreAmbiguities===!0||(0,x.default)(De,function(Be){var He=[Ke];(0,x.default)(J,function(We,yt){Ke!==yt&&(0,I.containsPath)(We,Be)&&ae.definition[yt].ignoreAmbiguities!==!0&&He.push(yt)}),He.length>1&&!(0,I.containsPath)(se,Be)&&(se.push(Be),Pe.push({alts:He,path:Be}))}),Pe},[]),de=(0,g.default)(Re,function(Pe){var De=(0,g.default)(Pe.alts,function(Be){return Be+1}),Ke=ge.buildAlternationAmbiguityError({topLevelRule:ne,alternation:ae,ambiguityIndices:De,prefixPath:Pe.path});return{message:Ke,type:F.ParserDefinitionErrorType.AMBIGUOUS_ALTS,ruleName:ne.name,occurrence:ae.idx,alternatives:Pe.alts}});return de}function Ce(J,ae,ne,ge){var se=(0,S.default)(J,function(de,Pe,De){var Ke=(0,g.default)(Pe,function(Be){return{idx:De,path:Be}});return de.concat(Ke)},[]),Re=(0,D.default)((0,M.default)(se,function(de){var Pe=ae.definition[de.idx];if(Pe.ignoreAmbiguities===!0)return[];var De=de.idx,Ke=de.path,Be=(0,v.default)(se,function(We){return ae.definition[We.idx].ignoreAmbiguities!==!0&&We.idx<De&&(0,I.isStrictPrefixOfPath)(We.path,Ke)}),He=(0,g.default)(Be,function(We){var yt=[We.idx+1,De+1],bt=ae.idx===0?"":ae.idx,Mt=ge.buildAlternationPrefixAmbiguityError({topLevelRule:ne,alternation:ae,ambiguityIndices:yt,prefixPath:We.path});return{message:Mt,type:F.ParserDefinitionErrorType.AMBIGUOUS_PREFIX_ALTS,ruleName:ne.name,occurrence:bt,alternatives:yt}});return He}));return Re}s.checkPrefixAlternativesAmbiguities=Ce;function pe(J,ae,ne){var ge=[],se=(0,g.default)(ae,function(Re){return Re.name});return(0,x.default)(J,function(Re){var de=Re.name;if((0,T.default)(se,de)){var Pe=ne.buildNamespaceConflictError(Re);ge.push({message:Pe,type:F.ParserDefinitionErrorType.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:de})}}),ge}},8052:function(o,s,l){var u=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(s,"__esModule",{value:!0}),s.firstForTerminal=s.firstForBranching=s.firstForSequence=s.first=void 0;var c=u(l(2923)),f=u(l(292)),d=u(l(9107)),h=l(7729),_=l(7729);function p(g){if(g instanceof h.NonTerminal)return p(g.referencedRule);if(g instanceof h.Terminal)return m(g);if((0,_.isSequenceProd)(g))return v(g);if((0,_.isBranchingProd)(g))return y(g);throw Error("non exhaustive match")}s.first=p;function v(g){for(var x=[],b=g.definition,S=0,C=b.length>S,E,T=!0;C&&T;)E=b[S],T=(0,_.isOptionalProd)(E),x=x.concat(p(E)),S=S+1,C=b.length>S;return(0,f.default)(x)}s.firstForSequence=v;function y(g){var x=(0,d.default)(g.definition,function(b){return p(b)});return(0,f.default)((0,c.default)(x))}s.firstForBranching=y;function m(g){return[g.terminalType]}s.firstForTerminal=m},4917:function(o,s,l){var u=this&&this.__extends||function(){var b=function(S,C){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,T){E.__proto__=T}||function(E,T){for(var M in T)Object.prototype.hasOwnProperty.call(T,M)&&(E[M]=T[M])},b(S,C)};return function(S,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");b(S,C);function E(){this.constructor=S}S.prototype=C===null?Object.create(C):(E.prototype=C.prototype,new E)}}(),c=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(s,"__esModule",{value:!0}),s.buildInProdFollowPrefix=s.buildBetweenProdsFollowPrefix=s.computeAllProdsFollows=s.ResyncFollowsWalker=void 0;var f=l(8567),d=l(8052),h=c(l(7734)),_=c(l(311)),p=l(3710),v=l(7729),y=function(b){u(S,b);function S(C){var E=b.call(this)||this;return E.topProd=C,E.follows={},E}return S.prototype.startWalking=function(){return this.walk(this.topProd),this.follows},S.prototype.walkTerminal=function(C,E,T){},S.prototype.walkProdRef=function(C,E,T){var M=g(C.referencedRule,C.idx)+this.topProd.name,L=E.concat(T),F=new v.Alternative({definition:L}),N=(0,d.first)(F);this.follows[M]=N},S}(f.RestWalker);s.ResyncFollowsWalker=y;function m(b){var S={};return(0,h.default)(b,function(C){var E=new y(C).startWalking();(0,_.default)(S,E)}),S}s.computeAllProdsFollows=m;function g(b,S){return b.name+S+p.IN}s.buildBetweenProdsFollowPrefix=g;function x(b){var S=b.terminalType.name;return S+b.idx+p.IN}s.buildInProdFollowPrefix=x},1665:function(o,s,l){var u=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(s,"__esModule",{value:!0}),s.validateGrammar=s.resolveGrammar=void 0;var c=u(l(7734)),f=u(l(3821)),d=l(6304),h=l(3870),_=l(1007);function p(y){var m=(0,f.default)(y,{errMsgProvider:_.defaultGrammarResolverErrorProvider}),g={};return(0,c.default)(y.rules,function(x){g[x.name]=x}),(0,d.resolveGrammar)(g,m.errMsgProvider)}s.resolveGrammar=p;function v(y){return y=(0,f.default)(y,{errMsgProvider:_.defaultGrammarValidatorErrorProvider}),(0,h.validateGrammar)(y.rules,y.tokenTypes,y.errMsgProvider,y.grammarName)}s.validateGrammar=v},9985:function(o,s,l){var u=this&&this.__extends||function(){var O=function(P,R){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,D){A.__proto__=D}||function(A,D){for(var B in D)Object.prototype.hasOwnProperty.call(D,B)&&(A[B]=D[B])},O(P,R)};return function(P,R){if(typeof R!="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");O(P,R);function A(){this.constructor=P}P.prototype=R===null?Object.create(R):(A.prototype=R.prototype,new A)}}(),c=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(s,"__esModule",{value:!0}),s.nextPossibleTokensAfter=s.possiblePathsFrom=s.NextTerminalAfterAtLeastOneSepWalker=s.NextTerminalAfterAtLeastOneWalker=s.NextTerminalAfterManySepWalker=s.NextTerminalAfterManyWalker=s.AbstractNextTerminalAfterProductionWalker=s.NextAfterTokenWalker=s.AbstractNextPossibleTokensWalker=void 0;var f=l(8567),d=c(l(8936)),h=c(l(9787)),_=c(l(682)),p=c(l(9239)),v=c(l(7875)),y=c(l(7734)),m=c(l(7953)),g=l(8052),x=l(7729),b=function(O){u(P,O);function P(R,A){var D=O.call(this)||this;return D.topProd=R,D.path=A,D.possibleTokTypes=[],D.nextProductionName="",D.nextProductionOccurrence=0,D.found=!1,D.isAtEndOfPath=!1,D}return P.prototype.startWalking=function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=(0,m.default)(this.path.ruleStack).reverse(),this.occurrenceStack=(0,m.default)(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes},P.prototype.walk=function(R,A){A===void 0&&(A=[]),this.found||O.prototype.walk.call(this,R,A)},P.prototype.walkProdRef=function(R,A,D){if(R.referencedRule.name===this.nextProductionName&&R.idx===this.nextProductionOccurrence){var B=A.concat(D);this.updateExpectedNext(),this.walk(R.referencedRule,B)}},P.prototype.updateExpectedNext=function(){(0,h.default)(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())},P}(f.RestWalker);s.AbstractNextPossibleTokensWalker=b;var S=function(O){u(P,O);function P(R,A){var D=O.call(this,R,A)||this;return D.path=A,D.nextTerminalName="",D.nextTerminalOccurrence=0,D.nextTerminalName=D.path.lastTok.name,D.nextTerminalOccurrence=D.path.lastTokOccurrence,D}return P.prototype.walkTerminal=function(R,A,D){if(this.isAtEndOfPath&&R.terminalType.name===this.nextTerminalName&&R.idx===this.nextTerminalOccurrence&&!this.found){var B=A.concat(D),k=new x.Alternative({definition:B});this.possibleTokTypes=(0,g.first)(k),this.found=!0}},P}(b);s.NextAfterTokenWalker=S;var C=function(O){u(P,O);function P(R,A){var D=O.call(this)||this;return D.topRule=R,D.occurrence=A,D.result={token:void 0,occurrence:void 0,isEndOfRule:void 0},D}return P.prototype.startWalking=function(){return this.walk(this.topRule),this.result},P}(f.RestWalker);s.AbstractNextTerminalAfterProductionWalker=C;var E=function(O){u(P,O);function P(){return O!==null&&O.apply(this,arguments)||this}return P.prototype.walkMany=function(R,A,D){if(R.idx===this.occurrence){var B=(0,d.default)(A.concat(D));this.result.isEndOfRule=B===void 0,B instanceof x.Terminal&&(this.result.token=B.terminalType,this.result.occurrence=B.idx)}else O.prototype.walkMany.call(this,R,A,D)},P}(C);s.NextTerminalAfterManyWalker=E;var T=function(O){u(P,O);function P(){return O!==null&&O.apply(this,arguments)||this}return P.prototype.walkManySep=function(R,A,D){if(R.idx===this.occurrence){var B=(0,d.default)(A.concat(D));this.result.isEndOfRule=B===void 0,B instanceof x.Terminal&&(this.result.token=B.terminalType,this.result.occurrence=B.idx)}else O.prototype.walkManySep.call(this,R,A,D)},P}(C);s.NextTerminalAfterManySepWalker=T;var M=function(O){u(P,O);function P(){return O!==null&&O.apply(this,arguments)||this}return P.prototype.walkAtLeastOne=function(R,A,D){if(R.idx===this.occurrence){var B=(0,d.default)(A.concat(D));this.result.isEndOfRule=B===void 0,B instanceof x.Terminal&&(this.result.token=B.terminalType,this.result.occurrence=B.idx)}else O.prototype.walkAtLeastOne.call(this,R,A,D)},P}(C);s.NextTerminalAfterAtLeastOneWalker=M;var L=function(O){u(P,O);function P(){return O!==null&&O.apply(this,arguments)||this}return P.prototype.walkAtLeastOneSep=function(R,A,D){if(R.idx===this.occurrence){var B=(0,d.default)(A.concat(D));this.result.isEndOfRule=B===void 0,B instanceof x.Terminal&&(this.result.token=B.terminalType,this.result.occurrence=B.idx)}else O.prototype.walkAtLeastOneSep.call(this,R,A,D)},P}(C);s.NextTerminalAfterAtLeastOneSepWalker=L;function F(O,P,R){R===void 0&&(R=[]),R=(0,m.default)(R);var A=[],D=0;function B(j){return j.concat((0,p.default)(O,D+1))}function k(j){var G=F(B(j),P,R);return A.concat(G)}for(;R.length<P&&D<O.length;){var V=O[D];if(V instanceof x.Alternative)return k(V.definition);if(V instanceof x.NonTerminal)return k(V.definition);if(V instanceof x.Option)A=k(V.definition);else if(V instanceof x.RepetitionMandatory){var U=V.definition.concat([new x.Repetition({definition:V.definition})]);return k(U)}else if(V instanceof x.RepetitionMandatoryWithSeparator){var U=[new x.Alternative({definition:V.definition}),new x.Repetition({definition:[new x.Terminal({terminalType:V.separator})].concat(V.definition)})];return k(U)}else if(V instanceof x.RepetitionWithSeparator){var U=V.definition.concat([new x.Repetition({definition:[new x.Terminal({terminalType:V.separator})].concat(V.definition)})]);A=k(U)}else if(V instanceof x.Repetition){var U=V.definition.concat([new x.Repetition({definition:V.definition})]);A=k(U)}else{if(V instanceof x.Alternation)return(0,y.default)(V.definition,function(j){(0,h.default)(j.definition)===!1&&(A=k(j.definition))}),A;if(V instanceof x.Terminal)R.push(V.terminalType);else throw Error("non exhaustive match")}D++}return A.push({partialPath:R,suffixDef:(0,p.default)(O,D)}),A}s.possiblePathsFrom=F;function N(O,P,R,A){var D="EXIT_NONE_TERMINAL",B=[D],k="EXIT_ALTERNATIVE",V=!1,U=P.length,j=U-A-1,G=[],$=[];for($.push({idx:-1,def:O,ruleStack:[],occurrenceStack:[]});!(0,h.default)($);){var W=$.pop();if(W===k){V&&(0,v.default)($).idx<=j&&$.pop();continue}var K=W.def,q=W.idx,Y=W.ruleStack,Q=W.occurrenceStack;if(!(0,h.default)(K)){var re=K[0];if(re===D){var ue={idx:q,def:(0,p.default)(K),ruleStack:(0,_.default)(Y),occurrenceStack:(0,_.default)(Q)};$.push(ue)}else if(re instanceof x.Terminal)if(q<U-1){var oe=q+1,ee=P[oe];if(R(ee,re.terminalType)){var ue={idx:oe,def:(0,p.default)(K),ruleStack:Y,occurrenceStack:Q};$.push(ue)}}else if(q===U-1)G.push({nextTokenType:re.terminalType,nextTokenOccurrence:re.idx,ruleStack:Y,occurrenceStack:Q}),V=!0;else throw Error("non exhaustive match");else if(re instanceof x.NonTerminal){var xe=(0,m.default)(Y);xe.push(re.nonTerminalName);var Te=(0,m.default)(Q);Te.push(re.idx);var ue={idx:q,def:re.definition.concat(B,(0,p.default)(K)),ruleStack:xe,occurrenceStack:Te};$.push(ue)}else if(re instanceof x.Option){var Ce={idx:q,def:(0,p.default)(K),ruleStack:Y,occurrenceStack:Q};$.push(Ce),$.push(k);var pe={idx:q,def:re.definition.concat((0,p.default)(K)),ruleStack:Y,occurrenceStack:Q};$.push(pe)}else if(re instanceof x.RepetitionMandatory){var J=new x.Repetition({definition:re.definition,idx:re.idx}),ae=re.definition.concat([J],(0,p.default)(K)),ue={idx:q,def:ae,ruleStack:Y,occurrenceStack:Q};$.push(ue)}else if(re instanceof x.RepetitionMandatoryWithSeparator){var ne=new x.Terminal({terminalType:re.separator}),J=new x.Repetition({definition:[ne].concat(re.definition),idx:re.idx}),ae=re.definition.concat([J],(0,p.default)(K)),ue={idx:q,def:ae,ruleStack:Y,occurrenceStack:Q};$.push(ue)}else if(re instanceof x.RepetitionWithSeparator){var Ce={idx:q,def:(0,p.default)(K),ruleStack:Y,occurrenceStack:Q};$.push(Ce),$.push(k);var ne=new x.Terminal({terminalType:re.separator}),ge=new x.Repetition({definition:[ne].concat(re.definition),idx:re.idx}),ae=re.definition.concat([ge],(0,p.default)(K)),pe={idx:q,def:ae,ruleStack:Y,occurrenceStack:Q};$.push(pe)}else if(re instanceof x.Repetition){var Ce={idx:q,def:(0,p.default)(K),ruleStack:Y,occurrenceStack:Q};$.push(Ce),$.push(k);var ge=new x.Repetition({definition:re.definition,idx:re.idx}),ae=re.definition.concat([ge],(0,p.default)(K)),pe={idx:q,def:ae,ruleStack:Y,occurrenceStack:Q};$.push(pe)}else if(re instanceof x.Alternation)for(var se=re.definition.length-1;se>=0;se--){var Re=re.definition[se],de={idx:q,def:Re.definition.concat((0,p.default)(K)),ruleStack:Y,occurrenceStack:Q};$.push(de),$.push(k)}else if(re instanceof x.Alternative)$.push({idx:q,def:re.definition.concat((0,p.default)(K)),ruleStack:Y,occurrenceStack:Q});else if(re instanceof x.Rule)$.push(I(re,q,Y,Q));else throw Error("non exhaustive match")}}return G}s.nextPossibleTokensAfter=N;function I(O,P,R,A){var D=(0,m.default)(R);D.push(O.name);var B=(0,m.default)(A);return B.push(1),{idx:P,def:O.definition,ruleStack:D,occurrenceStack:B}}},8209:(o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getKeyForAutomaticLookahead=s.AT_LEAST_ONE_SEP_IDX=s.MANY_SEP_IDX=s.AT_LEAST_ONE_IDX=s.MANY_IDX=s.OPTION_IDX=s.OR_IDX=s.BITS_FOR_ALT_IDX=s.BITS_FOR_RULE_IDX=s.BITS_FOR_OCCURRENCE_IDX=s.BITS_FOR_METHOD_TYPE=void 0,s.BITS_FOR_METHOD_TYPE=4,s.BITS_FOR_OCCURRENCE_IDX=8,s.BITS_FOR_RULE_IDX=12,s.BITS_FOR_ALT_IDX=8,s.OR_IDX=1<<s.BITS_FOR_OCCURRENCE_IDX,s.OPTION_IDX=2<<s.BITS_FOR_OCCURRENCE_IDX,s.MANY_IDX=3<<s.BITS_FOR_OCCURRENCE_IDX,s.AT_LEAST_ONE_IDX=4<<s.BITS_FOR_OCCURRENCE_IDX,s.MANY_SEP_IDX=5<<s.BITS_FOR_OCCURRENCE_IDX,s.AT_LEAST_ONE_SEP_IDX=6<<s.BITS_FOR_OCCURRENCE_IDX;function l(u,c,f){return f|c|u}s.getKeyForAutomaticLookahead=l,32-s.BITS_FOR_ALT_IDX},7042:function(o,s,l){var u=this&&this.__spreadArray||function(m,g,x){if(x||arguments.length===2)for(var b=0,S=g.length,C;b<S;b++)(C||!(b in g))&&(C||(C=Array.prototype.slice.call(g,0,b)),C[b]=g[b]);return m.concat(C||Array.prototype.slice.call(g))},c=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(s,"__esModule",{value:!0}),s.LLkLookaheadStrategy=void 0;var f=c(l(9875)),d=c(l(9787)),h=l(1007),_=l(2941),p=l(3870),v=l(4677),y=function(){function m(g){var x;this.maxLookahead=(x=g==null?void 0:g.maxLookahead)!==null&&x!==void 0?x:_.DEFAULT_PARSER_CONFIG.maxLookahead}return m.prototype.validate=function(g){var x=this.validateNoLeftRecursion(g.rules);if((0,d.default)(x)){var b=this.validateEmptyOrAlternatives(g.rules),S=this.validateAmbiguousAlternationAlternatives(g.rules,this.maxLookahead),C=this.validateSomeNonEmptyLookaheadPath(g.rules,this.maxLookahead),E=u(u(u(u([],x,!0),b,!0),S,!0),C,!0);return E}return x},m.prototype.validateNoLeftRecursion=function(g){return(0,f.default)(g,function(x){return(0,p.validateNoLeftRecursion)(x,x,h.defaultGrammarValidatorErrorProvider)})},m.prototype.validateEmptyOrAlternatives=function(g){return(0,f.default)(g,function(x){return(0,p.validateEmptyOrAlternative)(x,h.defaultGrammarValidatorErrorProvider)})},m.prototype.validateAmbiguousAlternationAlternatives=function(g,x){return(0,f.default)(g,function(b){return(0,p.validateAmbiguousAlternationAlternatives)(b,x,h.defaultGrammarValidatorErrorProvider)})},m.prototype.validateSomeNonEmptyLookaheadPath=function(g,x){return(0,p.validateSomeNonEmptyLookaheadPath)(g,x,h.defaultGrammarValidatorErrorProvider)},m.prototype.buildLookaheadForAlternation=function(g){return(0,v.buildLookaheadFuncForOr)(g.prodOccurrence,g.rule,g.maxLookahead,g.hasPredicates,g.dynamicTokensEnabled,v.buildAlternativesLookAheadFunc)},m.prototype.buildLookaheadForOptional=function(g){return(0,v.buildLookaheadFuncForOptionalProd)(g.prodOccurrence,g.rule,g.maxLookahead,g.dynamicTokensEnabled,(0,v.getProdType)(g.prodType),v.buildSingleAlternativeLookaheadFunction)},m}();s.LLkLookaheadStrategy=y},4677:function(o,s,l){var u=this&&this.__extends||function(){var G=function($,W){return G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,q){K.__proto__=q}||function(K,q){for(var Y in q)Object.prototype.hasOwnProperty.call(q,Y)&&(K[Y]=q[Y])},G($,W)};return function($,W){if(typeof W!="function"&&W!==null)throw new TypeError("Class extends value "+String(W)+" is not a constructor or null");G($,W);function K(){this.constructor=$}$.prototype=W===null?Object.create(W):(K.prototype=W.prototype,new K)}}(),c=this&&this.__importDefault||function(G){return G&&G.__esModule?G:{default:G}};Object.defineProperty(s,"__esModule",{value:!0}),s.areTokenCategoriesNotUsed=s.isStrictPrefixOfPath=s.containsPath=s.getLookaheadPathsForOptionalProd=s.getLookaheadPathsForOr=s.lookAheadSequenceFromAlternatives=s.buildSingleAlternativeLookaheadFunction=s.buildAlternativesLookAheadFunc=s.buildLookaheadFuncForOptionalProd=s.buildLookaheadFuncForOr=s.getLookaheadPaths=s.getProdType=s.PROD_TYPE=void 0;var f=c(l(9787)),d=c(l(2923)),h=c(l(1198)),_=c(l(9107)),p=c(l(7734)),v=c(l(5346)),y=c(l(7682)),m=l(9985),g=l(8567),x=l(1201),b=l(7729),S=l(7729),C;(function(G){G[G.OPTION=0]="OPTION",G[G.REPETITION=1]="REPETITION",G[G.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",G[G.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",G[G.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",G[G.ALTERNATION=5]="ALTERNATION"})(C=s.PROD_TYPE||(s.PROD_TYPE={}));function E(G){if(G instanceof b.Option||G==="Option")return C.OPTION;if(G instanceof b.Repetition||G==="Repetition")return C.REPETITION;if(G instanceof b.RepetitionMandatory||G==="RepetitionMandatory")return C.REPETITION_MANDATORY;if(G instanceof b.RepetitionMandatoryWithSeparator||G==="RepetitionMandatoryWithSeparator")return C.REPETITION_MANDATORY_WITH_SEPARATOR;if(G instanceof b.RepetitionWithSeparator||G==="RepetitionWithSeparator")return C.REPETITION_WITH_SEPARATOR;if(G instanceof b.Alternation||G==="Alternation")return C.ALTERNATION;throw Error("non exhaustive match")}s.getProdType=E;function T(G){var $=G.occurrence,W=G.rule,K=G.prodType,q=G.maxLookahead,Y=E(K);return Y===C.ALTERNATION?B($,W,q):k($,W,Y,q)}s.getLookaheadPaths=T;function M(G,$,W,K,q,Y){var Q=B(G,$,W),re=j(Q)?x.tokenStructuredMatcherNoCategories:x.tokenStructuredMatcher;return Y(Q,K,re,q)}s.buildLookaheadFuncForOr=M;function L(G,$,W,K,q,Y){var Q=k(G,$,q,W),re=j(Q)?x.tokenStructuredMatcherNoCategories:x.tokenStructuredMatcher;return Y(Q[0],re,K)}s.buildLookaheadFuncForOptionalProd=L;function F(G,$,W,K){var q=G.length,Y=(0,h.default)(G,function(ue){return(0,h.default)(ue,function(oe){return oe.length===1})});if($)return function(ue){for(var oe=(0,_.default)(ue,function(se){return se.GATE}),ee=0;ee<q;ee++){var xe=G[ee],Te=xe.length,Ce=oe[ee];if(Ce!==void 0&&Ce.call(this)===!1)continue;e:for(var pe=0;pe<Te;pe++){for(var J=xe[pe],ae=J.length,ne=0;ne<ae;ne++){var ge=this.LA(ne+1);if(W(ge,J[ne])===!1)continue e}return ee}}};if(Y&&!K){var Q=(0,_.default)(G,function(ue){return(0,d.default)(ue)}),re=(0,y.default)(Q,function(ue,oe,ee){return(0,p.default)(oe,function(xe){(0,v.default)(ue,xe.tokenTypeIdx)||(ue[xe.tokenTypeIdx]=ee),(0,p.default)(xe.categoryMatches,function(Te){(0,v.default)(ue,Te)||(ue[Te]=ee)})}),ue},{});return function(){var ue=this.LA(1);return re[ue.tokenTypeIdx]}}else return function(){for(var ue=0;ue<q;ue++){var oe=G[ue],ee=oe.length;e:for(var xe=0;xe<ee;xe++){for(var Te=oe[xe],Ce=Te.length,pe=0;pe<Ce;pe++){var J=this.LA(pe+1);if(W(J,Te[pe])===!1)continue e}return ue}}}}s.buildAlternativesLookAheadFunc=F;function N(G,$,W){var K=(0,h.default)(G,function(oe){return oe.length===1}),q=G.length;if(K&&!W){var Y=(0,d.default)(G);if(Y.length===1&&(0,f.default)(Y[0].categoryMatches)){var Q=Y[0],re=Q.tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===re}}else{var ue=(0,y.default)(Y,function(oe,ee,xe){return oe[ee.tokenTypeIdx]=!0,(0,p.default)(ee.categoryMatches,function(Te){oe[Te]=!0}),oe},[]);return function(){var oe=this.LA(1);return ue[oe.tokenTypeIdx]===!0}}}else return function(){e:for(var oe=0;oe<q;oe++){for(var ee=G[oe],xe=ee.length,Te=0;Te<xe;Te++){var Ce=this.LA(Te+1);if($(Ce,ee[Te])===!1)continue e}return!0}return!1}}s.buildSingleAlternativeLookaheadFunction=N;var I=function(G){u($,G);function $(W,K,q){var Y=G.call(this)||this;return Y.topProd=W,Y.targetOccurrence=K,Y.targetProdType=q,Y}return $.prototype.startWalking=function(){return this.walk(this.topProd),this.restDef},$.prototype.checkIsTarget=function(W,K,q,Y){return W.idx===this.targetOccurrence&&this.targetProdType===K?(this.restDef=q.concat(Y),!0):!1},$.prototype.walkOption=function(W,K,q){this.checkIsTarget(W,C.OPTION,K,q)||G.prototype.walkOption.call(this,W,K,q)},$.prototype.walkAtLeastOne=function(W,K,q){this.checkIsTarget(W,C.REPETITION_MANDATORY,K,q)||G.prototype.walkOption.call(this,W,K,q)},$.prototype.walkAtLeastOneSep=function(W,K,q){this.checkIsTarget(W,C.REPETITION_MANDATORY_WITH_SEPARATOR,K,q)||G.prototype.walkOption.call(this,W,K,q)},$.prototype.walkMany=function(W,K,q){this.checkIsTarget(W,C.REPETITION,K,q)||G.prototype.walkOption.call(this,W,K,q)},$.prototype.walkManySep=function(W,K,q){this.checkIsTarget(W,C.REPETITION_WITH_SEPARATOR,K,q)||G.prototype.walkOption.call(this,W,K,q)},$}(g.RestWalker),O=function(G){u($,G);function $(W,K,q){var Y=G.call(this)||this;return Y.targetOccurrence=W,Y.targetProdType=K,Y.targetRef=q,Y.result=[],Y}return $.prototype.checkIsTarget=function(W,K){W.idx===this.targetOccurrence&&this.targetProdType===K&&(this.targetRef===void 0||W===this.targetRef)&&(this.result=W.definition)},$.prototype.visitOption=function(W){this.checkIsTarget(W,C.OPTION)},$.prototype.visitRepetition=function(W){this.checkIsTarget(W,C.REPETITION)},$.prototype.visitRepetitionMandatory=function(W){this.checkIsTarget(W,C.REPETITION_MANDATORY)},$.prototype.visitRepetitionMandatoryWithSeparator=function(W){this.checkIsTarget(W,C.REPETITION_MANDATORY_WITH_SEPARATOR)},$.prototype.visitRepetitionWithSeparator=function(W){this.checkIsTarget(W,C.REPETITION_WITH_SEPARATOR)},$.prototype.visitAlternation=function(W){this.checkIsTarget(W,C.ALTERNATION)},$}(S.GAstVisitor);function P(G){for(var $=new Array(G),W=0;W<G;W++)$[W]=[];return $}function R(G){for(var $=[""],W=0;W<G.length;W++){for(var K=G[W],q=[],Y=0;Y<$.length;Y++){var Q=$[Y];q.push(Q+"_"+K.tokenTypeIdx);for(var re=0;re<K.categoryMatches.length;re++){var ue="_"+K.categoryMatches[re];q.push(Q+ue)}}$=q}return $}function A(G,$,W){for(var K=0;K<G.length;K++)if(K!==W)for(var q=G[K],Y=0;Y<$.length;Y++){var Q=$[Y];if(q[Q]===!0)return!1}return!0}function D(G,$){for(var W=(0,_.default)(G,function(ee){return(0,m.possiblePathsFrom)([ee],1)}),K=P(W.length),q=(0,_.default)(W,function(ee){var xe={};return(0,p.default)(ee,function(Te){var Ce=R(Te.partialPath);(0,p.default)(Ce,function(pe){xe[pe]=!0})}),xe}),Y=W,Q=1;Q<=$;Q++){var re=Y;Y=P(re.length);for(var ue=function(ee){for(var xe=re[ee],Te=0;Te<xe.length;Te++){var Ce=xe[Te].partialPath,pe=xe[Te].suffixDef,J=R(Ce),ae=A(q,J,ee);if(ae||(0,f.default)(pe)||Ce.length===$){var ne=K[ee];if(V(ne,Ce)===!1){ne.push(Ce);for(var ge=0;ge<J.length;ge++){var se=J[ge];q[ee][se]=!0}}}else{var Re=(0,m.possiblePathsFrom)(pe,Q+1,Ce);Y[ee]=Y[ee].concat(Re),(0,p.default)(Re,function(de){var Pe=R(de.partialPath);(0,p.default)(Pe,function(De){q[ee][De]=!0})})}}},oe=0;oe<re.length;oe++)ue(oe)}return K}s.lookAheadSequenceFromAlternatives=D;function B(G,$,W,K){var q=new O(G,C.ALTERNATION,K);return $.accept(q),D(q.result,W)}s.getLookaheadPathsForOr=B;function k(G,$,W,K){var q=new O(G,W);$.accept(q);var Y=q.result,Q=new I($,G,W),re=Q.startWalking(),ue=new b.Alternative({definition:Y}),oe=new b.Alternative({definition:re});return D([ue,oe],K)}s.getLookaheadPathsForOptionalProd=k;function V(G,$){e:for(var W=0;W<G.length;W++){var K=G[W];if(K.length===$.length){for(var q=0;q<K.length;q++){var Y=$[q],Q=K[q],re=Y===Q||Q.categoryMatchesMap[Y.tokenTypeIdx]!==void 0;if(re===!1)continue e}return!0}}return!1}s.containsPath=V;function U(G,$){return G.length<$.length&&(0,h.default)(G,function(W,K){var q=$[K];return W===q||q.categoryMatchesMap[W.tokenTypeIdx]})}s.isStrictPrefixOfPath=U;function j(G){return(0,h.default)(G,function($){return(0,h.default)($,function(W){return(0,h.default)(W,function(K){return(0,f.default)(K.categoryMatches)})})})}s.areTokenCategoriesNotUsed=j},6304:function(o,s,l){var u=this&&this.__extends||function(){var y=function(m,g){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,b){x.__proto__=b}||function(x,b){for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&(x[S]=b[S])},y(m,g)};return function(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");y(m,g);function x(){this.constructor=m}m.prototype=g===null?Object.create(g):(x.prototype=g.prototype,new x)}}(),c=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(s,"__esModule",{value:!0}),s.GastRefResolverVisitor=s.resolveGrammar=void 0;var f=l(2941),d=c(l(7734)),h=c(l(1682)),_=l(7729);function p(y,m){var g=new v(y,m);return g.resolveRefs(),g.errors}s.resolveGrammar=p;var v=function(y){u(m,y);function m(g,x){var b=y.call(this)||this;return b.nameToTopRule=g,b.errMsgProvider=x,b.errors=[],b}return m.prototype.resolveRefs=function(){var g=this;(0,d.default)((0,h.default)(this.nameToTopRule),function(x){g.currTopLevel=x,x.accept(g)})},m.prototype.visitNonTerminal=function(g){var x=this.nameToTopRule[g.nonTerminalName];if(x)g.referencedRule=x;else{var b=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,g);this.errors.push({message:b,type:f.ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:g.nonTerminalName})}},m}(_.GAstVisitor);s.GastRefResolverVisitor=v},8567:function(o,s,l){var u=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(s,"__esModule",{value:!0}),s.RestWalker=void 0;var c=u(l(9239)),f=u(l(7734)),d=l(7729),h=function(){function p(){}return p.prototype.walk=function(v,y){var m=this;y===void 0&&(y=[]),(0,f.default)(v.definition,function(g,x){var b=(0,c.default)(v.definition,x+1);if(g instanceof d.NonTerminal)m.walkProdRef(g,b,y);else if(g instanceof d.Terminal)m.walkTerminal(g,b,y);else if(g instanceof d.Alternative)m.walkFlat(g,b,y);else if(g instanceof d.Option)m.walkOption(g,b,y);else if(g instanceof d.RepetitionMandatory)m.walkAtLeastOne(g,b,y);else if(g instanceof d.RepetitionMandatoryWithSeparator)m.walkAtLeastOneSep(g,b,y);else if(g instanceof d.RepetitionWithSeparator)m.walkManySep(g,b,y);else if(g instanceof d.Repetition)m.walkMany(g,b,y);else if(g instanceof d.Alternation)m.walkOr(g,b,y);else throw Error("non exhaustive match")})},p.prototype.walkTerminal=function(v,y,m){},p.prototype.walkProdRef=function(v,y,m){},p.prototype.walkFlat=function(v,y,m){var g=y.concat(m);this.walk(v,g)},p.prototype.walkOption=function(v,y,m){var g=y.concat(m);this.walk(v,g)},p.prototype.walkAtLeastOne=function(v,y,m){var g=[new d.Option({definition:v.definition})].concat(y,m);this.walk(v,g)},p.prototype.walkAtLeastOneSep=function(v,y,m){var g=_(v,y,m);this.walk(v,g)},p.prototype.walkMany=function(v,y,m){var g=[new d.Option({definition:v.definition})].concat(y,m);this.walk(v,g)},p.prototype.walkManySep=function(v,y,m){var g=_(v,y,m);this.walk(v,g)},p.prototype.walkOr=function(v,y,m){var g=this,x=y.concat(m);(0,f.default)(v.definition,function(b){var S=new d.Alternative({definition:[b]});g.walk(S,x)})},p}();s.RestWalker=h;function _(p,v,y){var m=[new d.Option({definition:[new d.Terminal({terminalType:p.separator})].concat(p.definition)})],g=m.concat(v,y);return g}},2941:function(o,s,l){var u=this&&this.__extends||function(){var V=function(U,j){return V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,$){G.__proto__=$}||function(G,$){for(var W in $)Object.prototype.hasOwnProperty.call($,W)&&(G[W]=$[W])},V(U,j)};return function(U,j){if(typeof j!="function"&&j!==null)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");V(U,j);function G(){this.constructor=U}U.prototype=j===null?Object.create(j):(G.prototype=j.prototype,new G)}}(),c=this&&this.__importDefault||function(V){return V&&V.__esModule?V:{default:V}};Object.defineProperty(s,"__esModule",{value:!0}),s.EmbeddedActionsParser=s.CstParser=s.Parser=s.EMPTY_ALT=s.ParserDefinitionErrorType=s.DEFAULT_RULE_CONFIG=s.DEFAULT_PARSER_CONFIG=s.END_OF_FILE=void 0;var f=c(l(9787)),d=c(l(9107)),h=c(l(7734)),_=c(l(1682)),p=c(l(5346)),v=c(l(7953)),y=l(7146),m=l(4917),g=l(6736),x=l(1007),b=l(1665),S=l(9992),C=l(161),E=l(3225),T=l(598),M=l(8503),L=l(3273),F=l(9464),N=l(1625),I=l(6688),O=l(146),P=l(4803),R=l(3870);s.END_OF_FILE=(0,g.createTokenInstance)(g.EOF,"",NaN,NaN,NaN,NaN,NaN,NaN),Object.freeze(s.END_OF_FILE),s.DEFAULT_PARSER_CONFIG=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:x.defaultParserErrorProvider,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),s.DEFAULT_RULE_CONFIG=Object.freeze({recoveryValueFunc:function(){},resyncEnabled:!0}),function(V){V[V.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",V[V.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",V[V.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",V[V.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",V[V.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",V[V.LEFT_RECURSION=5]="LEFT_RECURSION",V[V.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",V[V.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",V[V.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",V[V.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",V[V.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",V[V.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",V[V.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",V[V.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"}(s.ParserDefinitionErrorType||(s.ParserDefinitionErrorType={}));function A(V){return V===void 0&&(V=void 0),function(){return V}}s.EMPTY_ALT=A;var D=function(){function V(U,j){this.definitionErrors=[],this.selfAnalysisDone=!1;var G=this;if(G.initErrorHandler(j),G.initLexerAdapter(),G.initLooksAhead(j),G.initRecognizerEngine(U,j),G.initRecoverable(j),G.initTreeBuilder(j),G.initContentAssist(),G.initGastRecorder(j),G.initPerformanceTracer(j),(0,p.default)(j,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https:///Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=(0,p.default)(j,"skipValidations")?j.skipValidations:s.DEFAULT_PARSER_CONFIG.skipValidations}return V.performSelfAnalysis=function(U){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")},V.prototype.performSelfAnalysis=function(){var U=this;this.TRACE_INIT("performSelfAnalysis",function(){var j;U.selfAnalysisDone=!0;var G=U.className;U.TRACE_INIT("toFastProps",function(){(0,y.toFastProperties)(U)}),U.TRACE_INIT("Grammar Recording",function(){try{U.enableRecording(),(0,h.default)(U.definedRulesNames,function(W){var K=U[W],q=K.originalGrammarAction,Y;U.TRACE_INIT("".concat(W," Rule"),function(){Y=U.topLevelRuleRecord(W,q)}),U.gastProductionsCache[W]=Y})}finally{U.disableRecording()}});var $=[];if(U.TRACE_INIT("Grammar Resolving",function(){$=(0,b.resolveGrammar)({rules:(0,_.default)(U.gastProductionsCache)}),U.definitionErrors=U.definitionErrors.concat($)}),U.TRACE_INIT("Grammar Validations",function(){if((0,f.default)($)&&U.skipValidations===!1){var W=(0,b.validateGrammar)({rules:(0,_.default)(U.gastProductionsCache),tokenTypes:(0,_.default)(U.tokensMap),errMsgProvider:x.defaultGrammarValidatorErrorProvider,grammarName:G}),K=(0,R.validateLookahead)({lookaheadStrategy:U.lookaheadStrategy,rules:(0,_.default)(U.gastProductionsCache),tokenTypes:(0,_.default)(U.tokensMap),grammarName:G});U.definitionErrors=U.definitionErrors.concat(W,K)}}),(0,f.default)(U.definitionErrors)&&(U.recoveryEnabled&&U.TRACE_INIT("computeAllProdsFollows",function(){var W=(0,m.computeAllProdsFollows)((0,_.default)(U.gastProductionsCache));U.resyncFollows=W}),U.TRACE_INIT("ComputeLookaheadFunctions",function(){var W,K;(K=(W=U.lookaheadStrategy).initialize)===null||K===void 0||K.call(W,{rules:(0,_.default)(U.gastProductionsCache)}),U.preComputeLookaheadFunctions((0,_.default)(U.gastProductionsCache))})),!V.DEFER_DEFINITION_ERRORS_HANDLING&&!(0,f.default)(U.definitionErrors))throw j=(0,d.default)(U.definitionErrors,function(W){return W.message}),new Error(`Parser Definition Errors detected:
 `.concat(j.join(`
-------------------------------
`)))})},V.DEFER_DEFINITION_ERRORS_HANDLING=!1,V}();s.Parser=D,(0,P.applyMixins)(D,[S.Recoverable,C.LooksAhead,E.TreeBuilder,T.LexerAdapter,L.RecognizerEngine,M.RecognizerApi,F.ErrorHandler,N.ContentAssist,I.GastRecorder,O.PerformanceTracer]);var B=function(V){u(U,V);function U(j,G){G===void 0&&(G=s.DEFAULT_PARSER_CONFIG);var $=(0,v.default)(G);return $.outputCst=!0,V.call(this,j,$)||this}return U}(D);s.CstParser=B;var k=function(V){u(U,V);function U(j,G){G===void 0&&(G=s.DEFAULT_PARSER_CONFIG);var $=(0,v.default)(G);return $.outputCst=!1,V.call(this,j,$)||this}return U}(D);s.EmbeddedActionsParser=k},1625:function(o,s,l){var u=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(s,"__esModule",{value:!0}),s.ContentAssist=void 0;var c=l(9985),f=u(l(8936)),d=u(l(6474)),h=function(){function _(){}return _.prototype.initContentAssist=function(){},_.prototype.computeContentAssist=function(p,v){var y=this.gastProductionsCache[p];if((0,d.default)(y))throw Error("Rule ->".concat(p,"<- does not exist in this grammar."));return(0,c.nextPossibleTokensAfter)([y],v,this.tokenMatcher,this.maxLookahead)},_.prototype.getNextPossibleTokenTypes=function(p){var v=(0,f.default)(p.ruleStack),y=this.getGAstProductions(),m=y[v],g=new c.NextAfterTokenWalker(m,p).startWalking();return g},_}();s.ContentAssist=h},9464:function(o,s,l){var u=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(s,"__esModule",{value:!0}),s.ErrorHandler=void 0;var c=l(643),f=u(l(5346)),d=u(l(7953)),h=l(4677),_=l(2941),p=function(){function v(){}return v.prototype.initErrorHandler=function(y){this._errors=[],this.errorMessageProvider=(0,f.default)(y,"errorMessageProvider")?y.errorMessageProvider:_.DEFAULT_PARSER_CONFIG.errorMessageProvider},v.prototype.SAVE_ERROR=function(y){if((0,c.isRecognitionException)(y))return y.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:(0,d.default)(this.RULE_OCCURRENCE_STACK)},this._errors.push(y),y;throw Error("Trying to save an Error which is not a RecognitionException")},Object.defineProperty(v.prototype,"errors",{get:function(){return(0,d.default)(this._errors)},set:function(y){this._errors=y},enumerable:!1,configurable:!0}),v.prototype.raiseEarlyExitException=function(y,m,g){for(var x=this.getCurrRuleFullName(),b=this.getGAstProductions()[x],S=(0,h.getLookaheadPathsForOptionalProd)(y,b,m,this.maxLookahead),C=S[0],E=[],T=1;T<=this.maxLookahead;T++)E.push(this.LA(T));var M=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:C,actual:E,previous:this.LA(0),customUserDescription:g,ruleName:x});throw this.SAVE_ERROR(new c.EarlyExitException(M,this.LA(1),this.LA(0)))},v.prototype.raiseNoAltException=function(y,m){for(var g=this.getCurrRuleFullName(),x=this.getGAstProductions()[g],b=(0,h.getLookaheadPathsForOr)(y,x,this.maxLookahead),S=[],C=1;C<=this.maxLookahead;C++)S.push(this.LA(C));var E=this.LA(0),T=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:b,actual:S,previous:E,customUserDescription:m,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new c.NoViableAltException(T,this.LA(1),E))},v}();s.ErrorHandler=p},6688:function(o,s,l){var u=this&&this.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(s,"__esModule",{value:!0}),s.GastRecorder=void 0;var c=u(l(7875)),f=u(l(5589)),d=u(l(9040)),h=u(l(7734)),_=u(l(5563)),p=u(l(5346)),v=l(7729),y=l(9027),m=l(1201),g=l(6736),x=l(2941),b=l(8209),S={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(S);var C=!0,E=Math.pow(2,b.BITS_FOR_OCCURRENCE_IDX)-1,T=(0,g.createToken)({name:"RECORDING_PHASE_TOKEN",pattern:y.Lexer.NA});(0,m.augmentTokenTypes)([T]);var M=(0,g.createTokenInstance)(T,`This IToken indicates the Parser is in Recording Phase
	See: https:///Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(M);var L={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https:///Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js.io/docs/guide/internals.html#grammar-recording for details`,children:{}},F=function(){function R(){}return R.prototype.initGastRecorder=function(A){this.recordingProdStack=[],this.RECORDING_PHASE=!1},R.prototype.enableRecording=function(){var A=this;this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",function(){for(var D=function(k){var V=k>0?k:"";A["CONSUME".concat(V)]=function(U,j){return this.consumeInternalRecord(U,k,j)},A["SUBRULE".concat(V)]=function(U,j){return this.subruleInternalRecord(U,k,j)},A["OPTION".concat(V)]=function(U){return this.optionInternalRecord(U,k)},A["OR".concat(V)]=function(U){return this.orInternalRecord(U,k)},A["MANY".concat(V)]=function(U){this.manyInternalRecord(k,U)},A["MANY_SEP".concat(V)]=function(U){this.manySepFirstInternalRecord(k,U)},A["AT_LEAST_ONE".concat(V)]=function(U){this.atLeastOneInternalRecord(k,U)},A["AT_LEAST_ONE_SEP".concat(V)]=function(U){this.atLeastOneSepFirstInternalRecord(k,U)}},B=0;B<10;B++)D(B);A.consume=function(k,V,U){return this.consumeInternalRecord(V,k,U)},A.subrule=function(k,V,U){return this.subruleInternalRecord(V,k,U)},A.option=function(k,V){return this.optionInternalRecord(V,k)},A.or=function(k,V){return this.orInternalRecord(V,k)},A.many=function(k,V){this.manyInternalRecord(k,V)},A.atLeastOne=function(k,V){this.atLeastOneInternalRecord(k,V)},A.ACTION=A.ACTION_RECORD,A.BACKTRACK=A.BACKTRACK_RECORD,A.LA=A.LA_RECORD})},R.prototype.disableRecording=function(){var A=this;this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",function(){for(var D=A,B=0;B<10;B++){var k=B>0?B:"";delete D["CONSUME".concat(k)],delete D["SUBRULE".concat(k)],delete D["OPTION".concat(k)],delete D["OR".concat(k)],delete D["MANY".concat(k)],delete D["MANY_SEP".concat(k)],delete D["AT_LEAST_ONE".concat(k)],delete D["AT_LEAST_ONE_SEP".concat(k)]}delete D.consume,delete D.subrule,delete D.option,delete D.or,delete D.many,delete D.atLeastOne,delete D.ACTION,delete D.BACKTRACK,delete D.LA})},R.prototype.ACTION_RECORD=function(A){},R.prototype.BACKTRACK_RECORD=function(A,D){return function(){return!0}},R.prototype.LA_RECORD=function(A){return x.END_OF_FILE},R.prototype.topLevelRuleRecord=function(A,D){try{var B=new v.Rule({definition:[],name:A});return B.name=A,this.recordingProdStack.push(B),D.call(this),this.recordingProdStack.pop(),B}catch(k){if(k.KNOWN_RECORDER_ERROR!==!0)try{k.message=k.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https:///Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js.io/docs/guide/internals.html#grammar-recording`}catch{throw k}throw k}},R.prototype.optionInternalRecord=function(A,D){return N.call(this,v.Option,A,D)},R.prototype.atLeastOneInternalRecord=function(A,D){N.call(this,v.RepetitionMandatory,D,A)},R.prototype.atLeastOneSepFirstInternalRecord=function(A,D){N.call(this,v.RepetitionMandatoryWithSeparator,D,A,C)},R.prototype.manyInternalRecord=function(A,D){N.call(this,v.Repetition,D,A)},R.prototype.manySepFirstInternalRecord=function(A,D){N.call(this,v.RepetitionWithSeparator,D,A,C)},R.prototype.orInternalRecord=function(A,D){return I.call(this,A,D)},R.prototype.subruleInternalRecord=function(A,D,B){if(P(D),!A||(0,p.default)(A,"ruleName")===!1){var k=new Error("<SUBRULE".concat(O(D),"> argument is invalid")+" expecting a Parser method reference but got: <".concat(JSON.stringify(A),">")+`
 inside top level rule: <`.concat(this.recordingProdStack[0].name,">"));throw k.KNOWN_RECORDER_ERROR=!0,k}var V=(0,c.default)(this.recordingProdStack),U=A.ruleName,j=new v.NonTerminal({idx:D,nonTerminalName:U,label:B==null?void 0:B.LABEL,referencedRule:void 0});return V.definition.push(j),this.outputCst?L:S},R.prototype.consumeInternalRecord=function(A,D,B){if(P(D),!(0,m.hasShortKeyProperty)(A)){var k=new Error("<CONSUME".concat(O(D),"> argument is invalid")+" expecting a TokenType reference but got: <".concat(JSON.stringify(A),">")+`
 inside top level rule: <`.concat(this.recordingProdStack[0].name,">"));throw k.KNOWN_RECORDER_ERROR=!0,k}var V=(0,c.default)(this.recordingProdStack),U=new v.Terminal({idx:D,terminalType:A,label:B==null?void 0:B.LABEL});return V.definition.push(U),M},R}();s.GastRecorder=F;function N(R,A,D,B){B===void 0&&(B=!1),P(D);var k=(0,c.default)(this.recordingProdStack),V=(0,_.default)(A)?A:A.DEF,U=new R({definition:[],idx:D});return B&&(U.separator=A.SEP),(0,p.default)(A,"MAX_LOOKAHEAD")&&(U.maxLookahead=A.MAX_LOOKAHEAD),this.recordingProdStack.push(U),V.call(this),k.definition.push(U),this.recordingProdStack.pop(),S}function I(R,A){var D=this;P(A);var B=(0,c.default)(this.recordingProdStack),k=(0,f.default)(R)===!1,V=k===!1?R:R.DEF,U=new v.Alternation({definition:[],idx:A,ignoreAmbiguities:k&&R.IGNORE_AMBIGUITIES===!0});(0,p.default)(R,"MAX_LOOKAHEAD")&&(U.maxLookahead=R.MAX_LOOKAHEAD);var j=(0,d.default)(V,function(G){return(0,_.default)(G.GATE)});return U.hasPredicates=j,B.definition.push(U),(0,h.default)(V,function(G){var $=new v.Alternative({definition:[]});U.definition.push($),(0,p.default)(G,"IGNORE_AMBIGUITIES")?$.ignoreAmbiguities=G.IGNORE_AMBIGUITIES:(0,p.default)(G,"GATE")&&($.ignoreAmbiguities=!0),D.recordingProdStack.push($),G.ALT.call(D),D.recordingProdStack.pop()}),S}function O(R){return R===0?"":"".concat(R)}function P(R){if(R<0||R>E){var A=new Error("Invalid DSL Method idx value: <".concat(R,`>
	`)+"Idx value must be a none negative value smaller than ".concat(E+1));throw A.KNOWN_RECORDER_ERROR=!0,A}}},598:(o,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LexerAdapter=void 0;var u=l(2941),c=function(){function f(){}return f.prototype.initLexerAdapter=function(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1},Object.defineProperty(f.prototype,"input",{get:function(){return this.tokVector},set:function(d){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=d,this.tokVectorLength=d.length},enumerable:!1,configurable:!0}),f.prototype.SKIP_TOKEN=function(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):u.END_OF_FILE},f.prototype.LA=function(d){var h=this.currIdx+d;return h<0||this.tokVectorLength<=h?u.END_OF_FILE:this.tokVector[h]},f.prototype.consumeToken=function(){this.currIdx++},f.prototype.exportLexerState=function(){return this.currIdx},f.prototype.importLexerState=function(d){this.currIdx=d},f.prototype.resetLexerState=function(){this.currIdx=-1},f.prototype.moveToTerminatedState=function(){this.currIdx=this.tokVector.length-1},f.prototype.getLexerPosition=function(){return this.exportLexerState()},f}();s.LexerAdapter=c},161:function(o,s,l){var u=this&&this.__extends||function(){var S=function(C,E){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,M){T.__proto__=M}||function(T,M){for(var L in M)Object.prototype.hasOwnProperty.call(M,L)&&(T[L]=M[L])},S(C,E)};return function(C,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");S(C,E);function T(){this.constructor=C}C.prototype=E===null?Object.create(E):(T.prototype=E.prototype,new T)}}(),c=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(s,"__esModule",{value:!0}),s.collectMethods=s.LooksAhead=void 0;var f=c(l(7734)),d=c(l(5346)),h=l(2941),_=l(8209),p=l(7729),v=l(7729),y=l(7042),m=function(){function S(){}return S.prototype.initLooksAhead=function(C){this.dynamicTokensEnabled=(0,d.default)(C,"dynamicTokensEnabled")?C.dynamicTokensEnabled:h.DEFAULT_PARSER_CONFIG.dynamicTokensEnabled,this.maxLookahead=(0,d.default)(C,"maxLookahead")?C.maxLookahead:h.DEFAULT_PARSER_CONFIG.maxLookahead,this.lookaheadStrategy=(0,d.default)(C,"lookaheadStrategy")?C.lookaheadStrategy:new y.LLkLookaheadStrategy({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map},S.prototype.preComputeLookaheadFunctions=function(C){var E=this;(0,f.default)(C,function(T){E.TRACE_INIT("".concat(T.name," Rule Lookahead"),function(){var M=b(T),L=M.alternation,F=M.repetition,N=M.option,I=M.repetitionMandatory,O=M.repetitionMandatoryWithSeparator,P=M.repetitionWithSeparator;(0,f.default)(L,function(R){var A=R.idx===0?"":R.idx;E.TRACE_INIT("".concat((0,v.getProductionDslName)(R)).concat(A),function(){var D=E.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:R.idx,rule:T,maxLookahead:R.maxLookahead||E.maxLookahead,hasPredicates:R.hasPredicates,dynamicTokensEnabled:E.dynamicTokensEnabled}),B=(0,_.getKeyForAutomaticLookahead)(E.fullRuleNameToShort[T.name],_.OR_IDX,R.idx);E.setLaFuncCache(B,D)})}),(0,f.default)(F,function(R){E.computeLookaheadFunc(T,R.idx,_.MANY_IDX,"Repetition",R.maxLookahead,(0,v.getProductionDslName)(R))}),(0,f.default)(N,function(R){E.computeLookaheadFunc(T,R.idx,_.OPTION_IDX,"Option",R.maxLookahead,(0,v.getProductionDslName)(R))}),(0,f.default)(I,function(R){E.computeLookaheadFunc(T,R.idx,_.AT_LEAST_ONE_IDX,"RepetitionMandatory",R.maxLookahead,(0,v.getProductionDslName)(R))}),(0,f.default)(O,function(R){E.computeLookaheadFunc(T,R.idx,_.AT_LEAST_ONE_SEP_IDX,"RepetitionMandatoryWithSeparator",R.maxLookahead,(0,v.getProductionDslName)(R))}),(0,f.default)(P,function(R){E.computeLookaheadFunc(T,R.idx,_.MANY_SEP_IDX,"RepetitionWithSeparator",R.maxLookahead,(0,v.getProductionDslName)(R))})})})},S.prototype.computeLookaheadFunc=function(C,E,T,M,L,F){var N=this;this.TRACE_INIT("".concat(F).concat(E===0?"":E),function(){var I=N.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:E,rule:C,maxLookahead:L||N.maxLookahead,dynamicTokensEnabled:N.dynamicTokensEnabled,prodType:M}),O=(0,_.getKeyForAutomaticLookahead)(N.fullRuleNameToShort[C.name],T,E);N.setLaFuncCache(O,I)})},S.prototype.getKeyForAutomaticLookahead=function(C,E){var T=this.getLastExplicitRuleShortName();return(0,_.getKeyForAutomaticLookahead)(T,C,E)},S.prototype.getLaFuncFromCache=function(C){return this.lookAheadFuncsCache.get(C)},S.prototype.setLaFuncCache=function(C,E){this.lookAheadFuncsCache.set(C,E)},S}();s.LooksAhead=m;var g=function(S){u(C,S);function C(){var E=S!==null&&S.apply(this,arguments)||this;return E.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]},E}return C.prototype.reset=function(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}},C.prototype.visitOption=function(E){this.dslMethods.option.push(E)},C.prototype.visitRepetitionWithSeparator=function(E){this.dslMethods.repetitionWithSeparator.push(E)},C.prototype.visitRepetitionMandatory=function(E){this.dslMethods.repetitionMandatory.push(E)},C.prototype.visitRepetitionMandatoryWithSeparator=function(E){this.dslMethods.repetitionMandatoryWithSeparator.push(E)},C.prototype.visitRepetition=function(E){this.dslMethods.repetition.push(E)},C.prototype.visitAlternation=function(E){this.dslMethods.alternation.push(E)},C}(p.GAstVisitor),x=new g;function b(S){x.reset(),S.accept(x);var C=x.dslMethods;return x.reset(),C}s.collectMethods=b},146:function(o,s,l){var u=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(s,"__esModule",{value:!0}),s.PerformanceTracer=void 0;var c=u(l(5346)),f=l(7146),d=l(2941),h=function(){function _(){}return _.prototype.initPerformanceTracer=function(p){if((0,c.default)(p,"traceInitPerf")){var v=p.traceInitPerf,y=typeof v=="number";this.traceInitMaxIdent=y?v:1/0,this.traceInitPerf=y?v>0:v}else this.traceInitMaxIdent=0,this.traceInitPerf=d.DEFAULT_PARSER_CONFIG.traceInitPerf;this.traceInitIndent=-1},_.prototype.TRACE_INIT=function(p,v){if(this.traceInitPerf===!0){this.traceInitIndent++;var y=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log("".concat(y,"--> <").concat(p,">"));var m=(0,f.timer)(v),g=m.time,x=m.value,b=g>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&b("".concat(y,"<-- <").concat(p,"> time: ").concat(g,"ms")),this.traceInitIndent--,x}else return v()},_}();s.PerformanceTracer=h},8503:function(o,s,l){var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(s,"__esModule",{value:!0}),s.RecognizerApi=void 0;var c=u(l(1682)),f=u(l(2876)),d=l(643),h=l(2941),_=l(1007),p=l(3870),v=l(7729),y=function(){function m(){}return m.prototype.ACTION=function(g){return g.call(this)},m.prototype.consume=function(g,x,b){return this.consumeInternal(x,g,b)},m.prototype.subrule=function(g,x,b){return this.subruleInternal(x,g,b)},m.prototype.option=function(g,x){return this.optionInternal(x,g)},m.prototype.or=function(g,x){return this.orInternal(x,g)},m.prototype.many=function(g,x){return this.manyInternal(g,x)},m.prototype.atLeastOne=function(g,x){return this.atLeastOneInternal(g,x)},m.prototype.CONSUME=function(g,x){return this.consumeInternal(g,0,x)},m.prototype.CONSUME1=function(g,x){return this.consumeInternal(g,1,x)},m.prototype.CONSUME2=function(g,x){return this.consumeInternal(g,2,x)},m.prototype.CONSUME3=function(g,x){return this.consumeInternal(g,3,x)},m.prototype.CONSUME4=function(g,x){return this.consumeInternal(g,4,x)},m.prototype.CONSUME5=function(g,x){return this.consumeInternal(g,5,x)},m.prototype.CONSUME6=function(g,x){return this.consumeInternal(g,6,x)},m.prototype.CONSUME7=function(g,x){return this.consumeInternal(g,7,x)},m.prototype.CONSUME8=function(g,x){return this.consumeInternal(g,8,x)},m.prototype.CONSUME9=function(g,x){return this.consumeInternal(g,9,x)},m.prototype.SUBRULE=function(g,x){return this.subruleInternal(g,0,x)},m.prototype.SUBRULE1=function(g,x){return this.subruleInternal(g,1,x)},m.prototype.SUBRULE2=function(g,x){return this.subruleInternal(g,2,x)},m.prototype.SUBRULE3=function(g,x){return this.subruleInternal(g,3,x)},m.prototype.SUBRULE4=function(g,x){return this.subruleInternal(g,4,x)},m.prototype.SUBRULE5=function(g,x){return this.subruleInternal(g,5,x)},m.prototype.SUBRULE6=function(g,x){return this.subruleInternal(g,6,x)},m.prototype.SUBRULE7=function(g,x){return this.subruleInternal(g,7,x)},m.prototype.SUBRULE8=function(g,x){return this.subruleInternal(g,8,x)},m.prototype.SUBRULE9=function(g,x){return this.subruleInternal(g,9,x)},m.prototype.OPTION=function(g){return this.optionInternal(g,0)},m.prototype.OPTION1=function(g){return this.optionInternal(g,1)},m.prototype.OPTION2=function(g){return this.optionInternal(g,2)},m.prototype.OPTION3=function(g){return this.optionInternal(g,3)},m.prototype.OPTION4=function(g){return this.optionInternal(g,4)},m.prototype.OPTION5=function(g){return this.optionInternal(g,5)},m.prototype.OPTION6=function(g){return this.optionInternal(g,6)},m.prototype.OPTION7=function(g){return this.optionInternal(g,7)},m.prototype.OPTION8=function(g){return this.optionInternal(g,8)},m.prototype.OPTION9=function(g){return this.optionInternal(g,9)},m.prototype.OR=function(g){return this.orInternal(g,0)},m.prototype.OR1=function(g){return this.orInternal(g,1)},m.prototype.OR2=function(g){return this.orInternal(g,2)},m.prototype.OR3=function(g){return this.orInternal(g,3)},m.prototype.OR4=function(g){return this.orInternal(g,4)},m.prototype.OR5=function(g){return this.orInternal(g,5)},m.prototype.OR6=function(g){return this.orInternal(g,6)},m.prototype.OR7=function(g){return this.orInternal(g,7)},m.prototype.OR8=function(g){return this.orInternal(g,8)},m.prototype.OR9=function(g){return this.orInternal(g,9)},m.prototype.MANY=function(g){this.manyInternal(0,g)},m.prototype.MANY1=function(g){this.manyInternal(1,g)},m.prototype.MANY2=function(g){this.manyInternal(2,g)},m.prototype.MANY3=function(g){this.manyInternal(3,g)},m.prototype.MANY4=function(g){this.manyInternal(4,g)},m.prototype.MANY5=function(g){this.manyInternal(5,g)},m.prototype.MANY6=function(g){this.manyInternal(6,g)},m.prototype.MANY7=function(g){this.manyInternal(7,g)},m.prototype.MANY8=function(g){this.manyInternal(8,g)},m.prototype.MANY9=function(g){this.manyInternal(9,g)},m.prototype.MANY_SEP=function(g){this.manySepFirstInternal(0,g)},m.prototype.MANY_SEP1=function(g){this.manySepFirstInternal(1,g)},m.prototype.MANY_SEP2=function(g){this.manySepFirstInternal(2,g)},m.prototype.MANY_SEP3=function(g){this.manySepFirstInternal(3,g)},m.prototype.MANY_SEP4=function(g){this.manySepFirstInternal(4,g)},m.prototype.MANY_SEP5=function(g){this.manySepFirstInternal(5,g)},m.prototype.MANY_SEP6=function(g){this.manySepFirstInternal(6,g)},m.prototype.MANY_SEP7=function(g){this.manySepFirstInternal(7,g)},m.prototype.MANY_SEP8=function(g){this.manySepFirstInternal(8,g)},m.prototype.MANY_SEP9=function(g){this.manySepFirstInternal(9,g)},m.prototype.AT_LEAST_ONE=function(g){this.atLeastOneInternal(0,g)},m.prototype.AT_LEAST_ONE1=function(g){return this.atLeastOneInternal(1,g)},m.prototype.AT_LEAST_ONE2=function(g){this.atLeastOneInternal(2,g)},m.prototype.AT_LEAST_ONE3=function(g){this.atLeastOneInternal(3,g)},m.prototype.AT_LEAST_ONE4=function(g){this.atLeastOneInternal(4,g)},m.prototype.AT_LEAST_ONE5=function(g){this.atLeastOneInternal(5,g)},m.prototype.AT_LEAST_ONE6=function(g){this.atLeastOneInternal(6,g)},m.prototype.AT_LEAST_ONE7=function(g){this.atLeastOneInternal(7,g)},m.prototype.AT_LEAST_ONE8=function(g){this.atLeastOneInternal(8,g)},m.prototype.AT_LEAST_ONE9=function(g){this.atLeastOneInternal(9,g)},m.prototype.AT_LEAST_ONE_SEP=function(g){this.atLeastOneSepFirstInternal(0,g)},m.prototype.AT_LEAST_ONE_SEP1=function(g){this.atLeastOneSepFirstInternal(1,g)},m.prototype.AT_LEAST_ONE_SEP2=function(g){this.atLeastOneSepFirstInternal(2,g)},m.prototype.AT_LEAST_ONE_SEP3=function(g){this.atLeastOneSepFirstInternal(3,g)},m.prototype.AT_LEAST_ONE_SEP4=function(g){this.atLeastOneSepFirstInternal(4,g)},m.prototype.AT_LEAST_ONE_SEP5=function(g){this.atLeastOneSepFirstInternal(5,g)},m.prototype.AT_LEAST_ONE_SEP6=function(g){this.atLeastOneSepFirstInternal(6,g)},m.prototype.AT_LEAST_ONE_SEP7=function(g){this.atLeastOneSepFirstInternal(7,g)},m.prototype.AT_LEAST_ONE_SEP8=function(g){this.atLeastOneSepFirstInternal(8,g)},m.prototype.AT_LEAST_ONE_SEP9=function(g){this.atLeastOneSepFirstInternal(9,g)},m.prototype.RULE=function(g,x,b){if(b===void 0&&(b=h.DEFAULT_RULE_CONFIG),(0,f.default)(this.definedRulesNames,g)){var S=_.defaultGrammarValidatorErrorProvider.buildDuplicateRuleNameError({topLevelRule:g,grammarName:this.className}),C={message:S,type:h.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:g};this.definitionErrors.push(C)}this.definedRulesNames.push(g);var E=this.defineRule(g,x,b);return this[g]=E,E},m.prototype.OVERRIDE_RULE=function(g,x,b){b===void 0&&(b=h.DEFAULT_RULE_CONFIG);var S=(0,p.validateRuleIsOverridden)(g,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(S);var C=this.defineRule(g,x,b);return this[g]=C,C},m.prototype.BACKTRACK=function(g,x){return function(){this.isBackTrackingStack.push(1);var b=this.saveRecogState();try{return g.apply(this,x),!0}catch(S){if((0,d.isRecognitionException)(S))return!1;throw S}finally{this.reloadRecogState(b),this.isBackTrackingStack.pop()}}},m.prototype.getGAstProductions=function(){return this.gastProductionsCache},m.prototype.getSerializedGastProductions=function(){return(0,v.serializeGrammar)((0,c.default)(this.gastProductionsCache))},m}();s.RecognizerApi=y},3273:function(o,s,l){var u=this&&this.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(s,"__esModule",{value:!0}),s.RecognizerEngine=void 0;var c=u(l(9787)),f=u(l(5589)),d=u(l(2923)),h=u(l(1198)),_=u(l(292)),p=u(l(3702)),v=u(l(5346)),y=u(l(1682)),m=u(l(7682)),g=u(l(7953)),x=l(8209),b=l(643),S=l(4677),C=l(9985),E=l(2941),T=l(9992),M=l(6736),L=l(1201),F=function(){function N(){}return N.prototype.initRecognizerEngine=function(I,O){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=L.tokenStructuredMatcherNoCategories,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},(0,v.default)(O,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https:///Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if((0,f.default)(I)){if((0,c.default)(I))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof I[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https:///Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if((0,f.default)(I))this.tokensMap=(0,m.default)(I,function(B,k){return B[k.name]=k,B},{});else if((0,v.default)(I,"modes")&&(0,h.default)((0,d.default)((0,y.default)(I.modes)),L.isTokenType)){var P=(0,d.default)((0,y.default)(I.modes)),R=(0,_.default)(P);this.tokensMap=(0,m.default)(R,function(B,k){return B[k.name]=k,B},{})}else if((0,p.default)(I))this.tokensMap=(0,g.default)(I);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=M.EOF;var A=(0,v.default)(I,"modes")?(0,d.default)((0,y.default)(I.modes)):(0,y.default)(I),D=(0,h.default)(A,function(B){return(0,c.default)(B.categoryMatches)});this.tokenMatcher=D?L.tokenStructuredMatcherNoCategories:L.tokenStructuredMatcher,(0,L.augmentTokenTypes)((0,y.default)(this.tokensMap))},N.prototype.defineRule=function(I,O,P){if(this.selfAnalysisDone)throw Error("Grammar rule <".concat(I,`> may not be defined after the 'performSelfAnalysis' method has been called'
`)+"Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.");var R=(0,v.default)(P,"resyncEnabled")?P.resyncEnabled:E.DEFAULT_RULE_CONFIG.resyncEnabled,A=(0,v.default)(P,"recoveryValueFunc")?P.recoveryValueFunc:E.DEFAULT_RULE_CONFIG.recoveryValueFunc,D=this.ruleShortNameIdx<<x.BITS_FOR_METHOD_TYPE+x.BITS_FOR_OCCURRENCE_IDX;this.ruleShortNameIdx++,this.shortRuleNameToFull[D]=I,this.fullRuleNameToShort[I]=D;var B;this.outputCst===!0?B=function(){for(var U=[],j=0;j<arguments.length;j++)U[j]=arguments[j];try{this.ruleInvocationStateUpdate(D,I,this.subruleIdx),O.apply(this,U);var G=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(G),G}catch($){return this.invokeRuleCatch($,R,A)}finally{this.ruleFinallyStateUpdate()}}:B=function(){for(var U=[],j=0;j<arguments.length;j++)U[j]=arguments[j];try{return this.ruleInvocationStateUpdate(D,I,this.subruleIdx),O.apply(this,U)}catch(G){return this.invokeRuleCatch(G,R,A)}finally{this.ruleFinallyStateUpdate()}};var k=Object.assign(B,{ruleName:I,originalGrammarAction:O});return k},N.prototype.invokeRuleCatch=function(I,O,P){var R=this.RULE_STACK.length===1,A=O&&!this.isBackTracking()&&this.recoveryEnabled;if((0,b.isRecognitionException)(I)){var D=I;if(A){var B=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(B))if(D.resyncedTokens=this.reSyncTo(B),this.outputCst){var k=this.CST_STACK[this.CST_STACK.length-1];return k.recoveredNode=!0,k}else return P(I);else{if(this.outputCst){var k=this.CST_STACK[this.CST_STACK.length-1];k.recoveredNode=!0,D.partialCstResult=k}throw D}}else{if(R)return this.moveToTerminatedState(),P(I);throw D}}else throw I},N.prototype.optionInternal=function(I,O){var P=this.getKeyForAutomaticLookahead(x.OPTION_IDX,O);return this.optionInternalLogic(I,O,P)},N.prototype.optionInternalLogic=function(I,O,P){var R=this,A=this.getLaFuncFromCache(P),D;if(typeof I!="function"){D=I.DEF;var B=I.GATE;if(B!==void 0){var k=A;A=function(){return B.call(R)&&k.call(R)}}}else D=I;if(A.call(this)===!0)return D.call(this)},N.prototype.atLeastOneInternal=function(I,O){var P=this.getKeyForAutomaticLookahead(x.AT_LEAST_ONE_IDX,I);return this.atLeastOneInternalLogic(I,O,P)},N.prototype.atLeastOneInternalLogic=function(I,O,P){var R=this,A=this.getLaFuncFromCache(P),D;if(typeof O!="function"){D=O.DEF;var B=O.GATE;if(B!==void 0){var k=A;A=function(){return B.call(R)&&k.call(R)}}}else D=O;if(A.call(this)===!0)for(var V=this.doSingleRepetition(D);A.call(this)===!0&&V===!0;)V=this.doSingleRepetition(D);else throw this.raiseEarlyExitException(I,S.PROD_TYPE.REPETITION_MANDATORY,O.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[I,O],A,x.AT_LEAST_ONE_IDX,I,C.NextTerminalAfterAtLeastOneWalker)},N.prototype.atLeastOneSepFirstInternal=function(I,O){var P=this.getKeyForAutomaticLookahead(x.AT_LEAST_ONE_SEP_IDX,I);this.atLeastOneSepFirstInternalLogic(I,O,P)},N.prototype.atLeastOneSepFirstInternalLogic=function(I,O,P){var R=this,A=O.DEF,D=O.SEP,B=this.getLaFuncFromCache(P);if(B.call(this)===!0){A.call(this);for(var k=function(){return R.tokenMatcher(R.LA(1),D)};this.tokenMatcher(this.LA(1),D)===!0;)this.CONSUME(D),A.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[I,D,k,A,C.NextTerminalAfterAtLeastOneSepWalker],k,x.AT_LEAST_ONE_SEP_IDX,I,C.NextTerminalAfterAtLeastOneSepWalker)}else throw this.raiseEarlyExitException(I,S.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,O.ERR_MSG)},N.prototype.manyInternal=function(I,O){var P=this.getKeyForAutomaticLookahead(x.MANY_IDX,I);return this.manyInternalLogic(I,O,P)},N.prototype.manyInternalLogic=function(I,O,P){var R=this,A=this.getLaFuncFromCache(P),D;if(typeof O!="function"){D=O.DEF;var B=O.GATE;if(B!==void 0){var k=A;A=function(){return B.call(R)&&k.call(R)}}}else D=O;for(var V=!0;A.call(this)===!0&&V===!0;)V=this.doSingleRepetition(D);this.attemptInRepetitionRecovery(this.manyInternal,[I,O],A,x.MANY_IDX,I,C.NextTerminalAfterManyWalker,V)},N.prototype.manySepFirstInternal=function(I,O){var P=this.getKeyForAutomaticLookahead(x.MANY_SEP_IDX,I);this.manySepFirstInternalLogic(I,O,P)},N.prototype.manySepFirstInternalLogic=function(I,O,P){var R=this,A=O.DEF,D=O.SEP,B=this.getLaFuncFromCache(P);if(B.call(this)===!0){A.call(this);for(var k=function(){return R.tokenMatcher(R.LA(1),D)};this.tokenMatcher(this.LA(1),D)===!0;)this.CONSUME(D),A.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[I,D,k,A,C.NextTerminalAfterManySepWalker],k,x.MANY_SEP_IDX,I,C.NextTerminalAfterManySepWalker)}},N.prototype.repetitionSepSecondInternal=function(I,O,P,R,A){for(;P();)this.CONSUME(O),R.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[I,O,P,R,A],P,x.AT_LEAST_ONE_SEP_IDX,I,A)},N.prototype.doSingleRepetition=function(I){var O=this.getLexerPosition();I.call(this);var P=this.getLexerPosition();return P>O},N.prototype.orInternal=function(I,O){var P=this.getKeyForAutomaticLookahead(x.OR_IDX,O),R=(0,f.default)(I)?I:I.DEF,A=this.getLaFuncFromCache(P),D=A.call(this,R);if(D!==void 0){var B=R[D];return B.ALT.call(this)}this.raiseNoAltException(O,I.ERR_MSG)},N.prototype.ruleFinallyStateUpdate=function(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){var I=this.LA(1),O=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:I,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new b.NotAllInputParsedException(O,I))}},N.prototype.subruleInternal=function(I,O,P){var R;try{var A=P!==void 0?P.ARGS:void 0;return this.subruleIdx=O,R=I.apply(this,A),this.cstPostNonTerminal(R,P!==void 0&&P.LABEL!==void 0?P.LABEL:I.ruleName),R}catch(D){throw this.subruleInternalError(D,P,I.ruleName)}},N.prototype.subruleInternalError=function(I,O,P){throw(0,b.isRecognitionException)(I)&&I.partialCstResult!==void 0&&(this.cstPostNonTerminal(I.partialCstResult,O!==void 0&&O.LABEL!==void 0?O.LABEL:P),delete I.partialCstResult),I},N.prototype.consumeInternal=function(I,O,P){var R;try{var A=this.LA(1);this.tokenMatcher(A,I)===!0?(this.consumeToken(),R=A):this.consumeInternalError(I,A,P)}catch(D){R=this.consumeInternalRecovery(I,O,D)}return this.cstPostTerminal(P!==void 0&&P.LABEL!==void 0?P.LABEL:I.name,R),R},N.prototype.consumeInternalError=function(I,O,P){var R,A=this.LA(0);throw P!==void 0&&P.ERR_MSG?R=P.ERR_MSG:R=this.errorMessageProvider.buildMismatchTokenMessage({expected:I,actual:O,previous:A,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new b.MismatchedTokenException(R,O,A))},N.prototype.consumeInternalRecovery=function(I,O,P){if(this.recoveryEnabled&&P.name==="MismatchedTokenException"&&!this.isBackTracking()){var R=this.getFollowsForInRuleRecovery(I,O);try{return this.tryInRuleRecovery(I,R)}catch(A){throw A.name===T.IN_RULE_RECOVERY_EXCEPTION?P:A}}else throw P},N.prototype.saveRecogState=function(){var I=this.errors,O=(0,g.default)(this.RULE_STACK);return{errors:I,lexerState:this.exportLexerState(),RULE_STACK:O,CST_STACK:this.CST_STACK}},N.prototype.reloadRecogState=function(I){this.errors=I.errors,this.importLexerState(I.lexerState),this.RULE_STACK=I.RULE_STACK},N.prototype.ruleInvocationStateUpdate=function(I,O,P){this.RULE_OCCURRENCE_STACK.push(P),this.RULE_STACK.push(I),this.cstInvocationStateUpdate(O)},N.prototype.isBackTracking=function(){return this.isBackTrackingStack.length!==0},N.prototype.getCurrRuleFullName=function(){var I=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[I]},N.prototype.shortRuleNameToFullName=function(I){return this.shortRuleNameToFull[I]},N.prototype.isAtEndOfInput=function(){return this.tokenMatcher(this.LA(1),M.EOF)},N.prototype.reset=function(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]},N}();s.RecognizerEngine=F},9992:function(o,s,l){var u=this&&this.__extends||function(){var M=function(L,F){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,I){N.__proto__=I}||function(N,I){for(var O in I)Object.prototype.hasOwnProperty.call(I,O)&&(N[O]=I[O])},M(L,F)};return function(L,F){if(typeof F!="function"&&F!==null)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");M(L,F);function N(){this.constructor=L}L.prototype=F===null?Object.create(F):(N.prototype=F.prototype,new N)}}(),c=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(s,"__esModule",{value:!0}),s.attemptInRepetitionRecovery=s.Recoverable=s.InRuleRecoveryException=s.IN_RULE_RECOVERY_EXCEPTION=s.EOF_FOLLOW_KEY=void 0;var f=l(6736),d=c(l(9787)),h=c(l(682)),_=c(l(2923)),p=c(l(9107)),v=c(l(6969)),y=c(l(5346)),m=c(l(2876)),g=c(l(7953)),x=l(643),b=l(3710),S=l(2941);s.EOF_FOLLOW_KEY={},s.IN_RULE_RECOVERY_EXCEPTION="InRuleRecoveryException";var C=function(M){u(L,M);function L(F){var N=M.call(this,F)||this;return N.name=s.IN_RULE_RECOVERY_EXCEPTION,N}return L}(Error);s.InRuleRecoveryException=C;var E=function(){function M(){}return M.prototype.initRecoverable=function(L){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=(0,y.default)(L,"recoveryEnabled")?L.recoveryEnabled:S.DEFAULT_PARSER_CONFIG.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=T)},M.prototype.getTokenToInsert=function(L){var F=(0,f.createTokenInstance)(L,"",NaN,NaN,NaN,NaN,NaN,NaN);return F.isInsertedInRecovery=!0,F},M.prototype.canTokenTypeBeInsertedInRecovery=function(L){return!0},M.prototype.canTokenTypeBeDeletedInRecovery=function(L){return!0},M.prototype.tryInRepetitionRecovery=function(L,F,N,I){for(var O=this,P=this.findReSyncTokenType(),R=this.exportLexerState(),A=[],D=!1,B=this.LA(1),k=this.LA(1),V=function(){var U=O.LA(0),j=O.errorMessageProvider.buildMismatchTokenMessage({expected:I,actual:B,previous:U,ruleName:O.getCurrRuleFullName()}),G=new x.MismatchedTokenException(j,B,O.LA(0));G.resyncedTokens=(0,h.default)(A),O.SAVE_ERROR(G)};!D;)if(this.tokenMatcher(k,I)){V();return}else if(N.call(this)){V(),L.apply(this,F);return}else this.tokenMatcher(k,P)?D=!0:(k=this.SKIP_TOKEN(),this.addToResyncTokens(k,A));this.importLexerState(R)},M.prototype.shouldInRepetitionRecoveryBeTried=function(L,F,N){return!(N===!1||this.tokenMatcher(this.LA(1),L)||this.isBackTracking()||this.canPerformInRuleRecovery(L,this.getFollowsForInRuleRecovery(L,F)))},M.prototype.getFollowsForInRuleRecovery=function(L,F){var N=this.getCurrentGrammarPath(L,F),I=this.getNextPossibleTokenTypes(N);return I},M.prototype.tryInRuleRecovery=function(L,F){if(this.canRecoverWithSingleTokenInsertion(L,F)){var N=this.getTokenToInsert(L);return N}if(this.canRecoverWithSingleTokenDeletion(L)){var I=this.SKIP_TOKEN();return this.consumeToken(),I}throw new C("sad sad panda")},M.prototype.canPerformInRuleRecovery=function(L,F){return this.canRecoverWithSingleTokenInsertion(L,F)||this.canRecoverWithSingleTokenDeletion(L)},M.prototype.canRecoverWithSingleTokenInsertion=function(L,F){var N=this;if(!this.canTokenTypeBeInsertedInRecovery(L)||(0,d.default)(F))return!1;var I=this.LA(1),O=(0,v.default)(F,function(P){return N.tokenMatcher(I,P)})!==void 0;return O},M.prototype.canRecoverWithSingleTokenDeletion=function(L){if(!this.canTokenTypeBeDeletedInRecovery(L))return!1;var F=this.tokenMatcher(this.LA(2),L);return F},M.prototype.isInCurrentRuleReSyncSet=function(L){var F=this.getCurrFollowKey(),N=this.getFollowSetFromFollowKey(F);return(0,m.default)(N,L)},M.prototype.findReSyncTokenType=function(){for(var L=this.flattenFollowSet(),F=this.LA(1),N=2;;){var I=(0,v.default)(L,function(O){var P=(0,f.tokenMatcher)(F,O);return P});if(I!==void 0)return I;F=this.LA(N),N++}},M.prototype.getCurrFollowKey=function(){if(this.RULE_STACK.length===1)return s.EOF_FOLLOW_KEY;var L=this.getLastExplicitRuleShortName(),F=this.getLastExplicitRuleOccurrenceIndex(),N=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(L),idxInCallingRule:F,inRule:this.shortRuleNameToFullName(N)}},M.prototype.buildFullFollowKeyStack=function(){var L=this,F=this.RULE_STACK,N=this.RULE_OCCURRENCE_STACK;return(0,p.default)(F,function(I,O){return O===0?s.EOF_FOLLOW_KEY:{ruleName:L.shortRuleNameToFullName(I),idxInCallingRule:N[O],inRule:L.shortRuleNameToFullName(F[O-1])}})},M.prototype.flattenFollowSet=function(){var L=this,F=(0,p.default)(this.buildFullFollowKeyStack(),function(N){return L.getFollowSetFromFollowKey(N)});return(0,_.default)(F)},M.prototype.getFollowSetFromFollowKey=function(L){if(L===s.EOF_FOLLOW_KEY)return[f.EOF];var F=L.ruleName+L.idxInCallingRule+b.IN+L.inRule;return this.resyncFollows[F]},M.prototype.addToResyncTokens=function(L,F){return this.tokenMatcher(L,f.EOF)||F.push(L),F},M.prototype.reSyncTo=function(L){for(var F=[],N=this.LA(1);this.tokenMatcher(N,L)===!1;)N=this.SKIP_TOKEN(),this.addToResyncTokens(N,F);return(0,h.default)(F)},M.prototype.attemptInRepetitionRecovery=function(L,F,N,I,O,P,R){},M.prototype.getCurrentGrammarPath=function(L,F){var N=this.getHumanReadableRuleStack(),I=(0,g.default)(this.RULE_OCCURRENCE_STACK),O={ruleStack:N,occurrenceStack:I,lastTok:L,lastTokOccurrence:F};return O},M.prototype.getHumanReadableRuleStack=function(){var L=this;return(0,p.default)(this.RULE_STACK,function(F){return L.shortRuleNameToFullName(F)})},M}();s.Recoverable=E;function T(M,L,F,N,I,O,P){var R=this.getKeyForAutomaticLookahead(N,I),A=this.firstAfterRepMap[R];if(A===void 0){var D=this.getCurrRuleFullName(),B=this.getGAstProductions()[D],k=new O(B,I);A=k.startWalking(),this.firstAfterRepMap[R]=A}var V=A.token,U=A.occurrence,j=A.isEndOfRule;this.RULE_STACK.length===1&&j&&V===void 0&&(V=f.EOF,U=1),!(V===void 0||U===void 0)&&this.shouldInRepetitionRecoveryBeTried(V,U,P)&&this.tryInRepetitionRecovery(M,L,F,V)}s.attemptInRepetitionRecovery=T},3225:function(o,s,l){var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(s,"__esModule",{value:!0}),s.TreeBuilder=void 0;var c=l(7485),f=u(l(1607)),d=u(l(5346)),h=u(l(2096)),_=u(l(6474)),p=l(8169),v=l(2941),y=function(){function m(){}return m.prototype.initTreeBuilder=function(g){if(this.CST_STACK=[],this.outputCst=g.outputCst,this.nodeLocationTracking=(0,d.default)(g,"nodeLocationTracking")?g.nodeLocationTracking:v.DEFAULT_PARSER_CONFIG.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=f.default,this.cstFinallyStateUpdate=f.default,this.cstPostTerminal=f.default,this.cstPostNonTerminal=f.default,this.cstPostRule=f.default;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=c.setNodeLocationFull,this.setNodeLocationFromNode=c.setNodeLocationFull,this.cstPostRule=f.default,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=f.default,this.setNodeLocationFromNode=f.default,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=c.setNodeLocationOnlyOffset,this.setNodeLocationFromNode=c.setNodeLocationOnlyOffset,this.cstPostRule=f.default,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=f.default,this.setNodeLocationFromNode=f.default,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=f.default,this.setNodeLocationFromNode=f.default,this.cstPostRule=f.default,this.setInitialNodeLocation=f.default;else throw Error('Invalid <nodeLocationTracking> config option: "'.concat(g.nodeLocationTracking,'"'))},m.prototype.setInitialNodeLocationOnlyOffsetRecovery=function(g){g.location={startOffset:NaN,endOffset:NaN}},m.prototype.setInitialNodeLocationOnlyOffsetRegular=function(g){g.location={startOffset:this.LA(1).startOffset,endOffset:NaN}},m.prototype.setInitialNodeLocationFullRecovery=function(g){g.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}},m.prototype.setInitialNodeLocationFullRegular=function(g){var x=this.LA(1);g.location={startOffset:x.startOffset,startLine:x.startLine,startColumn:x.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}},m.prototype.cstInvocationStateUpdate=function(g){var x={name:g,children:Object.create(null)};this.setInitialNodeLocation(x),this.CST_STACK.push(x)},m.prototype.cstFinallyStateUpdate=function(){this.CST_STACK.pop()},m.prototype.cstPostRuleFull=function(g){var x=this.LA(0),b=g.location;b.startOffset<=x.startOffset?(b.endOffset=x.endOffset,b.endLine=x.endLine,b.endColumn=x.endColumn):(b.startOffset=NaN,b.startLine=NaN,b.startColumn=NaN)},m.prototype.cstPostRuleOnlyOffset=function(g){var x=this.LA(0),b=g.location;b.startOffset<=x.startOffset?b.endOffset=x.endOffset:b.startOffset=NaN},m.prototype.cstPostTerminal=function(g,x){var b=this.CST_STACK[this.CST_STACK.length-1];(0,c.addTerminalToCst)(b,x,g),this.setNodeLocationFromToken(b.location,x)},m.prototype.cstPostNonTerminal=function(g,x){var b=this.CST_STACK[this.CST_STACK.length-1];(0,c.addNoneTerminalToCst)(b,x,g),this.setNodeLocationFromNode(b.location,g.location)},m.prototype.getBaseCstVisitorConstructor=function(){if((0,_.default)(this.baseCstVisitorConstructor)){var g=(0,p.createBaseSemanticVisitorConstructor)(this.className,(0,h.default)(this.gastProductionsCache));return this.baseCstVisitorConstructor=g,g}return this.baseCstVisitorConstructor},m.prototype.getBaseCstVisitorConstructorWithDefaults=function(){if((0,_.default)(this.baseCstVisitorWithDefaultsConstructor)){var g=(0,p.createBaseVisitorConstructorWithDefaults)(this.className,(0,h.default)(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=g,g}return this.baseCstVisitorWithDefaultsConstructor},m.prototype.getLastExplicitRuleShortName=function(){var g=this.RULE_STACK;return g[g.length-1]},m.prototype.getPreviousExplicitRuleShortName=function(){var g=this.RULE_STACK;return g[g.length-2]},m.prototype.getLastExplicitRuleOccurrenceIndex=function(){var g=this.RULE_OCCURRENCE_STACK;return g[g.length-1]},m}();s.TreeBuilder=y},4803:(o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.applyMixins=void 0;function l(u,c){c.forEach(function(f){var d=f.prototype;Object.getOwnPropertyNames(d).forEach(function(h){if(h!=="constructor"){var _=Object.getOwnPropertyDescriptor(d,h);_&&(_.get||_.set)?Object.defineProperty(u.prototype,h,_):u.prototype[h]=f.prototype[h]}})})}s.applyMixins=l},6178:function(o,s,l){var u=this&&this.__extends||function(){var ce=function(le,he){return ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Se,me){Se.__proto__=me}||function(Se,me){for(var Le in me)Object.prototype.hasOwnProperty.call(me,Le)&&(Se[Le]=me[Le])},ce(le,he)};return function(le,he){if(typeof he!="function"&&he!==null)throw new TypeError("Class extends value "+String(he)+" is not a constructor or null");ce(le,he);function Se(){this.constructor=le}le.prototype=he===null?Object.create(he):(Se.prototype=he.prototype,new Se)}}(),c=this&&this.__importDefault||function(ce){return ce&&ce.__esModule?ce:{default:ce}};Object.defineProperty(s,"__esModule",{value:!0}),s.charCodeToOptimizedIndex=s.minOptimizationVal=s.buildLineBreakIssueMessage=s.LineTerminatorOptimizedTester=s.isShortPattern=s.isCustomPattern=s.cloneEmptyGroups=s.performWarningRuntimeChecks=s.performRuntimeChecks=s.addStickyFlag=s.addStartOfInput=s.findUnreachablePatterns=s.findModesThatDoNotExist=s.findInvalidGroupType=s.findDuplicatePatterns=s.findUnsupportedFlags=s.findStartOfInputAnchor=s.findEmptyMatchRegExps=s.findEndOfInputAnchor=s.findInvalidPatterns=s.findMissingPatterns=s.validatePatterns=s.analyzeTokenTypes=s.enableSticky=s.disableSticky=s.SUPPORT_STICKY=s.MODES=s.DEFAULT_MODE=void 0;var f=l(7968),d=l(9027),h=c(l(8936)),_=c(l(9787)),p=c(l(6494)),v=c(l(5589)),y=c(l(1682)),m=c(l(2923)),g=c(l(4171)),x=c(l(5271)),b=c(l(7318)),S=c(l(9107)),C=c(l(7734)),E=c(l(6705)),T=c(l(5563)),M=c(l(6474)),L=c(l(6969)),F=c(l(5346)),N=c(l(2096)),I=c(l(8290)),O=c(l(4663)),P=c(l(3821)),R=c(l(7682)),A=c(l(2876)),D=l(7146),B=l(1480),k=l(3067),V="PATTERN";s.DEFAULT_MODE="defaultMode",s.MODES="modes",s.SUPPORT_STICKY=typeof new RegExp("(?:)").sticky=="boolean";function U(){s.SUPPORT_STICKY=!1}s.disableSticky=U;function j(){s.SUPPORT_STICKY=!0}s.enableSticky=j;function G(ce,le){le=(0,P.default)(le,{useSticky:s.SUPPORT_STICKY,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:function(Ve,Ee){return Ee()}});var he=le.tracer;he("initCharCodeToOptimizedIndexMap",function(){Mt()});var Se;he("Reject Lexer.NA",function(){Se=(0,g.default)(ce,function(Ve){return Ve[V]===d.Lexer.NA})});var me=!1,Le;he("Transform Patterns",function(){me=!1,Le=(0,S.default)(Se,function(Ve){var Ee=Ve[V];if((0,I.default)(Ee)){var tt=Ee.source;return tt.length===1&&tt!=="^"&&tt!=="$"&&tt!=="."&&!Ee.ignoreCase?tt:tt.length===2&&tt[0]==="\\"&&!(0,A.default)(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],tt[1])?tt[1]:le.useSticky?ge(Ee):ne(Ee)}else{if((0,T.default)(Ee))return me=!0,{exec:Ee};if(typeof Ee=="object")return me=!0,Ee;if(typeof Ee=="string"){if(Ee.length===1)return Ee;var gn=Ee.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),dn=new RegExp(gn);return le.useSticky?ge(dn):ne(dn)}else throw Error("non exhaustive match")}})});var Qe,at,lt,ze,Rt;he("misc mapping",function(){Qe=(0,S.default)(Se,function(Ve){return Ve.tokenTypeIdx}),at=(0,S.default)(Se,function(Ve){var Ee=Ve.GROUP;if(Ee!==d.Lexer.SKIPPED){if((0,E.default)(Ee))return Ee;if((0,M.default)(Ee))return!1;throw Error("non exhaustive match")}}),lt=(0,S.default)(Se,function(Ve){var Ee=Ve.LONGER_ALT;if(Ee){var tt=(0,v.default)(Ee)?(0,S.default)(Ee,function(gn){return(0,b.default)(Se,gn)}):[(0,b.default)(Se,Ee)];return tt}}),ze=(0,S.default)(Se,function(Ve){return Ve.PUSH_MODE}),Rt=(0,S.default)(Se,function(Ve){return(0,F.default)(Ve,"POP_MODE")})});var et;he("Line Terminator Handling",function(){var Ve=He(le.lineTerminatorCharacters);et=(0,S.default)(Se,function(Ee){return!1}),le.positionTracking!=="onlyOffset"&&(et=(0,S.default)(Se,function(Ee){return(0,F.default)(Ee,"LINE_BREAKS")?!!Ee.LINE_BREAKS:Ke(Ee,Ve)===!1&&(0,B.canMatchCharCode)(Ve,Ee.PATTERN)}))});var Ne,ct,Bt,Oe;he("Misc Mapping #2",function(){Ne=(0,S.default)(Se,Pe),ct=(0,S.default)(Le,De),Bt=(0,R.default)(Se,function(Ve,Ee){var tt=Ee.GROUP;return(0,E.default)(tt)&&tt!==d.Lexer.SKIPPED&&(Ve[tt]=[]),Ve},{}),Oe=(0,S.default)(Le,function(Ve,Ee){return{pattern:Le[Ee],longerAlt:lt[Ee],canLineTerminator:et[Ee],isCustom:Ne[Ee],short:ct[Ee],group:at[Ee],push:ze[Ee],pop:Rt[Ee],tokenTypeIdx:Qe[Ee],tokenType:Se[Ee]}})});var Ye=!0,Fe=[];return le.safeMode||he("First Char Optimization",function(){Fe=(0,R.default)(Se,function(Ve,Ee,tt){if(typeof Ee.PATTERN=="string"){var gn=Ee.PATTERN.charCodeAt(0),dn=bt(gn);We(Ve,dn,Oe[tt])}else if((0,v.default)(Ee.START_CHARS_HINT)){var On;(0,C.default)(Ee.START_CHARS_HINT,function(Cn){var dt=typeof Cn=="string"?Cn.charCodeAt(0):Cn,ft=bt(dt);On!==ft&&(On=ft,We(Ve,ft,Oe[tt]))})}else if((0,I.default)(Ee.PATTERN))if(Ee.PATTERN.unicode)Ye=!1,le.ensureOptimizations&&(0,D.PRINT_ERROR)("".concat(B.failedOptimizationPrefixMsg)+"	Unable to analyze < ".concat(Ee.PATTERN.toString(),` > pattern.
`)+`	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https:///Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{var At=(0,B.getOptimizedStartCodesIndices)(Ee.PATTERN,le.ensureOptimizations);(0,_.default)(At)&&(Ye=!1),(0,C.default)(At,function(Cn){We(Ve,Cn,Oe[tt])})}else le.ensureOptimizations&&(0,D.PRINT_ERROR)("".concat(B.failedOptimizationPrefixMsg)+"	TokenType: <".concat(Ee.name,`> is using a custom token pattern without providing <start_chars_hint> parameter.
`)+`	This will disable the lexer's first char optimizations.
	For details See: https:///Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),Ye=!1;return Ve},[])}),{emptyGroups:Bt,patternIdxToConfig:Oe,charCodeToPatternIdxToConfig:Fe,hasCustom:me,canBeOptimized:Ye}}s.analyzeTokenTypes=G;function $(ce,le){var he=[],Se=K(ce);he=he.concat(Se.errors);var me=q(Se.valid),Le=me.valid;return he=he.concat(me.errors),he=he.concat(W(Le)),he=he.concat(Te(Le)),he=he.concat(Ce(Le,le)),he=he.concat(pe(Le)),he}s.validatePatterns=$;function W(ce){var le=[],he=(0,O.default)(ce,function(Se){return(0,I.default)(Se[V])});return le=le.concat(Q(he)),le=le.concat(oe(he)),le=le.concat(ee(he)),le=le.concat(xe(he)),le=le.concat(re(he)),le}function K(ce){var le=(0,O.default)(ce,function(me){return!(0,F.default)(me,V)}),he=(0,S.default)(le,function(me){return{message:"Token Type: ->"+me.name+"<- missing static 'PATTERN' property",type:d.LexerDefinitionErrorType.MISSING_PATTERN,tokenTypes:[me]}}),Se=(0,x.default)(ce,le);return{errors:he,valid:Se}}s.findMissingPatterns=K;function q(ce){var le=(0,O.default)(ce,function(me){var Le=me[V];return!(0,I.default)(Le)&&!(0,T.default)(Le)&&!(0,F.default)(Le,"exec")&&!(0,E.default)(Le)}),he=(0,S.default)(le,function(me){return{message:"Token Type: ->"+me.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:d.LexerDefinitionErrorType.INVALID_PATTERN,tokenTypes:[me]}}),Se=(0,x.default)(ce,le);return{errors:he,valid:Se}}s.findInvalidPatterns=q;var Y=/[^\\][$]/;function Q(ce){var le=function(me){u(Le,me);function Le(){var Qe=me!==null&&me.apply(this,arguments)||this;return Qe.found=!1,Qe}return Le.prototype.visitEndAnchor=function(Qe){this.found=!0},Le}(f.BaseRegExpVisitor),he=(0,O.default)(ce,function(me){var Le=me.PATTERN;try{var Qe=(0,k.getRegExpAst)(Le),at=new le;return at.visit(Qe),at.found}catch{return Y.test(Le.source)}}),Se=(0,S.default)(he,function(me){return{message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+me.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See /Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:d.LexerDefinitionErrorType.EOI_ANCHOR_FOUND,tokenTypes:[me]}});return Se}s.findEndOfInputAnchor=Q;function re(ce){var le=(0,O.default)(ce,function(Se){var me=Se.PATTERN;return me.test("")}),he=(0,S.default)(le,function(Se){return{message:"Token Type: ->"+Se.name+"<- static 'PATTERN' must not match an empty string",type:d.LexerDefinitionErrorType.EMPTY_MATCH_PATTERN,tokenTypes:[Se]}});return he}s.findEmptyMatchRegExps=re;var ue=/[^\\[][\^]|^\^/;function oe(ce){var le=function(me){u(Le,me);function Le(){var Qe=me!==null&&me.apply(this,arguments)||this;return Qe.found=!1,Qe}return Le.prototype.visitStartAnchor=function(Qe){this.found=!0},Le}(f.BaseRegExpVisitor),he=(0,O.default)(ce,function(me){var Le=me.PATTERN;try{var Qe=(0,k.getRegExpAst)(Le),at=new le;return at.visit(Qe),at.found}catch{return ue.test(Le.source)}}),Se=(0,S.default)(he,function(me){return{message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+me.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https:///Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:d.LexerDefinitionErrorType.SOI_ANCHOR_FOUND,tokenTypes:[me]}});return Se}s.findStartOfInputAnchor=oe;function ee(ce){var le=(0,O.default)(ce,function(Se){var me=Se[V];return me instanceof RegExp&&(me.multiline||me.global)}),he=(0,S.default)(le,function(Se){return{message:"Token Type: ->"+Se.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:d.LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[Se]}});return he}s.findUnsupportedFlags=ee;function xe(ce){var le=[],he=(0,S.default)(ce,function(Le){return(0,R.default)(ce,function(Qe,at){return Le.PATTERN.source===at.PATTERN.source&&!(0,A.default)(le,at)&&at.PATTERN!==d.Lexer.NA&&(le.push(at),Qe.push(at)),Qe},[])});he=(0,p.default)(he);var Se=(0,O.default)(he,function(Le){return Le.length>1}),me=(0,S.default)(Se,function(Le){var Qe=(0,S.default)(Le,function(lt){return lt.name}),at=(0,h.default)(Le).PATTERN;return{message:"The same RegExp pattern ->".concat(at,"<-")+"has been used in all of the following Token Types: ".concat(Qe.join(", ")," <-"),type:d.LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND,tokenTypes:Le}});return me}s.findDuplicatePatterns=xe;function Te(ce){var le=(0,O.default)(ce,function(Se){if(!(0,F.default)(Se,"GROUP"))return!1;var me=Se.GROUP;return me!==d.Lexer.SKIPPED&&me!==d.Lexer.NA&&!(0,E.default)(me)}),he=(0,S.default)(le,function(Se){return{message:"Token Type: ->"+Se.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:d.LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND,tokenTypes:[Se]}});return he}s.findInvalidGroupType=Te;function Ce(ce,le){var he=(0,O.default)(ce,function(me){return me.PUSH_MODE!==void 0&&!(0,A.default)(le,me.PUSH_MODE)}),Se=(0,S.default)(he,function(me){var Le="Token Type: ->".concat(me.name,"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->").concat(me.PUSH_MODE,"<-")+"which does not exist";return{message:Le,type:d.LexerDefinitionErrorType.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[me]}});return Se}s.findModesThatDoNotExist=Ce;function pe(ce){var le=[],he=(0,R.default)(ce,function(Se,me,Le){var Qe=me.PATTERN;return Qe===d.Lexer.NA||((0,E.default)(Qe)?Se.push({str:Qe,idx:Le,tokenType:me}):(0,I.default)(Qe)&&ae(Qe)&&Se.push({str:Qe.source,idx:Le,tokenType:me})),Se},[]);return(0,C.default)(ce,function(Se,me){(0,C.default)(he,function(Le){var Qe=Le.str,at=Le.idx,lt=Le.tokenType;if(me<at&&J(Qe,Se.PATTERN)){var ze="Token: ->".concat(lt.name,`<- can never be matched.
`)+"Because it appears AFTER the Token Type ->".concat(Se.name,"<-")+`in the lexer's definition.
See https:///Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;le.push({message:ze,type:d.LexerDefinitionErrorType.UNREACHABLE_PATTERN,tokenTypes:[Se,lt]})}})}),le}s.findUnreachablePatterns=pe;function J(ce,le){if((0,I.default)(le)){var he=le.exec(ce);return he!==null&&he.index===0}else{if((0,T.default)(le))return le(ce,0,[],{});if((0,F.default)(le,"exec"))return le.exec(ce,0,[],{});if(typeof le=="string")return le===ce;throw Error("non exhaustive match")}}function ae(ce){var le=[".","\\","[","]","|","^","$","(",")","?","*","+","{"];return(0,L.default)(le,function(he){return ce.source.indexOf(he)!==-1})===void 0}function ne(ce){var le=ce.ignoreCase?"i":"";return new RegExp("^(?:".concat(ce.source,")"),le)}s.addStartOfInput=ne;function ge(ce){var le=ce.ignoreCase?"iy":"y";return new RegExp("".concat(ce.source),le)}s.addStickyFlag=ge;function se(ce,le,he){var Se=[];return(0,F.default)(ce,s.DEFAULT_MODE)||Se.push({message:"A MultiMode Lexer cannot be initialized without a <"+s.DEFAULT_MODE+`> property in its definition
`,type:d.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),(0,F.default)(ce,s.MODES)||Se.push({message:"A MultiMode Lexer cannot be initialized without a <"+s.MODES+`> property in its definition
`,type:d.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),(0,F.default)(ce,s.MODES)&&(0,F.default)(ce,s.DEFAULT_MODE)&&!(0,F.default)(ce.modes,ce.defaultMode)&&Se.push({message:"A MultiMode Lexer cannot be initialized with a ".concat(s.DEFAULT_MODE,": <").concat(ce.defaultMode,">")+`which does not exist
`,type:d.LexerDefinitionErrorType.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),(0,F.default)(ce,s.MODES)&&(0,C.default)(ce.modes,function(me,Le){(0,C.default)(me,function(Qe,at){if((0,M.default)(Qe))Se.push({message:"A Lexer cannot be initialized using an undefined Token Type. Mode:"+"<".concat(Le,"> at index: <").concat(at,`>
`),type:d.LexerDefinitionErrorType.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if((0,F.default)(Qe,"LONGER_ALT")){var lt=(0,v.default)(Qe.LONGER_ALT)?Qe.LONGER_ALT:[Qe.LONGER_ALT];(0,C.default)(lt,function(ze){!(0,M.default)(ze)&&!(0,A.default)(me,ze)&&Se.push({message:"A MultiMode Lexer cannot be initialized with a longer_alt <".concat(ze.name,"> on token <").concat(Qe.name,"> outside of mode <").concat(Le,`>
`),type:d.LexerDefinitionErrorType.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),Se}s.performRuntimeChecks=se;function Re(ce,le,he){var Se=[],me=!1,Le=(0,p.default)((0,m.default)((0,y.default)(ce.modes))),Qe=(0,g.default)(Le,function(lt){return lt[V]===d.Lexer.NA}),at=He(he);return le&&(0,C.default)(Qe,function(lt){var ze=Ke(lt,at);if(ze!==!1){var Rt=Be(lt,ze),et={message:Rt,type:ze.issue,tokenType:lt};Se.push(et)}else(0,F.default)(lt,"LINE_BREAKS")?lt.LINE_BREAKS===!0&&(me=!0):(0,B.canMatchCharCode)(at,lt.PATTERN)&&(me=!0)}),le&&!me&&Se.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https:///Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:d.LexerDefinitionErrorType.NO_LINE_BREAKS_FLAGS}),Se}s.performWarningRuntimeChecks=Re;function de(ce){var le={},he=(0,N.default)(ce);return(0,C.default)(he,function(Se){var me=ce[Se];if((0,v.default)(me))le[Se]=[];else throw Error("non exhaustive match")}),le}s.cloneEmptyGroups=de;function Pe(ce){var le=ce.PATTERN;if((0,I.default)(le))return!1;if((0,T.default)(le))return!0;if((0,F.default)(le,"exec"))return!0;if((0,E.default)(le))return!1;throw Error("non exhaustive match")}s.isCustomPattern=Pe;function De(ce){return(0,E.default)(ce)&&ce.length===1?ce.charCodeAt(0):!1}s.isShortPattern=De,s.LineTerminatorOptimizedTester={test:function(ce){for(var le=ce.length,he=this.lastIndex;he<le;he++){var Se=ce.charCodeAt(he);if(Se===10)return this.lastIndex=he+1,!0;if(Se===13)return ce.charCodeAt(he+1)===10?this.lastIndex=he+2:this.lastIndex=he+1,!0}return!1},lastIndex:0};function Ke(ce,le){if((0,F.default)(ce,"LINE_BREAKS"))return!1;if((0,I.default)(ce.PATTERN)){try{(0,B.canMatchCharCode)(le,ce.PATTERN)}catch(he){return{issue:d.LexerDefinitionErrorType.IDENTIFY_TERMINATOR,errMsg:he.message}}return!1}else{if((0,E.default)(ce.PATTERN))return!1;if(Pe(ce))return{issue:d.LexerDefinitionErrorType.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function Be(ce,le){if(le.issue===d.LexerDefinitionErrorType.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
`+"	The problem is in the <".concat(ce.name,`> Token Type
`)+"	 Root cause: ".concat(le.errMsg,`.
`)+"	For details See: https:///Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR";if(le.issue===d.LexerDefinitionErrorType.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
`+"	The problem is in the <".concat(ce.name,`> Token Type
`)+"	For details See: https:///Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK";throw Error("non exhaustive match")}s.buildLineBreakIssueMessage=Be;function He(ce){var le=(0,S.default)(ce,function(he){return(0,E.default)(he)?he.charCodeAt(0):he});return le}function We(ce,le,he){ce[le]===void 0?ce[le]=[he]:ce[le].push(he)}s.minOptimizationVal=256;var yt=[];function bt(ce){return ce<s.minOptimizationVal?ce:yt[ce]}s.charCodeToOptimizedIndex=bt;function Mt(){if((0,_.default)(yt)){yt=new Array(65536);for(var ce=0;ce<65536;ce++)yt[ce]=ce>255?255+~~(ce/255):ce}}},495:(o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.defaultLexerErrorProvider=void 0,s.defaultLexerErrorProvider={buildUnableToPopLexerModeMessage:function(l){return"Unable to pop Lexer Mode after encountering Token ->".concat(l.image,"<- The Mode Stack is empty")},buildUnexpectedCharactersMessage:function(l,u,c,f,d){return"unexpected character: ->".concat(l.charAt(u),"<- at offset: ").concat(u,",")+" skipped ".concat(c," characters.")}}},9027:function(o,s,l){var u=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(s,"__esModule",{value:!0}),s.Lexer=s.LexerDefinitionErrorType=void 0;var c=l(6178),f=u(l(1607)),d=u(l(9787)),h=u(l(5589)),_=u(l(7875)),p=u(l(4171)),v=u(l(9107)),y=u(l(7734)),m=u(l(2096)),g=u(l(6474)),x=u(l(229)),b=u(l(311)),S=u(l(7682)),C=u(l(7953)),E=l(7146),T=l(1201),M=l(495),L=l(3067);(function(I){I[I.MISSING_PATTERN=0]="MISSING_PATTERN",I[I.INVALID_PATTERN=1]="INVALID_PATTERN",I[I.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",I[I.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",I[I.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",I[I.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",I[I.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",I[I.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",I[I.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",I[I.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",I[I.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",I[I.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",I[I.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",I[I.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",I[I.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",I[I.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",I[I.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",I[I.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(s.LexerDefinitionErrorType||(s.LexerDefinitionErrorType={}));var F={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:M.defaultLexerErrorProvider,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(F);var N=function(){function I(O,P){P===void 0&&(P=F);var R=this;if(this.lexerDefinition=O,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=function(D,B){if(R.traceInitPerf===!0){R.traceInitIndent++;var k=new Array(R.traceInitIndent+1).join("	");R.traceInitIndent<R.traceInitMaxIdent&&console.log("".concat(k,"--> <").concat(D,">"));var V=(0,E.timer)(B),U=V.time,j=V.value,G=U>10?console.warn:console.log;return R.traceInitIndent<R.traceInitMaxIdent&&G("".concat(k,"<-- <").concat(D,"> time: ").concat(U,"ms")),R.traceInitIndent--,j}else return B()},typeof P=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=(0,b.default)({},F,P);var A=this.config.traceInitPerf;A===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof A=="number"&&(this.traceInitMaxIdent=A,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",function(){var D,B=!0;R.TRACE_INIT("Lexer Config handling",function(){if(R.config.lineTerminatorsPattern===F.lineTerminatorsPattern)R.config.lineTerminatorsPattern=c.LineTerminatorOptimizedTester;else if(R.config.lineTerminatorCharacters===F.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https:///Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(P.safeMode&&P.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');R.trackStartLines=/full|onlyStart/i.test(R.config.positionTracking),R.trackEndLines=/full/i.test(R.config.positionTracking),(0,h.default)(O)?D={modes:{defaultMode:(0,C.default)(O)},defaultMode:c.DEFAULT_MODE}:(B=!1,D=(0,C.default)(O))}),R.config.skipValidations===!1&&(R.TRACE_INIT("performRuntimeChecks",function(){R.lexerDefinitionErrors=R.lexerDefinitionErrors.concat((0,c.performRuntimeChecks)(D,R.trackStartLines,R.config.lineTerminatorCharacters))}),R.TRACE_INIT("performWarningRuntimeChecks",function(){R.lexerDefinitionWarning=R.lexerDefinitionWarning.concat((0,c.performWarningRuntimeChecks)(D,R.trackStartLines,R.config.lineTerminatorCharacters))})),D.modes=D.modes?D.modes:{},(0,y.default)(D.modes,function(j,G){D.modes[G]=(0,p.default)(j,function($){return(0,g.default)($)})});var k=(0,m.default)(D.modes);if((0,y.default)(D.modes,function(j,G){R.TRACE_INIT("Mode: <".concat(G,"> processing"),function(){if(R.modes.push(G),R.config.skipValidations===!1&&R.TRACE_INIT("validatePatterns",function(){R.lexerDefinitionErrors=R.lexerDefinitionErrors.concat((0,c.validatePatterns)(j,k))}),(0,d.default)(R.lexerDefinitionErrors)){(0,T.augmentTokenTypes)(j);var $;R.TRACE_INIT("analyzeTokenTypes",function(){$=(0,c.analyzeTokenTypes)(j,{lineTerminatorCharacters:R.config.lineTerminatorCharacters,positionTracking:P.positionTracking,ensureOptimizations:P.ensureOptimizations,safeMode:P.safeMode,tracer:R.TRACE_INIT})}),R.patternIdxToConfig[G]=$.patternIdxToConfig,R.charCodeToPatternIdxToConfig[G]=$.charCodeToPatternIdxToConfig,R.emptyGroups=(0,b.default)({},R.emptyGroups,$.emptyGroups),R.hasCustom=$.hasCustom||R.hasCustom,R.canModeBeOptimized[G]=$.canBeOptimized}})}),R.defaultMode=D.defaultMode,!(0,d.default)(R.lexerDefinitionErrors)&&!R.config.deferDefinitionErrorsHandling){var V=(0,v.default)(R.lexerDefinitionErrors,function(j){return j.message}),U=V.join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+U)}(0,y.default)(R.lexerDefinitionWarning,function(j){(0,E.PRINT_WARNING)(j.message)}),R.TRACE_INIT("Choosing sub-methods implementations",function(){if(c.SUPPORT_STICKY?(R.chopInput=x.default,R.match=R.matchWithTest):(R.updateLastIndex=f.default,R.match=R.matchWithExec),B&&(R.handleModes=f.default),R.trackStartLines===!1&&(R.computeNewColumn=x.default),R.trackEndLines===!1&&(R.updateTokenEndLineColumnLocation=f.default),/full/i.test(R.config.positionTracking))R.createTokenInstance=R.createFullToken;else if(/onlyStart/i.test(R.config.positionTracking))R.createTokenInstance=R.createStartOnlyToken;else if(/onlyOffset/i.test(R.config.positionTracking))R.createTokenInstance=R.createOffsetOnlyToken;else throw Error('Invalid <positionTracking> config option: "'.concat(R.config.positionTracking,'"'));R.hasCustom?(R.addToken=R.addTokenUsingPush,R.handlePayload=R.handlePayloadWithCustom):(R.addToken=R.addTokenUsingMemberAccess,R.handlePayload=R.handlePayloadNoCustom)}),R.TRACE_INIT("Failed Optimization Warnings",function(){var j=(0,S.default)(R.canModeBeOptimized,function(G,$,W){return $===!1&&G.push(W),G},[]);if(P.ensureOptimizations&&!(0,d.default)(j))throw Error("Lexer Modes: < ".concat(j.join(", "),` > cannot be optimized.
`)+`	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),R.TRACE_INIT("clearRegExpParserCache",function(){(0,L.clearRegExpParserCache)()}),R.TRACE_INIT("toFastProperties",function(){(0,E.toFastProperties)(R)})})}return I.prototype.tokenize=function(O,P){if(P===void 0&&(P=this.defaultMode),!(0,d.default)(this.lexerDefinitionErrors)){var R=(0,v.default)(this.lexerDefinitionErrors,function(D){return D.message}),A=R.join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+A)}return this.tokenizeInternal(O,P)},I.prototype.tokenizeInternal=function(O,P){var R=this,A,D,B,k,V,U,j,G,$,W,K,q,Y,Q,re,ue=O,oe=ue.length,ee=0,xe=0,Te=this.hasCustom?0:Math.floor(O.length/10),Ce=new Array(Te),pe=[],J=this.trackStartLines?1:void 0,ae=this.trackStartLines?1:void 0,ne=(0,c.cloneEmptyGroups)(this.emptyGroups),ge=this.trackStartLines,se=this.config.lineTerminatorsPattern,Re=0,de=[],Pe=[],De=[],Ke=[];Object.freeze(Ke);var Be;function He(){return de}function We(Fe){var Ve=(0,c.charCodeToOptimizedIndex)(Fe),Ee=Pe[Ve];return Ee===void 0?Ke:Ee}var yt=function(Fe){if(De.length===1&&Fe.tokenType.PUSH_MODE===void 0){var Ve=R.config.errorMessageProvider.buildUnableToPopLexerModeMessage(Fe);pe.push({offset:Fe.startOffset,line:Fe.startLine,column:Fe.startColumn,length:Fe.image.length,message:Ve})}else{De.pop();var Ee=(0,_.default)(De);de=R.patternIdxToConfig[Ee],Pe=R.charCodeToPatternIdxToConfig[Ee],Re=de.length;var tt=R.canModeBeOptimized[Ee]&&R.config.safeMode===!1;Pe&&tt?Be=We:Be=He}};function bt(Fe){De.push(Fe),Pe=this.charCodeToPatternIdxToConfig[Fe],de=this.patternIdxToConfig[Fe],Re=de.length,Re=de.length;var Ve=this.canModeBeOptimized[Fe]&&this.config.safeMode===!1;Pe&&Ve?Be=We:Be=He}bt.call(this,P);for(var Mt,ce=this.config.recoveryEnabled;ee<oe;){U=null;var le=ue.charCodeAt(ee),he=Be(le),Se=he.length;for(A=0;A<Se;A++){Mt=he[A];var me=Mt.pattern;j=null;var Le=Mt.short;if(Le!==!1?le===Le&&(U=me):Mt.isCustom===!0?(re=me.exec(ue,ee,Ce,ne),re!==null?(U=re[0],re.payload!==void 0&&(j=re.payload)):U=null):(this.updateLastIndex(me,ee),U=this.match(me,O,ee)),U!==null){if(V=Mt.longerAlt,V!==void 0){var Qe=V.length;for(B=0;B<Qe;B++){var at=de[V[B]],lt=at.pattern;if(G=null,at.isCustom===!0?(re=lt.exec(ue,ee,Ce,ne),re!==null?(k=re[0],re.payload!==void 0&&(G=re.payload)):k=null):(this.updateLastIndex(lt,ee),k=this.match(lt,O,ee)),k&&k.length>U.length){U=k,j=G,Mt=at;break}}}break}}if(U!==null){if($=U.length,W=Mt.group,W!==void 0&&(K=Mt.tokenTypeIdx,q=this.createTokenInstance(U,ee,K,Mt.tokenType,J,ae,$),this.handlePayload(q,j),W===!1?xe=this.addToken(Ce,xe,q):ne[W].push(q)),O=this.chopInput(O,$),ee=ee+$,ae=this.computeNewColumn(ae,$),ge===!0&&Mt.canLineTerminator===!0){var ze=0,Rt=void 0,et=void 0;se.lastIndex=0;do Rt=se.test(U),Rt===!0&&(et=se.lastIndex-1,ze++);while(Rt===!0);ze!==0&&(J=J+ze,ae=$-et,this.updateTokenEndLineColumnLocation(q,W,et,ze,J,ae,$))}this.handleModes(Mt,yt,bt,q)}else{for(var Ne=ee,ct=J,Bt=ae,Oe=ce===!1;Oe===!1&&ee<oe;)for(O=this.chopInput(O,1),ee++,D=0;D<Re;D++){var Ye=de[D],me=Ye.pattern,Le=Ye.short;if(Le!==!1?ue.charCodeAt(ee)===Le&&(Oe=!0):Ye.isCustom===!0?Oe=me.exec(ue,ee,Ce,ne)!==null:(this.updateLastIndex(me,ee),Oe=me.exec(O)!==null),Oe===!0)break}if(Y=ee-Ne,Q=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(ue,Ne,Y,ct,Bt),pe.push({offset:Ne,line:ct,column:Bt,length:Y,message:Q}),ce===!1)break}}return this.hasCustom||(Ce.length=xe),{tokens:Ce,groups:ne,errors:pe}},I.prototype.handleModes=function(O,P,R,A){if(O.pop===!0){var D=O.push;P(A),D!==void 0&&R.call(this,D)}else O.push!==void 0&&R.call(this,O.push)},I.prototype.chopInput=function(O,P){return O.substring(P)},I.prototype.updateLastIndex=function(O,P){O.lastIndex=P},I.prototype.updateTokenEndLineColumnLocation=function(O,P,R,A,D,B,k){var V,U;P!==void 0&&(V=R===k-1,U=V?-1:0,A===1&&V===!0||(O.endLine=D+U,O.endColumn=B-1+-U))},I.prototype.computeNewColumn=function(O,P){return O+P},I.prototype.createOffsetOnlyToken=function(O,P,R,A){return{image:O,startOffset:P,tokenTypeIdx:R,tokenType:A}},I.prototype.createStartOnlyToken=function(O,P,R,A,D,B){return{image:O,startOffset:P,startLine:D,startColumn:B,tokenTypeIdx:R,tokenType:A}},I.prototype.createFullToken=function(O,P,R,A,D,B,k){return{image:O,startOffset:P,endOffset:P+k-1,startLine:D,endLine:D,startColumn:B,endColumn:B+k-1,tokenTypeIdx:R,tokenType:A}},I.prototype.addTokenUsingPush=function(O,P,R){return O.push(R),P},I.prototype.addTokenUsingMemberAccess=function(O,P,R){return O[P]=R,P++,P},I.prototype.handlePayloadNoCustom=function(O,P){},I.prototype.handlePayloadWithCustom=function(O,P){P!==null&&(O.payload=P)},I.prototype.matchWithTest=function(O,P,R){var A=O.test(P);return A===!0?P.substring(R,O.lastIndex):null},I.prototype.matchWithExec=function(O,P){var R=O.exec(P);return R!==null?R[0]:null},I.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",I.NA=/NOT_APPLICABLE/,I}();s.Lexer=N},1480:function(o,s,l){var u=this&&this.__extends||function(){var I=function(O,P){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,A){R.__proto__=A}||function(R,A){for(var D in A)Object.prototype.hasOwnProperty.call(A,D)&&(R[D]=A[D])},I(O,P)};return function(O,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");I(O,P);function R(){this.constructor=O}O.prototype=P===null?Object.create(P):(R.prototype=P.prototype,new R)}}(),c=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(s,"__esModule",{value:!0}),s.canMatchCharCode=s.firstCharOptimizedIndices=s.getOptimizedStartCodesIndices=s.failedOptimizationPrefixMsg=void 0;var f=l(7968),d=c(l(5589)),h=c(l(1198)),_=c(l(7734)),p=c(l(6969)),v=c(l(1682)),y=c(l(2876)),m=l(7146),g=l(3067),x=l(6178),b="Complement Sets are not supported for first char optimization";s.failedOptimizationPrefixMsg=`Unable to use "first char" lexer optimizations:
`;function S(I,O){O===void 0&&(O=!1);try{var P=(0,g.getRegExpAst)(I),R=C(P.value,{},P.flags.ignoreCase);return R}catch(D){if(D.message===b)O&&(0,m.PRINT_WARNING)("".concat(s.failedOptimizationPrefixMsg)+"	Unable to optimize: < ".concat(I.toString(),` >
`)+`	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https:///Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{var A="";O&&(A=`
	This will disable the lexer's first char optimizations.
	See: https:///Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),(0,m.PRINT_ERROR)("".concat(s.failedOptimizationPrefixMsg,`
`)+"	Failed parsing: < ".concat(I.toString(),` >
`)+"	Using the regexp-to-ast library version: ".concat(f.VERSION,`
`)+"	Please open an issue at: https://github.com/bd82/regexp-to-ast/issues"+A)}}return[]}s.getOptimizedStartCodesIndices=S;function C(I,O,P){switch(I.type){case"Disjunction":for(var R=0;R<I.value.length;R++)C(I.value[R],O,P);break;case"Alternative":for(var A=I.value,R=0;R<A.length;R++){var D=A[R];switch(D.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}var B=D;switch(B.type){case"Character":E(B.value,O,P);break;case"Set":if(B.complement===!0)throw Error(b);(0,_.default)(B.value,function(U){if(typeof U=="number")E(U,O,P);else{var j=U;if(P===!0)for(var G=j.from;G<=j.to;G++)E(G,O,P);else{for(var G=j.from;G<=j.to&&G<x.minOptimizationVal;G++)E(G,O,P);if(j.to>=x.minOptimizationVal)for(var $=j.from>=x.minOptimizationVal?j.from:x.minOptimizationVal,W=j.to,K=(0,x.charCodeToOptimizedIndex)($),q=(0,x.charCodeToOptimizedIndex)(W),Y=K;Y<=q;Y++)O[Y]=Y}}});break;case"Group":C(B.value,O,P);break;default:throw Error("Non Exhaustive Match")}var k=B.quantifier!==void 0&&B.quantifier.atLeast===0;if(B.type==="Group"&&L(B)===!1||B.type!=="Group"&&k===!1)break}break;default:throw Error("non exhaustive match!")}return(0,v.default)(O)}s.firstCharOptimizedIndices=C;function E(I,O,P){var R=(0,x.charCodeToOptimizedIndex)(I);O[R]=R,P===!0&&T(I,O)}function T(I,O){var P=String.fromCharCode(I),R=P.toUpperCase();if(R!==P){var A=(0,x.charCodeToOptimizedIndex)(R.charCodeAt(0));O[A]=A}else{var D=P.toLowerCase();if(D!==P){var A=(0,x.charCodeToOptimizedIndex)(D.charCodeAt(0));O[A]=A}}}function M(I,O){return(0,p.default)(I.value,function(P){if(typeof P=="number")return(0,y.default)(O,P);var R=P;return(0,p.default)(O,function(A){return R.from<=A&&A<=R.to})!==void 0})}function L(I){var O=I.quantifier;return O&&O.atLeast===0?!0:I.value?(0,d.default)(I.value)?(0,h.default)(I.value,L):L(I.value):!1}var F=function(I){u(O,I);function O(P){var R=I.call(this)||this;return R.targetCharCodes=P,R.found=!1,R}return O.prototype.visitChildren=function(P){if(this.found!==!0){switch(P.type){case"Lookahead":this.visitLookahead(P);return;case"NegativeLookahead":this.visitNegativeLookahead(P);return}I.prototype.visitChildren.call(this,P)}},O.prototype.visitCharacter=function(P){(0,y.default)(this.targetCharCodes,P.value)&&(this.found=!0)},O.prototype.visitSet=function(P){P.complement?M(P,this.targetCharCodes)===void 0&&(this.found=!0):M(P,this.targetCharCodes)!==void 0&&(this.found=!0)},O}(f.BaseRegExpVisitor);function N(I,O){if(O instanceof RegExp){var P=(0,g.getRegExpAst)(O),R=new F(I);return R.visit(P),R.found}else return(0,p.default)(O,function(A){return(0,y.default)(I,A.charCodeAt(0))})!==void 0}s.canMatchCharCode=N},3067:(o,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clearRegExpParserCache=s.getRegExpAst=void 0;var u=l(7968),c={},f=new u.RegExpParser;function d(_){var p=_.toString();if(c.hasOwnProperty(p))return c[p];var v=f.pattern(p);return c[p]=v,v}s.getRegExpAst=d;function h(){c={}}s.clearRegExpParserCache=h},1201:function(o,s,l){var u=this&&this.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(s,"__esModule",{value:!0}),s.isTokenType=s.hasExtendingTokensTypesMapProperty=s.hasExtendingTokensTypesProperty=s.hasCategoriesProperty=s.hasShortKeyProperty=s.singleAssignCategoriesToksMap=s.assignCategoriesMapProp=s.assignCategoriesTokensProp=s.assignTokenDefaultProps=s.expandCategories=s.augmentTokenTypes=s.tokenIdxToClass=s.tokenShortNameIdx=s.tokenStructuredMatcherNoCategories=s.tokenStructuredMatcher=void 0;var c=u(l(9787)),f=u(l(6494)),d=u(l(5589)),h=u(l(2923)),_=u(l(5271)),p=u(l(9107)),v=u(l(7734)),y=u(l(5346)),m=u(l(2876)),g=u(l(7953));function x(R,A){var D=R.tokenTypeIdx;return D===A.tokenTypeIdx?!0:A.isParent===!0&&A.categoryMatchesMap[D]===!0}s.tokenStructuredMatcher=x;function b(R,A){return R.tokenTypeIdx===A.tokenTypeIdx}s.tokenStructuredMatcherNoCategories=b,s.tokenShortNameIdx=1,s.tokenIdxToClass={};function S(R){var A=C(R);E(A),M(A),T(A),(0,v.default)(A,function(D){D.isParent=D.categoryMatches.length>0})}s.augmentTokenTypes=S;function C(R){for(var A=(0,g.default)(R),D=R,B=!0;B;){D=(0,f.default)((0,h.default)((0,p.default)(D,function(V){return V.CATEGORIES})));var k=(0,_.default)(D,A);A=A.concat(k),(0,c.default)(k)?B=!1:D=k}return A}s.expandCategories=C;function E(R){(0,v.default)(R,function(A){F(A)||(s.tokenIdxToClass[s.tokenShortNameIdx]=A,A.tokenTypeIdx=s.tokenShortNameIdx++),N(A)&&!(0,d.default)(A.CATEGORIES)&&(A.CATEGORIES=[A.CATEGORIES]),N(A)||(A.CATEGORIES=[]),I(A)||(A.categoryMatches=[]),O(A)||(A.categoryMatchesMap={})})}s.assignTokenDefaultProps=E;function T(R){(0,v.default)(R,function(A){A.categoryMatches=[],(0,v.default)(A.categoryMatchesMap,function(D,B){A.categoryMatches.push(s.tokenIdxToClass[B].tokenTypeIdx)})})}s.assignCategoriesTokensProp=T;function M(R){(0,v.default)(R,function(A){L([],A)})}s.assignCategoriesMapProp=M;function L(R,A){(0,v.default)(R,function(D){A.categoryMatchesMap[D.tokenTypeIdx]=!0}),(0,v.default)(A.CATEGORIES,function(D){var B=R.concat(A);(0,m.default)(B,D)||L(B,D)})}s.singleAssignCategoriesToksMap=L;function F(R){return(0,y.default)(R,"tokenTypeIdx")}s.hasShortKeyProperty=F;function N(R){return(0,y.default)(R,"CATEGORIES")}s.hasCategoriesProperty=N;function I(R){return(0,y.default)(R,"categoryMatches")}s.hasExtendingTokensTypesProperty=I;function O(R){return(0,y.default)(R,"categoryMatchesMap")}s.hasExtendingTokensTypesMapProperty=O;function P(R){return(0,y.default)(R,"tokenTypeIdx")}s.isTokenType=P},6736:function(o,s,l){var u=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(s,"__esModule",{value:!0}),s.tokenMatcher=s.createTokenInstance=s.EOF=s.createToken=s.hasTokenLabel=s.tokenName=s.tokenLabel=void 0;var c=u(l(6705)),f=u(l(5346)),d=u(l(6474)),h=l(9027),_=l(1201);function p(O){return y(O)?O.LABEL:O.name}s.tokenLabel=p;function v(O){return O.name}s.tokenName=v;function y(O){return(0,c.default)(O.LABEL)&&O.LABEL!==""}s.hasTokenLabel=y;var m="parent",g="categories",x="label",b="group",S="push_mode",C="pop_mode",E="longer_alt",T="line_breaks",M="start_chars_hint";function L(O){return F(O)}s.createToken=L;function F(O){var P=O.pattern,R={};if(R.name=O.name,(0,d.default)(P)||(R.PATTERN=P),(0,f.default)(O,m))throw`The parent property is no longer supported.
See: https://github.com//Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js//Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js/issues/564#issuecomment-349062346 for details.`;return(0,f.default)(O,g)&&(R.CATEGORIES=O[g]),(0,_.augmentTokenTypes)([R]),(0,f.default)(O,x)&&(R.LABEL=O[x]),(0,f.default)(O,b)&&(R.GROUP=O[b]),(0,f.default)(O,C)&&(R.POP_MODE=O[C]),(0,f.default)(O,S)&&(R.PUSH_MODE=O[S]),(0,f.default)(O,E)&&(R.LONGER_ALT=O[E]),(0,f.default)(O,T)&&(R.LINE_BREAKS=O[T]),(0,f.default)(O,M)&&(R.START_CHARS_HINT=O[M]),R}s.EOF=L({name:"EOF",pattern:h.Lexer.NA}),(0,_.augmentTokenTypes)([s.EOF]);function N(O,P,R,A,D,B,k,V){return{image:P,startOffset:R,endOffset:A,startLine:D,endLine:B,startColumn:k,endColumn:V,tokenTypeIdx:O.tokenTypeIdx,tokenType:O}}s.createTokenInstance=N;function I(O,P){return(0,_.tokenStructuredMatcher)(O,P)}s.tokenMatcher=I},7979:(o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.VERSION=void 0,s.VERSION="10.5.0"},8962:function(o,s,l){var u=this&&this.__assign||function(){return u=Object.assign||function(_){for(var p,v=1,y=arguments.length;v<y;v++){p=arguments[v];for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(_[m]=p[m])}return _},u.apply(this,arguments)};Object.defineProperty(s,"__esModule",{value:!0}),s.generateCstDts=void 0;var c=l(7842),f=l(1871),d={includeVisitorInterface:!0,visitorInterfaceName:"ICstNodeVisitor"};function h(_,p){var v=u(u({},d),p),y=(0,c.buildModel)(_);return(0,f.genDts)(y,v)}s.generateCstDts=h},1871:function(o,s,l){var u=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(s,"__esModule",{value:!0}),s.genDts=void 0;var c=u(l(2923)),f=u(l(5589)),d=u(l(9107)),h=u(l(7682)),_=u(l(292)),p=u(l(7584));function v(L,F){var N=[];return N=N.concat('import type { CstNode, ICstVisitor, IToken } from "/Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js";'),N=N.concat((0,c.default)((0,d.default)(L,function(I){return y(I)}))),F.includeVisitorInterface&&(N=N.concat(b(F.visitorInterfaceName,L))),N.join(`

`)+`
`}s.genDts=v;function y(L){var F=m(L),N=g(L);return[F,N]}function m(L){var F=T(L.name),N=M(L.name);return"export interface ".concat(F,` extends CstNode {
  name: "`).concat(L.name,`";
  children: `).concat(N,`;
}`)}function g(L){var F=M(L.name);return"export type ".concat(F,` = {
  `).concat((0,d.default)(L.properties,function(N){return x(N)}).join(`
  `),`
};`)}function x(L){var F=C(L.type);return"".concat(L.name).concat(L.optional?"?":"",": ").concat(F,"[];")}function b(L,F){return"export interface ".concat(L,`<IN, OUT> extends ICstVisitor<IN, OUT> {
  `).concat((0,d.default)(F,function(N){return S(N)}).join(`
  `),`
}`)}function S(L){var F=M(L.name);return"".concat(L.name,"(children: ").concat(F,", param?: IN): OUT;")}function C(L){if((0,f.default)(L)){var F=(0,_.default)((0,d.default)(L,function(I){return E(I)})),N=(0,h.default)(F,function(I,O){return I+" | "+O});return"("+N+")"}else return E(L)}function E(L){return L.kind==="token"?"IToken":T(L.name)}function T(L){return(0,p.default)(L)+"CstNode"}function M(L){return(0,p.default)(L)+"CstChildren"}},7842:function(o,s,l){var u=this&&this.__extends||function(){var b=function(S,C){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,T){E.__proto__=T}||function(E,T){for(var M in T)Object.prototype.hasOwnProperty.call(T,M)&&(E[M]=T[M])},b(S,C)};return function(S,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");b(S,C);function E(){this.constructor=S}S.prototype=C===null?Object.create(C):(E.prototype=C.prototype,new E)}}(),c=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(s,"__esModule",{value:!0}),s.buildModel=void 0;var f=l(7729),d=c(l(9107)),h=c(l(2923)),_=c(l(1682)),p=c(l(9040)),v=c(l(9907)),y=c(l(311));function m(b){var S=new g,C=(0,_.default)(b);return(0,d.default)(C,function(E){return S.visitRule(E)})}s.buildModel=m;var g=function(b){u(S,b);function S(){return b!==null&&b.apply(this,arguments)||this}return S.prototype.visitRule=function(C){var E=this.visitEach(C.definition),T=(0,v.default)(E,function(L){return L.propertyName}),M=(0,d.default)(T,function(L,F){var N=!(0,p.default)(L,function(O){return!O.canBeNull}),I=L[0].type;return L.length>1&&(I=(0,d.default)(L,function(O){return O.type})),{name:F,type:I,optional:N}});return{name:C.name,properties:M}},S.prototype.visitAlternative=function(C){return this.visitEachAndOverrideWith(C.definition,{canBeNull:!0})},S.prototype.visitOption=function(C){return this.visitEachAndOverrideWith(C.definition,{canBeNull:!0})},S.prototype.visitRepetition=function(C){return this.visitEachAndOverrideWith(C.definition,{canBeNull:!0})},S.prototype.visitRepetitionMandatory=function(C){return this.visitEach(C.definition)},S.prototype.visitRepetitionMandatoryWithSeparator=function(C){return this.visitEach(C.definition).concat({propertyName:C.separator.name,canBeNull:!0,type:x(C.separator)})},S.prototype.visitRepetitionWithSeparator=function(C){return this.visitEachAndOverrideWith(C.definition,{canBeNull:!0}).concat({propertyName:C.separator.name,canBeNull:!0,type:x(C.separator)})},S.prototype.visitAlternation=function(C){return this.visitEachAndOverrideWith(C.definition,{canBeNull:!0})},S.prototype.visitTerminal=function(C){return[{propertyName:C.label||C.terminalType.name,canBeNull:!1,type:x(C)}]},S.prototype.visitNonTerminal=function(C){return[{propertyName:C.label||C.nonTerminalName,canBeNull:!1,type:x(C)}]},S.prototype.visitEachAndOverrideWith=function(C,E){return(0,d.default)(this.visitEach(C),function(T){return(0,y.default)({},T,E)})},S.prototype.visitEach=function(C){var E=this;return(0,h.default)((0,d.default)(C,function(T){return E.visit(T)}))},S}(f.GAstVisitor);function x(b){return b instanceof f.NonTerminal?{kind:"rule",name:b.referencedRule.name}:{kind:"token"}}},7729:(o,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isSequenceProd=s.isBranchingProd=s.isOptionalProd=s.getProductionDslName=s.GAstVisitor=s.serializeProduction=s.serializeGrammar=s.Alternative=s.Alternation=s.RepetitionWithSeparator=s.RepetitionMandatoryWithSeparator=s.RepetitionMandatory=s.Repetition=s.Option=s.NonTerminal=s.Terminal=s.Rule=void 0;var u=l(5700);Object.defineProperty(s,"Rule",{enumerable:!0,get:function(){return u.Rule}}),Object.defineProperty(s,"Terminal",{enumerable:!0,get:function(){return u.Terminal}}),Object.defineProperty(s,"NonTerminal",{enumerable:!0,get:function(){return u.NonTerminal}}),Object.defineProperty(s,"Option",{enumerable:!0,get:function(){return u.Option}}),Object.defineProperty(s,"Repetition",{enumerable:!0,get:function(){return u.Repetition}}),Object.defineProperty(s,"RepetitionMandatory",{enumerable:!0,get:function(){return u.RepetitionMandatory}}),Object.defineProperty(s,"RepetitionMandatoryWithSeparator",{enumerable:!0,get:function(){return u.RepetitionMandatoryWithSeparator}}),Object.defineProperty(s,"RepetitionWithSeparator",{enumerable:!0,get:function(){return u.RepetitionWithSeparator}}),Object.defineProperty(s,"Alternation",{enumerable:!0,get:function(){return u.Alternation}}),Object.defineProperty(s,"Alternative",{enumerable:!0,get:function(){return u.Alternative}}),Object.defineProperty(s,"serializeGrammar",{enumerable:!0,get:function(){return u.serializeGrammar}}),Object.defineProperty(s,"serializeProduction",{enumerable:!0,get:function(){return u.serializeProduction}});var c=l(7694);Object.defineProperty(s,"GAstVisitor",{enumerable:!0,get:function(){return c.GAstVisitor}});var f=l(2515);Object.defineProperty(s,"getProductionDslName",{enumerable:!0,get:function(){return f.getProductionDslName}}),Object.defineProperty(s,"isOptionalProd",{enumerable:!0,get:function(){return f.isOptionalProd}}),Object.defineProperty(s,"isBranchingProd",{enumerable:!0,get:function(){return f.isBranchingProd}}),Object.defineProperty(s,"isSequenceProd",{enumerable:!0,get:function(){return f.isSequenceProd}})},2515:function(o,s,l){var u=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(s,"__esModule",{value:!0}),s.getProductionDslName=s.isBranchingProd=s.isOptionalProd=s.isSequenceProd=void 0;var c=u(l(9040)),f=u(l(1198)),d=u(l(2876)),h=l(5700);function _(m){return m instanceof h.Alternative||m instanceof h.Option||m instanceof h.Repetition||m instanceof h.RepetitionMandatory||m instanceof h.RepetitionMandatoryWithSeparator||m instanceof h.RepetitionWithSeparator||m instanceof h.Terminal||m instanceof h.Rule}s.isSequenceProd=_;function p(m,g){g===void 0&&(g=[]);var x=m instanceof h.Option||m instanceof h.Repetition||m instanceof h.RepetitionWithSeparator;return x?!0:m instanceof h.Alternation?(0,c.default)(m.definition,function(b){return p(b,g)}):m instanceof h.NonTerminal&&(0,d.default)(g,m)?!1:m instanceof h.AbstractProduction?(m instanceof h.NonTerminal&&g.push(m),(0,f.default)(m.definition,function(b){return p(b,g)})):!1}s.isOptionalProd=p;function v(m){return m instanceof h.Alternation}s.isBranchingProd=v;function y(m){if(m instanceof h.NonTerminal)return"SUBRULE";if(m instanceof h.Option)return"OPTION";if(m instanceof h.Alternation)return"OR";if(m instanceof h.RepetitionMandatory)return"AT_LEAST_ONE";if(m instanceof h.RepetitionMandatoryWithSeparator)return"AT_LEAST_ONE_SEP";if(m instanceof h.RepetitionWithSeparator)return"MANY_SEP";if(m instanceof h.Repetition)return"MANY";if(m instanceof h.Terminal)return"CONSUME";throw Error("non exhaustive match")}s.getProductionDslName=y},5700:function(o,s,l){var u=this&&this.__extends||function(){var P=function(R,A){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,B){D.__proto__=B}||function(D,B){for(var k in B)Object.prototype.hasOwnProperty.call(B,k)&&(D[k]=B[k])},P(R,A)};return function(R,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");P(R,A);function D(){this.constructor=R}R.prototype=A===null?Object.create(A):(D.prototype=A.prototype,new D)}}(),c=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(s,"__esModule",{value:!0}),s.serializeProduction=s.serializeGrammar=s.Terminal=s.Alternation=s.RepetitionWithSeparator=s.Repetition=s.RepetitionMandatoryWithSeparator=s.RepetitionMandatory=s.Option=s.Alternative=s.Rule=s.NonTerminal=s.AbstractProduction=void 0;var f=c(l(9107)),d=c(l(7734)),h=c(l(6705)),_=c(l(8290)),p=c(l(7383)),v=c(l(311));function y(P){return m(P)?P.LABEL:P.name}function m(P){return(0,h.default)(P.LABEL)&&P.LABEL!==""}var g=function(){function P(R){this._definition=R}return Object.defineProperty(P.prototype,"definition",{get:function(){return this._definition},set:function(R){this._definition=R},enumerable:!1,configurable:!0}),P.prototype.accept=function(R){R.visit(this),(0,d.default)(this.definition,function(A){A.accept(R)})},P}();s.AbstractProduction=g;var x=function(P){u(R,P);function R(A){var D=P.call(this,[])||this;return D.idx=1,(0,v.default)(D,(0,p.default)(A,function(B){return B!==void 0})),D}return Object.defineProperty(R.prototype,"definition",{get:function(){return this.referencedRule!==void 0?this.referencedRule.definition:[]},set:function(A){},enumerable:!1,configurable:!0}),R.prototype.accept=function(A){A.visit(this)},R}(g);s.NonTerminal=x;var b=function(P){u(R,P);function R(A){var D=P.call(this,A.definition)||this;return D.orgText="",(0,v.default)(D,(0,p.default)(A,function(B){return B!==void 0})),D}return R}(g);s.Rule=b;var S=function(P){u(R,P);function R(A){var D=P.call(this,A.definition)||this;return D.ignoreAmbiguities=!1,(0,v.default)(D,(0,p.default)(A,function(B){return B!==void 0})),D}return R}(g);s.Alternative=S;var C=function(P){u(R,P);function R(A){var D=P.call(this,A.definition)||this;return D.idx=1,(0,v.default)(D,(0,p.default)(A,function(B){return B!==void 0})),D}return R}(g);s.Option=C;var E=function(P){u(R,P);function R(A){var D=P.call(this,A.definition)||this;return D.idx=1,(0,v.default)(D,(0,p.default)(A,function(B){return B!==void 0})),D}return R}(g);s.RepetitionMandatory=E;var T=function(P){u(R,P);function R(A){var D=P.call(this,A.definition)||this;return D.idx=1,(0,v.default)(D,(0,p.default)(A,function(B){return B!==void 0})),D}return R}(g);s.RepetitionMandatoryWithSeparator=T;var M=function(P){u(R,P);function R(A){var D=P.call(this,A.definition)||this;return D.idx=1,(0,v.default)(D,(0,p.default)(A,function(B){return B!==void 0})),D}return R}(g);s.Repetition=M;var L=function(P){u(R,P);function R(A){var D=P.call(this,A.definition)||this;return D.idx=1,(0,v.default)(D,(0,p.default)(A,function(B){return B!==void 0})),D}return R}(g);s.RepetitionWithSeparator=L;var F=function(P){u(R,P);function R(A){var D=P.call(this,A.definition)||this;return D.idx=1,D.ignoreAmbiguities=!1,D.hasPredicates=!1,(0,v.default)(D,(0,p.default)(A,function(B){return B!==void 0})),D}return Object.defineProperty(R.prototype,"definition",{get:function(){return this._definition},set:function(A){this._definition=A},enumerable:!1,configurable:!0}),R}(g);s.Alternation=F;var N=function(){function P(R){this.idx=1,(0,v.default)(this,(0,p.default)(R,function(A){return A!==void 0}))}return P.prototype.accept=function(R){R.visit(this)},P}();s.Terminal=N;function I(P){return(0,f.default)(P,O)}s.serializeGrammar=I;function O(P){function R(k){return(0,f.default)(k,O)}if(P instanceof x){var A={type:"NonTerminal",name:P.nonTerminalName,idx:P.idx};return(0,h.default)(P.label)&&(A.label=P.label),A}else{if(P instanceof S)return{type:"Alternative",definition:R(P.definition)};if(P instanceof C)return{type:"Option",idx:P.idx,definition:R(P.definition)};if(P instanceof E)return{type:"RepetitionMandatory",idx:P.idx,definition:R(P.definition)};if(P instanceof T)return{type:"RepetitionMandatoryWithSeparator",idx:P.idx,separator:O(new N({terminalType:P.separator})),definition:R(P.definition)};if(P instanceof L)return{type:"RepetitionWithSeparator",idx:P.idx,separator:O(new N({terminalType:P.separator})),definition:R(P.definition)};if(P instanceof M)return{type:"Repetition",idx:P.idx,definition:R(P.definition)};if(P instanceof F)return{type:"Alternation",idx:P.idx,definition:R(P.definition)};if(P instanceof N){var D={type:"Terminal",name:P.terminalType.name,label:y(P.terminalType),idx:P.idx};(0,h.default)(P.label)&&(D.terminalLabel=P.label);var B=P.terminalType.PATTERN;return P.terminalType.PATTERN&&(D.pattern=(0,_.default)(B)?B.source:B),D}else{if(P instanceof b)return{type:"Rule",name:P.name,orgText:P.orgText,definition:R(P.definition)};throw Error("non exhaustive match")}}}s.serializeProduction=O},7694:(o,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GAstVisitor=void 0;var u=l(5700),c=function(){function f(){}return f.prototype.visit=function(d){var h=d;switch(h.constructor){case u.NonTerminal:return this.visitNonTerminal(h);case u.Alternative:return this.visitAlternative(h);case u.Option:return this.visitOption(h);case u.RepetitionMandatory:return this.visitRepetitionMandatory(h);case u.RepetitionMandatoryWithSeparator:return this.visitRepetitionMandatoryWithSeparator(h);case u.RepetitionWithSeparator:return this.visitRepetitionWithSeparator(h);case u.Repetition:return this.visitRepetition(h);case u.Alternation:return this.visitAlternation(h);case u.Terminal:return this.visitTerminal(h);case u.Rule:return this.visitRule(h);default:throw Error("non exhaustive match")}},f.prototype.visitNonTerminal=function(d){},f.prototype.visitAlternative=function(d){},f.prototype.visitOption=function(d){},f.prototype.visitRepetition=function(d){},f.prototype.visitRepetitionMandatory=function(d){},f.prototype.visitRepetitionMandatoryWithSeparator=function(d){},f.prototype.visitRepetitionWithSeparator=function(d){},f.prototype.visitAlternation=function(d){},f.prototype.visitTerminal=function(d){},f.prototype.visitRule=function(d){},f}();s.GAstVisitor=c},7146:(o,s,l)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toFastProperties=s.timer=s.PRINT_ERROR=s.PRINT_WARNING=void 0;var u=l(6910);Object.defineProperty(s,"PRINT_WARNING",{enumerable:!0,get:function(){return u.PRINT_WARNING}}),Object.defineProperty(s,"PRINT_ERROR",{enumerable:!0,get:function(){return u.PRINT_ERROR}});var c=l(150);Object.defineProperty(s,"timer",{enumerable:!0,get:function(){return c.timer}});var f=l(4470);Object.defineProperty(s,"toFastProperties",{enumerable:!0,get:function(){return f.toFastProperties}})},6910:(o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PRINT_WARNING=s.PRINT_ERROR=void 0;function l(c){console&&console.error&&console.error("Error: ".concat(c))}s.PRINT_ERROR=l;function u(c){console&&console.warn&&console.warn("Warning: ".concat(c))}s.PRINT_WARNING=u},150:(o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.timer=void 0;function l(u){var c=new Date().getTime(),f=u(),d=new Date().getTime(),h=d-c;return{time:h,value:f}}s.timer=l},4470:(o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toFastProperties=void 0;function l(u){function c(){}c.prototype=u;var f=new c;function d(){return typeof f.bar}return d(),d(),u}s.toFastProperties=l}},e={};function t(o){var s=e[o];if(s!==void 0)return s.exports;var l=e[o]={id:o,loaded:!1,exports:{}};return a[o].call(l.exports,l,l.exports,t),l.loaded=!0,l.exports}t.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),t.nmd=o=>(o.paths=[],o.children||(o.children=[]),o);var i={};return(()=>{var o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.Parser=o.createSyntaxDiagramsCode=o.clearCache=o.generateCstDts=o.GAstVisitor=o.serializeProduction=o.serializeGrammar=o.Terminal=o.Rule=o.RepetitionWithSeparator=o.RepetitionMandatoryWithSeparator=o.RepetitionMandatory=o.Repetition=o.Option=o.NonTerminal=o.Alternative=o.Alternation=o.defaultLexerErrorProvider=o.NoViableAltException=o.NotAllInputParsedException=o.MismatchedTokenException=o.isRecognitionException=o.EarlyExitException=o.defaultParserErrorProvider=o.LLkLookaheadStrategy=o.getLookaheadPaths=o.tokenName=o.tokenMatcher=o.tokenLabel=o.EOF=o.createTokenInstance=o.createToken=o.LexerDefinitionErrorType=o.Lexer=o.EMPTY_ALT=o.ParserDefinitionErrorType=o.EmbeddedActionsParser=o.CstParser=o.VERSION=void 0;var s=t(7979);Object.defineProperty(o,"VERSION",{enumerable:!0,get:function(){return s.VERSION}});var l=t(2941);Object.defineProperty(o,"CstParser",{enumerable:!0,get:function(){return l.CstParser}}),Object.defineProperty(o,"EmbeddedActionsParser",{enumerable:!0,get:function(){return l.EmbeddedActionsParser}}),Object.defineProperty(o,"ParserDefinitionErrorType",{enumerable:!0,get:function(){return l.ParserDefinitionErrorType}}),Object.defineProperty(o,"EMPTY_ALT",{enumerable:!0,get:function(){return l.EMPTY_ALT}});var u=t(9027);Object.defineProperty(o,"Lexer",{enumerable:!0,get:function(){return u.Lexer}}),Object.defineProperty(o,"LexerDefinitionErrorType",{enumerable:!0,get:function(){return u.LexerDefinitionErrorType}});var c=t(6736);Object.defineProperty(o,"createToken",{enumerable:!0,get:function(){return c.createToken}}),Object.defineProperty(o,"createTokenInstance",{enumerable:!0,get:function(){return c.createTokenInstance}}),Object.defineProperty(o,"EOF",{enumerable:!0,get:function(){return c.EOF}}),Object.defineProperty(o,"tokenLabel",{enumerable:!0,get:function(){return c.tokenLabel}}),Object.defineProperty(o,"tokenMatcher",{enumerable:!0,get:function(){return c.tokenMatcher}}),Object.defineProperty(o,"tokenName",{enumerable:!0,get:function(){return c.tokenName}});var f=t(4677);Object.defineProperty(o,"getLookaheadPaths",{enumerable:!0,get:function(){return f.getLookaheadPaths}});var d=t(7042);Object.defineProperty(o,"LLkLookaheadStrategy",{enumerable:!0,get:function(){return d.LLkLookaheadStrategy}});var h=t(1007);Object.defineProperty(o,"defaultParserErrorProvider",{enumerable:!0,get:function(){return h.defaultParserErrorProvider}});var _=t(643);Object.defineProperty(o,"EarlyExitException",{enumerable:!0,get:function(){return _.EarlyExitException}}),Object.defineProperty(o,"isRecognitionException",{enumerable:!0,get:function(){return _.isRecognitionException}}),Object.defineProperty(o,"MismatchedTokenException",{enumerable:!0,get:function(){return _.MismatchedTokenException}}),Object.defineProperty(o,"NotAllInputParsedException",{enumerable:!0,get:function(){return _.NotAllInputParsedException}}),Object.defineProperty(o,"NoViableAltException",{enumerable:!0,get:function(){return _.NoViableAltException}});var p=t(495);Object.defineProperty(o,"defaultLexerErrorProvider",{enumerable:!0,get:function(){return p.defaultLexerErrorProvider}});var v=t(7729);Object.defineProperty(o,"Alternation",{enumerable:!0,get:function(){return v.Alternation}}),Object.defineProperty(o,"Alternative",{enumerable:!0,get:function(){return v.Alternative}}),Object.defineProperty(o,"NonTerminal",{enumerable:!0,get:function(){return v.NonTerminal}}),Object.defineProperty(o,"Option",{enumerable:!0,get:function(){return v.Option}}),Object.defineProperty(o,"Repetition",{enumerable:!0,get:function(){return v.Repetition}}),Object.defineProperty(o,"RepetitionMandatory",{enumerable:!0,get:function(){return v.RepetitionMandatory}}),Object.defineProperty(o,"RepetitionMandatoryWithSeparator",{enumerable:!0,get:function(){return v.RepetitionMandatoryWithSeparator}}),Object.defineProperty(o,"RepetitionWithSeparator",{enumerable:!0,get:function(){return v.RepetitionWithSeparator}}),Object.defineProperty(o,"Rule",{enumerable:!0,get:function(){return v.Rule}}),Object.defineProperty(o,"Terminal",{enumerable:!0,get:function(){return v.Terminal}});var y=t(7729);Object.defineProperty(o,"serializeGrammar",{enumerable:!0,get:function(){return y.serializeGrammar}}),Object.defineProperty(o,"serializeProduction",{enumerable:!0,get:function(){return y.serializeProduction}}),Object.defineProperty(o,"GAstVisitor",{enumerable:!0,get:function(){return y.GAstVisitor}});var m=t(8962);Object.defineProperty(o,"generateCstDts",{enumerable:!0,get:function(){return m.generateCstDts}});function g(){console.warn(`The clearCache function was 'soft' removed from the Chevrotain API.
	 It performs no action other than printing this message.
	 Please avoid using it as it will be completely removed in the future`)}o.clearCache=g;var x=t(5781);Object.defineProperty(o,"createSyntaxDiagramsCode",{enumerable:!0,get:function(){return x.createSyntaxDiagramsCode}});var b=function(){function S(){throw new Error(`The Parser class has been deprecated, use CstParser or EmbeddedActionsParser instead.	
See: https:///Users/guolei/Code/Galacean/engine/packages/shader-lab/node_modules/chevrotain/lib/chevrotain.js.io/docs/changes/BREAKING_CHANGES.html#_7-0-0`)}return S}();o.Parser=b})(),i})())}),iv=nt.createToken({name:"ValueInt",pattern:/-?\d+/}),R0=nt.createToken({name:"ValueFloat",pattern:/-?\d+\.\d+/}),jo=nt.createToken({name:"ValueString",pattern:/"[\w-\s/\.]*"/}),ZP=nt.createToken({name:"ValueTrue",pattern:/true/}),eM=nt.createToken({name:"ValueFalse",pattern:/false/}),J9=[R0,iv,jo,ZP,eM];function vp(){return vp=Object.assign||function(r){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}return r},vp.apply(this,arguments)}var je=function(){function n(){}return n.createKeywordToken=function(a,e){return nt.createToken(vp({label:a,name:a,pattern:new RegExp(a)},e))},n.createKeywordTokenWithPrefix=function(a,e,t){var i=e+"."+a;return n.createKeywordToken(i,t)},n.getEnumKeys=function(a){return Object.values(a).filter(function(e){return isNaN(Number(e))}).sort(function(e,t){return t.length-e.length})},n}(),tM=je.createKeywordToken("Shader",{longer_alt:jo}),nM=je.createKeywordToken("SubShader"),rM=je.createKeywordToken("Pass"),aM=je.createKeywordToken("Tags");je.createKeywordToken("ReplacementTag");je.createKeywordToken("PipelineStage");var iM=je.createKeywordToken("VertexShader"),oM=je.createKeywordToken("FragmentShader"),sM=je.createKeywordToken("UsePass"),lM=je.createKeywordToken("in "),uM=je.createKeywordToken("out "),cM=je.createKeywordToken("inout "),fM=je.createKeywordToken("const "),Z9=[tM,nM,rM,aM,iM,oM,sM,lM,uM,cM,fM],di=nt.createToken({name:"LCurly",pattern:/\{/,label:"{"}),hi=nt.createToken({name:"RCurly",pattern:/\}/,label:"}"}),_l=nt.createToken({name:"LBracket",pattern:/\(/,label:"("}),gl=nt.createToken({name:"RBracket",pattern:/\)/,label:")"}),A0=nt.createToken({name:"LSquareBracket",pattern:/\[/,label:"["}),w0=nt.createToken({name:"RSquareBracket",pattern:/\]/,label:"]"}),mu=nt.createToken({name:"Comma",pattern:/,/,label:","}),dM=nt.createToken({name:"Colon",pattern:/:/,label:":"}),co=nt.createToken({name:"SymbolEqual",pattern:/=/,label:"="}),Rr=nt.createToken({name:"Semicolon",pattern:/;/,label:";"}),P0=nt.createToken({name:"Dot",pattern:/\./,label:"."}),hM=nt.createToken({name:"SymbolAdd",pattern:/\+/,label:"+"}),vM=nt.createToken({name:"SymbolMinus",pattern:/\-/,label:"-"}),pM=nt.createToken({name:"SymbolMultiEqual",pattern:/\*=/,label:"*="}),_M=nt.createToken({name:"SymbolDivideEqual",pattern:/\/=/,label:"/="}),gM=nt.createToken({name:"SymbolAddEqual",pattern:/\+=/,label:"+="}),mM=nt.createToken({name:"SymbolMinusEqual",pattern:/\-=/,label:"-="}),yM=nt.createToken({name:"SymbolMultiply",pattern:/\*/,label:"*"}),xM=nt.createToken({name:"SymbolDivide",pattern:/\//,label:"/"}),SM=nt.createToken({name:"SelfAdd",pattern:/\+\+/,label:"++"}),bM=nt.createToken({name:"SelfMinus",pattern:/\-\-/,label:"--"}),CM=nt.createToken({name:"Expo",pattern:/e[-+]?\d+/,label:"exp"}),M0=nt.createToken({name:"Negative",pattern:/\!/,label:"!"}),EM=nt.createToken({name:"Query",pattern:/\?/,label:"?"}),eG=[SM,bM,di,hi,_l,gl,A0,w0,mu,dM,co,Rr,pM,_M,gM,mM,hM,vM,yM,xM,P0,CM,M0,EM],tG=nt.createToken({name:"SymbolGreaterThan",pattern:/\>/,label:">"}),nG=nt.createToken({name:"SymbolGreaterEqual",pattern:/\>=/,label:">="}),rG=nt.createToken({name:"SymbolLessThan",pattern:/\</,label:"<"}),aG=nt.createToken({name:"SymbolLessEqual",pattern:/\<=/,label:"<="}),iG=nt.createToken({name:"SymbolEqualThan",pattern:/==/,label:"=="}),oG=nt.createToken({name:"SymbolNotEqual",pattern:/\!=/,label:"!="}),sG=nt.createToken({name:"AND",pattern:/\&\&/,label:"&&"}),lG=nt.createToken({name:"OR",pattern:/\|\|/,label:"||"}),uG=nt.createToken({name:"BitwiseOR",pattern:/\|/,label:"|"}),cG=nt.createToken({name:"BitwiseAND",pattern:/\&/,label:"&"}),TM=[nG,tG,aG,rG,iG,oG,sG,lG,cG,uG],fG=nt.createToken({name:"glsl_mat2",pattern:/mat2\s/}),dG=nt.createToken({name:"glsl_mat3",pattern:/mat3\s/}),hG=nt.createToken({name:"glsl_mat4",pattern:/mat4\s/}),vG=nt.createToken({name:"glsl_vec2",pattern:/vec2\s/}),pG=nt.createToken({name:"glsl_vec3",pattern:/vec3\s/}),_G=nt.createToken({name:"glsl_vec4",pattern:/vec4\s/}),gG=nt.createToken({name:"glsl_ivec2",pattern:/ivec2\s/}),mG=nt.createToken({name:"glsl_ivec3",pattern:/ivec3\s/}),yG=nt.createToken({name:"glsl_ivec4",pattern:/ivec4\s/}),xG=nt.createToken({name:"glsl_float",pattern:/float\s/}),SG=nt.createToken({name:"glsl_int",pattern:/int\s/}),bG=nt.createToken({name:"glsl_sampler2D",pattern:/sampler2D\s/}),CG=nt.createToken({name:"sampler2DArray",pattern:/sampler2DArray /}),O0=[gG,mG,yG,fG,dG,hG,vG,pG,_G,xG,SG,CG,bG],EG=nt.createToken({name:"glsl_highp",pattern:/highp/}),TG=nt.createToken({name:"glsl_mediump",pattern:/mediump/}),RG=nt.createToken({name:"glsl_lowp",pattern:/lowp/}),RM=[EG,TG,RG],AM=je.createKeywordToken("texture2D"),wM=je.createKeywordToken("#define",{name:"m_define"}),PM=je.createKeywordToken("#if",{name:"m_if"}),MM=je.createKeywordToken("#ifdef",{name:"m_ifdef"}),OM=je.createKeywordToken("#ifndef",{name:"m_ifndef"}),I0=je.createKeywordToken("#else",{name:"m_else"}),L0=je.createKeywordToken("#elif",{name:"m_elif"}),N0=je.createKeywordToken("#endif",{name:"m_endif"}),IM=je.createKeywordToken("#undef",{name:"m_undefine"}),AG=je.createKeywordToken("#include",{name:"m_include"}),LM=je.createKeywordToken("struct"),NM=je.createKeywordToken("if"),F0=je.createKeywordToken("else"),FM=je.createKeywordToken("discard"),DM=je.createKeywordToken("break"),BM=je.createKeywordToken("continue"),kM=je.createKeywordToken("void"),VM=je.createKeywordToken("return"),UM=je.createKeywordToken("for"),wG=[AM],PG=[wM,MM,OM,PM,I0,L0,N0,IM,AG],MG=[LM,NM,F0,FM,kM,VM,UM,DM,BM],nr=nt.createToken({name:"Identifier",pattern:/[_a-zA-Z][_a-zA-Z0-9]*/}),OG=nt.createToken({name:"WhiteSpace",pattern:/(\s|\n)+/,group:nt.Lexer.SKIPPED}),IG=nt.createToken({name:"CommentLine",pattern:/\/\/.*\n/,group:nt.Lexer.SKIPPED}),LG=nt.createToken({name:"CommentMultiLine",pattern:/\/\*\*(.|\s)*?\*\//,group:nt.Lexer.SKIPPED}),NG=je.createKeywordToken("ColorBlendOperation"),FG=je.createKeywordToken("AlphaBlendOperation"),DG=je.createKeywordToken("SourceColorBlendFactor"),BG=je.createKeywordToken("SourceAlphaBlendFactor"),kG=je.createKeywordToken("DestinationColorBlendFactor"),VG=je.createKeywordToken("DestinationAlphaBlendFactor"),UG=je.createKeywordToken("ColorWriteMask"),zG=je.createKeywordToken("BlendColor"),GG=je.createKeywordToken("AlphaToCoverage"),Nx={ColorBlendOperation:NG,AlphaBlendOperation:FG,SourceColorBlendFactor:DG,SourceAlphaBlendFactor:BG,DestinationColorBlendFactor:kG,DestinationAlphaBlendFactor:VG,ColorWriteMask:UG},zM={BlendColor:zG,AlphaToCoverage:GG},GM=je.getEnumKeys(Mr).map(function(n){return je.createKeywordTokenWithPrefix(n,"BlendOperation")}),HM=je.getEnumKeys(jt).map(function(n){return je.createKeywordTokenWithPrefix(n,"BlendFactor")}),HG=je.createKeywordToken("WriteEnabled"),jG=je.createKeywordToken("CompareFunction"),jM={WriteEnabled:HG,CompareFunction:jG},WG=je.createKeywordToken("CullMode"),$G=je.createKeywordToken("DepthBias"),XG=je.createKeywordToken("SlopeScaledDepthBias"),WM={CullMode:WG,DepthBias:$G,SlopeScaledDepthBias:XG},$M=je.getEnumKeys(Fr).map(function(n){return je.createKeywordTokenWithPrefix(n,"CullMode")}),KG=je.createKeywordToken("BlendState"),YG=je.createKeywordToken("DepthState"),QG=je.createKeywordToken("StencilState"),qG=je.createKeywordToken("RasterState"),yu={BlendState:KG,DepthState:YG,StencilState:QG,RasterState:qG},JG=je.createKeywordToken("ReferenceValue"),ZG=je.createKeywordToken("Mask"),eH=je.createKeywordToken("WriteMask"),tH=je.createKeywordToken("CompareFunctionFront"),nH=je.createKeywordToken("CompareFunctionBack"),rH=je.createKeywordToken("PassOperationFront"),aH=je.createKeywordToken("PassOperationBack"),iH=je.createKeywordToken("FailOperationFront"),oH=je.createKeywordToken("FailOperationBack"),sH=je.createKeywordToken("ZFailOperationFront"),lH=je.createKeywordToken("ZFailOperationBack"),XM={ReferenceValue:JG,Mask:ZG,WriteMask:eH,CompareFunctionFront:tH,CompareFunctionBack:nH,PassOperationFront:rH,PassOperationBack:aH,FailOperationFront:iH,FailOperationBack:oH,ZFailOperationFront:sH,ZFailOperationBack:lH},KM=je.getEnumKeys(Tn).map(function(n){return je.createKeywordTokenWithPrefix(n,"StencilOperation")}),hf=je.createKeywordToken("Enabled"),YM=je.getEnumKeys(Xt).map(function(n){return je.createKeywordTokenWithPrefix(n,"CompareFunction")}),QM=je.getEnumKeys(ar).map(function(n){return je.createKeywordTokenWithPrefix(n,"RenderQueueType")}),qM=je.createKeywordToken("RenderQueueType"),FE=[].concat(OG,IG,LG,wG,PG,MG,TM,eG,J9,O0,RM,HM,GM,YM,Object.values(Nx),Object.values(zM),$M,Object.values(XM),Object.values(jM),hf,Object.values(WM),Object.values(yu),KM,QM,qM,Z9,nr),uH=function(n){Je(r,n);function r(){var e;return e=n.call(this,FE,{maxLookahead:7})||this,e.ruleShader=e.RULE("_ruleShader",function(){e.CONSUME(tM),e.CONSUME(jo),e.CONSUME(di),e.MANY(function(){e.OR([{ALT:function(){return e.SUBRULE(e._ruleSubShader)}},{ALT:function(){return e.SUBRULE(e._ruleRenderStateDeclaration)}},{ALT:function(){return e.SUBRULE(e._ruleTag)}},{ALT:function(){return e.SUBRULE(e._ruleStruct)}},{ALT:function(){return e.SUBRULE(e._ruleFn)}},{ALT:function(){return e.SUBRULE(e._ruleShaderPropertyDeclare)}}])}),e.CONSUME(hi)}),e._ruleSubShader=e.RULE("_ruleSubShader",function(){e.CONSUME(nM),e.CONSUME(jo),e.CONSUME(di),e.MANY(function(){e.OR([{ALT:function(){return e.SUBRULE(e._ruleShaderPass)}},{ALT:function(){return e.SUBRULE(e._ruleUsePass)}},{ALT:function(){return e.SUBRULE(e._ruleTag)}},{ALT:function(){return e.SUBRULE(e._ruleRenderStateDeclaration)}},{ALT:function(){return e.SUBRULE(e._ruleStruct)}},{ALT:function(){return e.SUBRULE(e._ruleFn)}},{ALT:function(){return e.SUBRULE(e._ruleShaderPropertyDeclare)}}])}),e.CONSUME(hi)}),e._ruleUsePass=e.RULE("_ruleUsePass",function(){e.CONSUME(sM),e.CONSUME(jo)}),e._ruleShaderPass=e.RULE("_ruleShaderPass",function(){e.CONSUME(rM),e.CONSUME(jo),e.CONSUME(di),e.MANY(function(){e.OR([{ALT:function(){return e.SUBRULE(e._ruleTag)}},{ALT:function(){return e.SUBRULE(e._ruleStruct)}},{ALT:function(){return e.SUBRULE(e._ruleFn)}},{ALT:function(){return e.SUBRULE(e._ruleShaderPropertyDeclare)}},{ALT:function(){return e.SUBRULE(e._rulePassPropertyAssignment)}},{ALT:function(){return e.SUBRULE(e._ruleRenderQueueAssignment)}},{ALT:function(){return e.SUBRULE(e._ruleRenderStateDeclaration)}},{ALT:function(){return e.SUBRULE(e._ruleFnMacro)}}])}),e.CONSUME(hi)}),e._ruleShaderPropertyDeclare=e.RULE("_ruleShaderPropertyDeclare",function(){e.OPTION(function(){return e.SUBRULE(e._rulePrecisionPrefix)}),e.SUBRULE(e._ruleDeclarationWithoutAssign)}),e._rulePrecisionPrefix=e.RULE("_rulePrecisionPrefix",function(){e.OR(RM.map(function(t){return{ALT:function(){return e.CONSUME(t)}}}))}),e._ruleStruct=e.RULE("_ruleStruct",function(){e.CONSUME(LM),e.CONSUME(nr),e.CONSUME(di),e.MANY(function(){e.OR([{ALT:function(){return e.SUBRULE(e._ruleDeclarationWithoutAssign)}},{ALT:function(){return e.SUBRULE(e._ruleStructMacroConditionalField)}}])}),e.CONSUME(hi)}),e._ruleDeclarationWithoutAssign=e.RULE("_ruleDeclarationWithoutAssign",function(){e.SUBRULE(e._ruleVariableType),e.SUBRULE(e._ruleFnVariable),e.CONSUME(Rr)}),e._ruleVariableType=e.RULE("_ruleVariableType",function(){var t=O0.map(function(i){return{ALT:function(){return e.CONSUME(i)}}});e.OR([].concat(t,{ALT:function(){return e.CONSUME(nr)}}))}),e._ruleTag=e.RULE("_ruleTag",function(){e.CONSUME(aM),e.CONSUME(di),e.MANY_SEP({DEF:function(){e.SUBRULE(e._ruleTagAssignment)},SEP:mu}),e.CONSUME(hi)}),e._ruleTagAssignment=e.RULE("_ruleTagAssignment",function(){e.CONSUME(nr),e.CONSUME(co),e.SUBRULE(e._ruleTagAssignableValue)}),e._ruleTagAssignableValue=e.RULE("_ruleTagAssignableValue",function(){e.OR([{ALT:function(){return e.SUBRULE(e._ruleNumber)}},{ALT:function(){return e.SUBRULE(e._ruleBoolean)}},{ALT:function(){return e.CONSUME(jo)}}])}),e._ruleFn=e.RULE("_ruleFn",function(){e.OPTION(function(){return e.SUBRULE(e._rulePrecisionPrefix)}),e.SUBRULE(e._ruleFnReturnType),e.CONSUME1(nr),e.CONSUME1(_l),e.MANY_SEP({SEP:mu,DEF:function(){return e.SUBRULE(e._ruleFnArg)}}),e.CONSUME(gl),e.CONSUME(di),e.SUBRULE(e._ruleFnBody),e.CONSUME(hi)}),e._ruleFnReturnType=e.RULE("_ruleFnReturnType",function(){e.OR([{ALT:function(){return e.SUBRULE(e._ruleVariableType)}},{ALT:function(){return e.CONSUME(kM)}}])}),e._ruleFnArgDecorator=e.RULE("_ruleFnArgDecorator",function(){e.OR([{ALT:function(){return e.CONSUME(cM)}},{ALT:function(){return e.CONSUME(lM)}},{ALT:function(){return e.CONSUME(uM)}}])}),e._ruleFnArg=e.RULE("_ruleFnArg",function(){e.OR([{ALT:function(){e.OPTION(function(){return e.SUBRULE(e._ruleFnArgDecorator)}),e.SUBRULE(e._ruleVariableType),e.CONSUME2(nr),e.OPTION1(function(){return e.SUBRULE(e._ruleArrayIndex)})}},{ALT:function(){return e.SUBRULE(e._ruleUseMacro)}}])}),e._ruleUseMacro=e.RULE("_ruleUseMacro",function(){e.OR([{ALT:function(){return e.SUBRULE(e._ruleFnCall)}},{ALT:function(){return e.CONSUME(nr)}}])}),e._ruleFnBody=e.RULE("_ruleFnBody",function(){e.MANY(function(){e.OR([{ALT:function(){return e.SUBRULE(e._ruleFnMacro)}},{ALT:function(){return e.SUBRULE(e._ruleFnStatement)}}])})}),e._ruleFnMacro=e.RULE("_ruleFnMacro",function(){e.OR([{ALT:function(){return e.SUBRULE(e._ruleFnMacroDefine)}},{ALT:function(){return e.SUBRULE(e._ruleFnMacroCondition)}},{ALT:function(){return e.SUBRULE(e._ruleFnMacroUndefine)}}])}),e._ruleFnMacroConditionBody=e.RULE("_ruleFnMacroConditionBody",function(){e.MANY(function(){e.OR([{ALT:function(){return e.SUBRULE(e._ruleStruct)}},{ALT:function(){return e.SUBRULE(e._ruleFnBody)}}])})}),e._ruleStructMacroConditionBody=e.RULE("_ruleStructMacroConditionBody",function(){e.MANY(function(){e.OR([{ALT:function(){return e.SUBRULE(e._ruleDeclarationWithoutAssign)}},{ALT:function(){return e.SUBRULE(e._ruleStructMacroConditionalField)}}])})}),e._ruleStructMacroConditionalField=e.RULE("_ruleStructMacroConditionalField",function(){e.SUBRULE(e._ruleFnMacroConditionDeclare),e.SUBRULE(e._ruleConditionExpr),e.SUBRULE(e._ruleStructMacroConditionBody),e.OPTION(function(){e.SUBRULE(e._ruleStructMacroElifBranch)}),e.OPTION1(function(){e.SUBRULE(e._ruleStructMacroConditionElseBranch)}),e.CONSUME(N0)}),e._ruleFnMacroCondition=e.RULE("_ruleFnMacroCondition",function(){e.SUBRULE(e._ruleFnMacroConditionDeclare),e.SUBRULE(e._ruleConditionExpr),e.SUBRULE(e._ruleFnMacroConditionBody),e.MANY(function(){e.SUBRULE(e._ruleMacroConditionElifBranch)}),e.OPTION1(function(){e.SUBRULE(e._ruleFnMacroConditionElseBranch)}),e.CONSUME(N0)}),e._ruleFnMacroConditionDeclare=e.RULE("_ruleFnMacroConditionDeclare",function(){e.OR([{ALT:function(){return e.CONSUME(MM)}},{ALT:function(){return e.CONSUME(OM)}},{ALT:function(){return e.CONSUME(PM)}}])}),e._ruleStructMacroConditionElseBranch=e.RULE("_ruleStructMacroConditionElseBranch",function(){e.CONSUME(I0),e.SUBRULE(e._ruleStructMacroConditionBody)}),e._ruleFnMacroConditionElseBranch=e.RULE("_ruleFnMacroConditionElseBranch",function(){e.CONSUME(I0),e.SUBRULE(e._ruleFnMacroConditionBody)}),e._ruleStructMacroElifBranch=e.RULE("_ruleStructMacroElifBranch",function(){e.CONSUME(L0),e.SUBRULE(e._ruleConditionExpr),e.SUBRULE(e._ruleStructMacroConditionBody)}),e._ruleMacroConditionElifBranch=e.RULE("_ruleMacroConditionElifBranch",function(){e.CONSUME(L0),e.SUBRULE(e._ruleConditionExpr),e.SUBRULE(e._ruleFnMacroConditionBody)}),e._ruleFnMacroDefine=e.RULE("_ruleFnMacroDefine",function(){e.CONSUME(wM),e.SUBRULE(e._ruleMacroDefineVariable),e.OPTION(function(){e.SUBRULE(e._ruleMacroDefineValue)})}),e._ruleMacroDefineVariable=e.RULE("_ruleMacroDefineVariable",function(){e.OR([{ALT:function(){return e.SUBRULE(e._ruleFnCall)}},{ALT:function(){return e.CONSUME(nr)}}])}),e._ruleMacroDefineValue=e.RULE("_ruleMacroDefineValue",function(){e.OR([{ALT:function(){return e.SUBRULE(e._ruleFnVariableDeclaration)}},{ALT:function(){return e.SUBRULE(e._ruleAssignableValue)}}])}),e._ruleFnMacroUndefine=e.RULE("_ruleFnMacroUndefine",function(){e.CONSUME(IM),e.CONSUME(nr)}),e._ruleAssignableValue=e.RULE("_ruleAssignableValue",function(){e.OR([{ALT:function(){return e.SUBRULE(e._ruleBoolean)}},{ALT:function(){return e.CONSUME(jo)}},{ALT:function(){return e.SUBRULE(e._ruleFnExpression)}}])}),e._ruleFnAddExpr=e.RULE("_ruleFnAddExpr",function(){e.SUBRULE(e._ruleFnMultiplicationExpr),e.MANY(function(){e.SUBRULE(e._ruleAddOperator),e.SUBRULE2(e._ruleFnMultiplicationExpr)})}),e._ruleFnMultiplicationExpr=e.RULE("_ruleFnMultiplicationExpr",function(){e.SUBRULE(e._ruleFnAtomicExpr),e.MANY(function(){e.SUBRULE(e._ruleMultiplicationOperator),e.SUBRULE2(e._ruleFnAtomicExpr)})}),e._ruleFnAtomicExpr=e.RULE("_ruleFnAtomicExpr",function(){e.OPTION(function(){return e.SUBRULE(e._ruleAddOperator)}),e.OR([{ALT:function(){return e.SUBRULE(e._ruleFnParenthesisAtomicExpr)}},{ALT:function(){return e.SUBRULE(e._ruleNumber)}},{ALT:function(){return e.SUBRULE(e._ruleFnCall)}},{ALT:function(){return e.SUBRULE(e._ruleFnVariable)}}])}),e._ruleAddOperator=e.RULE("_ruleAddOperator",function(){e.OR([{ALT:function(){return e.CONSUME(hM)}},{ALT:function(){return e.CONSUME(vM)}},{ALT:function(){return e.CONSUME(M0)}}])}),e._ruleFnParenthesisExpr=e.RULE("_ruleFnParenthesisExpr",function(){e.CONSUME(_l),e.SUBRULE(e._ruleConditionExpr),e.CONSUME(gl)}),e._ruleFnParenthesisAtomicExpr=e.RULE("_ruleFnParenthesisAtomicExpr",function(){e.SUBRULE(e._ruleFnParenthesisExpr),e.OPTION(function(){e.CONSUME(P0),e.SUBRULE(e._ruleFnVariable)})}),e._ruleNumber=e.RULE("_ruleNumber",function(){e.OR([{ALT:function(){return e.CONSUME1(iv)}},{ALT:function(){return e.CONSUME(R0)}}]),e.OPTION(function(){return e.CONSUME(CM)})}),e._ruleFnCall=e.RULE("_ruleFnCall",function(){e.SUBRULE(e._ruleFnCallVariable),e.CONSUME1(_l),e.MANY_SEP({SEP:mu,DEF:function(){e.SUBRULE(e._ruleAssignableValue)}}),e.CONSUME(gl)}),e._ruleFnCallVariable=e.RULE("_ruleFnCallVariable",function(){e.OR([].concat(O0.map(function(t){return{ALT:function(){return e.CONSUME(t)}}}),{ALT:function(){return e.CONSUME(AM)}},{ALT:function(){return e.CONSUME(nr)}}))}),e._ruleFnVariable=e.RULE("_ruleFnVariable",function(){e.CONSUME(nr),e.MANY(function(){e.OR([{ALT:function(){return e.SUBRULE(e._ruleFnVariableProperty)}},{ALT:function(){return e.SUBRULE(e._ruleArrayIndex)}}])})}),e._ruleFnVariableProperty=e.RULE("_ruleFnVariableProperty",function(){e.CONSUME(P0),e.CONSUME1(nr)}),e._ruleArrayIndex=e.RULE("_ruleArrayIndex",function(){e.CONSUME(A0),e.OPTION(function(){return e.SUBRULE(e._ruleFnAddExpr)}),e.CONSUME(w0)}),e._ruleMultiplicationOperator=e.RULE("_ruleMultiplicationOperator",function(){e.OR([{ALT:function(){return e.CONSUME(yM)}},{ALT:function(){return e.CONSUME(xM)}}])}),e._ruleDiscardStatement=e.RULE("_ruleDiscardStatement",function(){e.CONSUME(FM),e.CONSUME(Rr)}),e._ruleBreakStatement=e.RULE("_ruleBreakStatement",function(){e.CONSUME(DM),e.CONSUME(Rr)}),e._ruleContinueStatement=e.RULE("_ruleContinueStatement",function(){e.CONSUME(BM),e.CONSUME(Rr)}),e._ruleFnCallStatement=e.RULE("_ruleFnCallStatement",function(){e.SUBRULE(e._ruleFnCall),e.CONSUME(Rr)}),e._ruleFnStatement=e.RULE("_ruleFnStatement",function(){e.OR([{ALT:function(){return e.SUBRULE(e._ruleFnCallStatement)}},{ALT:function(){return e.SUBRULE(e._ruleFnReturnStatement)}},{ALT:function(){return e.SUBRULE(e._ruleFnAssignStatement)}},{ALT:function(){return e.SUBRULE(e._ruleFnVariableDeclarationStatement)}},{ALT:function(){return e.SUBRULE(e._ruleFnConditionStatement)}},{ALT:function(){return e.SUBRULE(e._ruleDiscardStatement)}},{ALT:function(){return e.SUBRULE(e._ruleBreakStatement)}},{ALT:function(){return e.SUBRULE(e._ruleContinueStatement)}},{ALT:function(){return e.SUBRULE(e._ruleForLoopStatement)}},{ALT:function(){return e.SUBRULE(e._ruleFn)}},{ALT:function(){return e.SUBRULE(e._ruleFnBlockStatement)}}])}),e._ruleFnVariableDeclarationStatement=e.RULE("_ruleFnVariableDeclarationStatement",function(){e.SUBRULE(e._ruleFnVariableDeclaration),e.CONSUME(Rr)}),e._ruleFnAssignStatement=e.RULE("_ruleFnAssignStatement",function(){e.SUBRULE(e._ruleFnAssignExpr),e.CONSUME(Rr)}),e._ruleForLoopStatement=e.RULE("_ruleForLoopStatement",function(){e.CONSUME(UM),e.CONSUME(_l),e.SUBRULE(e._ruleFnVariableDeclaration),e.CONSUME1(Rr),e.SUBRULE(e._ruleConditionExpr),e.CONSUME2(Rr),e.SUBRULE(e._ruleFnAssignExpr),e.CONSUME(gl),e.SUBRULE(e._ruleFnBlockStatement)}),e._ruleFnReturnStatement=e.RULE("_ruleFnReturnStatement",function(){e.CONSUME(VM),e.OPTION(function(){e.MANY(function(){return e.CONSUME(M0)})}),e.SUBRULE(e._ruleReturnBody),e.CONSUME(Rr)}),e._ruleReturnBody=e.RULE("_ruleReturnBody",function(){e.OR([{ALT:function(){return e.SUBRULE(e._ruleConditionExpr)}},{ALT:function(){return e.SUBRULE(e._ruleBoolean)}},{ALT:function(){return e.CONSUME(jo)}}])}),e._ruleTernaryExpressionSuffix=e.RULE("_ruleTernaryExpressionSuffix",function(){e.CONSUME(EM),e.SUBRULE1(e._ruleFnAddExpr),e.CONSUME(dM),e.SUBRULE2(e._ruleFnAddExpr)}),e._ruleFnExpression=e.RULE("_ruleFnExpression",function(){e.SUBRULE(e._ruleFnAddExpr),e.OPTION(function(){e.SUBRULE(e._ruleTernaryExpressionSuffix)})}),e._ruleBoolean=e.RULE("_ruleBoolean",function(){e.OR([{ALT:function(){return e.CONSUME(ZP)}},{ALT:function(){return e.CONSUME(eM)}}])}),e._ruleFnVariableDeclaration=e.RULE("_ruleFnVariableDeclaration",function(){e.OPTION(function(){return e.SUBRULE(e._rulePrecisionPrefix)}),e.OPTION1(function(){return e.SUBRULE(e._ruleFnVariableTypeQualifier)}),e.SUBRULE(e._ruleVariableType),e.SUBRULE(e._ruleFnVariableDeclareUnit),e.MANY(function(){e.CONSUME(mu),e.SUBRULE1(e._ruleFnVariableDeclareUnit)})}),e._ruleFnVariableTypeQualifier=e.RULE("_ruleFnVariableTypeQualifier",function(){e.OR([{ALT:function(){return e.CONSUME(fM)}}])}),e._ruleFnVariableDeclareUnit=e.RULE("_ruleFnVariableDeclareUnit",function(){e.SUBRULE(e._ruleFnVariable),e.OPTION(function(){e.CONSUME(co),e.SUBRULE(e._ruleFnExpression)})}),e._ruleFnConditionStatement=e.RULE("_ruleFnConditionStatement",function(){e.CONSUME(NM),e.CONSUME1(_l),e.SUBRULE(e._ruleConditionExpr),e.CONSUME(gl),e.SUBRULE(e._ruleFnBlockStatement),e.MANY(function(){e.CONSUME(F0),e.SUBRULE(e._ruleFnConditionStatement)}),e.OPTION(function(){e.CONSUME1(F0),e.SUBRULE1(e._ruleFnBlockStatement)})}),e._ruleConditionExpr=e.RULE("_ruleConditionExpr",function(){e.SUBRULE(e._ruleFnRelationExpr),e.MANY(function(){e.SUBRULE(e._ruleRelationOperator),e.SUBRULE1(e._ruleFnRelationExpr)}),e.OPTION(function(){e.SUBRULE(e._ruleTernaryExpressionSuffix)})}),e._ruleFnRelationExpr=e.RULE("_ruleFnRelationExpr",function(){e.SUBRULE(e._ruleFnAddExpr),e.OPTION(function(){e.SUBRULE(e._ruleRelationOperator),e.SUBRULE1(e._ruleFnAddExpr)})}),e._ruleRelationOperator=e.RULE("_ruleRelationOperator",function(){e.OR(TM.map(function(t){return{ALT:function(){return e.CONSUME(t)}}}))}),e._ruleFnBlockStatement=e.RULE("_ruleFnBlockStatement",function(){e.CONSUME(di),e.SUBRULE(e._ruleFnBody),e.CONSUME(hi)}),e._ruleFnAssignExpr=e.RULE("_ruleFnAssignExpr",function(){e.SUBRULE(e._ruleFnSelfAssignExpr),e.MANY(function(){e.SUBRULE(e._ruleFnAssignmentOperator),e.SUBRULE(e._ruleFnExpression)})}),e._ruleFnSelfAssignExpr=e.RULE("_ruleFnSelfAssignExpr",function(){e.OPTION(function(){return e.SUBRULE(e._ruleFnSelfOperator)}),e.SUBRULE(e._ruleFnVariable),e.OPTION1(function(){return e.SUBRULE1(e._ruleFnSelfOperator)})}),e._ruleFnSelfOperator=e.RULE("_ruleFnSelfOperator",function(){e.OR([{ALT:function(){return e.CONSUME(SM)}},{ALT:function(){return e.CONSUME(bM)}}])}),e._ruleFnAssignmentOperator=e.RULE("_ruleFnAssignmentOperator",function(){e.OR([{ALT:function(){return e.CONSUME(co)}},{ALT:function(){return e.CONSUME(pM)}},{ALT:function(){return e.CONSUME(_M)}},{ALT:function(){return e.CONSUME(gM)}},{ALT:function(){return e.CONSUME(mM)}}])}),e._rulePassPropertyAssignment=e.RULE("_rulePassPropertyAssignment",function(){e.SUBRULE(e._ruleShaderPassPropertyType),e.CONSUME(co),e.SUBRULE(e._ruleFnVariable),e.CONSUME(Rr)}),e._ruleShaderPassPropertyType=e.RULE("_ruleShaderPassPropertyType",function(){e.OR([{ALT:function(){return e.SUBRULE(e._ruleRenderStateType)}},{ALT:function(){return e.CONSUME(iM)}},{ALT:function(){return e.CONSUME(oM)}}])}),e._ruleRenderStateType=e.RULE("_ruleRenderStateType",function(){e.OR(Object.values(yu).map(function(t){return{ALT:function(){return e.CONSUME(t)}}}))}),e._ruleRenderStateDeclaration=e.RULE("_ruleRenderStateDeclaration",function(){e.OR([{ALT:function(){return e.SUBRULE(e._ruleBlendStatePropertyDeclaration)}},{ALT:function(){return e.SUBRULE(e._ruleDepthSatePropertyDeclaration)}},{ALT:function(){return e.SUBRULE(e._ruleStencilStatePropertyDeclaration)}},{ALT:function(){return e.SUBRULE(e._ruleRasterStatePropertyDeclaration)}}])}),e._ruleRenderQueueAssignment=e.RULE("_ruleRenderQueueAssignment",function(){e.CONSUME(qM),e.CONSUME(co),e.SUBRULE(e._ruleRenderQueueValue),e.CONSUME(Rr)}),e._ruleRenderQueueValue=e.RULE("_ruleRenderQueueValue",function(){e.OR([].concat(QM,nr).map(function(t){return{ALT:function(){return e.CONSUME(t)}}}))}),e._ruleBlendStateProperty=e.RULE("_ruleBlendStateProperty",function(){e.OR([].concat(Object.values(Nx),Object.values(zM),hf).map(function(t){return{ALT:function(){return e.CONSUME(t)}}}))}),e._ruleBlendStateValue=e.RULE("_ruleBlendStateValue",function(){e.OR([{ALT:function(){return e.SUBRULE(e._ruleBlendFactor)}},{ALT:function(){return e.SUBRULE(e._ruleBlendOperation)}},{ALT:function(){return e.SUBRULE(e._ruleFnCall)}},{ALT:function(){return e.SUBRULE(e._ruleBoolean)}},{ALT:function(){return e.SUBRULE(e._ruleNumber)}},{ALT:function(){return e.CONSUME(nr)}}])}),e._ruleBlendFactor=e.RULE("_ruleBlendFactor",function(){e.OR(HM.map(function(t){return{ALT:function(){return e.CONSUME(t)}}}))}),e._ruleBlendOperation=e.RULE("_ruleBlendOperation",function(){e.OR(GM.map(function(t){return{ALT:function(){return e.CONSUME(t)}}}))}),e._ruleBlendPropertyItem=e.RULE("_ruleBlendPropertyItem",function(){e.SUBRULE(e._ruleBlendStateProperty),e.OPTION(function(){e.CONSUME(A0),e.CONSUME(iv),e.CONSUME(w0)}),e.CONSUME(co),e.SUBRULE(e._ruleBlendStateValue)}),e._ruleBlendStatePropertyDeclaration=e.RULE("_ruleBlendStatePropertyDeclaration",function(){e.CONSUME(yu.BlendState),e.OPTION(function(){return e.CONSUME(nr)}),e.CONSUME(di),e.MANY(function(){e.SUBRULE(e._ruleBlendPropertyItem),e.CONSUME(Rr)}),e.CONSUME(hi)}),e._ruleDepthStateProperty=e.RULE("_ruleDepthStateProperty",function(){e.OR([].concat(Object.values(jM),hf).map(function(t){return{ALT:function(){return e.CONSUME(t)}}}))}),e._ruleDepthStateValue=e.RULE("_ruleDepthStateValue",function(){e.OR([{ALT:function(){return e.SUBRULE(e._ruleCompareFunction)}},{ALT:function(){return e.SUBRULE(e._ruleBoolean)}},{ALT:function(){return e.CONSUME(nr)}}])}),e._ruleCompareFunction=e.RULE("_ruleCompareFunction",function(){e.OR(YM.map(function(t){return{ALT:function(){return e.CONSUME(t)}}}))}),e._ruleDepthStatePropertyItem=e.RULE("_ruleDepthStatePropertyItem",function(){e.SUBRULE(e._ruleDepthStateProperty),e.CONSUME(co),e.SUBRULE(e._ruleDepthStateValue)}),e._ruleDepthSatePropertyDeclaration=e.RULE("_ruleDepthSatePropertyDeclaration",function(){e.CONSUME(yu.DepthState),e.OPTION(function(){return e.CONSUME(nr)}),e.CONSUME(di),e.MANY(function(){e.SUBRULE(e._ruleDepthStatePropertyItem),e.CONSUME(Rr)}),e.CONSUME(hi)}),e._ruleStencilStateProperty=e.RULE("_ruleStencilStateProperty",function(){e.OR([].concat(Object.values(XM),hf).map(function(t){return{ALT:function(){return e.CONSUME(t)}}}))}),e._ruleStencilStateValue=e.RULE("_ruleStencilStateValue",function(){e.OR([{ALT:function(){return e.SUBRULE(e._ruleCompareFunction)}},{ALT:function(){return e.SUBRULE(e._ruleStencilOperation)}},{ALT:function(){return e.SUBRULE(e._ruleNumber)}},{ALT:function(){return e.SUBRULE(e._ruleBoolean)}},{ALT:function(){return e.CONSUME(nr)}}])}),e._ruleStencilOperation=e.RULE("_ruleStencilOperation",function(){e.OR(KM.map(function(t){return{ALT:function(){return e.CONSUME(t)}}}))}),e._ruleStencilStatePropertyItem=e.RULE("_ruleStencilStatePropertyItem",function(){e.SUBRULE(e._ruleStencilStateProperty),e.CONSUME(co),e.SUBRULE(e._ruleStencilStateValue)}),e._ruleStencilStatePropertyDeclaration=e.RULE("_ruleStencilStatePropertyDeclaration",function(){e.CONSUME(yu.StencilState),e.OPTION(function(){return e.CONSUME(nr)}),e.CONSUME(di),e.MANY(function(){e.SUBRULE(e._ruleStencilStatePropertyItem),e.CONSUME(Rr)}),e.CONSUME(hi)}),e._ruleRasterStateProperty=e.RULE("_ruleRasterStateProperty",function(){e.OR([].concat(Object.values(WM),hf).map(function(t){return{ALT:function(){return e.CONSUME(t)}}}))}),e._ruleRasterStateValue=e.RULE("_ruleRasterStateValue",function(){e.OR([{ALT:function(){return e.SUBRULE(e._ruleNumber)}},{ALT:function(){return e.SUBRULE(e._ruleCullMode)}},{ALT:function(){return e.CONSUME(nr)}}])}),e._ruleCullMode=e.RULE("_ruleCullMode",function(){e.OR($M.map(function(t){return{ALT:function(){return e.CONSUME(t)}}}))}),e._ruleRasterStatePropertyItem=e.RULE("_ruleRasterStatePropertyItem",function(){e.SUBRULE(e._ruleRasterStateProperty),e.CONSUME(co),e.SUBRULE(e._ruleRasterStateValue)}),e._ruleRasterStatePropertyDeclaration=e.RULE("_ruleRasterStatePropertyDeclaration",function(){e.CONSUME(yu.RasterState),e.OPTION(function(){return e.CONSUME(nr)}),e.CONSUME(di),e.MANY(function(){e.SUBRULE(e._ruleRasterStatePropertyItem),e.CONSUME(Rr)}),e.CONSUME(hi)}),e._ruleTupleFloat4=e.RULE("_ruleTupleFloat4",function(){return e._ruleTuple("float",4)}),e._ruleTupleFloat3=e.RULE("_ruleTupleFloat3",function(){return e._ruleTuple("float",3)}),e._ruleTupleFloat2=e.RULE("_ruleTupleFloat2",function(){return e._ruleTuple("float",2)}),e._ruleTupleInt4=e.RULE("_ruleTupleInt4",function(){return e._ruleTuple("int",4)}),e._ruleTupleInt3=e.RULE("_ruleTupleInt3",function(){return e._ruleTuple("int",3)}),e._ruleTupleInt2=e.RULE("_ruleTupleInt2",function(){return e._ruleTuple("int",2)}),e.lexer=new nt.Lexer(FE,{ensureOptimizations:!0}),e.performSelfAnalysis(),e}var a=r.prototype;return a.parse=function(t){var i=this.lexer.tokenize(t);this.input=i.tokens},a._consume=function(t,i){return t===0?this.CONSUME1(i):t===1?this.CONSUME2(i):t===2?this.CONSUME3(i):t===3?this.CONSUME4(i):t===4?this.CONSUME5(i):t===5?this.CONSUME6(i):this.CONSUME7(i)},a._ruleTuple=function(t,i){var o=t==="int"?iv:R0;this.CONSUME2(_l);for(var s=0;s<i-1;s++)this._consume(s,o),this._consume(s,mu);this.CONSUME(o),this.CONSUME(gl)},r}(nt.CstParser);function xo(n,r){return r!=null&&typeof Symbol!="undefined"&&r[Symbol.hasInstance]?!!r[Symbol.hasInstance](n):n instanceof r}function cH(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $u(n,r,a){return cH()?$u=Reflect.construct:$u=function(t,i,o){var s=[null];s.push.apply(s,i);var l=Function.bind.apply(t,s),u=new l;return o&&hp(u,o.prototype),u},$u.apply(null,arguments)}var Na;(function(n){n[n.Error=1]="Error",n[n.Warning=2]="Warning",n[n.Information=3]="Information",n[n.Hint=4]="Hint"})(Na||(Na={}));var fH="FragmentShader",dH="VertexShader",$e=function(){function n(a,e){this._astType="unknown",this._inMacro=!1,this.position=a,this.content=e,this.id=a.start.index+"_"+a.end.index}var r=n.prototype;return r.getContentValue=function(e){if(typeof this.content=="string")return this.content.replace(/"(.*)"/,"$1");if(typeof this.content!="object")return this.content;throw vp({message:"NOT IMPLEMENTED",astNode:this},this.position)},r.serialize=function(e,t){this._beforeSerialization(e,t);var i=this._doSerialization(e,t);return this._afterSerialization(e),i},r._doSerialization=function(e,t){return this.content},r._beforeSerialization=function(e,t){var i;(i=e)==null||i.setSerializingNode(this)},r._afterSerialization=function(e,t){var i;(i=e)==null||i.unsetSerializingNode()},r._jsonifyObject=function(e,t,i){i===void 0&&(i=!1);var o=this,s;if(typeof e!="object")return e;var l={};if((s=e)!=null&&s._isAstNode)return e.toJson(t,i);for(var u in e){var c=e[u];c!=null&&(c._isAstNode?c=c.toJson(t,i):Array.isArray(c)?c=c.map(function(f){return o._jsonifyObject(f,t,i)}):typeof c=="object"&&(c=this._jsonifyObject(c,t,i)),l[u]=c)}return l},r.toJson=function(e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var i=this,o;Array.isArray(this.content)?o=this.content.map(function(l){return i._jsonifyObject(l,e,t)}):typeof this.content=="object"?o=this._jsonifyObject(this.content,e,t):o=this.content;var s={content:o};return e&&(s.position=this.position),t&&(s.Class=this.constructor.name),s},n}(),hH=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="ReturnType",e}var a=r.prototype;return a._doSerialization=function(t){return this.content.text},r}($e),vH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t){var i=Object.values(this.content).sort(function(o,s){return fe.astSortAsc(o.position,s.position)}).filter(function(o){return o._astType});return i.map(function(o){return o.serialize(t)}).join(`
`)},r}($e),pH=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="Function",e}var a=r.prototype;return a._beforeSerialization=function(t,i){t.functionAstStack.push({fnAst:this,localDeclaration:[]})},a._doSerialization=function(t){var i,o,s,l;if(t.currentMainFnAst===this)o="void",s="",l="main";else{var u;o=this.content.returnType.serialize(t);var c;s=(c=(u=this.content.args)==null?void 0:u.map(function(_){return _.serialize(t)}).join(", "))!=null?c:"",l=this.content.name}var f=this.content.body.serialize(t);if(this.content.returnType.content.text==="void"&&this.content.returnStatement||this.content.returnType.content.text!=="void"&&!this.content.returnStatement)throw t.addDiagnostic({severity:Na.Error,message:"Mismatched return type",token:this.position}),"Mismatched return type";var d=o+" "+l+" ("+s+`) {
`+f+`
}`,h=(i=this.content.precision)==null?void 0:i.serialize(t);return h&&(d=h+" "+d),t._parsingMacro&&t.setPassGlobal(this.content.name,{name:this.content.name,ast:this,referenced:!1,inMacro:!0}),d},a._afterSerialization=function(t,i){t.functionAstStack.pop()},r}($e),_H=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="FunctionBody",e}var a=r.prototype;return a._doSerialization=function(t){var i,o,s=[].concat((i=this.content.macros)!=null?i:[],(o=this.content.statements)!=null?o:[]).sort(function(l,u){return l.position.start.line-u.position.start.line});return s.map(function(l){return l.serialize(t)}).join(`
`)},r}($e),gH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t,i){return typeof this.content=="string"?this.content:this.content.serialize(t)},r}($e),mH=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="MacroDefine",e}var a=r.prototype;return a._doSerialization=function(t,i){var o,s;(o=t)!=null&&o.currentMainFnAst&&t.referenceGlobal(this.content.variable.getVariableName());var l;return"#define "+this.content.variable.serialize(t)+" "+((l=(s=this.content.value)==null?void 0:s.serialize(t,{skipUniform:!0,skipComma:!0}))!=null?l:"")},a._beforeSerialization=function(t,i){t._parsingMacro=!0},a._afterSerialization=function(t,i){t._parsingMacro=!1},r}($e),yH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.getVariableName=function(){return typeof this.content=="string"?this.content:this.content.content.function},a._doSerialization=function(t,i){return typeof this.content=="string"?this.content:this.content.serialize(t)},r}($e),xH=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="MacroUndef",e}var a=r.prototype;return a._doSerialization=function(t,i){return"#undef "+this.content.variable},a._beforeSerialization=function(t,i){t._parsingMacro=!0},a._afterSerialization=function(t,i){t._parsingMacro=!1},r}($e),D0=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t,i){var o,s,l,u,c=(u=(o=this.content.body)==null?void 0:o.serialize(t))!=null?u:"",f,d=(f=(s=this.content.elifBranch)==null?void 0:s.serialize(t))!=null?f:"",h,_=(h=(l=this.content.elseBranch)==null?void 0:l.serialize(t))!=null?h:"";return this.content.command+" "+this.content.condition.serialize(t)+`
 `+[c,d,_].filter(function(p){return p}).join(`
`)+`
#endif`},tu(r,[{key:"fields",get:function(){if(!this._fields){this._fields=[];for(var t=$r(this.content.body.content),i;!(i=t()).done;){var o=i.value;if(xo(o,yc))this._fields.push(o);else if(xo(o,r)){var s;(s=this._fields).push.apply(s,[].concat(o.fields))}}}return this._fields}}]),r}($e),xg=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t){var i,o,s=this.content.body.serialize(t),l,u=(l=(i=this.content.elifBranch)==null?void 0:i.map(function(d){return d.serialize(t)}).join(`
`))!=null?l:"",c,f=(c=(o=this.content.elseBranch)==null?void 0:o.serialize(t))!=null?c:"";return this.content.command+" "+this.content.condition.serialize(t)+`
 `+[s,u,f].filter(function(d){return d}).join(`
`)+`
#endif`},a._beforeSerialization=function(t,i){t._parsingMacro=!0},a._afterSerialization=function(t,i){t._parsingMacro=!1},r}($e),SH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t,i){return this.content.map(function(o){var s=o.serialize(t);return xo(o,yc)?""+s+";":s}).join(`
`)},r}($e),bH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t,i){return this.content.map(function(o){return o.serialize(t)}).join(`
`)},r}($e),CH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t,i){return"#elif "+this.content.condition.serialize(t)+`
 `+this.content.body.serialize(t)},r}($e),EH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t,i){return"#elif "+this.content.condition.serialize(t)+`
  `+this.content.body.serialize(t)},r}($e),TH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t,i){return`#else
  `+this.content.body.serialize(t)},r}($e),RH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t,i){return`#else
  `+this.content.body.serialize(t)},r}($e),AH=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="Discard",e}var a=r.prototype;return a._doSerialization=function(t,i){return"discard;"},r}($e),wH=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="Break",e}var a=r.prototype;return a._doSerialization=function(t,i){return"break;"},r}($e),PH=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="Continue",e}var a=r.prototype;return a._doSerialization=function(t,i){return"continue;"},r}($e),MH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t,i){var o="("+this.content.parenthesisNode.serialize(t)+")";return this.content.property&&(o+="."+this.content.property.serialize(t)),o},r}($e),OH=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="FunctionCall",e}var a=r.prototype;return a._doSerialization=function(t){var i;this.content.isCustom&&(t.referenceGlobal(this.content.function)||t.addDiagnostic({severity:Na.Warning,message:"Not found function definition: "+this.content.function,token:this.position}));var o,s=(o=(i=this.content.args)==null?void 0:i.map(function(l){return l.serialize(t)}).join(", "))!=null?o:"";return this.content.function+"("+s+")"},a.getContentValue=function(t){switch(this.content.function){case"vec4":var i,o=this.content.args.map(function(l){return Number(l.serialize(t))});return(i=t.payload)!=null&&i.parsingRenderState?$u(Me,[].concat(o)):$u(pt,[].concat(o));case"Color":var s=this.content.args.map(function(l){return Number(l.serialize(t))});return $u(Me,[].concat(s));default:throw"Not supported builtin function "+this.content.function}},r}($e),IH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t,i){var o,s,l,u=(l=(o=this.content.elseIfBranches)==null?void 0:o.map(function(h){return"else "+h.serialize(t)}))!=null?l:"",c=this.content.elseBranch?"else "+((s=this.content.elseBranch)==null?void 0:s.serialize(t)):"",f=this.content.body.serialize(t),d=this.content.relation.serialize(t);return"if ("+d+`)
`+f+`
`+u+`
`+c},r}($e),LH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t,i){return`{ 
  `+this.content.serialize(t)+`
}`},r}($e),NH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t){return this.content},r}($e),FH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t,i){for(var o,s=this.content.expressionList.map(function(f){return f.serialize(t)}),l=(o=this.content.operatorList)==null?void 0:o.map(function(f){return f.serialize(t)}),u=s[0],c=1;c<s.length;c++)u+=" "+l[c-1]+" "+s[c];return this.content.ternarySuffix&&(u+=this.content.ternarySuffix.serialize(t)),u},r}($e),DH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t,i){var o=this.content.leftOperand.serialize(t);if(this.content.operator){var s,l;o+=" "+((s=this.content.operator)==null?void 0:s.serialize(t))+" "+((l=this.content.rightOperand)==null?void 0:l.serialize(t))}return o},r}($e),BH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t,i){return this.content.serialize(t)+";"},r}($e),kH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t){var i=this.content.value,o="";if(i)for(var s=0;s<i.length;s++){var l=this.content.operator[s],u=this.content.value[s];o+=" "+l+" "+u.serialize(t)}return(this.content.assignee.serialize(t)+" "+o).trimEnd()},r}($e),VH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t){return this.content},r}($e),UH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t){return this.content},r}($e),zH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t,i){var o=this.content.expr.serialize(t);return this.content.ternaryExprSuffix&&(o+=" "+this.content.ternaryExprSuffix.serialize(t)),o},r}($e),GH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t,i){return"? "+this.content.positiveExpr.serialize(t)+" : "+this.content.negativeExpr.serialize(t)},r}($e),HH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t){var i=[].concat(this.content.operands,this.content.operators).sort(function(o,s){return fe.astSortAsc(o.position,s.position)});return i.map(function(o){return o.serialize(t)}).join(" ")},r}($e),jH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t){var i=[].concat(this.content.operands,this.content.operators).sort(function(o,s){return fe.astSortAsc(o.position,s.position)});return i.map(function(o){return o.serialize(t)}).join(" ")},r}($e),WH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t){var i,o,s=(o=(i=this.content.sign)==null?void 0:i.serialize(t))!=null?o:"";return s+this.content.RuleFnAtomicExpr.serialize(t)},a.getContentValue=function(){var t=this.content.RuleFnAtomicExpr.getContentValue();if(typeof t=="number"){var i;return t*(((i=this.content.sign)==null?void 0:i.content)==="-"?-1:1)}return t},r}($e),$H=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="Number",e}var a=r.prototype;return a._doSerialization=function(t){return this.content.text},a.getContentValue=function(){return this.content.value},r}($e),XH=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="Boolean",e}var a=r.prototype;return a._doSerialization=function(t){return this.content.text},a.getContentValue=function(){return this.content.value},r}($e),KH=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="Variable",e}var a=r.prototype;return a._doSerialization=function(t){var i,o=this.content.variable,s=(i=this.content.properties)==null?void 0:i[0].content;if(s)if(o===t.varyingStructInfo.objectName){var l,u=(l=t.varyingStructInfo.reference)==null?void 0:l.find(function(p){return p.property.content.variableNode.content.variable===s});return u&&(u.referenced=!0),this.content.properties.map(function(p){return p.content}).join(".")}else{var c=t.attributeStructListInfo.find(function(p){return p.objectName===o});if(c){var f=c.reference.find(function(p){return p.property.content.variableNode.content.variable===s});return f&&(f.referenced=!0),this.content.properties.map(function(p){return p.content}).join(".")}}t.findLocal(o)||t.referenceGlobal(o)||t.addDiagnostic({severity:Na.Error,message:"Not found variable definition: "+o,token:this.position});var d,h,_=[].concat((d=this.content.properties)!=null?d:[],(h=this.content.indexes)!=null?h:[]).sort(function(p,v){return fe.astSortAsc(p.position,v.position)}).map(function(p){return p.serialize(t)}).join("");return o+_},r}($e),YH=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="ArrayVariable",e}var a=r.prototype;return a._doSerialization=function(t,i){return this.content.variable},r}($e),QH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t){if(t.currentFunctionInfo.fnAst.content.returnStatement=this,t.currentFunctionInfo.fnAst===t.currentMainFnAst)return"";var i;return"return "+((i=this.content.prefix)!=null?i:"")+this.content.body.serialize(t)+";"},r}($e),qH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t,i){return""+this.content.serialize(t)+";"},r}($e),JH=function(n){Je(r,n);function r(){return n.apply(this,arguments)}return r}($e),ZH=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="FunctionArgument",e}var a=r.prototype;return a._doSerialization=function(t,i){var o;t.currentFunctionInfo.localDeclaration.push(new JM(this.position,{variableList:[new ZM(this.position,{variable:new YH(this.position,{variable:this.content.name})})],type:this.content.type}));var s=this.content.arrayIndex?this.content.arrayIndex.serialize(t):"",l;return((l=(o=this.content.decorator)==null?void 0:o.content)!=null?l:"")+" "+this.content.type.serialize(t)+" "+this.content.name+s},r}($e),Nh=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="RenderState",e}var a=r.prototype;return a.getContentValue=function(t){for(var i=[{},{}],o=$r(this.content.properties),s;!(s=o()).done;){var l=s.value,u=l.getContentValue(t),c=this.content.renderStateType+u.property;if(this.content.renderStateType==="BlendState"&&(!!Nx[u.property]||u.property==="Enabled")){var f;c+=(f=u.index)!=null?f:"0"}var d=ut[c];if(d===void 0){var h;(h=t)==null||h.addDiagnostic({severity:Na.Error,message:"invalid render state key",token:l.position});return}u.isVariable?i[1][d]=u.value:i[0][d]=u.value}return{renderStateType:this.content.renderStateType,properties:i,variable:this.content.variable}},r}($e),Fh=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.getContentValue=function(t){var i=this.isVariable;if(i&&t){var o=t.findGlobal(this.content.value.content);o||t.addDiagnostic({severity:Na.Warning,message:"not found variable definition",token:this.content.value.position})}return{property:this.content.property,index:this.content.index,value:this.content.value.getContentValue(t),isVariable:i}},r}($e),ej=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t){return this.content},r}($e),tj=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="VariableType",e}var a=r.prototype;return a._doSerialization=function(t){return t.referenceGlobal(this.content.text),this.content.text},r}($e),JM=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="VariableDeclaration",e}var a=r.prototype;return a._doSerialization=function(t,i){var o,s;t.currentFunctionInfo&&t.currentFunctionInfo.localDeclaration.push(this);var l=this.content.type;if(l.content.text===t.varyingTypeAstNode.content.text)return t.varyingStructInfo.objectName=this.content.variableList[0].getVariableName(),"";l.content.isCustom&&(t.referenceGlobal(l.content.text)||t.addDiagnostic({severity:Na.Error,message:"Undefined type "+l.content.text,token:this.position}));var u=this.content.variableList.map(function(f){return f.serialize(t)}),c=l.content.text+" "+u.join(",");return this.content.typeQualifier&&(c=this.content.typeQualifier+c),this.content.precision&&(c=this.content.precision.serialize(t)+" "+c),t.isParsingGlobal()&&!((o=i)!=null&&o.skipUniform)&&(c="uniform "+c),(s=i)!=null&&s.skipComma?c:c+";"},r}($e),ZM=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a.getVariableName=function(){return this.content.variable.content.variable},a._doSerialization=function(t,i){var o=this.content.variable.serialize(t);return this.content.default?o+" = "+this.content.default.serialize(t):o},r}($e),nj=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t,i){return this.content},r}($e),rj=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="ShaderProperty",e}var a=r.prototype;return a._doSerialization=function(t,i){var o,s;return"uniform "+((s=(o=this.content.prefix)==null?void 0:o.serialize(t))!=null?s:"")+" "+this.content.declare.serialize(t)+";"},a.getVariable=function(){return this.content.declare.content.variableNode.content.variable},r}($e),yc=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t,i){return this.content.type.serialize(t)+" "+this.content.variableNode.serialize(t)},r}($e),aj=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="Struct",e}var a=r.prototype;return a._doSerialization=function(t,i){var o=this.content.variables.map(function(s){var l=s.serialize(t);return xo(s,yc)&&(l+=";"),l}).join(`
`);return"struct "+this.content.name+` {
      `+o+`
    };`},r}($e),ij=function(n){Je(r,n);function r(){return n.apply(this,arguments)}return r}($e),oj=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t){return this.content.tag+" = "+this.content.value},r}($e),sj=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="Tag",e}var a=r.prototype;return a.getContentValue=function(t){for(var i={},o=$r(this.content),s;!(s=o()).done;){var l=s.value;i[l.content.tag]=l.content.value.getContentValue()}return i},r}($e),DE=function(n){Je(r,n);function r(){return n.apply(this,arguments)}return r}($e),lj=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="CullMode",e}var a=r.prototype;return a.getContentValue=function(){var t=this.content.split(".")[1];return Fr[t]},r}($e),uj=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="BlendFactor",e}var a=r.prototype;return a.getContentValue=function(){var t=this.content.split(".")[1];return jt[t]},r}($e),cj=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="BlendOperation",e}var a=r.prototype;return a.getContentValue=function(){var t=this.content.split(".")[1];return Mr[t]},r}($e),fj=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="StencilOperation",e}var a=r.prototype;return a.getContentValue=function(){var t=this.content.split(".")[1];return Tn[t]},r}($e),dj=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="CompareFunction",e}var a=r.prototype;return a.getContentValue=function(){var t=this.content.split(".")[1];return Xt[t]},r}($e),hj=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="RenderQueue",e}var a=r.prototype;return a.getContentValue=function(){if(this.isVariable)return this.content;var t=this.content.split(".")[1];return ar[t]},r}($e),vj=function(n){Je(r,n);function r(){return n.apply(this,arguments)}return r}($e),pj=function(n){Je(r,n);function r(){var e;return e=n.apply(this,arguments)||this,e._astType="ForLoop",e}var a=r.prototype;return a._doSerialization=function(t,i){return"for ("+this.content.init.serialize(t)+" "+this.content.condition.serialize(t)+"; "+this.content.update.serialize(t)+") "+this.content.body.serialize(t)},r}($e),_j=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t,i){var o,s;return"["+((s=(o=this.content)==null?void 0:o.serialize(t))!=null?s:"")+"]"},r}($e),gj=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t,i){return"."+this.content},r}($e),mj=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t,i){return[this.content.operator,this.content.variable].filter(function(o){return!!o}).sort(function(o,s){return fe.astSortAsc(o.position,s.position)}).map(function(o){return o.serialize(t)}).join("")},r}($e),yj=function(n){Je(r,n);function r(){return n.apply(this,arguments)}var a=r.prototype;return a._doSerialization=function(t,i){return this.content},r}($e),fe=function(){function n(){}return n.isCstNode=function(a){return!!a.children},n.extractCstToken=function(a,e){if(!!a){var t,i=(t=a.children)!=null?t:a;for(var o in i){var s,l,u,c,f=i[o][0],d,h;return n.isCstNode(f)?(d=(l=e)==null||(s=l.fnNode)==null?void 0:s.call(l,f))!=null?d:n.extractCstToken(f,e):(h=(c=e)==null||(u=c.fnToken)==null?void 0:u.call(c,f))!=null?h:f.image}}},n.defaultVisit=function(a){var e={},t={line:Number.MAX_SAFE_INTEGER,character:-1,index:-1},i={line:0,character:-1,index:-1};for(var o in a)if(n.isCstNode(a[o][0])){var s=this.visit(a[o][0]);s.position.start.line<t.line&&(t=s.position.start),s.position.end.line>i.line&&(i=s.position.end),e[o]=s}else{var l=a[o][0],u=n.getTokenPosition(l);u.start.line<t.line&&(t=u.start),u.end.line>i.line&&(i=u.end),e[o]=new $e(u,l.image)}return new vH({start:t,end:i},e)},n.getTokenPosition=function(a){return{start:{line:a.startLine,character:a.startColumn,index:a.startOffset},end:{line:a.endLine,character:a.endColumn,index:a.endOffset}}},n.getOrTypeCstNodePosition=function(a){if(!n.isCstNode(a))return n.getTokenPosition(a);var e=a;for(var t in e.children){var i=e.children[t];if(!!i)return n.getOrTypeCstNodePosition(i[0])}},n.astSortAsc=function(a,e){return a.start.index>e.start.index?1:-1},n}(),xj=new nt.CstParser([nt.createToken({name:"_",pattern:/_/})]),Sj=xj.getBaseCstVisitorConstructorWithDefaults(),bj=function(n){Je(r,n);function r(){var e;return e=n.call(this)||this,e.validateVisitor(),e}var a=r.prototype;return a._ruleShader=function(t,i){var o=this,s,l,u,c,f,d=(s=t._ruleSubShader)==null?void 0:s.map(function(_){return o.visit(_)}),h={start:fe.getTokenPosition(t.Shader[0]).start,end:fe.getTokenPosition(t.RCurly[0]).end};return new $e(h,{name:t.ValueString[0].image.replace(/"(.*)"/,"$1"),subShader:d,variables:(l=t._ruleShaderPropertyDeclare)==null?void 0:l.map(function(_){return o.visit(_)}),functions:(u=t._ruleFn)==null?void 0:u.map(function(_){return o.visit(_)}),structs:(c=t._ruleStruct)==null?void 0:c.map(function(_){return o.visit(_)}),tags:t._ruleTag?this.visit(t._ruleTag):void 0,renderStates:(f=t._ruleRenderStateDeclaration)==null?void 0:f.map(function(_){return o.visit(_)})})},a._ruleShaderPropertyDeclare=function(t,i){var o=this.visit(t._ruleDeclarationWithoutAssign),s=this.visit(t._rulePrecisionPrefix);return new rj(o.position,{prefix:s,declare:o})},a._rulePrecisionPrefix=function(t,i){var o=fe.getOrTypeCstNodePosition({children:t});return new nj(o,fe.extractCstToken(t))},a._ruleSubShader=function(t,i){var o=this,s,l,u,c,f,d,h=t._ruleTag?this.visit(t._ruleTag):void 0,_=(s=t._ruleShaderPass)==null?void 0:s.map(function(g){return o.visit(g)}),p,v=(p=(l=t._ruleUsePass)==null?void 0:l.map(function(g){return o.visit(g)}))!=null?p:[],y=[].concat(_,v).sort(function(g,x){return fe.astSortAsc(g.position,x.position)}),m={start:fe.getTokenPosition(t.SubShader[0]).start,end:fe.getTokenPosition(t.RCurly[0]).end};return new $e(m,{tags:h,name:t.ValueString[0].image.replace(/"(.*)"/,"$1"),pass:y,variables:(u=t._ruleShaderPropertyDeclare)==null?void 0:u.map(function(g){return o.visit(g)}),functions:(c=t._ruleFn)==null?void 0:c.map(function(g){return o.visit(g)}),structs:(f=t._ruleStruct)==null?void 0:f.map(function(g){return o.visit(g)}),renderStates:(d=t._ruleRenderStateDeclaration)==null?void 0:d.map(function(g){return o.visit(g)})})},a._ruleUsePass=function(t,i){var o=t.ValueString[0].image.replace(/"(.*)"/,"$1");return new $e({start:fe.getTokenPosition(t.UsePass[0]).start,end:fe.getTokenPosition(t.ValueString[0]).end},o)},a._ruleShaderPass=function(t){var i=this,o,s,l,u,c,f,d,h,_,p=t._ruleTag?this.visit(t._ruleTag):void 0,v=(o=t._rulePassPropertyAssignment)==null?void 0:o.map(function(L){return i.visit(L)}),y=(s=t._ruleStruct)==null?void 0:s.map(function(L){return i.visit(L)}),m=(l=t._ruleShaderPropertyDeclare)==null?void 0:l.map(function(L){var F=i.visit(L);return F}),g=(u=t._ruleRenderStateDeclaration)==null?void 0:u.map(function(L){return i.visit(L)}),x=(c=t._ruleFn)==null?void 0:c.map(function(L){var F=i.visit(L);return F}),b=(f=t._ruleFnMacro)==null?void 0:f.map(function(L){return i.visit(L)}),S=(d=b)==null?void 0:d.filter(function(L){return!xo(L,xg)}),C=(h=b)==null?void 0:h.filter(function(L){return xo(L,xg)}),E=(_=this.visit(t._ruleRenderQueueAssignment))==null?void 0:_.content,T={name:t.ValueString[0].image.replace(/"(.*)"/,"$1"),tags:p,properties:v,structs:y,variables:m,macros:S,renderStates:g,functions:x,conditionalMacros:C,renderQueue:E},M={start:fe.getTokenPosition(t.Pass[0]).start,end:fe.getTokenPosition(t.RCurly[0]).end};return new $e(M,T)},a._ruleFnReturnType=function(t,i){var o,s=fe.getOrTypeCstNodePosition({children:t});return new hH(s,{text:fe.extractCstToken(t),isCustom:!!((o=t._ruleVariableType)!=null&&o[0].children.Identifier)})},a._ruleFn=function(t){var i=this,o,s=(o=t._ruleFnArg)==null?void 0:o.map(function(d){return i.visit(d)}),l=this.visit(t._ruleFnBody),u=this.visit(t._ruleFnReturnType),c={start:u.position.start,end:fe.getTokenPosition(t.RCurly[0]).end},f=t._rulePrecisionPrefix?this.visit(t._rulePrecisionPrefix):void 0;return new pH(c,{returnType:u,name:t.Identifier[0].image,args:s,body:l,precision:f})},a._ruleFnBody=function(t){var i=this,o,s,l={line:Number.MAX_SAFE_INTEGER,character:-1,index:-1},u={line:0,character:-1,index:-1},c=function(h){var _=i.visit(h);return _.position.start.line<l.line&&(l=_.position.start),_.position.end.line>u.line&&(u=_.position.end),_},f=(o=t._ruleFnStatement)==null?void 0:o.map(c),d=(s=t._ruleFnMacro)==null?void 0:s.map(c);return new _H({start:l,end:u},{statements:f,macros:d})},a._ruleFnMacro=function(t,i){var o=this;return fe.extractCstToken(t,{fnNode:function(s){return o.visit(s)}})},a._ruleFnMacroUndefine=function(t,i){var o={start:fe.getTokenPosition(t.m_undefine[0]).start,end:fe.getTokenPosition(t.Identifier[0]).end};return new xH(o,{variable:t.Identifier[0].image})},a._ruleFnMacroDefine=function(t,i){var o=t._ruleMacroDefineValue?this.visit(t._ruleMacroDefineValue):void 0,s={start:fe.getTokenPosition(t.m_define[0]).start,end:o?o.position.end:fe.getOrTypeCstNodePosition(t._ruleMacroDefineVariable[0]).end};return new mH(s,{variable:this.visit(t._ruleMacroDefineVariable),value:o})},a._ruleMacroDefineValue=function(t,i){var o=fe.defaultVisit.bind(this)(t);return Object.values(o.content)[0]},a._ruleMacroDefineVariable=function(t,i){var o,s;return t.Identifier?(o=t.Identifier[0].image,s=fe.getTokenPosition(t.Identifier[0])):(o=this.visit(t._ruleFnCall),s=o.position),new yH(s,o)},a._ruleFnMacroCondition=function(t,i){var o=this,s,l={start:fe.getOrTypeCstNodePosition(t._ruleFnMacroConditionDeclare[0]).start,end:fe.getTokenPosition(t.m_endif[0]).end};return new xg(l,{command:fe.extractCstToken(t._ruleFnMacroConditionDeclare[0]),condition:this.visit(t._ruleConditionExpr),body:this.visit(t._ruleFnMacroConditionBody),elifBranch:(s=t._ruleMacroConditionElifBranch)==null?void 0:s.map(function(u){return o.visit(u)}),elseBranch:t._ruleFnMacroConditionElseBranch?this.visit(t._ruleFnMacroConditionElseBranch):void 0})},a._ruleStructMacroConditionalField=function(t,i){var o={start:fe.getOrTypeCstNodePosition(t._ruleFnMacroConditionDeclare[0]).start,end:fe.getTokenPosition(t.m_endif[0]).end},s=this.visit(t._ruleStructMacroConditionBody);return new D0(o,{command:fe.extractCstToken(t._ruleFnMacroConditionDeclare[0]),condition:this.visit(t._ruleConditionExpr),body:s,elifBranch:t._ruleStructMacroElifBranch?this.visit(t._ruleStructMacroElifBranch):void 0,elseBranch:t._ruleStructMacroConditionElseBranch?this.visit(t._ruleStructMacroConditionElseBranch):void 0})},a._ruleStructMacroConditionBody=function(t,i){var o=this,s,l,u,c=(u=(s=t._ruleDeclarationWithoutAssign)==null?void 0:s.map(function(p){return o.visit(p)}))!=null?u:[],f,d=(f=(l=t._ruleStructMacroConditionalField)==null?void 0:l.map(function(p){return o.visit(p)}))!=null?f:[],h=[].concat(c,d).sort(function(p,v){return fe.astSortAsc(p.position,v.position)}),_={start:h[0].position.start,end:h[h.length-1].position.end};return new SH(_,h)},a._ruleFnMacroConditionBody=function(t,i){var o=this,s,l,u,c=(u=(s=t._ruleFnBody)==null?void 0:s.map(function(p){return o.visit(p)}))!=null?u:[],f,d=(f=(l=t._ruleStruct)==null?void 0:l.map(function(p){return o.visit(p)}))!=null?f:[],h=[].concat(c,d).sort(function(p,v){return fe.astSortAsc(p.position,v.position)}),_={start:h[0].position.start,end:h[h.length-1].position.end};return new bH(_,h)},a._ruleStructMacroElifBranch=function(t,i){var o=this.visit(t._ruleStructMacroConditionBody),s=this.visit(t._ruleConditionExpr),l={start:fe.getTokenPosition(t.m_elif[0]).start,end:o.position.end};return new CH(l,{condition:s,body:o})},a._ruleMacroConditionElifBranch=function(t,i){var o=this.visit(t._ruleFnMacroConditionBody),s=this.visit(t._ruleConditionExpr),l={start:fe.getTokenPosition(t.m_elif[0]).start,end:o.position.end};return new EH(l,{condition:s,body:o})},a._ruleStructMacroConditionElseBranch=function(t,i){var o=this.visit(t._ruleStructMacroConditionBody),s={start:fe.getTokenPosition(t.m_else[0]).start,end:o.position.end};return new RH(s,{body:o})},a._ruleFnMacroConditionElseBranch=function(t,i){var o=this.visit(t._ruleFnMacroConditionBody),s={start:fe.getTokenPosition(t.m_else[0]).start,end:o.position.end};return new TH(s,{body:o})},a._ruleFnStatement=function(t){return fe.defaultVisit.bind(this)(t)},a._ruleFnVariableDeclarationStatement=function(t,i){return this.visit(t._ruleFnVariableDeclaration)},a._ruleDiscardStatement=function(t,i){var o={start:fe.getTokenPosition(t.discard[0]).start,end:fe.getTokenPosition(t.Semicolon[0]).end};return new AH(o,null)},a._ruleBreakStatement=function(t,i){var o={start:fe.getTokenPosition(t.break[0]).start,end:fe.getTokenPosition(t.Semicolon[0]).end};return new wH(o,null)},a._ruleContinueStatement=function(t,i){var o={start:fe.getTokenPosition(t.continue[0]).start,end:fe.getTokenPosition(t.Semicolon[0]).end};return new PH(o,null)},a._ruleFnCall=function(t){var i=this,o,s=!!t._ruleFnCallVariable[0].children.Identifier,l=(o=t._ruleAssignableValue)==null?void 0:o.map(function(f){return i.visit(f)}),u={start:fe.getOrTypeCstNodePosition(t._ruleFnCallVariable[0]).start,end:fe.getTokenPosition(t.RBracket[0]).end},c={function:fe.extractCstToken(t._ruleFnCallVariable[0]),args:l,isCustom:s};return new OH(u,c)},a._ruleFnConditionStatement=function(t){var i=this,o,s,l,u,c=t._ruleFnBlockStatement.map(function(y){return i.visit(y)}).sort(function(y,m){return y.position.start.line-m.position.start.line}),f=c[0],d=c[1],h=(o=t._ruleFnConditionStatement)==null?void 0:o.map(function(y){return i.visit(y)}).sort(function(y,m){return y.position.start.line-m.position.start.line}),_=(u=h)==null||(s=u[((l=h)==null?void 0:l.length)-1])==null?void 0:s.position.end,p=c[c.length-1].position.end;_=_&&_.line>p.line?_:p;var v={start:fe.getTokenPosition(t.if[0]).start,end:_};return new IH(v,{relation:this.visit(t._ruleConditionExpr),body:f,elseBranch:d,elseIfBranches:h})},a._ruleConditionExpr=function(t,i){var o=this,s,l,u=t._ruleFnRelationExpr.map(function(h){return o.visit(h)}).sort(function(h,_){return fe.astSortAsc(h.position,_.position)}),c=(s=t._ruleRelationOperator)==null?void 0:s.map(function(h){return o.visit(h)}).sort(function(h,_){return fe.astSortAsc(h.position,_.position)}),f=t._ruleTernaryExpressionSuffix?this.visit(t._ruleTernaryExpressionSuffix):void 0,d=u[0].position;return(l=c)!=null&&l.length&&(d.end=u[u.length-1].position.end),new FH(d,{expressionList:u,operatorList:c,ternarySuffix:f})},a._ruleFnRelationExpr=function(t){var i=this,o=t._ruleFnAddExpr.map(function(l){return i.visit(l)}),s;return t._ruleRelationOperator?s={start:o[0].position.start,end:o[1].position.end}:s=o[0].position,new DH(s,{operator:t._ruleRelationOperator?this.visit(t._ruleRelationOperator):void 0,leftOperand:o[0],rightOperand:o[1]})},a._ruleRelationOperator=function(t,i){var o=fe.getOrTypeCstNodePosition({children:t});return new NH(o,fe.extractCstToken(t))},a._ruleFnBlockStatement=function(t){var i={start:fe.getTokenPosition(t.LCurly[0]).start,end:fe.getTokenPosition(t.RCurly[0]).end};return new LH(i,this.visit(t._ruleFnBody))},a._ruleFnAssignStatement=function(t,i){var o=this.visit(t._ruleFnAssignExpr);return new BH(o.position,o)},a._ruleFnAssignExpr=function(t,i){var o=this,s,l,u,c=this.visit(t._ruleFnSelfAssignExpr),f=(s=t._ruleFnExpression)==null?void 0:s.map(function(p){return o.visit(p)}),d=(l=t._ruleFnAssignmentOperator)==null?void 0:l.map(function(p){return fe.extractCstToken(p)}),h,_={start:c.position.start,end:(h=(u=f)==null?void 0:u[f.length-1].position.end)!=null?h:c.position.end};return new kH(_,{operator:d,assignee:c,value:f})},a._ruleFnExpression=function(t){var i=this.visit(t._ruleFnAddExpr),o=i.position,s;return t._ruleTernaryExpressionSuffix&&(s=this.visit(t._ruleTernaryExpressionSuffix),o.end=s.position.end),new zH(o,{expr:i,ternaryExprSuffix:s})},a._ruleTernaryExpressionSuffix=function(t,i){var o=this.visit(t._ruleFnAddExpr[0]),s=this.visit(t._ruleFnAddExpr[1]),l=s.position;return l.start=fe.getTokenPosition(t.Query[0]).start,new GH(l,{positiveExpr:o,negativeExpr:s})},a._ruleAddOperator=function(t,i){var o=fe.getOrTypeCstNodePosition({children:t});return new VH(o,fe.extractCstToken(t))},a._ruleFnAddExpr=function(t){var i=this;if(t._ruleAddOperator){var o,s=(o=t._ruleFnMultiplicationExpr)==null?void 0:o.map(function(u){return i.visit(u)}),l={start:s[0].position.start,end:s[1].position.end};return new HH(l,{operators:t._ruleAddOperator.map(function(u){return i.visit(u)}),operands:s})}return this.visit(t._ruleFnMultiplicationExpr)},a._ruleMultiplicationOperator=function(t,i){return new UH(fe.getOrTypeCstNodePosition({children:t}),fe.extractCstToken(t))},a._ruleFnMultiplicationExpr=function(t){var i=this;if(t._ruleMultiplicationOperator){var o,s=(o=t._ruleFnAtomicExpr)==null?void 0:o.map(function(u){return i.visit(u)}),l={start:s[0].position.start,end:s[1].position.end};return new jH(l,{operators:t._ruleMultiplicationOperator.map(function(u){return i.visit(u)}),operands:s})}return this.visit(t._ruleFnAtomicExpr)},a._ruleFnAtomicExpr=function(t){var i=fe.defaultVisit.bind(this)(t),o=i.position,s;return t._ruleAddOperator&&(s=i.content._ruleAddOperator,o.start=s.position.start,delete i.content._ruleAddOperator),new WH(o,{sign:s,RuleFnAtomicExpr:Object.values(i.content)[0]})},a._ruleFnParenthesisAtomicExpr=function(t,i){var o=this.visit(t._ruleFnParenthesisExpr),s=o.position,l={parenthesisNode:o};return t._ruleFnVariable&&(l.property=this.visit(t._ruleFnVariable),s.end=l.property.position.end),new MH(s,l)},a._ruleFnParenthesisExpr=function(t){return this.visit(t._ruleConditionExpr)},a._ruleForLoopStatement=function(t,i){var o=this.visit(t._ruleFnVariableDeclaration),s=this.visit(t._ruleConditionExpr),l=this.visit(t._ruleFnAssignExpr),u=this.visit(t._ruleFnBlockStatement),c={start:fe.getTokenPosition(t.for[0]).start,end:u.position.end};return new pj(c,{init:o,condition:s,update:l,body:u})},a._ruleFnSelfAssignExpr=function(t,i){var o=this.visit(t._ruleFnVariable),s=this.visit(t._ruleFnSelfOperator);return new mj(o.position,{operator:s,variable:o})},a._ruleFnSelfOperator=function(t,i){var o=fe.getOrTypeCstNodePosition({children:t});return new yj(o,fe.extractCstToken(t))},a._ruleNumber=function(t){var i,o,s=fe.extractCstToken(t)+((o=(i=t.Expo)==null?void 0:i[0].image)!=null?o:"");return new $H(fe.getOrTypeCstNodePosition({children:t}),{text:s,value:Number(s)})},a._ruleBoolean=function(t,i){var o=fe.getOrTypeCstNodePosition({children:t}),s=fe.extractCstToken(t);return new XH(o,{text:s,value:s.toLowerCase()==="true"})},a._ruleFnVariable=function(t){var i=this,o,s,l={start:fe.getTokenPosition(t.Identifier[0]).start,end:fe.getTokenPosition(t.Identifier[t.Identifier.length-1]).end},u=(o=t._ruleArrayIndex)==null?void 0:o.map(function(f){return i.visit(f)}),c=(s=t._ruleFnVariableProperty)==null?void 0:s.map(function(f){return i.visit(f)});return new KH(l,{variable:t.Identifier[0].image,indexes:u,properties:c})},a._ruleArrayIndex=function(t,i){var o={start:fe.getTokenPosition(t.LSquareBracket[0]).start,end:fe.getTokenPosition(t.RSquareBracket[0]).end};return new _j(o,this.visit(t._ruleFnAddExpr))},a._ruleFnVariableProperty=function(t,i){var o={start:fe.getTokenPosition(t.Dot[0]).start,end:fe.getTokenPosition(t.Identifier[0]).end};return new gj(o,t.Identifier[0].image)},a._ruleFnReturnStatement=function(t){var i,o={start:fe.getTokenPosition(t.return[0]).start,end:fe.getTokenPosition(t.Semicolon[0]).end},s=(i=t.Negative)==null?void 0:i.map(function(l){return l.image}).join("");return new QH(o,{prefix:s,body:this.visit(t._ruleReturnBody)})},a._ruleFnCallStatement=function(t,i){var o=this.visit(t._ruleFnCall),s={start:o.position.start,end:fe.getTokenPosition(t.Semicolon[0]).end};return new qH(s,o)},a._ruleReturnBody=function(t,i){var o=fe.defaultVisit.bind(this)(t).content;return Object.values(o)[0]},a._ruleFnArgDecorator=function(t,i){var o=fe.getOrTypeCstNodePosition({children:t}),s=fe.extractCstToken(t);return new JH(o,s)},a._ruleUseMacro=function(t,i){var o,s;return t.Identifier?(o=fe.getTokenPosition(t.Identifier[0]),s=t.Identifier[0].image):(s=this.visit(t._ruleFnCall),o=s.position),new gH(o,s)},a._ruleFnArg=function(t){if(t._ruleUseMacro)return this.visit(t._ruleUseMacro);var i={start:fe.getOrTypeCstNodePosition(t._ruleVariableType[0]).start,end:fe.getTokenPosition(t.Identifier[0]).end},o=t._ruleFnArgDecorator?this.visit(t._ruleFnArgDecorator):void 0,s=t._ruleArrayIndex?this.visit(t._ruleArrayIndex):void 0,l=this.visit(t._ruleVariableType);return new ZH(i,{decorator:o,name:t.Identifier[0].image,type:l,arrayIndex:s})},a._ruleBlendPropertyItem=function(t,i){var o,s=fe.extractCstToken(t._ruleBlendStateProperty[0]),l=(o=t.ValueInt)==null?void 0:o[0].image,u=this.visit(t._ruleBlendStateValue),c={start:fe.getOrTypeCstNodePosition(t._ruleBlendStateProperty[0]).start,end:fe.getOrTypeCstNodePosition(t._ruleBlendStateValue[0]).end},f=new Fh(c,{property:s,index:l?Number(l):void 0,value:u});return f.isVariable=!!t._ruleBlendStateValue[0].children.Identifier,f},a._ruleBlendStateValue=function(t,i){var o=fe.defaultVisit.bind(this)(t).content;return Object.values(o)[0]},a._ruleBlendStatePropertyDeclaration=function(t,i){var o=this,s,l,u={start:{line:t.BlendState[0].startLine,character:t.BlendState[0].startColumn,index:t.BlendState[0].startOffset},end:{line:t.RCurly[0].endLine,character:t.RCurly[0].endColumn,index:t.RCurly[0].endOffset}},c=(s=t.Identifier)==null?void 0:s[0].image,f=t.BlendState[0].image,d=(l=t._ruleBlendPropertyItem)==null?void 0:l.map(function(h){return o.visit(h)});return new Nh(u,{variable:c,renderStateType:f,properties:d})},a._ruleDepthStatePropertyItem=function(t,i){var o=fe.extractCstToken(t._ruleDepthStateProperty[0]),s=this.visit(t._ruleDepthStateValue),l={start:fe.getOrTypeCstNodePosition(t._ruleDepthStateProperty[0]).start,end:fe.getOrTypeCstNodePosition(t._ruleDepthStateValue[0]).end},u=new Fh(l,{property:o,value:s});return u.isVariable=!!t._ruleDepthStateValue[0].children.Identifier,u},a._ruleRenderQueueAssignment=function(t,i){var o=fe.getTokenPosition(t.RenderQueueType[0]).start,s=fe.getTokenPosition(t.Semicolon[0]).end,l=this.visit(t._ruleRenderQueueValue[0]);if(l.content)return new vj({start:o,end:s},l)},a._ruleRenderQueueValue=function(t,i){var o=new hj(fe.getOrTypeCstNodePosition({children:t}),fe.extractCstToken(t));return t.Identifier&&(o.isVariable=!0),o},a._ruleDepthStateValue=function(t,i){var o=fe.defaultVisit.bind(this)(t).content;return Object.values(o)[0]},a._ruleRasterStateValue=function(t,i){var o=fe.defaultVisit.bind(this)(t).content;return Object.values(o)[0]},a._ruleRasterStatePropertyItem=function(t,i){var o=fe.extractCstToken(t._ruleRasterStateProperty[0]),s=this.visit(t._ruleRasterStateValue),l={start:fe.getOrTypeCstNodePosition(t._ruleRasterStateProperty[0]).start,end:fe.getOrTypeCstNodePosition(t._ruleRasterStateValue[0]).end},u=new Fh(l,{property:o,value:s});return u.isVariable=!!t._ruleRasterStateValue[0].children.Identifier,u},a._ruleRasterStatePropertyDeclaration=function(t,i){var o=this,s,l,u={start:{line:t.RasterState[0].startLine,character:t.RasterState[0].startColumn,index:t.RasterState[0].startOffset},end:{line:t.RCurly[0].startLine,character:t.RCurly[0].endColumn,index:t.RasterState[0].endOffset}},c=(s=t.Identifier)==null?void 0:s[0].image,f=t.RasterState[0].image,d=(l=t._ruleRasterStatePropertyItem)==null?void 0:l.map(function(h){return o.visit(h)});return new Nh(u,{variable:c,renderStateType:f,properties:d})},a._ruleDepthSatePropertyDeclaration=function(t,i){var o=this,s,l,u={start:{line:t.DepthState[0].startLine,character:t.DepthState[0].startOffset,index:t.DepthState[0].startOffset},end:{line:t.RCurly[0].endLine,character:t.RCurly[0].endColumn,index:t.RCurly[0].endOffset}},c=(s=t.Identifier)==null?void 0:s[0].image,f=t.DepthState[0].image,d=(l=t._ruleDepthStatePropertyItem)==null?void 0:l.map(function(h){return o.visit(h)});return new Nh(u,{variable:c,renderStateType:f,properties:d})},a._ruleStencilStatePropertyItem=function(t,i){var o=fe.extractCstToken(t._ruleStencilStateProperty[0]),s=this.visit(t._ruleStencilStateValue),l={start:fe.getOrTypeCstNodePosition(t._ruleStencilStateProperty[0]).start,end:fe.getOrTypeCstNodePosition(t._ruleStencilStateValue[0]).end},u=new Fh(l,{property:o,value:s});return u.isVariable=!!t._ruleStencilStateValue[0].children.Identifier,u},a._ruleStencilStateValue=function(t,i){var o=fe.defaultVisit.bind(this)(t).content;return Object.values(o)[0]},a._ruleCompareFunction=function(t,i){var o=fe.getOrTypeCstNodePosition({children:t});return new dj(o,fe.extractCstToken(t))},a._ruleCullMode=function(t,i){var o=fe.getOrTypeCstNodePosition({children:t});return new lj(o,fe.extractCstToken(t))},a._ruleBlendFactor=function(t,i){var o=fe.getOrTypeCstNodePosition({children:t});return new uj(o,fe.extractCstToken(t))},a._ruleBlendOperation=function(t,i){var o=fe.getOrTypeCstNodePosition({children:t});return new cj(o,fe.extractCstToken(t))},a._ruleStencilOperation=function(t,i){var o=fe.getOrTypeCstNodePosition({children:t});return new fj(o,fe.extractCstToken(t))},a._ruleStencilStatePropertyDeclaration=function(t,i){var o=this,s,l,u={start:{line:t.StencilState[0].startLine,character:t.StencilState[0].startColumn,index:t.StencilState[0].startOffset},end:{line:t.RCurly[0].endLine,character:t.RCurly[0].endColumn,index:t.RCurly[0].endOffset}},c=(s=t.Identifier)==null?void 0:s[0].image,f=t.StencilState[0].image,d=(l=t._ruleStencilStatePropertyItem)==null?void 0:l.map(function(h){return o.visit(h)});return new Nh(u,{variable:c,renderStateType:f,properties:d})},a._ruleRenderStateDeclaration=function(t){var i=fe.defaultVisit.bind(this)(t);return Object.values(i.content)[0]},a._ruleAssignableValue=function(t,i){if(t._ruleFnExpression)return this.visit(t._ruleFnExpression);if(t._ruleBoolean)return this.visit(t._ruleBoolean);var o=fe.getOrTypeCstNodePosition({children:t});return new ej(o,fe.extractCstToken(t))},a._ruleFnVariableDeclaration=function(t){var i=this,o=t._ruleFnVariableDeclareUnit.map(function(u){return i.visit(u)}),s={start:fe.getOrTypeCstNodePosition(t._ruleVariableType[0]).start,end:o[o.length-1].position.end},l=t._ruleFnVariableTypeQualifier?fe.extractCstToken(t._ruleFnVariableTypeQualifier[0]):void 0;return new JM(s,{type:this.visit(t._ruleVariableType),variableList:o,precision:t._rulePrecisionPrefix?this.visit(t._rulePrecisionPrefix):void 0,typeQualifier:l})},a._ruleFnVariableDeclareUnit=function(t,i){var o=this.visit(t._ruleFnVariable),s=this.visit(t._ruleFnExpression),l={start:o.position.start,end:s?s.position.end:o.position.start};return new ZM(l,{variable:o,default:s})},a._ruleStruct=function(t){var i=this,o,s,l=(o=t._ruleDeclarationWithoutAssign)==null?void 0:o.map(function(d){return i.visit(d)}),u=(s=t._ruleStructMacroConditionalField)==null?void 0:s.map(function(d){return i.visit(d)}),c=[].concat(l!=null?l:[],u!=null?u:[]).sort(function(d,h){return fe.astSortAsc(d.position,h.position)}),f={start:fe.getTokenPosition(t.struct[0]).start,end:fe.getTokenPosition(t.RCurly[0]).end};return new aj(f,{name:t.Identifier[0].image,variables:c})},a._ruleVariableType=function(t,i){var o=fe.getOrTypeCstNodePosition({children:t});return new tj(o,{text:fe.extractCstToken(t),isCustom:!!t.Identifier})},a._ruleDeclarationWithoutAssign=function(t){var i=this.visit(t._ruleVariableType),o=this.visit(t._ruleFnVariable),s={start:i.position.start,end:o.position.end};return new yc(s,{type:i,variableNode:o})},a._rulePassPropertyAssignment=function(t,i){var o={start:fe.getOrTypeCstNodePosition(t._ruleShaderPassPropertyType[0]).start,end:fe.getTokenPosition(t.Semicolon[0]).end};return new ij(o,{type:fe.extractCstToken(t._ruleShaderPassPropertyType[0]),value:this.visit(t._ruleFnVariable)})},a._ruleTag=function(t){var i=this,o,s={start:fe.getTokenPosition(t.Tags[0]).start,end:fe.getTokenPosition(t.RCurly[0]).end};return new sj(s,(o=t._ruleTagAssignment)==null?void 0:o.map(function(l){return i.visit(l)}))},a._ruleTagAssignment=function(t){var i={start:fe.getOrTypeCstNodePosition(t.Identifier[0]).start,end:fe.getOrTypeCstNodePosition(t._ruleTagAssignableValue[0]).end};return new oj(i,{tag:t.Identifier[0].image,value:this.visit(t._ruleTagAssignableValue)})},a._ruleTagAssignableValue=function(t,i){var o=fe.defaultVisit.bind(this)(t).content;return Object.values(o)[0]},a._ruleTupleFloat4=function(t){var i={start:fe.getTokenPosition(t.LBracket[0]).start,end:fe.getTokenPosition(t.RBracket[0]).end};return new DE(i,t.ValueFloat.map(function(o){return Number(o)}))},a._ruleTupleInt4=function(t){var i={start:fe.getTokenPosition(t.LBracket[0]).start,end:fe.getTokenPosition(t.RBracket[0]).end};return new DE(i,t.ValueInt.map(function(o){return Number(o.image)}))},r}(Sj),BE=function(){function n(){}return n.stringifyVertexFunction=function(a,e,t){var i,o,s=a.content.functions.find(function(m){return m.content.name===e.content.value.content.variable});if(!s)return t.addDiagnostic({severity:Na.Error,message:"Not found vertex shader definition: "+e.content.value,token:e.position}),"";t.setMainFnAst(s),t.varyingTypeAstNode=s.content.returnType;var l=(i=t.findGlobal(s.content.returnType.content.text))==null?void 0:i[0].ast;if(l){t.varyingStructInfo.structAstNode=l,t.varyingStructInfo.reference=[];for(var u=$r(l.content.variables),c;!(c=u()).done;){var f=c.value;if(xo(f,yc))t.varyingStructInfo.reference.push({referenced:!1,property:f,text:"varying "+f.content.type.serialize(t)+" "+f.content.variableNode.serialize(t)});else if(xo(f,D0))for(var d=$r(f.fields),h;!(h=d()).done;){var _=h.value;t.varyingStructInfo.reference.push({referenced:!1,property:_,text:"varying "+_.content.type.serialize(t)+" "+_.content.variableNode.serialize(t)})}}}(o=s.content.args)==null||o.forEach(function(m){var g=m.content.type;if(g.content.isCustom){var x,b=(x=t.findGlobal(g.content.text))==null?void 0:x[0].ast;if(b){for(var S=[],C=$r(b.content.variables),E;!(E=C()).done;){var T=E.value;if(xo(T,yc))S.push({referenced:!1,property:T,text:"attribute "+T.content.type.serialize(t)+" "+T.content.variableNode.serialize(t)});else if(xo(T,D0))for(var M=$r(T.fields),L;!(L=M()).done;){var F=L.value;S.push({referenced:!1,property:F,text:"attribute "+F.content.type.serialize(t)+" "+F.content.variableNode.serialize(t)})}}t.attributeStructListInfo.push({objectName:m.content.name,structAstNode:b,reference:S})}else{t.addDiagnostic({severity:Na.Error,message:"no attribute struct definition",token:m.position});return}}else t.attributesVariableListInfo.push({name:m.content.name,astNode:m,referenced:!1,text:"attribute "+g.content.text+" "+m.content.name})});var p=s.serialize(t),v=t.getGlobalMacroText(a.content.conditionalMacros),y=[].concat(t.getGlobalMacroText(a.content.macros),t.getAttribText(),t.getVaryingText(),t.getGlobalText(),v).sort(function(m,g){return fe.astSortAsc(m.position,g.position)}).map(function(m){return m.text}).join(`
`);return[t.getExtendedDefineMacros(),y,p].join(`
`)},n.stringifyFragmentFunction=function(a,e,t){var i,o=a.content.functions.find(function(c){return c.content.name===e.content.value.content.variable});if(!o)return t.addDiagnostic({severity:Na.Error,message:"Not found fragment shader definition: "+e.content.value,token:e.position}),"";t.setMainFnAst(o),t.varyingStructInfo.objectName=(i=o.content.args)==null?void 0:i[0].content.name;var s=t.getGlobalMacroText(a.content.conditionalMacros),l=o.serialize(t),u=[].concat(t.getGlobalMacroText(a.content.macros),t.getVaryingText(),t.getGlobalText(),s).sort(function(c,f){return fe.astSortAsc(c.position,f.position)}).map(function(c){return c.text}).join(`
`);return[t.getExtendedDefineMacros(),u,l].join(`
`)},n}(),kE;(function(n){n[n.Pass=0]="Pass",n[n.SubShader=1]="SubShader",n[n.Shader=2]="Shader"})(kE||(kE={}));var Cj=function(){function n(){this.functionAstStack=[],this._diagnostics=[],this.attributeStructListInfo=[],this.attributesVariableListInfo=[],this._parsingMacro=!1,this._serializingNodeStack=[],this._shaderGlobalMap=new Map,this._subShaderGlobalMap=new Map,this._passGlobalMap=new Map}var r=n.prototype;return r.addDiagnostic=function(e){var t=this._parsingContext.getTextLineOffsetAt(e.token.start.index);t&&(e.token.start.line+=t,e.token.end.line+=t),this._diagnostics.push(e)},r.setSerializingNode=function(e){this._serializingNodeStack.push(e)},r.unsetSerializingNode=function(){this._serializingNodeStack.pop()},r.setMainFnAst=function(e){this._currentMainFnAst=e},r.referenceGlobal=function(e,t){t===void 0&&(t=0);var i=this.findGlobal(e,t);if(i)for(var o=$r(i),s;!(s=o()).done;){var l=s.value;l.referenced=!0}return i},r.parse=function(e){var t=this;this._shaderAst=e,this._shaderReset(),this._initShaderGlobalList(e);var i={};return i.name=e.content.name,i.subShaders=e.content.subShader.map(function(o){return t.parseSubShaderInfo(o)}),i},r.parseSubShaderInfo=function(e){var t=this,i;this._subShaderReset(),this._initSubShaderGlobalList(e);var o={};return o.tags=(i=e.content.tags)==null?void 0:i.getContentValue(),o.passes=e.content.pass.map(function(s){return t.parsePassInfo(s)}),o.name=e.content.name,o},r.isParsingGlobal=function(){return this.functionAstStack.length===0},r.parsePassInfo=function(e){var t=this,i,o;if(typeof e.content=="string")return e.content;this._passReset(),this._initPassGlobalList(e);var s={};s.name=e.content.name,s.tags=(i=e.content.tags)==null?void 0:i.getContentValue(),s.renderStates=[{},{}];var l=s.renderStates,u=l[0],c=l[1];this.payload={parsingRenderState:!0};var f,d=(f=e.content.renderStates)!=null?f:[];(o=e.content.properties)==null||o.forEach(function(x){return t._parsePassProperty(e,x,s,d)});for(var h=$r(d),_;!(_=h()).done;){var p=_.value,v=p.getContentValue(this).properties,y=v[0],m=v[1];Object.assign(u,y),Object.assign(c,m)}this.payload=void 0;var g=e.content.renderQueue;return g&&(g.isVariable?c[ut.RenderQueueType]=g.getContentValue():u[ut.RenderQueueType]=g.getContentValue()),s},r.findGlobal=function(e,t){if(t===void 0&&(t=0),t===0){var i=this._findPassGlobal(e);if(i)return i;t++}if(t===1){var o=this._findSubShaderGlobal(e);if(o)return o;t++}if(t===2)return this._findShaderGlobal(e)},r.findLocal=function(e){var t;return(t=this.currentFunctionInfo)==null?void 0:t.localDeclaration.find(function(i){return i.content.variableList.find(function(o){return o.getVariableName()===e})})},r.getAttribText=function(){for(var e=[],t=$r(this.attributeStructListInfo),i;!(i=t()).done;)for(var o=i.value,s=$r(o.reference),l;!(l=s()).done;){var u=l.value;u.referenced&&e.push({text:""+u.text+";",position:u.property.position})}return e},r.getVaryingText=function(){var e,t;return(t=(e=this.varyingStructInfo.reference)==null?void 0:e.filter(function(i){return i.referenced}).map(function(i){return{text:""+i.text+";",position:i.property.position}}))!=null?t:[]},r.getGlobalMacroText=function(e){var t=this,i,o;return(o=(i=e)==null?void 0:i.map(function(s){return{text:s.serialize(t),position:s.position}}))!=null?o:[]},r.getGlobalText=function(){var e=this,t=[],i,o=[].concat(Array.from(this._passGlobalMap.values()),Array.from(this._subShaderGlobalMap.values()),Array.from(this._shaderGlobalMap.values())).flat(),s=function(){i=o.filter(function(u){return u.referenced&&!u.inspected}),i.forEach(function(u){u.str=u.ast.serialize(e,{global:!0}),u.inspected=!0})};for(s();i.length>0;){var l;(l=t).push.apply(l,[].concat(i)),s()}return t.filter(function(u){return!u.inMacro}).map(function(u){return{text:u.str,position:u.ast.position}})},r.setPassGlobal=function(e,t){var i,o=(i=this._passGlobalMap.get(e))!=null?i:[];o.findIndex(function(s){return s.ast.id===t.ast.id})===-1&&(o.push(t),this._passGlobalMap.set(e,o))},r.getExtendedDefineMacros=function(){return Array.from(this._preprocessor._definePairs.entries()).map(function(e){var t=e[0],i=e[1],o="#define "+t;return i.isFunction||(o+=" "+i.replacer),o}).join(`
`)},r._shaderReset=function(){this._shaderGlobalMap.clear(),this._serializingNodeStack.length=0,this._subShaderReset()},r._subShaderReset=function(){this._subShaderGlobalMap.clear(),this._passReset()},r._passReset=function(){this._passGlobalMap.clear(),this.functionAstStack.length=0,this.attributeStructListInfo.length=0,this.attributesVariableListInfo.length=0,this.varyingTypeAstNode=void 0,this._currentMainFnAst=void 0,this.varyingStructInfo={},this._globalMapReset()},r._globalMapReset=function(){var e=function(t){for(var i=$r(t),o;!(o=i()).done;){var s=o.value;s.inspected=!1,s.referenced=!1}};this._shaderGlobalMap.forEach(e),this._subShaderGlobalMap.forEach(e)},r._initShaderGlobalList=function(e){var t=this,i,o,s,l;(i=e.content.functions)==null||i.forEach(function(u){return t._shaderGlobalMap.set(u.content.name,[{ast:u,referenced:!1,name:u.content.name}])}),(o=e.content.structs)==null||o.forEach(function(u){return t._shaderGlobalMap.set(u.content.name,[{ast:u,referenced:!1,name:u.content.name}])}),(s=e.content.renderStates)==null||s.forEach(function(u){return t._shaderGlobalMap.set(u.content.variable,[{ast:u,referenced:!1,name:u.content.variable}])}),(l=e.content.variables)==null||l.forEach(function(u){return t._shaderGlobalMap.set(u.getVariable(),[{ast:u,referenced:!1,name:u.getVariable()}])})},r._initSubShaderGlobalList=function(e){var t=this,i,o,s,l;(i=e.content.functions)==null||i.forEach(function(u){t._subShaderGlobalMap.set(u.content.name,[{ast:u,referenced:!1,name:u.content.name}])}),(o=e.content.structs)==null||o.forEach(function(u){t._subShaderGlobalMap.set(u.content.name,[{ast:u,referenced:!1,name:u.content.name}])}),(s=e.content.renderStates)==null||s.forEach(function(u){t._subShaderGlobalMap.set(u.content.variable,[{ast:u,referenced:!1,name:u.content.variable}])}),(l=e.content.variables)==null||l.forEach(function(u){t._subShaderGlobalMap.set(u.getVariable(),[{ast:u,referenced:!1,name:u.getVariable()}])})},r._initPassGlobalList=function(e){var t=this,i,o,s,l=e.content;(i=l.functions)==null||i.forEach(function(u){t.setPassGlobal(u.content.name,{ast:u,referenced:!1,name:u.content.name})}),(o=l.structs)==null||o.forEach(function(u){t.setPassGlobal(u.content.name,{ast:u,referenced:!1,name:u.content.name})}),(s=l.variables)==null||s.forEach(function(u){t.setPassGlobal(u.getVariable(),{ast:u,referenced:!1,name:u.getVariable()})})},r._findShaderGlobal=function(e){return this._shaderGlobalMap.get(e)},r._findSubShaderGlobal=function(e){return this._subShaderGlobalMap.get(e)},r._findPassGlobal=function(e){return this._passGlobalMap.get(e)},r._resetPassScopeGlobalReference=function(){for(var e=$r(this._passGlobalMap),t;!(t=e()).done;){var i=t.value;i[0];for(var o=i[1],s=$r(o),l;!(l=s()).done;){var u=l.value;u.referenced=!1,u.inspected=!1}}},r._parsePassProperty=function(e,t,i,o){switch(t.content.type){case dH:if(i.vertexSource){this.addDiagnostic({severity:Na.Error,message:"multiple vertex main function found",token:t.position});return}this._resetPassScopeGlobalReference(),i.vertexSource=BE.stringifyVertexFunction(e,t,this);break;case fH:if(i.fragmentSource){this.addDiagnostic({severity:Na.Error,message:"multiple fragment main function found",token:t.position});return}this._resetPassScopeGlobalReference(),i.fragmentSource=BE.stringifyFragmentFunction(e,t,this);break;default:var s,l=t.content.value,u=(s=this.findGlobal(l.content.variable))==null?void 0:s[0].ast;u?o.push(u):this.addDiagnostic({severity:Na.Error,message:"variable definition not found",token:t.position})}},tu(n,[{key:"shaderAst",get:function(){return this._shaderAst}},{key:"parsingContext",set:function(e){this._parsingContext=e}},{key:"preprocessor",set:function(e){this._preprocessor=e}},{key:"serializingAstNode",get:function(){return this._serializingNodeStack[this._serializingNodeStack.length-1]}},{key:"currentFunctionInfo",get:function(){return this.functionAstStack[this.functionAstStack.length-1]}},{key:"currentMainFnAst",get:function(){return this._currentMainFnAst}}]),n}(),Ej=function(){function n(a){this._positionOffsetList=[],this._parseString=a}var r=n.prototype;return r.filterString=function(e){var t=this.balanceGroups(e);t&&(this._parseString=this._parseString.slice(0,t.start)+this._parseString.slice(t.end),this._positionOffsetList.push({index:t.start,line:t.line}))},r.getTextLineOffsetAt=function(e){for(var t=0,i=$r(this._positionOffsetList),o;!(o=i()).done;){var s=o.value;e>=s.index&&(t+=s.line)}return t},r.balanceGroups=function(e){for(var t=0,i=-1,o=-1,s=0,l=0;l<this._parseString.length;l++)if(this._parseString.substring(l,l+e.length)===e&&(i=l),!(i<0))if(this._parseString[l]==="{")t++;else if(this._parseString[l]==="}"){if(--t===0){o=l+1;break}}else this._parseString[l]===`
`&&s++;if(i>=0)return{start:i,end:o,line:s}},tu(n,[{key:"parseString",get:function(){return this._parseString}},{key:"positionOffsetList",get:function(){return this._positionOffsetList}}]),n}(),Tj=function(){function n(a,e){var t,i,o,s;this._line=(s=(t=e)==null?void 0:t.line)!=null?s:0;var l;this._character=(l=(i=e)==null?void 0:i.character)!=null?l:-1;var u;this._index=(u=(o=e)==null?void 0:o.index)!=null?u:-1,this._tickEnd=a}var r=n.prototype;return r.tick=function(e){return this.isEnd()?!1:(this._index++,e?(this._line++,this._character=0):this._character++,!0)},r.isEnd=function(){return this._index>=this._tickEnd},r.toPosition=function(e){return e===void 0&&(e=0),{index:this._index+e,character:this._character+e,line:this._line}},tu(n,[{key:"line",get:function(){return this._line}},{key:"character",get:function(){return this._character}},{key:"index",get:function(){return this._index}}]),n}(),VE=function(r,a,e){this.text=r,this.start=a,this.end=e},ov=function(){function n(a){this._scanningChars=[],this._text=a,this._posTicker=new Tj(a.length)}var r=n.prototype;return r.scanChunk=function(e,t){var i=this,o;this._scanningChars.length=0;for(var s=function(){return typeof e=="string"?e===i.curChar:e(i.curChar)},l=!0;this.scanTick()&&!s();){var u;if(this._text.substring(this._posTicker.index,this._posTicker.index+2)==="//")break;((u=t)==null?void 0:u.skipHeadingSpace)&&l&&/\s/.test(this.curChar)||(l=!1,this._scanningChars.push(this.curChar))}return((o=t)==null?void 0:o.keepTerminator)&&!this._posTicker.isEnd()&&this._scanningChars.push(this.curChar),{res:this._scanningChars.join(""),end:this._posTicker.isEnd()}},r.scanToken=function(){if(this._scanningChars.length=0,this._scannedToken){var e=this._scannedToken;return this._scannedToken=void 0,{res:e,end:this._posTicker.isEnd()}}for(;this.scanTick(),!this._posTicker.isEnd();){if(n.splitterRegex.test(this.curChar))return{res:this.getToken(),end:this._posTicker.isEnd()};this._scanningChars.push(this.curChar)}return{res:this.getToken(),end:!0}},r.scanTokenBetweenPair=function(e,t){for(;this.curChar!==e;){if(!/\s/.test(this.curChar))throw'Unexpected character "'+this.curChar+'" at line '+this._posTicker.line+", column "+this._posTicker.character;this.scanTick()}for(var i=1,o=[];i>0;){var s=this.scanToken(),l=s.res,u=s.end;if(u)return{res:o,end:u};l&&o.push(l),this.curChar===e?i++:this.curChar===t&&i--}return{res:o,end:this._posTicker.isEnd()}},r.scanChunkBetweenPair=function(e,t){for(;this.curChar!==e;){if(!/\s/.test(this.curChar))throw'Unexpected character "'+this.curChar+'" at line '+this._posTicker.line+", column "+this._posTicker.character;this.scanTick()}for(var i=this._posTicker.toPosition(),o=1,s=[];;){if(!this.scanTick())return{end:!0};if(this.curChar===e?e===t?o--:o++:this.curChar===t&&o--,o===0)break;s.push(this.curChar)}var l=this._posTicker.toPosition(1);return{res:new VE(s.join(""),i,l),end:this._posTicker.isEnd()}},r.splitBy=function(e){var t=[];this._scanningChars.length=0;for(var i=0;this.scanTick();)this.curChar==="("?i++:this.curChar===")"&&i--,this.curChar===e&&i===0?t.push(this.getToken()):this._scanningChars.push(this.curChar);var o=this.getToken();return o&&t.push(o),t},r.getToken=function(){if(this._scanningChars.length){var e=this._scanningChars.join(""),t=this._posTicker.toPosition(),i=this._posTicker.toPosition(-this._scanningChars.length);return this._scanningChars.length=0,new VE(e,i,t)}},r.scanTick=function(){return this._posTicker.tick(this.curChar===`
`)},tu(n,[{key:"curChar",get:function(){return this._text[this._posTicker.index]}},{key:"peek",get:function(){return this._text[this._posTicker.index+1]}},{key:"curIndex",get:function(){return this._posTicker.index}}]),n}();(function(){ov.splitterRegex=/[^#\w.]/})();var UE=function(){function n(){}return n.replaceSegments=function(a,e){if(e.length===0)return a;for(var t=0,i=[],o,s=0;s<e.length;s++)o=e[s],i.push(a.substring(t,o.startIdx)),i.push(o.replace),t=o.endIdx;return i.push(a.substring(o.endIdx)),i.join("")},n}(),Wo;(function(n){n.define="#define",n.undef="#undef",n.if="#if",n.ifdef="#ifdef",n.ifndef="#ifndef",n.else="#else",n.elif="#elif",n.endif="#endif",n.include="#include"})(Wo||(Wo={}));var Rj=function(){function n(a){this._tokenTrace=[],this._curMacroLvl=0,this._definePairs=new Map,this._replacers=[],this._source=a,this._tokenizer=new ov(a)}var r=n.prototype;return r.process=function(){for(;;){var e=this.consumeToken(this._tokenizer),t=e.res,i=e.end;if(t&&this.onToken(t),i)break}var o=UE.replaceSegments(this._source,this._replacers);return o},r.reset=function(){this._tokenTrace.length=0,this._curMacroLvl=0,this._definePairs.clear(),this._replacers.length=0},r.onToken=function(e){switch(e.text){case Wo.define:this.handleDefine(e);break;case Wo.if:case Wo.ifdef:case Wo.ifndef:case Wo.undef:this.addMacroLvl();break;case Wo.endif:this.addMacroLvl(-1);break;case Wo.include:this.handleInclude(e);break}},r.consumeToken=function(e){for(;;){var t=e.scanToken(),i=t.end,o=t.res;if(e.curChar==="/"&&e.peek==="/"){e.scanChunk(`
`);continue}if(o){var s=this._definePairs.get(o.text);if(s&&this._curMacroLvl===0){var l=s.isFunction,u=s.replacer;if(l){var c=e.scanChunkBetweenPair("(",")"),f=c.res,d=new ov(f.text),h=d.splitBy(",").map(function(v){return v.text}),_=e.curIndex+1,p=u.apply(void 0,[].concat(h));this._replacers.push({startIdx:o.start.index,endIdx:_,replace:p})}else this._replacers.push({startIdx:o.start.index,endIdx:o.end.index,replace:u})}return t}if(i)return t}},r.addMacroLvl=function(e){e===void 0&&(e=1),this._curMacroLvl+=e},r.handleInclude=function(e){var t=this._tokenizer.scanChunkBetweenPair('"','"'),i=t.res,o=Pu[i.text];if(!o)Pt.error('Shader slice "'+i.text+'" not founded.');else{var s=new n(o);s.definePairs=this._definePairs,o=s.process()}this._replacers.push({startIdx:e.start.index,endIdx:i.end.index,replace:o!=null?o:""})},r.handleDefine=function(e){var t;if(!(this._curMacroLvl>0)){this.addMacroLvl();var i=this._tokenizer,o=this.consumeToken(this._tokenizer);if(((t=o.res)==null?void 0:t.text)==="xxx")debugger;if(!o.res||o.end)throw"No defined variable";if(this._definePairs.get(o.res.text))throw"redefined macro: "+o.res.text;var s,l=i.curChar==="(";if(l){var u=i.scanTokenBetweenPair("(",")"),c=u.res;s=c.map(function(p){return p.text})}var f;if(i.curChar===`
`)f="";else{var d=i.scanChunk(`
`,{skipHeadingSpace:!0});f=d.res,f=this.extendDefineMacro(f).trimEnd()}if(l){var h=new RegExp("\\b("+s.join("|")+")\\b","g"),_=function(){for(var p=arguments.length,v=new Array(p),y=0;y<p;y++)v[y]=arguments[y];return f.replaceAll(h,function(m,g){var x=s.findIndex(function(b){return b===g});return v[x]})};this._definePairs.set(o.res.text,{isFunction:!0,replacer:_})}else this._definePairs.set(o.res.text,{isFunction:!1,replacer:f});this._replacers.push({startIdx:e.start.index,endIdx:i.curIndex,replace:""}),this.addMacroLvl(-1)}},r.extendDefineMacro=function(e){for(var t=this,i=new ov(e),o=[];;){var s=i.scanToken(),l=s.res,u=s.end;if(l){var c=this._definePairs.get(l.text);if(c){var f=c.isFunction,d=c.replacer;if(f){var h=i.scanChunkBetweenPair("(",")"),_=h.res,p=_.text.split(",").map(function(m){return t.extendDefineMacro(m)}),v=i.curIndex+1,y=d.apply(void 0,[].concat(p));o.push({startIdx:l.start.index,endIdx:v,replace:y})}else o.push({startIdx:l.start.index,endIdx:l.end.index,replace:d})}}if(u)break}return UE.replaceSegments(e,o)},tu(n,[{key:"definePairs",set:function(e){this._definePairs=e}}]),n}(),Aj=function(){function n(){this._parser=new uH,this._visitor=new bj,this._context=new Cj}var r=n.prototype;return r.parseShader=function(e){var t=new Ej(e);this._context.parsingContext=t,t.filterString("EditorProperties"),t.filterString("EditorMacros");var i=new Rj(t.parseString);this._context.preprocessor=i;var o=i.process();this._extendedSource=o,this._parser.parse(o);var s=this._parser.ruleShader();if(this._parser.errors.length>0){for(var l=$r(this._parser.errors),u;!(u=l()).done;){var c=u.value,f=t.getTextLineOffsetAt(c.token.startOffset);f&&(c.token.originStartLine=c.token.startLine,c.token.originEndLine=c.token.endLine,c.token.startLine+=f,c.token.endLine+=f)}throw Pt.error("error shaderlab source:",o),this._parser.errors}var d=this._visitor.visit(s),h=this._context.parse(d);return h},tu(n,[{key:"context",get:function(){return this._context}}]),n}(),wj="1.2.0-beta.2";console.log("Galacean ShaderLab version: "+wj);var Pj=`Shader "Lines" {
  SubShader "Default" {
     Pass "0" {
      mat4 renderer_MVPMat;
      vec3 u_color;
      
      struct a2v {
        vec4 POSITION;
      }
      
      struct v2f {
        vec4 v_pos;
        vec3 v_color;
      }
      
      VertexShader = vert;
      FragmentShader = frag;
      
      v2f vert(a2v v) {
        v2f o;
        gl_Position = renderer_MVPMat * v.POSITION;
        o.v_color = u_color;
        o.v_pos = v.POSITION;
        return o;
      } 
      
      #define S smoothstep
      vec4 scene_ElapsedTime;
      vec4 Line(vec2 uv, float speed, float height, vec3 col) {
         uv.y += S(1.0, 0.0, abs(uv.x)) * sin(scene_ElapsedTime.x * speed + uv.x * height) * 0.2;
         return vec4(S(0.06 * S(0.2, 0.9, abs(uv.x)), 0.0, abs(uv.y) - 0.004) * col, 1.0) * S(1.0, 0.3, abs(uv.x));
      } 
      void frag(v2f i) {
        vec2 iResolution = vec2(1.0, 1.0);
        vec2 uv = i.v_pos.xy / iResolution.y;
        vec4 color = vec4(0.0);
        for (float i = 0.0; i <= 7.0; i += 1.0) {
          float t = i / 5.0;
          color += Line(uv, 1.0 + t, 4.0 + t, vec3(0.2 + t * 0.7, 0.2 + t * 0.4, 0.3));
        }
        gl_FragColor = color;
      }
    }
  }
}`;const e2={Lines:Pj},Mj=new Aj;let Wi,Sg,Xu;function Oj(n){const r=new c_(n),a=new Float32Array([-1,-1,1,1,-1,1,1,1,1,1,1,1,-1,1,1,-1,-1,1]),e=new ha(n,kr.VertexBuffer,a,Dn.Static);return r.setVertexBufferBinding(e,12),r.setVertexElements([new Kt("POSITION",0,rt.Vector3,0)]),r.addSubMesh(0,6),r}function t2(n){return Gn.createSphere(n,1,128)}function Ij(n){const r=vt.create(e2[n]);return new Qa(Wi,r)}function Lj(n){const r=Ij(n);Xu.setMaterial(r)}function Nj(n){n==="plane"?Xu.mesh=Oj(Wi):n==="sphere"&&(Xu.mesh=t2(Wi))}async function Fj(){Pt.enable(),Wi=await O6.create({canvas:"canvas",shaderLab:Mj}),Wi.canvas.resizeByClientSize(),window.addEventListener("resize",()=>{Wi.canvas.resizeByClientSize()});const r=Wi.sceneManager.activeScene.createRootEntity(),a=r.createChild("cameraNode");a.transform.setPosition(1,1,10);const e=a.addComponent(rn);a.addComponent(y9);const t=r.addComponent(w9);t.camera=e;const i=r.createChild("dir_light"),o=i.addComponent(wo);o.intensity=1,i.transform.setPosition(5,5,5),i.transform.lookAt(new z(0,0,0));const s=new ri(Wi);s.diffuseMode=el.SolidColor,s.diffuseSolidColor=new Me(1,1,1,1),Sg=r.createChild("shaderlab"),Xu=Sg.addComponent(yr),Xu.mesh=t2(Wi);const l=new Ji(Wi);l.baseColor=new Me(1,1,1,1),l.metallic=0,l.roughness=0,Xu.setMaterial(l),a.transform.lookAt(Sg.transform.position),Wi.run()}const{Header:Dj,Sider:Bj,Footer:kj,Content:zE}=Zm,Vj=Object.keys(e2).map(n=>({key:n,label:n}));function Uj(){Wt.useEffect(()=>{Fj()},[]);const{token:{colorBgContainer:n,borderRadiusLG:r}}=_z.useToken(),a=t=>{Lj(t.key)},e=t=>{Nj(t)};return Wt.createElement(Zm,{style:{display:"flex",flexDirection:"column",height:"100%"}},Wt.createElement(Dj,{style:{display:"flex",alignItems:"center",height:"64px"}},Wt.createElement("div",{className:"demo-logo"})),Wt.createElement(zE,{style:{padding:"0 48px",flex:1}},Wt.createElement(Zm,{style:{padding:"24px 0",height:"100%",boxSizing:"border-box",background:n,borderRadius:r}},Wt.createElement(Bj,{style:{background:n},width:200},Wt.createElement(KU,{onClick:a,mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["Lines"],style:{height:"100%"},items:Vj})),Wt.createElement(zE,{style:{padding:"0 24px",minHeight:280,position:"relative"}},Wt.createElement("canvas",{id:"canvas",style:{width:"100%",height:"100%"}}),Wt.createElement(t4,{style:{position:"absolute",left:"60px",top:"20px"},defaultValue:"Sphere",onChange:e,options:[{value:"sphere",label:"Sphere"},{value:"plane",label:"Plane"}]})))),Wt.createElement(kj,{style:{textAlign:"center",height:"64px"}},"Galacean Engine"))}IR.render(Wt.createElement(Wt.StrictMode,null,Wt.createElement(Uj,null)),document.getElementById("root"));
